(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=e(a);fetch(a.href,s)}})();function M0(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Bx={exports:{}},ug={};var QT;function p4(){if(QT)return ug;QT=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,a,s){var o=null;if(s!==void 0&&(o=""+s),a.key!==void 0&&(o=""+a.key),"key"in a){s={};for(var c in a)c!=="key"&&(s[c]=a[c])}else s=a;return a=s.ref,{$$typeof:i,type:n,key:o,ref:a!==void 0?a:null,props:s}}return ug.Fragment=t,ug.jsx=e,ug.jsxs=e,ug}var JT;function m4(){return JT||(JT=1,Bx.exports=p4()),Bx.exports}var O=m4(),Fx={exports:{}},An={};var $T;function g4(){if($T)return An;$T=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),x=Symbol.iterator;function b(G){return G===null||typeof G!="object"?null:(G=x&&G[x]||G["@@iterator"],typeof G=="function"?G:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,C={};function w(G,nt,ft){this.props=G,this.context=nt,this.refs=C,this.updater=ft||T}w.prototype.isReactComponent={},w.prototype.setState=function(G,nt){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,nt,"setState")},w.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function N(){}N.prototype=w.prototype;function I(G,nt,ft){this.props=G,this.context=nt,this.refs=C,this.updater=ft||T}var z=I.prototype=new N;z.constructor=I,R(z,w.prototype),z.isPureReactComponent=!0;var F=Array.isArray;function H(){}var q={H:null,A:null,T:null,S:null},Z=Object.prototype.hasOwnProperty;function B(G,nt,ft){var mt=ft.ref;return{$$typeof:i,type:G,key:nt,ref:mt!==void 0?mt:null,props:ft}}function V(G,nt){return B(G.type,nt,G.props)}function Q(G){return typeof G=="object"&&G!==null&&G.$$typeof===i}function J(G){var nt={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(ft){return nt[ft]})}var rt=/\/+/g;function ut(G,nt){return typeof G=="object"&&G!==null&&G.key!=null?J(""+G.key):nt.toString(36)}function vt(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(H,H):(G.status="pending",G.then(function(nt){G.status==="pending"&&(G.status="fulfilled",G.value=nt)},function(nt){G.status==="pending"&&(G.status="rejected",G.reason=nt)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function j(G,nt,ft,mt,xt){var ht=typeof G;(ht==="undefined"||ht==="boolean")&&(G=null);var _t=!1;if(G===null)_t=!0;else switch(ht){case"bigint":case"string":case"number":_t=!0;break;case"object":switch(G.$$typeof){case i:case t:_t=!0;break;case g:return _t=G._init,j(_t(G._payload),nt,ft,mt,xt)}}if(_t)return xt=xt(G),_t=mt===""?"."+ut(G,0):mt,F(xt)?(ft="",_t!=null&&(ft=_t.replace(rt,"$&/")+"/"),j(xt,nt,ft,"",function(te){return te})):xt!=null&&(Q(xt)&&(xt=V(xt,ft+(xt.key==null||G&&G.key===xt.key?"":(""+xt.key).replace(rt,"$&/")+"/")+_t)),nt.push(xt)),1;_t=0;var At=mt===""?".":mt+":";if(F(G))for(var $t=0;$t<G.length;$t++)mt=G[$t],ht=At+ut(mt,$t),_t+=j(mt,nt,ft,ht,xt);else if($t=b(G),typeof $t=="function")for(G=$t.call(G),$t=0;!(mt=G.next()).done;)mt=mt.value,ht=At+ut(mt,$t++),_t+=j(mt,nt,ft,ht,xt);else if(ht==="object"){if(typeof G.then=="function")return j(vt(G),nt,ft,mt,xt);throw nt=String(G),Error("Objects are not valid as a React child (found: "+(nt==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":nt)+"). If you meant to render a collection of children, use an array instead.")}return _t}function K(G,nt,ft){if(G==null)return G;var mt=[],xt=0;return j(G,mt,"","",function(ht){return nt.call(ft,ht,xt++)}),mt}function et(G){if(G._status===-1){var nt=G._result;nt=nt(),nt.then(function(ft){(G._status===0||G._status===-1)&&(G._status=1,G._result=ft)},function(ft){(G._status===0||G._status===-1)&&(G._status=2,G._result=ft)}),G._status===-1&&(G._status=0,G._result=nt)}if(G._status===1)return G._result.default;throw G._result}var dt=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var nt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(nt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)},lt={map:K,forEach:function(G,nt,ft){K(G,function(){nt.apply(this,arguments)},ft)},count:function(G){var nt=0;return K(G,function(){nt++}),nt},toArray:function(G){return K(G,function(nt){return nt})||[]},only:function(G){if(!Q(G))throw Error("React.Children.only expected to receive a single React element child.");return G}};return An.Activity=y,An.Children=lt,An.Component=w,An.Fragment=e,An.Profiler=a,An.PureComponent=I,An.StrictMode=n,An.Suspense=f,An.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=q,An.__COMPILER_RUNTIME={__proto__:null,c:function(G){return q.H.useMemoCache(G)}},An.cache=function(G){return function(){return G.apply(null,arguments)}},An.cacheSignal=function(){return null},An.cloneElement=function(G,nt,ft){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var mt=R({},G.props),xt=G.key;if(nt!=null)for(ht in nt.key!==void 0&&(xt=""+nt.key),nt)!Z.call(nt,ht)||ht==="key"||ht==="__self"||ht==="__source"||ht==="ref"&&nt.ref===void 0||(mt[ht]=nt[ht]);var ht=arguments.length-2;if(ht===1)mt.children=ft;else if(1<ht){for(var _t=Array(ht),At=0;At<ht;At++)_t[At]=arguments[At+2];mt.children=_t}return B(G.type,xt,mt)},An.createContext=function(G){return G={$$typeof:o,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:s,_context:G},G},An.createElement=function(G,nt,ft){var mt,xt={},ht=null;if(nt!=null)for(mt in nt.key!==void 0&&(ht=""+nt.key),nt)Z.call(nt,mt)&&mt!=="key"&&mt!=="__self"&&mt!=="__source"&&(xt[mt]=nt[mt]);var _t=arguments.length-2;if(_t===1)xt.children=ft;else if(1<_t){for(var At=Array(_t),$t=0;$t<_t;$t++)At[$t]=arguments[$t+2];xt.children=At}if(G&&G.defaultProps)for(mt in _t=G.defaultProps,_t)xt[mt]===void 0&&(xt[mt]=_t[mt]);return B(G,ht,xt)},An.createRef=function(){return{current:null}},An.forwardRef=function(G){return{$$typeof:c,render:G}},An.isValidElement=Q,An.lazy=function(G){return{$$typeof:g,_payload:{_status:-1,_result:G},_init:et}},An.memo=function(G,nt){return{$$typeof:d,type:G,compare:nt===void 0?null:nt}},An.startTransition=function(G){var nt=q.T,ft={};q.T=ft;try{var mt=G(),xt=q.S;xt!==null&&xt(ft,mt),typeof mt=="object"&&mt!==null&&typeof mt.then=="function"&&mt.then(H,dt)}catch(ht){dt(ht)}finally{nt!==null&&ft.types!==null&&(nt.types=ft.types),q.T=nt}},An.unstable_useCacheRefresh=function(){return q.H.useCacheRefresh()},An.use=function(G){return q.H.use(G)},An.useActionState=function(G,nt,ft){return q.H.useActionState(G,nt,ft)},An.useCallback=function(G,nt){return q.H.useCallback(G,nt)},An.useContext=function(G){return q.H.useContext(G)},An.useDebugValue=function(){},An.useDeferredValue=function(G,nt){return q.H.useDeferredValue(G,nt)},An.useEffect=function(G,nt){return q.H.useEffect(G,nt)},An.useEffectEvent=function(G){return q.H.useEffectEvent(G)},An.useId=function(){return q.H.useId()},An.useImperativeHandle=function(G,nt,ft){return q.H.useImperativeHandle(G,nt,ft)},An.useInsertionEffect=function(G,nt){return q.H.useInsertionEffect(G,nt)},An.useLayoutEffect=function(G,nt){return q.H.useLayoutEffect(G,nt)},An.useMemo=function(G,nt){return q.H.useMemo(G,nt)},An.useOptimistic=function(G,nt){return q.H.useOptimistic(G,nt)},An.useReducer=function(G,nt,ft){return q.H.useReducer(G,nt,ft)},An.useRef=function(G){return q.H.useRef(G)},An.useState=function(G){return q.H.useState(G)},An.useSyncExternalStore=function(G,nt,ft){return q.H.useSyncExternalStore(G,nt,ft)},An.useTransition=function(){return q.H.useTransition()},An.version="19.2.3",An}var tA;function em(){return tA||(tA=1,Fx.exports=g4()),Fx.exports}var ct=em();const Lu=M0(ct);var kx={exports:{}},fg={},Vx={exports:{}},Hx={};var eA;function v4(){return eA||(eA=1,(function(i){function t(j,K){var et=j.length;j.push(K);t:for(;0<et;){var dt=et-1>>>1,lt=j[dt];if(0<a(lt,K))j[dt]=K,j[et]=lt,et=dt;else break t}}function e(j){return j.length===0?null:j[0]}function n(j){if(j.length===0)return null;var K=j[0],et=j.pop();if(et!==K){j[0]=et;t:for(var dt=0,lt=j.length,G=lt>>>1;dt<G;){var nt=2*(dt+1)-1,ft=j[nt],mt=nt+1,xt=j[mt];if(0>a(ft,et))mt<lt&&0>a(xt,ft)?(j[dt]=xt,j[mt]=et,dt=mt):(j[dt]=ft,j[nt]=et,dt=nt);else if(mt<lt&&0>a(xt,et))j[dt]=xt,j[mt]=et,dt=mt;else break t}}return K}function a(j,K){var et=j.sortIndex-K.sortIndex;return et!==0?et:j.id-K.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();i.unstable_now=function(){return o.now()-c}}var f=[],d=[],g=1,y=null,x=3,b=!1,T=!1,R=!1,C=!1,w=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function z(j){for(var K=e(d);K!==null;){if(K.callback===null)n(d);else if(K.startTime<=j)n(d),K.sortIndex=K.expirationTime,t(f,K);else break;K=e(d)}}function F(j){if(R=!1,z(j),!T)if(e(f)!==null)T=!0,H||(H=!0,J());else{var K=e(d);K!==null&&vt(F,K.startTime-j)}}var H=!1,q=-1,Z=5,B=-1;function V(){return C?!0:!(i.unstable_now()-B<Z)}function Q(){if(C=!1,H){var j=i.unstable_now();B=j;var K=!0;try{t:{T=!1,R&&(R=!1,N(q),q=-1),b=!0;var et=x;try{e:{for(z(j),y=e(f);y!==null&&!(y.expirationTime>j&&V());){var dt=y.callback;if(typeof dt=="function"){y.callback=null,x=y.priorityLevel;var lt=dt(y.expirationTime<=j);if(j=i.unstable_now(),typeof lt=="function"){y.callback=lt,z(j),K=!0;break e}y===e(f)&&n(f),z(j)}else n(f);y=e(f)}if(y!==null)K=!0;else{var G=e(d);G!==null&&vt(F,G.startTime-j),K=!1}}break t}finally{y=null,x=et,b=!1}K=void 0}}finally{K?J():H=!1}}}var J;if(typeof I=="function")J=function(){I(Q)};else if(typeof MessageChannel<"u"){var rt=new MessageChannel,ut=rt.port2;rt.port1.onmessage=Q,J=function(){ut.postMessage(null)}}else J=function(){w(Q,0)};function vt(j,K){q=w(function(){j(i.unstable_now())},K)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(j){j.callback=null},i.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<j?Math.floor(1e3/j):5},i.unstable_getCurrentPriorityLevel=function(){return x},i.unstable_next=function(j){switch(x){case 1:case 2:case 3:var K=3;break;default:K=x}var et=x;x=K;try{return j()}finally{x=et}},i.unstable_requestPaint=function(){C=!0},i.unstable_runWithPriority=function(j,K){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var et=x;x=j;try{return K()}finally{x=et}},i.unstable_scheduleCallback=function(j,K,et){var dt=i.unstable_now();switch(typeof et=="object"&&et!==null?(et=et.delay,et=typeof et=="number"&&0<et?dt+et:dt):et=dt,j){case 1:var lt=-1;break;case 2:lt=250;break;case 5:lt=1073741823;break;case 4:lt=1e4;break;default:lt=5e3}return lt=et+lt,j={id:g++,callback:K,priorityLevel:j,startTime:et,expirationTime:lt,sortIndex:-1},et>dt?(j.sortIndex=et,t(d,j),e(f)===null&&j===e(d)&&(R?(N(q),q=-1):R=!0,vt(F,et-dt))):(j.sortIndex=lt,t(f,j),T||b||(T=!0,H||(H=!0,J()))),j},i.unstable_shouldYield=V,i.unstable_wrapCallback=function(j){var K=x;return function(){var et=x;x=K;try{return j.apply(this,arguments)}finally{x=et}}}})(Hx)),Hx}var nA;function y4(){return nA||(nA=1,Vx.exports=v4()),Vx.exports}var Gx={exports:{}},$s={};var iA;function _4(){if(iA)return $s;iA=1;var i=em();function t(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)d+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(f,d,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:f,containerInfo:d,implementation:g}}var o=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return $s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,$s.createPortal=function(f,d){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return s(f,d,null,g)},$s.flushSync=function(f){var d=o.T,g=n.p;try{if(o.T=null,n.p=2,f)return f()}finally{o.T=d,n.p=g,n.d.f()}},$s.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,n.d.C(f,d))},$s.prefetchDNS=function(f){typeof f=="string"&&n.d.D(f)},$s.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var g=d.as,y=c(g,d.crossOrigin),x=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;g==="style"?n.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:y,integrity:x,fetchPriority:b}):g==="script"&&n.d.X(f,{crossOrigin:y,integrity:x,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},$s.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var g=c(d.as,d.crossOrigin);n.d.M(f,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&n.d.M(f)},$s.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var g=d.as,y=c(g,d.crossOrigin);n.d.L(f,g,{crossOrigin:y,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},$s.preloadModule=function(f,d){if(typeof f=="string")if(d){var g=c(d.as,d.crossOrigin);n.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else n.d.m(f)},$s.requestFormReset=function(f){n.d.r(f)},$s.unstable_batchedUpdates=function(f,d){return f(d)},$s.useFormState=function(f,d,g){return o.H.useFormState(f,d,g)},$s.useFormStatus=function(){return o.H.useHostTransitionStatus()},$s.version="19.2.3",$s}var aA;function Gw(){if(aA)return Gx.exports;aA=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),Gx.exports=_4(),Gx.exports}var sA;function x4(){if(sA)return fg;sA=1;var i=y4(),t=em(),e=Gw();function n(r){var l="https://react.dev/errors/"+r;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)l+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+r+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function s(r){var l=r,m=r;if(r.alternate)for(;l.return;)l=l.return;else{r=l;do l=r,(l.flags&4098)!==0&&(m=l.return),r=l.return;while(r)}return l.tag===3?m:null}function o(r){if(r.tag===13){var l=r.memoizedState;if(l===null&&(r=r.alternate,r!==null&&(l=r.memoizedState)),l!==null)return l.dehydrated}return null}function c(r){if(r.tag===31){var l=r.memoizedState;if(l===null&&(r=r.alternate,r!==null&&(l=r.memoizedState)),l!==null)return l.dehydrated}return null}function f(r){if(s(r)!==r)throw Error(n(188))}function d(r){var l=r.alternate;if(!l){if(l=s(r),l===null)throw Error(n(188));return l!==r?null:r}for(var m=r,_=l;;){var A=m.return;if(A===null)break;var D=A.alternate;if(D===null){if(_=A.return,_!==null){m=_;continue}break}if(A.child===D.child){for(D=A.child;D;){if(D===m)return f(A),r;if(D===_)return f(A),l;D=D.sibling}throw Error(n(188))}if(m.return!==_.return)m=A,_=D;else{for(var X=!1,st=A.child;st;){if(st===m){X=!0,m=A,_=D;break}if(st===_){X=!0,_=A,m=D;break}st=st.sibling}if(!X){for(st=D.child;st;){if(st===m){X=!0,m=D,_=A;break}if(st===_){X=!0,_=D,m=A;break}st=st.sibling}if(!X)throw Error(n(189))}}if(m.alternate!==_)throw Error(n(190))}if(m.tag!==3)throw Error(n(188));return m.stateNode.current===m?r:l}function g(r){var l=r.tag;if(l===5||l===26||l===27||l===6)return r;for(r=r.child;r!==null;){if(l=g(r),l!==null)return l;r=r.sibling}return null}var y=Object.assign,x=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),I=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function J(r){return r===null||typeof r!="object"?null:(r=Q&&r[Q]||r["@@iterator"],typeof r=="function"?r:null)}var rt=Symbol.for("react.client.reference");function ut(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===rt?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case R:return"Fragment";case w:return"Profiler";case C:return"StrictMode";case F:return"Suspense";case H:return"SuspenseList";case B:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case T:return"Portal";case I:return r.displayName||"Context";case N:return(r._context.displayName||"Context")+".Consumer";case z:var l=r.render;return r=r.displayName,r||(r=l.displayName||l.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case q:return l=r.displayName||null,l!==null?l:ut(r.type)||"Memo";case Z:l=r._payload,r=r._init;try{return ut(r(l))}catch{}}return null}var vt=Array.isArray,j=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,et={pending:!1,data:null,method:null,action:null},dt=[],lt=-1;function G(r){return{current:r}}function nt(r){0>lt||(r.current=dt[lt],dt[lt]=null,lt--)}function ft(r,l){lt++,dt[lt]=r.current,r.current=l}var mt=G(null),xt=G(null),ht=G(null),_t=G(null);function At(r,l){switch(ft(ht,l),ft(xt,r),ft(mt,null),l.nodeType){case 9:case 11:r=(r=l.documentElement)&&(r=r.namespaceURI)?xT(r):0;break;default:if(r=l.tagName,l=l.namespaceURI)l=xT(l),r=ST(l,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}nt(mt),ft(mt,r)}function $t(){nt(mt),nt(xt),nt(ht)}function te(r){r.memoizedState!==null&&ft(_t,r);var l=mt.current,m=ST(l,r.type);l!==m&&(ft(xt,r),ft(mt,m))}function qt(r){xt.current===r&&(nt(mt),nt(xt)),_t.current===r&&(nt(_t),rg._currentValue=et)}var ne,Se;function Nt(r){if(ne===void 0)try{throw Error()}catch(m){var l=m.stack.trim().match(/\n( *(at )?)/);ne=l&&l[1]||"",Se=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ne+r+Se}var Vt=!1;function Ft(r,l){if(!r||Vt)return"";Vt=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var _={DetermineComponentFrameRoot:function(){try{if(l){var _e=function(){throw Error()};if(Object.defineProperty(_e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_e,[])}catch(oe){var Jt=oe}Reflect.construct(r,[],_e)}else{try{_e.call()}catch(oe){Jt=oe}r.call(_e.prototype)}}else{try{throw Error()}catch(oe){Jt=oe}(_e=r())&&typeof _e.catch=="function"&&_e.catch(function(){})}}catch(oe){if(oe&&Jt&&typeof oe.stack=="string")return[oe.stack,Jt.stack]}return[null,null]}};_.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(_.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(_.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var D=_.DetermineComponentFrameRoot(),X=D[0],st=D[1];if(X&&st){var Tt=X.split(`
`),Wt=st.split(`
`);for(A=_=0;_<Tt.length&&!Tt[_].includes("DetermineComponentFrameRoot");)_++;for(;A<Wt.length&&!Wt[A].includes("DetermineComponentFrameRoot");)A++;if(_===Tt.length||A===Wt.length)for(_=Tt.length-1,A=Wt.length-1;1<=_&&0<=A&&Tt[_]!==Wt[A];)A--;for(;1<=_&&0<=A;_--,A--)if(Tt[_]!==Wt[A]){if(_!==1||A!==1)do if(_--,A--,0>A||Tt[_]!==Wt[A]){var fe=`
`+Tt[_].replace(" at new "," at ");return r.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",r.displayName)),fe}while(1<=_&&0<=A);break}}}finally{Vt=!1,Error.prepareStackTrace=m}return(m=r?r.displayName||r.name:"")?Nt(m):""}function re(r,l){switch(r.tag){case 26:case 27:case 5:return Nt(r.type);case 16:return Nt("Lazy");case 13:return r.child!==l&&l!==null?Nt("Suspense Fallback"):Nt("Suspense");case 19:return Nt("SuspenseList");case 0:case 15:return Ft(r.type,!1);case 11:return Ft(r.type.render,!1);case 1:return Ft(r.type,!0);case 31:return Nt("Activity");default:return""}}function at(r){try{var l="",m=null;do l+=re(r,m),m=r,r=r.return;while(r);return l}catch(_){return`
Error generating stack: `+_.message+`
`+_.stack}}var ue=Object.prototype.hasOwnProperty,Zt=i.unstable_scheduleCallback,Lt=i.unstable_cancelCallback,ee=i.unstable_shouldYield,$=i.unstable_requestPaint,Y=i.unstable_now,yt=i.unstable_getCurrentPriorityLevel,Bt=i.unstable_ImmediatePriority,Dt=i.unstable_UserBlockingPriority,Ct=i.unstable_NormalPriority,ve=i.unstable_LowPriority,he=i.unstable_IdlePriority,be=i.log,Ce=i.unstable_setDisableYieldValue,Gt=null,Qt=null;function se(r){if(typeof be=="function"&&Ce(r),Qt&&typeof Qt.setStrictMode=="function")try{Qt.setStrictMode(Gt,r)}catch{}}var gt=Math.clz32?Math.clz32:St,wt=Math.log,xe=Math.LN2;function St(r){return r>>>=0,r===0?32:31-(wt(r)/xe|0)|0}var ie=256,le=262144,Ae=4194304;function ce(r){var l=r&42;if(l!==0)return l;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function jt(r,l,m){var _=r.pendingLanes;if(_===0)return 0;var A=0,D=r.suspendedLanes,X=r.pingedLanes;r=r.warmLanes;var st=_&134217727;return st!==0?(_=st&~D,_!==0?A=ce(_):(X&=st,X!==0?A=ce(X):m||(m=st&~r,m!==0&&(A=ce(m))))):(st=_&~D,st!==0?A=ce(st):X!==0?A=ce(X):m||(m=_&~r,m!==0&&(A=ce(m)))),A===0?0:l!==0&&l!==A&&(l&D)===0&&(D=A&-A,m=l&-l,D>=m||D===32&&(m&4194048)!==0)?l:A}function me(r,l){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&l)===0}function Re(r,l){switch(r){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Le(){var r=Ae;return Ae<<=1,(Ae&62914560)===0&&(Ae=4194304),r}function qe(r){for(var l=[],m=0;31>m;m++)l.push(r);return l}function bn(r,l){r.pendingLanes|=l,l!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Bn(r,l,m,_,A,D){var X=r.pendingLanes;r.pendingLanes=m,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=m,r.entangledLanes&=m,r.errorRecoveryDisabledLanes&=m,r.shellSuspendCounter=0;var st=r.entanglements,Tt=r.expirationTimes,Wt=r.hiddenUpdates;for(m=X&~m;0<m;){var fe=31-gt(m),_e=1<<fe;st[fe]=0,Tt[fe]=-1;var Jt=Wt[fe];if(Jt!==null)for(Wt[fe]=null,fe=0;fe<Jt.length;fe++){var oe=Jt[fe];oe!==null&&(oe.lane&=-536870913)}m&=~_e}_!==0&&Ai(r,_,0),D!==0&&A===0&&r.tag!==0&&(r.suspendedLanes|=D&~(X&~l))}function Ai(r,l,m){r.pendingLanes|=l,r.suspendedLanes&=~l;var _=31-gt(l);r.entangledLanes|=l,r.entanglements[_]=r.entanglements[_]|1073741824|m&261930}function ia(r,l){var m=r.entangledLanes|=l;for(r=r.entanglements;m;){var _=31-gt(m),A=1<<_;A&l|r[_]&l&&(r[_]|=l),m&=~A}}function Ca(r,l){var m=l&-l;return m=(m&42)!==0?1:Yn(m),(m&(r.suspendedLanes|l))!==0?0:m}function Yn(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function ke(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Fi(){var r=K.p;return r!==0?r:(r=window.event,r===void 0?32:jT(r.type))}function si(r,l){var m=K.p;try{return K.p=r,l()}finally{K.p=m}}var Hn=Math.random().toString(36).slice(2),cn="__reactFiber$"+Hn,Li="__reactProps$"+Hn,ga="__reactContainer$"+Hn,fs="__reactEvents$"+Hn,cr="__reactListeners$"+Hn,lo="__reactHandles$"+Hn,ur="__reactResources$"+Hn,fr="__reactMarker$"+Hn;function Gr(r){delete r[cn],delete r[Li],delete r[fs],delete r[cr],delete r[lo]}function yi(r){var l=r[cn];if(l)return l;for(var m=r.parentNode;m;){if(l=m[ga]||m[cn]){if(m=l.alternate,l.child!==null||m!==null&&m.child!==null)for(r=CT(r);r!==null;){if(m=r[cn])return m;r=CT(r)}return l}r=m,m=r.parentNode}return null}function Zn(r){if(r=r[cn]||r[ga]){var l=r.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return r}return null}function va(r){var l=r.tag;if(l===5||l===26||l===27||l===6)return r.stateNode;throw Error(n(33))}function Xe(r){var l=r[ur];return l||(l=r[ur]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function it(r){r[fr]=!0}var Rt=new Set,Xt={};function kt(r,l){Ut(r,l),Ut(r+"Capture",l)}function Ut(r,l){for(Xt[r]=l,r=0;r<l.length;r++)Rt.add(l[r])}var Ee=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ue={},De={};function Pe(r){return ue.call(De,r)?!0:ue.call(Ue,r)?!1:Ee.test(r)?De[r]=!0:(Ue[r]=!0,!1)}function Me(r,l,m){if(Pe(l))if(m===null)r.removeAttribute(l);else{switch(typeof m){case"undefined":case"function":case"symbol":r.removeAttribute(l);return;case"boolean":var _=l.toLowerCase().slice(0,5);if(_!=="data-"&&_!=="aria-"){r.removeAttribute(l);return}}r.setAttribute(l,""+m)}}function Oe(r,l,m){if(m===null)r.removeAttribute(l);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttribute(l,""+m)}}function Ve(r,l,m,_){if(_===null)r.removeAttribute(m);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(m);return}r.setAttributeNS(l,m,""+_)}}function Je(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function xn(r){var l=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Kn(r,l,m){var _=Object.getOwnPropertyDescriptor(r.constructor.prototype,l);if(!r.hasOwnProperty(l)&&typeof _<"u"&&typeof _.get=="function"&&typeof _.set=="function"){var A=_.get,D=_.set;return Object.defineProperty(r,l,{configurable:!0,get:function(){return A.call(this)},set:function(X){m=""+X,D.call(this,X)}}),Object.defineProperty(r,l,{enumerable:_.enumerable}),{getValue:function(){return m},setValue:function(X){m=""+X},stopTracking:function(){r._valueTracker=null,delete r[l]}}}}function ze(r){if(!r._valueTracker){var l=xn(r)?"checked":"value";r._valueTracker=Kn(r,l,""+r[l])}}function nn(r){if(!r)return!1;var l=r._valueTracker;if(!l)return!0;var m=l.getValue(),_="";return r&&(_=xn(r)?r.checked?"true":"false":r.value),r=_,r!==m?(l.setValue(r),!0):!1}function Ye(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Cn=/[\n"\\]/g;function je(r){return r.replace(Cn,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function qi(r,l,m,_,A,D,X,st){r.name="",X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"?r.type=X:r.removeAttribute("type"),l!=null?X==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+Je(l)):r.value!==""+Je(l)&&(r.value=""+Je(l)):X!=="submit"&&X!=="reset"||r.removeAttribute("value"),l!=null?ai(r,X,Je(l)):m!=null?ai(r,X,Je(m)):_!=null&&r.removeAttribute("value"),A==null&&D!=null&&(r.defaultChecked=!!D),A!=null&&(r.checked=A&&typeof A!="function"&&typeof A!="symbol"),st!=null&&typeof st!="function"&&typeof st!="symbol"&&typeof st!="boolean"?r.name=""+Je(st):r.removeAttribute("name")}function ya(r,l,m,_,A,D,X,st){if(D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(r.type=D),l!=null||m!=null){if(!(D!=="submit"&&D!=="reset"||l!=null)){ze(r);return}m=m!=null?""+Je(m):"",l=l!=null?""+Je(l):m,st||l===r.value||(r.value=l),r.defaultValue=l}_=_??A,_=typeof _!="function"&&typeof _!="symbol"&&!!_,r.checked=st?r.checked:!!_,r.defaultChecked=!!_,X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"&&(r.name=X),ze(r)}function ai(r,l,m){l==="number"&&Ye(r.ownerDocument)===r||r.defaultValue===""+m||(r.defaultValue=""+m)}function Fn(r,l,m,_){if(r=r.options,l){l={};for(var A=0;A<m.length;A++)l["$"+m[A]]=!0;for(m=0;m<r.length;m++)A=l.hasOwnProperty("$"+r[m].value),r[m].selected!==A&&(r[m].selected=A),A&&_&&(r[m].defaultSelected=!0)}else{for(m=""+Je(m),l=null,A=0;A<r.length;A++){if(r[A].value===m){r[A].selected=!0,_&&(r[A].defaultSelected=!0);return}l!==null||r[A].disabled||(l=r[A])}l!==null&&(l.selected=!0)}}function Mn(r,l,m){if(l!=null&&(l=""+Je(l),l!==r.value&&(r.value=l),m==null)){r.defaultValue!==l&&(r.defaultValue=l);return}r.defaultValue=m!=null?""+Je(m):""}function Qn(r,l,m,_){if(l==null){if(_!=null){if(m!=null)throw Error(n(92));if(vt(_)){if(1<_.length)throw Error(n(93));_=_[0]}m=_}m==null&&(m=""),l=m}m=Je(l),r.defaultValue=m,_=r.textContent,_===m&&_!==""&&_!==null&&(r.value=_),ze(r)}function ci(r,l){if(l){var m=r.firstChild;if(m&&m===r.lastChild&&m.nodeType===3){m.nodeValue=l;return}}r.textContent=l}var Ei=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _i(r,l,m){var _=l.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?_?r.setProperty(l,""):l==="float"?r.cssFloat="":r[l]="":_?r.setProperty(l,m):typeof m!="number"||m===0||Ei.has(l)?l==="float"?r.cssFloat=m:r[l]=(""+m).trim():r[l]=m+"px"}function Es(r,l,m){if(l!=null&&typeof l!="object")throw Error(n(62));if(r=r.style,m!=null){for(var _ in m)!m.hasOwnProperty(_)||l!=null&&l.hasOwnProperty(_)||(_.indexOf("--")===0?r.setProperty(_,""):_==="float"?r.cssFloat="":r[_]="");for(var A in l)_=l[A],l.hasOwnProperty(A)&&m[A]!==_&&_i(r,A,_)}else for(var D in l)l.hasOwnProperty(D)&&_i(r,D,l[D])}function ki(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ho=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),co=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function hs(r){return co.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Xi(){}var Gs=null;function uo(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ws=null,on=null;function Fa(r){var l=Zn(r);if(l&&(r=l.stateNode)){var m=r[Li]||null;t:switch(r=l.stateNode,l.type){case"input":if(qi(r,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),l=m.name,m.type==="radio"&&l!=null){for(m=r;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+je(""+l)+'"][type="radio"]'),l=0;l<m.length;l++){var _=m[l];if(_!==r&&_.form===r.form){var A=_[Li]||null;if(!A)throw Error(n(90));qi(_,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(l=0;l<m.length;l++)_=m[l],_.form===r.form&&nn(_)}break t;case"textarea":Mn(r,m.value,m.defaultValue);break t;case"select":l=m.value,l!=null&&Fn(r,!!m.multiple,l,!1)}}}var Gn=!1;function fo(r,l,m){if(Gn)return r(l,m);Gn=!0;try{var _=r(l);return _}finally{if(Gn=!1,(ws!==null||on!==null)&&(ot(),ws&&(l=ws,r=on,on=ws=null,Fa(l),r)))for(l=0;l<r.length;l++)Fa(r[l])}}function Cs(r,l){var m=r.stateNode;if(m===null)return null;var _=m[Li]||null;if(_===null)return null;m=_[l];t:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(r=r.type,_=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!_;break t;default:r=!1}if(r)return null;if(m&&typeof m!="function")throw Error(n(231,l,typeof m));return m}var Qa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_a=!1;if(Qa)try{var Ja={};Object.defineProperty(Ja,"passive",{get:function(){_a=!0}}),window.addEventListener("test",Ja,Ja),window.removeEventListener("test",Ja,Ja)}catch{_a=!1}var Rs=null,hr=null,ui=null;function Ds(){if(ui)return ui;var r,l=hr,m=l.length,_,A="value"in Rs?Rs.value:Rs.textContent,D=A.length;for(r=0;r<m&&l[r]===A[r];r++);var X=m-r;for(_=1;_<=X&&l[m-_]===A[D-_];_++);return ui=A.slice(r,1<_?1-_:void 0)}function dr(r){var l=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&l===13&&(r=13)):r=l,r===10&&(r=13),32<=r||r===13?r:0}function js(){return!0}function ho(){return!1}function Si(r){function l(m,_,A,D,X){this._reactName=m,this._targetInst=A,this.type=_,this.nativeEvent=D,this.target=X,this.currentTarget=null;for(var st in r)r.hasOwnProperty(st)&&(m=r[st],this[st]=m?m(D):D[st]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?js:ho,this.isPropagationStopped=ho,this}return y(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=js)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=js)},persist:function(){},isPersistent:js}),l}var Ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},po=Si(Ls),ka=y({},Ls,{view:0,detail:0}),yn=Si(ka),gl,Vi,ds,Yi=y({},ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wc,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ds&&(ds&&r.type==="mousemove"?(gl=r.screenX-ds.screenX,Vi=r.screenY-ds.screenY):Vi=gl=0,ds=r),gl)},movementY:function(r){return"movementY"in r?r.movementY:Vi}}),Fu=Si(Yi),Oi=y({},Yi,{dataTransfer:0}),vl=Si(Oi),nc=y({},ka,{relatedTarget:0}),ic=Si(nc),Ra=y({},Ls,{animationName:0,elapsedTime:0,pseudoElement:0}),Va=Si(Ra),Zi=y({},Ls,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Hi=Si(Zi),jc=y({},Ls,{data:0}),ku=Si(jc),mo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gu(r){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(r):(r=Hu[r])?!!l[r]:!1}function Wc(){return Gu}var ju=y({},ka,{key:function(r){if(r.key){var l=mo[r.key]||r.key;if(l!=="Unidentified")return l}return r.type==="keypress"?(r=dr(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Vu[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wc,charCode:function(r){return r.type==="keypress"?dr(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?dr(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Wu=Si(ju),yd=y({},Yi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qu=Si(yd),Xu=y({},ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wc}),go=Si(Xu),Yu=y({},Ls,{propertyName:0,elapsedTime:0,pseudoElement:0}),_d=Si(Yu),qc=y({},Yi,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),ps=Si(qc),vo=y({},Ls,{newState:0,oldState:0}),yl=Si(vo),ms=[9,13,27,32],Go=Qa&&"CompositionEvent"in window,yo=null;Qa&&"documentMode"in document&&(yo=document.documentMode);var _l=Qa&&"TextEvent"in window&&!yo,aa=Qa&&(!Go||yo&&8<yo&&11>=yo),xl=" ",Zf=!1;function Zu(r,l){switch(r){case"keyup":return ms.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sl(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var jo=!1;function gs(r,l){switch(r){case"compositionend":return Sl(l);case"keypress":return l.which!==32?null:(Zf=!0,xl);case"textInput":return r=l.data,r===xl&&Zf?null:r;default:return null}}function bl(r,l){if(jo)return r==="compositionend"||!Go&&Zu(r,l)?(r=Ds(),ui=hr=Rs=null,jo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return aa&&l.locale!=="ko"?null:l.data;default:return null}}var Os={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pr(r){var l=r&&r.nodeName&&r.nodeName.toLowerCase();return l==="input"?!!Os[r.type]:l==="textarea"}function Ku(r,l,m,_){ws?on?on.push(_):on=[_]:ws=_,l=Mv(l,"onChange"),0<l.length&&(m=new po("onChange","change",null,m,_),r.push({event:m,listeners:l}))}var mr=null,ac=null;function Ml(r){pT(r,0)}function Tl(r){var l=va(r);if(nn(l))return r}function sc(r,l){if(r==="change")return l}var Xc=!1;if(Qa){var vs;if(Qa){var fi="oninput"in document;if(!fi){var xd=document.createElement("div");xd.setAttribute("oninput","return;"),fi=typeof xd.oninput=="function"}vs=fi}else vs=!1;Xc=vs&&(!document.documentMode||9<document.documentMode)}function Qu(){mr&&(mr.detachEvent("onpropertychange",Kf),ac=mr=null)}function Kf(r){if(r.propertyName==="value"&&Tl(ac)){var l=[];Ku(l,ac,r,uo(r)),fo(Ml,l)}}function Ns(r,l,m){r==="focusin"?(Qu(),mr=l,ac=m,mr.attachEvent("onpropertychange",Kf)):r==="focusout"&&Qu()}function Wo(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Tl(ac)}function Al(r,l){if(r==="click")return Tl(l)}function Sd(r,l){if(r==="input"||r==="change")return Tl(l)}function $a(r,l){return r===l&&(r!==0||1/r===1/l)||r!==r&&l!==l}var hi=typeof Object.is=="function"?Object.is:$a;function El(r,l){if(hi(r,l))return!0;if(typeof r!="object"||r===null||typeof l!="object"||l===null)return!1;var m=Object.keys(r),_=Object.keys(l);if(m.length!==_.length)return!1;for(_=0;_<m.length;_++){var A=m[_];if(!ue.call(l,A)||!hi(r[A],l[A]))return!1}return!0}function Yc(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function rc(r,l){var m=Yc(r);r=0;for(var _;m;){if(m.nodeType===3){if(_=r+m.textContent.length,r<=l&&_>=l)return{node:m,offset:l-r};r=_}t:{for(;m;){if(m.nextSibling){m=m.nextSibling;break t}m=m.parentNode}m=void 0}m=Yc(m)}}function oc(r,l){return r&&l?r===l?!0:r&&r.nodeType===3?!1:l&&l.nodeType===3?oc(r,l.parentNode):"contains"in r?r.contains(l):r.compareDocumentPosition?!!(r.compareDocumentPosition(l)&16):!1:!1}function wl(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var l=Ye(r.document);l instanceof r.HTMLIFrameElement;){try{var m=typeof l.contentWindow.location.href=="string"}catch{m=!1}if(m)r=l.contentWindow;else break;l=Ye(r.document)}return l}function gr(r){var l=r&&r.nodeName&&r.nodeName.toLowerCase();return l&&(l==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||l==="textarea"||r.contentEditable==="true")}var Zc=Qa&&"documentMode"in document&&11>=document.documentMode,qo=null,Kc=null,lc=null,Ha=!1;function Ju(r,l,m){var _=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;Ha||qo==null||qo!==Ye(_)||(_=qo,"selectionStart"in _&&gr(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),lc&&El(lc,_)||(lc=_,_=Mv(Kc,"onSelect"),0<_.length&&(l=new po("onSelect","select",null,l,m),r.push({event:l,listeners:_}),l.target=qo)))}function _o(r,l){var m={};return m[r.toLowerCase()]=l.toLowerCase(),m["Webkit"+r]="webkit"+l,m["Moz"+r]="moz"+l,m}var cc={animationend:_o("Animation","AnimationEnd"),animationiteration:_o("Animation","AnimationIteration"),animationstart:_o("Animation","AnimationStart"),transitionrun:_o("Transition","TransitionRun"),transitionstart:_o("Transition","TransitionStart"),transitioncancel:_o("Transition","TransitionCancel"),transitionend:_o("Transition","TransitionEnd")},uc={},ts={};Qa&&(ts=document.createElement("div").style,"AnimationEvent"in window||(delete cc.animationend.animation,delete cc.animationiteration.animation,delete cc.animationstart.animation),"TransitionEvent"in window||delete cc.transitionend.transition);function Da(r){if(uc[r])return uc[r];if(!cc[r])return r;var l=cc[r],m;for(m in l)if(l.hasOwnProperty(m)&&m in ts)return uc[r]=l[m];return r}var La=Da("animationend"),Qf=Da("animationiteration"),Us=Da("animationstart"),fc=Da("transitionrun"),xo=Da("transitionstart"),Jf=Da("transitioncancel"),Xo=Da("transitionend"),So=new Map,bo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bo.push("scrollEnd");function Oa(r,l){So.set(r,l),kt(l,[r])}var Mo=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},xa=[],es=0,Qc=0;function To(){for(var r=es,l=Qc=es=0;l<r;){var m=xa[l];xa[l++]=null;var _=xa[l];xa[l++]=null;var A=xa[l];xa[l++]=null;var D=xa[l];if(xa[l++]=null,_!==null&&A!==null){var X=_.pending;X===null?A.next=A:(A.next=X.next,X.next=A),_.pending=A}D!==0&&Yo(m,A,D)}}function Ao(r,l,m,_){xa[es++]=r,xa[es++]=l,xa[es++]=m,xa[es++]=_,Qc|=_,r.lanes|=_,r=r.alternate,r!==null&&(r.lanes|=_)}function hc(r,l,m,_){return Ao(r,l,m,_),Cl(r)}function vr(r,l){return Ao(r,null,null,l),Cl(r)}function Yo(r,l,m){r.lanes|=m;var _=r.alternate;_!==null&&(_.lanes|=m);for(var A=!1,D=r.return;D!==null;)D.childLanes|=m,_=D.alternate,_!==null&&(_.childLanes|=m),D.tag===22&&(r=D.stateNode,r===null||r._visibility&1||(A=!0)),r=D,D=D.return;return r.tag===3?(D=r.stateNode,A&&l!==null&&(A=31-gt(m),r=D.hiddenUpdates,_=r[A],_===null?r[A]=[l]:_.push(l),l.lane=m|536870912),D):null}function Cl(r){if(50<gu)throw gu=0,vu=null,Error(n(185));for(var l=r.return;l!==null;)r=l,l=r.return;return r.tag===3?r.stateNode:null}var Eo={};function bd(r,l,m,_){this.tag=r,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ga(r,l,m,_){return new bd(r,l,m,_)}function ja(r){return r=r.prototype,!(!r||!r.isReactComponent)}function yr(r,l){var m=r.alternate;return m===null?(m=Ga(r.tag,l,r.key,r.mode),m.elementType=r.elementType,m.type=r.type,m.stateNode=r.stateNode,m.alternate=r,r.alternate=m):(m.pendingProps=l,m.type=r.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=r.flags&65011712,m.childLanes=r.childLanes,m.lanes=r.lanes,m.child=r.child,m.memoizedProps=r.memoizedProps,m.memoizedState=r.memoizedState,m.updateQueue=r.updateQueue,l=r.dependencies,m.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},m.sibling=r.sibling,m.index=r.index,m.ref=r.ref,m.refCleanup=r.refCleanup,m}function Na(r,l){r.flags&=65011714;var m=r.alternate;return m===null?(r.childLanes=0,r.lanes=l,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=m.childLanes,r.lanes=m.lanes,r.child=m.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=m.memoizedProps,r.memoizedState=m.memoizedState,r.updateQueue=m.updateQueue,r.type=m.type,l=m.dependencies,r.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),r}function dc(r,l,m,_,A,D){var X=0;if(_=r,typeof r=="function")ja(r)&&(X=1);else if(typeof r=="string")X=n4(r,m,mt.current)?26:r==="html"||r==="head"||r==="body"?27:5;else t:switch(r){case B:return r=Ga(31,m,l,A),r.elementType=B,r.lanes=D,r;case R:return wo(m.children,A,D,l);case C:X=8,A|=24;break;case w:return r=Ga(12,m,l,A|2),r.elementType=w,r.lanes=D,r;case F:return r=Ga(13,m,l,A),r.elementType=F,r.lanes=D,r;case H:return r=Ga(19,m,l,A),r.elementType=H,r.lanes=D,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case I:X=10;break t;case N:X=9;break t;case z:X=11;break t;case q:X=14;break t;case Z:X=16,_=null;break t}X=29,m=Error(n(130,r===null?"null":typeof r,"")),_=null}return l=Ga(X,m,l,A),l.elementType=r,l.type=_,l.lanes=D,l}function wo(r,l,m,_){return r=Ga(7,r,_,l),r.lanes=m,r}function Jc(r,l,m){return r=Ga(6,r,null,l),r.lanes=m,r}function $f(r){var l=Ga(18,null,null,0);return l.stateNode=r,l}function _r(r,l,m){return l=Ga(4,r.children!==null?r.children:[],r.key,l),l.lanes=m,l.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},l}var u=new WeakMap;function v(r,l){if(typeof r=="object"&&r!==null){var m=u.get(r);return m!==void 0?m:(l={value:r,source:l,stack:at(l)},u.set(r,l),l)}return{value:r,source:l,stack:at(l)}}var M=[],P=0,W=null,tt=0,bt=[],Ot=0,Yt=null,ye=1,Ne="";function $e(r,l){M[P++]=tt,M[P++]=W,W=r,tt=l}function Tn(r,l,m){bt[Ot++]=ye,bt[Ot++]=Ne,bt[Ot++]=Yt,Yt=r;var _=ye;r=Ne;var A=32-gt(_)-1;_&=~(1<<A),m+=1;var D=32-gt(l)+A;if(30<D){var X=A-A%5;D=(_&(1<<X)-1).toString(32),_>>=X,A-=X,ye=1<<32-gt(l)+A|m<<A|_,Ne=D+r}else ye=1<<D|m<<A|_,Ne=r}function Sa(r){r.return!==null&&($e(r,1),Tn(r,1,0))}function wi(r){for(;r===W;)W=M[--P],M[P]=null,tt=M[--P],M[P]=null;for(;r===Yt;)Yt=bt[--Ot],bt[Ot]=null,Ne=bt[--Ot],bt[Ot]=null,ye=bt[--Ot],bt[Ot]=null}function Wa(r,l){bt[Ot++]=ye,bt[Ot++]=Ne,bt[Ot++]=Yt,ye=l.id,Ne=l.overflow,Yt=r}var Jn=null,$n=null,zn=!1,Co=null,ba=!1,$c=Error(n(519));function In(r){var l=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw eu(v(l,r)),$c}function tu(r){var l=r.stateNode,m=r.type,_=r.memoizedProps;switch(l[cn]=r,l[Li]=_,m){case"dialog":Vn("cancel",l),Vn("close",l);break;case"iframe":case"object":case"embed":Vn("load",l);break;case"video":case"audio":for(m=0;m<eg.length;m++)Vn(eg[m],l);break;case"source":Vn("error",l);break;case"img":case"image":case"link":Vn("error",l),Vn("load",l);break;case"details":Vn("toggle",l);break;case"input":Vn("invalid",l),ya(l,_.value,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name,!0);break;case"select":Vn("invalid",l);break;case"textarea":Vn("invalid",l),Qn(l,_.value,_.defaultValue,_.children)}m=_.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||l.textContent===""+m||_.suppressHydrationWarning===!0||yT(l.textContent,m)?(_.popover!=null&&(Vn("beforetoggle",l),Vn("toggle",l)),_.onScroll!=null&&Vn("scroll",l),_.onScrollEnd!=null&&Vn("scrollend",l),_.onClick!=null&&(l.onclick=Xi),l=!0):l=!1,l||In(r,!0)}function Gi(r){for(Jn=r.return;Jn;)switch(Jn.tag){case 5:case 31:case 13:ba=!1;return;case 27:case 3:ba=!0;return;default:Jn=Jn.return}}function jr(r){if(r!==Jn)return!1;if(!zn)return Gi(r),zn=!0,!1;var l=r.tag,m;if((m=l!==3&&l!==27)&&((m=l===5)&&(m=r.type,m=!(m!=="form"&&m!=="button")||Mx(r.type,r.memoizedProps)),m=!m),m&&$n&&In(r),Gi(r),l===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));$n=wT(r)}else if(l===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));$n=wT(r)}else l===27?(l=$n,yf(r.type)?(r=Cx,Cx=null,$n=r):$n=l):$n=Jn?sl(r.stateNode.nextSibling):null;return!0}function Rl(){$n=Jn=null,zn=!1}function th(){var r=Co;return r!==null&&(bs===null?bs=r:bs.push.apply(bs,r),Co=null),r}function eu(r){Co===null?Co=[r]:Co.push(r)}var nu=G(null),Wr=null,qa=null;function Dl(r,l,m){ft(nu,l._currentValue),l._currentValue=m}function qr(r){r._currentValue=nu.current,nt(nu)}function Ll(r,l,m){for(;r!==null;){var _=r.alternate;if((r.childLanes&l)!==l?(r.childLanes|=l,_!==null&&(_.childLanes|=l)):_!==null&&(_.childLanes&l)!==l&&(_.childLanes|=l),r===m)break;r=r.return}}function Md(r,l,m,_){var A=r.child;for(A!==null&&(A.return=r);A!==null;){var D=A.dependencies;if(D!==null){var X=A.child;D=D.firstContext;t:for(;D!==null;){var st=D;D=A;for(var Tt=0;Tt<l.length;Tt++)if(st.context===l[Tt]){D.lanes|=m,st=D.alternate,st!==null&&(st.lanes|=m),Ll(D.return,m,r),_||(X=null);break t}D=st.next}}else if(A.tag===18){if(X=A.return,X===null)throw Error(n(341));X.lanes|=m,D=X.alternate,D!==null&&(D.lanes|=m),Ll(X,m,r),X=null}else X=A.child;if(X!==null)X.return=A;else for(X=A;X!==null;){if(X===r){X=null;break}if(A=X.sibling,A!==null){A.return=X.return,X=A;break}X=X.return}A=X}}function pc(r,l,m,_){r=null;for(var A=l,D=!1;A!==null;){if(!D){if((A.flags&524288)!==0)D=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var X=A.alternate;if(X===null)throw Error(n(387));if(X=X.memoizedProps,X!==null){var st=A.type;hi(A.pendingProps.value,X.value)||(r!==null?r.push(st):r=[st])}}else if(A===_t.current){if(X=A.alternate,X===null)throw Error(n(387));X.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(r!==null?r.push(rg):r=[rg])}A=A.return}r!==null&&Md(l,r,m,_),l.flags|=262144}function $u(r){for(r=r.firstContext;r!==null;){if(!hi(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function iu(r){Wr=r,qa=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Xa(r){return hm(Wr,r)}function eh(r,l){return Wr===null&&iu(r),hm(r,l)}function hm(r,l){var m=l._currentValue;if(l={context:l,memoizedValue:m,next:null},qa===null){if(r===null)throw Error(n(308));qa=l,r.dependencies={lanes:0,firstContext:l},r.flags|=524288}else qa=qa.next=l;return m}var V0=typeof AbortController<"u"?AbortController:function(){var r=[],l=this.signal={aborted:!1,addEventListener:function(m,_){r.push(_)}};this.abort=function(){l.aborted=!0,r.forEach(function(m){return m()})}},H0=i.unstable_scheduleCallback,dm=i.unstable_NormalPriority,an={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function pm(){return{controller:new V0,data:new Map,refCount:0}}function ns(r){r.refCount--,r.refCount===0&&H0(dm,function(){r.controller.abort()})}var au=null,mm=0,Ol=0,Ro=null;function tf(r,l){if(au===null){var m=au=[];mm=0,Ol=px(),Ro={status:"pending",value:void 0,then:function(_){m.push(_)}}}return mm++,l.then(gm,gm),l}function gm(){if(--mm===0&&au!==null){Ro!==null&&(Ro.status="fulfilled");var r=au;au=null,Ol=0,Ro=null;for(var l=0;l<r.length;l++)(0,r[l])()}}function vm(r,l){var m=[],_={status:"pending",value:null,reason:null,then:function(A){m.push(A)}};return r.then(function(){_.status="fulfilled",_.value=l;for(var A=0;A<m.length;A++)(0,m[A])(l)},function(A){for(_.status="rejected",_.reason=A,A=0;A<m.length;A++)(0,m[A])(void 0)}),_}var G0=j.S;j.S=function(r,l){mf=Y(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&tf(r,l),G0!==null&&G0(r,l)};var mc=G(null);function Zo(){var r=mc.current;return r!==null?r:pi.pooledCache}function ef(r,l){l===null?ft(mc,mc.current):ft(mc,l.pool)}function Td(){var r=Zo();return r===null?null:{parent:an._currentValue,pool:r}}var gc=Error(n(460)),nh=Error(n(474)),Do=Error(n(542)),ih={then:function(){}};function j0(r){return r=r.status,r==="fulfilled"||r==="rejected"}function ym(r,l,m){switch(m=r[m],m===void 0?r.push(l):m!==l&&(l.then(Xi,Xi),l=m),l.status){case"fulfilled":return l.value;case"rejected":throw r=l.reason,_m(r),r;default:if(typeof l.status=="string")l.then(Xi,Xi);else{if(r=pi,r!==null&&100<r.shellSuspendCounter)throw Error(n(482));r=l,r.status="pending",r.then(function(_){if(l.status==="pending"){var A=l;A.status="fulfilled",A.value=_}},function(_){if(l.status==="pending"){var A=l;A.status="rejected",A.reason=_}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw r=l.reason,_m(r),r}throw un=l,gc}}function su(r){try{var l=r._init;return l(r._payload)}catch(m){throw m!==null&&typeof m=="object"&&typeof m.then=="function"?(un=m,gc):m}}var un=null;function Ad(){if(un===null)throw Error(n(459));var r=un;return un=null,r}function _m(r){if(r===gc||r===Do)throw Error(n(483))}var vc=null,yc=0;function Ed(r){var l=yc;return yc+=1,vc===null&&(vc=[]),ym(vc,r,l)}function ah(r,l){l=l.props.ref,r.ref=l!==void 0?l:null}function sh(r,l){throw l.$$typeof===x?Error(n(525)):(r=Object.prototype.toString.call(l),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":r)))}function nf(r){function l(Pt,Et){if(r){var Ht=Pt.deletions;Ht===null?(Pt.deletions=[Et],Pt.flags|=16):Ht.push(Et)}}function m(Pt,Et){if(!r)return null;for(;Et!==null;)l(Pt,Et),Et=Et.sibling;return null}function _(Pt){for(var Et=new Map;Pt!==null;)Pt.key!==null?Et.set(Pt.key,Pt):Et.set(Pt.index,Pt),Pt=Pt.sibling;return Et}function A(Pt,Et){return Pt=yr(Pt,Et),Pt.index=0,Pt.sibling=null,Pt}function D(Pt,Et,Ht){return Pt.index=Ht,r?(Ht=Pt.alternate,Ht!==null?(Ht=Ht.index,Ht<Et?(Pt.flags|=67108866,Et):Ht):(Pt.flags|=67108866,Et)):(Pt.flags|=1048576,Et)}function X(Pt){return r&&Pt.alternate===null&&(Pt.flags|=67108866),Pt}function st(Pt,Et,Ht,ge){return Et===null||Et.tag!==6?(Et=Jc(Ht,Pt.mode,ge),Et.return=Pt,Et):(Et=A(Et,Ht),Et.return=Pt,Et)}function Tt(Pt,Et,Ht,ge){var ln=Ht.type;return ln===R?fe(Pt,Et,Ht.props.children,ge,Ht.key):Et!==null&&(Et.elementType===ln||typeof ln=="object"&&ln!==null&&ln.$$typeof===Z&&su(ln)===Et.type)?(Et=A(Et,Ht.props),ah(Et,Ht),Et.return=Pt,Et):(Et=dc(Ht.type,Ht.key,Ht.props,null,Pt.mode,ge),ah(Et,Ht),Et.return=Pt,Et)}function Wt(Pt,Et,Ht,ge){return Et===null||Et.tag!==4||Et.stateNode.containerInfo!==Ht.containerInfo||Et.stateNode.implementation!==Ht.implementation?(Et=_r(Ht,Pt.mode,ge),Et.return=Pt,Et):(Et=A(Et,Ht.children||[]),Et.return=Pt,Et)}function fe(Pt,Et,Ht,ge,ln){return Et===null||Et.tag!==7?(Et=wo(Ht,Pt.mode,ge,ln),Et.return=Pt,Et):(Et=A(Et,Ht),Et.return=Pt,Et)}function _e(Pt,Et,Ht){if(typeof Et=="string"&&Et!==""||typeof Et=="number"||typeof Et=="bigint")return Et=Jc(""+Et,Pt.mode,Ht),Et.return=Pt,Et;if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case b:return Ht=dc(Et.type,Et.key,Et.props,null,Pt.mode,Ht),ah(Ht,Et),Ht.return=Pt,Ht;case T:return Et=_r(Et,Pt.mode,Ht),Et.return=Pt,Et;case Z:return Et=su(Et),_e(Pt,Et,Ht)}if(vt(Et)||J(Et))return Et=wo(Et,Pt.mode,Ht,null),Et.return=Pt,Et;if(typeof Et.then=="function")return _e(Pt,Ed(Et),Ht);if(Et.$$typeof===I)return _e(Pt,eh(Pt,Et),Ht);sh(Pt,Et)}return null}function Jt(Pt,Et,Ht,ge){var ln=Et!==null?Et.key:null;if(typeof Ht=="string"&&Ht!==""||typeof Ht=="number"||typeof Ht=="bigint")return ln!==null?null:st(Pt,Et,""+Ht,ge);if(typeof Ht=="object"&&Ht!==null){switch(Ht.$$typeof){case b:return Ht.key===ln?Tt(Pt,Et,Ht,ge):null;case T:return Ht.key===ln?Wt(Pt,Et,Ht,ge):null;case Z:return Ht=su(Ht),Jt(Pt,Et,Ht,ge)}if(vt(Ht)||J(Ht))return ln!==null?null:fe(Pt,Et,Ht,ge,null);if(typeof Ht.then=="function")return Jt(Pt,Et,Ed(Ht),ge);if(Ht.$$typeof===I)return Jt(Pt,Et,eh(Pt,Ht),ge);sh(Pt,Ht)}return null}function oe(Pt,Et,Ht,ge,ln){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return Pt=Pt.get(Ht)||null,st(Et,Pt,""+ge,ln);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case b:return Pt=Pt.get(ge.key===null?Ht:ge.key)||null,Tt(Et,Pt,ge,ln);case T:return Pt=Pt.get(ge.key===null?Ht:ge.key)||null,Wt(Et,Pt,ge,ln);case Z:return ge=su(ge),oe(Pt,Et,Ht,ge,ln)}if(vt(ge)||J(ge))return Pt=Pt.get(Ht)||null,fe(Et,Pt,ge,ln,null);if(typeof ge.then=="function")return oe(Pt,Et,Ht,Ed(ge),ln);if(ge.$$typeof===I)return oe(Pt,Et,Ht,eh(Et,ge),ln);sh(Et,ge)}return null}function Ke(Pt,Et,Ht,ge){for(var ln=null,gi=null,tn=Et,Un=Et=0,qn=null;tn!==null&&Un<Ht.length;Un++){tn.index>Un?(qn=tn,tn=null):qn=tn.sibling;var vi=Jt(Pt,tn,Ht[Un],ge);if(vi===null){tn===null&&(tn=qn);break}r&&tn&&vi.alternate===null&&l(Pt,tn),Et=D(vi,Et,Un),gi===null?ln=vi:gi.sibling=vi,gi=vi,tn=qn}if(Un===Ht.length)return m(Pt,tn),zn&&$e(Pt,Un),ln;if(tn===null){for(;Un<Ht.length;Un++)tn=_e(Pt,Ht[Un],ge),tn!==null&&(Et=D(tn,Et,Un),gi===null?ln=tn:gi.sibling=tn,gi=tn);return zn&&$e(Pt,Un),ln}for(tn=_(tn);Un<Ht.length;Un++)qn=oe(tn,Pt,Un,Ht[Un],ge),qn!==null&&(r&&qn.alternate!==null&&tn.delete(qn.key===null?Un:qn.key),Et=D(qn,Et,Un),gi===null?ln=qn:gi.sibling=qn,gi=qn);return r&&tn.forEach(function(Mf){return l(Pt,Mf)}),zn&&$e(Pt,Un),ln}function hn(Pt,Et,Ht,ge){if(Ht==null)throw Error(n(151));for(var ln=null,gi=null,tn=Et,Un=Et=0,qn=null,vi=Ht.next();tn!==null&&!vi.done;Un++,vi=Ht.next()){tn.index>Un?(qn=tn,tn=null):qn=tn.sibling;var Mf=Jt(Pt,tn,vi.value,ge);if(Mf===null){tn===null&&(tn=qn);break}r&&tn&&Mf.alternate===null&&l(Pt,tn),Et=D(Mf,Et,Un),gi===null?ln=Mf:gi.sibling=Mf,gi=Mf,tn=qn}if(vi.done)return m(Pt,tn),zn&&$e(Pt,Un),ln;if(tn===null){for(;!vi.done;Un++,vi=Ht.next())vi=_e(Pt,vi.value,ge),vi!==null&&(Et=D(vi,Et,Un),gi===null?ln=vi:gi.sibling=vi,gi=vi);return zn&&$e(Pt,Un),ln}for(tn=_(tn);!vi.done;Un++,vi=Ht.next())vi=oe(tn,Pt,Un,vi.value,ge),vi!==null&&(r&&vi.alternate!==null&&tn.delete(vi.key===null?Un:vi.key),Et=D(vi,Et,Un),gi===null?ln=vi:gi.sibling=vi,gi=vi);return r&&tn.forEach(function(d4){return l(Pt,d4)}),zn&&$e(Pt,Un),ln}function Ii(Pt,Et,Ht,ge){if(typeof Ht=="object"&&Ht!==null&&Ht.type===R&&Ht.key===null&&(Ht=Ht.props.children),typeof Ht=="object"&&Ht!==null){switch(Ht.$$typeof){case b:t:{for(var ln=Ht.key;Et!==null;){if(Et.key===ln){if(ln=Ht.type,ln===R){if(Et.tag===7){m(Pt,Et.sibling),ge=A(Et,Ht.props.children),ge.return=Pt,Pt=ge;break t}}else if(Et.elementType===ln||typeof ln=="object"&&ln!==null&&ln.$$typeof===Z&&su(ln)===Et.type){m(Pt,Et.sibling),ge=A(Et,Ht.props),ah(ge,Ht),ge.return=Pt,Pt=ge;break t}m(Pt,Et);break}else l(Pt,Et);Et=Et.sibling}Ht.type===R?(ge=wo(Ht.props.children,Pt.mode,ge,Ht.key),ge.return=Pt,Pt=ge):(ge=dc(Ht.type,Ht.key,Ht.props,null,Pt.mode,ge),ah(ge,Ht),ge.return=Pt,Pt=ge)}return X(Pt);case T:t:{for(ln=Ht.key;Et!==null;){if(Et.key===ln)if(Et.tag===4&&Et.stateNode.containerInfo===Ht.containerInfo&&Et.stateNode.implementation===Ht.implementation){m(Pt,Et.sibling),ge=A(Et,Ht.children||[]),ge.return=Pt,Pt=ge;break t}else{m(Pt,Et);break}else l(Pt,Et);Et=Et.sibling}ge=_r(Ht,Pt.mode,ge),ge.return=Pt,Pt=ge}return X(Pt);case Z:return Ht=su(Ht),Ii(Pt,Et,Ht,ge)}if(vt(Ht))return Ke(Pt,Et,Ht,ge);if(J(Ht)){if(ln=J(Ht),typeof ln!="function")throw Error(n(150));return Ht=ln.call(Ht),hn(Pt,Et,Ht,ge)}if(typeof Ht.then=="function")return Ii(Pt,Et,Ed(Ht),ge);if(Ht.$$typeof===I)return Ii(Pt,Et,eh(Pt,Ht),ge);sh(Pt,Ht)}return typeof Ht=="string"&&Ht!==""||typeof Ht=="number"||typeof Ht=="bigint"?(Ht=""+Ht,Et!==null&&Et.tag===6?(m(Pt,Et.sibling),ge=A(Et,Ht),ge.return=Pt,Pt=ge):(m(Pt,Et),ge=Jc(Ht,Pt.mode,ge),ge.return=Pt,Pt=ge),X(Pt)):m(Pt,Et)}return function(Pt,Et,Ht,ge){try{yc=0;var ln=Ii(Pt,Et,Ht,ge);return vc=null,ln}catch(tn){if(tn===gc||tn===Do)throw tn;var gi=Ga(29,tn,null,Pt.mode);return gi.lanes=ge,gi.return=Pt,gi}}}var ru=nf(!0),W0=nf(!1),_c=!1;function xm(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sm(r,l){r=r.updateQueue,l.updateQueue===r&&(l.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ko(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Nl(r,l,m){var _=r.updateQueue;if(_===null)return null;if(_=_.shared,(jn&2)!==0){var A=_.pending;return A===null?l.next=l:(l.next=A.next,A.next=l),_.pending=l,l=Cl(r),Yo(r,null,m),l}return Ao(r,_,l,m),Cl(r)}function xc(r,l,m){if(l=l.updateQueue,l!==null&&(l=l.shared,(m&4194048)!==0)){var _=l.lanes;_&=r.pendingLanes,m|=_,l.lanes=m,ia(r,m)}}function wd(r,l){var m=r.updateQueue,_=r.alternate;if(_!==null&&(_=_.updateQueue,m===_)){var A=null,D=null;if(m=m.firstBaseUpdate,m!==null){do{var X={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};D===null?A=D=X:D=D.next=X,m=m.next}while(m!==null);D===null?A=D=l:D=D.next=l}else A=D=l;m={baseState:_.baseState,firstBaseUpdate:A,lastBaseUpdate:D,shared:_.shared,callbacks:_.callbacks},r.updateQueue=m;return}r=m.lastBaseUpdate,r===null?m.firstBaseUpdate=l:r.next=l,m.lastBaseUpdate=l}var bm=!1;function rh(){if(bm){var r=Ro;if(r!==null)throw r}}function ou(r,l,m,_){bm=!1;var A=r.updateQueue;_c=!1;var D=A.firstBaseUpdate,X=A.lastBaseUpdate,st=A.shared.pending;if(st!==null){A.shared.pending=null;var Tt=st,Wt=Tt.next;Tt.next=null,X===null?D=Wt:X.next=Wt,X=Tt;var fe=r.alternate;fe!==null&&(fe=fe.updateQueue,st=fe.lastBaseUpdate,st!==X&&(st===null?fe.firstBaseUpdate=Wt:st.next=Wt,fe.lastBaseUpdate=Tt))}if(D!==null){var _e=A.baseState;X=0,fe=Wt=Tt=null,st=D;do{var Jt=st.lane&-536870913,oe=Jt!==st.lane;if(oe?(kn&Jt)===Jt:(_&Jt)===Jt){Jt!==0&&Jt===Ol&&(bm=!0),fe!==null&&(fe=fe.next={lane:0,tag:st.tag,payload:st.payload,callback:null,next:null});t:{var Ke=r,hn=st;Jt=l;var Ii=m;switch(hn.tag){case 1:if(Ke=hn.payload,typeof Ke=="function"){_e=Ke.call(Ii,_e,Jt);break t}_e=Ke;break t;case 3:Ke.flags=Ke.flags&-65537|128;case 0:if(Ke=hn.payload,Jt=typeof Ke=="function"?Ke.call(Ii,_e,Jt):Ke,Jt==null)break t;_e=y({},_e,Jt);break t;case 2:_c=!0}}Jt=st.callback,Jt!==null&&(r.flags|=64,oe&&(r.flags|=8192),oe=A.callbacks,oe===null?A.callbacks=[Jt]:oe.push(Jt))}else oe={lane:Jt,tag:st.tag,payload:st.payload,callback:st.callback,next:null},fe===null?(Wt=fe=oe,Tt=_e):fe=fe.next=oe,X|=Jt;if(st=st.next,st===null){if(st=A.shared.pending,st===null)break;oe=st,st=oe.next,oe.next=null,A.lastBaseUpdate=oe,A.shared.pending=null}}while(!0);fe===null&&(Tt=_e),A.baseState=Tt,A.firstBaseUpdate=Wt,A.lastBaseUpdate=fe,D===null&&(A.shared.lanes=0),Dr|=X,r.lanes=X,r.memoizedState=_e}}function Qo(r,l){if(typeof r!="function")throw Error(n(191,r));r.call(l)}function is(r,l){var m=r.callbacks;if(m!==null)for(r.callbacks=null,r=0;r<m.length;r++)Qo(m[r],l)}var xr=G(null),Is=G(0);function Mm(r,l){r=ca,ft(Is,r),ft(xr,l),ca=r|l.baseLanes}function Tm(){ft(Is,ca),ft(xr,xr.current)}function ys(){ca=Is.current,nt(xr),nt(Is)}var Ua=G(null),Xr=null;function Sc(r){var l=r.alternate;ft(Ki,Ki.current&1),ft(Ua,r),Xr===null&&(l===null||xr.current!==null||l.memoizedState!==null)&&(Xr=r)}function Am(r){ft(Ki,Ki.current),ft(Ua,r),Xr===null&&(Xr=r)}function q0(r){r.tag===22?(ft(Ki,Ki.current),ft(Ua,r),Xr===null&&(Xr=r)):Ul()}function Ul(){ft(Ki,Ki.current),ft(Ua,Ua.current)}function Sr(r){nt(Ua),Xr===r&&(Xr=null),nt(Ki)}var Ki=G(0);function Cd(r){for(var l=r;l!==null;){if(l.tag===13){var m=l.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||Ex(m)||wx(m)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Ws=0,dn=null,bi=null,Ma=null,Rd=!1,Jo=!1,lu=!1,Dd=0,oh=0,$o=null,ax=0;function Qi(){throw Error(n(321))}function Em(r,l){if(l===null)return!1;for(var m=0;m<l.length&&m<r.length;m++)if(!hi(r[m],l[m]))return!1;return!0}function wm(r,l,m,_,A,D){return Ws=D,dn=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,j.H=r===null||r.memoizedState===null?hv:rf,lu=!1,D=m(_,A),lu=!1,Jo&&(D=Y0(l,m,_,A)),X0(r),D}function X0(r){j.H=hh;var l=bi!==null&&bi.next!==null;if(Ws=0,Ma=bi=dn=null,Rd=!1,oh=0,$o=null,l)throw Error(n(300));r===null||zi||(r=r.dependencies,r!==null&&$u(r)&&(zi=!0))}function Y0(r,l,m,_){dn=r;var A=0;do{if(Jo&&($o=null),oh=0,Jo=!1,25<=A)throw Error(n(301));if(A+=1,Ma=bi=null,r.updateQueue!=null){var D=r.updateQueue;D.lastEffect=null,D.events=null,D.stores=null,D.memoCache!=null&&(D.memoCache.index=0)}j.H=dh,D=l(m,_)}while(Jo);return D}function sx(){var r=j.H,l=r.useState()[0];return l=typeof l.then=="function"?ch(l):l,r=r.useState()[0],(bi!==null?bi.memoizedState:null)!==r&&(dn.flags|=1024),l}function Cm(){var r=Dd!==0;return Dd=0,r}function Rm(r,l,m){l.updateQueue=r.updateQueue,l.flags&=-2053,r.lanes&=~m}function Dm(r){if(Rd){for(r=r.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}Rd=!1}Ws=0,Ma=bi=dn=null,Jo=!1,oh=Dd=0,$o=null}function Ps(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ma===null?dn.memoizedState=Ma=r:Ma=Ma.next=r,Ma}function sa(){if(bi===null){var r=dn.alternate;r=r!==null?r.memoizedState:null}else r=bi.next;var l=Ma===null?dn.memoizedState:Ma.next;if(l!==null)Ma=l,bi=r;else{if(r===null)throw dn.alternate===null?Error(n(467)):Error(n(310));bi=r,r={memoizedState:bi.memoizedState,baseState:bi.baseState,baseQueue:bi.baseQueue,queue:bi.queue,next:null},Ma===null?dn.memoizedState=Ma=r:Ma=Ma.next=r}return Ma}function lh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ch(r){var l=oh;return oh+=1,$o===null&&($o=[]),r=ym($o,r,l),l=dn,(Ma===null?l.memoizedState:Ma.next)===null&&(l=l.alternate,j.H=l===null||l.memoizedState===null?hv:rf),r}function Ld(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return ch(r);if(r.$$typeof===I)return Xa(r)}throw Error(n(438,String(r)))}function Lm(r){var l=null,m=dn.updateQueue;if(m!==null&&(l=m.memoCache),l==null){var _=dn.alternate;_!==null&&(_=_.updateQueue,_!==null&&(_=_.memoCache,_!=null&&(l={data:_.data.map(function(A){return A.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),m===null&&(m=lh(),dn.updateQueue=m),m.memoCache=l,m=l.data[l.index],m===void 0)for(m=l.data[l.index]=Array(r),_=0;_<r;_++)m[_]=V;return l.index++,m}function Il(r,l){return typeof l=="function"?l(r):l}function Od(r){var l=sa();return Om(l,bi,r)}function Om(r,l,m){var _=r.queue;if(_===null)throw Error(n(311));_.lastRenderedReducer=m;var A=r.baseQueue,D=_.pending;if(D!==null){if(A!==null){var X=A.next;A.next=D.next,D.next=X}l.baseQueue=A=D,_.pending=null}if(D=r.baseState,A===null)r.memoizedState=D;else{l=A.next;var st=X=null,Tt=null,Wt=l,fe=!1;do{var _e=Wt.lane&-536870913;if(_e!==Wt.lane?(kn&_e)===_e:(Ws&_e)===_e){var Jt=Wt.revertLane;if(Jt===0)Tt!==null&&(Tt=Tt.next={lane:0,revertLane:0,gesture:null,action:Wt.action,hasEagerState:Wt.hasEagerState,eagerState:Wt.eagerState,next:null}),_e===Ol&&(fe=!0);else if((Ws&Jt)===Jt){Wt=Wt.next,Jt===Ol&&(fe=!0);continue}else _e={lane:0,revertLane:Wt.revertLane,gesture:null,action:Wt.action,hasEagerState:Wt.hasEagerState,eagerState:Wt.eagerState,next:null},Tt===null?(st=Tt=_e,X=D):Tt=Tt.next=_e,dn.lanes|=Jt,Dr|=Jt;_e=Wt.action,lu&&m(D,_e),D=Wt.hasEagerState?Wt.eagerState:m(D,_e)}else Jt={lane:_e,revertLane:Wt.revertLane,gesture:Wt.gesture,action:Wt.action,hasEagerState:Wt.hasEagerState,eagerState:Wt.eagerState,next:null},Tt===null?(st=Tt=Jt,X=D):Tt=Tt.next=Jt,dn.lanes|=_e,Dr|=_e;Wt=Wt.next}while(Wt!==null&&Wt!==l);if(Tt===null?X=D:Tt.next=st,!hi(D,r.memoizedState)&&(zi=!0,fe&&(m=Ro,m!==null)))throw m;r.memoizedState=D,r.baseState=X,r.baseQueue=Tt,_.lastRenderedState=D}return A===null&&(_.lanes=0),[r.memoizedState,_.dispatch]}function Nd(r){var l=sa(),m=l.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=r;var _=m.dispatch,A=m.pending,D=l.memoizedState;if(A!==null){m.pending=null;var X=A=A.next;do D=r(D,X.action),X=X.next;while(X!==A);hi(D,l.memoizedState)||(zi=!0),l.memoizedState=D,l.baseQueue===null&&(l.baseState=D),m.lastRenderedState=D}return[D,_]}function Nm(r,l,m){var _=dn,A=sa(),D=zn;if(D){if(m===void 0)throw Error(n(407));m=m()}else m=l();var X=!hi((bi||A).memoizedState,m);if(X&&(A.memoizedState=m,zi=!0),A=A.queue,Bm(Im.bind(null,_,A,r),[r]),A.getSnapshot!==l||X||Ma!==null&&Ma.memoizedState.tag&1){if(_.flags|=2048,af(9,{destroy:void 0},Um.bind(null,_,A,m,l),null),pi===null)throw Error(n(349));D||(Ws&127)!==0||Z0(_,l,m)}return m}function Z0(r,l,m){r.flags|=16384,r={getSnapshot:l,value:m},l=dn.updateQueue,l===null?(l=lh(),dn.updateQueue=l,l.stores=[r]):(m=l.stores,m===null?l.stores=[r]:m.push(r))}function Um(r,l,m,_){l.value=m,l.getSnapshot=_,Pm(l)&&Ud(r)}function Im(r,l,m){return m(function(){Pm(l)&&Ud(r)})}function Pm(r){var l=r.getSnapshot;r=r.value;try{var m=l();return!hi(r,m)}catch{return!0}}function Ud(r){var l=vr(r,2);l!==null&&p(l,r,2)}function uh(r){var l=Ps();if(typeof r=="function"){var m=r;if(r=m(),lu){se(!0);try{m()}finally{se(!1)}}}return l.memoizedState=l.baseState=r,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Il,lastRenderedState:r},l}function K0(r,l,m,_){return r.baseState=m,Om(r,bi,typeof _=="function"?_:Il)}function rx(r,l,m,_,A){if(Pl(r))throw Error(n(485));if(r=l.action,r!==null){var D={payload:A,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(X){D.listeners.push(X)}};j.T!==null?m(!0):D.isTransition=!1,_(D),m=l.pending,m===null?(D.next=l.pending=D,Q0(l,D)):(D.next=m.next,l.pending=m.next=D)}}function Q0(r,l){var m=l.action,_=l.payload,A=r.state;if(l.isTransition){var D=j.T,X={};j.T=X;try{var st=m(A,_),Tt=j.S;Tt!==null&&Tt(X,st),J0(r,l,st)}catch(Wt){Id(r,l,Wt)}finally{D!==null&&X.types!==null&&(D.types=X.types),j.T=D}}else try{D=m(A,_),J0(r,l,D)}catch(Wt){Id(r,l,Wt)}}function J0(r,l,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(_){zm(r,l,_)},function(_){return Id(r,l,_)}):zm(r,l,m)}function zm(r,l,m){l.status="fulfilled",l.value=m,$0(l),r.state=m,l=r.pending,l!==null&&(m=l.next,m===l?r.pending=null:(m=m.next,l.next=m,Q0(r,m)))}function Id(r,l,m){var _=r.pending;if(r.pending=null,_!==null){_=_.next;do l.status="rejected",l.reason=m,$0(l),l=l.next;while(l!==_)}r.action=null}function $0(r){r=r.listeners;for(var l=0;l<r.length;l++)(0,r[l])()}function tv(r,l){return l}function ev(r,l){if(zn){var m=pi.formState;if(m!==null){t:{var _=dn;if(zn){if($n){e:{for(var A=$n,D=ba;A.nodeType!==8;){if(!D){A=null;break e}if(A=sl(A.nextSibling),A===null){A=null;break e}}D=A.data,A=D==="F!"||D==="F"?A:null}if(A){$n=sl(A.nextSibling),_=A.data==="F!";break t}}In(_)}_=!1}_&&(l=m[0])}}return m=Ps(),m.memoizedState=m.baseState=l,_={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tv,lastRenderedState:l},m.queue=_,m=fv.bind(null,dn,_),_.dispatch=m,_=uh(!1),D=fh.bind(null,dn,!1,_.queue),_=Ps(),A={state:l,dispatch:null,action:r,pending:null},_.queue=A,m=rx.bind(null,dn,A,D,m),A.dispatch=m,_.memoizedState=r,[l,m,!1]}function nv(r){var l=sa();return iv(l,bi,r)}function iv(r,l,m){if(l=Om(r,l,tv)[0],r=Od(Il)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var _=ch(l)}catch(X){throw X===gc?Do:X}else _=l;l=sa();var A=l.queue,D=A.dispatch;return m!==l.memoizedState&&(dn.flags|=2048,af(9,{destroy:void 0},ox.bind(null,A,m),null)),[_,D,r]}function ox(r,l){r.action=l}function av(r){var l=sa(),m=bi;if(m!==null)return iv(l,m,r);sa(),l=l.memoizedState,m=sa();var _=m.queue.dispatch;return m.memoizedState=r,[l,_,!1]}function af(r,l,m,_){return r={tag:r,create:m,deps:_,inst:l,next:null},l=dn.updateQueue,l===null&&(l=lh(),dn.updateQueue=l),m=l.lastEffect,m===null?l.lastEffect=r.next=r:(_=m.next,m.next=r,r.next=_,l.lastEffect=r),r}function sv(){return sa().memoizedState}function Pd(r,l,m,_){var A=Ps();dn.flags|=r,A.memoizedState=af(1|l,{destroy:void 0},m,_===void 0?null:_)}function zd(r,l,m,_){var A=sa();_=_===void 0?null:_;var D=A.memoizedState.inst;bi!==null&&_!==null&&Em(_,bi.memoizedState.deps)?A.memoizedState=af(l,D,m,_):(dn.flags|=r,A.memoizedState=af(1|l,D,m,_))}function rv(r,l){Pd(8390656,8,r,l)}function Bm(r,l){zd(2048,8,r,l)}function ov(r){dn.flags|=4;var l=dn.updateQueue;if(l===null)l=lh(),dn.updateQueue=l,l.events=[r];else{var m=l.events;m===null?l.events=[r]:m.push(r)}}function lv(r){var l=sa().memoizedState;return ov({ref:l,nextImpl:r}),function(){if((jn&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}function cv(r,l){return zd(4,2,r,l)}function br(r,l){return zd(4,4,r,l)}function Fm(r,l){if(typeof l=="function"){r=r();var m=l(r);return function(){typeof m=="function"?m():l(null)}}if(l!=null)return r=r(),l.current=r,function(){l.current=null}}function Bd(r,l,m){m=m!=null?m.concat([r]):null,zd(4,4,Fm.bind(null,l,r),m)}function Fd(){}function km(r,l){var m=sa();l=l===void 0?null:l;var _=m.memoizedState;return l!==null&&Em(l,_[1])?_[0]:(m.memoizedState=[r,l],r)}function Vm(r,l){var m=sa();l=l===void 0?null:l;var _=m.memoizedState;if(l!==null&&Em(l,_[1]))return _[0];if(_=r(),lu){se(!0);try{r()}finally{se(!1)}}return m.memoizedState=[_,l],_}function Hm(r,l,m){return m===void 0||(Ws&1073741824)!==0&&(kn&261930)===0?r.memoizedState=l:(r.memoizedState=m,r=h(),dn.lanes|=r,Dr|=r,m)}function Gm(r,l,m,_){return hi(m,l)?m:xr.current!==null?(r=Hm(r,m,_),hi(r,l)||(zi=!0),r):(Ws&42)===0||(Ws&1073741824)!==0&&(kn&261930)===0?(zi=!0,r.memoizedState=m):(r=h(),dn.lanes|=r,Dr|=r,l)}function jm(r,l,m,_,A){var D=K.p;K.p=D!==0&&8>D?D:8;var X=j.T,st={};j.T=st,fh(r,!1,l,m);try{var Tt=A(),Wt=j.S;if(Wt!==null&&Wt(st,Tt),Tt!==null&&typeof Tt=="object"&&typeof Tt.then=="function"){var fe=vm(Tt,_);sf(r,l,fe,Bs(r))}else sf(r,l,_,Bs(r))}catch(_e){sf(r,l,{then:function(){},status:"rejected",reason:_e},Bs())}finally{K.p=D,X!==null&&st.types!==null&&(X.types=st.types),j.T=X}}function lx(){}function Wm(r,l,m,_){if(r.tag!==5)throw Error(n(476));var A=uv(r).queue;jm(r,A,l,et,m===null?lx:function(){return qm(r),m(_)})}function uv(r){var l=r.memoizedState;if(l!==null)return l;l={memoizedState:et,baseState:et,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Il,lastRenderedState:et},next:null};var m={};return l.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Il,lastRenderedState:m},next:null},r.memoizedState=l,r=r.alternate,r!==null&&(r.memoizedState=l),l}function qm(r){var l=uv(r);l.next===null&&(l=r.alternate.memoizedState),sf(r,l.next.queue,{},Bs())}function Xm(){return Xa(rg)}function as(){return sa().memoizedState}function Ym(){return sa().memoizedState}function cx(r){for(var l=r.return;l!==null;){switch(l.tag){case 24:case 3:var m=Bs();r=Ko(m);var _=Nl(l,r,m);_!==null&&(p(_,l,m),xc(_,l,m)),l={cache:pm()},r.payload=l;return}l=l.return}}function ux(r,l,m){var _=Bs();m={lane:_,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Pl(r)?cu(l,m):(m=hc(r,l,m,_),m!==null&&(p(m,r,_),qs(m,l,_)))}function fv(r,l,m){var _=Bs();sf(r,l,m,_)}function sf(r,l,m,_){var A={lane:_,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null};if(Pl(r))cu(l,A);else{var D=r.alternate;if(r.lanes===0&&(D===null||D.lanes===0)&&(D=l.lastRenderedReducer,D!==null))try{var X=l.lastRenderedState,st=D(X,m);if(A.hasEagerState=!0,A.eagerState=st,hi(st,X))return Ao(r,l,A,0),pi===null&&To(),!1}catch{}if(m=hc(r,l,A,_),m!==null)return p(m,r,_),qs(m,l,_),!0}return!1}function fh(r,l,m,_){if(_={lane:2,revertLane:px(),gesture:null,action:_,hasEagerState:!1,eagerState:null,next:null},Pl(r)){if(l)throw Error(n(479))}else l=hc(r,m,_,2),l!==null&&p(l,r,2)}function Pl(r){var l=r.alternate;return r===dn||l!==null&&l===dn}function cu(r,l){Jo=Rd=!0;var m=r.pending;m===null?l.next=l:(l.next=m.next,m.next=l),r.pending=l}function qs(r,l,m){if((m&4194048)!==0){var _=l.lanes;_&=r.pendingLanes,m|=_,l.lanes=m,ia(r,m)}}var hh={readContext:Xa,use:Ld,useCallback:Qi,useContext:Qi,useEffect:Qi,useImperativeHandle:Qi,useLayoutEffect:Qi,useInsertionEffect:Qi,useMemo:Qi,useReducer:Qi,useRef:Qi,useState:Qi,useDebugValue:Qi,useDeferredValue:Qi,useTransition:Qi,useSyncExternalStore:Qi,useId:Qi,useHostTransitionStatus:Qi,useFormState:Qi,useActionState:Qi,useOptimistic:Qi,useMemoCache:Qi,useCacheRefresh:Qi};hh.useEffectEvent=Qi;var hv={readContext:Xa,use:Ld,useCallback:function(r,l){return Ps().memoizedState=[r,l===void 0?null:l],r},useContext:Xa,useEffect:rv,useImperativeHandle:function(r,l,m){m=m!=null?m.concat([r]):null,Pd(4194308,4,Fm.bind(null,l,r),m)},useLayoutEffect:function(r,l){return Pd(4194308,4,r,l)},useInsertionEffect:function(r,l){Pd(4,2,r,l)},useMemo:function(r,l){var m=Ps();l=l===void 0?null:l;var _=r();if(lu){se(!0);try{r()}finally{se(!1)}}return m.memoizedState=[_,l],_},useReducer:function(r,l,m){var _=Ps();if(m!==void 0){var A=m(l);if(lu){se(!0);try{m(l)}finally{se(!1)}}}else A=l;return _.memoizedState=_.baseState=A,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:A},_.queue=r,r=r.dispatch=ux.bind(null,dn,r),[_.memoizedState,r]},useRef:function(r){var l=Ps();return r={current:r},l.memoizedState=r},useState:function(r){r=uh(r);var l=r.queue,m=fv.bind(null,dn,l);return l.dispatch=m,[r.memoizedState,m]},useDebugValue:Fd,useDeferredValue:function(r,l){var m=Ps();return Hm(m,r,l)},useTransition:function(){var r=uh(!1);return r=jm.bind(null,dn,r.queue,!0,!1),Ps().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,l,m){var _=dn,A=Ps();if(zn){if(m===void 0)throw Error(n(407));m=m()}else{if(m=l(),pi===null)throw Error(n(349));(kn&127)!==0||Z0(_,l,m)}A.memoizedState=m;var D={value:m,getSnapshot:l};return A.queue=D,rv(Im.bind(null,_,D,r),[r]),_.flags|=2048,af(9,{destroy:void 0},Um.bind(null,_,D,m,l),null),m},useId:function(){var r=Ps(),l=pi.identifierPrefix;if(zn){var m=Ne,_=ye;m=(_&~(1<<32-gt(_)-1)).toString(32)+m,l="_"+l+"R_"+m,m=Dd++,0<m&&(l+="H"+m.toString(32)),l+="_"}else m=ax++,l="_"+l+"r_"+m.toString(32)+"_";return r.memoizedState=l},useHostTransitionStatus:Xm,useFormState:ev,useActionState:ev,useOptimistic:function(r){var l=Ps();l.memoizedState=l.baseState=r;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=m,l=fh.bind(null,dn,!0,m),m.dispatch=l,[r,l]},useMemoCache:Lm,useCacheRefresh:function(){return Ps().memoizedState=cx.bind(null,dn)},useEffectEvent:function(r){var l=Ps(),m={impl:r};return l.memoizedState=m,function(){if((jn&2)!==0)throw Error(n(440));return m.impl.apply(void 0,arguments)}}},rf={readContext:Xa,use:Ld,useCallback:km,useContext:Xa,useEffect:Bm,useImperativeHandle:Bd,useInsertionEffect:cv,useLayoutEffect:br,useMemo:Vm,useReducer:Od,useRef:sv,useState:function(){return Od(Il)},useDebugValue:Fd,useDeferredValue:function(r,l){var m=sa();return Gm(m,bi.memoizedState,r,l)},useTransition:function(){var r=Od(Il)[0],l=sa().memoizedState;return[typeof r=="boolean"?r:ch(r),l]},useSyncExternalStore:Nm,useId:as,useHostTransitionStatus:Xm,useFormState:nv,useActionState:nv,useOptimistic:function(r,l){var m=sa();return K0(m,bi,r,l)},useMemoCache:Lm,useCacheRefresh:Ym};rf.useEffectEvent=lv;var dh={readContext:Xa,use:Ld,useCallback:km,useContext:Xa,useEffect:Bm,useImperativeHandle:Bd,useInsertionEffect:cv,useLayoutEffect:br,useMemo:Vm,useReducer:Nd,useRef:sv,useState:function(){return Nd(Il)},useDebugValue:Fd,useDeferredValue:function(r,l){var m=sa();return bi===null?Hm(m,r,l):Gm(m,bi.memoizedState,r,l)},useTransition:function(){var r=Nd(Il)[0],l=sa().memoizedState;return[typeof r=="boolean"?r:ch(r),l]},useSyncExternalStore:Nm,useId:as,useHostTransitionStatus:Xm,useFormState:av,useActionState:av,useOptimistic:function(r,l){var m=sa();return bi!==null?K0(m,bi,r,l):(m.baseState=r,[r,m.queue.dispatch])},useMemoCache:Lm,useCacheRefresh:Ym};dh.useEffectEvent=lv;function of(r,l,m,_){l=r.memoizedState,m=m(_,l),m=m==null?l:y({},l,m),r.memoizedState=m,r.lanes===0&&(r.updateQueue.baseState=m)}var ph={enqueueSetState:function(r,l,m){r=r._reactInternals;var _=Bs(),A=Ko(_);A.payload=l,m!=null&&(A.callback=m),l=Nl(r,A,_),l!==null&&(p(l,r,_),xc(l,r,_))},enqueueReplaceState:function(r,l,m){r=r._reactInternals;var _=Bs(),A=Ko(_);A.tag=1,A.payload=l,m!=null&&(A.callback=m),l=Nl(r,A,_),l!==null&&(p(l,r,_),xc(l,r,_))},enqueueForceUpdate:function(r,l){r=r._reactInternals;var m=Bs(),_=Ko(m);_.tag=2,l!=null&&(_.callback=l),l=Nl(r,_,m),l!==null&&(p(l,r,m),xc(l,r,m))}};function dv(r,l,m,_,A,D,X){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(_,D,X):l.prototype&&l.prototype.isPureReactComponent?!El(m,_)||!El(A,D):!0}function pv(r,l,m,_){r=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(m,_),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(m,_),l.state!==r&&ph.enqueueReplaceState(l,l.state,null)}function ss(r,l){var m=l;if("ref"in l){m={};for(var _ in l)_!=="ref"&&(m[_]=l[_])}if(r=r.defaultProps){m===l&&(m=y({},m));for(var A in r)m[A]===void 0&&(m[A]=r[A])}return m}function Zm(r){Mo(r)}function mv(r){console.error(r)}function kd(r){Mo(r)}function Vd(r,l){try{var m=r.onUncaughtError;m(l.value,{componentStack:l.stack})}catch(_){setTimeout(function(){throw _})}}function gv(r,l,m){try{var _=r.onCaughtError;_(m.value,{componentStack:m.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function Km(r,l,m){return m=Ko(m),m.tag=3,m.payload={element:null},m.callback=function(){Vd(r,l)},m}function lf(r){return r=Ko(r),r.tag=3,r}function Xs(r,l,m,_){var A=m.type.getDerivedStateFromError;if(typeof A=="function"){var D=_.value;r.payload=function(){return A(D)},r.callback=function(){gv(l,m,_)}}var X=m.stateNode;X!==null&&typeof X.componentDidCatch=="function"&&(r.callback=function(){gv(l,m,_),typeof A!="function"&&(al===null?al=new Set([this]):al.add(this));var st=_.stack;this.componentDidCatch(_.value,{componentStack:st!==null?st:""})})}function Mr(r,l,m,_,A){if(m.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){if(l=m.alternate,l!==null&&pc(l,m,A,!0),m=Ua.current,m!==null){switch(m.tag){case 31:case 13:return Xr===null?_n():m.alternate===null&&mi===0&&(mi=3),m.flags&=-257,m.flags|=65536,m.lanes=A,_===ih?m.flags|=16384:(l=m.updateQueue,l===null?m.updateQueue=new Set([_]):l.add(_),fx(r,_,A)),!1;case 22:return m.flags|=65536,_===ih?m.flags|=16384:(l=m.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([_])},m.updateQueue=l):(m=l.retryQueue,m===null?l.retryQueue=new Set([_]):m.add(_)),fx(r,_,A)),!1}throw Error(n(435,m.tag))}return fx(r,_,A),_n(),!1}if(zn)return l=Ua.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=A,_!==$c&&(r=Error(n(422),{cause:_}),eu(v(r,m)))):(_!==$c&&(l=Error(n(423),{cause:_}),eu(v(l,m))),r=r.current.alternate,r.flags|=65536,A&=-A,r.lanes|=A,_=v(_,m),A=Km(r.stateNode,_,A),wd(r,A),mi!==4&&(mi=2)),!1;var D=Error(n(520),{cause:_});if(D=v(D,m),Io===null?Io=[D]:Io.push(D),mi!==4&&(mi=2),l===null)return!0;_=v(_,m),m=l;do{switch(m.tag){case 3:return m.flags|=65536,r=A&-A,m.lanes|=r,r=Km(m.stateNode,_,r),wd(m,r),!1;case 1:if(l=m.type,D=m.stateNode,(m.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(al===null||!al.has(D))))return m.flags|=65536,A&=-A,m.lanes|=A,A=lf(A),Xs(A,r,m,_),wd(m,A),!1}m=m.return}while(m!==null);return!1}var Hd=Error(n(461)),zi=!1;function Ji(r,l,m,_){l.child=r===null?W0(l,null,m,_):ru(l,r.child,m,_)}function mh(r,l,m,_,A){m=m.render;var D=l.ref;if("ref"in _){var X={};for(var st in _)st!=="ref"&&(X[st]=_[st])}else X=_;return iu(l),_=wm(r,l,m,X,D,A),st=Cm(),r!==null&&!zi?(Rm(r,l,A),No(r,l,A)):(zn&&st&&Sa(l),l.flags|=1,Ji(r,l,_,A),l.child)}function gh(r,l,m,_,A){if(r===null){var D=m.type;return typeof D=="function"&&!ja(D)&&D.defaultProps===void 0&&m.compare===null?(l.tag=15,l.type=D,Tr(r,l,D,_,A)):(r=dc(m.type,null,_,l,l.mode,A),r.ref=l.ref,r.return=l,l.child=r)}if(D=r.child,!Mc(r,A)){var X=D.memoizedProps;if(m=m.compare,m=m!==null?m:El,m(X,_)&&r.ref===l.ref)return No(r,l,A)}return l.flags|=1,r=yr(D,_),r.ref=l.ref,r.return=l,l.child=r}function Tr(r,l,m,_,A){if(r!==null){var D=r.memoizedProps;if(El(D,_)&&r.ref===l.ref)if(zi=!1,l.pendingProps=_=D,Mc(r,A))(r.flags&131072)!==0&&(zi=!0);else return l.lanes=r.lanes,No(r,l,A)}return cf(r,l,m,_,A)}function Ar(r,l,m,_){var A=_.children,D=r!==null?r.memoizedState:null;if(r===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),_.mode==="hidden"){if((l.flags&128)!==0){if(D=D!==null?D.baseLanes|m:m,r!==null){for(_=l.child=r.child,A=0;_!==null;)A=A|_.lanes|_.childLanes,_=_.sibling;_=A&~D}else _=0,l.child=null;return tl(r,l,D,m,_)}if((m&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},r!==null&&ef(l,D!==null?D.cachePool:null),D!==null?Mm(l,D):Tm(),q0(l);else return _=l.lanes=536870912,tl(r,l,D!==null?D.baseLanes|m:m,m,_)}else D!==null?(ef(l,D.cachePool),Mm(l,D),Ul(),l.memoizedState=null):(r!==null&&ef(l,null),Tm(),Ul());return Ji(r,l,A,m),l.child}function Lo(r,l){return r!==null&&r.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function tl(r,l,m,_,A){var D=Zo();return D=D===null?null:{parent:an._currentValue,pool:D},l.memoizedState={baseLanes:m,cachePool:D},r!==null&&ef(l,null),Tm(),q0(l),r!==null&&pc(r,l,_,!0),l.childLanes=A,null}function Yr(r,l){return l=uf({mode:l.mode,children:l.children},r.mode),l.ref=r.ref,r.child=l,l.return=r,l}function Ya(r,l,m){return ru(l,r.child,null,m),r=Yr(l,l.pendingProps),r.flags|=2,Sr(l),l.memoizedState=null,r}function vh(r,l,m){var _=l.pendingProps,A=(l.flags&128)!==0;if(l.flags&=-129,r===null){if(zn){if(_.mode==="hidden")return r=Yr(l,_),l.lanes=536870912,Lo(null,r);if(Am(l),(r=$n)?(r=ET(r,ba),r=r!==null&&r.data==="&"?r:null,r!==null&&(l.memoizedState={dehydrated:r,treeContext:Yt!==null?{id:ye,overflow:Ne}:null,retryLane:536870912,hydrationErrors:null},m=$f(r),m.return=l,l.child=m,Jn=l,$n=null)):r=null,r===null)throw In(l);return l.lanes=536870912,null}return Yr(l,_)}var D=r.memoizedState;if(D!==null){var X=D.dehydrated;if(Am(l),A)if(l.flags&256)l.flags&=-257,l=Ya(r,l,m);else if(l.memoizedState!==null)l.child=r.child,l.flags|=128,l=null;else throw Error(n(558));else if(zi||pc(r,l,m,!1),A=(m&r.childLanes)!==0,zi||A){if(_=pi,_!==null&&(X=Ca(_,m),X!==0&&X!==D.retryLane))throw D.retryLane=X,vr(r,X),p(_,r,X),Hd;_n(),l=Ya(r,l,m)}else r=D.treeContext,$n=sl(X.nextSibling),Jn=l,zn=!0,Co=null,ba=!1,r!==null&&Wa(l,r),l=Yr(l,_),l.flags|=4096;return l}return r=yr(r.child,{mode:_.mode,children:_.children}),r.ref=l.ref,l.child=r,r.return=l,r}function Oo(r,l){var m=l.ref;if(m===null)r!==null&&r.ref!==null&&(l.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(n(284));(r===null||r.ref!==m)&&(l.flags|=4194816)}}function cf(r,l,m,_,A){return iu(l),m=wm(r,l,m,_,void 0,A),_=Cm(),r!==null&&!zi?(Rm(r,l,A),No(r,l,A)):(zn&&_&&Sa(l),l.flags|=1,Ji(r,l,m,A),l.child)}function _s(r,l,m,_,A,D){return iu(l),l.updateQueue=null,m=Y0(l,_,m,A),X0(r),_=Cm(),r!==null&&!zi?(Rm(r,l,D),No(r,l,D)):(zn&&_&&Sa(l),l.flags|=1,Ji(r,l,m,D),l.child)}function rs(r,l,m,_,A){if(iu(l),l.stateNode===null){var D=Eo,X=m.contextType;typeof X=="object"&&X!==null&&(D=Xa(X)),D=new m(_,D),l.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,D.updater=ph,l.stateNode=D,D._reactInternals=l,D=l.stateNode,D.props=_,D.state=l.memoizedState,D.refs={},xm(l),X=m.contextType,D.context=typeof X=="object"&&X!==null?Xa(X):Eo,D.state=l.memoizedState,X=m.getDerivedStateFromProps,typeof X=="function"&&(of(l,m,X,_),D.state=l.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(X=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),X!==D.state&&ph.enqueueReplaceState(D,D.state,null),ou(l,_,D,A),rh(),D.state=l.memoizedState),typeof D.componentDidMount=="function"&&(l.flags|=4194308),_=!0}else if(r===null){D=l.stateNode;var st=l.memoizedProps,Tt=ss(m,st);D.props=Tt;var Wt=D.context,fe=m.contextType;X=Eo,typeof fe=="object"&&fe!==null&&(X=Xa(fe));var _e=m.getDerivedStateFromProps;fe=typeof _e=="function"||typeof D.getSnapshotBeforeUpdate=="function",st=l.pendingProps!==st,fe||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(st||Wt!==X)&&pv(l,D,_,X),_c=!1;var Jt=l.memoizedState;D.state=Jt,ou(l,_,D,A),rh(),Wt=l.memoizedState,st||Jt!==Wt||_c?(typeof _e=="function"&&(of(l,m,_e,_),Wt=l.memoizedState),(Tt=_c||dv(l,m,Tt,_,Jt,Wt,X))?(fe||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(l.flags|=4194308)):(typeof D.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=_,l.memoizedState=Wt),D.props=_,D.state=Wt,D.context=X,_=Tt):(typeof D.componentDidMount=="function"&&(l.flags|=4194308),_=!1)}else{D=l.stateNode,Sm(r,l),X=l.memoizedProps,fe=ss(m,X),D.props=fe,_e=l.pendingProps,Jt=D.context,Wt=m.contextType,Tt=Eo,typeof Wt=="object"&&Wt!==null&&(Tt=Xa(Wt)),st=m.getDerivedStateFromProps,(Wt=typeof st=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(X!==_e||Jt!==Tt)&&pv(l,D,_,Tt),_c=!1,Jt=l.memoizedState,D.state=Jt,ou(l,_,D,A),rh();var oe=l.memoizedState;X!==_e||Jt!==oe||_c||r!==null&&r.dependencies!==null&&$u(r.dependencies)?(typeof st=="function"&&(of(l,m,st,_),oe=l.memoizedState),(fe=_c||dv(l,m,fe,_,Jt,oe,Tt)||r!==null&&r.dependencies!==null&&$u(r.dependencies))?(Wt||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(_,oe,Tt),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(_,oe,Tt)),typeof D.componentDidUpdate=="function"&&(l.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof D.componentDidUpdate!="function"||X===r.memoizedProps&&Jt===r.memoizedState||(l.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||X===r.memoizedProps&&Jt===r.memoizedState||(l.flags|=1024),l.memoizedProps=_,l.memoizedState=oe),D.props=_,D.state=oe,D.context=Tt,_=fe):(typeof D.componentDidUpdate!="function"||X===r.memoizedProps&&Jt===r.memoizedState||(l.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||X===r.memoizedProps&&Jt===r.memoizedState||(l.flags|=1024),_=!1)}return D=_,Oo(r,l),_=(l.flags&128)!==0,D||_?(D=l.stateNode,m=_&&typeof m.getDerivedStateFromError!="function"?null:D.render(),l.flags|=1,r!==null&&_?(l.child=ru(l,r.child,null,A),l.child=ru(l,null,m,A)):Ji(r,l,m,A),l.memoizedState=D.state,r=l.child):r=No(r,l,A),r}function ti(r,l,m,_){return Rl(),l.flags|=256,Ji(r,l,m,_),l.child}var Er={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zr(r){return{baseLanes:r,cachePool:Td()}}function yh(r,l,m){return r=r!==null?r.childLanes&~m:0,l&&(r|=Wn),r}function wr(r,l,m){var _=l.pendingProps,A=!1,D=(l.flags&128)!==0,X;if((X=D)||(X=r!==null&&r.memoizedState===null?!1:(Ki.current&2)!==0),X&&(A=!0,l.flags&=-129),X=(l.flags&32)!==0,l.flags&=-33,r===null){if(zn){if(A?Sc(l):Ul(),(r=$n)?(r=ET(r,ba),r=r!==null&&r.data!=="&"?r:null,r!==null&&(l.memoizedState={dehydrated:r,treeContext:Yt!==null?{id:ye,overflow:Ne}:null,retryLane:536870912,hydrationErrors:null},m=$f(r),m.return=l,l.child=m,Jn=l,$n=null)):r=null,r===null)throw In(l);return wx(r)?l.lanes=32:l.lanes=536870912,null}var st=_.children;return _=_.fallback,A?(Ul(),A=l.mode,st=uf({mode:"hidden",children:st},A),_=wo(_,A,m,null),st.return=l,_.return=l,st.sibling=_,l.child=st,_=l.child,_.memoizedState=Zr(m),_.childLanes=yh(r,X,m),l.memoizedState=Er,Lo(null,_)):(Sc(l),bc(l,st))}var Tt=r.memoizedState;if(Tt!==null&&(st=Tt.dehydrated,st!==null)){if(D)l.flags&256?(Sc(l),l.flags&=-257,l=ff(r,l,m)):l.memoizedState!==null?(Ul(),l.child=r.child,l.flags|=128,l=null):(Ul(),st=_.fallback,A=l.mode,_=uf({mode:"visible",children:_.children},A),st=wo(st,A,m,null),st.flags|=2,_.return=l,st.return=l,_.sibling=st,l.child=_,ru(l,r.child,null,m),_=l.child,_.memoizedState=Zr(m),_.childLanes=yh(r,X,m),l.memoizedState=Er,l=Lo(null,_));else if(Sc(l),wx(st)){if(X=st.nextSibling&&st.nextSibling.dataset,X)var Wt=X.dgst;X=Wt,_=Error(n(419)),_.stack="",_.digest=X,eu({value:_,source:null,stack:null}),l=ff(r,l,m)}else if(zi||pc(r,l,m,!1),X=(m&r.childLanes)!==0,zi||X){if(X=pi,X!==null&&(_=Ca(X,m),_!==0&&_!==Tt.retryLane))throw Tt.retryLane=_,vr(r,_),p(X,r,_),Hd;Ex(st)||_n(),l=ff(r,l,m)}else Ex(st)?(l.flags|=192,l.child=r.child,l=null):(r=Tt.treeContext,$n=sl(st.nextSibling),Jn=l,zn=!0,Co=null,ba=!1,r!==null&&Wa(l,r),l=bc(l,_.children),l.flags|=4096);return l}return A?(Ul(),st=_.fallback,A=l.mode,Tt=r.child,Wt=Tt.sibling,_=yr(Tt,{mode:"hidden",children:_.children}),_.subtreeFlags=Tt.subtreeFlags&65011712,Wt!==null?st=yr(Wt,st):(st=wo(st,A,m,null),st.flags|=2),st.return=l,_.return=l,_.sibling=st,l.child=_,Lo(null,_),_=l.child,st=r.child.memoizedState,st===null?st=Zr(m):(A=st.cachePool,A!==null?(Tt=an._currentValue,A=A.parent!==Tt?{parent:Tt,pool:Tt}:A):A=Td(),st={baseLanes:st.baseLanes|m,cachePool:A}),_.memoizedState=st,_.childLanes=yh(r,X,m),l.memoizedState=Er,Lo(r.child,_)):(Sc(l),m=r.child,r=m.sibling,m=yr(m,{mode:"visible",children:_.children}),m.return=l,m.sibling=null,r!==null&&(X=l.deletions,X===null?(l.deletions=[r],l.flags|=16):X.push(r)),l.child=m,l.memoizedState=null,m)}function bc(r,l){return l=uf({mode:"visible",children:l},r.mode),l.return=r,r.child=l}function uf(r,l){return r=Ga(22,r,null,l),r.lanes=0,r}function ff(r,l,m){return ru(l,r.child,null,m),r=bc(l,l.pendingProps.children),r.flags|=2,l.memoizedState=null,r}function uu(r,l,m){r.lanes|=l;var _=r.alternate;_!==null&&(_.lanes|=l),Ll(r.return,l,m)}function _h(r,l,m,_,A,D){var X=r.memoizedState;X===null?r.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:_,tail:m,tailMode:A,treeForkCount:D}:(X.isBackwards=l,X.rendering=null,X.renderingStartTime=0,X.last=_,X.tail=m,X.tailMode=A,X.treeForkCount=D)}function xh(r,l,m){var _=l.pendingProps,A=_.revealOrder,D=_.tail;_=_.children;var X=Ki.current,st=(X&2)!==0;if(st?(X=X&1|2,l.flags|=128):X&=1,ft(Ki,X),Ji(r,l,_,m),_=zn?tt:0,!st&&r!==null&&(r.flags&128)!==0)t:for(r=l.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&uu(r,m,l);else if(r.tag===19)uu(r,m,l);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===l)break t;for(;r.sibling===null;){if(r.return===null||r.return===l)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(A){case"forwards":for(m=l.child,A=null;m!==null;)r=m.alternate,r!==null&&Cd(r)===null&&(A=m),m=m.sibling;m=A,m===null?(A=l.child,l.child=null):(A=m.sibling,m.sibling=null),_h(l,!1,A,m,D,_);break;case"backwards":case"unstable_legacy-backwards":for(m=null,A=l.child,l.child=null;A!==null;){if(r=A.alternate,r!==null&&Cd(r)===null){l.child=A;break}r=A.sibling,A.sibling=m,m=A,A=r}_h(l,!0,m,null,D,_);break;case"together":_h(l,!1,null,null,void 0,_);break;default:l.memoizedState=null}return l.child}function No(r,l,m){if(r!==null&&(l.dependencies=r.dependencies),Dr|=l.lanes,(m&l.childLanes)===0)if(r!==null){if(pc(r,l,m,!1),(m&l.childLanes)===0)return null}else return null;if(r!==null&&l.child!==r.child)throw Error(n(153));if(l.child!==null){for(r=l.child,m=yr(r,r.pendingProps),l.child=m,m.return=l;r.sibling!==null;)r=r.sibling,m=m.sibling=yr(r,r.pendingProps),m.return=l;m.sibling=null}return l.child}function Mc(r,l){return(r.lanes&l)!==0?!0:(r=r.dependencies,!!(r!==null&&$u(r)))}function Sh(r,l,m){switch(l.tag){case 3:At(l,l.stateNode.containerInfo),Dl(l,an,r.memoizedState.cache),Rl();break;case 27:case 5:te(l);break;case 4:At(l,l.stateNode.containerInfo);break;case 10:Dl(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,Am(l),null;break;case 13:var _=l.memoizedState;if(_!==null)return _.dehydrated!==null?(Sc(l),l.flags|=128,null):(m&l.child.childLanes)!==0?wr(r,l,m):(Sc(l),r=No(r,l,m),r!==null?r.sibling:null);Sc(l);break;case 19:var A=(r.flags&128)!==0;if(_=(m&l.childLanes)!==0,_||(pc(r,l,m,!1),_=(m&l.childLanes)!==0),A){if(_)return xh(r,l,m);l.flags|=128}if(A=l.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),ft(Ki,Ki.current),_)break;return null;case 22:return l.lanes=0,Ar(r,l,m,l.pendingProps);case 24:Dl(l,an,r.memoizedState.cache)}return No(r,l,m)}function Gd(r,l,m){if(r!==null)if(r.memoizedProps!==l.pendingProps)zi=!0;else{if(!Mc(r,m)&&(l.flags&128)===0)return zi=!1,Sh(r,l,m);zi=(r.flags&131072)!==0}else zi=!1,zn&&(l.flags&1048576)!==0&&Tn(l,tt,l.index);switch(l.lanes=0,l.tag){case 16:t:{var _=l.pendingProps;if(r=su(l.elementType),l.type=r,typeof r=="function")ja(r)?(_=ss(r,_),l.tag=1,l=rs(null,l,r,_,m)):(l.tag=0,l=cf(null,l,r,_,m));else{if(r!=null){var A=r.$$typeof;if(A===z){l.tag=11,l=mh(null,l,r,_,m);break t}else if(A===q){l.tag=14,l=gh(null,l,r,_,m);break t}}throw l=ut(r)||r,Error(n(306,l,""))}}return l;case 0:return cf(r,l,l.type,l.pendingProps,m);case 1:return _=l.type,A=ss(_,l.pendingProps),rs(r,l,_,A,m);case 3:t:{if(At(l,l.stateNode.containerInfo),r===null)throw Error(n(387));_=l.pendingProps;var D=l.memoizedState;A=D.element,Sm(r,l),ou(l,_,null,m);var X=l.memoizedState;if(_=X.cache,Dl(l,an,_),_!==D.cache&&Md(l,[an],m,!0),rh(),_=X.element,D.isDehydrated)if(D={element:_,isDehydrated:!1,cache:X.cache},l.updateQueue.baseState=D,l.memoizedState=D,l.flags&256){l=ti(r,l,_,m);break t}else if(_!==A){A=v(Error(n(424)),l),eu(A),l=ti(r,l,_,m);break t}else for(r=l.stateNode.containerInfo,r.nodeType===9?r=r.body:r=r.nodeName==="HTML"?r.ownerDocument.body:r,$n=sl(r.firstChild),Jn=l,zn=!0,Co=null,ba=!0,m=W0(l,null,_,m),l.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(Rl(),_===A){l=No(r,l,m);break t}Ji(r,l,_,m)}l=l.child}return l;case 26:return Oo(r,l),r===null?(m=OT(l.type,null,l.pendingProps,null))?l.memoizedState=m:zn||(m=l.type,r=l.pendingProps,_=Tv(ht.current).createElement(m),_[cn]=l,_[Li]=r,Fs(_,m,r),it(_),l.stateNode=_):l.memoizedState=OT(l.type,r.memoizedProps,l.pendingProps,r.memoizedState),null;case 27:return te(l),r===null&&zn&&(_=l.stateNode=RT(l.type,l.pendingProps,ht.current),Jn=l,ba=!0,A=$n,yf(l.type)?(Cx=A,$n=sl(_.firstChild)):$n=A),Ji(r,l,l.pendingProps.children,m),Oo(r,l),r===null&&(l.flags|=4194304),l.child;case 5:return r===null&&zn&&((A=_=$n)&&(_=GO(_,l.type,l.pendingProps,ba),_!==null?(l.stateNode=_,Jn=l,$n=sl(_.firstChild),ba=!1,A=!0):A=!1),A||In(l)),te(l),A=l.type,D=l.pendingProps,X=r!==null?r.memoizedProps:null,_=D.children,Mx(A,D)?_=null:X!==null&&Mx(A,X)&&(l.flags|=32),l.memoizedState!==null&&(A=wm(r,l,sx,null,null,m),rg._currentValue=A),Oo(r,l),Ji(r,l,_,m),l.child;case 6:return r===null&&zn&&((r=m=$n)&&(m=jO(m,l.pendingProps,ba),m!==null?(l.stateNode=m,Jn=l,$n=null,r=!0):r=!1),r||In(l)),null;case 13:return wr(r,l,m);case 4:return At(l,l.stateNode.containerInfo),_=l.pendingProps,r===null?l.child=ru(l,null,_,m):Ji(r,l,_,m),l.child;case 11:return mh(r,l,l.type,l.pendingProps,m);case 7:return Ji(r,l,l.pendingProps,m),l.child;case 8:return Ji(r,l,l.pendingProps.children,m),l.child;case 12:return Ji(r,l,l.pendingProps.children,m),l.child;case 10:return _=l.pendingProps,Dl(l,l.type,_.value),Ji(r,l,_.children,m),l.child;case 9:return A=l.type._context,_=l.pendingProps.children,iu(l),A=Xa(A),_=_(A),l.flags|=1,Ji(r,l,_,m),l.child;case 14:return gh(r,l,l.type,l.pendingProps,m);case 15:return Tr(r,l,l.type,l.pendingProps,m);case 19:return xh(r,l,m);case 31:return vh(r,l,m);case 22:return Ar(r,l,m,l.pendingProps);case 24:return iu(l),_=Xa(an),r===null?(A=Zo(),A===null&&(A=pi,D=pm(),A.pooledCache=D,D.refCount++,D!==null&&(A.pooledCacheLanes|=m),A=D),l.memoizedState={parent:_,cache:A},xm(l),Dl(l,an,A)):((r.lanes&m)!==0&&(Sm(r,l),ou(l,null,null,m),rh()),A=r.memoizedState,D=l.memoizedState,A.parent!==_?(A={parent:_,cache:_},l.memoizedState=A,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=A),Dl(l,an,_)):(_=D.cache,Dl(l,an,_),_!==A.cache&&Md(l,[an],m,!0))),Ji(r,l,l.pendingProps.children,m),l.child;case 29:throw l.pendingProps}throw Error(n(156,l.tag))}function Ys(r){r.flags|=4}function Tc(r,l,m,_,A){if((l=(r.mode&32)!==0)&&(l=!1),l){if(r.flags|=16777216,(A&335544128)===A)if(r.stateNode.complete)r.flags|=8192;else if(we())r.flags|=8192;else throw un=ih,nh}else r.flags&=-16777217}function zl(r,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!zT(l))if(we())r.flags|=8192;else throw un=ih,nh}function hf(r,l){l!==null&&(r.flags|=4),r.flags&16384&&(l=r.tag!==22?Le():536870912,r.lanes|=l,Lr|=l)}function bh(r,l){if(!zn)switch(r.tailMode){case"hidden":l=r.tail;for(var m=null;l!==null;)l.alternate!==null&&(m=l),l=l.sibling;m===null?r.tail=null:m.sibling=null;break;case"collapsed":m=r.tail;for(var _=null;m!==null;)m.alternate!==null&&(_=m),m=m.sibling;_===null?l||r.tail===null?r.tail=null:r.tail.sibling=null:_.sibling=null}}function xi(r){var l=r.alternate!==null&&r.alternate.child===r.child,m=0,_=0;if(l)for(var A=r.child;A!==null;)m|=A.lanes|A.childLanes,_|=A.subtreeFlags&65011712,_|=A.flags&65011712,A.return=r,A=A.sibling;else for(A=r.child;A!==null;)m|=A.lanes|A.childLanes,_|=A.subtreeFlags,_|=A.flags,A.return=r,A=A.sibling;return r.subtreeFlags|=_,r.childLanes=m,l}function Qm(r,l,m){var _=l.pendingProps;switch(wi(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xi(l),null;case 1:return xi(l),null;case 3:return m=l.stateNode,_=null,r!==null&&(_=r.memoizedState.cache),l.memoizedState.cache!==_&&(l.flags|=2048),qr(an),$t(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(r===null||r.child===null)&&(jr(l)?Ys(l):r===null||r.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,th())),xi(l),null;case 26:var A=l.type,D=l.memoizedState;return r===null?(Ys(l),D!==null?(xi(l),zl(l,D)):(xi(l),Tc(l,A,null,_,m))):D?D!==r.memoizedState?(Ys(l),xi(l),zl(l,D)):(xi(l),l.flags&=-16777217):(r=r.memoizedProps,r!==_&&Ys(l),xi(l),Tc(l,A,r,_,m)),null;case 27:if(qt(l),m=ht.current,A=l.type,r!==null&&l.stateNode!=null)r.memoizedProps!==_&&Ys(l);else{if(!_){if(l.stateNode===null)throw Error(n(166));return xi(l),null}r=mt.current,jr(l)?tu(l):(r=RT(A,_,m),l.stateNode=r,Ys(l))}return xi(l),null;case 5:if(qt(l),A=l.type,r!==null&&l.stateNode!=null)r.memoizedProps!==_&&Ys(l);else{if(!_){if(l.stateNode===null)throw Error(n(166));return xi(l),null}if(D=mt.current,jr(l))tu(l);else{var X=Tv(ht.current);switch(D){case 1:D=X.createElementNS("http://www.w3.org/2000/svg",A);break;case 2:D=X.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;default:switch(A){case"svg":D=X.createElementNS("http://www.w3.org/2000/svg",A);break;case"math":D=X.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;case"script":D=X.createElement("div"),D.innerHTML="<script><\/script>",D=D.removeChild(D.firstChild);break;case"select":D=typeof _.is=="string"?X.createElement("select",{is:_.is}):X.createElement("select"),_.multiple?D.multiple=!0:_.size&&(D.size=_.size);break;default:D=typeof _.is=="string"?X.createElement(A,{is:_.is}):X.createElement(A)}}D[cn]=l,D[Li]=_;t:for(X=l.child;X!==null;){if(X.tag===5||X.tag===6)D.appendChild(X.stateNode);else if(X.tag!==4&&X.tag!==27&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===l)break t;for(;X.sibling===null;){if(X.return===null||X.return===l)break t;X=X.return}X.sibling.return=X.return,X=X.sibling}l.stateNode=D;t:switch(Fs(D,A,_),A){case"button":case"input":case"select":case"textarea":_=!!_.autoFocus;break t;case"img":_=!0;break t;default:_=!1}_&&Ys(l)}}return xi(l),Tc(l,l.type,r===null?null:r.memoizedProps,l.pendingProps,m),null;case 6:if(r&&l.stateNode!=null)r.memoizedProps!==_&&Ys(l);else{if(typeof _!="string"&&l.stateNode===null)throw Error(n(166));if(r=ht.current,jr(l)){if(r=l.stateNode,m=l.memoizedProps,_=null,A=Jn,A!==null)switch(A.tag){case 27:case 5:_=A.memoizedProps}r[cn]=l,r=!!(r.nodeValue===m||_!==null&&_.suppressHydrationWarning===!0||yT(r.nodeValue,m)),r||In(l,!0)}else r=Tv(r).createTextNode(_),r[cn]=l,l.stateNode=r}return xi(l),null;case 31:if(m=l.memoizedState,r===null||r.memoizedState!==null){if(_=jr(l),m!==null){if(r===null){if(!_)throw Error(n(318));if(r=l.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(557));r[cn]=l}else Rl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;xi(l),r=!1}else m=th(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=m),r=!0;if(!r)return l.flags&256?(Sr(l),l):(Sr(l),null);if((l.flags&128)!==0)throw Error(n(558))}return xi(l),null;case 13:if(_=l.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(A=jr(l),_!==null&&_.dehydrated!==null){if(r===null){if(!A)throw Error(n(318));if(A=l.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));A[cn]=l}else Rl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;xi(l),A=!1}else A=th(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=A),A=!0;if(!A)return l.flags&256?(Sr(l),l):(Sr(l),null)}return Sr(l),(l.flags&128)!==0?(l.lanes=m,l):(m=_!==null,r=r!==null&&r.memoizedState!==null,m&&(_=l.child,A=null,_.alternate!==null&&_.alternate.memoizedState!==null&&_.alternate.memoizedState.cachePool!==null&&(A=_.alternate.memoizedState.cachePool.pool),D=null,_.memoizedState!==null&&_.memoizedState.cachePool!==null&&(D=_.memoizedState.cachePool.pool),D!==A&&(_.flags|=2048)),m!==r&&m&&(l.child.flags|=8192),hf(l,l.updateQueue),xi(l),null);case 4:return $t(),r===null&&yx(l.stateNode.containerInfo),xi(l),null;case 10:return qr(l.type),xi(l),null;case 19:if(nt(Ki),_=l.memoizedState,_===null)return xi(l),null;if(A=(l.flags&128)!==0,D=_.rendering,D===null)if(A)bh(_,!1);else{if(mi!==0||r!==null&&(r.flags&128)!==0)for(r=l.child;r!==null;){if(D=Cd(r),D!==null){for(l.flags|=128,bh(_,!1),r=D.updateQueue,l.updateQueue=r,hf(l,r),l.subtreeFlags=0,r=m,m=l.child;m!==null;)Na(m,r),m=m.sibling;return ft(Ki,Ki.current&1|2),zn&&$e(l,_.treeForkCount),l.child}r=r.sibling}_.tail!==null&&Y()>Or&&(l.flags|=128,A=!0,bh(_,!1),l.lanes=4194304)}else{if(!A)if(r=Cd(D),r!==null){if(l.flags|=128,A=!0,r=r.updateQueue,l.updateQueue=r,hf(l,r),bh(_,!0),_.tail===null&&_.tailMode==="hidden"&&!D.alternate&&!zn)return xi(l),null}else 2*Y()-_.renderingStartTime>Or&&m!==536870912&&(l.flags|=128,A=!0,bh(_,!1),l.lanes=4194304);_.isBackwards?(D.sibling=l.child,l.child=D):(r=_.last,r!==null?r.sibling=D:l.child=D,_.last=D)}return _.tail!==null?(r=_.tail,_.rendering=r,_.tail=r.sibling,_.renderingStartTime=Y(),r.sibling=null,m=Ki.current,ft(Ki,A?m&1|2:m&1),zn&&$e(l,_.treeForkCount),r):(xi(l),null);case 22:case 23:return Sr(l),ys(),_=l.memoizedState!==null,r!==null?r.memoizedState!==null!==_&&(l.flags|=8192):_&&(l.flags|=8192),_?(m&536870912)!==0&&(l.flags&128)===0&&(xi(l),l.subtreeFlags&6&&(l.flags|=8192)):xi(l),m=l.updateQueue,m!==null&&hf(l,m.retryQueue),m=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(m=r.memoizedState.cachePool.pool),_=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(_=l.memoizedState.cachePool.pool),_!==m&&(l.flags|=2048),r!==null&&nt(mc),null;case 24:return m=null,r!==null&&(m=r.memoizedState.cache),l.memoizedState.cache!==m&&(l.flags|=2048),qr(an),xi(l),null;case 25:return null;case 30:return null}throw Error(n(156,l.tag))}function jd(r,l){switch(wi(l),l.tag){case 1:return r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 3:return qr(an),$t(),r=l.flags,(r&65536)!==0&&(r&128)===0?(l.flags=r&-65537|128,l):null;case 26:case 27:case 5:return qt(l),null;case 31:if(l.memoizedState!==null){if(Sr(l),l.alternate===null)throw Error(n(340));Rl()}return r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 13:if(Sr(l),r=l.memoizedState,r!==null&&r.dehydrated!==null){if(l.alternate===null)throw Error(n(340));Rl()}return r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 19:return nt(Ki),null;case 4:return $t(),null;case 10:return qr(l.type),null;case 22:case 23:return Sr(l),ys(),r!==null&&nt(mc),r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 24:return qr(an),null;case 25:return null;default:return null}}function fu(r,l){switch(wi(l),l.tag){case 3:qr(an),$t();break;case 26:case 27:case 5:qt(l);break;case 4:$t();break;case 31:l.memoizedState!==null&&Sr(l);break;case 13:Sr(l);break;case 19:nt(Ki);break;case 10:qr(l.type);break;case 22:case 23:Sr(l),ys(),r!==null&&nt(mc);break;case 24:qr(an)}}function el(r,l){try{var m=l.updateQueue,_=m!==null?m.lastEffect:null;if(_!==null){var A=_.next;m=A;do{if((m.tag&r)===r){_=void 0;var D=m.create,X=m.inst;_=D(),X.destroy=_}m=m.next}while(m!==A)}}catch(st){Ci(l,l.return,st)}}function Kr(r,l,m){try{var _=l.updateQueue,A=_!==null?_.lastEffect:null;if(A!==null){var D=A.next;_=D;do{if((_.tag&r)===r){var X=_.inst,st=X.destroy;if(st!==void 0){X.destroy=void 0,A=l;var Tt=m,Wt=st;try{Wt()}catch(fe){Ci(A,Tt,fe)}}}_=_.next}while(_!==D)}}catch(fe){Ci(l,l.return,fe)}}function Ac(r){var l=r.updateQueue;if(l!==null){var m=r.stateNode;try{is(l,m)}catch(_){Ci(r,r.return,_)}}}function Jm(r,l,m){m.props=ss(r.type,r.memoizedProps),m.state=r.memoizedState;try{m.componentWillUnmount()}catch(_){Ci(r,l,_)}}function nl(r,l){try{var m=r.ref;if(m!==null){switch(r.tag){case 26:case 27:case 5:var _=r.stateNode;break;case 30:_=r.stateNode;break;default:_=r.stateNode}typeof m=="function"?r.refCleanup=m(_):m.current=_}}catch(A){Ci(r,l,A)}}function Cr(r,l){var m=r.ref,_=r.refCleanup;if(m!==null)if(typeof _=="function")try{_()}catch(A){Ci(r,l,A)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(A){Ci(r,l,A)}else m.current=null}function Rr(r){var l=r.type,m=r.memoizedProps,_=r.stateNode;try{t:switch(l){case"button":case"input":case"select":case"textarea":m.autoFocus&&_.focus();break t;case"img":m.src?_.src=m.src:m.srcSet&&(_.srcset=m.srcSet)}}catch(A){Ci(r,r.return,A)}}function Qr(r,l,m){try{var _=r.stateNode;zO(_,r.type,m,l),_[Li]=l}catch(A){Ci(r,r.return,A)}}function Ta(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&yf(r.type)||r.tag===4}function il(r){t:for(;;){for(;r.sibling===null;){if(r.return===null||Ta(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&yf(r.type)||r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Rn(r,l,m){var _=r.tag;if(_===5||_===6)r=r.stateNode,l?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(r,l):(l=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,l.appendChild(r),m=m._reactRootContainer,m!=null||l.onclick!==null||(l.onclick=Xi));else if(_!==4&&(_===27&&yf(r.type)&&(m=r.stateNode,l=null),r=r.child,r!==null))for(Rn(r,l,m),r=r.sibling;r!==null;)Rn(r,l,m),r=r.sibling}function ri(r,l,m){var _=r.tag;if(_===5||_===6)r=r.stateNode,l?m.insertBefore(r,l):m.appendChild(r);else if(_!==4&&(_===27&&yf(r.type)&&(m=r.stateNode),r=r.child,r!==null))for(ri(r,l,m),r=r.sibling;r!==null;)ri(r,l,m),r=r.sibling}function ra(r){var l=r.stateNode,m=r.memoizedProps;try{for(var _=r.type,A=l.attributes;A.length;)l.removeAttributeNode(A[0]);Fs(l,_,m),l[cn]=r,l[Li]=m}catch(D){Ci(r,r.return,D)}}var Jr=!1,Bi=!1,Bl=!1,Mh=typeof WeakSet=="function"?WeakSet:Set,$i=null;function df(r,l){if(r=r.containerInfo,Sx=Lv,r=wl(r),gr(r)){if("selectionStart"in r)var m={start:r.selectionStart,end:r.selectionEnd};else t:{m=(m=r.ownerDocument)&&m.defaultView||window;var _=m.getSelection&&m.getSelection();if(_&&_.rangeCount!==0){m=_.anchorNode;var A=_.anchorOffset,D=_.focusNode;_=_.focusOffset;try{m.nodeType,D.nodeType}catch{m=null;break t}var X=0,st=-1,Tt=-1,Wt=0,fe=0,_e=r,Jt=null;e:for(;;){for(var oe;_e!==m||A!==0&&_e.nodeType!==3||(st=X+A),_e!==D||_!==0&&_e.nodeType!==3||(Tt=X+_),_e.nodeType===3&&(X+=_e.nodeValue.length),(oe=_e.firstChild)!==null;)Jt=_e,_e=oe;for(;;){if(_e===r)break e;if(Jt===m&&++Wt===A&&(st=X),Jt===D&&++fe===_&&(Tt=X),(oe=_e.nextSibling)!==null)break;_e=Jt,Jt=_e.parentNode}_e=oe}m=st===-1||Tt===-1?null:{start:st,end:Tt}}else m=null}m=m||{start:0,end:0}}else m=null;for(bx={focusedElem:r,selectionRange:m},Lv=!1,$i=l;$i!==null;)if(l=$i,r=l.child,(l.subtreeFlags&1028)!==0&&r!==null)r.return=l,$i=r;else for(;$i!==null;){switch(l=$i,D=l.alternate,r=l.flags,l.tag){case 0:if((r&4)!==0&&(r=l.updateQueue,r=r!==null?r.events:null,r!==null))for(m=0;m<r.length;m++)A=r[m],A.ref.impl=A.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&D!==null){r=void 0,m=l,A=D.memoizedProps,D=D.memoizedState,_=m.stateNode;try{var Ke=ss(m.type,A);r=_.getSnapshotBeforeUpdate(Ke,D),_.__reactInternalSnapshotBeforeUpdate=r}catch(hn){Ci(m,m.return,hn)}}break;case 3:if((r&1024)!==0){if(r=l.stateNode.containerInfo,m=r.nodeType,m===9)Ax(r);else if(m===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Ax(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(n(163))}if(r=l.sibling,r!==null){r.return=l.return,$i=r;break}$i=l.return}}function vv(r,l,m){var _=m.flags;switch(m.tag){case 0:case 11:case 15:Fl(r,m),_&4&&el(5,m);break;case 1:if(Fl(r,m),_&4)if(r=m.stateNode,l===null)try{r.componentDidMount()}catch(X){Ci(m,m.return,X)}else{var A=ss(m.type,l.memoizedProps);l=l.memoizedState;try{r.componentDidUpdate(A,l,r.__reactInternalSnapshotBeforeUpdate)}catch(X){Ci(m,m.return,X)}}_&64&&Ac(m),_&512&&nl(m,m.return);break;case 3:if(Fl(r,m),_&64&&(r=m.updateQueue,r!==null)){if(l=null,m.child!==null)switch(m.child.tag){case 27:case 5:l=m.child.stateNode;break;case 1:l=m.child.stateNode}try{is(r,l)}catch(X){Ci(m,m.return,X)}}break;case 27:l===null&&_&4&&ra(m);case 26:case 5:Fl(r,m),l===null&&_&4&&Rr(m),_&512&&nl(m,m.return);break;case 12:Fl(r,m);break;case 31:Fl(r,m),_&4&&qd(r,m);break;case 13:Fl(r,m),_&4&&$m(r,m),_&64&&(r=m.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(m=AO.bind(null,m),WO(r,m))));break;case 22:if(_=m.memoizedState!==null||Jr,!_){l=l!==null&&l.memoizedState!==null||Bi,A=Jr;var D=Bi;Jr=_,(Bi=l)&&!D?di(r,m,(m.subtreeFlags&8772)!==0):Fl(r,m),Jr=A,Bi=D}break;case 30:break;default:Fl(r,m)}}function Wd(r){var l=r.alternate;l!==null&&(r.alternate=null,Wd(l)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(l=r.stateNode,l!==null&&Gr(l)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var ei=null,Aa=!1;function xs(r,l,m){for(m=m.child;m!==null;)Ec(r,l,m),m=m.sibling}function Ec(r,l,m){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(Gt,m)}catch{}switch(m.tag){case 26:Bi||Cr(m,l),xs(r,l,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:Bi||Cr(m,l);var _=ei,A=Aa;yf(m.type)&&(ei=m.stateNode,Aa=!1),xs(r,l,m),ig(m.stateNode),ei=_,Aa=A;break;case 5:Bi||Cr(m,l);case 6:if(_=ei,A=Aa,ei=null,xs(r,l,m),ei=_,Aa=A,ei!==null)if(Aa)try{(ei.nodeType===9?ei.body:ei.nodeName==="HTML"?ei.ownerDocument.body:ei).removeChild(m.stateNode)}catch(D){Ci(m,l,D)}else try{ei.removeChild(m.stateNode)}catch(D){Ci(m,l,D)}break;case 18:ei!==null&&(Aa?(r=ei,TT(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,m.stateNode),ip(r)):TT(ei,m.stateNode));break;case 4:_=ei,A=Aa,ei=m.stateNode.containerInfo,Aa=!0,xs(r,l,m),ei=_,Aa=A;break;case 0:case 11:case 14:case 15:Kr(2,m,l),Bi||Kr(4,m,l),xs(r,l,m);break;case 1:Bi||(Cr(m,l),_=m.stateNode,typeof _.componentWillUnmount=="function"&&Jm(m,l,_)),xs(r,l,m);break;case 21:xs(r,l,m);break;case 22:Bi=(_=Bi)||m.memoizedState!==null,xs(r,l,m),Bi=_;break;default:xs(r,l,m)}}function qd(r,l){if(l.memoizedState===null&&(r=l.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{ip(r)}catch(m){Ci(l,l.return,m)}}}function $m(r,l){if(l.memoizedState===null&&(r=l.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{ip(r)}catch(m){Ci(l,l.return,m)}}function yv(r){switch(r.tag){case 31:case 13:case 19:var l=r.stateNode;return l===null&&(l=r.stateNode=new Mh),l;case 22:return r=r.stateNode,l=r._retryCache,l===null&&(l=r._retryCache=new Mh),l;default:throw Error(n(435,r.tag))}}function oa(r,l){var m=yv(r);l.forEach(function(_){if(!m.has(_)){m.add(_);var A=EO.bind(null,r,_);_.then(A,A)}})}function Ss(r,l){var m=l.deletions;if(m!==null)for(var _=0;_<m.length;_++){var A=m[_],D=r,X=l,st=X;t:for(;st!==null;){switch(st.tag){case 27:if(yf(st.type)){ei=st.stateNode,Aa=!1;break t}break;case 5:ei=st.stateNode,Aa=!1;break t;case 3:case 4:ei=st.stateNode.containerInfo,Aa=!0;break t}st=st.return}if(ei===null)throw Error(n(160));Ec(D,X,A),ei=null,Aa=!1,D=A.alternate,D!==null&&(D.return=null),A.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)wc(l,r),l=l.sibling}var Zs=null;function wc(r,l){var m=r.alternate,_=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Ss(l,r),ta(r),_&4&&(Kr(3,r,r.return),el(3,r),Kr(5,r,r.return));break;case 1:Ss(l,r),ta(r),_&512&&(Bi||m===null||Cr(m,m.return)),_&64&&Jr&&(r=r.updateQueue,r!==null&&(_=r.callbacks,_!==null&&(m=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=m===null?_:m.concat(_))));break;case 26:var A=Zs;if(Ss(l,r),ta(r),_&512&&(Bi||m===null||Cr(m,m.return)),_&4){var D=m!==null?m.memoizedState:null;if(_=r.memoizedState,m===null)if(_===null)if(r.stateNode===null){t:{_=r.type,m=r.memoizedProps,A=A.ownerDocument||A;e:switch(_){case"title":D=A.getElementsByTagName("title")[0],(!D||D[fr]||D[cn]||D.namespaceURI==="http://www.w3.org/2000/svg"||D.hasAttribute("itemprop"))&&(D=A.createElement(_),A.head.insertBefore(D,A.querySelector("head > title"))),Fs(D,_,m),D[cn]=r,it(D),_=D;break t;case"link":var X=IT("link","href",A).get(_+(m.href||""));if(X){for(var st=0;st<X.length;st++)if(D=X[st],D.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&D.getAttribute("rel")===(m.rel==null?null:m.rel)&&D.getAttribute("title")===(m.title==null?null:m.title)&&D.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){X.splice(st,1);break e}}D=A.createElement(_),Fs(D,_,m),A.head.appendChild(D);break;case"meta":if(X=IT("meta","content",A).get(_+(m.content||""))){for(st=0;st<X.length;st++)if(D=X[st],D.getAttribute("content")===(m.content==null?null:""+m.content)&&D.getAttribute("name")===(m.name==null?null:m.name)&&D.getAttribute("property")===(m.property==null?null:m.property)&&D.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&D.getAttribute("charset")===(m.charSet==null?null:m.charSet)){X.splice(st,1);break e}}D=A.createElement(_),Fs(D,_,m),A.head.appendChild(D);break;default:throw Error(n(468,_))}D[cn]=r,it(D),_=D}r.stateNode=_}else PT(A,r.type,r.stateNode);else r.stateNode=UT(A,_,r.memoizedProps);else D!==_?(D===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):D.count--,_===null?PT(A,r.type,r.stateNode):UT(A,_,r.memoizedProps)):_===null&&r.stateNode!==null&&Qr(r,r.memoizedProps,m.memoizedProps)}break;case 27:Ss(l,r),ta(r),_&512&&(Bi||m===null||Cr(m,m.return)),m!==null&&_&4&&Qr(r,r.memoizedProps,m.memoizedProps);break;case 5:if(Ss(l,r),ta(r),_&512&&(Bi||m===null||Cr(m,m.return)),r.flags&32){A=r.stateNode;try{ci(A,"")}catch(Ke){Ci(r,r.return,Ke)}}_&4&&r.stateNode!=null&&(A=r.memoizedProps,Qr(r,A,m!==null?m.memoizedProps:A)),_&1024&&(Bl=!0);break;case 6:if(Ss(l,r),ta(r),_&4){if(r.stateNode===null)throw Error(n(162));_=r.memoizedProps,m=r.stateNode;try{m.nodeValue=_}catch(Ke){Ci(r,r.return,Ke)}}break;case 3:if(wv=null,A=Zs,Zs=Av(l.containerInfo),Ss(l,r),Zs=A,ta(r),_&4&&m!==null&&m.memoizedState.isDehydrated)try{ip(l.containerInfo)}catch(Ke){Ci(r,r.return,Ke)}Bl&&(Bl=!1,_v(r));break;case 4:_=Zs,Zs=Av(r.stateNode.containerInfo),Ss(l,r),ta(r),Zs=_;break;case 12:Ss(l,r),ta(r);break;case 31:Ss(l,r),ta(r),_&4&&(_=r.updateQueue,_!==null&&(r.updateQueue=null,oa(r,_)));break;case 13:Ss(l,r),ta(r),r.child.flags&8192&&r.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(Hl=Y()),_&4&&(_=r.updateQueue,_!==null&&(r.updateQueue=null,oa(r,_)));break;case 22:A=r.memoizedState!==null;var Tt=m!==null&&m.memoizedState!==null,Wt=Jr,fe=Bi;if(Jr=Wt||A,Bi=fe||Tt,Ss(l,r),Bi=fe,Jr=Wt,ta(r),_&8192)t:for(l=r.stateNode,l._visibility=A?l._visibility&-2:l._visibility|1,A&&(m===null||Tt||Jr||Bi||hu(r)),m=null,l=r;;){if(l.tag===5||l.tag===26){if(m===null){Tt=m=l;try{if(D=Tt.stateNode,A)X=D.style,typeof X.setProperty=="function"?X.setProperty("display","none","important"):X.display="none";else{st=Tt.stateNode;var _e=Tt.memoizedProps.style,Jt=_e!=null&&_e.hasOwnProperty("display")?_e.display:null;st.style.display=Jt==null||typeof Jt=="boolean"?"":(""+Jt).trim()}}catch(Ke){Ci(Tt,Tt.return,Ke)}}}else if(l.tag===6){if(m===null){Tt=l;try{Tt.stateNode.nodeValue=A?"":Tt.memoizedProps}catch(Ke){Ci(Tt,Tt.return,Ke)}}}else if(l.tag===18){if(m===null){Tt=l;try{var oe=Tt.stateNode;A?AT(oe,!0):AT(Tt.stateNode,!1)}catch(Ke){Ci(Tt,Tt.return,Ke)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===r)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break t;for(;l.sibling===null;){if(l.return===null||l.return===r)break t;m===l&&(m=null),l=l.return}m===l&&(m=null),l.sibling.return=l.return,l=l.sibling}_&4&&(_=r.updateQueue,_!==null&&(m=_.retryQueue,m!==null&&(_.retryQueue=null,oa(r,m))));break;case 19:Ss(l,r),ta(r),_&4&&(_=r.updateQueue,_!==null&&(r.updateQueue=null,oa(r,_)));break;case 30:break;case 21:break;default:Ss(l,r),ta(r)}}function ta(r){var l=r.flags;if(l&2){try{for(var m,_=r.return;_!==null;){if(Ta(_)){m=_;break}_=_.return}if(m==null)throw Error(n(160));switch(m.tag){case 27:var A=m.stateNode,D=il(r);ri(r,D,A);break;case 5:var X=m.stateNode;m.flags&32&&(ci(X,""),m.flags&=-33);var st=il(r);ri(r,st,X);break;case 3:case 4:var Tt=m.stateNode.containerInfo,Wt=il(r);Rn(r,Wt,Tt);break;default:throw Error(n(161))}}catch(fe){Ci(r,r.return,fe)}r.flags&=-3}l&4096&&(r.flags&=-4097)}function _v(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var l=r;_v(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),r=r.sibling}}function Fl(r,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)vv(r,l.alternate,l),l=l.sibling}function hu(r){for(r=r.child;r!==null;){var l=r;switch(l.tag){case 0:case 11:case 14:case 15:Kr(4,l,l.return),hu(l);break;case 1:Cr(l,l.return);var m=l.stateNode;typeof m.componentWillUnmount=="function"&&Jm(l,l.return,m),hu(l);break;case 27:ig(l.stateNode);case 26:case 5:Cr(l,l.return),hu(l);break;case 22:l.memoizedState===null&&hu(l);break;case 30:hu(l);break;default:hu(l)}r=r.sibling}}function di(r,l,m){for(m=m&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var _=l.alternate,A=r,D=l,X=D.flags;switch(D.tag){case 0:case 11:case 15:di(A,D,m),el(4,D);break;case 1:if(di(A,D,m),_=D,A=_.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(Wt){Ci(_,_.return,Wt)}if(_=D,A=_.updateQueue,A!==null){var st=_.stateNode;try{var Tt=A.shared.hiddenCallbacks;if(Tt!==null)for(A.shared.hiddenCallbacks=null,A=0;A<Tt.length;A++)Qo(Tt[A],st)}catch(Wt){Ci(_,_.return,Wt)}}m&&X&64&&Ac(D),nl(D,D.return);break;case 27:ra(D);case 26:case 5:di(A,D,m),m&&_===null&&X&4&&Rr(D),nl(D,D.return);break;case 12:di(A,D,m);break;case 31:di(A,D,m),m&&X&4&&qd(A,D);break;case 13:di(A,D,m),m&&X&4&&$m(A,D);break;case 22:D.memoizedState===null&&di(A,D,m),nl(D,D.return);break;case 30:break;default:di(A,D,m)}l=l.sibling}}function Xd(r,l){var m=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(m=r.memoizedState.cachePool.pool),r=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(r=l.memoizedState.cachePool.pool),r!==m&&(r!=null&&r.refCount++,m!=null&&ns(m))}function kl(r,l){r=null,l.alternate!==null&&(r=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==r&&(l.refCount++,r!=null&&ns(r))}function Ia(r,l,m,_){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)ji(r,l,m,_),l=l.sibling}function ji(r,l,m,_){var A=l.flags;switch(l.tag){case 0:case 11:case 15:Ia(r,l,m,_),A&2048&&el(9,l);break;case 1:Ia(r,l,m,_);break;case 3:Ia(r,l,m,_),A&2048&&(r=null,l.alternate!==null&&(r=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==r&&(l.refCount++,r!=null&&ns(r)));break;case 12:if(A&2048){Ia(r,l,m,_),r=l.stateNode;try{var D=l.memoizedProps,X=D.id,st=D.onPostCommit;typeof st=="function"&&st(X,l.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(Tt){Ci(l,l.return,Tt)}}else Ia(r,l,m,_);break;case 31:Ia(r,l,m,_);break;case 13:Ia(r,l,m,_);break;case 23:break;case 22:D=l.stateNode,X=l.alternate,l.memoizedState!==null?D._visibility&2?Ia(r,l,m,_):pf(r,l):D._visibility&2?Ia(r,l,m,_):(D._visibility|=2,Cc(r,l,m,_,(l.subtreeFlags&10256)!==0||!1)),A&2048&&Xd(X,l);break;case 24:Ia(r,l,m,_),A&2048&&kl(l.alternate,l);break;default:Ia(r,l,m,_)}}function Cc(r,l,m,_,A){for(A=A&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var D=r,X=l,st=m,Tt=_,Wt=X.flags;switch(X.tag){case 0:case 11:case 15:Cc(D,X,st,Tt,A),el(8,X);break;case 23:break;case 22:var fe=X.stateNode;X.memoizedState!==null?fe._visibility&2?Cc(D,X,st,Tt,A):pf(D,X):(fe._visibility|=2,Cc(D,X,st,Tt,A)),A&&Wt&2048&&Xd(X.alternate,X);break;case 24:Cc(D,X,st,Tt,A),A&&Wt&2048&&kl(X.alternate,X);break;default:Cc(D,X,st,Tt,A)}l=l.sibling}}function pf(r,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var m=r,_=l,A=_.flags;switch(_.tag){case 22:pf(m,_),A&2048&&Xd(_.alternate,_);break;case 24:pf(m,_),A&2048&&kl(_.alternate,_);break;default:pf(m,_)}l=l.sibling}}var ea=8192;function du(r,l,m){if(r.subtreeFlags&ea)for(r=r.child;r!==null;)la(r,l,m),r=r.sibling}function la(r,l,m){switch(r.tag){case 26:du(r,l,m),r.flags&ea&&r.memoizedState!==null&&i4(m,Zs,r.memoizedState,r.memoizedProps);break;case 5:du(r,l,m);break;case 3:case 4:var _=Zs;Zs=Av(r.stateNode.containerInfo),du(r,l,m),Zs=_;break;case 22:r.memoizedState===null&&(_=r.alternate,_!==null&&_.memoizedState!==null?(_=ea,ea=16777216,du(r,l,m),ea=_):du(r,l,m));break;default:du(r,l,m)}}function Ks(r){var l=r.alternate;if(l!==null&&(r=l.child,r!==null)){l.child=null;do l=r.sibling,r.sibling=null,r=l;while(r!==null)}}function zs(r){var l=r.deletions;if((r.flags&16)!==0){if(l!==null)for(var m=0;m<l.length;m++){var _=l[m];$i=_,Th(_,r)}Ks(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)pu(r),r=r.sibling}function pu(r){switch(r.tag){case 0:case 11:case 15:zs(r),r.flags&2048&&Kr(9,r,r.return);break;case 3:zs(r);break;case 12:zs(r);break;case 22:var l=r.stateNode;r.memoizedState!==null&&l._visibility&2&&(r.return===null||r.return.tag!==13)?(l._visibility&=-3,Yd(r)):zs(r);break;default:zs(r)}}function Yd(r){var l=r.deletions;if((r.flags&16)!==0){if(l!==null)for(var m=0;m<l.length;m++){var _=l[m];$i=_,Th(_,r)}Ks(r)}for(r=r.child;r!==null;){switch(l=r,l.tag){case 0:case 11:case 15:Kr(8,l,l.return),Yd(l);break;case 22:m=l.stateNode,m._visibility&2&&(m._visibility&=-3,Yd(l));break;default:Yd(l)}r=r.sibling}}function Th(r,l){for(;$i!==null;){var m=$i;switch(m.tag){case 0:case 11:case 15:Kr(8,m,l);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var _=m.memoizedState.cachePool.pool;_!=null&&_.refCount++}break;case 24:ns(m.memoizedState.cache)}if(_=m.child,_!==null)_.return=m,$i=_;else t:for(m=r;$i!==null;){_=$i;var A=_.sibling,D=_.return;if(Wd(_),_===m){$i=null;break t}if(A!==null){A.return=D,$i=A;break t}$i=D}}}var Zd={getCacheForType:function(r){var l=Xa(an),m=l.data.get(r);return m===void 0&&(m=r(),l.data.set(r,m)),m},cacheSignal:function(){return Xa(an).controller.signal}},Kd=typeof WeakMap=="function"?WeakMap:Map,jn=0,pi=null,Dn=null,kn=0,sn=0,Pn=null,Sn=!1,Nn=!1,Mi=!1,ca=0,mi=0,Dr=0,Vl=0,Uo=0,Wn=0,Lr=0,Io=null,bs=null,Qs=!1,Hl=0,mf=0,Or=1/0,gf=null,al=null,Wi=0,Po=null,Nr=null,$r=0,Gl=0,mu=null,Qd=null,gu=0,vu=null;function Bs(){return(jn&2)!==0&&kn!==0?kn&-kn:j.T!==null?px():Fi()}function h(){if(Wn===0)if((kn&536870912)===0||zn){var r=le;le<<=1,(le&3932160)===0&&(le=262144),Wn=r}else Wn=536870912;return r=Ua.current,r!==null&&(r.flags|=32),Wn}function p(r,l,m){(r===pi&&(sn===2||sn===9)||r.cancelPendingCommit!==null)&&(zt(r,0),k(r,kn,Wn,!1)),bn(r,m),((jn&2)===0||r!==pi)&&(r===pi&&((jn&2)===0&&(Vl|=m),mi===4&&k(r,kn,Wn,!1)),Rc(r))}function S(r,l,m){if((jn&6)!==0)throw Error(n(327));var _=!m&&(l&127)===0&&(l&r.expiredLanes)===0||me(r,l),A=_?yu(r,l):Js(r,l,!0),D=_;do{if(A===0){Nn&&!_&&k(r,l,0,!1);break}else{if(m=r.current.alternate,D&&!U(m)){A=Js(r,l,!1),D=!1;continue}if(A===2){if(D=l,r.errorRecoveryDisabledLanes&D)var X=0;else X=r.pendingLanes&-536870913,X=X!==0?X:X&536870912?536870912:0;if(X!==0){l=X;t:{var st=r;A=Io;var Tt=st.current.memoizedState.isDehydrated;if(Tt&&(zt(st,X).flags|=256),X=Js(st,X,!1),X!==2){if(Mi&&!Tt){st.errorRecoveryDisabledLanes|=D,Vl|=D,A=4;break t}D=bs,bs=A,D!==null&&(bs===null?bs=D:bs.push.apply(bs,D))}A=X}if(D=!1,A!==2)continue}}if(A===1){zt(r,0),k(r,l,0,!0);break}t:{switch(_=r,D=A,D){case 0:case 1:throw Error(n(345));case 4:if((l&4194048)!==l)break;case 6:k(_,l,Wn,!Sn);break t;case 2:bs=null;break;case 3:case 5:break;default:throw Error(n(329))}if((l&62914560)===l&&(A=Hl+300-Y(),10<A)){if(k(_,l,Wn,!Sn),jt(_,0,!0)!==0)break t;$r=l,_.timeoutHandle=bT(E.bind(null,_,m,bs,gf,Qs,l,Wn,Vl,Lr,Sn,D,"Throttled",-0,0),A);break t}E(_,m,bs,gf,Qs,l,Wn,Vl,Lr,Sn,D,null,-0,0)}}break}while(!0);Rc(r)}function E(r,l,m,_,A,D,X,st,Tt,Wt,fe,_e,Jt,oe){if(r.timeoutHandle=-1,_e=l.subtreeFlags,_e&8192||(_e&16785408)===16785408){_e={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xi},la(l,D,_e);var Ke=(D&62914560)===D?Hl-Y():(D&4194048)===D?mf-Y():0;if(Ke=a4(_e,Ke),Ke!==null){$r=D,r.cancelPendingCommit=Ke(pn.bind(null,r,l,D,m,_,A,X,st,Tt,fe,_e,null,Jt,oe)),k(r,D,X,!Wt);return}}pn(r,l,D,m,_,A,X,st,Tt)}function U(r){for(var l=r;;){var m=l.tag;if((m===0||m===11||m===15)&&l.flags&16384&&(m=l.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var _=0;_<m.length;_++){var A=m[_],D=A.getSnapshot;A=A.value;try{if(!hi(D(),A))return!1}catch{return!1}}if(m=l.child,l.subtreeFlags&16384&&m!==null)m.return=l,l=m;else{if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function k(r,l,m,_){l&=~Uo,l&=~Vl,r.suspendedLanes|=l,r.pingedLanes&=~l,_&&(r.warmLanes|=l),_=r.expirationTimes;for(var A=l;0<A;){var D=31-gt(A),X=1<<D;_[D]=-1,A&=~X}m!==0&&Ai(r,m,l)}function ot(){return(jn&6)===0?(tg(0),!1):!0}function Mt(){if(Dn!==null){if(sn===0)var r=Dn.return;else r=Dn,qa=Wr=null,Dm(r),vc=null,yc=0,r=Dn;for(;r!==null;)fu(r.alternate,r),r=r.return;Dn=null}}function zt(r,l){var m=r.timeoutHandle;m!==-1&&(r.timeoutHandle=-1,kO(m)),m=r.cancelPendingCommit,m!==null&&(r.cancelPendingCommit=null,m()),$r=0,Mt(),pi=r,Dn=m=yr(r.current,null),kn=l,sn=0,Pn=null,Sn=!1,Nn=me(r,l),Mi=!1,Lr=Wn=Uo=Vl=Dr=mi=0,bs=Io=null,Qs=!1,(l&8)!==0&&(l|=l&32);var _=r.entangledLanes;if(_!==0)for(r=r.entanglements,_&=l;0<_;){var A=31-gt(_),D=1<<A;l|=r[A],_&=~D}return ca=l,To(),m}function pe(r,l){dn=null,j.H=hh,l===gc||l===Do?(l=Ad(),sn=3):l===nh?(l=Ad(),sn=4):sn=l===Hd?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Pn=l,Dn===null&&(mi=1,Vd(r,v(l,r.current)))}function we(){var r=Ua.current;return r===null?!0:(kn&4194048)===kn?Xr===null:(kn&62914560)===kn||(kn&536870912)!==0?r===Xr:!1}function Be(){var r=j.H;return j.H=hh,r===null?hh:r}function Ge(){var r=j.A;return j.A=Zd,r}function _n(){mi=4,Sn||(kn&4194048)!==kn&&Ua.current!==null||(Nn=!0),(Dr&134217727)===0&&(Vl&134217727)===0||pi===null||k(pi,kn,Wn,!1)}function Js(r,l,m){var _=jn;jn|=2;var A=Be(),D=Ge();(pi!==r||kn!==l)&&(gf=null,zt(r,l)),l=!1;var X=mi;t:do try{if(sn!==0&&Dn!==null){var st=Dn,Tt=Pn;switch(sn){case 8:Mt(),X=6;break t;case 3:case 2:case 9:case 6:Ua.current===null&&(l=!0);var Wt=sn;if(sn=0,Pn=null,Te(r,st,Tt,Wt),m&&Nn){X=0;break t}break;default:Wt=sn,sn=0,Pn=null,Te(r,st,Tt,Wt)}}Ah(),X=mi;break}catch(fe){pe(r,fe)}while(!0);return l&&r.shellSuspendCounter++,qa=Wr=null,jn=_,j.H=A,j.A=D,Dn===null&&(pi=null,kn=0,To()),X}function Ah(){for(;Dn!==null;)It(Dn)}function yu(r,l){var m=jn;jn|=2;var _=Be(),A=Ge();pi!==r||kn!==l?(gf=null,Or=Y()+500,zt(r,l)):Nn=me(r,l);t:do try{if(sn!==0&&Dn!==null){l=Dn;var D=Pn;e:switch(sn){case 1:sn=0,Pn=null,Te(r,l,D,1);break;case 2:case 9:if(j0(D)){sn=0,Pn=null,ae(l);break}l=function(){sn!==2&&sn!==9||pi!==r||(sn=7),Rc(r)},D.then(l,l);break t;case 3:sn=7;break t;case 4:sn=5;break t;case 7:j0(D)?(sn=0,Pn=null,ae(l)):(sn=0,Pn=null,Te(r,l,D,7));break;case 5:var X=null;switch(Dn.tag){case 26:X=Dn.memoizedState;case 5:case 27:var st=Dn;if(X?zT(X):st.stateNode.complete){sn=0,Pn=null;var Tt=st.sibling;if(Tt!==null)Dn=Tt;else{var Wt=st.return;Wt!==null?(Dn=Wt,en(Wt)):Dn=null}break e}}sn=0,Pn=null,Te(r,l,D,5);break;case 6:sn=0,Pn=null,Te(r,l,D,6);break;case 8:Mt(),mi=6;break t;default:throw Error(n(462))}}Kt();break}catch(fe){pe(r,fe)}while(!0);return qa=Wr=null,j.H=_,j.A=A,jn=m,Dn!==null?0:(pi=null,kn=0,To(),mi)}function Kt(){for(;Dn!==null&&!ee();)It(Dn)}function It(r){var l=Gd(r.alternate,r,ca);r.memoizedProps=r.pendingProps,l===null?en(r):Dn=l}function ae(r){var l=r,m=l.alternate;switch(l.tag){case 15:case 0:l=_s(m,l,l.pendingProps,l.type,void 0,kn);break;case 11:l=_s(m,l,l.pendingProps,l.type.render,l.ref,kn);break;case 5:Dm(l);default:fu(m,l),l=Dn=Na(l,ca),l=Gd(m,l,ca)}r.memoizedProps=r.pendingProps,l===null?en(r):Dn=l}function Te(r,l,m,_){qa=Wr=null,Dm(l),vc=null,yc=0;var A=l.return;try{if(Mr(r,A,l,m,kn)){mi=1,Vd(r,v(m,r.current)),Dn=null;return}}catch(D){if(A!==null)throw Dn=A,D;mi=1,Vd(r,v(m,r.current)),Dn=null;return}l.flags&32768?(zn||_===1?r=!0:Nn||(kn&536870912)!==0?r=!1:(Sn=r=!0,(_===2||_===9||_===3||_===6)&&(_=Ua.current,_!==null&&_.tag===13&&(_.flags|=16384))),Ni(l,r)):en(l)}function en(r){var l=r;do{if((l.flags&32768)!==0){Ni(l,Sn);return}r=l.return;var m=Qm(l.alternate,l,ca);if(m!==null){Dn=m;return}if(l=l.sibling,l!==null){Dn=l;return}Dn=l=r}while(l!==null);mi===0&&(mi=5)}function Ni(r,l){do{var m=jd(r.alternate,r);if(m!==null){m.flags&=32767,Dn=m;return}if(m=r.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!l&&(r=r.sibling,r!==null)){Dn=r;return}Dn=r=m}while(r!==null);mi=6,Dn=null}function pn(r,l,m,_,A,D,X,st,Tt){r.cancelPendingCommit=null;do Jd();while(Wi!==0);if((jn&6)!==0)throw Error(n(327));if(l!==null){if(l===r.current)throw Error(n(177));if(D=l.lanes|l.childLanes,D|=Qc,Bn(r,m,D,X,st,Tt),r===pi&&(Dn=pi=null,kn=0),Nr=l,Po=r,$r=m,Gl=D,mu=A,Qd=_,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,wO(Ct,function(){return sT(),null})):(r.callbackNode=null,r.callbackPriority=0),_=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||_){_=j.T,j.T=null,A=K.p,K.p=2,X=jn,jn|=4;try{df(r,l,m)}finally{jn=X,K.p=A,j.T=_}}Wi=1,ni(),Pa(),ii()}}function ni(){if(Wi===1){Wi=0;var r=Po,l=Nr,m=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||m){m=j.T,j.T=null;var _=K.p;K.p=2;var A=jn;jn|=4;try{wc(l,r);var D=bx,X=wl(r.containerInfo),st=D.focusedElem,Tt=D.selectionRange;if(X!==st&&st&&st.ownerDocument&&oc(st.ownerDocument.documentElement,st)){if(Tt!==null&&gr(st)){var Wt=Tt.start,fe=Tt.end;if(fe===void 0&&(fe=Wt),"selectionStart"in st)st.selectionStart=Wt,st.selectionEnd=Math.min(fe,st.value.length);else{var _e=st.ownerDocument||document,Jt=_e&&_e.defaultView||window;if(Jt.getSelection){var oe=Jt.getSelection(),Ke=st.textContent.length,hn=Math.min(Tt.start,Ke),Ii=Tt.end===void 0?hn:Math.min(Tt.end,Ke);!oe.extend&&hn>Ii&&(X=Ii,Ii=hn,hn=X);var Pt=rc(st,hn),Et=rc(st,Ii);if(Pt&&Et&&(oe.rangeCount!==1||oe.anchorNode!==Pt.node||oe.anchorOffset!==Pt.offset||oe.focusNode!==Et.node||oe.focusOffset!==Et.offset)){var Ht=_e.createRange();Ht.setStart(Pt.node,Pt.offset),oe.removeAllRanges(),hn>Ii?(oe.addRange(Ht),oe.extend(Et.node,Et.offset)):(Ht.setEnd(Et.node,Et.offset),oe.addRange(Ht))}}}}for(_e=[],oe=st;oe=oe.parentNode;)oe.nodeType===1&&_e.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof st.focus=="function"&&st.focus(),st=0;st<_e.length;st++){var ge=_e[st];ge.element.scrollLeft=ge.left,ge.element.scrollTop=ge.top}}Lv=!!Sx,bx=Sx=null}finally{jn=A,K.p=_,j.T=m}}r.current=l,Wi=2}}function Pa(){if(Wi===2){Wi=0;var r=Po,l=Nr,m=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||m){m=j.T,j.T=null;var _=K.p;K.p=2;var A=jn;jn|=4;try{vv(r,l.alternate,l)}finally{jn=A,K.p=_,j.T=m}}Wi=3}}function ii(){if(Wi===4||Wi===3){Wi=0,$();var r=Po,l=Nr,m=$r,_=Qd;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Wi=5:(Wi=0,Nr=Po=null,jl(r,r.pendingLanes));var A=r.pendingLanes;if(A===0&&(al=null),ke(m),l=l.stateNode,Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(Gt,l,void 0,(l.current.flags&128)===128)}catch{}if(_!==null){l=j.T,A=K.p,K.p=2,j.T=null;try{for(var D=r.onRecoverableError,X=0;X<_.length;X++){var st=_[X];D(st.value,{componentStack:st.stack})}}finally{j.T=l,K.p=A}}($r&3)!==0&&Jd(),Rc(r),A=r.pendingLanes,(m&261930)!==0&&(A&42)!==0?r===vu?gu++:(gu=0,vu=r):gu=0,tg(0)}}function jl(r,l){(r.pooledCacheLanes&=l)===0&&(l=r.pooledCache,l!=null&&(r.pooledCache=null,ns(l)))}function Jd(){return ni(),Pa(),ii(),sT()}function sT(){if(Wi!==5)return!1;var r=Po,l=Gl;Gl=0;var m=ke($r),_=j.T,A=K.p;try{K.p=32>m?32:m,j.T=null,m=mu,mu=null;var D=Po,X=$r;if(Wi=0,Nr=Po=null,$r=0,(jn&6)!==0)throw Error(n(331));var st=jn;if(jn|=4,pu(D.current),ji(D,D.current,X,m),jn=st,tg(0,!1),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(Gt,D)}catch{}return!0}finally{K.p=A,j.T=_,jl(r,l)}}function rT(r,l,m){l=v(m,l),l=Km(r.stateNode,l,2),r=Nl(r,l,2),r!==null&&(bn(r,2),Rc(r))}function Ci(r,l,m){if(r.tag===3)rT(r,r,m);else for(;l!==null;){if(l.tag===3){rT(l,r,m);break}else if(l.tag===1){var _=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(al===null||!al.has(_))){r=v(m,r),m=lf(2),_=Nl(l,m,2),_!==null&&(Xs(m,_,l,r),bn(_,2),Rc(_));break}}l=l.return}}function fx(r,l,m){var _=r.pingCache;if(_===null){_=r.pingCache=new Kd;var A=new Set;_.set(l,A)}else A=_.get(l),A===void 0&&(A=new Set,_.set(l,A));A.has(m)||(Mi=!0,A.add(m),r=TO.bind(null,r,l,m),l.then(r,r))}function TO(r,l,m){var _=r.pingCache;_!==null&&_.delete(l),r.pingedLanes|=r.suspendedLanes&m,r.warmLanes&=~m,pi===r&&(kn&m)===m&&(mi===4||mi===3&&(kn&62914560)===kn&&300>Y()-Hl?(jn&2)===0&&zt(r,0):Uo|=m,Lr===kn&&(Lr=0)),Rc(r)}function oT(r,l){l===0&&(l=Le()),r=vr(r,l),r!==null&&(bn(r,l),Rc(r))}function AO(r){var l=r.memoizedState,m=0;l!==null&&(m=l.retryLane),oT(r,m)}function EO(r,l){var m=0;switch(r.tag){case 31:case 13:var _=r.stateNode,A=r.memoizedState;A!==null&&(m=A.retryLane);break;case 19:_=r.stateNode;break;case 22:_=r.stateNode._retryCache;break;default:throw Error(n(314))}_!==null&&_.delete(l),oT(r,m)}function wO(r,l){return Zt(r,l)}var xv=null,$d=null,hx=!1,Sv=!1,dx=!1,vf=0;function Rc(r){r!==$d&&r.next===null&&($d===null?xv=$d=r:$d=$d.next=r),Sv=!0,hx||(hx=!0,RO())}function tg(r,l){if(!dx&&Sv){dx=!0;do for(var m=!1,_=xv;_!==null;){if(r!==0){var A=_.pendingLanes;if(A===0)var D=0;else{var X=_.suspendedLanes,st=_.pingedLanes;D=(1<<31-gt(42|r)+1)-1,D&=A&~(X&~st),D=D&201326741?D&201326741|1:D?D|2:0}D!==0&&(m=!0,fT(_,D))}else D=kn,D=jt(_,_===pi?D:0,_.cancelPendingCommit!==null||_.timeoutHandle!==-1),(D&3)===0||me(_,D)||(m=!0,fT(_,D));_=_.next}while(m);dx=!1}}function CO(){lT()}function lT(){Sv=hx=!1;var r=0;vf!==0&&FO()&&(r=vf);for(var l=Y(),m=null,_=xv;_!==null;){var A=_.next,D=cT(_,l);D===0?(_.next=null,m===null?xv=A:m.next=A,A===null&&($d=m)):(m=_,(r!==0||(D&3)!==0)&&(Sv=!0)),_=A}Wi!==0&&Wi!==5||tg(r),vf!==0&&(vf=0)}function cT(r,l){for(var m=r.suspendedLanes,_=r.pingedLanes,A=r.expirationTimes,D=r.pendingLanes&-62914561;0<D;){var X=31-gt(D),st=1<<X,Tt=A[X];Tt===-1?((st&m)===0||(st&_)!==0)&&(A[X]=Re(st,l)):Tt<=l&&(r.expiredLanes|=st),D&=~st}if(l=pi,m=kn,m=jt(r,r===l?m:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),_=r.callbackNode,m===0||r===l&&(sn===2||sn===9)||r.cancelPendingCommit!==null)return _!==null&&_!==null&&Lt(_),r.callbackNode=null,r.callbackPriority=0;if((m&3)===0||me(r,m)){if(l=m&-m,l===r.callbackPriority)return l;switch(_!==null&&Lt(_),ke(m)){case 2:case 8:m=Dt;break;case 32:m=Ct;break;case 268435456:m=he;break;default:m=Ct}return _=uT.bind(null,r),m=Zt(m,_),r.callbackPriority=l,r.callbackNode=m,l}return _!==null&&_!==null&&Lt(_),r.callbackPriority=2,r.callbackNode=null,2}function uT(r,l){if(Wi!==0&&Wi!==5)return r.callbackNode=null,r.callbackPriority=0,null;var m=r.callbackNode;if(Jd()&&r.callbackNode!==m)return null;var _=kn;return _=jt(r,r===pi?_:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),_===0?null:(S(r,_,l),cT(r,Y()),r.callbackNode!=null&&r.callbackNode===m?uT.bind(null,r):null)}function fT(r,l){if(Jd())return null;S(r,l,!0)}function RO(){VO(function(){(jn&6)!==0?Zt(Bt,CO):lT()})}function px(){if(vf===0){var r=Ol;r===0&&(r=ie,ie<<=1,(ie&261888)===0&&(ie=256)),vf=r}return vf}function hT(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:hs(""+r)}function dT(r,l){var m=l.ownerDocument.createElement("input");return m.name=l.name,m.value=l.value,r.id&&m.setAttribute("form",r.id),l.parentNode.insertBefore(m,l),r=new FormData(r),m.parentNode.removeChild(m),r}function DO(r,l,m,_,A){if(l==="submit"&&m&&m.stateNode===A){var D=hT((A[Li]||null).action),X=_.submitter;X&&(l=(l=X[Li]||null)?hT(l.formAction):X.getAttribute("formAction"),l!==null&&(D=l,X=null));var st=new po("action","action",null,_,A);r.push({event:st,listeners:[{instance:null,listener:function(){if(_.defaultPrevented){if(vf!==0){var Tt=X?dT(A,X):new FormData(A);Wm(m,{pending:!0,data:Tt,method:A.method,action:D},null,Tt)}}else typeof D=="function"&&(st.preventDefault(),Tt=X?dT(A,X):new FormData(A),Wm(m,{pending:!0,data:Tt,method:A.method,action:D},D,Tt))},currentTarget:A}]})}}for(var mx=0;mx<bo.length;mx++){var gx=bo[mx],LO=gx.toLowerCase(),OO=gx[0].toUpperCase()+gx.slice(1);Oa(LO,"on"+OO)}Oa(La,"onAnimationEnd"),Oa(Qf,"onAnimationIteration"),Oa(Us,"onAnimationStart"),Oa("dblclick","onDoubleClick"),Oa("focusin","onFocus"),Oa("focusout","onBlur"),Oa(fc,"onTransitionRun"),Oa(xo,"onTransitionStart"),Oa(Jf,"onTransitionCancel"),Oa(Xo,"onTransitionEnd"),Ut("onMouseEnter",["mouseout","mouseover"]),Ut("onMouseLeave",["mouseout","mouseover"]),Ut("onPointerEnter",["pointerout","pointerover"]),Ut("onPointerLeave",["pointerout","pointerover"]),kt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),kt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),kt("onBeforeInput",["compositionend","keypress","textInput","paste"]),kt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),kt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),kt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var eg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NO=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(eg));function pT(r,l){l=(l&4)!==0;for(var m=0;m<r.length;m++){var _=r[m],A=_.event;_=_.listeners;t:{var D=void 0;if(l)for(var X=_.length-1;0<=X;X--){var st=_[X],Tt=st.instance,Wt=st.currentTarget;if(st=st.listener,Tt!==D&&A.isPropagationStopped())break t;D=st,A.currentTarget=Wt;try{D(A)}catch(fe){Mo(fe)}A.currentTarget=null,D=Tt}else for(X=0;X<_.length;X++){if(st=_[X],Tt=st.instance,Wt=st.currentTarget,st=st.listener,Tt!==D&&A.isPropagationStopped())break t;D=st,A.currentTarget=Wt;try{D(A)}catch(fe){Mo(fe)}A.currentTarget=null,D=Tt}}}}function Vn(r,l){var m=l[fs];m===void 0&&(m=l[fs]=new Set);var _=r+"__bubble";m.has(_)||(mT(l,r,2,!1),m.add(_))}function vx(r,l,m){var _=0;l&&(_|=4),mT(m,r,_,l)}var bv="_reactListening"+Math.random().toString(36).slice(2);function yx(r){if(!r[bv]){r[bv]=!0,Rt.forEach(function(m){m!=="selectionchange"&&(NO.has(m)||vx(m,!1,r),vx(m,!0,r))});var l=r.nodeType===9?r:r.ownerDocument;l===null||l[bv]||(l[bv]=!0,vx("selectionchange",!1,l))}}function mT(r,l,m,_){switch(jT(l)){case 2:var A=o4;break;case 8:A=l4;break;default:A=Nx}m=A.bind(null,l,m,r),A=void 0,!_a||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(A=!0),_?A!==void 0?r.addEventListener(l,m,{capture:!0,passive:A}):r.addEventListener(l,m,!0):A!==void 0?r.addEventListener(l,m,{passive:A}):r.addEventListener(l,m,!1)}function _x(r,l,m,_,A){var D=_;if((l&1)===0&&(l&2)===0&&_!==null)t:for(;;){if(_===null)return;var X=_.tag;if(X===3||X===4){var st=_.stateNode.containerInfo;if(st===A)break;if(X===4)for(X=_.return;X!==null;){var Tt=X.tag;if((Tt===3||Tt===4)&&X.stateNode.containerInfo===A)return;X=X.return}for(;st!==null;){if(X=yi(st),X===null)return;if(Tt=X.tag,Tt===5||Tt===6||Tt===26||Tt===27){_=D=X;continue t}st=st.parentNode}}_=_.return}fo(function(){var Wt=D,fe=uo(m),_e=[];t:{var Jt=So.get(r);if(Jt!==void 0){var oe=po,Ke=r;switch(r){case"keypress":if(dr(m)===0)break t;case"keydown":case"keyup":oe=Wu;break;case"focusin":Ke="focus",oe=ic;break;case"focusout":Ke="blur",oe=ic;break;case"beforeblur":case"afterblur":oe=ic;break;case"click":if(m.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=Fu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=vl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=go;break;case La:case Qf:case Us:oe=Va;break;case Xo:oe=_d;break;case"scroll":case"scrollend":oe=yn;break;case"wheel":oe=ps;break;case"copy":case"cut":case"paste":oe=Hi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=qu;break;case"toggle":case"beforetoggle":oe=yl}var hn=(l&4)!==0,Ii=!hn&&(r==="scroll"||r==="scrollend"),Pt=hn?Jt!==null?Jt+"Capture":null:Jt;hn=[];for(var Et=Wt,Ht;Et!==null;){var ge=Et;if(Ht=ge.stateNode,ge=ge.tag,ge!==5&&ge!==26&&ge!==27||Ht===null||Pt===null||(ge=Cs(Et,Pt),ge!=null&&hn.push(ng(Et,ge,Ht))),Ii)break;Et=Et.return}0<hn.length&&(Jt=new oe(Jt,Ke,null,m,fe),_e.push({event:Jt,listeners:hn}))}}if((l&7)===0){t:{if(Jt=r==="mouseover"||r==="pointerover",oe=r==="mouseout"||r==="pointerout",Jt&&m!==Gs&&(Ke=m.relatedTarget||m.fromElement)&&(yi(Ke)||Ke[ga]))break t;if((oe||Jt)&&(Jt=fe.window===fe?fe:(Jt=fe.ownerDocument)?Jt.defaultView||Jt.parentWindow:window,oe?(Ke=m.relatedTarget||m.toElement,oe=Wt,Ke=Ke?yi(Ke):null,Ke!==null&&(Ii=s(Ke),hn=Ke.tag,Ke!==Ii||hn!==5&&hn!==27&&hn!==6)&&(Ke=null)):(oe=null,Ke=Wt),oe!==Ke)){if(hn=Fu,ge="onMouseLeave",Pt="onMouseEnter",Et="mouse",(r==="pointerout"||r==="pointerover")&&(hn=qu,ge="onPointerLeave",Pt="onPointerEnter",Et="pointer"),Ii=oe==null?Jt:va(oe),Ht=Ke==null?Jt:va(Ke),Jt=new hn(ge,Et+"leave",oe,m,fe),Jt.target=Ii,Jt.relatedTarget=Ht,ge=null,yi(fe)===Wt&&(hn=new hn(Pt,Et+"enter",Ke,m,fe),hn.target=Ht,hn.relatedTarget=Ii,ge=hn),Ii=ge,oe&&Ke)e:{for(hn=UO,Pt=oe,Et=Ke,Ht=0,ge=Pt;ge;ge=hn(ge))Ht++;ge=0;for(var ln=Et;ln;ln=hn(ln))ge++;for(;0<Ht-ge;)Pt=hn(Pt),Ht--;for(;0<ge-Ht;)Et=hn(Et),ge--;for(;Ht--;){if(Pt===Et||Et!==null&&Pt===Et.alternate){hn=Pt;break e}Pt=hn(Pt),Et=hn(Et)}hn=null}else hn=null;oe!==null&&gT(_e,Jt,oe,hn,!1),Ke!==null&&Ii!==null&&gT(_e,Ii,Ke,hn,!0)}}t:{if(Jt=Wt?va(Wt):window,oe=Jt.nodeName&&Jt.nodeName.toLowerCase(),oe==="select"||oe==="input"&&Jt.type==="file")var gi=sc;else if(pr(Jt))if(Xc)gi=Sd;else{gi=Wo;var tn=Ns}else oe=Jt.nodeName,!oe||oe.toLowerCase()!=="input"||Jt.type!=="checkbox"&&Jt.type!=="radio"?Wt&&ki(Wt.elementType)&&(gi=sc):gi=Al;if(gi&&(gi=gi(r,Wt))){Ku(_e,gi,m,fe);break t}tn&&tn(r,Jt,Wt),r==="focusout"&&Wt&&Jt.type==="number"&&Wt.memoizedProps.value!=null&&ai(Jt,"number",Jt.value)}switch(tn=Wt?va(Wt):window,r){case"focusin":(pr(tn)||tn.contentEditable==="true")&&(qo=tn,Kc=Wt,lc=null);break;case"focusout":lc=Kc=qo=null;break;case"mousedown":Ha=!0;break;case"contextmenu":case"mouseup":case"dragend":Ha=!1,Ju(_e,m,fe);break;case"selectionchange":if(Zc)break;case"keydown":case"keyup":Ju(_e,m,fe)}var Un;if(Go)t:{switch(r){case"compositionstart":var qn="onCompositionStart";break t;case"compositionend":qn="onCompositionEnd";break t;case"compositionupdate":qn="onCompositionUpdate";break t}qn=void 0}else jo?Zu(r,m)&&(qn="onCompositionEnd"):r==="keydown"&&m.keyCode===229&&(qn="onCompositionStart");qn&&(aa&&m.locale!=="ko"&&(jo||qn!=="onCompositionStart"?qn==="onCompositionEnd"&&jo&&(Un=Ds()):(Rs=fe,hr="value"in Rs?Rs.value:Rs.textContent,jo=!0)),tn=Mv(Wt,qn),0<tn.length&&(qn=new ku(qn,r,null,m,fe),_e.push({event:qn,listeners:tn}),Un?qn.data=Un:(Un=Sl(m),Un!==null&&(qn.data=Un)))),(Un=_l?gs(r,m):bl(r,m))&&(qn=Mv(Wt,"onBeforeInput"),0<qn.length&&(tn=new ku("onBeforeInput","beforeinput",null,m,fe),_e.push({event:tn,listeners:qn}),tn.data=Un)),DO(_e,r,Wt,m,fe)}pT(_e,l)})}function ng(r,l,m){return{instance:r,listener:l,currentTarget:m}}function Mv(r,l){for(var m=l+"Capture",_=[];r!==null;){var A=r,D=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||D===null||(A=Cs(r,m),A!=null&&_.unshift(ng(r,A,D)),A=Cs(r,l),A!=null&&_.push(ng(r,A,D))),r.tag===3)return _;r=r.return}return[]}function UO(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function gT(r,l,m,_,A){for(var D=l._reactName,X=[];m!==null&&m!==_;){var st=m,Tt=st.alternate,Wt=st.stateNode;if(st=st.tag,Tt!==null&&Tt===_)break;st!==5&&st!==26&&st!==27||Wt===null||(Tt=Wt,A?(Wt=Cs(m,D),Wt!=null&&X.unshift(ng(m,Wt,Tt))):A||(Wt=Cs(m,D),Wt!=null&&X.push(ng(m,Wt,Tt)))),m=m.return}X.length!==0&&r.push({event:l,listeners:X})}var IO=/\r\n?/g,PO=/\u0000|\uFFFD/g;function vT(r){return(typeof r=="string"?r:""+r).replace(IO,`
`).replace(PO,"")}function yT(r,l){return l=vT(l),vT(r)===l}function Ui(r,l,m,_,A,D){switch(m){case"children":typeof _=="string"?l==="body"||l==="textarea"&&_===""||ci(r,_):(typeof _=="number"||typeof _=="bigint")&&l!=="body"&&ci(r,""+_);break;case"className":Oe(r,"class",_);break;case"tabIndex":Oe(r,"tabindex",_);break;case"dir":case"role":case"viewBox":case"width":case"height":Oe(r,m,_);break;case"style":Es(r,_,D);break;case"data":if(l!=="object"){Oe(r,"data",_);break}case"src":case"href":if(_===""&&(l!=="a"||m!=="href")){r.removeAttribute(m);break}if(_==null||typeof _=="function"||typeof _=="symbol"||typeof _=="boolean"){r.removeAttribute(m);break}_=hs(""+_),r.setAttribute(m,_);break;case"action":case"formAction":if(typeof _=="function"){r.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof D=="function"&&(m==="formAction"?(l!=="input"&&Ui(r,l,"name",A.name,A,null),Ui(r,l,"formEncType",A.formEncType,A,null),Ui(r,l,"formMethod",A.formMethod,A,null),Ui(r,l,"formTarget",A.formTarget,A,null)):(Ui(r,l,"encType",A.encType,A,null),Ui(r,l,"method",A.method,A,null),Ui(r,l,"target",A.target,A,null)));if(_==null||typeof _=="symbol"||typeof _=="boolean"){r.removeAttribute(m);break}_=hs(""+_),r.setAttribute(m,_);break;case"onClick":_!=null&&(r.onclick=Xi);break;case"onScroll":_!=null&&Vn("scroll",r);break;case"onScrollEnd":_!=null&&Vn("scrollend",r);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(n(61));if(m=_.__html,m!=null){if(A.children!=null)throw Error(n(60));r.innerHTML=m}}break;case"multiple":r.multiple=_&&typeof _!="function"&&typeof _!="symbol";break;case"muted":r.muted=_&&typeof _!="function"&&typeof _!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(_==null||typeof _=="function"||typeof _=="boolean"||typeof _=="symbol"){r.removeAttribute("xlink:href");break}m=hs(""+_),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":_!=null&&typeof _!="function"&&typeof _!="symbol"?r.setAttribute(m,""+_):r.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":_&&typeof _!="function"&&typeof _!="symbol"?r.setAttribute(m,""):r.removeAttribute(m);break;case"capture":case"download":_===!0?r.setAttribute(m,""):_!==!1&&_!=null&&typeof _!="function"&&typeof _!="symbol"?r.setAttribute(m,_):r.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":_!=null&&typeof _!="function"&&typeof _!="symbol"&&!isNaN(_)&&1<=_?r.setAttribute(m,_):r.removeAttribute(m);break;case"rowSpan":case"start":_==null||typeof _=="function"||typeof _=="symbol"||isNaN(_)?r.removeAttribute(m):r.setAttribute(m,_);break;case"popover":Vn("beforetoggle",r),Vn("toggle",r),Me(r,"popover",_);break;case"xlinkActuate":Ve(r,"http://www.w3.org/1999/xlink","xlink:actuate",_);break;case"xlinkArcrole":Ve(r,"http://www.w3.org/1999/xlink","xlink:arcrole",_);break;case"xlinkRole":Ve(r,"http://www.w3.org/1999/xlink","xlink:role",_);break;case"xlinkShow":Ve(r,"http://www.w3.org/1999/xlink","xlink:show",_);break;case"xlinkTitle":Ve(r,"http://www.w3.org/1999/xlink","xlink:title",_);break;case"xlinkType":Ve(r,"http://www.w3.org/1999/xlink","xlink:type",_);break;case"xmlBase":Ve(r,"http://www.w3.org/XML/1998/namespace","xml:base",_);break;case"xmlLang":Ve(r,"http://www.w3.org/XML/1998/namespace","xml:lang",_);break;case"xmlSpace":Ve(r,"http://www.w3.org/XML/1998/namespace","xml:space",_);break;case"is":Me(r,"is",_);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=Ho.get(m)||m,Me(r,m,_))}}function xx(r,l,m,_,A,D){switch(m){case"style":Es(r,_,D);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(n(61));if(m=_.__html,m!=null){if(A.children!=null)throw Error(n(60));r.innerHTML=m}}break;case"children":typeof _=="string"?ci(r,_):(typeof _=="number"||typeof _=="bigint")&&ci(r,""+_);break;case"onScroll":_!=null&&Vn("scroll",r);break;case"onScrollEnd":_!=null&&Vn("scrollend",r);break;case"onClick":_!=null&&(r.onclick=Xi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xt.hasOwnProperty(m))t:{if(m[0]==="o"&&m[1]==="n"&&(A=m.endsWith("Capture"),l=m.slice(2,A?m.length-7:void 0),D=r[Li]||null,D=D!=null?D[m]:null,typeof D=="function"&&r.removeEventListener(l,D,A),typeof _=="function")){typeof D!="function"&&D!==null&&(m in r?r[m]=null:r.hasAttribute(m)&&r.removeAttribute(m)),r.addEventListener(l,_,A);break t}m in r?r[m]=_:_===!0?r.setAttribute(m,""):Me(r,m,_)}}}function Fs(r,l,m){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Vn("error",r),Vn("load",r);var _=!1,A=!1,D;for(D in m)if(m.hasOwnProperty(D)){var X=m[D];if(X!=null)switch(D){case"src":_=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:Ui(r,l,D,X,m,null)}}A&&Ui(r,l,"srcSet",m.srcSet,m,null),_&&Ui(r,l,"src",m.src,m,null);return;case"input":Vn("invalid",r);var st=D=X=A=null,Tt=null,Wt=null;for(_ in m)if(m.hasOwnProperty(_)){var fe=m[_];if(fe!=null)switch(_){case"name":A=fe;break;case"type":X=fe;break;case"checked":Tt=fe;break;case"defaultChecked":Wt=fe;break;case"value":D=fe;break;case"defaultValue":st=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(n(137,l));break;default:Ui(r,l,_,fe,m,null)}}ya(r,D,st,Tt,Wt,X,A,!1);return;case"select":Vn("invalid",r),_=X=D=null;for(A in m)if(m.hasOwnProperty(A)&&(st=m[A],st!=null))switch(A){case"value":D=st;break;case"defaultValue":X=st;break;case"multiple":_=st;default:Ui(r,l,A,st,m,null)}l=D,m=X,r.multiple=!!_,l!=null?Fn(r,!!_,l,!1):m!=null&&Fn(r,!!_,m,!0);return;case"textarea":Vn("invalid",r),D=A=_=null;for(X in m)if(m.hasOwnProperty(X)&&(st=m[X],st!=null))switch(X){case"value":_=st;break;case"defaultValue":A=st;break;case"children":D=st;break;case"dangerouslySetInnerHTML":if(st!=null)throw Error(n(91));break;default:Ui(r,l,X,st,m,null)}Qn(r,_,A,D);return;case"option":for(Tt in m)m.hasOwnProperty(Tt)&&(_=m[Tt],_!=null)&&(Tt==="selected"?r.selected=_&&typeof _!="function"&&typeof _!="symbol":Ui(r,l,Tt,_,m,null));return;case"dialog":Vn("beforetoggle",r),Vn("toggle",r),Vn("cancel",r),Vn("close",r);break;case"iframe":case"object":Vn("load",r);break;case"video":case"audio":for(_=0;_<eg.length;_++)Vn(eg[_],r);break;case"image":Vn("error",r),Vn("load",r);break;case"details":Vn("toggle",r);break;case"embed":case"source":case"link":Vn("error",r),Vn("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Wt in m)if(m.hasOwnProperty(Wt)&&(_=m[Wt],_!=null))switch(Wt){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:Ui(r,l,Wt,_,m,null)}return;default:if(ki(l)){for(fe in m)m.hasOwnProperty(fe)&&(_=m[fe],_!==void 0&&xx(r,l,fe,_,m,void 0));return}}for(st in m)m.hasOwnProperty(st)&&(_=m[st],_!=null&&Ui(r,l,st,_,m,null))}function zO(r,l,m,_){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,D=null,X=null,st=null,Tt=null,Wt=null,fe=null;for(oe in m){var _e=m[oe];if(m.hasOwnProperty(oe)&&_e!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":Tt=_e;default:_.hasOwnProperty(oe)||Ui(r,l,oe,null,_,_e)}}for(var Jt in _){var oe=_[Jt];if(_e=m[Jt],_.hasOwnProperty(Jt)&&(oe!=null||_e!=null))switch(Jt){case"type":D=oe;break;case"name":A=oe;break;case"checked":Wt=oe;break;case"defaultChecked":fe=oe;break;case"value":X=oe;break;case"defaultValue":st=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(n(137,l));break;default:oe!==_e&&Ui(r,l,Jt,oe,_,_e)}}qi(r,X,st,Tt,Wt,fe,D,A);return;case"select":oe=X=st=Jt=null;for(D in m)if(Tt=m[D],m.hasOwnProperty(D)&&Tt!=null)switch(D){case"value":break;case"multiple":oe=Tt;default:_.hasOwnProperty(D)||Ui(r,l,D,null,_,Tt)}for(A in _)if(D=_[A],Tt=m[A],_.hasOwnProperty(A)&&(D!=null||Tt!=null))switch(A){case"value":Jt=D;break;case"defaultValue":st=D;break;case"multiple":X=D;default:D!==Tt&&Ui(r,l,A,D,_,Tt)}l=st,m=X,_=oe,Jt!=null?Fn(r,!!m,Jt,!1):!!_!=!!m&&(l!=null?Fn(r,!!m,l,!0):Fn(r,!!m,m?[]:"",!1));return;case"textarea":oe=Jt=null;for(st in m)if(A=m[st],m.hasOwnProperty(st)&&A!=null&&!_.hasOwnProperty(st))switch(st){case"value":break;case"children":break;default:Ui(r,l,st,null,_,A)}for(X in _)if(A=_[X],D=m[X],_.hasOwnProperty(X)&&(A!=null||D!=null))switch(X){case"value":Jt=A;break;case"defaultValue":oe=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(n(91));break;default:A!==D&&Ui(r,l,X,A,_,D)}Mn(r,Jt,oe);return;case"option":for(var Ke in m)Jt=m[Ke],m.hasOwnProperty(Ke)&&Jt!=null&&!_.hasOwnProperty(Ke)&&(Ke==="selected"?r.selected=!1:Ui(r,l,Ke,null,_,Jt));for(Tt in _)Jt=_[Tt],oe=m[Tt],_.hasOwnProperty(Tt)&&Jt!==oe&&(Jt!=null||oe!=null)&&(Tt==="selected"?r.selected=Jt&&typeof Jt!="function"&&typeof Jt!="symbol":Ui(r,l,Tt,Jt,_,oe));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var hn in m)Jt=m[hn],m.hasOwnProperty(hn)&&Jt!=null&&!_.hasOwnProperty(hn)&&Ui(r,l,hn,null,_,Jt);for(Wt in _)if(Jt=_[Wt],oe=m[Wt],_.hasOwnProperty(Wt)&&Jt!==oe&&(Jt!=null||oe!=null))switch(Wt){case"children":case"dangerouslySetInnerHTML":if(Jt!=null)throw Error(n(137,l));break;default:Ui(r,l,Wt,Jt,_,oe)}return;default:if(ki(l)){for(var Ii in m)Jt=m[Ii],m.hasOwnProperty(Ii)&&Jt!==void 0&&!_.hasOwnProperty(Ii)&&xx(r,l,Ii,void 0,_,Jt);for(fe in _)Jt=_[fe],oe=m[fe],!_.hasOwnProperty(fe)||Jt===oe||Jt===void 0&&oe===void 0||xx(r,l,fe,Jt,_,oe);return}}for(var Pt in m)Jt=m[Pt],m.hasOwnProperty(Pt)&&Jt!=null&&!_.hasOwnProperty(Pt)&&Ui(r,l,Pt,null,_,Jt);for(_e in _)Jt=_[_e],oe=m[_e],!_.hasOwnProperty(_e)||Jt===oe||Jt==null&&oe==null||Ui(r,l,_e,Jt,_,oe)}function _T(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function BO(){if(typeof performance.getEntriesByType=="function"){for(var r=0,l=0,m=performance.getEntriesByType("resource"),_=0;_<m.length;_++){var A=m[_],D=A.transferSize,X=A.initiatorType,st=A.duration;if(D&&st&&_T(X)){for(X=0,st=A.responseEnd,_+=1;_<m.length;_++){var Tt=m[_],Wt=Tt.startTime;if(Wt>st)break;var fe=Tt.transferSize,_e=Tt.initiatorType;fe&&_T(_e)&&(Tt=Tt.responseEnd,X+=fe*(Tt<st?1:(st-Wt)/(Tt-Wt)))}if(--_,l+=8*(D+X)/(A.duration/1e3),r++,10<r)break}}if(0<r)return l/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Sx=null,bx=null;function Tv(r){return r.nodeType===9?r:r.ownerDocument}function xT(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ST(r,l){if(r===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&l==="foreignObject"?0:r}function Mx(r,l){return r==="textarea"||r==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Tx=null;function FO(){var r=window.event;return r&&r.type==="popstate"?r===Tx?!1:(Tx=r,!0):(Tx=null,!1)}var bT=typeof setTimeout=="function"?setTimeout:void 0,kO=typeof clearTimeout=="function"?clearTimeout:void 0,MT=typeof Promise=="function"?Promise:void 0,VO=typeof queueMicrotask=="function"?queueMicrotask:typeof MT<"u"?function(r){return MT.resolve(null).then(r).catch(HO)}:bT;function HO(r){setTimeout(function(){throw r})}function yf(r){return r==="head"}function TT(r,l){var m=l,_=0;do{var A=m.nextSibling;if(r.removeChild(m),A&&A.nodeType===8)if(m=A.data,m==="/$"||m==="/&"){if(_===0){r.removeChild(A),ip(l);return}_--}else if(m==="$"||m==="$?"||m==="$~"||m==="$!"||m==="&")_++;else if(m==="html")ig(r.ownerDocument.documentElement);else if(m==="head"){m=r.ownerDocument.head,ig(m);for(var D=m.firstChild;D;){var X=D.nextSibling,st=D.nodeName;D[fr]||st==="SCRIPT"||st==="STYLE"||st==="LINK"&&D.rel.toLowerCase()==="stylesheet"||m.removeChild(D),D=X}}else m==="body"&&ig(r.ownerDocument.body);m=A}while(m);ip(l)}function AT(r,l){var m=r;r=0;do{var _=m.nextSibling;if(m.nodeType===1?l?(m._stashedDisplay=m.style.display,m.style.display="none"):(m.style.display=m._stashedDisplay||"",m.getAttribute("style")===""&&m.removeAttribute("style")):m.nodeType===3&&(l?(m._stashedText=m.nodeValue,m.nodeValue=""):m.nodeValue=m._stashedText||""),_&&_.nodeType===8)if(m=_.data,m==="/$"){if(r===0)break;r--}else m!=="$"&&m!=="$?"&&m!=="$~"&&m!=="$!"||r++;m=_}while(m)}function Ax(r){var l=r.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var m=l;switch(l=l.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":Ax(m),Gr(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}r.removeChild(m)}}function GO(r,l,m,_){for(;r.nodeType===1;){var A=m;if(r.nodeName.toLowerCase()!==l.toLowerCase()){if(!_&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(_){if(!r[fr])switch(l){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(D=r.getAttribute("rel"),D==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(D!==A.rel||r.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||r.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||r.getAttribute("title")!==(A.title==null?null:A.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(D=r.getAttribute("src"),(D!==(A.src==null?null:A.src)||r.getAttribute("type")!==(A.type==null?null:A.type)||r.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&D&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(l==="input"&&r.type==="hidden"){var D=A.name==null?null:""+A.name;if(A.type==="hidden"&&r.getAttribute("name")===D)return r}else return r;if(r=sl(r.nextSibling),r===null)break}return null}function jO(r,l,m){if(l==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!m||(r=sl(r.nextSibling),r===null))return null;return r}function ET(r,l){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=sl(r.nextSibling),r===null))return null;return r}function Ex(r){return r.data==="$?"||r.data==="$~"}function wx(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function WO(r,l){var m=r.ownerDocument;if(r.data==="$~")r._reactRetry=l;else if(r.data!=="$?"||m.readyState!=="loading")l();else{var _=function(){l(),m.removeEventListener("DOMContentLoaded",_)};m.addEventListener("DOMContentLoaded",_),r._reactRetry=_}}function sl(r){for(;r!=null;r=r.nextSibling){var l=r.nodeType;if(l===1||l===3)break;if(l===8){if(l=r.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return r}var Cx=null;function wT(r){r=r.nextSibling;for(var l=0;r;){if(r.nodeType===8){var m=r.data;if(m==="/$"||m==="/&"){if(l===0)return sl(r.nextSibling);l--}else m!=="$"&&m!=="$!"&&m!=="$?"&&m!=="$~"&&m!=="&"||l++}r=r.nextSibling}return null}function CT(r){r=r.previousSibling;for(var l=0;r;){if(r.nodeType===8){var m=r.data;if(m==="$"||m==="$!"||m==="$?"||m==="$~"||m==="&"){if(l===0)return r;l--}else m!=="/$"&&m!=="/&"||l++}r=r.previousSibling}return null}function RT(r,l,m){switch(l=Tv(m),r){case"html":if(r=l.documentElement,!r)throw Error(n(452));return r;case"head":if(r=l.head,!r)throw Error(n(453));return r;case"body":if(r=l.body,!r)throw Error(n(454));return r;default:throw Error(n(451))}}function ig(r){for(var l=r.attributes;l.length;)r.removeAttributeNode(l[0]);Gr(r)}var rl=new Map,DT=new Set;function Av(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var _u=K.d;K.d={f:qO,r:XO,D:YO,C:ZO,L:KO,m:QO,X:$O,S:JO,M:t4};function qO(){var r=_u.f(),l=ot();return r||l}function XO(r){var l=Zn(r);l!==null&&l.tag===5&&l.type==="form"?qm(l):_u.r(r)}var tp=typeof document>"u"?null:document;function LT(r,l,m){var _=tp;if(_&&typeof l=="string"&&l){var A=je(l);A='link[rel="'+r+'"][href="'+A+'"]',typeof m=="string"&&(A+='[crossorigin="'+m+'"]'),DT.has(A)||(DT.add(A),r={rel:r,crossOrigin:m,href:l},_.querySelector(A)===null&&(l=_.createElement("link"),Fs(l,"link",r),it(l),_.head.appendChild(l)))}}function YO(r){_u.D(r),LT("dns-prefetch",r,null)}function ZO(r,l){_u.C(r,l),LT("preconnect",r,l)}function KO(r,l,m){_u.L(r,l,m);var _=tp;if(_&&r&&l){var A='link[rel="preload"][as="'+je(l)+'"]';l==="image"&&m&&m.imageSrcSet?(A+='[imagesrcset="'+je(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(A+='[imagesizes="'+je(m.imageSizes)+'"]')):A+='[href="'+je(r)+'"]';var D=A;switch(l){case"style":D=ep(r);break;case"script":D=np(r)}rl.has(D)||(r=y({rel:"preload",href:l==="image"&&m&&m.imageSrcSet?void 0:r,as:l},m),rl.set(D,r),_.querySelector(A)!==null||l==="style"&&_.querySelector(ag(D))||l==="script"&&_.querySelector(sg(D))||(l=_.createElement("link"),Fs(l,"link",r),it(l),_.head.appendChild(l)))}}function QO(r,l){_u.m(r,l);var m=tp;if(m&&r){var _=l&&typeof l.as=="string"?l.as:"script",A='link[rel="modulepreload"][as="'+je(_)+'"][href="'+je(r)+'"]',D=A;switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":D=np(r)}if(!rl.has(D)&&(r=y({rel:"modulepreload",href:r},l),rl.set(D,r),m.querySelector(A)===null)){switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(sg(D)))return}_=m.createElement("link"),Fs(_,"link",r),it(_),m.head.appendChild(_)}}}function JO(r,l,m){_u.S(r,l,m);var _=tp;if(_&&r){var A=Xe(_).hoistableStyles,D=ep(r);l=l||"default";var X=A.get(D);if(!X){var st={loading:0,preload:null};if(X=_.querySelector(ag(D)))st.loading=5;else{r=y({rel:"stylesheet",href:r,"data-precedence":l},m),(m=rl.get(D))&&Rx(r,m);var Tt=X=_.createElement("link");it(Tt),Fs(Tt,"link",r),Tt._p=new Promise(function(Wt,fe){Tt.onload=Wt,Tt.onerror=fe}),Tt.addEventListener("load",function(){st.loading|=1}),Tt.addEventListener("error",function(){st.loading|=2}),st.loading|=4,Ev(X,l,_)}X={type:"stylesheet",instance:X,count:1,state:st},A.set(D,X)}}}function $O(r,l){_u.X(r,l);var m=tp;if(m&&r){var _=Xe(m).hoistableScripts,A=np(r),D=_.get(A);D||(D=m.querySelector(sg(A)),D||(r=y({src:r,async:!0},l),(l=rl.get(A))&&Dx(r,l),D=m.createElement("script"),it(D),Fs(D,"link",r),m.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},_.set(A,D))}}function t4(r,l){_u.M(r,l);var m=tp;if(m&&r){var _=Xe(m).hoistableScripts,A=np(r),D=_.get(A);D||(D=m.querySelector(sg(A)),D||(r=y({src:r,async:!0,type:"module"},l),(l=rl.get(A))&&Dx(r,l),D=m.createElement("script"),it(D),Fs(D,"link",r),m.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},_.set(A,D))}}function OT(r,l,m,_){var A=(A=ht.current)?Av(A):null;if(!A)throw Error(n(446));switch(r){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(l=ep(m.href),m=Xe(A).hoistableStyles,_=m.get(l),_||(_={type:"style",instance:null,count:0,state:null},m.set(l,_)),_):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){r=ep(m.href);var D=Xe(A).hoistableStyles,X=D.get(r);if(X||(A=A.ownerDocument||A,X={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},D.set(r,X),(D=A.querySelector(ag(r)))&&!D._p&&(X.instance=D,X.state.loading=5),rl.has(r)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},rl.set(r,m),D||e4(A,r,m,X.state))),l&&_===null)throw Error(n(528,""));return X}if(l&&_!==null)throw Error(n(529,""));return null;case"script":return l=m.async,m=m.src,typeof m=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=np(m),m=Xe(A).hoistableScripts,_=m.get(l),_||(_={type:"script",instance:null,count:0,state:null},m.set(l,_)),_):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,r))}}function ep(r){return'href="'+je(r)+'"'}function ag(r){return'link[rel="stylesheet"]['+r+"]"}function NT(r){return y({},r,{"data-precedence":r.precedence,precedence:null})}function e4(r,l,m,_){r.querySelector('link[rel="preload"][as="style"]['+l+"]")?_.loading=1:(l=r.createElement("link"),_.preload=l,l.addEventListener("load",function(){return _.loading|=1}),l.addEventListener("error",function(){return _.loading|=2}),Fs(l,"link",m),it(l),r.head.appendChild(l))}function np(r){return'[src="'+je(r)+'"]'}function sg(r){return"script[async]"+r}function UT(r,l,m){if(l.count++,l.instance===null)switch(l.type){case"style":var _=r.querySelector('style[data-href~="'+je(m.href)+'"]');if(_)return l.instance=_,it(_),_;var A=y({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return _=(r.ownerDocument||r).createElement("style"),it(_),Fs(_,"style",A),Ev(_,m.precedence,r),l.instance=_;case"stylesheet":A=ep(m.href);var D=r.querySelector(ag(A));if(D)return l.state.loading|=4,l.instance=D,it(D),D;_=NT(m),(A=rl.get(A))&&Rx(_,A),D=(r.ownerDocument||r).createElement("link"),it(D);var X=D;return X._p=new Promise(function(st,Tt){X.onload=st,X.onerror=Tt}),Fs(D,"link",_),l.state.loading|=4,Ev(D,m.precedence,r),l.instance=D;case"script":return D=np(m.src),(A=r.querySelector(sg(D)))?(l.instance=A,it(A),A):(_=m,(A=rl.get(D))&&(_=y({},m),Dx(_,A)),r=r.ownerDocument||r,A=r.createElement("script"),it(A),Fs(A,"link",_),r.head.appendChild(A),l.instance=A);case"void":return null;default:throw Error(n(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(_=l.instance,l.state.loading|=4,Ev(_,m.precedence,r));return l.instance}function Ev(r,l,m){for(var _=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=_.length?_[_.length-1]:null,D=A,X=0;X<_.length;X++){var st=_[X];if(st.dataset.precedence===l)D=st;else if(D!==A)break}D?D.parentNode.insertBefore(r,D.nextSibling):(l=m.nodeType===9?m.head:m,l.insertBefore(r,l.firstChild))}function Rx(r,l){r.crossOrigin==null&&(r.crossOrigin=l.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=l.referrerPolicy),r.title==null&&(r.title=l.title)}function Dx(r,l){r.crossOrigin==null&&(r.crossOrigin=l.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=l.referrerPolicy),r.integrity==null&&(r.integrity=l.integrity)}var wv=null;function IT(r,l,m){if(wv===null){var _=new Map,A=wv=new Map;A.set(m,_)}else A=wv,_=A.get(m),_||(_=new Map,A.set(m,_));if(_.has(r))return _;for(_.set(r,null),m=m.getElementsByTagName(r),A=0;A<m.length;A++){var D=m[A];if(!(D[fr]||D[cn]||r==="link"&&D.getAttribute("rel")==="stylesheet")&&D.namespaceURI!=="http://www.w3.org/2000/svg"){var X=D.getAttribute(l)||"";X=r+X;var st=_.get(X);st?st.push(D):_.set(X,[D])}}return _}function PT(r,l,m){r=r.ownerDocument||r,r.head.insertBefore(m,l==="title"?r.querySelector("head > title"):null)}function n4(r,l,m){if(m===1||l.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;return l.rel==="stylesheet"?(r=l.disabled,typeof l.precedence=="string"&&r==null):!0;case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function zT(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function i4(r,l,m,_){if(m.type==="stylesheet"&&(typeof _.media!="string"||matchMedia(_.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var A=ep(_.href),D=l.querySelector(ag(A));if(D){l=D._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(r.count++,r=Cv.bind(r),l.then(r,r)),m.state.loading|=4,m.instance=D,it(D);return}D=l.ownerDocument||l,_=NT(_),(A=rl.get(A))&&Rx(_,A),D=D.createElement("link"),it(D);var X=D;X._p=new Promise(function(st,Tt){X.onload=st,X.onerror=Tt}),Fs(D,"link",_),m.instance=D}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(m,l),(l=m.state.preload)&&(m.state.loading&3)===0&&(r.count++,m=Cv.bind(r),l.addEventListener("load",m),l.addEventListener("error",m))}}var Lx=0;function a4(r,l){return r.stylesheets&&r.count===0&&Dv(r,r.stylesheets),0<r.count||0<r.imgCount?function(m){var _=setTimeout(function(){if(r.stylesheets&&Dv(r,r.stylesheets),r.unsuspend){var D=r.unsuspend;r.unsuspend=null,D()}},6e4+l);0<r.imgBytes&&Lx===0&&(Lx=62500*BO());var A=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Dv(r,r.stylesheets),r.unsuspend)){var D=r.unsuspend;r.unsuspend=null,D()}},(r.imgBytes>Lx?50:800)+l);return r.unsuspend=m,function(){r.unsuspend=null,clearTimeout(_),clearTimeout(A)}}:null}function Cv(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Dv(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Rv=null;function Dv(r,l){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Rv=new Map,l.forEach(s4,r),Rv=null,Cv.call(r))}function s4(r,l){if(!(l.state.loading&4)){var m=Rv.get(r);if(m)var _=m.get(null);else{m=new Map,Rv.set(r,m);for(var A=r.querySelectorAll("link[data-precedence],style[data-precedence]"),D=0;D<A.length;D++){var X=A[D];(X.nodeName==="LINK"||X.getAttribute("media")!=="not all")&&(m.set(X.dataset.precedence,X),_=X)}_&&m.set(null,_)}A=l.instance,X=A.getAttribute("data-precedence"),D=m.get(X)||_,D===_&&m.set(null,A),m.set(X,A),this.count++,_=Cv.bind(this),A.addEventListener("load",_),A.addEventListener("error",_),D?D.parentNode.insertBefore(A,D.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(A,r.firstChild)),l.state.loading|=4}}var rg={$$typeof:I,Provider:null,Consumer:null,_currentValue:et,_currentValue2:et,_threadCount:0};function r4(r,l,m,_,A,D,X,st,Tt){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qe(0),this.hiddenUpdates=qe(null),this.identifierPrefix=_,this.onUncaughtError=A,this.onCaughtError=D,this.onRecoverableError=X,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Tt,this.incompleteTransitions=new Map}function BT(r,l,m,_,A,D,X,st,Tt,Wt,fe,_e){return r=new r4(r,l,m,X,Tt,Wt,fe,_e,st),l=1,D===!0&&(l|=24),D=Ga(3,null,null,l),r.current=D,D.stateNode=r,l=pm(),l.refCount++,r.pooledCache=l,l.refCount++,D.memoizedState={element:_,isDehydrated:m,cache:l},xm(D),r}function FT(r){return r?(r=Eo,r):Eo}function kT(r,l,m,_,A,D){A=FT(A),_.context===null?_.context=A:_.pendingContext=A,_=Ko(l),_.payload={element:m},D=D===void 0?null:D,D!==null&&(_.callback=D),m=Nl(r,_,l),m!==null&&(p(m,r,l),xc(m,r,l))}function VT(r,l){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var m=r.retryLane;r.retryLane=m!==0&&m<l?m:l}}function Ox(r,l){VT(r,l),(r=r.alternate)&&VT(r,l)}function HT(r){if(r.tag===13||r.tag===31){var l=vr(r,67108864);l!==null&&p(l,r,67108864),Ox(r,67108864)}}function GT(r){if(r.tag===13||r.tag===31){var l=Bs();l=Yn(l);var m=vr(r,l);m!==null&&p(m,r,l),Ox(r,l)}}var Lv=!0;function o4(r,l,m,_){var A=j.T;j.T=null;var D=K.p;try{K.p=2,Nx(r,l,m,_)}finally{K.p=D,j.T=A}}function l4(r,l,m,_){var A=j.T;j.T=null;var D=K.p;try{K.p=8,Nx(r,l,m,_)}finally{K.p=D,j.T=A}}function Nx(r,l,m,_){if(Lv){var A=Ux(_);if(A===null)_x(r,l,_,Ov,m),WT(r,_);else if(u4(A,r,l,m,_))_.stopPropagation();else if(WT(r,_),l&4&&-1<c4.indexOf(r)){for(;A!==null;){var D=Zn(A);if(D!==null)switch(D.tag){case 3:if(D=D.stateNode,D.current.memoizedState.isDehydrated){var X=ce(D.pendingLanes);if(X!==0){var st=D;for(st.pendingLanes|=2,st.entangledLanes|=2;X;){var Tt=1<<31-gt(X);st.entanglements[1]|=Tt,X&=~Tt}Rc(D),(jn&6)===0&&(Or=Y()+500,tg(0))}}break;case 31:case 13:st=vr(D,2),st!==null&&p(st,D,2),ot(),Ox(D,2)}if(D=Ux(_),D===null&&_x(r,l,_,Ov,m),D===A)break;A=D}A!==null&&_.stopPropagation()}else _x(r,l,_,null,m)}}function Ux(r){return r=uo(r),Ix(r)}var Ov=null;function Ix(r){if(Ov=null,r=yi(r),r!==null){var l=s(r);if(l===null)r=null;else{var m=l.tag;if(m===13){if(r=o(l),r!==null)return r;r=null}else if(m===31){if(r=c(l),r!==null)return r;r=null}else if(m===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;r=null}else l!==r&&(r=null)}}return Ov=r,null}function jT(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(yt()){case Bt:return 2;case Dt:return 8;case Ct:case ve:return 32;case he:return 268435456;default:return 32}default:return 32}}var Px=!1,_f=null,xf=null,Sf=null,og=new Map,lg=new Map,bf=[],c4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function WT(r,l){switch(r){case"focusin":case"focusout":_f=null;break;case"dragenter":case"dragleave":xf=null;break;case"mouseover":case"mouseout":Sf=null;break;case"pointerover":case"pointerout":og.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":lg.delete(l.pointerId)}}function cg(r,l,m,_,A,D){return r===null||r.nativeEvent!==D?(r={blockedOn:l,domEventName:m,eventSystemFlags:_,nativeEvent:D,targetContainers:[A]},l!==null&&(l=Zn(l),l!==null&&HT(l)),r):(r.eventSystemFlags|=_,l=r.targetContainers,A!==null&&l.indexOf(A)===-1&&l.push(A),r)}function u4(r,l,m,_,A){switch(l){case"focusin":return _f=cg(_f,r,l,m,_,A),!0;case"dragenter":return xf=cg(xf,r,l,m,_,A),!0;case"mouseover":return Sf=cg(Sf,r,l,m,_,A),!0;case"pointerover":var D=A.pointerId;return og.set(D,cg(og.get(D)||null,r,l,m,_,A)),!0;case"gotpointercapture":return D=A.pointerId,lg.set(D,cg(lg.get(D)||null,r,l,m,_,A)),!0}return!1}function qT(r){var l=yi(r.target);if(l!==null){var m=s(l);if(m!==null){if(l=m.tag,l===13){if(l=o(m),l!==null){r.blockedOn=l,si(r.priority,function(){GT(m)});return}}else if(l===31){if(l=c(m),l!==null){r.blockedOn=l,si(r.priority,function(){GT(m)});return}}else if(l===3&&m.stateNode.current.memoizedState.isDehydrated){r.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Nv(r){if(r.blockedOn!==null)return!1;for(var l=r.targetContainers;0<l.length;){var m=Ux(r.nativeEvent);if(m===null){m=r.nativeEvent;var _=new m.constructor(m.type,m);Gs=_,m.target.dispatchEvent(_),Gs=null}else return l=Zn(m),l!==null&&HT(l),r.blockedOn=m,!1;l.shift()}return!0}function XT(r,l,m){Nv(r)&&m.delete(l)}function f4(){Px=!1,_f!==null&&Nv(_f)&&(_f=null),xf!==null&&Nv(xf)&&(xf=null),Sf!==null&&Nv(Sf)&&(Sf=null),og.forEach(XT),lg.forEach(XT)}function Uv(r,l){r.blockedOn===l&&(r.blockedOn=null,Px||(Px=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,f4)))}var Iv=null;function YT(r){Iv!==r&&(Iv=r,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Iv===r&&(Iv=null);for(var l=0;l<r.length;l+=3){var m=r[l],_=r[l+1],A=r[l+2];if(typeof _!="function"){if(Ix(_||m)===null)continue;break}var D=Zn(m);D!==null&&(r.splice(l,3),l-=3,Wm(D,{pending:!0,data:A,method:m.method,action:_},_,A))}}))}function ip(r){function l(Tt){return Uv(Tt,r)}_f!==null&&Uv(_f,r),xf!==null&&Uv(xf,r),Sf!==null&&Uv(Sf,r),og.forEach(l),lg.forEach(l);for(var m=0;m<bf.length;m++){var _=bf[m];_.blockedOn===r&&(_.blockedOn=null)}for(;0<bf.length&&(m=bf[0],m.blockedOn===null);)qT(m),m.blockedOn===null&&bf.shift();if(m=(r.ownerDocument||r).$$reactFormReplay,m!=null)for(_=0;_<m.length;_+=3){var A=m[_],D=m[_+1],X=A[Li]||null;if(typeof D=="function")X||YT(m);else if(X){var st=null;if(D&&D.hasAttribute("formAction")){if(A=D,X=D[Li]||null)st=X.formAction;else if(Ix(A)!==null)continue}else st=X.action;typeof st=="function"?m[_+1]=st:(m.splice(_,3),_-=3),YT(m)}}}function ZT(){function r(D){D.canIntercept&&D.info==="react-transition"&&D.intercept({handler:function(){return new Promise(function(X){return A=X})},focusReset:"manual",scroll:"manual"})}function l(){A!==null&&(A(),A=null),_||setTimeout(m,20)}function m(){if(!_&&!navigation.transition){var D=navigation.currentEntry;D&&D.url!=null&&navigation.navigate(D.url,{state:D.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var _=!1,A=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(m,100),function(){_=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),A!==null&&(A(),A=null)}}}function zx(r){this._internalRoot=r}Pv.prototype.render=zx.prototype.render=function(r){var l=this._internalRoot;if(l===null)throw Error(n(409));var m=l.current,_=Bs();kT(m,_,r,l,null,null)},Pv.prototype.unmount=zx.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var l=r.containerInfo;kT(r.current,2,null,r,null,null),ot(),l[ga]=null}};function Pv(r){this._internalRoot=r}Pv.prototype.unstable_scheduleHydration=function(r){if(r){var l=Fi();r={blockedOn:null,target:r,priority:l};for(var m=0;m<bf.length&&l!==0&&l<bf[m].priority;m++);bf.splice(m,0,r),m===0&&qT(r)}};var KT=t.version;if(KT!=="19.2.3")throw Error(n(527,KT,"19.2.3"));K.findDOMNode=function(r){var l=r._reactInternals;if(l===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=d(l),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var h4={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zv.isDisabled&&zv.supportsFiber)try{Gt=zv.inject(h4),Qt=zv}catch{}}return fg.createRoot=function(r,l){if(!a(r))throw Error(n(299));var m=!1,_="",A=Zm,D=mv,X=kd;return l!=null&&(l.unstable_strictMode===!0&&(m=!0),l.identifierPrefix!==void 0&&(_=l.identifierPrefix),l.onUncaughtError!==void 0&&(A=l.onUncaughtError),l.onCaughtError!==void 0&&(D=l.onCaughtError),l.onRecoverableError!==void 0&&(X=l.onRecoverableError)),l=BT(r,1,!1,null,null,m,_,null,A,D,X,ZT),r[ga]=l.current,yx(r),new zx(l)},fg.hydrateRoot=function(r,l,m){if(!a(r))throw Error(n(299));var _=!1,A="",D=Zm,X=mv,st=kd,Tt=null;return m!=null&&(m.unstable_strictMode===!0&&(_=!0),m.identifierPrefix!==void 0&&(A=m.identifierPrefix),m.onUncaughtError!==void 0&&(D=m.onUncaughtError),m.onCaughtError!==void 0&&(X=m.onCaughtError),m.onRecoverableError!==void 0&&(st=m.onRecoverableError),m.formState!==void 0&&(Tt=m.formState)),l=BT(r,1,!0,l,m??null,_,A,Tt,D,X,st,ZT),l.context=FT(null),m=l.current,_=Bs(),_=Yn(_),A=Ko(_),A.callback=null,Nl(m,A,_),m=_,l.current.lanes=m,bn(l,m),Rc(l),r[ga]=l.current,yx(r),new Pv(l)},fg.version="19.2.3",fg}var rA;function S4(){if(rA)return kx.exports;rA=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),kx.exports=x4(),kx.exports}var jw=S4();const b4=M0(jw);function Ww(i,t){const e=ct.useRef(t);ct.useEffect(function(){t!==e.current&&i.attributionControl!=null&&(e.current!=null&&i.attributionControl.removeAttribution(e.current),t!=null&&i.attributionControl.addAttribution(t)),e.current=t},[i,t])}function M4(i,t,e){t.center!==e.center&&i.setLatLng(t.center),t.radius!=null&&t.radius!==e.radius&&i.setRadius(t.radius)}var T4=Gw();const A4=1;function E4(i){return Object.freeze({__version:A4,map:i})}function x2(i,t){return Object.freeze({...i,...t})}const S2=ct.createContext(null);function a1(){const i=ct.use(S2);if(i==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return i}function qw(i){function t(e,n){const{instance:a,context:s}=i(e).current;ct.useImperativeHandle(n,()=>a);const{children:o}=e;return o==null?null:Lu.createElement(S2,{value:s},o)}return ct.forwardRef(t)}function w4(i){function t(e,n){const[a,s]=ct.useState(!1),{instance:o}=i(e,s).current;ct.useImperativeHandle(n,()=>o),ct.useEffect(function(){a&&o.update()},[o,a,e.children]);const c=o._contentNode;return c?T4.createPortal(e.children,c):null}return ct.forwardRef(t)}function C4(i){function t(e,n){const{instance:a}=i(e).current;return ct.useImperativeHandle(n,()=>a),null}return ct.forwardRef(t)}function b2(i,t){const e=ct.useRef(void 0);ct.useEffect(function(){return t!=null&&i.instance.on(t),e.current=t,function(){e.current!=null&&i.instance.off(e.current),e.current=null}},[i,t])}function s1(i,t){const e=i.pane??t.pane;return e?{...i,pane:e}:i}function R4(i,t){return function(n,a){const s=a1(),o=i(s1(n,s),s);return Ww(s.map,n.attribution),b2(o.current,n.eventHandlers),t(o.current,s,n,a),o}}var Cg={exports:{}};var D4=Cg.exports,oA;function L4(){return oA||(oA=1,(function(i,t){(function(e,n){n(t)})(D4,(function(e){var n="1.9.4";function a(u){var v,M,P,W;for(M=1,P=arguments.length;M<P;M++){W=arguments[M];for(v in W)u[v]=W[v]}return u}var s=Object.create||(function(){function u(){}return function(v){return u.prototype=v,new u}})();function o(u,v){var M=Array.prototype.slice;if(u.bind)return u.bind.apply(u,M.call(arguments,1));var P=M.call(arguments,2);return function(){return u.apply(v,P.length?P.concat(M.call(arguments)):arguments)}}var c=0;function f(u){return"_leaflet_id"in u||(u._leaflet_id=++c),u._leaflet_id}function d(u,v,M){var P,W,tt,bt;return bt=function(){P=!1,W&&(tt.apply(M,W),W=!1)},tt=function(){P?W=arguments:(u.apply(M,arguments),setTimeout(bt,v),P=!0)},tt}function g(u,v,M){var P=v[1],W=v[0],tt=P-W;return u===P&&M?u:((u-W)%tt+tt)%tt+W}function y(){return!1}function x(u,v){if(v===!1)return u;var M=Math.pow(10,v===void 0?6:v);return Math.round(u*M)/M}function b(u){return u.trim?u.trim():u.replace(/^\s+|\s+$/g,"")}function T(u){return b(u).split(/\s+/)}function R(u,v){Object.prototype.hasOwnProperty.call(u,"options")||(u.options=u.options?s(u.options):{});for(var M in v)u.options[M]=v[M];return u.options}function C(u,v,M){var P=[];for(var W in u)P.push(encodeURIComponent(M?W.toUpperCase():W)+"="+encodeURIComponent(u[W]));return(!v||v.indexOf("?")===-1?"?":"&")+P.join("&")}var w=/\{ *([\w_ -]+) *\}/g;function N(u,v){return u.replace(w,function(M,P){var W=v[P];if(W===void 0)throw new Error("No value provided for variable "+M);return typeof W=="function"&&(W=W(v)),W})}var I=Array.isArray||function(u){return Object.prototype.toString.call(u)==="[object Array]"};function z(u,v){for(var M=0;M<u.length;M++)if(u[M]===v)return M;return-1}var F="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function H(u){return window["webkit"+u]||window["moz"+u]||window["ms"+u]}var q=0;function Z(u){var v=+new Date,M=Math.max(0,16-(v-q));return q=v+M,window.setTimeout(u,M)}var B=window.requestAnimationFrame||H("RequestAnimationFrame")||Z,V=window.cancelAnimationFrame||H("CancelAnimationFrame")||H("CancelRequestAnimationFrame")||function(u){window.clearTimeout(u)};function Q(u,v,M){if(M&&B===Z)u.call(v);else return B.call(window,o(u,v))}function J(u){u&&V.call(window,u)}var rt={__proto__:null,extend:a,create:s,bind:o,get lastId(){return c},stamp:f,throttle:d,wrapNum:g,falseFn:y,formatNum:x,trim:b,splitWords:T,setOptions:R,getParamString:C,template:N,isArray:I,indexOf:z,emptyImageUrl:F,requestFn:B,cancelFn:V,requestAnimFrame:Q,cancelAnimFrame:J};function ut(){}ut.extend=function(u){var v=function(){R(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},M=v.__super__=this.prototype,P=s(M);P.constructor=v,v.prototype=P;for(var W in this)Object.prototype.hasOwnProperty.call(this,W)&&W!=="prototype"&&W!=="__super__"&&(v[W]=this[W]);return u.statics&&a(v,u.statics),u.includes&&(vt(u.includes),a.apply(null,[P].concat(u.includes))),a(P,u),delete P.statics,delete P.includes,P.options&&(P.options=M.options?s(M.options):{},a(P.options,u.options)),P._initHooks=[],P.callInitHooks=function(){if(!this._initHooksCalled){M.callInitHooks&&M.callInitHooks.call(this),this._initHooksCalled=!0;for(var tt=0,bt=P._initHooks.length;tt<bt;tt++)P._initHooks[tt].call(this)}},v},ut.include=function(u){var v=this.prototype.options;return a(this.prototype,u),u.options&&(this.prototype.options=v,this.mergeOptions(u.options)),this},ut.mergeOptions=function(u){return a(this.prototype.options,u),this},ut.addInitHook=function(u){var v=Array.prototype.slice.call(arguments,1),M=typeof u=="function"?u:function(){this[u].apply(this,v)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(M),this};function vt(u){if(!(typeof L>"u"||!L||!L.Mixin)){u=I(u)?u:[u];for(var v=0;v<u.length;v++)u[v]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var j={on:function(u,v,M){if(typeof u=="object")for(var P in u)this._on(P,u[P],v);else{u=T(u);for(var W=0,tt=u.length;W<tt;W++)this._on(u[W],v,M)}return this},off:function(u,v,M){if(!arguments.length)delete this._events;else if(typeof u=="object")for(var P in u)this._off(P,u[P],v);else{u=T(u);for(var W=arguments.length===1,tt=0,bt=u.length;tt<bt;tt++)W?this._off(u[tt]):this._off(u[tt],v,M)}return this},_on:function(u,v,M,P){if(typeof v!="function"){console.warn("wrong listener type: "+typeof v);return}if(this._listens(u,v,M)===!1){M===this&&(M=void 0);var W={fn:v,ctx:M};P&&(W.once=!0),this._events=this._events||{},this._events[u]=this._events[u]||[],this._events[u].push(W)}},_off:function(u,v,M){var P,W,tt;if(this._events&&(P=this._events[u],!!P)){if(arguments.length===1){if(this._firingCount)for(W=0,tt=P.length;W<tt;W++)P[W].fn=y;delete this._events[u];return}if(typeof v!="function"){console.warn("wrong listener type: "+typeof v);return}var bt=this._listens(u,v,M);if(bt!==!1){var Ot=P[bt];this._firingCount&&(Ot.fn=y,this._events[u]=P=P.slice()),P.splice(bt,1)}}},fire:function(u,v,M){if(!this.listens(u,M))return this;var P=a({},v,{type:u,target:this,sourceTarget:v&&v.sourceTarget||this});if(this._events){var W=this._events[u];if(W){this._firingCount=this._firingCount+1||1;for(var tt=0,bt=W.length;tt<bt;tt++){var Ot=W[tt],Yt=Ot.fn;Ot.once&&this.off(u,Yt,Ot.ctx),Yt.call(Ot.ctx||this,P)}this._firingCount--}}return M&&this._propagateEvent(P),this},listens:function(u,v,M,P){typeof u!="string"&&console.warn('"string" type argument expected');var W=v;typeof v!="function"&&(P=!!v,W=void 0,M=void 0);var tt=this._events&&this._events[u];if(tt&&tt.length&&this._listens(u,W,M)!==!1)return!0;if(P){for(var bt in this._eventParents)if(this._eventParents[bt].listens(u,v,M,P))return!0}return!1},_listens:function(u,v,M){if(!this._events)return!1;var P=this._events[u]||[];if(!v)return!!P.length;M===this&&(M=void 0);for(var W=0,tt=P.length;W<tt;W++)if(P[W].fn===v&&P[W].ctx===M)return W;return!1},once:function(u,v,M){if(typeof u=="object")for(var P in u)this._on(P,u[P],v,!0);else{u=T(u);for(var W=0,tt=u.length;W<tt;W++)this._on(u[W],v,M,!0)}return this},addEventParent:function(u){return this._eventParents=this._eventParents||{},this._eventParents[f(u)]=u,this},removeEventParent:function(u){return this._eventParents&&delete this._eventParents[f(u)],this},_propagateEvent:function(u){for(var v in this._eventParents)this._eventParents[v].fire(u.type,a({layer:u.target,propagatedFrom:u.target},u),!0)}};j.addEventListener=j.on,j.removeEventListener=j.clearAllEventListeners=j.off,j.addOneTimeEventListener=j.once,j.fireEvent=j.fire,j.hasEventListeners=j.listens;var K=ut.extend(j);function et(u,v,M){this.x=M?Math.round(u):u,this.y=M?Math.round(v):v}var dt=Math.trunc||function(u){return u>0?Math.floor(u):Math.ceil(u)};et.prototype={clone:function(){return new et(this.x,this.y)},add:function(u){return this.clone()._add(lt(u))},_add:function(u){return this.x+=u.x,this.y+=u.y,this},subtract:function(u){return this.clone()._subtract(lt(u))},_subtract:function(u){return this.x-=u.x,this.y-=u.y,this},divideBy:function(u){return this.clone()._divideBy(u)},_divideBy:function(u){return this.x/=u,this.y/=u,this},multiplyBy:function(u){return this.clone()._multiplyBy(u)},_multiplyBy:function(u){return this.x*=u,this.y*=u,this},scaleBy:function(u){return new et(this.x*u.x,this.y*u.y)},unscaleBy:function(u){return new et(this.x/u.x,this.y/u.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=dt(this.x),this.y=dt(this.y),this},distanceTo:function(u){u=lt(u);var v=u.x-this.x,M=u.y-this.y;return Math.sqrt(v*v+M*M)},equals:function(u){return u=lt(u),u.x===this.x&&u.y===this.y},contains:function(u){return u=lt(u),Math.abs(u.x)<=Math.abs(this.x)&&Math.abs(u.y)<=Math.abs(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}};function lt(u,v,M){return u instanceof et?u:I(u)?new et(u[0],u[1]):u==null?u:typeof u=="object"&&"x"in u&&"y"in u?new et(u.x,u.y):new et(u,v,M)}function G(u,v){if(u)for(var M=v?[u,v]:u,P=0,W=M.length;P<W;P++)this.extend(M[P])}G.prototype={extend:function(u){var v,M;if(!u)return this;if(u instanceof et||typeof u[0]=="number"||"x"in u)v=M=lt(u);else if(u=nt(u),v=u.min,M=u.max,!v||!M)return this;return!this.min&&!this.max?(this.min=v.clone(),this.max=M.clone()):(this.min.x=Math.min(v.x,this.min.x),this.max.x=Math.max(M.x,this.max.x),this.min.y=Math.min(v.y,this.min.y),this.max.y=Math.max(M.y,this.max.y)),this},getCenter:function(u){return lt((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,u)},getBottomLeft:function(){return lt(this.min.x,this.max.y)},getTopRight:function(){return lt(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(u){var v,M;return typeof u[0]=="number"||u instanceof et?u=lt(u):u=nt(u),u instanceof G?(v=u.min,M=u.max):v=M=u,v.x>=this.min.x&&M.x<=this.max.x&&v.y>=this.min.y&&M.y<=this.max.y},intersects:function(u){u=nt(u);var v=this.min,M=this.max,P=u.min,W=u.max,tt=W.x>=v.x&&P.x<=M.x,bt=W.y>=v.y&&P.y<=M.y;return tt&&bt},overlaps:function(u){u=nt(u);var v=this.min,M=this.max,P=u.min,W=u.max,tt=W.x>v.x&&P.x<M.x,bt=W.y>v.y&&P.y<M.y;return tt&&bt},isValid:function(){return!!(this.min&&this.max)},pad:function(u){var v=this.min,M=this.max,P=Math.abs(v.x-M.x)*u,W=Math.abs(v.y-M.y)*u;return nt(lt(v.x-P,v.y-W),lt(M.x+P,M.y+W))},equals:function(u){return u?(u=nt(u),this.min.equals(u.getTopLeft())&&this.max.equals(u.getBottomRight())):!1}};function nt(u,v){return!u||u instanceof G?u:new G(u,v)}function ft(u,v){if(u)for(var M=v?[u,v]:u,P=0,W=M.length;P<W;P++)this.extend(M[P])}ft.prototype={extend:function(u){var v=this._southWest,M=this._northEast,P,W;if(u instanceof xt)P=u,W=u;else if(u instanceof ft){if(P=u._southWest,W=u._northEast,!P||!W)return this}else return u?this.extend(ht(u)||mt(u)):this;return!v&&!M?(this._southWest=new xt(P.lat,P.lng),this._northEast=new xt(W.lat,W.lng)):(v.lat=Math.min(P.lat,v.lat),v.lng=Math.min(P.lng,v.lng),M.lat=Math.max(W.lat,M.lat),M.lng=Math.max(W.lng,M.lng)),this},pad:function(u){var v=this._southWest,M=this._northEast,P=Math.abs(v.lat-M.lat)*u,W=Math.abs(v.lng-M.lng)*u;return new ft(new xt(v.lat-P,v.lng-W),new xt(M.lat+P,M.lng+W))},getCenter:function(){return new xt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new xt(this.getNorth(),this.getWest())},getSouthEast:function(){return new xt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(u){typeof u[0]=="number"||u instanceof xt||"lat"in u?u=ht(u):u=mt(u);var v=this._southWest,M=this._northEast,P,W;return u instanceof ft?(P=u.getSouthWest(),W=u.getNorthEast()):P=W=u,P.lat>=v.lat&&W.lat<=M.lat&&P.lng>=v.lng&&W.lng<=M.lng},intersects:function(u){u=mt(u);var v=this._southWest,M=this._northEast,P=u.getSouthWest(),W=u.getNorthEast(),tt=W.lat>=v.lat&&P.lat<=M.lat,bt=W.lng>=v.lng&&P.lng<=M.lng;return tt&&bt},overlaps:function(u){u=mt(u);var v=this._southWest,M=this._northEast,P=u.getSouthWest(),W=u.getNorthEast(),tt=W.lat>v.lat&&P.lat<M.lat,bt=W.lng>v.lng&&P.lng<M.lng;return tt&&bt},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(u,v){return u?(u=mt(u),this._southWest.equals(u.getSouthWest(),v)&&this._northEast.equals(u.getNorthEast(),v)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function mt(u,v){return u instanceof ft?u:new ft(u,v)}function xt(u,v,M){if(isNaN(u)||isNaN(v))throw new Error("Invalid LatLng object: ("+u+", "+v+")");this.lat=+u,this.lng=+v,M!==void 0&&(this.alt=+M)}xt.prototype={equals:function(u,v){if(!u)return!1;u=ht(u);var M=Math.max(Math.abs(this.lat-u.lat),Math.abs(this.lng-u.lng));return M<=(v===void 0?1e-9:v)},toString:function(u){return"LatLng("+x(this.lat,u)+", "+x(this.lng,u)+")"},distanceTo:function(u){return At.distance(this,ht(u))},wrap:function(){return At.wrapLatLng(this)},toBounds:function(u){var v=180*u/40075017,M=v/Math.cos(Math.PI/180*this.lat);return mt([this.lat-v,this.lng-M],[this.lat+v,this.lng+M])},clone:function(){return new xt(this.lat,this.lng,this.alt)}};function ht(u,v,M){return u instanceof xt?u:I(u)&&typeof u[0]!="object"?u.length===3?new xt(u[0],u[1],u[2]):u.length===2?new xt(u[0],u[1]):null:u==null?u:typeof u=="object"&&"lat"in u?new xt(u.lat,"lng"in u?u.lng:u.lon,u.alt):v===void 0?null:new xt(u,v,M)}var _t={latLngToPoint:function(u,v){var M=this.projection.project(u),P=this.scale(v);return this.transformation._transform(M,P)},pointToLatLng:function(u,v){var M=this.scale(v),P=this.transformation.untransform(u,M);return this.projection.unproject(P)},project:function(u){return this.projection.project(u)},unproject:function(u){return this.projection.unproject(u)},scale:function(u){return 256*Math.pow(2,u)},zoom:function(u){return Math.log(u/256)/Math.LN2},getProjectedBounds:function(u){if(this.infinite)return null;var v=this.projection.bounds,M=this.scale(u),P=this.transformation.transform(v.min,M),W=this.transformation.transform(v.max,M);return new G(P,W)},infinite:!1,wrapLatLng:function(u){var v=this.wrapLng?g(u.lng,this.wrapLng,!0):u.lng,M=this.wrapLat?g(u.lat,this.wrapLat,!0):u.lat,P=u.alt;return new xt(M,v,P)},wrapLatLngBounds:function(u){var v=u.getCenter(),M=this.wrapLatLng(v),P=v.lat-M.lat,W=v.lng-M.lng;if(P===0&&W===0)return u;var tt=u.getSouthWest(),bt=u.getNorthEast(),Ot=new xt(tt.lat-P,tt.lng-W),Yt=new xt(bt.lat-P,bt.lng-W);return new ft(Ot,Yt)}},At=a({},_t,{wrapLng:[-180,180],R:6371e3,distance:function(u,v){var M=Math.PI/180,P=u.lat*M,W=v.lat*M,tt=Math.sin((v.lat-u.lat)*M/2),bt=Math.sin((v.lng-u.lng)*M/2),Ot=tt*tt+Math.cos(P)*Math.cos(W)*bt*bt,Yt=2*Math.atan2(Math.sqrt(Ot),Math.sqrt(1-Ot));return this.R*Yt}}),$t=6378137,te={R:$t,MAX_LATITUDE:85.0511287798,project:function(u){var v=Math.PI/180,M=this.MAX_LATITUDE,P=Math.max(Math.min(M,u.lat),-M),W=Math.sin(P*v);return new et(this.R*u.lng*v,this.R*Math.log((1+W)/(1-W))/2)},unproject:function(u){var v=180/Math.PI;return new xt((2*Math.atan(Math.exp(u.y/this.R))-Math.PI/2)*v,u.x*v/this.R)},bounds:(function(){var u=$t*Math.PI;return new G([-u,-u],[u,u])})()};function qt(u,v,M,P){if(I(u)){this._a=u[0],this._b=u[1],this._c=u[2],this._d=u[3];return}this._a=u,this._b=v,this._c=M,this._d=P}qt.prototype={transform:function(u,v){return this._transform(u.clone(),v)},_transform:function(u,v){return v=v||1,u.x=v*(this._a*u.x+this._b),u.y=v*(this._c*u.y+this._d),u},untransform:function(u,v){return v=v||1,new et((u.x/v-this._b)/this._a,(u.y/v-this._d)/this._c)}};function ne(u,v,M,P){return new qt(u,v,M,P)}var Se=a({},At,{code:"EPSG:3857",projection:te,transformation:(function(){var u=.5/(Math.PI*te.R);return ne(u,.5,-u,.5)})()}),Nt=a({},Se,{code:"EPSG:900913"});function Vt(u){return document.createElementNS("http://www.w3.org/2000/svg",u)}function Ft(u,v){var M="",P,W,tt,bt,Ot,Yt;for(P=0,tt=u.length;P<tt;P++){for(Ot=u[P],W=0,bt=Ot.length;W<bt;W++)Yt=Ot[W],M+=(W?"L":"M")+Yt.x+" "+Yt.y;M+=v?ke.svg?"z":"x":""}return M||"M0 0"}var re=document.documentElement.style,at="ActiveXObject"in window,ue=at&&!document.addEventListener,Zt="msLaunchUri"in navigator&&!("documentMode"in document),Lt=Yn("webkit"),ee=Yn("android"),$=Yn("android 2")||Yn("android 3"),Y=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),yt=ee&&Yn("Google")&&Y<537&&!("AudioNode"in window),Bt=!!window.opera,Dt=!Zt&&Yn("chrome"),Ct=Yn("gecko")&&!Lt&&!Bt&&!at,ve=!Dt&&Yn("safari"),he=Yn("phantom"),be="OTransition"in re,Ce=navigator.platform.indexOf("Win")===0,Gt=at&&"transition"in re,Qt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!$,se="MozPerspective"in re,gt=!window.L_DISABLE_3D&&(Gt||Qt||se)&&!be&&!he,wt=typeof orientation<"u"||Yn("mobile"),xe=wt&&Lt,St=wt&&Qt,ie=!window.PointerEvent&&window.MSPointerEvent,le=!!(window.PointerEvent||ie),Ae="ontouchstart"in window||!!window.TouchEvent,ce=!window.L_NO_TOUCH&&(Ae||le),jt=wt&&Bt,me=wt&&Ct,Re=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Le=(function(){var u=!1;try{var v=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("testPassiveEventSupport",y,v),window.removeEventListener("testPassiveEventSupport",y,v)}catch{}return u})(),qe=(function(){return!!document.createElement("canvas").getContext})(),bn=!!(document.createElementNS&&Vt("svg").createSVGRect),Bn=!!bn&&(function(){var u=document.createElement("div");return u.innerHTML="<svg/>",(u.firstChild&&u.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Ai=!bn&&(function(){try{var u=document.createElement("div");u.innerHTML='<v:shape adj="1"/>';var v=u.firstChild;return v.style.behavior="url(#default#VML)",v&&typeof v.adj=="object"}catch{return!1}})(),ia=navigator.platform.indexOf("Mac")===0,Ca=navigator.platform.indexOf("Linux")===0;function Yn(u){return navigator.userAgent.toLowerCase().indexOf(u)>=0}var ke={ie:at,ielt9:ue,edge:Zt,webkit:Lt,android:ee,android23:$,androidStock:yt,opera:Bt,chrome:Dt,gecko:Ct,safari:ve,phantom:he,opera12:be,win:Ce,ie3d:Gt,webkit3d:Qt,gecko3d:se,any3d:gt,mobile:wt,mobileWebkit:xe,mobileWebkit3d:St,msPointer:ie,pointer:le,touch:ce,touchNative:Ae,mobileOpera:jt,mobileGecko:me,retina:Re,passiveEvents:Le,canvas:qe,svg:bn,vml:Ai,inlineSvg:Bn,mac:ia,linux:Ca},Fi=ke.msPointer?"MSPointerDown":"pointerdown",si=ke.msPointer?"MSPointerMove":"pointermove",Hn=ke.msPointer?"MSPointerUp":"pointerup",cn=ke.msPointer?"MSPointerCancel":"pointercancel",Li={touchstart:Fi,touchmove:si,touchend:Hn,touchcancel:cn},ga={touchstart:Xe,touchmove:va,touchend:va,touchcancel:va},fs={},cr=!1;function lo(u,v,M){return v==="touchstart"&&Zn(),ga[v]?(M=ga[v].bind(this,M),u.addEventListener(Li[v],M,!1),M):(console.warn("wrong event specified:",v),y)}function ur(u,v,M){if(!Li[v]){console.warn("wrong event specified:",v);return}u.removeEventListener(Li[v],M,!1)}function fr(u){fs[u.pointerId]=u}function Gr(u){fs[u.pointerId]&&(fs[u.pointerId]=u)}function yi(u){delete fs[u.pointerId]}function Zn(){cr||(document.addEventListener(Fi,fr,!0),document.addEventListener(si,Gr,!0),document.addEventListener(Hn,yi,!0),document.addEventListener(cn,yi,!0),cr=!0)}function va(u,v){if(v.pointerType!==(v.MSPOINTER_TYPE_MOUSE||"mouse")){v.touches=[];for(var M in fs)v.touches.push(fs[M]);v.changedTouches=[v],u(v)}}function Xe(u,v){v.MSPOINTER_TYPE_TOUCH&&v.pointerType===v.MSPOINTER_TYPE_TOUCH&&ui(v),va(u,v)}function it(u){var v={},M,P;for(P in u)M=u[P],v[P]=M&&M.bind?M.bind(u):M;return u=v,v.type="dblclick",v.detail=2,v.isTrusted=!1,v._simulated=!0,v}var Rt=200;function Xt(u,v){u.addEventListener("dblclick",v);var M=0,P;function W(tt){if(tt.detail!==1){P=tt.detail;return}if(!(tt.pointerType==="mouse"||tt.sourceCapabilities&&!tt.sourceCapabilities.firesTouchEvents)){var bt=dr(tt);if(!(bt.some(function(Yt){return Yt instanceof HTMLLabelElement&&Yt.attributes.for})&&!bt.some(function(Yt){return Yt instanceof HTMLInputElement||Yt instanceof HTMLSelectElement}))){var Ot=Date.now();Ot-M<=Rt?(P++,P===2&&v(it(tt))):P=1,M=Ot}}}return u.addEventListener("click",W),{dblclick:v,simDblclick:W}}function kt(u,v){u.removeEventListener("dblclick",v.dblclick),u.removeEventListener("click",v.simDblclick)}var Ut=ya(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ee=ya(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ue=Ee==="webkitTransition"||Ee==="OTransition"?Ee+"End":"transitionend";function De(u){return typeof u=="string"?document.getElementById(u):u}function Pe(u,v){var M=u.style[v]||u.currentStyle&&u.currentStyle[v];if((!M||M==="auto")&&document.defaultView){var P=document.defaultView.getComputedStyle(u,null);M=P?P[v]:null}return M==="auto"?null:M}function Me(u,v,M){var P=document.createElement(u);return P.className=v||"",M&&M.appendChild(P),P}function Oe(u){var v=u.parentNode;v&&v.removeChild(u)}function Ve(u){for(;u.firstChild;)u.removeChild(u.firstChild)}function Je(u){var v=u.parentNode;v&&v.lastChild!==u&&v.appendChild(u)}function xn(u){var v=u.parentNode;v&&v.firstChild!==u&&v.insertBefore(u,v.firstChild)}function Kn(u,v){if(u.classList!==void 0)return u.classList.contains(v);var M=Cn(u);return M.length>0&&new RegExp("(^|\\s)"+v+"(\\s|$)").test(M)}function ze(u,v){if(u.classList!==void 0)for(var M=T(v),P=0,W=M.length;P<W;P++)u.classList.add(M[P]);else if(!Kn(u,v)){var tt=Cn(u);Ye(u,(tt?tt+" ":"")+v)}}function nn(u,v){u.classList!==void 0?u.classList.remove(v):Ye(u,b((" "+Cn(u)+" ").replace(" "+v+" "," ")))}function Ye(u,v){u.className.baseVal===void 0?u.className=v:u.className.baseVal=v}function Cn(u){return u.correspondingElement&&(u=u.correspondingElement),u.className.baseVal===void 0?u.className:u.className.baseVal}function je(u,v){"opacity"in u.style?u.style.opacity=v:"filter"in u.style&&qi(u,v)}function qi(u,v){var M=!1,P="DXImageTransform.Microsoft.Alpha";try{M=u.filters.item(P)}catch{if(v===1)return}v=Math.round(v*100),M?(M.Enabled=v!==100,M.Opacity=v):u.style.filter+=" progid:"+P+"(opacity="+v+")"}function ya(u){for(var v=document.documentElement.style,M=0;M<u.length;M++)if(u[M]in v)return u[M];return!1}function ai(u,v,M){var P=v||new et(0,0);u.style[Ut]=(ke.ie3d?"translate("+P.x+"px,"+P.y+"px)":"translate3d("+P.x+"px,"+P.y+"px,0)")+(M?" scale("+M+")":"")}function Fn(u,v){u._leaflet_pos=v,ke.any3d?ai(u,v):(u.style.left=v.x+"px",u.style.top=v.y+"px")}function Mn(u){return u._leaflet_pos||new et(0,0)}var Qn,ci,Ei;if("onselectstart"in document)Qn=function(){on(window,"selectstart",ui)},ci=function(){Gn(window,"selectstart",ui)};else{var _i=ya(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Qn=function(){if(_i){var u=document.documentElement.style;Ei=u[_i],u[_i]="none"}},ci=function(){_i&&(document.documentElement.style[_i]=Ei,Ei=void 0)}}function Es(){on(window,"dragstart",ui)}function ki(){Gn(window,"dragstart",ui)}var Ho,co;function hs(u){for(;u.tabIndex===-1;)u=u.parentNode;u.style&&(Xi(),Ho=u,co=u.style.outlineStyle,u.style.outlineStyle="none",on(window,"keydown",Xi))}function Xi(){Ho&&(Ho.style.outlineStyle=co,Ho=void 0,co=void 0,Gn(window,"keydown",Xi))}function Gs(u){do u=u.parentNode;while((!u.offsetWidth||!u.offsetHeight)&&u!==document.body);return u}function uo(u){var v=u.getBoundingClientRect();return{x:v.width/u.offsetWidth||1,y:v.height/u.offsetHeight||1,boundingClientRect:v}}var ws={__proto__:null,TRANSFORM:Ut,TRANSITION:Ee,TRANSITION_END:Ue,get:De,getStyle:Pe,create:Me,remove:Oe,empty:Ve,toFront:Je,toBack:xn,hasClass:Kn,addClass:ze,removeClass:nn,setClass:Ye,getClass:Cn,setOpacity:je,testProp:ya,setTransform:ai,setPosition:Fn,getPosition:Mn,get disableTextSelection(){return Qn},get enableTextSelection(){return ci},disableImageDrag:Es,enableImageDrag:ki,preventOutline:hs,restoreOutline:Xi,getSizedParentNode:Gs,getScale:uo};function on(u,v,M,P){if(v&&typeof v=="object")for(var W in v)Qa(u,W,v[W],M);else{v=T(v);for(var tt=0,bt=v.length;tt<bt;tt++)Qa(u,v[tt],M,P)}return this}var Fa="_leaflet_events";function Gn(u,v,M,P){if(arguments.length===1)fo(u),delete u[Fa];else if(v&&typeof v=="object")for(var W in v)_a(u,W,v[W],M);else if(v=T(v),arguments.length===2)fo(u,function(Ot){return z(v,Ot)!==-1});else for(var tt=0,bt=v.length;tt<bt;tt++)_a(u,v[tt],M,P);return this}function fo(u,v){for(var M in u[Fa]){var P=M.split(/\d/)[0];(!v||v(P))&&_a(u,P,null,null,M)}}var Cs={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Qa(u,v,M,P){var W=v+f(M)+(P?"_"+f(P):"");if(u[Fa]&&u[Fa][W])return this;var tt=function(Ot){return M.call(P||u,Ot||window.event)},bt=tt;!ke.touchNative&&ke.pointer&&v.indexOf("touch")===0?tt=lo(u,v,tt):ke.touch&&v==="dblclick"?tt=Xt(u,tt):"addEventListener"in u?v==="touchstart"||v==="touchmove"||v==="wheel"||v==="mousewheel"?u.addEventListener(Cs[v]||v,tt,ke.passiveEvents?{passive:!1}:!1):v==="mouseenter"||v==="mouseleave"?(tt=function(Ot){Ot=Ot||window.event,Ls(u,Ot)&&bt(Ot)},u.addEventListener(Cs[v],tt,!1)):u.addEventListener(v,bt,!1):u.attachEvent("on"+v,tt),u[Fa]=u[Fa]||{},u[Fa][W]=tt}function _a(u,v,M,P,W){W=W||v+f(M)+(P?"_"+f(P):"");var tt=u[Fa]&&u[Fa][W];if(!tt)return this;!ke.touchNative&&ke.pointer&&v.indexOf("touch")===0?ur(u,v,tt):ke.touch&&v==="dblclick"?kt(u,tt):"removeEventListener"in u?u.removeEventListener(Cs[v]||v,tt,!1):u.detachEvent("on"+v,tt),u[Fa][W]=null}function Ja(u){return u.stopPropagation?u.stopPropagation():u.originalEvent?u.originalEvent._stopped=!0:u.cancelBubble=!0,this}function Rs(u){return Qa(u,"wheel",Ja),this}function hr(u){return on(u,"mousedown touchstart dblclick contextmenu",Ja),u._leaflet_disable_click=!0,this}function ui(u){return u.preventDefault?u.preventDefault():u.returnValue=!1,this}function Ds(u){return ui(u),Ja(u),this}function dr(u){if(u.composedPath)return u.composedPath();for(var v=[],M=u.target;M;)v.push(M),M=M.parentNode;return v}function js(u,v){if(!v)return new et(u.clientX,u.clientY);var M=uo(v),P=M.boundingClientRect;return new et((u.clientX-P.left)/M.x-v.clientLeft,(u.clientY-P.top)/M.y-v.clientTop)}var ho=ke.linux&&ke.chrome?window.devicePixelRatio:ke.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Si(u){return ke.edge?u.wheelDeltaY/2:u.deltaY&&u.deltaMode===0?-u.deltaY/ho:u.deltaY&&u.deltaMode===1?-u.deltaY*20:u.deltaY&&u.deltaMode===2?-u.deltaY*60:u.deltaX||u.deltaZ?0:u.wheelDelta?(u.wheelDeltaY||u.wheelDelta)/2:u.detail&&Math.abs(u.detail)<32765?-u.detail*20:u.detail?u.detail/-32765*60:0}function Ls(u,v){var M=v.relatedTarget;if(!M)return!0;try{for(;M&&M!==u;)M=M.parentNode}catch{return!1}return M!==u}var po={__proto__:null,on,off:Gn,stopPropagation:Ja,disableScrollPropagation:Rs,disableClickPropagation:hr,preventDefault:ui,stop:Ds,getPropagationPath:dr,getMousePosition:js,getWheelDelta:Si,isExternalTarget:Ls,addListener:on,removeListener:Gn},ka=K.extend({run:function(u,v,M,P){this.stop(),this._el=u,this._inProgress=!0,this._duration=M||.25,this._easeOutPower=1/Math.max(P||.5,.2),this._startPos=Mn(u),this._offset=v.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Q(this._animate,this),this._step()},_step:function(u){var v=+new Date-this._startTime,M=this._duration*1e3;v<M?this._runFrame(this._easeOut(v/M),u):(this._runFrame(1),this._complete())},_runFrame:function(u,v){var M=this._startPos.add(this._offset.multiplyBy(u));v&&M._round(),Fn(this._el,M),this.fire("step")},_complete:function(){J(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(u){return 1-Math.pow(1-u,this._easeOutPower)}}),yn=K.extend({options:{crs:Se,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(u,v){v=R(this,v),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(u),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),v.maxBounds&&this.setMaxBounds(v.maxBounds),v.zoom!==void 0&&(this._zoom=this._limitZoom(v.zoom)),v.center&&v.zoom!==void 0&&this.setView(ht(v.center),v.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ee&&ke.any3d&&!ke.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),on(this._proxy,Ue,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(u,v,M){if(v=v===void 0?this._zoom:this._limitZoom(v),u=this._limitCenter(ht(u),v,this.options.maxBounds),M=M||{},this._stop(),this._loaded&&!M.reset&&M!==!0){M.animate!==void 0&&(M.zoom=a({animate:M.animate},M.zoom),M.pan=a({animate:M.animate,duration:M.duration},M.pan));var P=this._zoom!==v?this._tryAnimatedZoom&&this._tryAnimatedZoom(u,v,M.zoom):this._tryAnimatedPan(u,M.pan);if(P)return clearTimeout(this._sizeTimer),this}return this._resetView(u,v,M.pan&&M.pan.noMoveStart),this},setZoom:function(u,v){return this._loaded?this.setView(this.getCenter(),u,{zoom:v}):(this._zoom=u,this)},zoomIn:function(u,v){return u=u||(ke.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+u,v)},zoomOut:function(u,v){return u=u||(ke.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-u,v)},setZoomAround:function(u,v,M){var P=this.getZoomScale(v),W=this.getSize().divideBy(2),tt=u instanceof et?u:this.latLngToContainerPoint(u),bt=tt.subtract(W).multiplyBy(1-1/P),Ot=this.containerPointToLatLng(W.add(bt));return this.setView(Ot,v,{zoom:M})},_getBoundsCenterZoom:function(u,v){v=v||{},u=u.getBounds?u.getBounds():mt(u);var M=lt(v.paddingTopLeft||v.padding||[0,0]),P=lt(v.paddingBottomRight||v.padding||[0,0]),W=this.getBoundsZoom(u,!1,M.add(P));if(W=typeof v.maxZoom=="number"?Math.min(v.maxZoom,W):W,W===1/0)return{center:u.getCenter(),zoom:W};var tt=P.subtract(M).divideBy(2),bt=this.project(u.getSouthWest(),W),Ot=this.project(u.getNorthEast(),W),Yt=this.unproject(bt.add(Ot).divideBy(2).add(tt),W);return{center:Yt,zoom:W}},fitBounds:function(u,v){if(u=mt(u),!u.isValid())throw new Error("Bounds are not valid.");var M=this._getBoundsCenterZoom(u,v);return this.setView(M.center,M.zoom,v)},fitWorld:function(u){return this.fitBounds([[-90,-180],[90,180]],u)},panTo:function(u,v){return this.setView(u,this._zoom,{pan:v})},panBy:function(u,v){if(u=lt(u).round(),v=v||{},!u.x&&!u.y)return this.fire("moveend");if(v.animate!==!0&&!this.getSize().contains(u))return this._resetView(this.unproject(this.project(this.getCenter()).add(u)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ka,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),v.noMoveStart||this.fire("movestart"),v.animate!==!1){ze(this._mapPane,"leaflet-pan-anim");var M=this._getMapPanePos().subtract(u).round();this._panAnim.run(this._mapPane,M,v.duration||.25,v.easeLinearity)}else this._rawPanBy(u),this.fire("move").fire("moveend");return this},flyTo:function(u,v,M){if(M=M||{},M.animate===!1||!ke.any3d)return this.setView(u,v,M);this._stop();var P=this.project(this.getCenter()),W=this.project(u),tt=this.getSize(),bt=this._zoom;u=ht(u),v=v===void 0?bt:v;var Ot=Math.max(tt.x,tt.y),Yt=Ot*this.getZoomScale(bt,v),ye=W.distanceTo(P)||1,Ne=1.42,$e=Ne*Ne;function Tn(Gi){var jr=Gi?-1:1,Rl=Gi?Yt:Ot,th=Yt*Yt-Ot*Ot+jr*$e*$e*ye*ye,eu=2*Rl*$e*ye,nu=th/eu,Wr=Math.sqrt(nu*nu+1)-nu,qa=Wr<1e-9?-18:Math.log(Wr);return qa}function Sa(Gi){return(Math.exp(Gi)-Math.exp(-Gi))/2}function wi(Gi){return(Math.exp(Gi)+Math.exp(-Gi))/2}function Wa(Gi){return Sa(Gi)/wi(Gi)}var Jn=Tn(0);function $n(Gi){return Ot*(wi(Jn)/wi(Jn+Ne*Gi))}function zn(Gi){return Ot*(wi(Jn)*Wa(Jn+Ne*Gi)-Sa(Jn))/$e}function Co(Gi){return 1-Math.pow(1-Gi,1.5)}var ba=Date.now(),$c=(Tn(1)-Jn)/Ne,In=M.duration?1e3*M.duration:1e3*$c*.8;function tu(){var Gi=(Date.now()-ba)/In,jr=Co(Gi)*$c;Gi<=1?(this._flyToFrame=Q(tu,this),this._move(this.unproject(P.add(W.subtract(P).multiplyBy(zn(jr)/ye)),bt),this.getScaleZoom(Ot/$n(jr),bt),{flyTo:!0})):this._move(u,v)._moveEnd(!0)}return this._moveStart(!0,M.noMoveStart),tu.call(this),this},flyToBounds:function(u,v){var M=this._getBoundsCenterZoom(u,v);return this.flyTo(M.center,M.zoom,v)},setMaxBounds:function(u){return u=mt(u),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),u.isValid()?(this.options.maxBounds=u,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(u){var v=this.options.minZoom;return this.options.minZoom=u,this._loaded&&v!==u&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(u):this},setMaxZoom:function(u){var v=this.options.maxZoom;return this.options.maxZoom=u,this._loaded&&v!==u&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(u):this},panInsideBounds:function(u,v){this._enforcingBounds=!0;var M=this.getCenter(),P=this._limitCenter(M,this._zoom,mt(u));return M.equals(P)||this.panTo(P,v),this._enforcingBounds=!1,this},panInside:function(u,v){v=v||{};var M=lt(v.paddingTopLeft||v.padding||[0,0]),P=lt(v.paddingBottomRight||v.padding||[0,0]),W=this.project(this.getCenter()),tt=this.project(u),bt=this.getPixelBounds(),Ot=nt([bt.min.add(M),bt.max.subtract(P)]),Yt=Ot.getSize();if(!Ot.contains(tt)){this._enforcingBounds=!0;var ye=tt.subtract(Ot.getCenter()),Ne=Ot.extend(tt).getSize().subtract(Yt);W.x+=ye.x<0?-Ne.x:Ne.x,W.y+=ye.y<0?-Ne.y:Ne.y,this.panTo(this.unproject(W),v),this._enforcingBounds=!1}return this},invalidateSize:function(u){if(!this._loaded)return this;u=a({animate:!1,pan:!0},u===!0?{animate:!0}:u);var v=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var M=this.getSize(),P=v.divideBy(2).round(),W=M.divideBy(2).round(),tt=P.subtract(W);return!tt.x&&!tt.y?this:(u.animate&&u.pan?this.panBy(tt):(u.pan&&this._rawPanBy(tt),this.fire("move"),u.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:v,newSize:M}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(u){if(u=this._locateOptions=a({timeout:1e4,watch:!1},u),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var v=o(this._handleGeolocationResponse,this),M=o(this._handleGeolocationError,this);return u.watch?this._locationWatchId=navigator.geolocation.watchPosition(v,M,u):navigator.geolocation.getCurrentPosition(v,M,u),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(u){if(this._container._leaflet_id){var v=u.code,M=u.message||(v===1?"permission denied":v===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:v,message:"Geolocation error: "+M+"."})}},_handleGeolocationResponse:function(u){if(this._container._leaflet_id){var v=u.coords.latitude,M=u.coords.longitude,P=new xt(v,M),W=P.toBounds(u.coords.accuracy*2),tt=this._locateOptions;if(tt.setView){var bt=this.getBoundsZoom(W);this.setView(P,tt.maxZoom?Math.min(bt,tt.maxZoom):bt)}var Ot={latlng:P,bounds:W,timestamp:u.timestamp};for(var Yt in u.coords)typeof u.coords[Yt]=="number"&&(Ot[Yt]=u.coords[Yt]);this.fire("locationfound",Ot)}},addHandler:function(u,v){if(!v)return this;var M=this[u]=new v(this);return this._handlers.push(M),this.options[u]&&M.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Oe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(J(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var u;for(u in this._layers)this._layers[u].remove();for(u in this._panes)Oe(this._panes[u]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(u,v){var M="leaflet-pane"+(u?" leaflet-"+u.replace("Pane","")+"-pane":""),P=Me("div",M,v||this._mapPane);return u&&(this._panes[u]=P),P},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var u=this.getPixelBounds(),v=this.unproject(u.getBottomLeft()),M=this.unproject(u.getTopRight());return new ft(v,M)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(u,v,M){u=mt(u),M=lt(M||[0,0]);var P=this.getZoom()||0,W=this.getMinZoom(),tt=this.getMaxZoom(),bt=u.getNorthWest(),Ot=u.getSouthEast(),Yt=this.getSize().subtract(M),ye=nt(this.project(Ot,P),this.project(bt,P)).getSize(),Ne=ke.any3d?this.options.zoomSnap:1,$e=Yt.x/ye.x,Tn=Yt.y/ye.y,Sa=v?Math.max($e,Tn):Math.min($e,Tn);return P=this.getScaleZoom(Sa,P),Ne&&(P=Math.round(P/(Ne/100))*(Ne/100),P=v?Math.ceil(P/Ne)*Ne:Math.floor(P/Ne)*Ne),Math.max(W,Math.min(tt,P))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new et(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(u,v){var M=this._getTopLeftPoint(u,v);return new G(M,M.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(u){return this.options.crs.getProjectedBounds(u===void 0?this.getZoom():u)},getPane:function(u){return typeof u=="string"?this._panes[u]:u},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(u,v){var M=this.options.crs;return v=v===void 0?this._zoom:v,M.scale(u)/M.scale(v)},getScaleZoom:function(u,v){var M=this.options.crs;v=v===void 0?this._zoom:v;var P=M.zoom(u*M.scale(v));return isNaN(P)?1/0:P},project:function(u,v){return v=v===void 0?this._zoom:v,this.options.crs.latLngToPoint(ht(u),v)},unproject:function(u,v){return v=v===void 0?this._zoom:v,this.options.crs.pointToLatLng(lt(u),v)},layerPointToLatLng:function(u){var v=lt(u).add(this.getPixelOrigin());return this.unproject(v)},latLngToLayerPoint:function(u){var v=this.project(ht(u))._round();return v._subtract(this.getPixelOrigin())},wrapLatLng:function(u){return this.options.crs.wrapLatLng(ht(u))},wrapLatLngBounds:function(u){return this.options.crs.wrapLatLngBounds(mt(u))},distance:function(u,v){return this.options.crs.distance(ht(u),ht(v))},containerPointToLayerPoint:function(u){return lt(u).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(u){return lt(u).add(this._getMapPanePos())},containerPointToLatLng:function(u){var v=this.containerPointToLayerPoint(lt(u));return this.layerPointToLatLng(v)},latLngToContainerPoint:function(u){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ht(u)))},mouseEventToContainerPoint:function(u){return js(u,this._container)},mouseEventToLayerPoint:function(u){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(u))},mouseEventToLatLng:function(u){return this.layerPointToLatLng(this.mouseEventToLayerPoint(u))},_initContainer:function(u){var v=this._container=De(u);if(v){if(v._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");on(v,"scroll",this._onScroll,this),this._containerId=f(v)},_initLayout:function(){var u=this._container;this._fadeAnimated=this.options.fadeAnimation&&ke.any3d,ze(u,"leaflet-container"+(ke.touch?" leaflet-touch":"")+(ke.retina?" leaflet-retina":"")+(ke.ielt9?" leaflet-oldie":"")+(ke.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var v=Pe(u,"position");v!=="absolute"&&v!=="relative"&&v!=="fixed"&&v!=="sticky"&&(u.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var u=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Fn(this._mapPane,new et(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ze(u.markerPane,"leaflet-zoom-hide"),ze(u.shadowPane,"leaflet-zoom-hide"))},_resetView:function(u,v,M){Fn(this._mapPane,new et(0,0));var P=!this._loaded;this._loaded=!0,v=this._limitZoom(v),this.fire("viewprereset");var W=this._zoom!==v;this._moveStart(W,M)._move(u,v)._moveEnd(W),this.fire("viewreset"),P&&this.fire("load")},_moveStart:function(u,v){return u&&this.fire("zoomstart"),v||this.fire("movestart"),this},_move:function(u,v,M,P){v===void 0&&(v=this._zoom);var W=this._zoom!==v;return this._zoom=v,this._lastCenter=u,this._pixelOrigin=this._getNewPixelOrigin(u),P?M&&M.pinch&&this.fire("zoom",M):((W||M&&M.pinch)&&this.fire("zoom",M),this.fire("move",M)),this},_moveEnd:function(u){return u&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return J(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(u){Fn(this._mapPane,this._getMapPanePos().subtract(u))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(u){this._targets={},this._targets[f(this._container)]=this;var v=u?Gn:on;v(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&v(window,"resize",this._onResize,this),ke.any3d&&this.options.transform3DLimit&&(u?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){J(this._resizeRequest),this._resizeRequest=Q(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var u=this._getMapPanePos();Math.max(Math.abs(u.x),Math.abs(u.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(u,v){for(var M=[],P,W=v==="mouseout"||v==="mouseover",tt=u.target||u.srcElement,bt=!1;tt;){if(P=this._targets[f(tt)],P&&(v==="click"||v==="preclick")&&this._draggableMoved(P)){bt=!0;break}if(P&&P.listens(v,!0)&&(W&&!Ls(tt,u)||(M.push(P),W))||tt===this._container)break;tt=tt.parentNode}return!M.length&&!bt&&!W&&this.listens(v,!0)&&(M=[this]),M},_isClickDisabled:function(u){for(;u&&u!==this._container;){if(u._leaflet_disable_click)return!0;u=u.parentNode}},_handleDOMEvent:function(u){var v=u.target||u.srcElement;if(!(!this._loaded||v._leaflet_disable_events||u.type==="click"&&this._isClickDisabled(v))){var M=u.type;M==="mousedown"&&hs(v),this._fireDOMEvent(u,M)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(u,v,M){if(u.type==="click"){var P=a({},u);P.type="preclick",this._fireDOMEvent(P,P.type,M)}var W=this._findEventTargets(u,v);if(M){for(var tt=[],bt=0;bt<M.length;bt++)M[bt].listens(v,!0)&&tt.push(M[bt]);W=tt.concat(W)}if(W.length){v==="contextmenu"&&ui(u);var Ot=W[0],Yt={originalEvent:u};if(u.type!=="keypress"&&u.type!=="keydown"&&u.type!=="keyup"){var ye=Ot.getLatLng&&(!Ot._radius||Ot._radius<=10);Yt.containerPoint=ye?this.latLngToContainerPoint(Ot.getLatLng()):this.mouseEventToContainerPoint(u),Yt.layerPoint=this.containerPointToLayerPoint(Yt.containerPoint),Yt.latlng=ye?Ot.getLatLng():this.layerPointToLatLng(Yt.layerPoint)}for(bt=0;bt<W.length;bt++)if(W[bt].fire(v,Yt,!0),Yt.originalEvent._stopped||W[bt].options.bubblingMouseEvents===!1&&z(this._mouseEvents,v)!==-1)return}},_draggableMoved:function(u){return u=u.dragging&&u.dragging.enabled()?u:this,u.dragging&&u.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var u=0,v=this._handlers.length;u<v;u++)this._handlers[u].disable()},whenReady:function(u,v){return this._loaded?u.call(v||this,{target:this}):this.on("load",u,v),this},_getMapPanePos:function(){return Mn(this._mapPane)||new et(0,0)},_moved:function(){var u=this._getMapPanePos();return u&&!u.equals([0,0])},_getTopLeftPoint:function(u,v){var M=u&&v!==void 0?this._getNewPixelOrigin(u,v):this.getPixelOrigin();return M.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(u,v){var M=this.getSize()._divideBy(2);return this.project(u,v)._subtract(M)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(u,v,M){var P=this._getNewPixelOrigin(M,v);return this.project(u,v)._subtract(P)},_latLngBoundsToNewLayerBounds:function(u,v,M){var P=this._getNewPixelOrigin(M,v);return nt([this.project(u.getSouthWest(),v)._subtract(P),this.project(u.getNorthWest(),v)._subtract(P),this.project(u.getSouthEast(),v)._subtract(P),this.project(u.getNorthEast(),v)._subtract(P)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(u){return this.latLngToLayerPoint(u).subtract(this._getCenterLayerPoint())},_limitCenter:function(u,v,M){if(!M)return u;var P=this.project(u,v),W=this.getSize().divideBy(2),tt=new G(P.subtract(W),P.add(W)),bt=this._getBoundsOffset(tt,M,v);return Math.abs(bt.x)<=1&&Math.abs(bt.y)<=1?u:this.unproject(P.add(bt),v)},_limitOffset:function(u,v){if(!v)return u;var M=this.getPixelBounds(),P=new G(M.min.add(u),M.max.add(u));return u.add(this._getBoundsOffset(P,v))},_getBoundsOffset:function(u,v,M){var P=nt(this.project(v.getNorthEast(),M),this.project(v.getSouthWest(),M)),W=P.min.subtract(u.min),tt=P.max.subtract(u.max),bt=this._rebound(W.x,-tt.x),Ot=this._rebound(W.y,-tt.y);return new et(bt,Ot)},_rebound:function(u,v){return u+v>0?Math.round(u-v)/2:Math.max(0,Math.ceil(u))-Math.max(0,Math.floor(v))},_limitZoom:function(u){var v=this.getMinZoom(),M=this.getMaxZoom(),P=ke.any3d?this.options.zoomSnap:1;return P&&(u=Math.round(u/P)*P),Math.max(v,Math.min(M,u))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){nn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(u,v){var M=this._getCenterOffset(u)._trunc();return(v&&v.animate)!==!0&&!this.getSize().contains(M)?!1:(this.panBy(M,v),!0)},_createAnimProxy:function(){var u=this._proxy=Me("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(u),this.on("zoomanim",function(v){var M=Ut,P=this._proxy.style[M];ai(this._proxy,this.project(v.center,v.zoom),this.getZoomScale(v.zoom,1)),P===this._proxy.style[M]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Oe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var u=this.getCenter(),v=this.getZoom();ai(this._proxy,this.project(u,v),this.getZoomScale(v,1))},_catchTransitionEnd:function(u){this._animatingZoom&&u.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(u,v,M){if(this._animatingZoom)return!0;if(M=M||{},!this._zoomAnimated||M.animate===!1||this._nothingToAnimate()||Math.abs(v-this._zoom)>this.options.zoomAnimationThreshold)return!1;var P=this.getZoomScale(v),W=this._getCenterOffset(u)._divideBy(1-1/P);return M.animate!==!0&&!this.getSize().contains(W)?!1:(Q(function(){this._moveStart(!0,M.noMoveStart||!1)._animateZoom(u,v,!0)},this),!0)},_animateZoom:function(u,v,M,P){this._mapPane&&(M&&(this._animatingZoom=!0,this._animateToCenter=u,this._animateToZoom=v,ze(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:u,zoom:v,noUpdate:P}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&nn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function gl(u,v){return new yn(u,v)}var Vi=ut.extend({options:{position:"topright"},initialize:function(u){R(this,u)},getPosition:function(){return this.options.position},setPosition:function(u){var v=this._map;return v&&v.removeControl(this),this.options.position=u,v&&v.addControl(this),this},getContainer:function(){return this._container},addTo:function(u){this.remove(),this._map=u;var v=this._container=this.onAdd(u),M=this.getPosition(),P=u._controlCorners[M];return ze(v,"leaflet-control"),M.indexOf("bottom")!==-1?P.insertBefore(v,P.firstChild):P.appendChild(v),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Oe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(u){this._map&&u&&u.screenX>0&&u.screenY>0&&this._map.getContainer().focus()}}),ds=function(u){return new Vi(u)};yn.include({addControl:function(u){return u.addTo(this),this},removeControl:function(u){return u.remove(),this},_initControlPos:function(){var u=this._controlCorners={},v="leaflet-",M=this._controlContainer=Me("div",v+"control-container",this._container);function P(W,tt){var bt=v+W+" "+v+tt;u[W+tt]=Me("div",bt,M)}P("top","left"),P("top","right"),P("bottom","left"),P("bottom","right")},_clearControlPos:function(){for(var u in this._controlCorners)Oe(this._controlCorners[u]);Oe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Yi=Vi.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(u,v,M,P){return M<P?-1:P<M?1:0}},initialize:function(u,v,M){R(this,M),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var P in u)this._addLayer(u[P],P);for(P in v)this._addLayer(v[P],P,!0)},onAdd:function(u){this._initLayout(),this._update(),this._map=u,u.on("zoomend",this._checkDisabledLayers,this);for(var v=0;v<this._layers.length;v++)this._layers[v].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(u){return Vi.prototype.addTo.call(this,u),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(u,v){return this._addLayer(u,v),this._map?this._update():this},addOverlay:function(u,v){return this._addLayer(u,v,!0),this._map?this._update():this},removeLayer:function(u){u.off("add remove",this._onLayerChange,this);var v=this._getLayer(f(u));return v&&this._layers.splice(this._layers.indexOf(v),1),this._map?this._update():this},expand:function(){ze(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var u=this._map.getSize().y-(this._container.offsetTop+50);return u<this._section.clientHeight?(ze(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=u+"px"):nn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return nn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var u="leaflet-control-layers",v=this._container=Me("div",u),M=this.options.collapsed;v.setAttribute("aria-haspopup",!0),hr(v),Rs(v);var P=this._section=Me("section",u+"-list");M&&(this._map.on("click",this.collapse,this),on(v,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var W=this._layersLink=Me("a",u+"-toggle",v);W.href="#",W.title="Layers",W.setAttribute("role","button"),on(W,{keydown:function(tt){tt.keyCode===13&&this._expandSafely()},click:function(tt){ui(tt),this._expandSafely()}},this),M||this.expand(),this._baseLayersList=Me("div",u+"-base",P),this._separator=Me("div",u+"-separator",P),this._overlaysList=Me("div",u+"-overlays",P),v.appendChild(P)},_getLayer:function(u){for(var v=0;v<this._layers.length;v++)if(this._layers[v]&&f(this._layers[v].layer)===u)return this._layers[v]},_addLayer:function(u,v,M){this._map&&u.on("add remove",this._onLayerChange,this),this._layers.push({layer:u,name:v,overlay:M}),this.options.sortLayers&&this._layers.sort(o(function(P,W){return this.options.sortFunction(P.layer,W.layer,P.name,W.name)},this)),this.options.autoZIndex&&u.setZIndex&&(this._lastZIndex++,u.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ve(this._baseLayersList),Ve(this._overlaysList),this._layerControlInputs=[];var u,v,M,P,W=0;for(M=0;M<this._layers.length;M++)P=this._layers[M],this._addItem(P),v=v||P.overlay,u=u||!P.overlay,W+=P.overlay?0:1;return this.options.hideSingleBase&&(u=u&&W>1,this._baseLayersList.style.display=u?"":"none"),this._separator.style.display=v&&u?"":"none",this},_onLayerChange:function(u){this._handlingClick||this._update();var v=this._getLayer(f(u.target)),M=v.overlay?u.type==="add"?"overlayadd":"overlayremove":u.type==="add"?"baselayerchange":null;M&&this._map.fire(M,v)},_createRadioElement:function(u,v){var M='<input type="radio" class="leaflet-control-layers-selector" name="'+u+'"'+(v?' checked="checked"':"")+"/>",P=document.createElement("div");return P.innerHTML=M,P.firstChild},_addItem:function(u){var v=document.createElement("label"),M=this._map.hasLayer(u.layer),P;u.overlay?(P=document.createElement("input"),P.type="checkbox",P.className="leaflet-control-layers-selector",P.defaultChecked=M):P=this._createRadioElement("leaflet-base-layers_"+f(this),M),this._layerControlInputs.push(P),P.layerId=f(u.layer),on(P,"click",this._onInputClick,this);var W=document.createElement("span");W.innerHTML=" "+u.name;var tt=document.createElement("span");v.appendChild(tt),tt.appendChild(P),tt.appendChild(W);var bt=u.overlay?this._overlaysList:this._baseLayersList;return bt.appendChild(v),this._checkDisabledLayers(),v},_onInputClick:function(){if(!this._preventClick){var u=this._layerControlInputs,v,M,P=[],W=[];this._handlingClick=!0;for(var tt=u.length-1;tt>=0;tt--)v=u[tt],M=this._getLayer(v.layerId).layer,v.checked?P.push(M):v.checked||W.push(M);for(tt=0;tt<W.length;tt++)this._map.hasLayer(W[tt])&&this._map.removeLayer(W[tt]);for(tt=0;tt<P.length;tt++)this._map.hasLayer(P[tt])||this._map.addLayer(P[tt]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var u=this._layerControlInputs,v,M,P=this._map.getZoom(),W=u.length-1;W>=0;W--)v=u[W],M=this._getLayer(v.layerId).layer,v.disabled=M.options.minZoom!==void 0&&P<M.options.minZoom||M.options.maxZoom!==void 0&&P>M.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var u=this._section;this._preventClick=!0,on(u,"click",ui),this.expand();var v=this;setTimeout(function(){Gn(u,"click",ui),v._preventClick=!1})}}),Fu=function(u,v,M){return new Yi(u,v,M)},Oi=Vi.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(u){var v="leaflet-control-zoom",M=Me("div",v+" leaflet-bar"),P=this.options;return this._zoomInButton=this._createButton(P.zoomInText,P.zoomInTitle,v+"-in",M,this._zoomIn),this._zoomOutButton=this._createButton(P.zoomOutText,P.zoomOutTitle,v+"-out",M,this._zoomOut),this._updateDisabled(),u.on("zoomend zoomlevelschange",this._updateDisabled,this),M},onRemove:function(u){u.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(u){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(u.shiftKey?3:1))},_zoomOut:function(u){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(u.shiftKey?3:1))},_createButton:function(u,v,M,P,W){var tt=Me("a",M,P);return tt.innerHTML=u,tt.href="#",tt.title=v,tt.setAttribute("role","button"),tt.setAttribute("aria-label",v),hr(tt),on(tt,"click",Ds),on(tt,"click",W,this),on(tt,"click",this._refocusOnMap,this),tt},_updateDisabled:function(){var u=this._map,v="leaflet-disabled";nn(this._zoomInButton,v),nn(this._zoomOutButton,v),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||u._zoom===u.getMinZoom())&&(ze(this._zoomOutButton,v),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||u._zoom===u.getMaxZoom())&&(ze(this._zoomInButton,v),this._zoomInButton.setAttribute("aria-disabled","true"))}});yn.mergeOptions({zoomControl:!0}),yn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Oi,this.addControl(this.zoomControl))});var vl=function(u){return new Oi(u)},nc=Vi.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(u){var v="leaflet-control-scale",M=Me("div",v),P=this.options;return this._addScales(P,v+"-line",M),u.on(P.updateWhenIdle?"moveend":"move",this._update,this),u.whenReady(this._update,this),M},onRemove:function(u){u.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(u,v,M){u.metric&&(this._mScale=Me("div",v,M)),u.imperial&&(this._iScale=Me("div",v,M))},_update:function(){var u=this._map,v=u.getSize().y/2,M=u.distance(u.containerPointToLatLng([0,v]),u.containerPointToLatLng([this.options.maxWidth,v]));this._updateScales(M)},_updateScales:function(u){this.options.metric&&u&&this._updateMetric(u),this.options.imperial&&u&&this._updateImperial(u)},_updateMetric:function(u){var v=this._getRoundNum(u),M=v<1e3?v+" m":v/1e3+" km";this._updateScale(this._mScale,M,v/u)},_updateImperial:function(u){var v=u*3.2808399,M,P,W;v>5280?(M=v/5280,P=this._getRoundNum(M),this._updateScale(this._iScale,P+" mi",P/M)):(W=this._getRoundNum(v),this._updateScale(this._iScale,W+" ft",W/v))},_updateScale:function(u,v,M){u.style.width=Math.round(this.options.maxWidth*M)+"px",u.innerHTML=v},_getRoundNum:function(u){var v=Math.pow(10,(Math.floor(u)+"").length-1),M=u/v;return M=M>=10?10:M>=5?5:M>=3?3:M>=2?2:1,v*M}}),ic=function(u){return new nc(u)},Ra='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Va=Vi.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ke.inlineSvg?Ra+" ":"")+"Leaflet</a>"},initialize:function(u){R(this,u),this._attributions={}},onAdd:function(u){u.attributionControl=this,this._container=Me("div","leaflet-control-attribution"),hr(this._container);for(var v in u._layers)u._layers[v].getAttribution&&this.addAttribution(u._layers[v].getAttribution());return this._update(),u.on("layeradd",this._addAttribution,this),this._container},onRemove:function(u){u.off("layeradd",this._addAttribution,this)},_addAttribution:function(u){u.layer.getAttribution&&(this.addAttribution(u.layer.getAttribution()),u.layer.once("remove",function(){this.removeAttribution(u.layer.getAttribution())},this))},setPrefix:function(u){return this.options.prefix=u,this._update(),this},addAttribution:function(u){return u?(this._attributions[u]||(this._attributions[u]=0),this._attributions[u]++,this._update(),this):this},removeAttribution:function(u){return u?(this._attributions[u]&&(this._attributions[u]--,this._update()),this):this},_update:function(){if(this._map){var u=[];for(var v in this._attributions)this._attributions[v]&&u.push(v);var M=[];this.options.prefix&&M.push(this.options.prefix),u.length&&M.push(u.join(", ")),this._container.innerHTML=M.join(' <span aria-hidden="true">|</span> ')}}});yn.mergeOptions({attributionControl:!0}),yn.addInitHook(function(){this.options.attributionControl&&new Va().addTo(this)});var Zi=function(u){return new Va(u)};Vi.Layers=Yi,Vi.Zoom=Oi,Vi.Scale=nc,Vi.Attribution=Va,ds.layers=Fu,ds.zoom=vl,ds.scale=ic,ds.attribution=Zi;var Hi=ut.extend({initialize:function(u){this._map=u},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Hi.addTo=function(u,v){return u.addHandler(v,this),this};var jc={Events:j},ku=ke.touch?"touchstart mousedown":"mousedown",mo=K.extend({options:{clickTolerance:3},initialize:function(u,v,M,P){R(this,P),this._element=u,this._dragStartTarget=v||u,this._preventOutline=M},enable:function(){this._enabled||(on(this._dragStartTarget,ku,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(mo._dragging===this&&this.finishDrag(!0),Gn(this._dragStartTarget,ku,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(u){if(this._enabled&&(this._moved=!1,!Kn(this._element,"leaflet-zoom-anim"))){if(u.touches&&u.touches.length!==1){mo._dragging===this&&this.finishDrag();return}if(!(mo._dragging||u.shiftKey||u.which!==1&&u.button!==1&&!u.touches)&&(mo._dragging=this,this._preventOutline&&hs(this._element),Es(),Qn(),!this._moving)){this.fire("down");var v=u.touches?u.touches[0]:u,M=Gs(this._element);this._startPoint=new et(v.clientX,v.clientY),this._startPos=Mn(this._element),this._parentScale=uo(M);var P=u.type==="mousedown";on(document,P?"mousemove":"touchmove",this._onMove,this),on(document,P?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(u){if(this._enabled){if(u.touches&&u.touches.length>1){this._moved=!0;return}var v=u.touches&&u.touches.length===1?u.touches[0]:u,M=new et(v.clientX,v.clientY)._subtract(this._startPoint);!M.x&&!M.y||Math.abs(M.x)+Math.abs(M.y)<this.options.clickTolerance||(M.x/=this._parentScale.x,M.y/=this._parentScale.y,ui(u),this._moved||(this.fire("dragstart"),this._moved=!0,ze(document.body,"leaflet-dragging"),this._lastTarget=u.target||u.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ze(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(M),this._moving=!0,this._lastEvent=u,this._updatePosition())}},_updatePosition:function(){var u={originalEvent:this._lastEvent};this.fire("predrag",u),Fn(this._element,this._newPos),this.fire("drag",u)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(u){nn(document.body,"leaflet-dragging"),this._lastTarget&&(nn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Gn(document,"mousemove touchmove",this._onMove,this),Gn(document,"mouseup touchend touchcancel",this._onUp,this),ki(),ci();var v=this._moved&&this._moving;this._moving=!1,mo._dragging=!1,v&&this.fire("dragend",{noInertia:u,distance:this._newPos.distanceTo(this._startPos)})}});function Vu(u,v,M){var P,W=[1,4,2,8],tt,bt,Ot,Yt,ye,Ne,$e,Tn;for(tt=0,Ne=u.length;tt<Ne;tt++)u[tt]._code=ps(u[tt],v);for(Ot=0;Ot<4;Ot++){for($e=W[Ot],P=[],tt=0,Ne=u.length,bt=Ne-1;tt<Ne;bt=tt++)Yt=u[tt],ye=u[bt],Yt._code&$e?ye._code&$e||(Tn=qc(ye,Yt,$e,v,M),Tn._code=ps(Tn,v),P.push(Tn)):(ye._code&$e&&(Tn=qc(ye,Yt,$e,v,M),Tn._code=ps(Tn,v),P.push(Tn)),P.push(Yt));u=P}return u}function Hu(u,v){var M,P,W,tt,bt,Ot,Yt,ye,Ne;if(!u||u.length===0)throw new Error("latlngs not passed");ms(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var $e=ht([0,0]),Tn=mt(u),Sa=Tn.getNorthWest().distanceTo(Tn.getSouthWest())*Tn.getNorthEast().distanceTo(Tn.getNorthWest());Sa<1700&&($e=Gu(u));var wi=u.length,Wa=[];for(M=0;M<wi;M++){var Jn=ht(u[M]);Wa.push(v.project(ht([Jn.lat-$e.lat,Jn.lng-$e.lng])))}for(Ot=Yt=ye=0,M=0,P=wi-1;M<wi;P=M++)W=Wa[M],tt=Wa[P],bt=W.y*tt.x-tt.y*W.x,Yt+=(W.x+tt.x)*bt,ye+=(W.y+tt.y)*bt,Ot+=bt*3;Ot===0?Ne=Wa[0]:Ne=[Yt/Ot,ye/Ot];var $n=v.unproject(lt(Ne));return ht([$n.lat+$e.lat,$n.lng+$e.lng])}function Gu(u){for(var v=0,M=0,P=0,W=0;W<u.length;W++){var tt=ht(u[W]);v+=tt.lat,M+=tt.lng,P++}return ht([v/P,M/P])}var Wc={__proto__:null,clipPolygon:Vu,polygonCenter:Hu,centroid:Gu};function ju(u,v){if(!v||!u.length)return u.slice();var M=v*v;return u=go(u,M),u=qu(u,M),u}function Wu(u,v,M){return Math.sqrt(yl(u,v,M,!0))}function yd(u,v,M){return yl(u,v,M)}function qu(u,v){var M=u.length,P=typeof Uint8Array<"u"?Uint8Array:Array,W=new P(M);W[0]=W[M-1]=1,Xu(u,W,v,0,M-1);var tt,bt=[];for(tt=0;tt<M;tt++)W[tt]&&bt.push(u[tt]);return bt}function Xu(u,v,M,P,W){var tt=0,bt,Ot,Yt;for(Ot=P+1;Ot<=W-1;Ot++)Yt=yl(u[Ot],u[P],u[W],!0),Yt>tt&&(bt=Ot,tt=Yt);tt>M&&(v[bt]=1,Xu(u,v,M,P,bt),Xu(u,v,M,bt,W))}function go(u,v){for(var M=[u[0]],P=1,W=0,tt=u.length;P<tt;P++)vo(u[P],u[W])>v&&(M.push(u[P]),W=P);return W<tt-1&&M.push(u[tt-1]),M}var Yu;function _d(u,v,M,P,W){var tt=P?Yu:ps(u,M),bt=ps(v,M),Ot,Yt,ye;for(Yu=bt;;){if(!(tt|bt))return[u,v];if(tt&bt)return!1;Ot=tt||bt,Yt=qc(u,v,Ot,M,W),ye=ps(Yt,M),Ot===tt?(u=Yt,tt=ye):(v=Yt,bt=ye)}}function qc(u,v,M,P,W){var tt=v.x-u.x,bt=v.y-u.y,Ot=P.min,Yt=P.max,ye,Ne;return M&8?(ye=u.x+tt*(Yt.y-u.y)/bt,Ne=Yt.y):M&4?(ye=u.x+tt*(Ot.y-u.y)/bt,Ne=Ot.y):M&2?(ye=Yt.x,Ne=u.y+bt*(Yt.x-u.x)/tt):M&1&&(ye=Ot.x,Ne=u.y+bt*(Ot.x-u.x)/tt),new et(ye,Ne,W)}function ps(u,v){var M=0;return u.x<v.min.x?M|=1:u.x>v.max.x&&(M|=2),u.y<v.min.y?M|=4:u.y>v.max.y&&(M|=8),M}function vo(u,v){var M=v.x-u.x,P=v.y-u.y;return M*M+P*P}function yl(u,v,M,P){var W=v.x,tt=v.y,bt=M.x-W,Ot=M.y-tt,Yt=bt*bt+Ot*Ot,ye;return Yt>0&&(ye=((u.x-W)*bt+(u.y-tt)*Ot)/Yt,ye>1?(W=M.x,tt=M.y):ye>0&&(W+=bt*ye,tt+=Ot*ye)),bt=u.x-W,Ot=u.y-tt,P?bt*bt+Ot*Ot:new et(W,tt)}function ms(u){return!I(u[0])||typeof u[0][0]!="object"&&typeof u[0][0]<"u"}function Go(u){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ms(u)}function yo(u,v){var M,P,W,tt,bt,Ot,Yt,ye;if(!u||u.length===0)throw new Error("latlngs not passed");ms(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var Ne=ht([0,0]),$e=mt(u),Tn=$e.getNorthWest().distanceTo($e.getSouthWest())*$e.getNorthEast().distanceTo($e.getNorthWest());Tn<1700&&(Ne=Gu(u));var Sa=u.length,wi=[];for(M=0;M<Sa;M++){var Wa=ht(u[M]);wi.push(v.project(ht([Wa.lat-Ne.lat,Wa.lng-Ne.lng])))}for(M=0,P=0;M<Sa-1;M++)P+=wi[M].distanceTo(wi[M+1])/2;if(P===0)ye=wi[0];else for(M=0,tt=0;M<Sa-1;M++)if(bt=wi[M],Ot=wi[M+1],W=bt.distanceTo(Ot),tt+=W,tt>P){Yt=(tt-P)/W,ye=[Ot.x-Yt*(Ot.x-bt.x),Ot.y-Yt*(Ot.y-bt.y)];break}var Jn=v.unproject(lt(ye));return ht([Jn.lat+Ne.lat,Jn.lng+Ne.lng])}var _l={__proto__:null,simplify:ju,pointToSegmentDistance:Wu,closestPointOnSegment:yd,clipSegment:_d,_getEdgeIntersection:qc,_getBitCode:ps,_sqClosestPointOnSegment:yl,isFlat:ms,_flat:Go,polylineCenter:yo},aa={project:function(u){return new et(u.lng,u.lat)},unproject:function(u){return new xt(u.y,u.x)},bounds:new G([-180,-90],[180,90])},xl={R:6378137,R_MINOR:6356752314245179e-9,bounds:new G([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(u){var v=Math.PI/180,M=this.R,P=u.lat*v,W=this.R_MINOR/M,tt=Math.sqrt(1-W*W),bt=tt*Math.sin(P),Ot=Math.tan(Math.PI/4-P/2)/Math.pow((1-bt)/(1+bt),tt/2);return P=-M*Math.log(Math.max(Ot,1e-10)),new et(u.lng*v*M,P)},unproject:function(u){for(var v=180/Math.PI,M=this.R,P=this.R_MINOR/M,W=Math.sqrt(1-P*P),tt=Math.exp(-u.y/M),bt=Math.PI/2-2*Math.atan(tt),Ot=0,Yt=.1,ye;Ot<15&&Math.abs(Yt)>1e-7;Ot++)ye=W*Math.sin(bt),ye=Math.pow((1-ye)/(1+ye),W/2),Yt=Math.PI/2-2*Math.atan(tt*ye)-bt,bt+=Yt;return new xt(bt*v,u.x*v/M)}},Zf={__proto__:null,LonLat:aa,Mercator:xl,SphericalMercator:te},Zu=a({},At,{code:"EPSG:3395",projection:xl,transformation:(function(){var u=.5/(Math.PI*xl.R);return ne(u,.5,-u,.5)})()}),Sl=a({},At,{code:"EPSG:4326",projection:aa,transformation:ne(1/180,1,-1/180,.5)}),jo=a({},_t,{projection:aa,transformation:ne(1,0,-1,0),scale:function(u){return Math.pow(2,u)},zoom:function(u){return Math.log(u)/Math.LN2},distance:function(u,v){var M=v.lng-u.lng,P=v.lat-u.lat;return Math.sqrt(M*M+P*P)},infinite:!0});_t.Earth=At,_t.EPSG3395=Zu,_t.EPSG3857=Se,_t.EPSG900913=Nt,_t.EPSG4326=Sl,_t.Simple=jo;var gs=K.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(u){return u.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(u){return u&&u.removeLayer(this),this},getPane:function(u){return this._map.getPane(u?this.options[u]||u:this.options.pane)},addInteractiveTarget:function(u){return this._map._targets[f(u)]=this,this},removeInteractiveTarget:function(u){return delete this._map._targets[f(u)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(u){var v=u.target;if(v.hasLayer(this)){if(this._map=v,this._zoomAnimated=v._zoomAnimated,this.getEvents){var M=this.getEvents();v.on(M,this),this.once("remove",function(){v.off(M,this)},this)}this.onAdd(v),this.fire("add"),v.fire("layeradd",{layer:this})}}});yn.include({addLayer:function(u){if(!u._layerAdd)throw new Error("The provided object is not a Layer.");var v=f(u);return this._layers[v]?this:(this._layers[v]=u,u._mapToAdd=this,u.beforeAdd&&u.beforeAdd(this),this.whenReady(u._layerAdd,u),this)},removeLayer:function(u){var v=f(u);return this._layers[v]?(this._loaded&&u.onRemove(this),delete this._layers[v],this._loaded&&(this.fire("layerremove",{layer:u}),u.fire("remove")),u._map=u._mapToAdd=null,this):this},hasLayer:function(u){return f(u)in this._layers},eachLayer:function(u,v){for(var M in this._layers)u.call(v,this._layers[M]);return this},_addLayers:function(u){u=u?I(u)?u:[u]:[];for(var v=0,M=u.length;v<M;v++)this.addLayer(u[v])},_addZoomLimit:function(u){(!isNaN(u.options.maxZoom)||!isNaN(u.options.minZoom))&&(this._zoomBoundLayers[f(u)]=u,this._updateZoomLevels())},_removeZoomLimit:function(u){var v=f(u);this._zoomBoundLayers[v]&&(delete this._zoomBoundLayers[v],this._updateZoomLevels())},_updateZoomLevels:function(){var u=1/0,v=-1/0,M=this._getZoomSpan();for(var P in this._zoomBoundLayers){var W=this._zoomBoundLayers[P].options;u=W.minZoom===void 0?u:Math.min(u,W.minZoom),v=W.maxZoom===void 0?v:Math.max(v,W.maxZoom)}this._layersMaxZoom=v===-1/0?void 0:v,this._layersMinZoom=u===1/0?void 0:u,M!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var bl=gs.extend({initialize:function(u,v){R(this,v),this._layers={};var M,P;if(u)for(M=0,P=u.length;M<P;M++)this.addLayer(u[M])},addLayer:function(u){var v=this.getLayerId(u);return this._layers[v]=u,this._map&&this._map.addLayer(u),this},removeLayer:function(u){var v=u in this._layers?u:this.getLayerId(u);return this._map&&this._layers[v]&&this._map.removeLayer(this._layers[v]),delete this._layers[v],this},hasLayer:function(u){var v=typeof u=="number"?u:this.getLayerId(u);return v in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(u){var v=Array.prototype.slice.call(arguments,1),M,P;for(M in this._layers)P=this._layers[M],P[u]&&P[u].apply(P,v);return this},onAdd:function(u){this.eachLayer(u.addLayer,u)},onRemove:function(u){this.eachLayer(u.removeLayer,u)},eachLayer:function(u,v){for(var M in this._layers)u.call(v,this._layers[M]);return this},getLayer:function(u){return this._layers[u]},getLayers:function(){var u=[];return this.eachLayer(u.push,u),u},setZIndex:function(u){return this.invoke("setZIndex",u)},getLayerId:function(u){return f(u)}}),Os=function(u,v){return new bl(u,v)},pr=bl.extend({addLayer:function(u){return this.hasLayer(u)?this:(u.addEventParent(this),bl.prototype.addLayer.call(this,u),this.fire("layeradd",{layer:u}))},removeLayer:function(u){return this.hasLayer(u)?(u in this._layers&&(u=this._layers[u]),u.removeEventParent(this),bl.prototype.removeLayer.call(this,u),this.fire("layerremove",{layer:u})):this},setStyle:function(u){return this.invoke("setStyle",u)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var u=new ft;for(var v in this._layers){var M=this._layers[v];u.extend(M.getBounds?M.getBounds():M.getLatLng())}return u}}),Ku=function(u,v){return new pr(u,v)},mr=ut.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(u){R(this,u)},createIcon:function(u){return this._createIcon("icon",u)},createShadow:function(u){return this._createIcon("shadow",u)},_createIcon:function(u,v){var M=this._getIconUrl(u);if(!M){if(u==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var P=this._createImg(M,v&&v.tagName==="IMG"?v:null);return this._setIconStyles(P,u),(this.options.crossOrigin||this.options.crossOrigin==="")&&(P.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),P},_setIconStyles:function(u,v){var M=this.options,P=M[v+"Size"];typeof P=="number"&&(P=[P,P]);var W=lt(P),tt=lt(v==="shadow"&&M.shadowAnchor||M.iconAnchor||W&&W.divideBy(2,!0));u.className="leaflet-marker-"+v+" "+(M.className||""),tt&&(u.style.marginLeft=-tt.x+"px",u.style.marginTop=-tt.y+"px"),W&&(u.style.width=W.x+"px",u.style.height=W.y+"px")},_createImg:function(u,v){return v=v||document.createElement("img"),v.src=u,v},_getIconUrl:function(u){return ke.retina&&this.options[u+"RetinaUrl"]||this.options[u+"Url"]}});function ac(u){return new mr(u)}var Ml=mr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(u){return typeof Ml.imagePath!="string"&&(Ml.imagePath=this._detectIconPath()),(this.options.imagePath||Ml.imagePath)+mr.prototype._getIconUrl.call(this,u)},_stripUrl:function(u){var v=function(M,P,W){var tt=P.exec(M);return tt&&tt[W]};return u=v(u,/^url\((['"])?(.+)\1\)$/,2),u&&v(u,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var u=Me("div","leaflet-default-icon-path",document.body),v=Pe(u,"background-image")||Pe(u,"backgroundImage");if(document.body.removeChild(u),v=this._stripUrl(v),v)return v;var M=document.querySelector('link[href$="leaflet.css"]');return M?M.href.substring(0,M.href.length-11-1):""}}),Tl=Hi.extend({initialize:function(u){this._marker=u},addHooks:function(){var u=this._marker._icon;this._draggable||(this._draggable=new mo(u,u,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ze(u,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&nn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(u){var v=this._marker,M=v._map,P=this._marker.options.autoPanSpeed,W=this._marker.options.autoPanPadding,tt=Mn(v._icon),bt=M.getPixelBounds(),Ot=M.getPixelOrigin(),Yt=nt(bt.min._subtract(Ot).add(W),bt.max._subtract(Ot).subtract(W));if(!Yt.contains(tt)){var ye=lt((Math.max(Yt.max.x,tt.x)-Yt.max.x)/(bt.max.x-Yt.max.x)-(Math.min(Yt.min.x,tt.x)-Yt.min.x)/(bt.min.x-Yt.min.x),(Math.max(Yt.max.y,tt.y)-Yt.max.y)/(bt.max.y-Yt.max.y)-(Math.min(Yt.min.y,tt.y)-Yt.min.y)/(bt.min.y-Yt.min.y)).multiplyBy(P);M.panBy(ye,{animate:!1}),this._draggable._newPos._add(ye),this._draggable._startPos._add(ye),Fn(v._icon,this._draggable._newPos),this._onDrag(u),this._panRequest=Q(this._adjustPan.bind(this,u))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(u){this._marker.options.autoPan&&(J(this._panRequest),this._panRequest=Q(this._adjustPan.bind(this,u)))},_onDrag:function(u){var v=this._marker,M=v._shadow,P=Mn(v._icon),W=v._map.layerPointToLatLng(P);M&&Fn(M,P),v._latlng=W,u.latlng=W,u.oldLatLng=this._oldLatLng,v.fire("move",u).fire("drag",u)},_onDragEnd:function(u){J(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",u)}}),sc=gs.extend({options:{icon:new Ml,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(u,v){R(this,v),this._latlng=ht(u)},onAdd:function(u){this._zoomAnimated=this._zoomAnimated&&u.options.markerZoomAnimation,this._zoomAnimated&&u.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(u){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&u.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(u){var v=this._latlng;return this._latlng=ht(u),this.update(),this.fire("move",{oldLatLng:v,latlng:this._latlng})},setZIndexOffset:function(u){return this.options.zIndexOffset=u,this.update()},getIcon:function(){return this.options.icon},setIcon:function(u){return this.options.icon=u,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var u=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(u)}return this},_initIcon:function(){var u=this.options,v="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),M=u.icon.createIcon(this._icon),P=!1;M!==this._icon&&(this._icon&&this._removeIcon(),P=!0,u.title&&(M.title=u.title),M.tagName==="IMG"&&(M.alt=u.alt||"")),ze(M,v),u.keyboard&&(M.tabIndex="0",M.setAttribute("role","button")),this._icon=M,u.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&on(M,"focus",this._panOnFocus,this);var W=u.icon.createShadow(this._shadow),tt=!1;W!==this._shadow&&(this._removeShadow(),tt=!0),W&&(ze(W,v),W.alt=""),this._shadow=W,u.opacity<1&&this._updateOpacity(),P&&this.getPane().appendChild(this._icon),this._initInteraction(),W&&tt&&this.getPane(u.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Gn(this._icon,"focus",this._panOnFocus,this),Oe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Oe(this._shadow),this._shadow=null},_setPos:function(u){this._icon&&Fn(this._icon,u),this._shadow&&Fn(this._shadow,u),this._zIndex=u.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(u){this._icon&&(this._icon.style.zIndex=this._zIndex+u)},_animateZoom:function(u){var v=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center).round();this._setPos(v)},_initInteraction:function(){if(this.options.interactive&&(ze(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Tl)){var u=this.options.draggable;this.dragging&&(u=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Tl(this),u&&this.dragging.enable()}},setOpacity:function(u){return this.options.opacity=u,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var u=this.options.opacity;this._icon&&je(this._icon,u),this._shadow&&je(this._shadow,u)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var u=this._map;if(u){var v=this.options.icon.options,M=v.iconSize?lt(v.iconSize):lt(0,0),P=v.iconAnchor?lt(v.iconAnchor):lt(0,0);u.panInside(this._latlng,{paddingTopLeft:P,paddingBottomRight:M.subtract(P)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Xc(u,v){return new sc(u,v)}var vs=gs.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(u){this._renderer=u.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(u){return R(this,u),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&u&&Object.prototype.hasOwnProperty.call(u,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),fi=vs.extend({options:{fill:!0,radius:10},initialize:function(u,v){R(this,v),this._latlng=ht(u),this._radius=this.options.radius},setLatLng:function(u){var v=this._latlng;return this._latlng=ht(u),this.redraw(),this.fire("move",{oldLatLng:v,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(u){return this.options.radius=this._radius=u,this.redraw()},getRadius:function(){return this._radius},setStyle:function(u){var v=u&&u.radius||this._radius;return vs.prototype.setStyle.call(this,u),this.setRadius(v),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var u=this._radius,v=this._radiusY||u,M=this._clickTolerance(),P=[u+M,v+M];this._pxBounds=new G(this._point.subtract(P),this._point.add(P))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(u){return u.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function xd(u,v){return new fi(u,v)}var Qu=fi.extend({initialize:function(u,v,M){if(typeof v=="number"&&(v=a({},M,{radius:v})),R(this,v),this._latlng=ht(u),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(u){return this._mRadius=u,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var u=[this._radius,this._radiusY||this._radius];return new ft(this._map.layerPointToLatLng(this._point.subtract(u)),this._map.layerPointToLatLng(this._point.add(u)))},setStyle:vs.prototype.setStyle,_project:function(){var u=this._latlng.lng,v=this._latlng.lat,M=this._map,P=M.options.crs;if(P.distance===At.distance){var W=Math.PI/180,tt=this._mRadius/At.R/W,bt=M.project([v+tt,u]),Ot=M.project([v-tt,u]),Yt=bt.add(Ot).divideBy(2),ye=M.unproject(Yt).lat,Ne=Math.acos((Math.cos(tt*W)-Math.sin(v*W)*Math.sin(ye*W))/(Math.cos(v*W)*Math.cos(ye*W)))/W;(isNaN(Ne)||Ne===0)&&(Ne=tt/Math.cos(Math.PI/180*v)),this._point=Yt.subtract(M.getPixelOrigin()),this._radius=isNaN(Ne)?0:Yt.x-M.project([ye,u-Ne]).x,this._radiusY=Yt.y-bt.y}else{var $e=P.unproject(P.project(this._latlng).subtract([this._mRadius,0]));this._point=M.latLngToLayerPoint(this._latlng),this._radius=this._point.x-M.latLngToLayerPoint($e).x}this._updateBounds()}});function Kf(u,v,M){return new Qu(u,v,M)}var Ns=vs.extend({options:{smoothFactor:1,noClip:!1},initialize:function(u,v){R(this,v),this._setLatLngs(u)},getLatLngs:function(){return this._latlngs},setLatLngs:function(u){return this._setLatLngs(u),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(u){for(var v=1/0,M=null,P=yl,W,tt,bt=0,Ot=this._parts.length;bt<Ot;bt++)for(var Yt=this._parts[bt],ye=1,Ne=Yt.length;ye<Ne;ye++){W=Yt[ye-1],tt=Yt[ye];var $e=P(u,W,tt,!0);$e<v&&(v=$e,M=P(u,W,tt))}return M&&(M.distance=Math.sqrt(v)),M},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return yo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(u,v){return v=v||this._defaultShape(),u=ht(u),v.push(u),this._bounds.extend(u),this.redraw()},_setLatLngs:function(u){this._bounds=new ft,this._latlngs=this._convertLatLngs(u)},_defaultShape:function(){return ms(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(u){for(var v=[],M=ms(u),P=0,W=u.length;P<W;P++)M?(v[P]=ht(u[P]),this._bounds.extend(v[P])):v[P]=this._convertLatLngs(u[P]);return v},_project:function(){var u=new G;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,u),this._bounds.isValid()&&u.isValid()&&(this._rawPxBounds=u,this._updateBounds())},_updateBounds:function(){var u=this._clickTolerance(),v=new et(u,u);this._rawPxBounds&&(this._pxBounds=new G([this._rawPxBounds.min.subtract(v),this._rawPxBounds.max.add(v)]))},_projectLatlngs:function(u,v,M){var P=u[0]instanceof xt,W=u.length,tt,bt;if(P){for(bt=[],tt=0;tt<W;tt++)bt[tt]=this._map.latLngToLayerPoint(u[tt]),M.extend(bt[tt]);v.push(bt)}else for(tt=0;tt<W;tt++)this._projectLatlngs(u[tt],v,M)},_clipPoints:function(){var u=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}var v=this._parts,M,P,W,tt,bt,Ot,Yt;for(M=0,W=0,tt=this._rings.length;M<tt;M++)for(Yt=this._rings[M],P=0,bt=Yt.length;P<bt-1;P++)Ot=_d(Yt[P],Yt[P+1],u,P,!0),Ot&&(v[W]=v[W]||[],v[W].push(Ot[0]),(Ot[1]!==Yt[P+1]||P===bt-2)&&(v[W].push(Ot[1]),W++))}},_simplifyPoints:function(){for(var u=this._parts,v=this.options.smoothFactor,M=0,P=u.length;M<P;M++)u[M]=ju(u[M],v)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(u,v){var M,P,W,tt,bt,Ot,Yt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(M=0,tt=this._parts.length;M<tt;M++)for(Ot=this._parts[M],P=0,bt=Ot.length,W=bt-1;P<bt;W=P++)if(!(!v&&P===0)&&Wu(u,Ot[W],Ot[P])<=Yt)return!0;return!1}});function Wo(u,v){return new Ns(u,v)}Ns._flat=Go;var Al=Ns.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Hu(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(u){var v=Ns.prototype._convertLatLngs.call(this,u),M=v.length;return M>=2&&v[0]instanceof xt&&v[0].equals(v[M-1])&&v.pop(),v},_setLatLngs:function(u){Ns.prototype._setLatLngs.call(this,u),ms(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ms(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var u=this._renderer._bounds,v=this.options.weight,M=new et(v,v);if(u=new G(u.min.subtract(M),u.max.add(M)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}for(var P=0,W=this._rings.length,tt;P<W;P++)tt=Vu(this._rings[P],u,!0),tt.length&&this._parts.push(tt)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(u){var v=!1,M,P,W,tt,bt,Ot,Yt,ye;if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(tt=0,Yt=this._parts.length;tt<Yt;tt++)for(M=this._parts[tt],bt=0,ye=M.length,Ot=ye-1;bt<ye;Ot=bt++)P=M[bt],W=M[Ot],P.y>u.y!=W.y>u.y&&u.x<(W.x-P.x)*(u.y-P.y)/(W.y-P.y)+P.x&&(v=!v);return v||Ns.prototype._containsPoint.call(this,u,!0)}});function Sd(u,v){return new Al(u,v)}var $a=pr.extend({initialize:function(u,v){R(this,v),this._layers={},u&&this.addData(u)},addData:function(u){var v=I(u)?u:u.features,M,P,W;if(v){for(M=0,P=v.length;M<P;M++)W=v[M],(W.geometries||W.geometry||W.features||W.coordinates)&&this.addData(W);return this}var tt=this.options;if(tt.filter&&!tt.filter(u))return this;var bt=hi(u,tt);return bt?(bt.feature=Zc(u),bt.defaultOptions=bt.options,this.resetStyle(bt),tt.onEachFeature&&tt.onEachFeature(u,bt),this.addLayer(bt)):this},resetStyle:function(u){return u===void 0?this.eachLayer(this.resetStyle,this):(u.options=a({},u.defaultOptions),this._setLayerStyle(u,this.options.style),this)},setStyle:function(u){return this.eachLayer(function(v){this._setLayerStyle(v,u)},this)},_setLayerStyle:function(u,v){u.setStyle&&(typeof v=="function"&&(v=v(u.feature)),u.setStyle(v))}});function hi(u,v){var M=u.type==="Feature"?u.geometry:u,P=M?M.coordinates:null,W=[],tt=v&&v.pointToLayer,bt=v&&v.coordsToLatLng||Yc,Ot,Yt,ye,Ne;if(!P&&!M)return null;switch(M.type){case"Point":return Ot=bt(P),El(tt,u,Ot,v);case"MultiPoint":for(ye=0,Ne=P.length;ye<Ne;ye++)Ot=bt(P[ye]),W.push(El(tt,u,Ot,v));return new pr(W);case"LineString":case"MultiLineString":return Yt=rc(P,M.type==="LineString"?0:1,bt),new Ns(Yt,v);case"Polygon":case"MultiPolygon":return Yt=rc(P,M.type==="Polygon"?1:2,bt),new Al(Yt,v);case"GeometryCollection":for(ye=0,Ne=M.geometries.length;ye<Ne;ye++){var $e=hi({geometry:M.geometries[ye],type:"Feature",properties:u.properties},v);$e&&W.push($e)}return new pr(W);case"FeatureCollection":for(ye=0,Ne=M.features.length;ye<Ne;ye++){var Tn=hi(M.features[ye],v);Tn&&W.push(Tn)}return new pr(W);default:throw new Error("Invalid GeoJSON object.")}}function El(u,v,M,P){return u?u(v,M):new sc(M,P&&P.markersInheritOptions&&P)}function Yc(u){return new xt(u[1],u[0],u[2])}function rc(u,v,M){for(var P=[],W=0,tt=u.length,bt;W<tt;W++)bt=v?rc(u[W],v-1,M):(M||Yc)(u[W]),P.push(bt);return P}function oc(u,v){return u=ht(u),u.alt!==void 0?[x(u.lng,v),x(u.lat,v),x(u.alt,v)]:[x(u.lng,v),x(u.lat,v)]}function wl(u,v,M,P){for(var W=[],tt=0,bt=u.length;tt<bt;tt++)W.push(v?wl(u[tt],ms(u[tt])?0:v-1,M,P):oc(u[tt],P));return!v&&M&&W.length>0&&W.push(W[0].slice()),W}function gr(u,v){return u.feature?a({},u.feature,{geometry:v}):Zc(v)}function Zc(u){return u.type==="Feature"||u.type==="FeatureCollection"?u:{type:"Feature",properties:{},geometry:u}}var qo={toGeoJSON:function(u){return gr(this,{type:"Point",coordinates:oc(this.getLatLng(),u)})}};sc.include(qo),Qu.include(qo),fi.include(qo),Ns.include({toGeoJSON:function(u){var v=!ms(this._latlngs),M=wl(this._latlngs,v?1:0,!1,u);return gr(this,{type:(v?"Multi":"")+"LineString",coordinates:M})}}),Al.include({toGeoJSON:function(u){var v=!ms(this._latlngs),M=v&&!ms(this._latlngs[0]),P=wl(this._latlngs,M?2:v?1:0,!0,u);return v||(P=[P]),gr(this,{type:(M?"Multi":"")+"Polygon",coordinates:P})}}),bl.include({toMultiPoint:function(u){var v=[];return this.eachLayer(function(M){v.push(M.toGeoJSON(u).geometry.coordinates)}),gr(this,{type:"MultiPoint",coordinates:v})},toGeoJSON:function(u){var v=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(v==="MultiPoint")return this.toMultiPoint(u);var M=v==="GeometryCollection",P=[];return this.eachLayer(function(W){if(W.toGeoJSON){var tt=W.toGeoJSON(u);if(M)P.push(tt.geometry);else{var bt=Zc(tt);bt.type==="FeatureCollection"?P.push.apply(P,bt.features):P.push(bt)}}}),M?gr(this,{geometries:P,type:"GeometryCollection"}):{type:"FeatureCollection",features:P}}});function Kc(u,v){return new $a(u,v)}var lc=Kc,Ha=gs.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(u,v,M){this._url=u,this._bounds=mt(v),R(this,M)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ze(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Oe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(u){return this.options.opacity=u,this._image&&this._updateOpacity(),this},setStyle:function(u){return u.opacity&&this.setOpacity(u.opacity),this},bringToFront:function(){return this._map&&Je(this._image),this},bringToBack:function(){return this._map&&xn(this._image),this},setUrl:function(u){return this._url=u,this._image&&(this._image.src=u),this},setBounds:function(u){return this._bounds=mt(u),this._map&&this._reset(),this},getEvents:function(){var u={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var u=this._url.tagName==="IMG",v=this._image=u?this._url:Me("img");if(ze(v,"leaflet-image-layer"),this._zoomAnimated&&ze(v,"leaflet-zoom-animated"),this.options.className&&ze(v,this.options.className),v.onselectstart=y,v.onmousemove=y,v.onload=o(this.fire,this,"load"),v.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),u){this._url=v.src;return}v.src=this._url,v.alt=this.options.alt},_animateZoom:function(u){var v=this._map.getZoomScale(u.zoom),M=this._map._latLngBoundsToNewLayerBounds(this._bounds,u.zoom,u.center).min;ai(this._image,M,v)},_reset:function(){var u=this._image,v=new G(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),M=v.getSize();Fn(u,v.min),u.style.width=M.x+"px",u.style.height=M.y+"px"},_updateOpacity:function(){je(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var u=this.options.errorOverlayUrl;u&&this._url!==u&&(this._url=u,this._image.src=u)},getCenter:function(){return this._bounds.getCenter()}}),Ju=function(u,v,M){return new Ha(u,v,M)},_o=Ha.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var u=this._url.tagName==="VIDEO",v=this._image=u?this._url:Me("video");if(ze(v,"leaflet-image-layer"),this._zoomAnimated&&ze(v,"leaflet-zoom-animated"),this.options.className&&ze(v,this.options.className),v.onselectstart=y,v.onmousemove=y,v.onloadeddata=o(this.fire,this,"load"),u){for(var M=v.getElementsByTagName("source"),P=[],W=0;W<M.length;W++)P.push(M[W].src);this._url=M.length>0?P:[v.src];return}I(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(v.style,"objectFit")&&(v.style.objectFit="fill"),v.autoplay=!!this.options.autoplay,v.loop=!!this.options.loop,v.muted=!!this.options.muted,v.playsInline=!!this.options.playsInline;for(var tt=0;tt<this._url.length;tt++){var bt=Me("source");bt.src=this._url[tt],v.appendChild(bt)}}});function cc(u,v,M){return new _o(u,v,M)}var uc=Ha.extend({_initImage:function(){var u=this._image=this._url;ze(u,"leaflet-image-layer"),this._zoomAnimated&&ze(u,"leaflet-zoom-animated"),this.options.className&&ze(u,this.options.className),u.onselectstart=y,u.onmousemove=y}});function ts(u,v,M){return new uc(u,v,M)}var Da=gs.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(u,v){u&&(u instanceof xt||I(u))?(this._latlng=ht(u),R(this,v)):(R(this,u),this._source=v),this.options.content&&(this._content=this.options.content)},openOn:function(u){return u=arguments.length?u:this._source._map,u.hasLayer(this)||u.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(u){return this._map?this.close():(arguments.length?this._source=u:u=this._source,this._prepareOpen(),this.openOn(u._map)),this},onAdd:function(u){this._zoomAnimated=u._zoomAnimated,this._container||this._initLayout(),u._fadeAnimated&&je(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),u._fadeAnimated&&je(this._container,1),this.bringToFront(),this.options.interactive&&(ze(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(u){u._fadeAnimated?(je(this._container,0),this._removeTimeout=setTimeout(o(Oe,void 0,this._container),200)):Oe(this._container),this.options.interactive&&(nn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(u){return this._latlng=ht(u),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(u){return this._content=u,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var u={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Je(this._container),this},bringToBack:function(){return this._map&&xn(this._container),this},_prepareOpen:function(u){var v=this._source;if(!v._map)return!1;if(v instanceof pr){v=null;var M=this._source._layers;for(var P in M)if(M[P]._map){v=M[P];break}if(!v)return!1;this._source=v}if(!u)if(v.getCenter)u=v.getCenter();else if(v.getLatLng)u=v.getLatLng();else if(v.getBounds)u=v.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(u),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var u=this._contentNode,v=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof v=="string")u.innerHTML=v;else{for(;u.hasChildNodes();)u.removeChild(u.firstChild);u.appendChild(v)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var u=this._map.latLngToLayerPoint(this._latlng),v=lt(this.options.offset),M=this._getAnchor();this._zoomAnimated?Fn(this._container,u.add(M)):v=v.add(u).add(M);var P=this._containerBottom=-v.y,W=this._containerLeft=-Math.round(this._containerWidth/2)+v.x;this._container.style.bottom=P+"px",this._container.style.left=W+"px"}},_getAnchor:function(){return[0,0]}});yn.include({_initOverlay:function(u,v,M,P){var W=v;return W instanceof u||(W=new u(P).setContent(v)),M&&W.setLatLng(M),W}}),gs.include({_initOverlay:function(u,v,M,P){var W=M;return W instanceof u?(R(W,P),W._source=this):(W=v&&!P?v:new u(P,this),W.setContent(M)),W}});var La=Da.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(u){return u=arguments.length?u:this._source._map,!u.hasLayer(this)&&u._popup&&u._popup.options.autoClose&&u.removeLayer(u._popup),u._popup=this,Da.prototype.openOn.call(this,u)},onAdd:function(u){Da.prototype.onAdd.call(this,u),u.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof vs||this._source.on("preclick",Ja))},onRemove:function(u){Da.prototype.onRemove.call(this,u),u.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof vs||this._source.off("preclick",Ja))},getEvents:function(){var u=Da.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(u.preclick=this.close),this.options.keepInView&&(u.moveend=this._adjustPan),u},_initLayout:function(){var u="leaflet-popup",v=this._container=Me("div",u+" "+(this.options.className||"")+" leaflet-zoom-animated"),M=this._wrapper=Me("div",u+"-content-wrapper",v);if(this._contentNode=Me("div",u+"-content",M),hr(v),Rs(this._contentNode),on(v,"contextmenu",Ja),this._tipContainer=Me("div",u+"-tip-container",v),this._tip=Me("div",u+"-tip",this._tipContainer),this.options.closeButton){var P=this._closeButton=Me("a",u+"-close-button",v);P.setAttribute("role","button"),P.setAttribute("aria-label","Close popup"),P.href="#close",P.innerHTML='<span aria-hidden="true">&#215;</span>',on(P,"click",function(W){ui(W),this.close()},this)}},_updateLayout:function(){var u=this._contentNode,v=u.style;v.width="",v.whiteSpace="nowrap";var M=u.offsetWidth;M=Math.min(M,this.options.maxWidth),M=Math.max(M,this.options.minWidth),v.width=M+1+"px",v.whiteSpace="",v.height="";var P=u.offsetHeight,W=this.options.maxHeight,tt="leaflet-popup-scrolled";W&&P>W?(v.height=W+"px",ze(u,tt)):nn(u,tt),this._containerWidth=this._container.offsetWidth},_animateZoom:function(u){var v=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center),M=this._getAnchor();Fn(this._container,v.add(M))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var u=this._map,v=parseInt(Pe(this._container,"marginBottom"),10)||0,M=this._container.offsetHeight+v,P=this._containerWidth,W=new et(this._containerLeft,-M-this._containerBottom);W._add(Mn(this._container));var tt=u.layerPointToContainerPoint(W),bt=lt(this.options.autoPanPadding),Ot=lt(this.options.autoPanPaddingTopLeft||bt),Yt=lt(this.options.autoPanPaddingBottomRight||bt),ye=u.getSize(),Ne=0,$e=0;tt.x+P+Yt.x>ye.x&&(Ne=tt.x+P-ye.x+Yt.x),tt.x-Ne-Ot.x<0&&(Ne=tt.x-Ot.x),tt.y+M+Yt.y>ye.y&&($e=tt.y+M-ye.y+Yt.y),tt.y-$e-Ot.y<0&&($e=tt.y-Ot.y),(Ne||$e)&&(this.options.keepInView&&(this._autopanning=!0),u.fire("autopanstart").panBy([Ne,$e]))}},_getAnchor:function(){return lt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Qf=function(u,v){return new La(u,v)};yn.mergeOptions({closePopupOnClick:!0}),yn.include({openPopup:function(u,v,M){return this._initOverlay(La,u,v,M).openOn(this),this},closePopup:function(u){return u=arguments.length?u:this._popup,u&&u.close(),this}}),gs.include({bindPopup:function(u,v){return this._popup=this._initOverlay(La,this._popup,u,v),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(u){return this._popup&&(this instanceof pr||(this._popup._source=this),this._popup._prepareOpen(u||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(u){return this._popup&&this._popup.setContent(u),this},getPopup:function(){return this._popup},_openPopup:function(u){if(!(!this._popup||!this._map)){Ds(u);var v=u.layer||u.target;if(this._popup._source===v&&!(v instanceof vs)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(u.latlng);return}this._popup._source=v,this.openPopup(u.latlng)}},_movePopup:function(u){this._popup.setLatLng(u.latlng)},_onKeyPress:function(u){u.originalEvent.keyCode===13&&this._openPopup(u)}});var Us=Da.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(u){Da.prototype.onAdd.call(this,u),this.setOpacity(this.options.opacity),u.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(u){Da.prototype.onRemove.call(this,u),u.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var u=Da.prototype.getEvents.call(this);return this.options.permanent||(u.preclick=this.close),u},_initLayout:function(){var u="leaflet-tooltip",v=u+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Me("div",v),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+f(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(u){var v,M,P=this._map,W=this._container,tt=P.latLngToContainerPoint(P.getCenter()),bt=P.layerPointToContainerPoint(u),Ot=this.options.direction,Yt=W.offsetWidth,ye=W.offsetHeight,Ne=lt(this.options.offset),$e=this._getAnchor();Ot==="top"?(v=Yt/2,M=ye):Ot==="bottom"?(v=Yt/2,M=0):Ot==="center"?(v=Yt/2,M=ye/2):Ot==="right"?(v=0,M=ye/2):Ot==="left"?(v=Yt,M=ye/2):bt.x<tt.x?(Ot="right",v=0,M=ye/2):(Ot="left",v=Yt+(Ne.x+$e.x)*2,M=ye/2),u=u.subtract(lt(v,M,!0)).add(Ne).add($e),nn(W,"leaflet-tooltip-right"),nn(W,"leaflet-tooltip-left"),nn(W,"leaflet-tooltip-top"),nn(W,"leaflet-tooltip-bottom"),ze(W,"leaflet-tooltip-"+Ot),Fn(W,u)},_updatePosition:function(){var u=this._map.latLngToLayerPoint(this._latlng);this._setPosition(u)},setOpacity:function(u){this.options.opacity=u,this._container&&je(this._container,u)},_animateZoom:function(u){var v=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center);this._setPosition(v)},_getAnchor:function(){return lt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),fc=function(u,v){return new Us(u,v)};yn.include({openTooltip:function(u,v,M){return this._initOverlay(Us,u,v,M).openOn(this),this},closeTooltip:function(u){return u.close(),this}}),gs.include({bindTooltip:function(u,v){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Us,this._tooltip,u,v),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(u){if(!(!u&&this._tooltipHandlersAdded)){var v=u?"off":"on",M={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?M.add=this._openTooltip:(M.mouseover=this._openTooltip,M.mouseout=this.closeTooltip,M.click=this._openTooltip,this._map?this._addFocusListeners():M.add=this._addFocusListeners),this._tooltip.options.sticky&&(M.mousemove=this._moveTooltip),this[v](M),this._tooltipHandlersAdded=!u}},openTooltip:function(u){return this._tooltip&&(this instanceof pr||(this._tooltip._source=this),this._tooltip._prepareOpen(u)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(u){return this._tooltip&&this._tooltip.setContent(u),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(u){var v=typeof u.getElement=="function"&&u.getElement();v&&(on(v,"focus",function(){this._tooltip._source=u,this.openTooltip()},this),on(v,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(u){var v=typeof u.getElement=="function"&&u.getElement();v&&v.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(u){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var v=this;this._map.once("moveend",function(){v._openOnceFlag=!1,v._openTooltip(u)});return}this._tooltip._source=u.layer||u.target,this.openTooltip(this._tooltip.options.sticky?u.latlng:void 0)}},_moveTooltip:function(u){var v=u.latlng,M,P;this._tooltip.options.sticky&&u.originalEvent&&(M=this._map.mouseEventToContainerPoint(u.originalEvent),P=this._map.containerPointToLayerPoint(M),v=this._map.layerPointToLatLng(P)),this._tooltip.setLatLng(v)}});var xo=mr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(u){var v=u&&u.tagName==="DIV"?u:document.createElement("div"),M=this.options;if(M.html instanceof Element?(Ve(v),v.appendChild(M.html)):v.innerHTML=M.html!==!1?M.html:"",M.bgPos){var P=lt(M.bgPos);v.style.backgroundPosition=-P.x+"px "+-P.y+"px"}return this._setIconStyles(v,"icon"),v},createShadow:function(){return null}});function Jf(u){return new xo(u)}mr.Default=Ml;var Xo=gs.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ke.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(u){R(this,u)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(u){u._addZoomLimit(this)},onRemove:function(u){this._removeAllTiles(),Oe(this._container),u._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Je(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(xn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(u){return this.options.opacity=u,this._updateOpacity(),this},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var u=this._clampZoom(this._map.getZoom());u!==this._tileZoom&&(this._tileZoom=u,this._updateLevels()),this._update()}return this},getEvents:function(){var u={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),u.move=this._onMove),this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},createTile:function(){return document.createElement("div")},getTileSize:function(){var u=this.options.tileSize;return u instanceof et?u:new et(u,u)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(u){for(var v=this.getPane().children,M=-u(-1/0,1/0),P=0,W=v.length,tt;P<W;P++)tt=v[P].style.zIndex,v[P]!==this._container&&tt&&(M=u(M,+tt));isFinite(M)&&(this.options.zIndex=M+u(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ke.ielt9){je(this._container,this.options.opacity);var u=+new Date,v=!1,M=!1;for(var P in this._tiles){var W=this._tiles[P];if(!(!W.current||!W.loaded)){var tt=Math.min(1,(u-W.loaded)/200);je(W.el,tt),tt<1?v=!0:(W.active?M=!0:this._onOpaqueTile(W),W.active=!0)}}M&&!this._noPrune&&this._pruneTiles(),v&&(J(this._fadeFrame),this._fadeFrame=Q(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=Me("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var u=this._tileZoom,v=this.options.maxZoom;if(u!==void 0){for(var M in this._levels)M=Number(M),this._levels[M].el.children.length||M===u?(this._levels[M].el.style.zIndex=v-Math.abs(u-M),this._onUpdateLevel(M)):(Oe(this._levels[M].el),this._removeTilesAtZoom(M),this._onRemoveLevel(M),delete this._levels[M]);var P=this._levels[u],W=this._map;return P||(P=this._levels[u]={},P.el=Me("div","leaflet-tile-container leaflet-zoom-animated",this._container),P.el.style.zIndex=v,P.origin=W.project(W.unproject(W.getPixelOrigin()),u).round(),P.zoom=u,this._setZoomTransform(P,W.getCenter(),W.getZoom()),y(P.el.offsetWidth),this._onCreateLevel(P)),this._level=P,P}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var u,v,M=this._map.getZoom();if(M>this.options.maxZoom||M<this.options.minZoom){this._removeAllTiles();return}for(u in this._tiles)v=this._tiles[u],v.retain=v.current;for(u in this._tiles)if(v=this._tiles[u],v.current&&!v.active){var P=v.coords;this._retainParent(P.x,P.y,P.z,P.z-5)||this._retainChildren(P.x,P.y,P.z,P.z+2)}for(u in this._tiles)this._tiles[u].retain||this._removeTile(u)}},_removeTilesAtZoom:function(u){for(var v in this._tiles)this._tiles[v].coords.z===u&&this._removeTile(v)},_removeAllTiles:function(){for(var u in this._tiles)this._removeTile(u)},_invalidateAll:function(){for(var u in this._levels)Oe(this._levels[u].el),this._onRemoveLevel(Number(u)),delete this._levels[u];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(u,v,M,P){var W=Math.floor(u/2),tt=Math.floor(v/2),bt=M-1,Ot=new et(+W,+tt);Ot.z=+bt;var Yt=this._tileCoordsToKey(Ot),ye=this._tiles[Yt];return ye&&ye.active?(ye.retain=!0,!0):(ye&&ye.loaded&&(ye.retain=!0),bt>P?this._retainParent(W,tt,bt,P):!1)},_retainChildren:function(u,v,M,P){for(var W=2*u;W<2*u+2;W++)for(var tt=2*v;tt<2*v+2;tt++){var bt=new et(W,tt);bt.z=M+1;var Ot=this._tileCoordsToKey(bt),Yt=this._tiles[Ot];if(Yt&&Yt.active){Yt.retain=!0;continue}else Yt&&Yt.loaded&&(Yt.retain=!0);M+1<P&&this._retainChildren(W,tt,M+1,P)}},_resetView:function(u){var v=u&&(u.pinch||u.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),v,v)},_animateZoom:function(u){this._setView(u.center,u.zoom,!0,u.noUpdate)},_clampZoom:function(u){var v=this.options;return v.minNativeZoom!==void 0&&u<v.minNativeZoom?v.minNativeZoom:v.maxNativeZoom!==void 0&&v.maxNativeZoom<u?v.maxNativeZoom:u},_setView:function(u,v,M,P){var W=Math.round(v);this.options.maxZoom!==void 0&&W>this.options.maxZoom||this.options.minZoom!==void 0&&W<this.options.minZoom?W=void 0:W=this._clampZoom(W);var tt=this.options.updateWhenZooming&&W!==this._tileZoom;(!P||tt)&&(this._tileZoom=W,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),W!==void 0&&this._update(u),M||this._pruneTiles(),this._noPrune=!!M),this._setZoomTransforms(u,v)},_setZoomTransforms:function(u,v){for(var M in this._levels)this._setZoomTransform(this._levels[M],u,v)},_setZoomTransform:function(u,v,M){var P=this._map.getZoomScale(M,u.zoom),W=u.origin.multiplyBy(P).subtract(this._map._getNewPixelOrigin(v,M)).round();ke.any3d?ai(u.el,W,P):Fn(u.el,W)},_resetGrid:function(){var u=this._map,v=u.options.crs,M=this._tileSize=this.getTileSize(),P=this._tileZoom,W=this._map.getPixelWorldBounds(this._tileZoom);W&&(this._globalTileRange=this._pxBoundsToTileRange(W)),this._wrapX=v.wrapLng&&!this.options.noWrap&&[Math.floor(u.project([0,v.wrapLng[0]],P).x/M.x),Math.ceil(u.project([0,v.wrapLng[1]],P).x/M.y)],this._wrapY=v.wrapLat&&!this.options.noWrap&&[Math.floor(u.project([v.wrapLat[0],0],P).y/M.x),Math.ceil(u.project([v.wrapLat[1],0],P).y/M.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(u){var v=this._map,M=v._animatingZoom?Math.max(v._animateToZoom,v.getZoom()):v.getZoom(),P=v.getZoomScale(M,this._tileZoom),W=v.project(u,this._tileZoom).floor(),tt=v.getSize().divideBy(P*2);return new G(W.subtract(tt),W.add(tt))},_update:function(u){var v=this._map;if(v){var M=this._clampZoom(v.getZoom());if(u===void 0&&(u=v.getCenter()),this._tileZoom!==void 0){var P=this._getTiledPixelBounds(u),W=this._pxBoundsToTileRange(P),tt=W.getCenter(),bt=[],Ot=this.options.keepBuffer,Yt=new G(W.getBottomLeft().subtract([Ot,-Ot]),W.getTopRight().add([Ot,-Ot]));if(!(isFinite(W.min.x)&&isFinite(W.min.y)&&isFinite(W.max.x)&&isFinite(W.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ye in this._tiles){var Ne=this._tiles[ye].coords;(Ne.z!==this._tileZoom||!Yt.contains(new et(Ne.x,Ne.y)))&&(this._tiles[ye].current=!1)}if(Math.abs(M-this._tileZoom)>1){this._setView(u,M);return}for(var $e=W.min.y;$e<=W.max.y;$e++)for(var Tn=W.min.x;Tn<=W.max.x;Tn++){var Sa=new et(Tn,$e);if(Sa.z=this._tileZoom,!!this._isValidTile(Sa)){var wi=this._tiles[this._tileCoordsToKey(Sa)];wi?wi.current=!0:bt.push(Sa)}}if(bt.sort(function(Jn,$n){return Jn.distanceTo(tt)-$n.distanceTo(tt)}),bt.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Wa=document.createDocumentFragment();for(Tn=0;Tn<bt.length;Tn++)this._addTile(bt[Tn],Wa);this._level.el.appendChild(Wa)}}}},_isValidTile:function(u){var v=this._map.options.crs;if(!v.infinite){var M=this._globalTileRange;if(!v.wrapLng&&(u.x<M.min.x||u.x>M.max.x)||!v.wrapLat&&(u.y<M.min.y||u.y>M.max.y))return!1}if(!this.options.bounds)return!0;var P=this._tileCoordsToBounds(u);return mt(this.options.bounds).overlaps(P)},_keyToBounds:function(u){return this._tileCoordsToBounds(this._keyToTileCoords(u))},_tileCoordsToNwSe:function(u){var v=this._map,M=this.getTileSize(),P=u.scaleBy(M),W=P.add(M),tt=v.unproject(P,u.z),bt=v.unproject(W,u.z);return[tt,bt]},_tileCoordsToBounds:function(u){var v=this._tileCoordsToNwSe(u),M=new ft(v[0],v[1]);return this.options.noWrap||(M=this._map.wrapLatLngBounds(M)),M},_tileCoordsToKey:function(u){return u.x+":"+u.y+":"+u.z},_keyToTileCoords:function(u){var v=u.split(":"),M=new et(+v[0],+v[1]);return M.z=+v[2],M},_removeTile:function(u){var v=this._tiles[u];v&&(Oe(v.el),delete this._tiles[u],this.fire("tileunload",{tile:v.el,coords:this._keyToTileCoords(u)}))},_initTile:function(u){ze(u,"leaflet-tile");var v=this.getTileSize();u.style.width=v.x+"px",u.style.height=v.y+"px",u.onselectstart=y,u.onmousemove=y,ke.ielt9&&this.options.opacity<1&&je(u,this.options.opacity)},_addTile:function(u,v){var M=this._getTilePos(u),P=this._tileCoordsToKey(u),W=this.createTile(this._wrapCoords(u),o(this._tileReady,this,u));this._initTile(W),this.createTile.length<2&&Q(o(this._tileReady,this,u,null,W)),Fn(W,M),this._tiles[P]={el:W,coords:u,current:!0},v.appendChild(W),this.fire("tileloadstart",{tile:W,coords:u})},_tileReady:function(u,v,M){v&&this.fire("tileerror",{error:v,tile:M,coords:u});var P=this._tileCoordsToKey(u);M=this._tiles[P],M&&(M.loaded=+new Date,this._map._fadeAnimated?(je(M.el,0),J(this._fadeFrame),this._fadeFrame=Q(this._updateOpacity,this)):(M.active=!0,this._pruneTiles()),v||(ze(M.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:M.el,coords:u})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ke.ielt9||!this._map._fadeAnimated?Q(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(u){return u.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(u){var v=new et(this._wrapX?g(u.x,this._wrapX):u.x,this._wrapY?g(u.y,this._wrapY):u.y);return v.z=u.z,v},_pxBoundsToTileRange:function(u){var v=this.getTileSize();return new G(u.min.unscaleBy(v).floor(),u.max.unscaleBy(v).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var u in this._tiles)if(!this._tiles[u].loaded)return!1;return!0}});function So(u){return new Xo(u)}var bo=Xo.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(u,v){this._url=u,v=R(this,v),v.detectRetina&&ke.retina&&v.maxZoom>0?(v.tileSize=Math.floor(v.tileSize/2),v.zoomReverse?(v.zoomOffset--,v.minZoom=Math.min(v.maxZoom,v.minZoom+1)):(v.zoomOffset++,v.maxZoom=Math.max(v.minZoom,v.maxZoom-1)),v.minZoom=Math.max(0,v.minZoom)):v.zoomReverse?v.minZoom=Math.min(v.maxZoom,v.minZoom):v.maxZoom=Math.max(v.minZoom,v.maxZoom),typeof v.subdomains=="string"&&(v.subdomains=v.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(u,v){return this._url===u&&v===void 0&&(v=!0),this._url=u,v||this.redraw(),this},createTile:function(u,v){var M=document.createElement("img");return on(M,"load",o(this._tileOnLoad,this,v,M)),on(M,"error",o(this._tileOnError,this,v,M)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(M.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(M.referrerPolicy=this.options.referrerPolicy),M.alt="",M.src=this.getTileUrl(u),M},getTileUrl:function(u){var v={r:ke.retina?"@2x":"",s:this._getSubdomain(u),x:u.x,y:u.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var M=this._globalTileRange.max.y-u.y;this.options.tms&&(v.y=M),v["-y"]=M}return N(this._url,a(v,this.options))},_tileOnLoad:function(u,v){ke.ielt9?setTimeout(o(u,this,null,v),0):u(null,v)},_tileOnError:function(u,v,M){var P=this.options.errorTileUrl;P&&v.getAttribute("src")!==P&&(v.src=P),u(M,v)},_onTileRemove:function(u){u.tile.onload=null},_getZoomForUrl:function(){var u=this._tileZoom,v=this.options.maxZoom,M=this.options.zoomReverse,P=this.options.zoomOffset;return M&&(u=v-u),u+P},_getSubdomain:function(u){var v=Math.abs(u.x+u.y)%this.options.subdomains.length;return this.options.subdomains[v]},_abortLoading:function(){var u,v;for(u in this._tiles)if(this._tiles[u].coords.z!==this._tileZoom&&(v=this._tiles[u].el,v.onload=y,v.onerror=y,!v.complete)){v.src=F;var M=this._tiles[u].coords;Oe(v),delete this._tiles[u],this.fire("tileabort",{tile:v,coords:M})}},_removeTile:function(u){var v=this._tiles[u];if(v)return v.el.setAttribute("src",F),Xo.prototype._removeTile.call(this,u)},_tileReady:function(u,v,M){if(!(!this._map||M&&M.getAttribute("src")===F))return Xo.prototype._tileReady.call(this,u,v,M)}});function Oa(u,v){return new bo(u,v)}var Mo=bo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(u,v){this._url=u;var M=a({},this.defaultWmsParams);for(var P in v)P in this.options||(M[P]=v[P]);v=R(this,v);var W=v.detectRetina&&ke.retina?2:1,tt=this.getTileSize();M.width=tt.x*W,M.height=tt.y*W,this.wmsParams=M},onAdd:function(u){this._crs=this.options.crs||u.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var v=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[v]=this._crs.code,bo.prototype.onAdd.call(this,u)},getTileUrl:function(u){var v=this._tileCoordsToNwSe(u),M=this._crs,P=nt(M.project(v[0]),M.project(v[1])),W=P.min,tt=P.max,bt=(this._wmsVersion>=1.3&&this._crs===Sl?[W.y,W.x,tt.y,tt.x]:[W.x,W.y,tt.x,tt.y]).join(","),Ot=bo.prototype.getTileUrl.call(this,u);return Ot+C(this.wmsParams,Ot,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+bt},setParams:function(u,v){return a(this.wmsParams,u),v||this.redraw(),this}});function xa(u,v){return new Mo(u,v)}bo.WMS=Mo,Oa.wms=xa;var es=gs.extend({options:{padding:.1},initialize:function(u){R(this,u),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ze(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var u={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(u.zoomanim=this._onAnimZoom),u},_onAnimZoom:function(u){this._updateTransform(u.center,u.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(u,v){var M=this._map.getZoomScale(v,this._zoom),P=this._map.getSize().multiplyBy(.5+this.options.padding),W=this._map.project(this._center,v),tt=P.multiplyBy(-M).add(W).subtract(this._map._getNewPixelOrigin(u,v));ke.any3d?ai(this._container,tt,M):Fn(this._container,tt)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var u in this._layers)this._layers[u]._reset()},_onZoomEnd:function(){for(var u in this._layers)this._layers[u]._project()},_updatePaths:function(){for(var u in this._layers)this._layers[u]._update()},_update:function(){var u=this.options.padding,v=this._map.getSize(),M=this._map.containerPointToLayerPoint(v.multiplyBy(-u)).round();this._bounds=new G(M,M.add(v.multiplyBy(1+u*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Qc=es.extend({options:{tolerance:0},getEvents:function(){var u=es.prototype.getEvents.call(this);return u.viewprereset=this._onViewPreReset,u},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){es.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var u=this._container=document.createElement("canvas");on(u,"mousemove",this._onMouseMove,this),on(u,"click dblclick mousedown mouseup contextmenu",this._onClick,this),on(u,"mouseout",this._handleMouseOut,this),u._leaflet_disable_events=!0,this._ctx=u.getContext("2d")},_destroyContainer:function(){J(this._redrawRequest),delete this._ctx,Oe(this._container),Gn(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var u;this._redrawBounds=null;for(var v in this._layers)u=this._layers[v],u._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){es.prototype._update.call(this);var u=this._bounds,v=this._container,M=u.getSize(),P=ke.retina?2:1;Fn(v,u.min),v.width=P*M.x,v.height=P*M.y,v.style.width=M.x+"px",v.style.height=M.y+"px",ke.retina&&this._ctx.scale(2,2),this._ctx.translate(-u.min.x,-u.min.y),this.fire("update")}},_reset:function(){es.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(u){this._updateDashArray(u),this._layers[f(u)]=u;var v=u._order={layer:u,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=v),this._drawLast=v,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(u){this._requestRedraw(u)},_removePath:function(u){var v=u._order,M=v.next,P=v.prev;M?M.prev=P:this._drawLast=P,P?P.next=M:this._drawFirst=M,delete u._order,delete this._layers[f(u)],this._requestRedraw(u)},_updatePath:function(u){this._extendRedrawBounds(u),u._project(),u._update(),this._requestRedraw(u)},_updateStyle:function(u){this._updateDashArray(u),this._requestRedraw(u)},_updateDashArray:function(u){if(typeof u.options.dashArray=="string"){var v=u.options.dashArray.split(/[, ]+/),M=[],P,W;for(W=0;W<v.length;W++){if(P=Number(v[W]),isNaN(P))return;M.push(P)}u.options._dashArray=M}else u.options._dashArray=u.options.dashArray},_requestRedraw:function(u){this._map&&(this._extendRedrawBounds(u),this._redrawRequest=this._redrawRequest||Q(this._redraw,this))},_extendRedrawBounds:function(u){if(u._pxBounds){var v=(u.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new G,this._redrawBounds.extend(u._pxBounds.min.subtract([v,v])),this._redrawBounds.extend(u._pxBounds.max.add([v,v]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var u=this._redrawBounds;if(u){var v=u.getSize();this._ctx.clearRect(u.min.x,u.min.y,v.x,v.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var u,v=this._redrawBounds;if(this._ctx.save(),v){var M=v.getSize();this._ctx.beginPath(),this._ctx.rect(v.min.x,v.min.y,M.x,M.y),this._ctx.clip()}this._drawing=!0;for(var P=this._drawFirst;P;P=P.next)u=P.layer,(!v||u._pxBounds&&u._pxBounds.intersects(v))&&u._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(u,v){if(this._drawing){var M,P,W,tt,bt=u._parts,Ot=bt.length,Yt=this._ctx;if(Ot){for(Yt.beginPath(),M=0;M<Ot;M++){for(P=0,W=bt[M].length;P<W;P++)tt=bt[M][P],Yt[P?"lineTo":"moveTo"](tt.x,tt.y);v&&Yt.closePath()}this._fillStroke(Yt,u)}}},_updateCircle:function(u){if(!(!this._drawing||u._empty())){var v=u._point,M=this._ctx,P=Math.max(Math.round(u._radius),1),W=(Math.max(Math.round(u._radiusY),1)||P)/P;W!==1&&(M.save(),M.scale(1,W)),M.beginPath(),M.arc(v.x,v.y/W,P,0,Math.PI*2,!1),W!==1&&M.restore(),this._fillStroke(M,u)}},_fillStroke:function(u,v){var M=v.options;M.fill&&(u.globalAlpha=M.fillOpacity,u.fillStyle=M.fillColor||M.color,u.fill(M.fillRule||"evenodd")),M.stroke&&M.weight!==0&&(u.setLineDash&&u.setLineDash(v.options&&v.options._dashArray||[]),u.globalAlpha=M.opacity,u.lineWidth=M.weight,u.strokeStyle=M.color,u.lineCap=M.lineCap,u.lineJoin=M.lineJoin,u.stroke())},_onClick:function(u){for(var v=this._map.mouseEventToLayerPoint(u),M,P,W=this._drawFirst;W;W=W.next)M=W.layer,M.options.interactive&&M._containsPoint(v)&&(!(u.type==="click"||u.type==="preclick")||!this._map._draggableMoved(M))&&(P=M);this._fireEvent(P?[P]:!1,u)},_onMouseMove:function(u){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var v=this._map.mouseEventToLayerPoint(u);this._handleMouseHover(u,v)}},_handleMouseOut:function(u){var v=this._hoveredLayer;v&&(nn(this._container,"leaflet-interactive"),this._fireEvent([v],u,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(u,v){if(!this._mouseHoverThrottled){for(var M,P,W=this._drawFirst;W;W=W.next)M=W.layer,M.options.interactive&&M._containsPoint(v)&&(P=M);P!==this._hoveredLayer&&(this._handleMouseOut(u),P&&(ze(this._container,"leaflet-interactive"),this._fireEvent([P],u,"mouseover"),this._hoveredLayer=P)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,u),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(u,v,M){this._map._fireDOMEvent(v,M||v.type,u)},_bringToFront:function(u){var v=u._order;if(v){var M=v.next,P=v.prev;if(M)M.prev=P;else return;P?P.next=M:M&&(this._drawFirst=M),v.prev=this._drawLast,this._drawLast.next=v,v.next=null,this._drawLast=v,this._requestRedraw(u)}},_bringToBack:function(u){var v=u._order;if(v){var M=v.next,P=v.prev;if(P)P.next=M;else return;M?M.prev=P:P&&(this._drawLast=P),v.prev=null,v.next=this._drawFirst,this._drawFirst.prev=v,this._drawFirst=v,this._requestRedraw(u)}}});function To(u){return ke.canvas?new Qc(u):null}var Ao=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(u){return document.createElement("<lvml:"+u+' class="lvml">')}}catch{}return function(u){return document.createElement("<"+u+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),hc={_initContainer:function(){this._container=Me("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(es.prototype._update.call(this),this.fire("update"))},_initPath:function(u){var v=u._container=Ao("shape");ze(v,"leaflet-vml-shape "+(this.options.className||"")),v.coordsize="1 1",u._path=Ao("path"),v.appendChild(u._path),this._updateStyle(u),this._layers[f(u)]=u},_addPath:function(u){var v=u._container;this._container.appendChild(v),u.options.interactive&&u.addInteractiveTarget(v)},_removePath:function(u){var v=u._container;Oe(v),u.removeInteractiveTarget(v),delete this._layers[f(u)]},_updateStyle:function(u){var v=u._stroke,M=u._fill,P=u.options,W=u._container;W.stroked=!!P.stroke,W.filled=!!P.fill,P.stroke?(v||(v=u._stroke=Ao("stroke")),W.appendChild(v),v.weight=P.weight+"px",v.color=P.color,v.opacity=P.opacity,P.dashArray?v.dashStyle=I(P.dashArray)?P.dashArray.join(" "):P.dashArray.replace(/( *, *)/g," "):v.dashStyle="",v.endcap=P.lineCap.replace("butt","flat"),v.joinstyle=P.lineJoin):v&&(W.removeChild(v),u._stroke=null),P.fill?(M||(M=u._fill=Ao("fill")),W.appendChild(M),M.color=P.fillColor||P.color,M.opacity=P.fillOpacity):M&&(W.removeChild(M),u._fill=null)},_updateCircle:function(u){var v=u._point.round(),M=Math.round(u._radius),P=Math.round(u._radiusY||M);this._setPath(u,u._empty()?"M0 0":"AL "+v.x+","+v.y+" "+M+","+P+" 0,"+65535*360)},_setPath:function(u,v){u._path.v=v},_bringToFront:function(u){Je(u._container)},_bringToBack:function(u){xn(u._container)}},vr=ke.vml?Ao:Vt,Yo=es.extend({_initContainer:function(){this._container=vr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=vr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Oe(this._container),Gn(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){es.prototype._update.call(this);var u=this._bounds,v=u.getSize(),M=this._container;(!this._svgSize||!this._svgSize.equals(v))&&(this._svgSize=v,M.setAttribute("width",v.x),M.setAttribute("height",v.y)),Fn(M,u.min),M.setAttribute("viewBox",[u.min.x,u.min.y,v.x,v.y].join(" ")),this.fire("update")}},_initPath:function(u){var v=u._path=vr("path");u.options.className&&ze(v,u.options.className),u.options.interactive&&ze(v,"leaflet-interactive"),this._updateStyle(u),this._layers[f(u)]=u},_addPath:function(u){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(u._path),u.addInteractiveTarget(u._path)},_removePath:function(u){Oe(u._path),u.removeInteractiveTarget(u._path),delete this._layers[f(u)]},_updatePath:function(u){u._project(),u._update()},_updateStyle:function(u){var v=u._path,M=u.options;v&&(M.stroke?(v.setAttribute("stroke",M.color),v.setAttribute("stroke-opacity",M.opacity),v.setAttribute("stroke-width",M.weight),v.setAttribute("stroke-linecap",M.lineCap),v.setAttribute("stroke-linejoin",M.lineJoin),M.dashArray?v.setAttribute("stroke-dasharray",M.dashArray):v.removeAttribute("stroke-dasharray"),M.dashOffset?v.setAttribute("stroke-dashoffset",M.dashOffset):v.removeAttribute("stroke-dashoffset")):v.setAttribute("stroke","none"),M.fill?(v.setAttribute("fill",M.fillColor||M.color),v.setAttribute("fill-opacity",M.fillOpacity),v.setAttribute("fill-rule",M.fillRule||"evenodd")):v.setAttribute("fill","none"))},_updatePoly:function(u,v){this._setPath(u,Ft(u._parts,v))},_updateCircle:function(u){var v=u._point,M=Math.max(Math.round(u._radius),1),P=Math.max(Math.round(u._radiusY),1)||M,W="a"+M+","+P+" 0 1,0 ",tt=u._empty()?"M0 0":"M"+(v.x-M)+","+v.y+W+M*2+",0 "+W+-M*2+",0 ";this._setPath(u,tt)},_setPath:function(u,v){u._path.setAttribute("d",v)},_bringToFront:function(u){Je(u._path)},_bringToBack:function(u){xn(u._path)}});ke.vml&&Yo.include(hc);function Cl(u){return ke.svg||ke.vml?new Yo(u):null}yn.include({getRenderer:function(u){var v=u.options.renderer||this._getPaneRenderer(u.options.pane)||this.options.renderer||this._renderer;return v||(v=this._renderer=this._createRenderer()),this.hasLayer(v)||this.addLayer(v),v},_getPaneRenderer:function(u){if(u==="overlayPane"||u===void 0)return!1;var v=this._paneRenderers[u];return v===void 0&&(v=this._createRenderer({pane:u}),this._paneRenderers[u]=v),v},_createRenderer:function(u){return this.options.preferCanvas&&To(u)||Cl(u)}});var Eo=Al.extend({initialize:function(u,v){Al.prototype.initialize.call(this,this._boundsToLatLngs(u),v)},setBounds:function(u){return this.setLatLngs(this._boundsToLatLngs(u))},_boundsToLatLngs:function(u){return u=mt(u),[u.getSouthWest(),u.getNorthWest(),u.getNorthEast(),u.getSouthEast()]}});function bd(u,v){return new Eo(u,v)}Yo.create=vr,Yo.pointsToPath=Ft,$a.geometryToLayer=hi,$a.coordsToLatLng=Yc,$a.coordsToLatLngs=rc,$a.latLngToCoords=oc,$a.latLngsToCoords=wl,$a.getFeature=gr,$a.asFeature=Zc,yn.mergeOptions({boxZoom:!0});var Ga=Hi.extend({initialize:function(u){this._map=u,this._container=u._container,this._pane=u._panes.overlayPane,this._resetStateTimeout=0,u.on("unload",this._destroy,this)},addHooks:function(){on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Gn(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Oe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(u){if(!u.shiftKey||u.which!==1&&u.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Qn(),Es(),this._startPoint=this._map.mouseEventToContainerPoint(u),on(document,{contextmenu:Ds,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(u){this._moved||(this._moved=!0,this._box=Me("div","leaflet-zoom-box",this._container),ze(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(u);var v=new G(this._point,this._startPoint),M=v.getSize();Fn(this._box,v.min),this._box.style.width=M.x+"px",this._box.style.height=M.y+"px"},_finish:function(){this._moved&&(Oe(this._box),nn(this._container,"leaflet-crosshair")),ci(),ki(),Gn(document,{contextmenu:Ds,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(u){if(!(u.which!==1&&u.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var v=new ft(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(v).fire("boxzoomend",{boxZoomBounds:v})}},_onKeyDown:function(u){u.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});yn.addInitHook("addHandler","boxZoom",Ga),yn.mergeOptions({doubleClickZoom:!0});var ja=Hi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(u){var v=this._map,M=v.getZoom(),P=v.options.zoomDelta,W=u.originalEvent.shiftKey?M-P:M+P;v.options.doubleClickZoom==="center"?v.setZoom(W):v.setZoomAround(u.containerPoint,W)}});yn.addInitHook("addHandler","doubleClickZoom",ja),yn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var yr=Hi.extend({addHooks:function(){if(!this._draggable){var u=this._map;this._draggable=new mo(u._mapPane,u._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),u.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),u.on("zoomend",this._onZoomEnd,this),u.whenReady(this._onZoomEnd,this))}ze(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){nn(this._map._container,"leaflet-grab"),nn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var u=this._map;if(u._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var v=mt(this._map.options.maxBounds);this._offsetLimit=nt(this._map.latLngToContainerPoint(v.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(v.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;u.fire("movestart").fire("dragstart"),u.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(u){if(this._map.options.inertia){var v=this._lastTime=+new Date,M=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(M),this._times.push(v),this._prunePositions(v)}this._map.fire("move",u).fire("drag",u)},_prunePositions:function(u){for(;this._positions.length>1&&u-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var u=this._map.getSize().divideBy(2),v=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=v.subtract(u).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(u,v){return u-(u-v)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var u=this._draggable._newPos.subtract(this._draggable._startPos),v=this._offsetLimit;u.x<v.min.x&&(u.x=this._viscousLimit(u.x,v.min.x)),u.y<v.min.y&&(u.y=this._viscousLimit(u.y,v.min.y)),u.x>v.max.x&&(u.x=this._viscousLimit(u.x,v.max.x)),u.y>v.max.y&&(u.y=this._viscousLimit(u.y,v.max.y)),this._draggable._newPos=this._draggable._startPos.add(u)}},_onPreDragWrap:function(){var u=this._worldWidth,v=Math.round(u/2),M=this._initialWorldOffset,P=this._draggable._newPos.x,W=(P-v+M)%u+v-M,tt=(P+v+M)%u-v-M,bt=Math.abs(W+M)<Math.abs(tt+M)?W:tt;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=bt},_onDragEnd:function(u){var v=this._map,M=v.options,P=!M.inertia||u.noInertia||this._times.length<2;if(v.fire("dragend",u),P)v.fire("moveend");else{this._prunePositions(+new Date);var W=this._lastPos.subtract(this._positions[0]),tt=(this._lastTime-this._times[0])/1e3,bt=M.easeLinearity,Ot=W.multiplyBy(bt/tt),Yt=Ot.distanceTo([0,0]),ye=Math.min(M.inertiaMaxSpeed,Yt),Ne=Ot.multiplyBy(ye/Yt),$e=ye/(M.inertiaDeceleration*bt),Tn=Ne.multiplyBy(-$e/2).round();!Tn.x&&!Tn.y?v.fire("moveend"):(Tn=v._limitOffset(Tn,v.options.maxBounds),Q(function(){v.panBy(Tn,{duration:$e,easeLinearity:bt,noMoveStart:!0,animate:!0})}))}}});yn.addInitHook("addHandler","dragging",yr),yn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Na=Hi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(u){this._map=u,this._setPanDelta(u.options.keyboardPanDelta),this._setZoomDelta(u.options.zoomDelta)},addHooks:function(){var u=this._map._container;u.tabIndex<=0&&(u.tabIndex="0"),on(u,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Gn(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var u=document.body,v=document.documentElement,M=u.scrollTop||v.scrollTop,P=u.scrollLeft||v.scrollLeft;this._map._container.focus(),window.scrollTo(P,M)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(u){var v=this._panKeys={},M=this.keyCodes,P,W;for(P=0,W=M.left.length;P<W;P++)v[M.left[P]]=[-1*u,0];for(P=0,W=M.right.length;P<W;P++)v[M.right[P]]=[u,0];for(P=0,W=M.down.length;P<W;P++)v[M.down[P]]=[0,u];for(P=0,W=M.up.length;P<W;P++)v[M.up[P]]=[0,-1*u]},_setZoomDelta:function(u){var v=this._zoomKeys={},M=this.keyCodes,P,W;for(P=0,W=M.zoomIn.length;P<W;P++)v[M.zoomIn[P]]=u;for(P=0,W=M.zoomOut.length;P<W;P++)v[M.zoomOut[P]]=-u},_addHooks:function(){on(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Gn(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(u){if(!(u.altKey||u.ctrlKey||u.metaKey)){var v=u.keyCode,M=this._map,P;if(v in this._panKeys){if(!M._panAnim||!M._panAnim._inProgress)if(P=this._panKeys[v],u.shiftKey&&(P=lt(P).multiplyBy(3)),M.options.maxBounds&&(P=M._limitOffset(lt(P),M.options.maxBounds)),M.options.worldCopyJump){var W=M.wrapLatLng(M.unproject(M.project(M.getCenter()).add(P)));M.panTo(W)}else M.panBy(P)}else if(v in this._zoomKeys)M.setZoom(M.getZoom()+(u.shiftKey?3:1)*this._zoomKeys[v]);else if(v===27&&M._popup&&M._popup.options.closeOnEscapeKey)M.closePopup();else return;Ds(u)}}});yn.addInitHook("addHandler","keyboard",Na),yn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var dc=Hi.extend({addHooks:function(){on(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Gn(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(u){var v=Si(u),M=this._map.options.wheelDebounceTime;this._delta+=v,this._lastMousePos=this._map.mouseEventToContainerPoint(u),this._startTime||(this._startTime=+new Date);var P=Math.max(M-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),P),Ds(u)},_performZoom:function(){var u=this._map,v=u.getZoom(),M=this._map.options.zoomSnap||0;u._stop();var P=this._delta/(this._map.options.wheelPxPerZoomLevel*4),W=4*Math.log(2/(1+Math.exp(-Math.abs(P))))/Math.LN2,tt=M?Math.ceil(W/M)*M:W,bt=u._limitZoom(v+(this._delta>0?tt:-tt))-v;this._delta=0,this._startTime=null,bt&&(u.options.scrollWheelZoom==="center"?u.setZoom(v+bt):u.setZoomAround(this._lastMousePos,v+bt))}});yn.addInitHook("addHandler","scrollWheelZoom",dc);var wo=600;yn.mergeOptions({tapHold:ke.touchNative&&ke.safari&&ke.mobile,tapTolerance:15});var Jc=Hi.extend({addHooks:function(){on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Gn(this._map._container,"touchstart",this._onDown,this)},_onDown:function(u){if(clearTimeout(this._holdTimeout),u.touches.length===1){var v=u.touches[0];this._startPos=this._newPos=new et(v.clientX,v.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(on(document,"touchend",ui),on(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",v))},this),wo),on(document,"touchend touchcancel contextmenu",this._cancel,this),on(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function u(){Gn(document,"touchend",ui),Gn(document,"touchend touchcancel",u)},_cancel:function(){clearTimeout(this._holdTimeout),Gn(document,"touchend touchcancel contextmenu",this._cancel,this),Gn(document,"touchmove",this._onMove,this)},_onMove:function(u){var v=u.touches[0];this._newPos=new et(v.clientX,v.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(u,v){var M=new MouseEvent(u,{bubbles:!0,cancelable:!0,view:window,screenX:v.screenX,screenY:v.screenY,clientX:v.clientX,clientY:v.clientY});M._simulated=!0,v.target.dispatchEvent(M)}});yn.addInitHook("addHandler","tapHold",Jc),yn.mergeOptions({touchZoom:ke.touch,bounceAtZoomLimits:!0});var $f=Hi.extend({addHooks:function(){ze(this._map._container,"leaflet-touch-zoom"),on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){nn(this._map._container,"leaflet-touch-zoom"),Gn(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(u){var v=this._map;if(!(!u.touches||u.touches.length!==2||v._animatingZoom||this._zooming)){var M=v.mouseEventToContainerPoint(u.touches[0]),P=v.mouseEventToContainerPoint(u.touches[1]);this._centerPoint=v.getSize()._divideBy(2),this._startLatLng=v.containerPointToLatLng(this._centerPoint),v.options.touchZoom!=="center"&&(this._pinchStartLatLng=v.containerPointToLatLng(M.add(P)._divideBy(2))),this._startDist=M.distanceTo(P),this._startZoom=v.getZoom(),this._moved=!1,this._zooming=!0,v._stop(),on(document,"touchmove",this._onTouchMove,this),on(document,"touchend touchcancel",this._onTouchEnd,this),ui(u)}},_onTouchMove:function(u){if(!(!u.touches||u.touches.length!==2||!this._zooming)){var v=this._map,M=v.mouseEventToContainerPoint(u.touches[0]),P=v.mouseEventToContainerPoint(u.touches[1]),W=M.distanceTo(P)/this._startDist;if(this._zoom=v.getScaleZoom(W,this._startZoom),!v.options.bounceAtZoomLimits&&(this._zoom<v.getMinZoom()&&W<1||this._zoom>v.getMaxZoom()&&W>1)&&(this._zoom=v._limitZoom(this._zoom)),v.options.touchZoom==="center"){if(this._center=this._startLatLng,W===1)return}else{var tt=M._add(P)._divideBy(2)._subtract(this._centerPoint);if(W===1&&tt.x===0&&tt.y===0)return;this._center=v.unproject(v.project(this._pinchStartLatLng,this._zoom).subtract(tt),this._zoom)}this._moved||(v._moveStart(!0,!1),this._moved=!0),J(this._animRequest);var bt=o(v._move,v,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Q(bt,this,!0),ui(u)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,J(this._animRequest),Gn(document,"touchmove",this._onTouchMove,this),Gn(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});yn.addInitHook("addHandler","touchZoom",$f),yn.BoxZoom=Ga,yn.DoubleClickZoom=ja,yn.Drag=yr,yn.Keyboard=Na,yn.ScrollWheelZoom=dc,yn.TapHold=Jc,yn.TouchZoom=$f,e.Bounds=G,e.Browser=ke,e.CRS=_t,e.Canvas=Qc,e.Circle=Qu,e.CircleMarker=fi,e.Class=ut,e.Control=Vi,e.DivIcon=xo,e.DivOverlay=Da,e.DomEvent=po,e.DomUtil=ws,e.Draggable=mo,e.Evented=K,e.FeatureGroup=pr,e.GeoJSON=$a,e.GridLayer=Xo,e.Handler=Hi,e.Icon=mr,e.ImageOverlay=Ha,e.LatLng=xt,e.LatLngBounds=ft,e.Layer=gs,e.LayerGroup=bl,e.LineUtil=_l,e.Map=yn,e.Marker=sc,e.Mixin=jc,e.Path=vs,e.Point=et,e.PolyUtil=Wc,e.Polygon=Al,e.Polyline=Ns,e.Popup=La,e.PosAnimation=ka,e.Projection=Zf,e.Rectangle=Eo,e.Renderer=es,e.SVG=Yo,e.SVGOverlay=uc,e.TileLayer=bo,e.Tooltip=Us,e.Transformation=qt,e.Util=rt,e.VideoOverlay=_o,e.bind=o,e.bounds=nt,e.canvas=To,e.circle=Kf,e.circleMarker=xd,e.control=ds,e.divIcon=Jf,e.extend=a,e.featureGroup=Ku,e.geoJSON=Kc,e.geoJson=lc,e.gridLayer=So,e.icon=ac,e.imageOverlay=Ju,e.latLng=ht,e.latLngBounds=mt,e.layerGroup=Os,e.map=gl,e.marker=Xc,e.point=lt,e.polygon=Sd,e.polyline=Wo,e.popup=Qf,e.rectangle=bd,e.setOptions=R,e.stamp=f,e.svg=Cl,e.svgOverlay=ts,e.tileLayer=Oa,e.tooltip=fc,e.transformation=ne,e.version=n,e.videoOverlay=cc;var _r=window.L;e.noConflict=function(){return window.L=_r,this},window.L=e}))})(Cg,Cg.exports)),Cg.exports}var hd=L4();const Xw=M0(hd);function T0(i,t,e){return Object.freeze({instance:i,context:t,container:e})}function r1(i,t){return t==null?function(n,a){const s=ct.useRef(void 0);return s.current||(s.current=i(n,a)),s}:function(n,a){const s=ct.useRef(void 0);s.current||(s.current=i(n,a));const o=ct.useRef(n),{instance:c}=s.current;return ct.useEffect(function(){o.current!==n&&(t(c,n,o.current),o.current=n)},[c,n,t]),s}}function Yw(i,t){ct.useEffect(function(){return(t.layerContainer??t.map).addLayer(i.instance),function(){t.layerContainer?.removeLayer(i.instance),t.map.removeLayer(i.instance)}},[t,i])}function Zw(i){return function(e){const n=a1(),a=i(s1(e,n),n);return Ww(n.map,e.attribution),b2(a.current,e.eventHandlers),Yw(a.current,n),a}}function O4(i,t){const e=ct.useRef(void 0);ct.useEffect(function(){if(t.pathOptions!==e.current){const a=t.pathOptions??{};i.instance.setStyle(a),e.current=a}},[i,t])}function N4(i){return function(e){const n=a1(),a=i(s1(e,n),n);return b2(a.current,e.eventHandlers),Yw(a.current,n),O4(a.current,e),a}}function U4(i,t){const e=r1(i,t),n=Zw(e);return qw(n)}function I4(i,t){const e=r1(i),n=R4(e,t);return w4(n)}function Kw(i,t){const e=r1(i,t),n=N4(e);return qw(n)}function P4(i,t){const e=r1(i,t),n=Zw(e);return C4(n)}function z4(i,t,e){const{opacity:n,zIndex:a}=t;n!=null&&n!==e.opacity&&i.setOpacity(n),a!=null&&a!==e.zIndex&&i.setZIndex(a)}function M2(){return a1().map}const Qw=Kw(function({center:t,children:e,...n},a){const s=new hd.Circle(t,n);return T0(s,x2(a,{overlayContainer:s}))},M4);function B4({bounds:i,boundsOptions:t,center:e,children:n,className:a,id:s,placeholder:o,style:c,whenReady:f,zoom:d,...g},y){const[x]=ct.useState({className:a,id:s,style:c}),[b,T]=ct.useState(null),R=ct.useRef(void 0);ct.useImperativeHandle(y,()=>b?.map??null,[b]);const C=ct.useCallback(N=>{if(N!==null&&!R.current){const I=new hd.Map(N,g);R.current=I,e!=null&&d!=null?I.setView(e,d):i!=null&&I.fitBounds(i,t),f!=null&&I.whenReady(f),T(E4(I))}},[]);ct.useEffect(()=>()=>{b?.map.remove()},[b]);const w=b?Lu.createElement(S2,{value:b},n):o??null;return Lu.createElement("div",{...x,ref:C},w)}const F4=ct.forwardRef(B4),Jw=U4(function({position:t,...e},n){const a=new hd.Marker(t,e);return T0(a,x2(n,{overlayContainer:a}))},function(t,e,n){e.position!==n.position&&t.setLatLng(e.position),e.icon!=null&&e.icon!==n.icon&&t.setIcon(e.icon),e.zIndexOffset!=null&&e.zIndexOffset!==n.zIndexOffset&&t.setZIndexOffset(e.zIndexOffset),e.opacity!=null&&e.opacity!==n.opacity&&t.setOpacity(e.opacity),t.dragging!=null&&e.draggable!==n.draggable&&(e.draggable===!0?t.dragging.enable():t.dragging.disable())}),$w=Kw(function({positions:t,...e},n){const a=new hd.Polyline(t,e);return T0(a,x2(n,{overlayContainer:a}))},function(t,e,n){e.positions!==n.positions&&t.setLatLngs(e.positions)}),k4=I4(function(t,e){const n=new hd.Popup(t,e.overlayContainer);return T0(n,e)},function(t,e,{position:n},a){ct.useEffect(function(){const{instance:o}=t;function c(d){d.popup===o&&(o.update(),a(!0))}function f(d){d.popup===o&&a(!1)}return e.map.on({popupopen:c,popupclose:f}),e.overlayContainer==null?(n!=null&&o.setLatLng(n),o.openOn(e.map)):e.overlayContainer.bindPopup(o),function(){e.map.off({popupopen:c,popupclose:f}),e.overlayContainer?.unbindPopup(),e.map.removeLayer(o)}},[t,e,a,n])}),V4=P4(function({url:t,...e},n){const a=new hd.TileLayer(t,s1(e,n));return T0(a,n)},function(t,e,n){z4(t,e,n);const{url:a}=e;a!=null&&a!==n.url&&t.setUrl(a)}),Bv={UAL:{name:"United",color:"#0033A0",icon:"",country:"US",countryFlag:""},DAL:{name:"Delta",color:"#E31837",icon:"",country:"US",countryFlag:""},AAL:{name:"American",color:"#0078D2",icon:"",country:"US",countryFlag:""},SWA:{name:"Southwest",color:"#304CB2",icon:"",country:"US",countryFlag:""},JBU:{name:"JetBlue",color:"#003876",icon:"",country:"US",countryFlag:""},NKS:{name:"Spirit",color:"#FFE600",icon:"",country:"US",countryFlag:""},ASA:{name:"Alaska",color:"#00205B",icon:"",country:"US",countryFlag:""},FDX:{name:"FedEx",color:"#4D148C",icon:"",country:"US",countryFlag:""},UPS:{name:"UPS",color:"#351C15",icon:"",country:"US",countryFlag:""},BAW:{name:"British Airways",color:"#2E5198",icon:"",country:"GB",countryFlag:""},AFR:{name:"Air France",color:"#002157",icon:"",country:"FR",countryFlag:""},DLH:{name:"Lufthansa",color:"#05164D",icon:"",country:"DE",countryFlag:""},UAE:{name:"Emirates",color:"#D71921",icon:"",country:"AE",countryFlag:""},QTR:{name:"Qatar Airways",color:"#5C0632",icon:"",country:"QA",countryFlag:""},SIA:{name:"Singapore Airlines",color:"#F5A623",icon:"",country:"SG",countryFlag:""},ANA:{name:"All Nippon",color:"#00467F",icon:"",country:"JP",countryFlag:""},CPA:{name:"Cathay Pacific",color:"#006564",icon:"",country:"HK",countryFlag:""},KLM:{name:"KLM",color:"#00A1DE",icon:"",country:"NL",countryFlag:""},AIC:{name:"Air India",color:"#E31837",icon:"",country:"IN",countryFlag:""},QFA:{name:"Qantas",color:"#E0001A",icon:"",country:"AU",countryFlag:""},RUS_AF:{name:"Russian Air Force",color:"#D52B1E",icon:"",country:"RU",countryFlag:""},USAF:{name:"US Air Force",color:"#00308F",icon:"",country:"US",countryFlag:""},RAF:{name:"Royal Air Force",color:"#00247D",icon:"",country:"GB",countryFlag:""},PLAAF:{name:"PLA Air Force",color:"#DE2910",icon:"",country:"CN",countryFlag:""}},T2={B737:{name:"Boeing 737",manufacturer:"Boeing",category:"narrow",size:"narrow",typicalSeats:160},B738:{name:"Boeing 737-800",manufacturer:"Boeing",category:"narrow",size:"narrow",typicalSeats:175},B739:{name:"Boeing 737-900",manufacturer:"Boeing",category:"narrow",size:"narrow",typicalSeats:180},A320:{name:"Airbus A320",manufacturer:"Airbus",category:"narrow",size:"narrow",typicalSeats:150},A321:{name:"Airbus A321",manufacturer:"Airbus",category:"narrow",size:"narrow",typicalSeats:185},B787:{name:"Boeing 787 Dreamliner",manufacturer:"Boeing",category:"wide",size:"wide",typicalSeats:290},B789:{name:"Boeing 787-9",manufacturer:"Boeing",category:"wide",size:"wide",typicalSeats:296},B777:{name:"Boeing 777",manufacturer:"Boeing",category:"wide",size:"wide",typicalSeats:350},A330:{name:"Airbus A330",manufacturer:"Airbus",category:"wide",size:"wide",typicalSeats:277},A350:{name:"Airbus A350",manufacturer:"Airbus",category:"wide",size:"wide",typicalSeats:325},B77W:{name:"Boeing 777-300ER",manufacturer:"Boeing",category:"wide",size:"heavy",typicalSeats:396},B747:{name:"Boeing 747",manufacturer:"Boeing",category:"wide",size:"heavy",typicalSeats:416},A380:{name:"Airbus A380",manufacturer:"Airbus",category:"wide",size:"super",typicalSeats:489},E175:{name:"Embraer E175",manufacturer:"Embraer",category:"regional",size:"regional",typicalSeats:76},CRJ9:{name:"Bombardier CRJ-900",manufacturer:"Bombardier",category:"regional",size:"regional",typicalSeats:76},SU35:{name:"Sukhoi Su-35 Flanker",manufacturer:"Sukhoi",category:"military",size:"regional"},SU57:{name:"Sukhoi Su-57 Felon",manufacturer:"Sukhoi",category:"military",size:"regional"},F22:{name:"F-22 Raptor",manufacturer:"Lockheed Martin",category:"military",size:"regional"},F15:{name:"F-15 Eagle",manufacturer:"McDonnell Douglas",category:"military",size:"regional"},F16:{name:"F-16 Fighting Falcon",manufacturer:"General Dynamics",category:"military",size:"regional"}};function o1(i){const t=i.substring(0,3);if(Bv[t])return Bv[t];const e=i.substring(0,2),n={UA:"UAL",DL:"DAL",AA:"AAL",WN:"SWA",B6:"JBU",AS:"ASA",NK:"NKS",BA:"BAW",AF:"AFR",LH:"DLH",EK:"UAE",QR:"QTR",SQ:"SIA",AI:"AIC",QF:"QFA"};return n[e]&&Bv[n[e]]?Bv[n[e]]:null}function tC(i,t,e){if(t)return"#00d4ff";switch(i){case"hostile":return"#ff0000";case"hijacked":return"#ff3300";case"warning":return"#ffaa00";case"ghost":return"#666666";case"hero":return"#00ff88";default:return e&&e<.9?"#ffaa00":"#00ff88"}}function H4(i,t,e){const n=tC(e.visualState,t,e.confidence),a=t?28:24,s=e.airline?o1(e.callsign):null;let o="",c="";switch(e.visualState){case"hostile":o="animation: hostile-pulse 0.5s infinite;",c=`<div style="position:absolute;top:-12px;left:50%;transform:translateX(-50%);font-size:10px;">${s?.countryFlag||""}</div>`;break;case"hijacked":o=(e.dataCorruption||0)>.5?"animation: glitch 0.1s infinite; filter: blur(1px);":"animation: hijack-flash 0.3s infinite;";break;case"ghost":o="animation: ghost-fade 1s infinite; opacity: 0.5;";break;case"hero":o="animation: hero-glow 1s infinite;";break}s&&e.visualState!=="hostile"&&(c=`<div style="position:absolute;top:-10px;left:-8px;font-size:8px;background:rgba(0,0,0,0.7);padding:1px 2px;border-radius:2px;">${s.countryFlag}</div>`);const f=e.transponderActive===!1?'<div style="position:absolute;bottom:-8px;left:50%;transform:translateX(-50%);font-size:7px;color:#ff6600;">NO XPDR</div>':"";return Xw.divIcon({className:"aircraft-marker",html:`
      <style>
        @keyframes hostile-pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        @keyframes hijack-flash { 0%, 100% { filter: none; } 50% { filter: hue-rotate(30deg); } }
        @keyframes ghost-fade { 0%, 100% { opacity: 0.3; } 50% { opacity: 0.7; } }
        @keyframes hero-glow { 0%, 100% { filter: drop-shadow(0 0 4px #00ff88); } 50% { filter: drop-shadow(0 0 12px #00ff88); } }
        @keyframes glitch { 0% { transform: translate(0); } 25% { transform: translate(-2px, 1px); } 50% { transform: translate(2px, -1px); } 75% { transform: translate(-1px, 2px); } 100% { transform: translate(0); } }
      </style>
      <div class="aircraft-icon" style="position:relative;transform: rotate(${i}deg);${o}">
        ${c}
        <svg width="${a}" height="${a}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 2L8 10H4L6 12L4 14H8L12 22L16 14H20L18 12L20 10H16L12 2Z"
                fill="${n}"
                stroke="${t?"#ffffff":"#000000"}"
                stroke-width="1"
                filter="drop-shadow(0 0 ${t?"8":"4"}px ${n})"/>
        </svg>
        ${f}
      </div>
    `,iconSize:[a,a],iconAnchor:[a/2,a/2],popupAnchor:[0,-a/2]})}function eC(i){return i>=18e3?`FL${Math.round(i/100)}`:`${Math.round(i/100)*100}'`}function G4(i){return Math.abs(i)<100?"":i>0?"":""}function j4({track:i,isSelected:t,onSelect:e,showDataBlock:n,trailPositions:a=[]}){const s=ct.useMemo(()=>H4(i.headingDeg,t,i),[i.headingDeg,t,i.confidence,i.visualState,i.dataCorruption,i.transponderActive,i.airline,i.callsign]),o=ct.useMemo(()=>o1(i.callsign),[i.callsign]),c=i.aircraftType?T2[i.aircraftType]:null,f=[i.latitudeDeg,i.longitudeDeg];return O.jsxs(O.Fragment,{children:[a.length>1&&O.jsx($w,{positions:a,pathOptions:{color:t?"#00d4ff":"#00ff88",weight:1,opacity:.4,dashArray:"4, 4"}}),O.jsx(Jw,{position:f,icon:s,eventHandlers:{click:()=>e(i.trackId)},children:O.jsx(k4,{className:"aircraft-popup",children:O.jsxs("div",{className:"popup-content",style:{fontFamily:"'JetBrains Mono', monospace",fontSize:11,minWidth:180},children:[O.jsxs("div",{className:"popup-header",style:{display:"flex",alignItems:"center",gap:6,marginBottom:6,paddingBottom:6,borderBottom:"1px solid rgba(0, 255, 136, 0.3)"},children:[o&&O.jsx("span",{style:{fontSize:14},children:o.countryFlag}),O.jsx("span",{style:{fontWeight:700,color:tC(i.visualState,!1,i.confidence)},children:i.callsign}),i.visualState==="hostile"&&O.jsx("span",{style:{background:"#ff0000",color:"white",fontSize:8,padding:"1px 4px",borderRadius:2,fontWeight:700},children:"HOSTILE"}),i.squawkCode==="7500"&&O.jsx("span",{style:{background:"#ff3300",color:"white",fontSize:8,padding:"1px 4px",borderRadius:2,fontWeight:700},children:"HIJACK"})]}),(o||c)&&O.jsxs("div",{style:{marginBottom:6,color:"#8b949e",fontSize:10},children:[o&&O.jsx("div",{children:o.name}),c&&O.jsx("div",{children:c.name}),i.souls&&O.jsxs("div",{style:{color:"#00d4ff"},children:[i.souls," souls on board"]})]}),O.jsxs("div",{className:"popup-data",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2},children:[O.jsxs("div",{children:["ALT: ",eC(i.altitudeFt)]}),O.jsxs("div",{children:["SPD: ",i.speedKt," KT"]}),O.jsxs("div",{children:["HDG: ",Math.round(i.headingDeg),""]}),O.jsxs("div",{children:["V/S: ",i.verticalRateFpm>0?"+":"",i.verticalRateFpm]})]}),i.transponderActive===!1&&O.jsx("div",{style:{marginTop:6,padding:4,background:"rgba(255, 102, 0, 0.2)",borderRadius:2,color:"#ff6600",fontSize:9,textAlign:"center"},children:"TRANSPONDER INACTIVE"})]})})}),n&&O.jsx(W4,{track:i,isSelected:t})]})}function W4({track:i,isSelected:t}){const e=Xw.divIcon({className:"data-block-marker",html:`
      <div class="data-block ${t?"selected":""}" style="
        position: absolute;
        left: 20px;
        top: -20px;
        font-family: 'JetBrains Mono', monospace;
        font-size: 10px;
        color: ${t?"#00d4ff":"#00ff88"};
        text-shadow: 0 0 4px currentColor;
        white-space: nowrap;
        pointer-events: none;
      ">
        <div style="font-weight: bold;">${i.callsign}</div>
        <div>${eC(i.altitudeFt)} ${G4(i.verticalRateFpm)}</div>
        <div>${i.speedKt}</div>
      </div>
    `,iconSize:[0,0],iconAnchor:[0,0]});return O.jsx(Jw,{position:[i.latitudeDeg,i.longitudeDeg],icon:e,interactive:!1})}const Rg=new Set;let lA={time:0,deltaTime:0,isPaused:!1},jx=0,Bp=null;function nC(i){const t=jx?(i-jx)/1e3:0;jx=i,lA={time:i/1e3,deltaTime:t,isPaused:!1},Rg.forEach(e=>e(lA)),Bp=requestAnimationFrame(nC)}function q4(){Bp===null&&(Bp=requestAnimationFrame(nC))}function X4(){Bp!==null&&(cancelAnimationFrame(Bp),Bp=null)}function Y4(i){const t=ct.useRef(i);t.current=i,ct.useEffect(()=>{const e=n=>t.current(n);return Rg.add(e),Rg.size===1&&q4(),()=>{Rg.delete(e),Rg.size===0&&X4()}},[])}function Z4(i){const t=Math.random()*Math.PI*2,e=i*(.5+Math.random()*.5);return{x:Math.cos(t)*e,y:Math.sin(t)*e}}function K4({width:i,height:t,sweepSpeed:e=4,color:n="#00ff88"}){const a=ct.useRef(null),s=ct.useRef(0);return Y4(({deltaTime:o})=>{const c=a.current;if(!c)return;const f=c.getContext("2d");if(!f)return;const d=i/2,g=t/2,y=Math.min(d,g)*.95;s.current+=o/e*Math.PI*2,s.current>=Math.PI*2&&(s.current-=Math.PI*2),f.clearRect(0,0,i,t);const x=60;for(let T=0;T<x;T++){const R=s.current-T/x*Math.PI*2,C=Math.exp(-2*(T/x)*3);if(C<.01)continue;f.beginPath(),f.moveTo(d,g),f.arc(d,g,y,R-.02,R+.02),f.closePath();const[w,N,I]=Q4(n);f.fillStyle=`rgba(${w}, ${N}, ${I}, ${C*.3})`,f.fill()}f.beginPath(),f.moveTo(d,g),f.lineTo(d+Math.cos(s.current)*y,g+Math.sin(s.current)*y);const b=f.createLinearGradient(d,g,d+Math.cos(s.current)*y,g+Math.sin(s.current)*y);b.addColorStop(0,`${n}00`),b.addColorStop(.3,`${n}88`),b.addColorStop(1,n),f.strokeStyle=b,f.lineWidth=2,f.stroke(),f.beginPath(),f.arc(d+Math.cos(s.current)*y,g+Math.sin(s.current)*y,4,0,Math.PI*2),f.fillStyle=n,f.shadowColor=n,f.shadowBlur=10,f.fill(),f.shadowBlur=0,f.strokeStyle=`${n}20`,f.lineWidth=1,f.setLineDash([4,8]),[.25,.5,.75,1].forEach(T=>{f.beginPath(),f.arc(d,g,y*T,0,Math.PI*2),f.stroke()}),f.setLineDash([]),f.beginPath(),f.arc(d,g,3,0,Math.PI*2),f.fillStyle=n,f.fill()}),O.jsx("canvas",{ref:a,width:i,height:t,style:{position:"absolute",top:0,left:0,pointerEvents:"none",zIndex:400}})}function Q4(i){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[0,255,136]}const cA=i=>{let t;const e=new Set,n=(d,g)=>{const y=typeof d=="function"?d(t):d;if(!Object.is(y,t)){const x=t;t=g??(typeof y!="object"||y===null)?y:Object.assign({},t,y),e.forEach(b=>b(t,x))}},a=()=>t,c={setState:n,getState:a,getInitialState:()=>f,subscribe:d=>(e.add(d),()=>e.delete(d))},f=t=i(n,a,c);return c},iC=(i=>i?cA(i):cA),J4=i=>i;function $4(i,t=J4){const e=Lu.useSyncExternalStore(i.subscribe,Lu.useCallback(()=>t(i.getState()),[i,t]),Lu.useCallback(()=>t(i.getInitialState()),[i,t]));return Lu.useDebugValue(e),e}const uA=i=>{const t=iC(i),e=n=>$4(t,n);return Object.assign(e,t),e},l1=(i=>i?uA(i):uA),fA=20;l1((i,t)=>({tracks:[],selectedTrackId:null,trackHistory:new Map,setTracks:e=>{const n=new Map(t().trackHistory);e.forEach(a=>{const s=n.get(a.trackId)||[],o=[a.latitudeDeg,a.longitudeDeg];(s.length===0||Math.abs(s[s.length-1][0]-o[0])>.001||Math.abs(s[s.length-1][1]-o[1])>.001)&&(s.push(o),s.length>fA&&s.shift(),n.set(a.trackId,s))}),i({tracks:e,trackHistory:n})},selectTrack:e=>i({selectedTrackId:e}),updateTrack:(e,n)=>i(a=>({tracks:a.tracks.map(s=>s.trackId===e?{...s,...n}:s)})),addTrackPosition:(e,n)=>i(a=>{const s=new Map(a.trackHistory),o=s.get(e)||[];return o.push(n),o.length>fA&&o.shift(),s.set(e,o),{trackHistory:s}})}));const Hs=l1(i=>({appMode:"demo",liveOnly:!1,viewMode:"2d",showDataBlocks:!0,showTrails:!0,showWeather:!0,show4DTrajectories:!1,narrationEnabled:!0,atcAudioEnabled:!0,alertSoundsEnabled:!0,autoTranslate:!0,audioVolume:.8,simulationSpeed:4,trackedFlightId:null,commandLog:[],heroModeActive:!1,timeOffsetMinutes:0,playbackSpeed:1,isPlaying:!1,presentationMode:"cinematic",showCommsPanel:!1,showAIPanel:!0,setViewMode:t=>i({viewMode:t}),toggleDataBlocks:()=>i(t=>({showDataBlocks:!t.showDataBlocks})),toggleTrails:()=>i(t=>({showTrails:!t.showTrails})),toggleWeather:()=>i(t=>({showWeather:!t.showWeather})),toggle4DTrajectories:()=>i(t=>({show4DTrajectories:!t.show4DTrajectories})),setTimeOffset:t=>i({timeOffsetMinutes:Math.max(0,Math.min(60,t))}),setPlaybackSpeed:t=>i({playbackSpeed:t}),togglePlayback:()=>i(t=>({isPlaying:!t.isPlaying})),setPresentationMode:t=>i({presentationMode:t}),toggleCommsPanel:()=>i(t=>({showCommsPanel:!t.showCommsPanel})),toggleAIPanel:()=>i(t=>({showAIPanel:!t.showAIPanel})),setSimulationSpeed:t=>i({simulationSpeed:Math.max(1,Math.min(300,t))}),setAppMode:t=>i({appMode:t,simulationSpeed:t==="demo"?4:150}),setTrackedFlightId:t=>i({trackedFlightId:t}),addCommandLog:t=>i(e=>({commandLog:[{...t,id:`cmd-${Date.now()}`,timestamp:new Date},...e.commandLog].slice(0,50)})),clearCommandLog:()=>i({commandLog:[]}),setHeroModeActive:t=>i({heroModeActive:t}),setLiveOnly:t=>i({liveOnly:t}),setNarrationEnabled:t=>i({narrationEnabled:t}),setAtcAudioEnabled:t=>i({atcAudioEnabled:t}),setAlertSoundsEnabled:t=>i({alertSoundsEnabled:t}),setAutoTranslate:t=>i({autoTranslate:t}),setAudioVolume:t=>i({audioVolume:Math.max(0,Math.min(1,t))})}));l1(i=>({alerts:[],setAlerts:t=>i({alerts:t}),addAlert:t=>i(e=>({alerts:[t,...e.alerts]})),acknowledgeAlert:t=>i(e=>({alerts:e.alerts.map(n=>n.alertId===t?{...n,acknowledged:!0}:n)})),removeAlert:t=>i(e=>({alerts:e.alerts.filter(n=>n.alertId!==t)}))}));const aC=l1(i=>({activeEmergencies:[],screenShake:null,vignetteColor:null,triggerEmergency:t=>i(e=>({activeEmergencies:[...e.activeEmergencies,{...t,phase:"warning",startTime:Date.now()}]})),updateEmergencyPhase:(t,e)=>i(n=>({activeEmergencies:n.activeEmergencies.map(a=>a.id===t?{...a,phase:e}:a)})),clearEmergency:t=>i(e=>({activeEmergencies:e.activeEmergencies.filter(n=>n.id!==t)})),triggerScreenShake:(t,e)=>i({screenShake:{intensity:t,duration:e}}),clearScreenShake:()=>i({screenShake:null}),setVignetteColor:t=>i({vignetteColor:t})})),Wx=new Map,t5=20;function e5(){const i=M2(),t=ct.useRef(null);return ct.useEffect(()=>{const e=i.getContainer();if(e.querySelector(".radar-sweep-container"))return;const a=document.createElement("div");return a.className="radar-sweep-container",a.innerHTML=`
      <div class="radar-sweep" style="
        position: absolute;
        top: 50%;
        left: 50%;
        width: 200%;
        height: 200%;
        transform: translate(-50%, -50%);
        pointer-events: none;
        z-index: 400;
      ">
        <div style="
          position: absolute;
          top: 50%;
          left: 50%;
          width: 100%;
          height: 2px;
          background: linear-gradient(90deg, rgba(0,255,136,0.5) 0%, rgba(0,255,136,0) 100%);
          transform-origin: 0% 50%;
          animation: radar-sweep 4s linear infinite;
        "></div>
      </div>
    `,e.appendChild(a),t.current=a,()=>{t.current&&e.contains(t.current)&&e.removeChild(t.current)}},[i]),null}function n5({center:i}){const t=[10,25,50,100];return O.jsx(O.Fragment,{children:t.map(e=>O.jsx(Qw,{center:i,radius:e*1852,pathOptions:{color:"rgba(0, 255, 136, 0.15)",weight:1,fill:!1,dashArray:"4, 8"}},e))})}function i5({overlays:i}){const t=e=>{switch(e){case"EXTREME":return"rgba(255, 51, 102, 0.5)";case"SEVERE":return"rgba(255, 170, 0, 0.4)";case"MODERATE":return"rgba(255, 255, 0, 0.3)";default:return"rgba(0, 212, 255, 0.2)"}};return O.jsx(O.Fragment,{children:i.map(e=>O.jsx(Qw,{center:e.center,radius:e.radiusNm*1852,pathOptions:{color:t(e.severity),fillColor:t(e.severity),fillOpacity:.3,weight:2}},e.id))})}function a5({sectors:i}){return O.jsx(O.Fragment,{children:i.map(t=>O.jsx($w,{positions:t.coordinates,pathOptions:{color:t.isActive?"#00d4ff":"#6e7681",weight:t.isActive?2:1,opacity:t.isActive?.8:.4,dashArray:t.isActive?void 0:"8, 4"}},t.id))})}function s5({tracks:i}){const t=M2(),{trackedFlightId:e}=Hs();return ct.useEffect(()=>{if(!e)return;const n=i.find(a=>a.trackId===e);n&&t.panTo([n.latitudeDeg,n.longitudeDeg],{animate:!0,duration:.5})},[t,e,i]),null}function r5(){const i=M2();return ct.useEffect(()=>{const t=i.getContainer();if(t.querySelector(".compass-rose-container"))return;const n=document.createElement("div");return n.className="compass-rose-container",n.innerHTML=`
      <div style="
        position: absolute;
        top: 20px;
        right: 20px;
        width: 80px;
        height: 80px;
        border: 1px solid rgba(0, 255, 136, 0.3);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: 'Orbitron', monospace;
        font-size: 10px;
        color: #00ff88;
        z-index: 500;
        background: rgba(10, 14, 20, 0.8);
      ">
        <div style="position: absolute; top: 5px;">N</div>
        <div style="position: absolute; bottom: 5px;">S</div>
        <div style="position: absolute; left: 8px;">W</div>
        <div style="position: absolute; right: 8px;">E</div>
        <div style="
          width: 2px;
          height: 30px;
          background: linear-gradient(to bottom, #ff3366, #00ff88);
          position: absolute;
        "></div>
        <div style="
          width: 30px;
          height: 2px;
          background: rgba(0, 255, 136, 0.5);
          position: absolute;
        "></div>
      </div>
    `,t.appendChild(n),()=>{t.contains(n)&&t.removeChild(n)}},[i]),null}function o5({tracks:i,selectedTrackId:t,onSelectTrack:e,showDataBlocks:n,showTrails:a,weatherOverlays:s=[],sectorBoundaries:o=[]}){const c=[42,-71],f=ct.useRef(null),[d,g]=ct.useState(800),[y,x]=ct.useState(600);return ct.useEffect(()=>{if(!f.current)return;const b=()=>{f.current&&(g(f.current.offsetWidth),x(f.current.offsetHeight))};return b(),window.addEventListener("resize",b),()=>{window.removeEventListener("resize",b)}},[]),ct.useEffect(()=>{i.forEach(b=>{const T=Wx.get(b.trackId)||[],R=[b.latitudeDeg,b.longitudeDeg];(T.length===0||Math.abs(T[T.length-1][0]-R[0])>.001||Math.abs(T[T.length-1][1]-R[1])>.001)&&(T.push(R),T.length>t5&&T.shift(),Wx.set(b.trackId,T))})},[i]),O.jsxs("div",{ref:f,className:"radar-map-container",style:{height:"100%",width:"100%",position:"relative"},children:[O.jsx(K4,{width:d||800,height:y||600}),O.jsxs(F4,{center:c,zoom:8,style:{height:"100%",width:"100%"},zoomControl:!1,attributionControl:!1,children:[O.jsx(V4,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:' <a href="https://carto.com/">CARTO</a>'}),O.jsx(e5,{}),O.jsx(r5,{}),O.jsx(n5,{center:c}),O.jsx(s5,{tracks:i}),O.jsx(a5,{sectors:o}),O.jsx(i5,{overlays:s}),i.map(b=>O.jsx(j4,{track:b,isSelected:t===b.trackId,onSelect:e,showDataBlock:n,trailPositions:a?Wx.get(b.trackId):void 0},b.trackId))]}),O.jsx("div",{className:"map-controls",style:{position:"absolute",bottom:20,left:20,display:"flex",gap:8,zIndex:1e3},children:O.jsxs("div",{style:{background:"rgba(13, 17, 23, 0.9)",border:"1px solid rgba(0, 255, 136, 0.2)",borderRadius:4,padding:"8px 12px",fontFamily:"'JetBrains Mono', monospace",fontSize:11,color:"#00ff88"},children:[O.jsx("span",{style:{opacity:.7},children:"TRK:"})," ",i.length]})}),O.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"none",background:"repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0, 0, 0, 0.03) 2px, rgba(0, 0, 0, 0.03) 4px)",zIndex:999}})]})}var qx={exports:{}},xu={};var hA;function l5(){return hA||(hA=1,xu.ConcurrentRoot=1,xu.ContinuousEventPriority=8,xu.DefaultEventPriority=32,xu.DiscreteEventPriority=2,xu.IdleEventPriority=268435456,xu.LegacyRoot=0,xu.NoEventPriority=0),xu}var dA;function c5(){return dA||(dA=1,qx.exports=l5()),qx.exports}var Wy=c5();const c1="182",Hh={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Gh={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},sC=0,bb=1,rC=2,u5=3,oC=0,Fp=1,Pg=2,Xh=3,Nu=0,Vr=1,cl=2,zc=0,$h=1,Mb=2,Tb=3,Ab=4,lC=5,Of=100,cC=101,uC=102,fC=103,hC=104,dC=200,pC=201,mC=202,gC=203,n_=204,i_=205,vC=206,yC=207,_C=208,xC=209,SC=210,bC=211,MC=212,TC=213,AC=214,a_=0,s_=1,r_=2,sd=3,o_=4,l_=5,c_=6,u_=7,A0=0,EC=1,wC=2,fl=0,A2=1,E2=2,w2=3,u1=4,C2=5,R2=6,D2=7,Eb="attached",CC="detached",f1=300,kc=301,Bf=302,$g=303,t0=304,nm=306,e0=1e3,ao=1001,n0=1002,Ba=1003,L2=1004,f5=1004,Dp=1005,h5=1005,Di=1006,zg=1007,d5=1007,Uc=1008,p5=1008,Br=1009,O2=1010,N2=1011,Hp=1012,h1=1013,dl=1014,ar=1015,tc=1016,d1=1017,p1=1018,Gp=1020,U2=35902,I2=35899,P2=1021,z2=1022,sr=1023,Vc=1026,If=1027,m1=1028,E0=1029,rd=1030,g1=1031,m5=1032,v1=1033,Bg=33776,Fg=33777,kg=33778,Vg=33779,f_=35840,h_=35841,d_=35842,p_=35843,m_=36196,g_=37492,v_=37496,y_=37488,__=37489,x_=37490,S_=37491,b_=37808,M_=37809,T_=37810,A_=37811,E_=37812,w_=37813,C_=37814,R_=37815,D_=37816,L_=37817,O_=37818,N_=37819,U_=37820,I_=37821,P_=36492,z_=36494,B_=36495,F_=36283,k_=36284,V_=36285,H_=36286,RC=2200,DC=2201,LC=2202,i0=2300,G_=2301,qy=2302,Yh=2400,Zh=2401,a0=2402,y1=2500,B2=2501,g5=0,v5=1,y5=2,OC=3200,NC=3201,_5=3202,x5=3203,jf=0,UC=1,Cu="",ir="srgb",Ff="srgb-linear",s0="linear",Ti="srgb",S5="",b5="rg",M5="ga",T5=0,jh=7680,A5=7681,E5=7682,w5=7683,C5=34055,R5=34056,D5=5386,L5=512,O5=513,N5=514,U5=515,I5=516,P5=517,z5=518,wb=519,IC=512,PC=513,zC=514,_1=515,BC=516,FC=517,x1=518,kC=519,r0=35044,B5=35048,F5=35040,k5=35045,V5=35049,H5=35041,G5=35046,j5=35050,W5=35042,q5="100",Cb="300 es",Fo=2e3,jp=2001,X5={COMPUTE:"compute",RENDER:"render"},Y5={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},Z5={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};function VC(i){for(let t=i.length-1;t>=0;--t)if(i[t]>=65535)return!0;return!1}const K5={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Lp(i,t){return new K5[i](t)}function HC(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function o0(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function GC(){const i=o0("canvas");return i.style.display="block",i}const pA={};let kf=null;function Q5(i){kf=i}function J5(){return kf}function l0(...i){const t="THREE."+i.shift();kf?kf("log",t,...i):console.log(t,...i)}function Ie(...i){const t="THREE."+i.shift();kf?kf("warn",t,...i):console.warn(t,...i)}function rn(...i){const t="THREE."+i.shift();kf?kf("error",t,...i):console.error(t,...i)}function Wp(...i){const t=i.join(" ");t in pA||(pA[t]=!0,Ie(...i))}function $5(i,t,e){return new Promise(function(n,a){function s(){switch(i.clientWaitSync(t,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:a();break;case i.TIMEOUT_EXPIRED:setTimeout(s,e);break;default:n()}}setTimeout(s,e)})}let Hc=class{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)}hasEventListener(t,e){const n=this._listeners;return n===void 0?!1:n[t]!==void 0&&n[t].indexOf(e)!==-1}removeEventListener(t,e){const n=this._listeners;if(n===void 0)return;const a=n[t];if(a!==void 0){const s=a.indexOf(e);s!==-1&&a.splice(s,1)}}dispatchEvent(t){const e=this._listeners;if(e===void 0)return;const n=e[t.type];if(n!==void 0){t.target=this;const a=n.slice(0);for(let s=0,o=a.length;s<o;s++)a[s].call(this,t);t.target=null}}};const tr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let mA=1234567;const td=Math.PI/180,qp=180/Math.PI;function ko(){const i=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(tr[i&255]+tr[i>>8&255]+tr[i>>16&255]+tr[i>>24&255]+"-"+tr[t&255]+tr[t>>8&255]+"-"+tr[t>>16&15|64]+tr[t>>24&255]+"-"+tr[e&63|128]+tr[e>>8&255]+"-"+tr[e>>16&255]+tr[e>>24&255]+tr[n&255]+tr[n>>8&255]+tr[n>>16&255]+tr[n>>24&255]).toLowerCase()}function mn(i,t,e){return Math.max(t,Math.min(e,i))}function F2(i,t){return(i%t+t)%t}function tN(i,t,e,n,a){return n+(i-t)*(a-n)/(e-t)}function eN(i,t,e){return i!==t?(e-i)/(t-i):0}function Hg(i,t,e){return(1-e)*i+e*t}function nN(i,t,e,n){return Hg(i,t,1-Math.exp(-e*n))}function iN(i,t=1){return t-Math.abs(F2(i,t*2)-t)}function aN(i,t,e){return i<=t?0:i>=e?1:(i=(i-t)/(e-t),i*i*(3-2*i))}function sN(i,t,e){return i<=t?0:i>=e?1:(i=(i-t)/(e-t),i*i*i*(i*(i*6-15)+10))}function rN(i,t){return i+Math.floor(Math.random()*(t-i+1))}function oN(i,t){return i+Math.random()*(t-i)}function lN(i){return i*(.5-Math.random())}function cN(i){i!==void 0&&(mA=i);let t=mA+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function uN(i){return i*td}function fN(i){return i*qp}function hN(i){return(i&i-1)===0&&i!==0}function dN(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function pN(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function mN(i,t,e,n,a){const s=Math.cos,o=Math.sin,c=s(e/2),f=o(e/2),d=s((t+n)/2),g=o((t+n)/2),y=s((t-n)/2),x=o((t-n)/2),b=s((n-t)/2),T=o((n-t)/2);switch(a){case"XYX":i.set(c*g,f*y,f*x,c*d);break;case"YZY":i.set(f*x,c*g,f*y,c*d);break;case"ZXZ":i.set(f*y,f*x,c*g,c*d);break;case"XZX":i.set(c*g,f*T,f*b,c*d);break;case"YXY":i.set(f*b,c*g,f*T,c*d);break;case"ZYZ":i.set(f*T,f*b,c*g,c*d);break;default:Ie("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+a)}}function Fr(i,t){switch(t.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function On(i,t){switch(t.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const gN={DEG2RAD:td,RAD2DEG:qp,generateUUID:ko,clamp:mn,euclideanModulo:F2,mapLinear:tN,inverseLerp:eN,lerp:Hg,damp:nN,pingpong:iN,smoothstep:aN,smootherstep:sN,randInt:rN,randFloat:oN,randFloatSpread:lN,seededRandom:cN,degToRad:uN,radToDeg:fN,isPowerOfTwo:hN,ceilPowerOfTwo:dN,floorPowerOfTwo:pN,setQuaternionFromProperEuler:mN,normalize:On,denormalize:Fr};class de{constructor(t=0,e=0){de.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,a=t.elements;return this.x=a[0]*e+a[3]*n+a[6],this.y=a[1]*e+a[4]*n+a[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=mn(this.x,t.x,e.x),this.y=mn(this.y,t.y,e.y),this}clampScalar(t,e){return this.x=mn(this.x,t,e),this.y=mn(this.y,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(mn(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(mn(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),a=Math.sin(e),s=this.x-t.x,o=this.y-t.y;return this.x=s*n-o*a+t.x,this.y=s*a+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class or{constructor(t=0,e=0,n=0,a=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=a}static slerpFlat(t,e,n,a,s,o,c){let f=n[a+0],d=n[a+1],g=n[a+2],y=n[a+3],x=s[o+0],b=s[o+1],T=s[o+2],R=s[o+3];if(c<=0){t[e+0]=f,t[e+1]=d,t[e+2]=g,t[e+3]=y;return}if(c>=1){t[e+0]=x,t[e+1]=b,t[e+2]=T,t[e+3]=R;return}if(y!==R||f!==x||d!==b||g!==T){let C=f*x+d*b+g*T+y*R;C<0&&(x=-x,b=-b,T=-T,R=-R,C=-C);let w=1-c;if(C<.9995){const N=Math.acos(C),I=Math.sin(N);w=Math.sin(w*N)/I,c=Math.sin(c*N)/I,f=f*w+x*c,d=d*w+b*c,g=g*w+T*c,y=y*w+R*c}else{f=f*w+x*c,d=d*w+b*c,g=g*w+T*c,y=y*w+R*c;const N=1/Math.sqrt(f*f+d*d+g*g+y*y);f*=N,d*=N,g*=N,y*=N}}t[e]=f,t[e+1]=d,t[e+2]=g,t[e+3]=y}static multiplyQuaternionsFlat(t,e,n,a,s,o){const c=n[a],f=n[a+1],d=n[a+2],g=n[a+3],y=s[o],x=s[o+1],b=s[o+2],T=s[o+3];return t[e]=c*T+g*y+f*b-d*x,t[e+1]=f*T+g*x+d*y-c*b,t[e+2]=d*T+g*b+c*x-f*y,t[e+3]=g*T-c*y-f*x-d*b,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,a){return this._x=t,this._y=e,this._z=n,this._w=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const n=t._x,a=t._y,s=t._z,o=t._order,c=Math.cos,f=Math.sin,d=c(n/2),g=c(a/2),y=c(s/2),x=f(n/2),b=f(a/2),T=f(s/2);switch(o){case"XYZ":this._x=x*g*y+d*b*T,this._y=d*b*y-x*g*T,this._z=d*g*T+x*b*y,this._w=d*g*y-x*b*T;break;case"YXZ":this._x=x*g*y+d*b*T,this._y=d*b*y-x*g*T,this._z=d*g*T-x*b*y,this._w=d*g*y+x*b*T;break;case"ZXY":this._x=x*g*y-d*b*T,this._y=d*b*y+x*g*T,this._z=d*g*T+x*b*y,this._w=d*g*y-x*b*T;break;case"ZYX":this._x=x*g*y-d*b*T,this._y=d*b*y+x*g*T,this._z=d*g*T-x*b*y,this._w=d*g*y+x*b*T;break;case"YZX":this._x=x*g*y+d*b*T,this._y=d*b*y+x*g*T,this._z=d*g*T-x*b*y,this._w=d*g*y-x*b*T;break;case"XZY":this._x=x*g*y-d*b*T,this._y=d*b*y-x*g*T,this._z=d*g*T+x*b*y,this._w=d*g*y+x*b*T;break;default:Ie("Quaternion: .setFromEuler() encountered an unknown order: "+o)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,a=Math.sin(n);return this._x=t.x*a,this._y=t.y*a,this._z=t.z*a,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],a=e[4],s=e[8],o=e[1],c=e[5],f=e[9],d=e[2],g=e[6],y=e[10],x=n+c+y;if(x>0){const b=.5/Math.sqrt(x+1);this._w=.25/b,this._x=(g-f)*b,this._y=(s-d)*b,this._z=(o-a)*b}else if(n>c&&n>y){const b=2*Math.sqrt(1+n-c-y);this._w=(g-f)/b,this._x=.25*b,this._y=(a+o)/b,this._z=(s+d)/b}else if(c>y){const b=2*Math.sqrt(1+c-n-y);this._w=(s-d)/b,this._x=(a+o)/b,this._y=.25*b,this._z=(f+g)/b}else{const b=2*Math.sqrt(1+y-n-c);this._w=(o-a)/b,this._x=(s+d)/b,this._y=(f+g)/b,this._z=.25*b}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<1e-8?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(mn(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(n===0)return this;const a=Math.min(1,e/n);return this.slerp(t,a),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,a=t._y,s=t._z,o=t._w,c=e._x,f=e._y,d=e._z,g=e._w;return this._x=n*g+o*c+a*d-s*f,this._y=a*g+o*f+s*c-n*d,this._z=s*g+o*d+n*f-a*c,this._w=o*g-n*c-a*f-s*d,this._onChangeCallback(),this}slerp(t,e){if(e<=0)return this;if(e>=1)return this.copy(t);let n=t._x,a=t._y,s=t._z,o=t._w,c=this.dot(t);c<0&&(n=-n,a=-a,s=-s,o=-o,c=-c);let f=1-e;if(c<.9995){const d=Math.acos(c),g=Math.sin(d);f=Math.sin(f*d)/g,e=Math.sin(e*d)/g,this._x=this._x*f+n*e,this._y=this._y*f+a*e,this._z=this._z*f+s*e,this._w=this._w*f+o*e,this._onChangeCallback()}else this._x=this._x*f+n*e,this._y=this._y*f+a*e,this._z=this._z*f+s*e,this._w=this._w*f+o*e,this.normalize();return this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),n=Math.random(),a=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(a*Math.sin(t),a*Math.cos(t),s*Math.sin(e),s*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class pt{constructor(t=0,e=0,n=0){pt.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return n===void 0&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(gA.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(gA.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,a=this.z,s=t.elements;return this.x=s[0]*e+s[3]*n+s[6]*a,this.y=s[1]*e+s[4]*n+s[7]*a,this.z=s[2]*e+s[5]*n+s[8]*a,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,a=this.z,s=t.elements,o=1/(s[3]*e+s[7]*n+s[11]*a+s[15]);return this.x=(s[0]*e+s[4]*n+s[8]*a+s[12])*o,this.y=(s[1]*e+s[5]*n+s[9]*a+s[13])*o,this.z=(s[2]*e+s[6]*n+s[10]*a+s[14])*o,this}applyQuaternion(t){const e=this.x,n=this.y,a=this.z,s=t.x,o=t.y,c=t.z,f=t.w,d=2*(o*a-c*n),g=2*(c*e-s*a),y=2*(s*n-o*e);return this.x=e+f*d+o*y-c*g,this.y=n+f*g+c*d-s*y,this.z=a+f*y+s*g-o*d,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,a=this.z,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*a,this.y=s[1]*e+s[5]*n+s[9]*a,this.z=s[2]*e+s[6]*n+s[10]*a,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=mn(this.x,t.x,e.x),this.y=mn(this.y,t.y,e.y),this.z=mn(this.z,t.z,e.z),this}clampScalar(t,e){return this.x=mn(this.x,t,e),this.y=mn(this.y,t,e),this.z=mn(this.z,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(mn(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,a=t.y,s=t.z,o=e.x,c=e.y,f=e.z;return this.x=a*f-s*c,this.y=s*o-n*f,this.z=n*c-a*o,this}projectOnVector(t){const e=t.lengthSq();if(e===0)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return Xx.copy(this).projectOnVector(t),this.sub(Xx)}reflect(t){return this.sub(Xx.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(mn(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,a=this.z-t.z;return e*e+n*n+a*a}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const a=Math.sin(e)*t;return this.x=a*Math.sin(n),this.y=Math.cos(e)*t,this.z=a*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),a=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=a,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=Math.random()*2-1,n=Math.sqrt(1-e*e);return this.x=n*Math.cos(t),this.y=e,this.z=n*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Xx=new pt,gA=new or;class En{constructor(t,e,n,a,s,o,c,f,d){En.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,e,n,a,s,o,c,f,d)}set(t,e,n,a,s,o,c,f,d){const g=this.elements;return g[0]=t,g[1]=a,g[2]=c,g[3]=e,g[4]=s,g[5]=f,g[6]=n,g[7]=o,g[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,a=e.elements,s=this.elements,o=n[0],c=n[3],f=n[6],d=n[1],g=n[4],y=n[7],x=n[2],b=n[5],T=n[8],R=a[0],C=a[3],w=a[6],N=a[1],I=a[4],z=a[7],F=a[2],H=a[5],q=a[8];return s[0]=o*R+c*N+f*F,s[3]=o*C+c*I+f*H,s[6]=o*w+c*z+f*q,s[1]=d*R+g*N+y*F,s[4]=d*C+g*I+y*H,s[7]=d*w+g*z+y*q,s[2]=x*R+b*N+T*F,s[5]=x*C+b*I+T*H,s[8]=x*w+b*z+T*q,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],a=t[2],s=t[3],o=t[4],c=t[5],f=t[6],d=t[7],g=t[8];return e*o*g-e*c*d-n*s*g+n*c*f+a*s*d-a*o*f}invert(){const t=this.elements,e=t[0],n=t[1],a=t[2],s=t[3],o=t[4],c=t[5],f=t[6],d=t[7],g=t[8],y=g*o-c*d,x=c*f-g*s,b=d*s-o*f,T=e*y+n*x+a*b;if(T===0)return this.set(0,0,0,0,0,0,0,0,0);const R=1/T;return t[0]=y*R,t[1]=(a*d-g*n)*R,t[2]=(c*n-a*o)*R,t[3]=x*R,t[4]=(g*e-a*f)*R,t[5]=(a*s-c*e)*R,t[6]=b*R,t[7]=(n*f-d*e)*R,t[8]=(o*e-n*s)*R,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,a,s,o,c){const f=Math.cos(s),d=Math.sin(s);return this.set(n*f,n*d,-n*(f*o+d*c)+o+t,-a*d,a*f,-a*(-d*o+f*c)+c+e,0,0,1),this}scale(t,e){return this.premultiply(Yx.makeScale(t,e)),this}rotate(t){return this.premultiply(Yx.makeRotation(-t)),this}translate(t,e){return this.premultiply(Yx.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let a=0;a<9;a++)if(e[a]!==n[a])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const Yx=new En,vA=new En().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),yA=new En().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function vN(){const i={enabled:!0,workingColorSpace:Ff,spaces:{},convert:function(a,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===Ti&&(a.r=Ou(a.r),a.g=Ou(a.g),a.b=Ou(a.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(a.applyMatrix3(this.spaces[s].toXYZ),a.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===Ti&&(a.r=kp(a.r),a.g=kp(a.g),a.b=kp(a.b))),a},workingToColorSpace:function(a,s){return this.convert(a,this.workingColorSpace,s)},colorSpaceToWorking:function(a,s){return this.convert(a,s,this.workingColorSpace)},getPrimaries:function(a){return this.spaces[a].primaries},getTransfer:function(a){return a===Cu?s0:this.spaces[a].transfer},getToneMappingMode:function(a){return this.spaces[a].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(a,s=this.workingColorSpace){return a.fromArray(this.spaces[s].luminanceCoefficients)},define:function(a){Object.assign(this.spaces,a)},_getMatrix:function(a,s,o){return a.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(a){return this.spaces[a].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(a=this.workingColorSpace){return this.spaces[a].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(a,s){return Wp("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),i.workingToColorSpace(a,s)},toWorkingColorSpace:function(a,s){return Wp("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),i.colorSpaceToWorking(a,s)}},t=[.64,.33,.3,.6,.15,.06],e=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[Ff]:{primaries:t,whitePoint:n,transfer:s0,toXYZ:vA,fromXYZ:yA,luminanceCoefficients:e,workingColorSpaceConfig:{unpackColorSpace:ir},outputColorSpaceConfig:{drawingBufferColorSpace:ir}},[ir]:{primaries:t,whitePoint:n,transfer:Ti,toXYZ:vA,fromXYZ:yA,luminanceCoefficients:e,outputColorSpaceConfig:{drawingBufferColorSpace:ir}}}),i}const Xn=vN();function Ou(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function kp(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let ap;class jC{static getDataURL(t,e="image/png"){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let n;if(t instanceof HTMLCanvasElement)n=t;else{ap===void 0&&(ap=o0("canvas")),ap.width=t.width,ap.height=t.height;const a=ap.getContext("2d");t instanceof ImageData?a.putImageData(t,0,0):a.drawImage(t,0,0,t.width,t.height),n=ap}return n.toDataURL(e)}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=o0("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const a=n.getImageData(0,0,t.width,t.height),s=a.data;for(let o=0;o<s.length;o++)s[o]=Ou(s[o]/255)*255;return n.putImageData(a,0,0),e}else if(t.data){const e=t.data.slice(0);for(let n=0;n<e.length;n++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[n]=Math.floor(Ou(e[n]/255)*255):e[n]=Ou(e[n]);return{data:e,width:t.width,height:t.height}}else return Ie("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let yN=0;class Pf{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:yN++}),this.uuid=ko(),this.data=t,this.dataReady=!0,this.version=0}getSize(t){const e=this.data;return typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?t.set(e.videoWidth,e.videoHeight,0):typeof VideoFrame<"u"&&e instanceof VideoFrame?t.set(e.displayHeight,e.displayWidth,0):e!==null?t.set(e.width,e.height,e.depth||0):t.set(0,0,0),t}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const n={uuid:this.uuid,url:""},a=this.data;if(a!==null){let s;if(Array.isArray(a)){s=[];for(let o=0,c=a.length;o<c;o++)a[o].isDataTexture?s.push(Zx(a[o].image)):s.push(Zx(a[o]))}else s=Zx(a);n.url=s}return e||(t.images[this.uuid]=n),n}}function Zx(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?jC.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(Ie("Texture: Unable to serialize Texture."),{})}let _N=0;const Kx=new pt;class pa extends Hc{constructor(t=pa.DEFAULT_IMAGE,e=pa.DEFAULT_MAPPING,n=ao,a=ao,s=Di,o=Uc,c=sr,f=Br,d=pa.DEFAULT_ANISOTROPY,g=Cu){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:_N++}),this.uuid=ko(),this.name="",this.source=new Pf(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=n,this.wrapT=a,this.magFilter=s,this.minFilter=o,this.anisotropy=d,this.format=c,this.internalFormat=null,this.type=f,this.offset=new de(0,0),this.repeat=new de(1,1),this.center=new de(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new En,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=g,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(t&&t.depth&&t.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(Kx).x}get height(){return this.source.getSize(Kx).y}get depth(){return this.source.getSize(Kx).z}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.isArrayTexture=t.isArrayTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}setValues(t){for(const e in t){const n=t[e];if(n===void 0){Ie(`Texture.setValues(): parameter '${e}' has value of undefined.`);continue}const a=this[e];if(a===void 0){Ie(`Texture.setValues(): property '${e}' does not exist.`);continue}a&&n&&a.isVector2&&n.isVector2||a&&n&&a.isVector3&&n.isVector3||a&&n&&a.isMatrix3&&n.isMatrix3?a.copy(n):this[e]=n}}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==f1)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case e0:t.x=t.x-Math.floor(t.x);break;case ao:t.x=t.x<0?0:1;break;case n0:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case e0:t.y=t.y-Math.floor(t.y);break;case ao:t.y=t.y<0?0:1;break;case n0:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}pa.DEFAULT_IMAGE=null;pa.DEFAULT_MAPPING=f1;pa.DEFAULT_ANISOTROPY=1;class Ri{constructor(t=0,e=0,n=0,a=1){Ri.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=a}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,a){return this.x=t,this.y=e,this.z=n,this.w=a,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,a=this.z,s=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*a+o[12]*s,this.y=o[1]*e+o[5]*n+o[9]*a+o[13]*s,this.z=o[2]*e+o[6]*n+o[10]*a+o[14]*s,this.w=o[3]*e+o[7]*n+o[11]*a+o[15]*s,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,a,s;const f=t.elements,d=f[0],g=f[4],y=f[8],x=f[1],b=f[5],T=f[9],R=f[2],C=f[6],w=f[10];if(Math.abs(g-x)<.01&&Math.abs(y-R)<.01&&Math.abs(T-C)<.01){if(Math.abs(g+x)<.1&&Math.abs(y+R)<.1&&Math.abs(T+C)<.1&&Math.abs(d+b+w-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const I=(d+1)/2,z=(b+1)/2,F=(w+1)/2,H=(g+x)/4,q=(y+R)/4,Z=(T+C)/4;return I>z&&I>F?I<.01?(n=0,a=.707106781,s=.707106781):(n=Math.sqrt(I),a=H/n,s=q/n):z>F?z<.01?(n=.707106781,a=0,s=.707106781):(a=Math.sqrt(z),n=H/a,s=Z/a):F<.01?(n=.707106781,a=.707106781,s=0):(s=Math.sqrt(F),n=q/s,a=Z/s),this.set(n,a,s,e),this}let N=Math.sqrt((C-T)*(C-T)+(y-R)*(y-R)+(x-g)*(x-g));return Math.abs(N)<.001&&(N=1),this.x=(C-T)/N,this.y=(y-R)/N,this.z=(x-g)/N,this.w=Math.acos((d+b+w-1)/2),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=mn(this.x,t.x,e.x),this.y=mn(this.y,t.y,e.y),this.z=mn(this.z,t.z,e.z),this.w=mn(this.w,t.w,e.w),this}clampScalar(t,e){return this.x=mn(this.x,t,e),this.y=mn(this.y,t,e),this.z=mn(this.z,t,e),this.w=mn(this.w,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(mn(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class k2 extends Hc{constructor(t=1,e=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Di,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=n.depth,this.scissor=new Ri(0,0,t,e),this.scissorTest=!1,this.viewport=new Ri(0,0,t,e);const a={width:t,height:e,depth:n.depth},s=new pa(a);this.textures=[];const o=n.count;for(let c=0;c<o;c++)this.textures[c]=s.clone(),this.textures[c].isRenderTargetTexture=!0,this.textures[c].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(t={}){const e={minFilter:Di,generateMipmaps:!1,flipY:!1,internalFormat:null};t.mapping!==void 0&&(e.mapping=t.mapping),t.wrapS!==void 0&&(e.wrapS=t.wrapS),t.wrapT!==void 0&&(e.wrapT=t.wrapT),t.wrapR!==void 0&&(e.wrapR=t.wrapR),t.magFilter!==void 0&&(e.magFilter=t.magFilter),t.minFilter!==void 0&&(e.minFilter=t.minFilter),t.format!==void 0&&(e.format=t.format),t.type!==void 0&&(e.type=t.type),t.anisotropy!==void 0&&(e.anisotropy=t.anisotropy),t.colorSpace!==void 0&&(e.colorSpace=t.colorSpace),t.flipY!==void 0&&(e.flipY=t.flipY),t.generateMipmaps!==void 0&&(e.generateMipmaps=t.generateMipmaps),t.internalFormat!==void 0&&(e.internalFormat=t.internalFormat);for(let n=0;n<this.textures.length;n++)this.textures[n].setValues(e)}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),t!==null&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,e,n=1){if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let a=0,s=this.textures.length;a<s;a++)this.textures[a].image.width=t,this.textures[a].image.height=e,this.textures[a].image.depth=n,this.textures[a].isData3DTexture!==!0&&(this.textures[a].isArrayTexture=this.textures[a].image.depth>1);this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let e=0,n=t.textures.length;e<n;e++){this.textures[e]=t.textures[e].clone(),this.textures[e].isRenderTargetTexture=!0,this.textures[e].renderTarget=this;const a=Object.assign({},t.textures[e].image);this.textures[e].source=new Pf(a)}return this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ro extends k2{constructor(t=1,e=1,n={}){super(t,e,n),this.isWebGLRenderTarget=!0}}class S1 extends pa{constructor(t=null,e=1,n=1,a=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:a},this.magFilter=Ba,this.minFilter=Ba,this.wrapR=ao,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class xN extends ro{constructor(t=1,e=1,n=1,a={}){super(t,e,a),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new S1(null,t,e,n),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class b1 extends pa{constructor(t=null,e=1,n=1,a=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:a},this.magFilter=Ba,this.minFilter=Ba,this.wrapR=ao,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class SN extends ro{constructor(t=1,e=1,n=1,a={}){super(t,e,a),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new b1(null,t,e,n),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class Ts{constructor(t=new pt(1/0,1/0,1/0),e=new pt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e+=3)this.expandByPoint(Wl.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,n=t.count;e<n;e++)this.expandByPoint(Wl.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=Wl.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(n!==void 0){const s=n.getAttribute("position");if(e===!0&&s!==void 0&&t.isInstancedMesh!==!0)for(let o=0,c=s.count;o<c;o++)t.isMesh===!0?t.getVertexPosition(o,Wl):Wl.fromBufferAttribute(s,o),Wl.applyMatrix4(t.matrixWorld),this.expandByPoint(Wl);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),Fv.copy(t.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),Fv.copy(n.boundingBox)),Fv.applyMatrix4(t.matrixWorld),this.union(Fv)}const a=t.children;for(let s=0,o=a.length;s<o;s++)this.expandByObject(a[s],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,Wl),Wl.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(hg),kv.subVectors(this.max,hg),sp.subVectors(t.a,hg),rp.subVectors(t.b,hg),op.subVectors(t.c,hg),Tf.subVectors(rp,sp),Af.subVectors(op,rp),Eh.subVectors(sp,op);let e=[0,-Tf.z,Tf.y,0,-Af.z,Af.y,0,-Eh.z,Eh.y,Tf.z,0,-Tf.x,Af.z,0,-Af.x,Eh.z,0,-Eh.x,-Tf.y,Tf.x,0,-Af.y,Af.x,0,-Eh.y,Eh.x,0];return!Qx(e,sp,rp,op,kv)||(e=[1,0,0,0,1,0,0,0,1],!Qx(e,sp,rp,op,kv))?!1:(Vv.crossVectors(Tf,Af),e=[Vv.x,Vv.y,Vv.z],Qx(e,sp,rp,op,kv))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Wl).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(Wl).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(Su[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Su[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Su[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Su[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Su[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Su[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Su[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Su[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Su),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(t){return this.min.fromArray(t.min),this.max.fromArray(t.max),this}}const Su=[new pt,new pt,new pt,new pt,new pt,new pt,new pt,new pt],Wl=new pt,Fv=new Ts,sp=new pt,rp=new pt,op=new pt,Tf=new pt,Af=new pt,Eh=new pt,hg=new pt,kv=new pt,Vv=new pt,wh=new pt;function Qx(i,t,e,n,a){for(let s=0,o=i.length-3;s<=o;s+=3){wh.fromArray(i,s);const c=a.x*Math.abs(wh.x)+a.y*Math.abs(wh.y)+a.z*Math.abs(wh.z),f=t.dot(wh),d=e.dot(wh),g=n.dot(wh);if(Math.max(-Math.max(f,d,g),Math.min(f,d,g))>c)return!1}return!0}const bN=new Ts,dg=new pt,Jx=new pt;class As{constructor(t=new pt,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;e!==void 0?n.copy(e):bN.setFromPoints(t).getCenter(n);let a=0;for(let s=0,o=t.length;s<o;s++)a=Math.max(a,n.distanceToSquared(t[s]));return this.radius=Math.sqrt(a),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;dg.subVectors(t,this.center);const e=dg.lengthSq();if(e>this.radius*this.radius){const n=Math.sqrt(e),a=(n-this.radius)*.5;this.center.addScaledVector(dg,a/n),this.radius+=a}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(Jx.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(dg.copy(t.center).add(Jx)),this.expandByPoint(dg.copy(t.center).sub(Jx))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(t){return this.radius=t.radius,this.center.fromArray(t.center),this}}const bu=new pt,$x=new pt,Hv=new pt,Ef=new pt,tS=new pt,Gv=new pt,eS=new pt;class dd{constructor(t=new pt,e=new pt(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,bu)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=bu.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(bu.copy(this.origin).addScaledVector(this.direction,e),bu.distanceToSquared(t))}distanceSqToSegment(t,e,n,a){$x.copy(t).add(e).multiplyScalar(.5),Hv.copy(e).sub(t).normalize(),Ef.copy(this.origin).sub($x);const s=t.distanceTo(e)*.5,o=-this.direction.dot(Hv),c=Ef.dot(this.direction),f=-Ef.dot(Hv),d=Ef.lengthSq(),g=Math.abs(1-o*o);let y,x,b,T;if(g>0)if(y=o*f-c,x=o*c-f,T=s*g,y>=0)if(x>=-T)if(x<=T){const R=1/g;y*=R,x*=R,b=y*(y+o*x+2*c)+x*(o*y+x+2*f)+d}else x=s,y=Math.max(0,-(o*x+c)),b=-y*y+x*(x+2*f)+d;else x=-s,y=Math.max(0,-(o*x+c)),b=-y*y+x*(x+2*f)+d;else x<=-T?(y=Math.max(0,-(-o*s+c)),x=y>0?-s:Math.min(Math.max(-s,-f),s),b=-y*y+x*(x+2*f)+d):x<=T?(y=0,x=Math.min(Math.max(-s,-f),s),b=x*(x+2*f)+d):(y=Math.max(0,-(o*s+c)),x=y>0?s:Math.min(Math.max(-s,-f),s),b=-y*y+x*(x+2*f)+d);else x=o>0?-s:s,y=Math.max(0,-(o*x+c)),b=-y*y+x*(x+2*f)+d;return n&&n.copy(this.origin).addScaledVector(this.direction,y),a&&a.copy($x).addScaledVector(Hv,x),b}intersectSphere(t,e){bu.subVectors(t.center,this.origin);const n=bu.dot(this.direction),a=bu.dot(bu)-n*n,s=t.radius*t.radius;if(a>s)return null;const o=Math.sqrt(s-a),c=n-o,f=n+o;return f<0?null:c<0?this.at(f,e):this.at(c,e)}intersectsSphere(t){return t.radius<0?!1:this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return n===null?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,a,s,o,c,f;const d=1/this.direction.x,g=1/this.direction.y,y=1/this.direction.z,x=this.origin;return d>=0?(n=(t.min.x-x.x)*d,a=(t.max.x-x.x)*d):(n=(t.max.x-x.x)*d,a=(t.min.x-x.x)*d),g>=0?(s=(t.min.y-x.y)*g,o=(t.max.y-x.y)*g):(s=(t.max.y-x.y)*g,o=(t.min.y-x.y)*g),n>o||s>a||((s>n||isNaN(n))&&(n=s),(o<a||isNaN(a))&&(a=o),y>=0?(c=(t.min.z-x.z)*y,f=(t.max.z-x.z)*y):(c=(t.max.z-x.z)*y,f=(t.min.z-x.z)*y),n>f||c>a)||((c>n||n!==n)&&(n=c),(f<a||a!==a)&&(a=f),a<0)?null:this.at(n>=0?n:a,e)}intersectsBox(t){return this.intersectBox(t,bu)!==null}intersectTriangle(t,e,n,a,s){tS.subVectors(e,t),Gv.subVectors(n,t),eS.crossVectors(tS,Gv);let o=this.direction.dot(eS),c;if(o>0){if(a)return null;c=1}else if(o<0)c=-1,o=-o;else return null;Ef.subVectors(this.origin,t);const f=c*this.direction.dot(Gv.crossVectors(Ef,Gv));if(f<0)return null;const d=c*this.direction.dot(tS.cross(Ef));if(d<0||f+d>o)return null;const g=-c*Ef.dot(eS);return g<0?null:this.at(g/o,s)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class gn{constructor(t,e,n,a,s,o,c,f,d,g,y,x,b,T,R,C){gn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,n,a,s,o,c,f,d,g,y,x,b,T,R,C)}set(t,e,n,a,s,o,c,f,d,g,y,x,b,T,R,C){const w=this.elements;return w[0]=t,w[4]=e,w[8]=n,w[12]=a,w[1]=s,w[5]=o,w[9]=c,w[13]=f,w[2]=d,w[6]=g,w[10]=y,w[14]=x,w[3]=b,w[7]=T,w[11]=R,w[15]=C,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new gn().fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return this.determinant()===0?(t.set(1,0,0),e.set(0,1,0),n.set(0,0,1),this):(t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this)}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){if(t.determinant()===0)return this.identity();const e=this.elements,n=t.elements,a=1/lp.setFromMatrixColumn(t,0).length(),s=1/lp.setFromMatrixColumn(t,1).length(),o=1/lp.setFromMatrixColumn(t,2).length();return e[0]=n[0]*a,e[1]=n[1]*a,e[2]=n[2]*a,e[3]=0,e[4]=n[4]*s,e[5]=n[5]*s,e[6]=n[6]*s,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,a=t.y,s=t.z,o=Math.cos(n),c=Math.sin(n),f=Math.cos(a),d=Math.sin(a),g=Math.cos(s),y=Math.sin(s);if(t.order==="XYZ"){const x=o*g,b=o*y,T=c*g,R=c*y;e[0]=f*g,e[4]=-f*y,e[8]=d,e[1]=b+T*d,e[5]=x-R*d,e[9]=-c*f,e[2]=R-x*d,e[6]=T+b*d,e[10]=o*f}else if(t.order==="YXZ"){const x=f*g,b=f*y,T=d*g,R=d*y;e[0]=x+R*c,e[4]=T*c-b,e[8]=o*d,e[1]=o*y,e[5]=o*g,e[9]=-c,e[2]=b*c-T,e[6]=R+x*c,e[10]=o*f}else if(t.order==="ZXY"){const x=f*g,b=f*y,T=d*g,R=d*y;e[0]=x-R*c,e[4]=-o*y,e[8]=T+b*c,e[1]=b+T*c,e[5]=o*g,e[9]=R-x*c,e[2]=-o*d,e[6]=c,e[10]=o*f}else if(t.order==="ZYX"){const x=o*g,b=o*y,T=c*g,R=c*y;e[0]=f*g,e[4]=T*d-b,e[8]=x*d+R,e[1]=f*y,e[5]=R*d+x,e[9]=b*d-T,e[2]=-d,e[6]=c*f,e[10]=o*f}else if(t.order==="YZX"){const x=o*f,b=o*d,T=c*f,R=c*d;e[0]=f*g,e[4]=R-x*y,e[8]=T*y+b,e[1]=y,e[5]=o*g,e[9]=-c*g,e[2]=-d*g,e[6]=b*y+T,e[10]=x-R*y}else if(t.order==="XZY"){const x=o*f,b=o*d,T=c*f,R=c*d;e[0]=f*g,e[4]=-y,e[8]=d*g,e[1]=x*y+R,e[5]=o*g,e[9]=b*y-T,e[2]=T*y-b,e[6]=c*g,e[10]=R*y+x}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(MN,t,TN)}lookAt(t,e,n){const a=this.elements;return zo.subVectors(t,e),zo.lengthSq()===0&&(zo.z=1),zo.normalize(),wf.crossVectors(n,zo),wf.lengthSq()===0&&(Math.abs(n.z)===1?zo.x+=1e-4:zo.z+=1e-4,zo.normalize(),wf.crossVectors(n,zo)),wf.normalize(),jv.crossVectors(zo,wf),a[0]=wf.x,a[4]=jv.x,a[8]=zo.x,a[1]=wf.y,a[5]=jv.y,a[9]=zo.y,a[2]=wf.z,a[6]=jv.z,a[10]=zo.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,a=e.elements,s=this.elements,o=n[0],c=n[4],f=n[8],d=n[12],g=n[1],y=n[5],x=n[9],b=n[13],T=n[2],R=n[6],C=n[10],w=n[14],N=n[3],I=n[7],z=n[11],F=n[15],H=a[0],q=a[4],Z=a[8],B=a[12],V=a[1],Q=a[5],J=a[9],rt=a[13],ut=a[2],vt=a[6],j=a[10],K=a[14],et=a[3],dt=a[7],lt=a[11],G=a[15];return s[0]=o*H+c*V+f*ut+d*et,s[4]=o*q+c*Q+f*vt+d*dt,s[8]=o*Z+c*J+f*j+d*lt,s[12]=o*B+c*rt+f*K+d*G,s[1]=g*H+y*V+x*ut+b*et,s[5]=g*q+y*Q+x*vt+b*dt,s[9]=g*Z+y*J+x*j+b*lt,s[13]=g*B+y*rt+x*K+b*G,s[2]=T*H+R*V+C*ut+w*et,s[6]=T*q+R*Q+C*vt+w*dt,s[10]=T*Z+R*J+C*j+w*lt,s[14]=T*B+R*rt+C*K+w*G,s[3]=N*H+I*V+z*ut+F*et,s[7]=N*q+I*Q+z*vt+F*dt,s[11]=N*Z+I*J+z*j+F*lt,s[15]=N*B+I*rt+z*K+F*G,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],a=t[8],s=t[12],o=t[1],c=t[5],f=t[9],d=t[13],g=t[2],y=t[6],x=t[10],b=t[14],T=t[3],R=t[7],C=t[11],w=t[15],N=f*b-d*x,I=c*b-d*y,z=c*x-f*y,F=o*b-d*g,H=o*x-f*g,q=o*y-c*g;return e*(R*N-C*I+w*z)-n*(T*N-C*F+w*H)+a*(T*I-R*F+w*q)-s*(T*z-R*H+C*q)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const a=this.elements;return t.isVector3?(a[12]=t.x,a[13]=t.y,a[14]=t.z):(a[12]=t,a[13]=e,a[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],a=t[2],s=t[3],o=t[4],c=t[5],f=t[6],d=t[7],g=t[8],y=t[9],x=t[10],b=t[11],T=t[12],R=t[13],C=t[14],w=t[15],N=y*C*d-R*x*d+R*f*b-c*C*b-y*f*w+c*x*w,I=T*x*d-g*C*d-T*f*b+o*C*b+g*f*w-o*x*w,z=g*R*d-T*y*d+T*c*b-o*R*b-g*c*w+o*y*w,F=T*y*f-g*R*f-T*c*x+o*R*x+g*c*C-o*y*C,H=e*N+n*I+a*z+s*F;if(H===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const q=1/H;return t[0]=N*q,t[1]=(R*x*s-y*C*s-R*a*b+n*C*b+y*a*w-n*x*w)*q,t[2]=(c*C*s-R*f*s+R*a*d-n*C*d-c*a*w+n*f*w)*q,t[3]=(y*f*s-c*x*s-y*a*d+n*x*d+c*a*b-n*f*b)*q,t[4]=I*q,t[5]=(g*C*s-T*x*s+T*a*b-e*C*b-g*a*w+e*x*w)*q,t[6]=(T*f*s-o*C*s-T*a*d+e*C*d+o*a*w-e*f*w)*q,t[7]=(o*x*s-g*f*s+g*a*d-e*x*d-o*a*b+e*f*b)*q,t[8]=z*q,t[9]=(T*y*s-g*R*s-T*n*b+e*R*b+g*n*w-e*y*w)*q,t[10]=(o*R*s-T*c*s+T*n*d-e*R*d-o*n*w+e*c*w)*q,t[11]=(g*c*s-o*y*s-g*n*d+e*y*d+o*n*b-e*c*b)*q,t[12]=F*q,t[13]=(g*R*a-T*y*a+T*n*x-e*R*x-g*n*C+e*y*C)*q,t[14]=(T*c*a-o*R*a-T*n*f+e*R*f+o*n*C-e*c*C)*q,t[15]=(o*y*a-g*c*a+g*n*f-e*y*f-o*n*x+e*c*x)*q,this}scale(t){const e=this.elements,n=t.x,a=t.y,s=t.z;return e[0]*=n,e[4]*=a,e[8]*=s,e[1]*=n,e[5]*=a,e[9]*=s,e[2]*=n,e[6]*=a,e[10]*=s,e[3]*=n,e[7]*=a,e[11]*=s,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],a=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,a))}makeTranslation(t,e,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),a=Math.sin(e),s=1-n,o=t.x,c=t.y,f=t.z,d=s*o,g=s*c;return this.set(d*o+n,d*c-a*f,d*f+a*c,0,d*c+a*f,g*c+n,g*f-a*o,0,d*f-a*c,g*f+a*o,s*f*f+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,a,s,o){return this.set(1,n,s,0,t,1,o,0,e,a,1,0,0,0,0,1),this}compose(t,e,n){const a=this.elements,s=e._x,o=e._y,c=e._z,f=e._w,d=s+s,g=o+o,y=c+c,x=s*d,b=s*g,T=s*y,R=o*g,C=o*y,w=c*y,N=f*d,I=f*g,z=f*y,F=n.x,H=n.y,q=n.z;return a[0]=(1-(R+w))*F,a[1]=(b+z)*F,a[2]=(T-I)*F,a[3]=0,a[4]=(b-z)*H,a[5]=(1-(x+w))*H,a[6]=(C+N)*H,a[7]=0,a[8]=(T+I)*q,a[9]=(C-N)*q,a[10]=(1-(x+R))*q,a[11]=0,a[12]=t.x,a[13]=t.y,a[14]=t.z,a[15]=1,this}decompose(t,e,n){const a=this.elements;if(t.x=a[12],t.y=a[13],t.z=a[14],this.determinant()===0)return n.set(1,1,1),e.identity(),this;let s=lp.set(a[0],a[1],a[2]).length();const o=lp.set(a[4],a[5],a[6]).length(),c=lp.set(a[8],a[9],a[10]).length();this.determinant()<0&&(s=-s),ql.copy(this);const d=1/s,g=1/o,y=1/c;return ql.elements[0]*=d,ql.elements[1]*=d,ql.elements[2]*=d,ql.elements[4]*=g,ql.elements[5]*=g,ql.elements[6]*=g,ql.elements[8]*=y,ql.elements[9]*=y,ql.elements[10]*=y,e.setFromRotationMatrix(ql),n.x=s,n.y=o,n.z=c,this}makePerspective(t,e,n,a,s,o,c=Fo,f=!1){const d=this.elements,g=2*s/(e-t),y=2*s/(n-a),x=(e+t)/(e-t),b=(n+a)/(n-a);let T,R;if(f)T=s/(o-s),R=o*s/(o-s);else if(c===Fo)T=-(o+s)/(o-s),R=-2*o*s/(o-s);else if(c===jp)T=-o/(o-s),R=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+c);return d[0]=g,d[4]=0,d[8]=x,d[12]=0,d[1]=0,d[5]=y,d[9]=b,d[13]=0,d[2]=0,d[6]=0,d[10]=T,d[14]=R,d[3]=0,d[7]=0,d[11]=-1,d[15]=0,this}makeOrthographic(t,e,n,a,s,o,c=Fo,f=!1){const d=this.elements,g=2/(e-t),y=2/(n-a),x=-(e+t)/(e-t),b=-(n+a)/(n-a);let T,R;if(f)T=1/(o-s),R=o/(o-s);else if(c===Fo)T=-2/(o-s),R=-(o+s)/(o-s);else if(c===jp)T=-1/(o-s),R=-s/(o-s);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+c);return d[0]=g,d[4]=0,d[8]=0,d[12]=x,d[1]=0,d[5]=y,d[9]=0,d[13]=b,d[2]=0,d[6]=0,d[10]=T,d[14]=R,d[3]=0,d[7]=0,d[11]=0,d[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let a=0;a<16;a++)if(e[a]!==n[a])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const lp=new pt,ql=new gn,MN=new pt(0,0,0),TN=new pt(1,1,1),wf=new pt,jv=new pt,zo=new pt,_A=new gn,xA=new or;class Vo{constructor(t=0,e=0,n=0,a=Vo.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=a}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,a=this._order){return this._x=t,this._y=e,this._z=n,this._order=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const a=t.elements,s=a[0],o=a[4],c=a[8],f=a[1],d=a[5],g=a[9],y=a[2],x=a[6],b=a[10];switch(e){case"XYZ":this._y=Math.asin(mn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-g,b),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(x,d),this._z=0);break;case"YXZ":this._x=Math.asin(-mn(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(c,b),this._z=Math.atan2(f,d)):(this._y=Math.atan2(-y,s),this._z=0);break;case"ZXY":this._x=Math.asin(mn(x,-1,1)),Math.abs(x)<.9999999?(this._y=Math.atan2(-y,b),this._z=Math.atan2(-o,d)):(this._y=0,this._z=Math.atan2(f,s));break;case"ZYX":this._y=Math.asin(-mn(y,-1,1)),Math.abs(y)<.9999999?(this._x=Math.atan2(x,b),this._z=Math.atan2(f,s)):(this._x=0,this._z=Math.atan2(-o,d));break;case"YZX":this._z=Math.asin(mn(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(-g,d),this._y=Math.atan2(-y,s)):(this._x=0,this._y=Math.atan2(c,b));break;case"XZY":this._z=Math.asin(-mn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(x,d),this._y=Math.atan2(c,s)):(this._x=Math.atan2(-g,b),this._y=0);break;default:Ie("Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,n===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return _A.makeRotationFromQuaternion(t),this.setFromRotationMatrix(_A,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return xA.setFromEuler(this),this.setFromQuaternion(xA,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Vo.DEFAULT_ORDER="XYZ";class Xp{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let AN=0;const SA=new pt,cp=new or,Mu=new gn,Wv=new pt,pg=new pt,EN=new pt,wN=new or,bA=new pt(1,0,0),MA=new pt(0,1,0),TA=new pt(0,0,1),AA={type:"added"},CN={type:"removed"},up={type:"childadded",child:null},nS={type:"childremoved",child:null};class li extends Hc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:AN++}),this.uuid=ko(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=li.DEFAULT_UP.clone();const t=new pt,e=new Vo,n=new or,a=new pt(1,1,1);function s(){n.setFromEuler(e,!1)}function o(){e.setFromQuaternion(n,void 0,!1)}e._onChange(s),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new gn},normalMatrix:{value:new En}}),this.matrix=new gn,this.matrixWorld=new gn,this.matrixAutoUpdate=li.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=li.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Xp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return cp.setFromAxisAngle(t,e),this.quaternion.multiply(cp),this}rotateOnWorldAxis(t,e){return cp.setFromAxisAngle(t,e),this.quaternion.premultiply(cp),this}rotateX(t){return this.rotateOnAxis(bA,t)}rotateY(t){return this.rotateOnAxis(MA,t)}rotateZ(t){return this.rotateOnAxis(TA,t)}translateOnAxis(t,e){return SA.copy(t).applyQuaternion(this.quaternion),this.position.add(SA.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(bA,t)}translateY(t){return this.translateOnAxis(MA,t)}translateZ(t){return this.translateOnAxis(TA,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Mu.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?Wv.copy(t):Wv.set(t,e,n);const a=this.parent;this.updateWorldMatrix(!0,!1),pg.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Mu.lookAt(pg,Wv,this.up):Mu.lookAt(Wv,pg,this.up),this.quaternion.setFromRotationMatrix(Mu),a&&(Mu.extractRotation(a.matrixWorld),cp.setFromRotationMatrix(Mu),this.quaternion.premultiply(cp.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(rn("Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(AA),up.child=t,this.dispatchEvent(up),up.child=null):rn("Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(CN),nS.child=t,this.dispatchEvent(nS),nS.child=null),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Mu.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Mu.multiply(t.parent.matrixWorld)),t.applyMatrix4(Mu),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(AA),up.child=t,this.dispatchEvent(up),up.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,a=this.children.length;n<a;n++){const o=this.children[n].getObjectByProperty(t,e);if(o!==void 0)return o}}getObjectsByProperty(t,e,n=[]){this[t]===e&&n.push(this);const a=this.children;for(let s=0,o=a.length;s<o;s++)a[s].getObjectsByProperty(t,e,n);return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(pg,t,EN),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(pg,wN,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,a=e.length;n<a;n++)e[n].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const e=this.children;for(let n=0,a=e.length;n<a;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,a=e.length;n<a;n++)e[n].updateMatrixWorld(t)}updateWorldMatrix(t,e){const n=this.parent;if(t===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),e===!0){const a=this.children;for(let s=0,o=a.length;s<o;s++)a[s].updateWorldMatrix(!1,!0)}}toJSON(t){const e=t===void 0||typeof t=="string",n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const a={};a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.castShadow===!0&&(a.castShadow=!0),this.receiveShadow===!0&&(a.receiveShadow=!0),this.visible===!1&&(a.visible=!1),this.frustumCulled===!1&&(a.frustumCulled=!1),this.renderOrder!==0&&(a.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),a.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(a.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(a.type="BatchedMesh",a.perObjectFrustumCulled=this.perObjectFrustumCulled,a.sortObjects=this.sortObjects,a.drawRanges=this._drawRanges,a.reservedRanges=this._reservedRanges,a.geometryInfo=this._geometryInfo.map(c=>({...c,boundingBox:c.boundingBox?c.boundingBox.toJSON():void 0,boundingSphere:c.boundingSphere?c.boundingSphere.toJSON():void 0})),a.instanceInfo=this._instanceInfo.map(c=>({...c})),a.availableInstanceIds=this._availableInstanceIds.slice(),a.availableGeometryIds=this._availableGeometryIds.slice(),a.nextIndexStart=this._nextIndexStart,a.nextVertexStart=this._nextVertexStart,a.geometryCount=this._geometryCount,a.maxInstanceCount=this._maxInstanceCount,a.maxVertexCount=this._maxVertexCount,a.maxIndexCount=this._maxIndexCount,a.geometryInitialized=this._geometryInitialized,a.matricesTexture=this._matricesTexture.toJSON(t),a.indirectTexture=this._indirectTexture.toJSON(t),this._colorsTexture!==null&&(a.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(a.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(a.boundingBox=this.boundingBox.toJSON()));function s(c,f){return c[f.uuid]===void 0&&(c[f.uuid]=f.toJSON(t)),f.uuid}if(this.isScene)this.background&&(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&&(a.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(a.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=s(t.geometries,this.geometry);const c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){const f=c.shapes;if(Array.isArray(f))for(let d=0,g=f.length;d<g;d++){const y=f[d];s(t.shapes,y)}else s(t.shapes,f)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(t.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const c=[];for(let f=0,d=this.material.length;f<d;f++)c.push(s(t.materials,this.material[f]));a.material=c}else a.material=s(t.materials,this.material);if(this.children.length>0){a.children=[];for(let c=0;c<this.children.length;c++)a.children.push(this.children[c].toJSON(t).object)}if(this.animations.length>0){a.animations=[];for(let c=0;c<this.animations.length;c++){const f=this.animations[c];a.animations.push(s(t.animations,f))}}if(e){const c=o(t.geometries),f=o(t.materials),d=o(t.textures),g=o(t.images),y=o(t.shapes),x=o(t.skeletons),b=o(t.animations),T=o(t.nodes);c.length>0&&(n.geometries=c),f.length>0&&(n.materials=f),d.length>0&&(n.textures=d),g.length>0&&(n.images=g),y.length>0&&(n.shapes=y),x.length>0&&(n.skeletons=x),b.length>0&&(n.animations=b),T.length>0&&(n.nodes=T)}return n.object=a,n;function o(c){const f=[];for(const d in c){const g=c[d];delete g.metadata,f.push(g)}return f}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let n=0;n<t.children.length;n++){const a=t.children[n];this.add(a.clone())}return this}}li.DEFAULT_UP=new pt(0,1,0);li.DEFAULT_MATRIX_AUTO_UPDATE=!0;li.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Xl=new pt,Tu=new pt,iS=new pt,Au=new pt,fp=new pt,hp=new pt,EA=new pt,aS=new pt,sS=new pt,rS=new pt,oS=new Ri,lS=new Ri,cS=new Ri;class io{constructor(t=new pt,e=new pt,n=new pt){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,a){a.subVectors(n,e),Xl.subVectors(t,e),a.cross(Xl);const s=a.lengthSq();return s>0?a.multiplyScalar(1/Math.sqrt(s)):a.set(0,0,0)}static getBarycoord(t,e,n,a,s){Xl.subVectors(a,e),Tu.subVectors(n,e),iS.subVectors(t,e);const o=Xl.dot(Xl),c=Xl.dot(Tu),f=Xl.dot(iS),d=Tu.dot(Tu),g=Tu.dot(iS),y=o*d-c*c;if(y===0)return s.set(0,0,0),null;const x=1/y,b=(d*f-c*g)*x,T=(o*g-c*f)*x;return s.set(1-b-T,T,b)}static containsPoint(t,e,n,a){return this.getBarycoord(t,e,n,a,Au)===null?!1:Au.x>=0&&Au.y>=0&&Au.x+Au.y<=1}static getInterpolation(t,e,n,a,s,o,c,f){return this.getBarycoord(t,e,n,a,Au)===null?(f.x=0,f.y=0,"z"in f&&(f.z=0),"w"in f&&(f.w=0),null):(f.setScalar(0),f.addScaledVector(s,Au.x),f.addScaledVector(o,Au.y),f.addScaledVector(c,Au.z),f)}static getInterpolatedAttribute(t,e,n,a,s,o){return oS.setScalar(0),lS.setScalar(0),cS.setScalar(0),oS.fromBufferAttribute(t,e),lS.fromBufferAttribute(t,n),cS.fromBufferAttribute(t,a),o.setScalar(0),o.addScaledVector(oS,s.x),o.addScaledVector(lS,s.y),o.addScaledVector(cS,s.z),o}static isFrontFacing(t,e,n,a){return Xl.subVectors(n,e),Tu.subVectors(t,e),Xl.cross(Tu).dot(a)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,a){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[a]),this}setFromAttributeAndIndices(t,e,n,a){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,a),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Xl.subVectors(this.c,this.b),Tu.subVectors(this.a,this.b),Xl.cross(Tu).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return io.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return io.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,n,a,s){return io.getInterpolation(t,this.a,this.b,this.c,e,n,a,s)}containsPoint(t){return io.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return io.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,a=this.b,s=this.c;let o,c;fp.subVectors(a,n),hp.subVectors(s,n),aS.subVectors(t,n);const f=fp.dot(aS),d=hp.dot(aS);if(f<=0&&d<=0)return e.copy(n);sS.subVectors(t,a);const g=fp.dot(sS),y=hp.dot(sS);if(g>=0&&y<=g)return e.copy(a);const x=f*y-g*d;if(x<=0&&f>=0&&g<=0)return o=f/(f-g),e.copy(n).addScaledVector(fp,o);rS.subVectors(t,s);const b=fp.dot(rS),T=hp.dot(rS);if(T>=0&&b<=T)return e.copy(s);const R=b*d-f*T;if(R<=0&&d>=0&&T<=0)return c=d/(d-T),e.copy(n).addScaledVector(hp,c);const C=g*T-b*y;if(C<=0&&y-g>=0&&b-T>=0)return EA.subVectors(s,a),c=(y-g)/(y-g+(b-T)),e.copy(a).addScaledVector(EA,c);const w=1/(C+R+x);return o=R*w,c=x*w,e.copy(n).addScaledVector(fp,o).addScaledVector(hp,c)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const WC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Cf={h:0,s:0,l:0},qv={h:0,s:0,l:0};function uS(i,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+(t-i)*6*e:e<1/2?t:e<2/3?i+(t-i)*6*(2/3-e):i}class He{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,n)}set(t,e,n){if(e===void 0&&n===void 0){const a=t;a&&a.isColor?this.copy(a):typeof a=="number"?this.setHex(a):typeof a=="string"&&this.setStyle(a)}else this.setRGB(t,e,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=ir){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,Xn.colorSpaceToWorking(this,e),this}setRGB(t,e,n,a=Xn.workingColorSpace){return this.r=t,this.g=e,this.b=n,Xn.colorSpaceToWorking(this,a),this}setHSL(t,e,n,a=Xn.workingColorSpace){if(t=F2(t,1),e=mn(e,0,1),n=mn(n,0,1),e===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+e):n+e-n*e,o=2*n-s;this.r=uS(o,s,t+1/3),this.g=uS(o,s,t),this.b=uS(o,s,t-1/3)}return Xn.colorSpaceToWorking(this,a),this}setStyle(t,e=ir){function n(s){s!==void 0&&parseFloat(s)<1&&Ie("Color: Alpha component of "+t+" will be ignored.")}let a;if(a=/^(\w+)\(([^\)]*)\)/.exec(t)){let s;const o=a[1],c=a[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,e);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,e);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,e);break;default:Ie("Color: Unknown color model "+t)}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(t)){const s=a[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,e);if(o===6)return this.setHex(parseInt(s,16),e);Ie("Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=ir){const n=WC[t.toLowerCase()];return n!==void 0?this.setHex(n,e):Ie("Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Ou(t.r),this.g=Ou(t.g),this.b=Ou(t.b),this}copyLinearToSRGB(t){return this.r=kp(t.r),this.g=kp(t.g),this.b=kp(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=ir){return Xn.workingToColorSpace(er.copy(this),t),Math.round(mn(er.r*255,0,255))*65536+Math.round(mn(er.g*255,0,255))*256+Math.round(mn(er.b*255,0,255))}getHexString(t=ir){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Xn.workingColorSpace){Xn.workingToColorSpace(er.copy(this),e);const n=er.r,a=er.g,s=er.b,o=Math.max(n,a,s),c=Math.min(n,a,s);let f,d;const g=(c+o)/2;if(c===o)f=0,d=0;else{const y=o-c;switch(d=g<=.5?y/(o+c):y/(2-o-c),o){case n:f=(a-s)/y+(a<s?6:0);break;case a:f=(s-n)/y+2;break;case s:f=(n-a)/y+4;break}f/=6}return t.h=f,t.s=d,t.l=g,t}getRGB(t,e=Xn.workingColorSpace){return Xn.workingToColorSpace(er.copy(this),e),t.r=er.r,t.g=er.g,t.b=er.b,t}getStyle(t=ir){Xn.workingToColorSpace(er.copy(this),t);const e=er.r,n=er.g,a=er.b;return t!==ir?`color(${t} ${e.toFixed(3)} ${n.toFixed(3)} ${a.toFixed(3)})`:`rgb(${Math.round(e*255)},${Math.round(n*255)},${Math.round(a*255)})`}offsetHSL(t,e,n){return this.getHSL(Cf),this.setHSL(Cf.h+t,Cf.s+e,Cf.l+n)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(Cf),t.getHSL(qv);const n=Hg(Cf.h,qv.h,e),a=Hg(Cf.s,qv.s,e),s=Hg(Cf.l,qv.l,e);return this.setHSL(n,a,s),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,n=this.g,a=this.b,s=t.elements;return this.r=s[0]*e+s[3]*n+s[6]*a,this.g=s[1]*e+s[4]*n+s[7]*a,this.b=s[2]*e+s[5]*n+s[8]*a,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const er=new He;He.NAMES=WC;let RN=0;class lr extends Hc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:RN++}),this.uuid=ko(),this.name="",this.type="Material",this.blending=$h,this.side=Nu,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=n_,this.blendDst=i_,this.blendEquation=Of,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new He(0,0,0),this.blendAlpha=0,this.depthFunc=sd,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=wb,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=jh,this.stencilZFail=jh,this.stencilZPass=jh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const e in t){const n=t[e];if(n===void 0){Ie(`Material: parameter '${e}' has value of undefined.`);continue}const a=this[e];if(a===void 0){Ie(`Material: '${e}' is not a property of THREE.${this.type}.`);continue}a&&a.isColor?a.set(n):a&&a.isVector3&&n&&n.isVector3?a.copy(n):this[e]=n}}toJSON(t){const e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(n.sheenColorMap=this.sheenColorMap.toJSON(t).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(n.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(t).uuid),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==$h&&(n.blending=this.blending),this.side!==Nu&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==n_&&(n.blendSrc=this.blendSrc),this.blendDst!==i_&&(n.blendDst=this.blendDst),this.blendEquation!==Of&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==sd&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==wb&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==jh&&(n.stencilFail=this.stencilFail),this.stencilZFail!==jh&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==jh&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.allowOverride===!1&&(n.allowOverride=!1),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function a(s){const o=[];for(const c in s){const f=s[c];delete f.metadata,o.push(f)}return o}if(e){const s=a(t.textures),o=a(t.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(e!==null){const a=e.length;n=new Array(a);for(let s=0;s!==a;++s)n[s]=e[s].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.allowOverride=t.allowOverride,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}class zu extends lr{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new He(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Vo,this.combine=A0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Ru=DN();function DN(){const i=new ArrayBuffer(4),t=new Float32Array(i),e=new Uint32Array(i),n=new Uint32Array(512),a=new Uint32Array(512);for(let f=0;f<256;++f){const d=f-127;d<-27?(n[f]=0,n[f|256]=32768,a[f]=24,a[f|256]=24):d<-14?(n[f]=1024>>-d-14,n[f|256]=1024>>-d-14|32768,a[f]=-d-1,a[f|256]=-d-1):d<=15?(n[f]=d+15<<10,n[f|256]=d+15<<10|32768,a[f]=13,a[f|256]=13):d<128?(n[f]=31744,n[f|256]=64512,a[f]=24,a[f|256]=24):(n[f]=31744,n[f|256]=64512,a[f]=13,a[f|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),c=new Uint32Array(64);for(let f=1;f<1024;++f){let d=f<<13,g=0;for(;(d&8388608)===0;)d<<=1,g-=8388608;d&=-8388609,g+=947912704,s[f]=d|g}for(let f=1024;f<2048;++f)s[f]=939524096+(f-1024<<13);for(let f=1;f<31;++f)o[f]=f<<23;o[31]=1199570944,o[32]=2147483648;for(let f=33;f<63;++f)o[f]=2147483648+(f-32<<23);o[63]=3347054592;for(let f=1;f<64;++f)f!==32&&(c[f]=1024);return{floatView:t,uint32View:e,baseTable:n,shiftTable:a,mantissaTable:s,exponentTable:o,offsetTable:c}}function eo(i){Math.abs(i)>65504&&Ie("DataUtils.toHalfFloat(): Value out of range."),i=mn(i,-65504,65504),Ru.floatView[0]=i;const t=Ru.uint32View[0],e=t>>23&511;return Ru.baseTable[e]+((t&8388607)>>Ru.shiftTable[e])}function Dg(i){const t=i>>10;return Ru.uint32View[0]=Ru.mantissaTable[Ru.offsetTable[t]+(i&1023)]+Ru.exponentTable[t],Ru.floatView[0]}class LN{static toHalfFloat(t){return eo(t)}static fromHalfFloat(t){return Dg(t)}}const Za=new pt,Xv=new de;let ON=0;class Pi{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:ON++}),this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=n,this.usage=r0,this.updateRanges=[],this.gpuType=ar,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let a=0,s=this.itemSize;a<s;a++)this.array[t+a]=e.array[n+a];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,n=this.count;e<n;e++)Xv.fromBufferAttribute(this,e),Xv.applyMatrix3(t),this.setXY(e,Xv.x,Xv.y);else if(this.itemSize===3)for(let e=0,n=this.count;e<n;e++)Za.fromBufferAttribute(this,e),Za.applyMatrix3(t),this.setXYZ(e,Za.x,Za.y,Za.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)Za.fromBufferAttribute(this,e),Za.applyMatrix4(t),this.setXYZ(e,Za.x,Za.y,Za.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Za.fromBufferAttribute(this,e),Za.applyNormalMatrix(t),this.setXYZ(e,Za.x,Za.y,Za.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Za.fromBufferAttribute(this,e),Za.transformDirection(t),this.setXYZ(e,Za.x,Za.y,Za.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let n=this.array[t*this.itemSize+e];return this.normalized&&(n=Fr(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=On(n,this.array)),this.array[t*this.itemSize+e]=n,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=Fr(e,this.array)),e}setX(t,e){return this.normalized&&(e=On(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=Fr(e,this.array)),e}setY(t,e){return this.normalized&&(e=On(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=Fr(e,this.array)),e}setZ(t,e){return this.normalized&&(e=On(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=Fr(e,this.array)),e}setW(t,e){return this.normalized&&(e=On(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=On(e,this.array),n=On(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,a){return t*=this.itemSize,this.normalized&&(e=On(e,this.array),n=On(n,this.array),a=On(a,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=a,this}setXYZW(t,e,n,a,s){return t*=this.itemSize,this.normalized&&(e=On(e,this.array),n=On(n,this.array),a=On(a,this.array),s=On(s,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=a,this.array[t+3]=s,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==r0&&(t.usage=this.usage),t}}class NN extends Pi{constructor(t,e,n){super(new Int8Array(t),e,n)}}class UN extends Pi{constructor(t,e,n){super(new Uint8Array(t),e,n)}}class IN extends Pi{constructor(t,e,n){super(new Uint8ClampedArray(t),e,n)}}class PN extends Pi{constructor(t,e,n){super(new Int16Array(t),e,n)}}class V2 extends Pi{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class zN extends Pi{constructor(t,e,n){super(new Int32Array(t),e,n)}}class H2 extends Pi{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class BN extends Pi{constructor(t,e,n){super(new Uint16Array(t),e,n),this.isFloat16BufferAttribute=!0}getX(t){let e=Dg(this.array[t*this.itemSize]);return this.normalized&&(e=Fr(e,this.array)),e}setX(t,e){return this.normalized&&(e=On(e,this.array)),this.array[t*this.itemSize]=eo(e),this}getY(t){let e=Dg(this.array[t*this.itemSize+1]);return this.normalized&&(e=Fr(e,this.array)),e}setY(t,e){return this.normalized&&(e=On(e,this.array)),this.array[t*this.itemSize+1]=eo(e),this}getZ(t){let e=Dg(this.array[t*this.itemSize+2]);return this.normalized&&(e=Fr(e,this.array)),e}setZ(t,e){return this.normalized&&(e=On(e,this.array)),this.array[t*this.itemSize+2]=eo(e),this}getW(t){let e=Dg(this.array[t*this.itemSize+3]);return this.normalized&&(e=Fr(e,this.array)),e}setW(t,e){return this.normalized&&(e=On(e,this.array)),this.array[t*this.itemSize+3]=eo(e),this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=On(e,this.array),n=On(n,this.array)),this.array[t+0]=eo(e),this.array[t+1]=eo(n),this}setXYZ(t,e,n,a){return t*=this.itemSize,this.normalized&&(e=On(e,this.array),n=On(n,this.array),a=On(a,this.array)),this.array[t+0]=eo(e),this.array[t+1]=eo(n),this.array[t+2]=eo(a),this}setXYZW(t,e,n,a,s){return t*=this.itemSize,this.normalized&&(e=On(e,this.array),n=On(n,this.array),a=On(a,this.array),s=On(s,this.array)),this.array[t+0]=eo(e),this.array[t+1]=eo(n),this.array[t+2]=eo(a),this.array[t+3]=eo(s),this}}class Ze extends Pi{constructor(t,e,n){super(new Float32Array(t),e,n)}}let FN=0;const ol=new gn,fS=new li,dp=new pt,Bo=new Ts,mg=new Ts,Ms=new pt;class wn extends Hc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:FN++}),this.uuid=ko(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(VC(t)?H2:V2)(t,1):this.index=t,this}setIndirect(t,e=0){return this.indirect=t,this.indirectOffset=e,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new En().getNormalMatrix(t);n.applyNormalMatrix(s),n.needsUpdate=!0}const a=this.attributes.tangent;return a!==void 0&&(a.transformDirection(t),a.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return ol.makeRotationFromQuaternion(t),this.applyMatrix4(ol),this}rotateX(t){return ol.makeRotationX(t),this.applyMatrix4(ol),this}rotateY(t){return ol.makeRotationY(t),this.applyMatrix4(ol),this}rotateZ(t){return ol.makeRotationZ(t),this.applyMatrix4(ol),this}translate(t,e,n){return ol.makeTranslation(t,e,n),this.applyMatrix4(ol),this}scale(t,e,n){return ol.makeScale(t,e,n),this.applyMatrix4(ol),this}lookAt(t){return fS.lookAt(t),fS.updateMatrix(),this.applyMatrix4(fS.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(dp).negate(),this.translate(dp.x,dp.y,dp.z),this}setFromPoints(t){const e=this.getAttribute("position");if(e===void 0){const n=[];for(let a=0,s=t.length;a<s;a++){const o=t[a];n.push(o.x,o.y,o.z||0)}this.setAttribute("position",new Ze(n,3))}else{const n=Math.min(t.length,e.count);for(let a=0;a<n;a++){const s=t[a];e.setXYZ(a,s.x,s.y,s.z||0)}t.length>e.count&&Ie("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ts);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){rn("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new pt(-1/0,-1/0,-1/0),new pt(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,a=e.length;n<a;n++){const s=e[n];Bo.setFromBufferAttribute(s),this.morphTargetsRelative?(Ms.addVectors(this.boundingBox.min,Bo.min),this.boundingBox.expandByPoint(Ms),Ms.addVectors(this.boundingBox.max,Bo.max),this.boundingBox.expandByPoint(Ms)):(this.boundingBox.expandByPoint(Bo.min),this.boundingBox.expandByPoint(Bo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&rn('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new As);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){rn("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new pt,1/0);return}if(t){const n=this.boundingSphere.center;if(Bo.setFromBufferAttribute(t),e)for(let s=0,o=e.length;s<o;s++){const c=e[s];mg.setFromBufferAttribute(c),this.morphTargetsRelative?(Ms.addVectors(Bo.min,mg.min),Bo.expandByPoint(Ms),Ms.addVectors(Bo.max,mg.max),Bo.expandByPoint(Ms)):(Bo.expandByPoint(mg.min),Bo.expandByPoint(mg.max))}Bo.getCenter(n);let a=0;for(let s=0,o=t.count;s<o;s++)Ms.fromBufferAttribute(t,s),a=Math.max(a,n.distanceToSquared(Ms));if(e)for(let s=0,o=e.length;s<o;s++){const c=e[s],f=this.morphTargetsRelative;for(let d=0,g=c.count;d<g;d++)Ms.fromBufferAttribute(c,d),f&&(dp.fromBufferAttribute(t,d),Ms.add(dp)),a=Math.max(a,n.distanceToSquared(Ms))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&rn('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){rn("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.position,a=e.normal,s=e.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Pi(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),c=[],f=[];for(let Z=0;Z<n.count;Z++)c[Z]=new pt,f[Z]=new pt;const d=new pt,g=new pt,y=new pt,x=new de,b=new de,T=new de,R=new pt,C=new pt;function w(Z,B,V){d.fromBufferAttribute(n,Z),g.fromBufferAttribute(n,B),y.fromBufferAttribute(n,V),x.fromBufferAttribute(s,Z),b.fromBufferAttribute(s,B),T.fromBufferAttribute(s,V),g.sub(d),y.sub(d),b.sub(x),T.sub(x);const Q=1/(b.x*T.y-T.x*b.y);isFinite(Q)&&(R.copy(g).multiplyScalar(T.y).addScaledVector(y,-b.y).multiplyScalar(Q),C.copy(y).multiplyScalar(b.x).addScaledVector(g,-T.x).multiplyScalar(Q),c[Z].add(R),c[B].add(R),c[V].add(R),f[Z].add(C),f[B].add(C),f[V].add(C))}let N=this.groups;N.length===0&&(N=[{start:0,count:t.count}]);for(let Z=0,B=N.length;Z<B;++Z){const V=N[Z],Q=V.start,J=V.count;for(let rt=Q,ut=Q+J;rt<ut;rt+=3)w(t.getX(rt+0),t.getX(rt+1),t.getX(rt+2))}const I=new pt,z=new pt,F=new pt,H=new pt;function q(Z){F.fromBufferAttribute(a,Z),H.copy(F);const B=c[Z];I.copy(B),I.sub(F.multiplyScalar(F.dot(B))).normalize(),z.crossVectors(H,B);const Q=z.dot(f[Z])<0?-1:1;o.setXYZW(Z,I.x,I.y,I.z,Q)}for(let Z=0,B=N.length;Z<B;++Z){const V=N[Z],Q=V.start,J=V.count;for(let rt=Q,ut=Q+J;rt<ut;rt+=3)q(t.getX(rt+0)),q(t.getX(rt+1)),q(t.getX(rt+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(e!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Pi(new Float32Array(e.count*3),3),this.setAttribute("normal",n);else for(let x=0,b=n.count;x<b;x++)n.setXYZ(x,0,0,0);const a=new pt,s=new pt,o=new pt,c=new pt,f=new pt,d=new pt,g=new pt,y=new pt;if(t)for(let x=0,b=t.count;x<b;x+=3){const T=t.getX(x+0),R=t.getX(x+1),C=t.getX(x+2);a.fromBufferAttribute(e,T),s.fromBufferAttribute(e,R),o.fromBufferAttribute(e,C),g.subVectors(o,s),y.subVectors(a,s),g.cross(y),c.fromBufferAttribute(n,T),f.fromBufferAttribute(n,R),d.fromBufferAttribute(n,C),c.add(g),f.add(g),d.add(g),n.setXYZ(T,c.x,c.y,c.z),n.setXYZ(R,f.x,f.y,f.z),n.setXYZ(C,d.x,d.y,d.z)}else for(let x=0,b=e.count;x<b;x+=3)a.fromBufferAttribute(e,x+0),s.fromBufferAttribute(e,x+1),o.fromBufferAttribute(e,x+2),g.subVectors(o,s),y.subVectors(a,s),g.cross(y),n.setXYZ(x+0,g.x,g.y,g.z),n.setXYZ(x+1,g.x,g.y,g.z),n.setXYZ(x+2,g.x,g.y,g.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)Ms.fromBufferAttribute(t,e),Ms.normalize(),t.setXYZ(e,Ms.x,Ms.y,Ms.z)}toNonIndexed(){function t(c,f){const d=c.array,g=c.itemSize,y=c.normalized,x=new d.constructor(f.length*g);let b=0,T=0;for(let R=0,C=f.length;R<C;R++){c.isInterleavedBufferAttribute?b=f[R]*c.data.stride+c.offset:b=f[R]*g;for(let w=0;w<g;w++)x[T++]=d[b++]}return new Pi(x,g,y)}if(this.index===null)return Ie("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new wn,n=this.index.array,a=this.attributes;for(const c in a){const f=a[c],d=t(f,n);e.setAttribute(c,d)}const s=this.morphAttributes;for(const c in s){const f=[],d=s[c];for(let g=0,y=d.length;g<y;g++){const x=d[g],b=t(x,n);f.push(b)}e.morphAttributes[c]=f}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let c=0,f=o.length;c<f;c++){const d=o[c];e.addGroup(d.start,d.count,d.materialIndex)}return e}toJSON(){const t={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const f=this.parameters;for(const d in f)f[d]!==void 0&&(t[d]=f[d]);return t}t.data={attributes:{}};const e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const f in n){const d=n[f];t.data.attributes[f]=d.toJSON(t.data)}const a={};let s=!1;for(const f in this.morphAttributes){const d=this.morphAttributes[f],g=[];for(let y=0,x=d.length;y<x;y++){const b=d[y];g.push(b.toJSON(t.data))}g.length>0&&(a[f]=g,s=!0)}s&&(t.data.morphAttributes=a,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const c=this.boundingSphere;return c!==null&&(t.data.boundingSphere=c.toJSON()),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;n!==null&&this.setIndex(n.clone());const a=t.attributes;for(const d in a){const g=a[d];this.setAttribute(d,g.clone(e))}const s=t.morphAttributes;for(const d in s){const g=[],y=s[d];for(let x=0,b=y.length;x<b;x++)g.push(y[x].clone(e));this.morphAttributes[d]=g}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let d=0,g=o.length;d<g;d++){const y=o[d];this.addGroup(y.start,y.count,y.materialIndex)}const c=t.boundingBox;c!==null&&(this.boundingBox=c.clone());const f=t.boundingSphere;return f!==null&&(this.boundingSphere=f.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const wA=new gn,Ch=new dd,Yv=new As,CA=new pt,Zv=new pt,Kv=new pt,Qv=new pt,hS=new pt,Jv=new pt,RA=new pt,$v=new pt;class ma extends li{constructor(t=new wn,e=new zu){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const a=e[n[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=a.length;s<o;s++){const c=a[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=s}}}}getVertexPosition(t,e){const n=this.geometry,a=n.attributes.position,s=n.morphAttributes.position,o=n.morphTargetsRelative;e.fromBufferAttribute(a,t);const c=this.morphTargetInfluences;if(s&&c){Jv.set(0,0,0);for(let f=0,d=s.length;f<d;f++){const g=c[f],y=s[f];g!==0&&(hS.fromBufferAttribute(y,t),o?Jv.addScaledVector(hS,g):Jv.addScaledVector(hS.sub(e),g))}e.add(Jv)}return e}raycast(t,e){const n=this.geometry,a=this.material,s=this.matrixWorld;a!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),Yv.copy(n.boundingSphere),Yv.applyMatrix4(s),Ch.copy(t.ray).recast(t.near),!(Yv.containsPoint(Ch.origin)===!1&&(Ch.intersectSphere(Yv,CA)===null||Ch.origin.distanceToSquared(CA)>(t.far-t.near)**2))&&(wA.copy(s).invert(),Ch.copy(t.ray).applyMatrix4(wA),!(n.boundingBox!==null&&Ch.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(t,e,Ch)))}_computeIntersections(t,e,n){let a;const s=this.geometry,o=this.material,c=s.index,f=s.attributes.position,d=s.attributes.uv,g=s.attributes.uv1,y=s.attributes.normal,x=s.groups,b=s.drawRange;if(c!==null)if(Array.isArray(o))for(let T=0,R=x.length;T<R;T++){const C=x[T],w=o[C.materialIndex],N=Math.max(C.start,b.start),I=Math.min(c.count,Math.min(C.start+C.count,b.start+b.count));for(let z=N,F=I;z<F;z+=3){const H=c.getX(z),q=c.getX(z+1),Z=c.getX(z+2);a=ty(this,w,t,n,d,g,y,H,q,Z),a&&(a.faceIndex=Math.floor(z/3),a.face.materialIndex=C.materialIndex,e.push(a))}}else{const T=Math.max(0,b.start),R=Math.min(c.count,b.start+b.count);for(let C=T,w=R;C<w;C+=3){const N=c.getX(C),I=c.getX(C+1),z=c.getX(C+2);a=ty(this,o,t,n,d,g,y,N,I,z),a&&(a.faceIndex=Math.floor(C/3),e.push(a))}}else if(f!==void 0)if(Array.isArray(o))for(let T=0,R=x.length;T<R;T++){const C=x[T],w=o[C.materialIndex],N=Math.max(C.start,b.start),I=Math.min(f.count,Math.min(C.start+C.count,b.start+b.count));for(let z=N,F=I;z<F;z+=3){const H=z,q=z+1,Z=z+2;a=ty(this,w,t,n,d,g,y,H,q,Z),a&&(a.faceIndex=Math.floor(z/3),a.face.materialIndex=C.materialIndex,e.push(a))}}else{const T=Math.max(0,b.start),R=Math.min(f.count,b.start+b.count);for(let C=T,w=R;C<w;C+=3){const N=C,I=C+1,z=C+2;a=ty(this,o,t,n,d,g,y,N,I,z),a&&(a.faceIndex=Math.floor(C/3),e.push(a))}}}}function kN(i,t,e,n,a,s,o,c){let f;if(t.side===Vr?f=n.intersectTriangle(o,s,a,!0,c):f=n.intersectTriangle(a,s,o,t.side===Nu,c),f===null)return null;$v.copy(c),$v.applyMatrix4(i.matrixWorld);const d=e.ray.origin.distanceTo($v);return d<e.near||d>e.far?null:{distance:d,point:$v.clone(),object:i}}function ty(i,t,e,n,a,s,o,c,f,d){i.getVertexPosition(c,Zv),i.getVertexPosition(f,Kv),i.getVertexPosition(d,Qv);const g=kN(i,t,e,n,Zv,Kv,Qv,RA);if(g){const y=new pt;io.getBarycoord(RA,Zv,Kv,Qv,y),a&&(g.uv=io.getInterpolatedAttribute(a,c,f,d,y,new de)),s&&(g.uv1=io.getInterpolatedAttribute(s,c,f,d,y,new de)),o&&(g.normal=io.getInterpolatedAttribute(o,c,f,d,y,new pt),g.normal.dot(n.direction)>0&&g.normal.multiplyScalar(-1));const x={a:c,b:f,c:d,normal:new pt,materialIndex:0};io.getNormal(Zv,Kv,Qv,x.normal),g.face=x,g.barycoord=y}return g}class pd extends wn{constructor(t=1,e=1,n=1,a=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:a,heightSegments:s,depthSegments:o};const c=this;a=Math.floor(a),s=Math.floor(s),o=Math.floor(o);const f=[],d=[],g=[],y=[];let x=0,b=0;T("z","y","x",-1,-1,n,e,t,o,s,0),T("z","y","x",1,-1,n,e,-t,o,s,1),T("x","z","y",1,1,t,n,e,a,o,2),T("x","z","y",1,-1,t,n,-e,a,o,3),T("x","y","z",1,-1,t,e,n,a,s,4),T("x","y","z",-1,-1,t,e,-n,a,s,5),this.setIndex(f),this.setAttribute("position",new Ze(d,3)),this.setAttribute("normal",new Ze(g,3)),this.setAttribute("uv",new Ze(y,2));function T(R,C,w,N,I,z,F,H,q,Z,B){const V=z/q,Q=F/Z,J=z/2,rt=F/2,ut=H/2,vt=q+1,j=Z+1;let K=0,et=0;const dt=new pt;for(let lt=0;lt<j;lt++){const G=lt*Q-rt;for(let nt=0;nt<vt;nt++){const ft=nt*V-J;dt[R]=ft*N,dt[C]=G*I,dt[w]=ut,d.push(dt.x,dt.y,dt.z),dt[R]=0,dt[C]=0,dt[w]=H>0?1:-1,g.push(dt.x,dt.y,dt.z),y.push(nt/q),y.push(1-lt/Z),K+=1}}for(let lt=0;lt<Z;lt++)for(let G=0;G<q;G++){const nt=x+G+vt*lt,ft=x+G+vt*(lt+1),mt=x+(G+1)+vt*(lt+1),xt=x+(G+1)+vt*lt;f.push(nt,ft,xt),f.push(ft,mt,xt),et+=6}c.addGroup(b,et,B),b+=et,x+=K}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new pd(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Yp(i){const t={};for(const e in i){t[e]={};for(const n in i[e]){const a=i[e][n];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?a.isRenderTargetTexture?(Ie("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[e][n]=null):t[e][n]=a.clone():Array.isArray(a)?t[e][n]=a.slice():t[e][n]=a}}return t}function Ir(i){const t={};for(let e=0;e<i.length;e++){const n=Yp(i[e]);for(const a in n)t[a]=n[a]}return t}function VN(i){const t=[];for(let e=0;e<i.length;e++)t.push(i[e].clone());return t}function qC(i){const t=i.getRenderTarget();return t===null?i.outputColorSpace:t.isXRRenderTarget===!0?t.texture.colorSpace:Xn.workingColorSpace}const G2={clone:Yp,merge:Ir};var HN=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,GN=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class pl extends lr{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=HN,this.fragmentShader=GN,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Yp(t.uniforms),this.uniformsGroups=VN(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this.defaultAttributeValues=Object.assign({},t.defaultAttributeValues),this.index0AttributeName=t.index0AttributeName,this.uniformsNeedUpdate=t.uniformsNeedUpdate,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const a in this.uniforms){const o=this.uniforms[a].value;o&&o.isTexture?e.uniforms[a]={type:"t",value:o.toJSON(t).uuid}:o&&o.isColor?e.uniforms[a]={type:"c",value:o.getHex()}:o&&o.isVector2?e.uniforms[a]={type:"v2",value:o.toArray()}:o&&o.isVector3?e.uniforms[a]={type:"v3",value:o.toArray()}:o&&o.isVector4?e.uniforms[a]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?e.uniforms[a]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?e.uniforms[a]={type:"m4",value:o.toArray()}:e.uniforms[a]={value:o}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const n={};for(const a in this.extensions)this.extensions[a]===!0&&(n[a]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class M1 extends li{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new gn,this.projectionMatrix=new gn,this.projectionMatrixInverse=new gn,this.coordinateSystem=Fo,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Rf=new pt,DA=new de,LA=new de;let fa=class extends M1{constructor(t=50,e=1,n=.1,a=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=a,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=qp*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(td*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return qp*2*Math.atan(Math.tan(td*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,n){Rf.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(Rf.x,Rf.y).multiplyScalar(-t/Rf.z),Rf.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Rf.x,Rf.y).multiplyScalar(-t/Rf.z)}getViewSize(t,e){return this.getViewBounds(t,DA,LA),e.subVectors(LA,DA)}setViewOffset(t,e,n,a,s,o){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=a,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(td*.5*this.fov)/this.zoom,n=2*e,a=this.aspect*n,s=-.5*a;const o=this.view;if(this.view!==null&&this.view.enabled){const f=o.fullWidth,d=o.fullHeight;s+=o.offsetX*a/f,e-=o.offsetY*n/d,a*=o.width/f,n*=o.height/d}const c=this.filmOffset;c!==0&&(s+=t*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+a,e,e-n,t,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}};const pp=-90,mp=1;class XC extends li{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const a=new fa(pp,mp,t,e);a.layers=this.layers,this.add(a);const s=new fa(pp,mp,t,e);s.layers=this.layers,this.add(s);const o=new fa(pp,mp,t,e);o.layers=this.layers,this.add(o);const c=new fa(pp,mp,t,e);c.layers=this.layers,this.add(c);const f=new fa(pp,mp,t,e);f.layers=this.layers,this.add(f);const d=new fa(pp,mp,t,e);d.layers=this.layers,this.add(d)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[n,a,s,o,c,f]=e;for(const d of e)this.remove(d);if(t===Fo)n.up.set(0,1,0),n.lookAt(1,0,0),a.up.set(0,1,0),a.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),c.up.set(0,1,0),c.lookAt(0,0,1),f.up.set(0,1,0),f.lookAt(0,0,-1);else if(t===jp)n.up.set(0,-1,0),n.lookAt(-1,0,0),a.up.set(0,-1,0),a.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),c.up.set(0,-1,0),c.lookAt(0,0,1),f.up.set(0,-1,0),f.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(const d of e)this.add(d),d.updateMatrixWorld()}update(t,e){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:a}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[s,o,c,f,d,g]=this.children,y=t.getRenderTarget(),x=t.getActiveCubeFace(),b=t.getActiveMipmapLevel(),T=t.xr.enabled;t.xr.enabled=!1;const R=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0,a),t.render(e,s),t.setRenderTarget(n,1,a),t.render(e,o),t.setRenderTarget(n,2,a),t.render(e,c),t.setRenderTarget(n,3,a),t.render(e,f),t.setRenderTarget(n,4,a),t.render(e,d),n.texture.generateMipmaps=R,t.setRenderTarget(n,5,a),t.render(e,g),t.setRenderTarget(y,x,b),t.xr.enabled=T,n.texture.needsPMREMUpdate=!0}}class w0 extends pa{constructor(t=[],e=kc,n,a,s,o,c,f,d,g){super(t,e,n,a,s,o,c,f,d,g),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class j2 extends ro{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1},a=[n,n,n,n,n,n];this.texture=new w0(a),this._setTextureOptions(e),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},a=new pd(5,5,5),s=new pl({name:"CubemapFromEquirect",uniforms:Yp(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Vr,blending:zc});s.uniforms.tEquirect.value=e;const o=new ma(a,s),c=e.minFilter;return e.minFilter===Uc&&(e.minFilter=Di),new XC(1,10,this).update(t,o),e.minFilter=c,o.geometry.dispose(),o.material.dispose(),this}clear(t,e=!0,n=!0,a=!0){const s=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(e,n,a);t.setRenderTarget(s)}}class Op extends li{constructor(){super(),this.isGroup=!0,this.type="Group"}}const jN={type:"move"};class Xy{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Op,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Op,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new pt,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new pt),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Op,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new pt,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new pt),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,n){let a=null,s=null,o=null;const c=this._targetRay,f=this._grip,d=this._hand;if(t&&e.session.visibilityState!=="visible-blurred"){if(d&&t.hand){o=!0;for(const R of t.hand.values()){const C=e.getJointPose(R,n),w=this._getHandJoint(d,R);C!==null&&(w.matrix.fromArray(C.transform.matrix),w.matrix.decompose(w.position,w.rotation,w.scale),w.matrixWorldNeedsUpdate=!0,w.jointRadius=C.radius),w.visible=C!==null}const g=d.joints["index-finger-tip"],y=d.joints["thumb-tip"],x=g.position.distanceTo(y.position),b=.02,T=.005;d.inputState.pinching&&x>b+T?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!d.inputState.pinching&&x<=b-T&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else f!==null&&t.gripSpace&&(s=e.getPose(t.gripSpace,n),s!==null&&(f.matrix.fromArray(s.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),f.matrixWorldNeedsUpdate=!0,s.linearVelocity?(f.hasLinearVelocity=!0,f.linearVelocity.copy(s.linearVelocity)):f.hasLinearVelocity=!1,s.angularVelocity?(f.hasAngularVelocity=!0,f.angularVelocity.copy(s.angularVelocity)):f.hasAngularVelocity=!1));c!==null&&(a=e.getPose(t.targetRaySpace,n),a===null&&s!==null&&(a=s),a!==null&&(c.matrix.fromArray(a.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,a.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(a.linearVelocity)):c.hasLinearVelocity=!1,a.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(a.angularVelocity)):c.hasAngularVelocity=!1,this.dispatchEvent(jN)))}return c!==null&&(c.visible=a!==null),f!==null&&(f.visible=s!==null),d!==null&&(d.visible=o!==null),this}_getHandJoint(t,e){if(t.joints[e.jointName]===void 0){const n=new Op;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}}class T1{constructor(t,e=25e-5){this.isFogExp2=!0,this.name="",this.color=new He(t),this.density=e}clone(){return new T1(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class A1{constructor(t,e=1,n=1e3){this.isFog=!0,this.name="",this.color=new He(t),this.near=e,this.far=n}clone(){return new A1(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class W2 extends li{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Vo,this.environmentIntensity=1,this.environmentRotation=new Vo,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}}class E1{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=r0,this.updateRanges=[],this.version=0,this.uuid=ko()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let a=0,s=this.stride;a<s;a++)this.array[t+a]=e.array[n+a];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ko()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ko()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ur=new pt;class od{constructor(t,e,n,a=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=a}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)Ur.fromBufferAttribute(this,e),Ur.applyMatrix4(t),this.setXYZ(e,Ur.x,Ur.y,Ur.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Ur.fromBufferAttribute(this,e),Ur.applyNormalMatrix(t),this.setXYZ(e,Ur.x,Ur.y,Ur.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Ur.fromBufferAttribute(this,e),Ur.transformDirection(t),this.setXYZ(e,Ur.x,Ur.y,Ur.z);return this}getComponent(t,e){let n=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(n=Fr(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=On(n,this.array)),this.data.array[t*this.data.stride+this.offset+e]=n,this}setX(t,e){return this.normalized&&(e=On(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=On(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=On(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=On(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=Fr(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=Fr(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=Fr(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=Fr(e,this.array)),e}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=On(e,this.array),n=On(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,a){return t=t*this.data.stride+this.offset,this.normalized&&(e=On(e,this.array),n=On(n,this.array),a=On(a,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=a,this}setXYZW(t,e,n,a,s){return t=t*this.data.stride+this.offset,this.normalized&&(e=On(e,this.array),n=On(n,this.array),a=On(a,this.array),s=On(s,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=a,this.data.array[t+3]=s,this}clone(t){if(t===void 0){l0("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const a=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)e.push(this.data.array[a+s])}return new Pi(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new od(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){l0("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const a=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)e.push(this.data.array[a+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class q2 extends lr{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new He(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let gp;const gg=new pt,vp=new pt,yp=new pt,_p=new de,vg=new de,YC=new gn,ey=new pt,yg=new pt,ny=new pt,OA=new de,dS=new de,NA=new de;class ZC extends li{constructor(t=new q2){if(super(),this.isSprite=!0,this.type="Sprite",gp===void 0){gp=new wn;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new E1(e,5);gp.setIndex([0,1,2,0,2,3]),gp.setAttribute("position",new od(n,3,0,!1)),gp.setAttribute("uv",new od(n,2,3,!1))}this.geometry=gp,this.material=t,this.center=new de(.5,.5),this.count=1}raycast(t,e){t.camera===null&&rn('Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),vp.setFromMatrixScale(this.matrixWorld),YC.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),yp.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&vp.multiplyScalar(-yp.z);const n=this.material.rotation;let a,s;n!==0&&(s=Math.cos(n),a=Math.sin(n));const o=this.center;iy(ey.set(-.5,-.5,0),yp,o,vp,a,s),iy(yg.set(.5,-.5,0),yp,o,vp,a,s),iy(ny.set(.5,.5,0),yp,o,vp,a,s),OA.set(0,0),dS.set(1,0),NA.set(1,1);let c=t.ray.intersectTriangle(ey,yg,ny,!1,gg);if(c===null&&(iy(yg.set(-.5,.5,0),yp,o,vp,a,s),dS.set(0,1),c=t.ray.intersectTriangle(ey,ny,yg,!1,gg),c===null))return;const f=t.ray.origin.distanceTo(gg);f<t.near||f>t.far||e.push({distance:f,point:gg.clone(),uv:io.getInterpolation(gg,ey,yg,ny,OA,dS,NA,new de),face:null,object:this})}copy(t,e){return super.copy(t,e),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}}function iy(i,t,e,n,a,s){_p.subVectors(i,e).addScalar(.5).multiply(n),a!==void 0?(vg.x=s*_p.x-a*_p.y,vg.y=a*_p.x+s*_p.y):vg.copy(_p),i.copy(t),i.x+=vg.x,i.y+=vg.y,i.applyMatrix4(YC)}const ay=new pt,UA=new pt;class KC extends li{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const e=t.levels;for(let n=0,a=e.length;n<a;n++){const s=e[n];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,e=0,n=0){e=Math.abs(e);const a=this.levels;let s;for(s=0;s<a.length&&!(e<a[s].distance);s++);return a.splice(s,0,{distance:e,hysteresis:n,object:t}),this.add(t),this}removeLevel(t){const e=this.levels;for(let n=0;n<e.length;n++)if(e[n].distance===t){const a=e.splice(n,1);return this.remove(a[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const e=this.levels;if(e.length>0){let n,a;for(n=1,a=e.length;n<a;n++){let s=e[n].distance;if(e[n].object.visible&&(s-=s*e[n].hysteresis),t<s)break}return e[n-1].object}return null}raycast(t,e){if(this.levels.length>0){ay.setFromMatrixPosition(this.matrixWorld);const a=t.ray.origin.distanceTo(ay);this.getObjectForDistance(a).raycast(t,e)}}update(t){const e=this.levels;if(e.length>1){ay.setFromMatrixPosition(t.matrixWorld),UA.setFromMatrixPosition(this.matrixWorld);const n=ay.distanceTo(UA)/t.zoom;e[0].object.visible=!0;let a,s;for(a=1,s=e.length;a<s;a++){let o=e[a].distance;if(e[a].object.visible&&(o-=o*e[a].hysteresis),n>=o)e[a-1].object.visible=!1,e[a].object.visible=!0;else break}for(this._currentLevel=a-1;a<s;a++)e[a].object.visible=!1}}toJSON(t){const e=super.toJSON(t);this.autoUpdate===!1&&(e.object.autoUpdate=!1),e.object.levels=[];const n=this.levels;for(let a=0,s=n.length;a<s;a++){const o=n[a];e.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return e}}const IA=new pt,PA=new Ri,zA=new Ri,WN=new pt,BA=new gn,sy=new pt,pS=new As,FA=new gn,mS=new dd;class QC extends ma{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Eb,this.bindMatrix=new gn,this.bindMatrixInverse=new gn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ts),this.boundingBox.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,sy),this.boundingBox.expandByPoint(sy)}computeBoundingSphere(){const t=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new As),this.boundingSphere.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,sy),this.boundingSphere.expandByPoint(sy)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){const n=this.material,a=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),pS.copy(this.boundingSphere),pS.applyMatrix4(a),t.ray.intersectsSphere(pS)!==!1&&(FA.copy(a).invert(),mS.copy(t.ray).applyMatrix4(FA),!(this.boundingBox!==null&&mS.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(t,e,mS)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Ri,e=this.geometry.attributes.skinWeight;for(let n=0,a=e.count;n<a;n++){t.fromBufferAttribute(e,n);const s=1/t.manhattanLength();s!==1/0?t.multiplyScalar(s):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===Eb?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===CC?this.bindMatrixInverse.copy(this.bindMatrix).invert():Ie("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){const n=this.skeleton,a=this.geometry;PA.fromBufferAttribute(a.attributes.skinIndex,t),zA.fromBufferAttribute(a.attributes.skinWeight,t),IA.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let s=0;s<4;s++){const o=zA.getComponent(s);if(o!==0){const c=PA.getComponent(s);BA.multiplyMatrices(n.bones[c].matrixWorld,n.boneInverses[c]),e.addScaledVector(WN.copy(IA).applyMatrix4(BA),o)}}return e.applyMatrix4(this.bindMatrixInverse)}}class X2 extends li{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Jl extends pa{constructor(t=null,e=1,n=1,a,s,o,c,f,d=Ba,g=Ba,y,x){super(null,o,c,f,d,g,a,s,y,x),this.isDataTexture=!0,this.image={data:t,width:e,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const kA=new gn,qN=new gn;class w1{constructor(t=[],e=[]){this.uuid=ko(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.previousBoneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),e.length===0)this.calculateInverses();else if(t.length!==e.length){Ie("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,a=this.bones.length;n<a;n++)this.boneInverses.push(new gn)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const n=new gn;this.bones[t]&&n.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&n.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,a=this.boneTexture;for(let s=0,o=t.length;s<o;s++){const c=t[s]?t[s].matrixWorld:qN;kA.multiplyMatrices(c,e[s]),kA.toArray(n,s*16)}a!==null&&(a.needsUpdate=!0)}clone(){return new w1(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new Jl(e,t,t,sr,ar);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const a=this.bones[e];if(a.name===t)return a}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,a=t.bones.length;n<a;n++){const s=t.bones[n];let o=e[s];o===void 0&&(Ie("Skeleton: No bone found with UUID:",s),o=new X2),this.bones.push(o),this.boneInverses.push(new gn().fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let a=0,s=e.length;a<s;a++){const o=e[a];t.bones.push(o.uuid);const c=n[a];t.boneInverses.push(c.toArray())}return t}}class ld extends Pi{constructor(t,e,n,a=1){super(t,e,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=a}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const xp=new gn,VA=new gn,ry=[],HA=new Ts,XN=new gn,_g=new ma,xg=new As;class JC extends ma{constructor(t,e,n){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new ld(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let a=0;a<n;a++)this.setMatrixAt(a,XN)}computeBoundingBox(){const t=this.geometry,e=this.count;this.boundingBox===null&&(this.boundingBox=new Ts),t.boundingBox===null&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,xp),HA.copy(t.boundingBox).applyMatrix4(xp),this.boundingBox.union(HA)}computeBoundingSphere(){const t=this.geometry,e=this.count;this.boundingSphere===null&&(this.boundingSphere=new As),t.boundingSphere===null&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,xp),xg.copy(t.boundingSphere).applyMatrix4(xp),this.boundingSphere.union(xg)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),t.morphTexture!==null&&(this.morphTexture=t.morphTexture.clone()),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,t*16)}getMorphAt(t,e){const n=e.morphTargetInfluences,a=this.morphTexture.source.data.data,s=n.length+1,o=t*s+1;for(let c=0;c<n.length;c++)n[c]=a[o+c]}raycast(t,e){const n=this.matrixWorld,a=this.count;if(_g.geometry=this.geometry,_g.material=this.material,_g.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),xg.copy(this.boundingSphere),xg.applyMatrix4(n),t.ray.intersectsSphere(xg)!==!1))for(let s=0;s<a;s++){this.getMatrixAt(s,xp),VA.multiplyMatrices(n,xp),_g.matrixWorld=VA,_g.raycast(t,ry);for(let o=0,c=ry.length;o<c;o++){const f=ry[o];f.instanceId=s,f.object=this,e.push(f)}ry.length=0}}setColorAt(t,e){this.instanceColor===null&&(this.instanceColor=new ld(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),e.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,t*16)}setMorphAt(t,e){const n=e.morphTargetInfluences,a=n.length+1;this.morphTexture===null&&(this.morphTexture=new Jl(new Float32Array(a*this.count),a,this.count,m1,ar));const s=this.morphTexture.source.data.data;let o=0;for(let d=0;d<n.length;d++)o+=n[d];const c=this.geometry.morphTargetsRelative?1:1-o,f=a*t;s[f]=c,s.set(n,f+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const gS=new pt,YN=new pt,ZN=new En;let wu=class{constructor(t=new pt(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,a){return this.normal.set(t,e,n),this.constant=a,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const a=gS.subVectors(n,e).cross(YN.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(a,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const n=t.delta(gS),a=this.normal.dot(n);if(a===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;const s=-(t.start.dot(this.normal)+this.constant)/a;return s<0||s>1?null:e.copy(t.start).addScaledVector(n,s)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||ZN.getNormalMatrix(t),a=this.coplanarPoint(gS).applyMatrix4(t),s=this.normal.applyMatrix3(n).normalize();return this.constant=-a.dot(s),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}};const Rh=new As,KN=new de(.5,.5),oy=new pt;class im{constructor(t=new wu,e=new wu,n=new wu,a=new wu,s=new wu,o=new wu){this.planes=[t,e,n,a,s,o]}set(t,e,n,a,s,o){const c=this.planes;return c[0].copy(t),c[1].copy(e),c[2].copy(n),c[3].copy(a),c[4].copy(s),c[5].copy(o),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t,e=Fo,n=!1){const a=this.planes,s=t.elements,o=s[0],c=s[1],f=s[2],d=s[3],g=s[4],y=s[5],x=s[6],b=s[7],T=s[8],R=s[9],C=s[10],w=s[11],N=s[12],I=s[13],z=s[14],F=s[15];if(a[0].setComponents(d-o,b-g,w-T,F-N).normalize(),a[1].setComponents(d+o,b+g,w+T,F+N).normalize(),a[2].setComponents(d+c,b+y,w+R,F+I).normalize(),a[3].setComponents(d-c,b-y,w-R,F-I).normalize(),n)a[4].setComponents(f,x,C,z).normalize(),a[5].setComponents(d-f,b-x,w-C,F-z).normalize();else if(a[4].setComponents(d-f,b-x,w-C,F-z).normalize(),e===Fo)a[5].setComponents(d+f,b+x,w+C,F+z).normalize();else if(e===jp)a[5].setComponents(f,x,C,z).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),Rh.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;e.boundingSphere===null&&e.computeBoundingSphere(),Rh.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Rh)}intersectsSprite(t){Rh.center.set(0,0,0);const e=KN.distanceTo(t.center);return Rh.radius=.7071067811865476+e,Rh.applyMatrix4(t.matrixWorld),this.intersectsSphere(Rh)}intersectsSphere(t){const e=this.planes,n=t.center,a=-t.radius;for(let s=0;s<6;s++)if(e[s].distanceToPoint(n)<a)return!1;return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const a=e[n];if(oy.x=a.normal.x>0?t.max.x:t.min.x,oy.y=a.normal.y>0?t.max.y:t.min.y,oy.z=a.normal.z>0?t.max.z:t.min.z,a.distanceToPoint(oy)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Dc=new gn,Lc=new im;class C1{constructor(){this.coordinateSystem=Fo}intersectsObject(t,e){if(!e.isArrayCamera||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const a=e.cameras[n];if(Dc.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Lc.setFromProjectionMatrix(Dc,a.coordinateSystem,a.reversedDepth),Lc.intersectsObject(t))return!0}return!1}intersectsSprite(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const a=e.cameras[n];if(Dc.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Lc.setFromProjectionMatrix(Dc,a.coordinateSystem,a.reversedDepth),Lc.intersectsSprite(t))return!0}return!1}intersectsSphere(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const a=e.cameras[n];if(Dc.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Lc.setFromProjectionMatrix(Dc,a.coordinateSystem,a.reversedDepth),Lc.intersectsSphere(t))return!0}return!1}intersectsBox(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const a=e.cameras[n];if(Dc.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Lc.setFromProjectionMatrix(Dc,a.coordinateSystem,a.reversedDepth),Lc.intersectsBox(t))return!0}return!1}containsPoint(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const a=e.cameras[n];if(Dc.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Lc.setFromProjectionMatrix(Dc,a.coordinateSystem,a.reversedDepth),Lc.containsPoint(t))return!0}return!1}clone(){return new C1}}function vS(i,t){return i-t}function QN(i,t){return i.z-t.z}function JN(i,t){return t.z-i.z}class $N{constructor(){this.index=0,this.pool=[],this.list=[]}push(t,e,n,a){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const c=s[this.index];o.push(c),this.index++,c.start=t,c.count=e,c.z=n,c.index=a}reset(){this.list.length=0,this.index=0}}const to=new gn,tU=new He(1,1,1),GA=new im,eU=new C1,ly=new Ts,Dh=new As,Sg=new pt,jA=new pt,nU=new pt,yS=new $N,nr=new ma,cy=[];function iU(i,t,e=0){const n=t.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==t.array.constructor){const a=i.count;for(let s=0;s<a;s++)for(let o=0;o<n;o++)t.setComponent(s+e,o,i.getComponent(s,o))}else t.array.set(i.array,e*n);t.needsUpdate=!0}function Lh(i,t){if(i.constructor!==t.constructor){const e=Math.min(i.length,t.length);for(let n=0;n<e;n++)t[n]=i[n]}else{const e=Math.min(i.length,t.length);t.set(new i.constructor(i.buffer,0,e))}}class $C extends ma{constructor(t,e,n=e*2,a){super(new wn,a),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=t,this._maxVertexCount=e,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(t),this._multiDrawStarts=new Int32Array(t),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let t=Math.sqrt(this._maxInstanceCount*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const e=new Float32Array(t*t*4),n=new Jl(e,t,t,sr,ar);this._matricesTexture=n}_initIndirectTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Uint32Array(t*t),n=new Jl(e,t,t,E0,dl);this._indirectTexture=n}_initColorsTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Float32Array(t*t*4).fill(1),n=new Jl(e,t,t,sr,ar);n.colorSpace=Xn.workingColorSpace,this._colorsTexture=n}_initializeGeometry(t){const e=this.geometry,n=this._maxVertexCount,a=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in t.attributes){const o=t.getAttribute(s),{array:c,itemSize:f,normalized:d}=o,g=new c.constructor(n*f),y=new Pi(g,f,d);e.setAttribute(s,y)}if(t.getIndex()!==null){const s=n>65535?new Uint32Array(a):new Uint16Array(a);e.setIndex(new Pi(s,1))}this._geometryInitialized=!0}}_validateGeometry(t){const e=this.geometry;if(!!t.getIndex()!=!!e.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in e.attributes){if(!t.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const a=t.getAttribute(n),s=e.getAttribute(n);if(a.itemSize!==s.itemSize||a.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(t){const e=this._instanceInfo;if(t<0||t>=e.length||e[t].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${t}. Instance is either out of range or has been deleted.`)}validateGeometryId(t){const e=this._geometryInfo;if(t<0||t>=e.length||e[t].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${t}. Geometry is either out of range or has been deleted.`)}setCustomSort(t){return this.customSort=t,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ts);const t=this.boundingBox,e=this._instanceInfo;t.makeEmpty();for(let n=0,a=e.length;n<a;n++){if(e[n].active===!1)continue;const s=e[n].geometryIndex;this.getMatrixAt(n,to),this.getBoundingBoxAt(s,ly).applyMatrix4(to),t.union(ly)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new As);const t=this.boundingSphere,e=this._instanceInfo;t.makeEmpty();for(let n=0,a=e.length;n<a;n++){if(e[n].active===!1)continue;const s=e[n].geometryIndex;this.getMatrixAt(n,to),this.getBoundingSphereAt(s,Dh).applyMatrix4(to),t.union(Dh)}}addInstance(t){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:t};let a=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(vS),a=this._availableInstanceIds.shift(),this._instanceInfo[a]=n):(a=this._instanceInfo.length,this._instanceInfo.push(n));const s=this._matricesTexture;to.identity().toArray(s.image.data,a*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&(tU.toArray(o.image.data,a*4),o.needsUpdate=!0),this._visibilityChanged=!0,a}addGeometry(t,e=-1,n=-1){this._initializeGeometry(t),this._validateGeometry(t);const a={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;a.vertexStart=this._nextVertexStart,a.reservedVertexCount=e===-1?t.getAttribute("position").count:e;const o=t.getIndex();if(o!==null&&(a.indexStart=this._nextIndexStart,a.reservedIndexCount=n===-1?o.count:n),a.indexStart!==-1&&a.indexStart+a.reservedIndexCount>this._maxIndexCount||a.vertexStart+a.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let f;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(vS),f=this._availableGeometryIds.shift(),s[f]=a):(f=this._geometryCount,this._geometryCount++,s.push(a)),this.setGeometryAt(f,t),this._nextIndexStart=a.indexStart+a.reservedIndexCount,this._nextVertexStart=a.vertexStart+a.reservedVertexCount,f}setGeometryAt(t,e){if(t>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(e);const n=this.geometry,a=n.getIndex()!==null,s=n.getIndex(),o=e.getIndex(),c=this._geometryInfo[t];if(a&&o.count>c.reservedIndexCount||e.attributes.position.count>c.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const f=c.vertexStart,d=c.reservedVertexCount;c.vertexCount=e.getAttribute("position").count;for(const g in n.attributes){const y=e.getAttribute(g),x=n.getAttribute(g);iU(y,x,f);const b=y.itemSize;for(let T=y.count,R=d;T<R;T++){const C=f+T;for(let w=0;w<b;w++)x.setComponent(C,w,0)}x.needsUpdate=!0,x.addUpdateRange(f*b,d*b)}if(a){const g=c.indexStart,y=c.reservedIndexCount;c.indexCount=e.getIndex().count;for(let x=0;x<o.count;x++)s.setX(g+x,f+o.getX(x));for(let x=o.count,b=y;x<b;x++)s.setX(g+x,f);s.needsUpdate=!0,s.addUpdateRange(g,c.reservedIndexCount)}return c.start=a?c.indexStart:c.vertexStart,c.count=a?c.indexCount:c.vertexCount,c.boundingBox=null,e.boundingBox!==null&&(c.boundingBox=e.boundingBox.clone()),c.boundingSphere=null,e.boundingSphere!==null&&(c.boundingSphere=e.boundingSphere.clone()),this._visibilityChanged=!0,t}deleteGeometry(t){const e=this._geometryInfo;if(t>=e.length||e[t].active===!1)return this;const n=this._instanceInfo;for(let a=0,s=n.length;a<s;a++)n[a].active&&n[a].geometryIndex===t&&this.deleteInstance(a);return e[t].active=!1,this._availableGeometryIds.push(t),this._visibilityChanged=!0,this}deleteInstance(t){return this.validateInstanceId(t),this._instanceInfo[t].active=!1,this._availableInstanceIds.push(t),this._visibilityChanged=!0,this}optimize(){let t=0,e=0;const n=this._geometryInfo,a=n.map((o,c)=>c).sort((o,c)=>n[o].vertexStart-n[c].vertexStart),s=this.geometry;for(let o=0,c=n.length;o<c;o++){const f=a[o],d=n[f];if(d.active!==!1){if(s.index!==null){if(d.indexStart!==e){const{indexStart:g,vertexStart:y,reservedIndexCount:x}=d,b=s.index,T=b.array,R=t-y;for(let C=g;C<g+x;C++)T[C]=T[C]+R;b.array.copyWithin(e,g,g+x),b.addUpdateRange(e,x),b.needsUpdate=!0,d.indexStart=e}e+=d.reservedIndexCount}if(d.vertexStart!==t){const{vertexStart:g,reservedVertexCount:y}=d,x=s.attributes;for(const b in x){const T=x[b],{array:R,itemSize:C}=T;R.copyWithin(t*C,g*C,(g+y)*C),T.addUpdateRange(t*C,y*C),T.needsUpdate=!0}d.vertexStart=t}t+=d.reservedVertexCount,d.start=s.index?d.indexStart:d.vertexStart,this._nextIndexStart=s.index?d.indexStart+d.reservedIndexCount:0,this._nextVertexStart=d.vertexStart+d.reservedVertexCount}}return this._visibilityChanged=!0,this}getBoundingBoxAt(t,e){if(t>=this._geometryCount)return null;const n=this.geometry,a=this._geometryInfo[t];if(a.boundingBox===null){const s=new Ts,o=n.index,c=n.attributes.position;for(let f=a.start,d=a.start+a.count;f<d;f++){let g=f;o&&(g=o.getX(g)),s.expandByPoint(Sg.fromBufferAttribute(c,g))}a.boundingBox=s}return e.copy(a.boundingBox),e}getBoundingSphereAt(t,e){if(t>=this._geometryCount)return null;const n=this.geometry,a=this._geometryInfo[t];if(a.boundingSphere===null){const s=new As;this.getBoundingBoxAt(t,ly),ly.getCenter(s.center);const o=n.index,c=n.attributes.position;let f=0;for(let d=a.start,g=a.start+a.count;d<g;d++){let y=d;o&&(y=o.getX(y)),Sg.fromBufferAttribute(c,y),f=Math.max(f,s.center.distanceToSquared(Sg))}s.radius=Math.sqrt(f),a.boundingSphere=s}return e.copy(a.boundingSphere),e}setMatrixAt(t,e){this.validateInstanceId(t);const n=this._matricesTexture,a=this._matricesTexture.image.data;return e.toArray(a,t*16),n.needsUpdate=!0,this}getMatrixAt(t,e){return this.validateInstanceId(t),e.fromArray(this._matricesTexture.image.data,t*16)}setColorAt(t,e){return this.validateInstanceId(t),this._colorsTexture===null&&this._initColorsTexture(),e.toArray(this._colorsTexture.image.data,t*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(t,e){return this.validateInstanceId(t),e.fromArray(this._colorsTexture.image.data,t*4)}setVisibleAt(t,e){return this.validateInstanceId(t),this._instanceInfo[t].visible===e?this:(this._instanceInfo[t].visible=e,this._visibilityChanged=!0,this)}getVisibleAt(t){return this.validateInstanceId(t),this._instanceInfo[t].visible}setGeometryIdAt(t,e){return this.validateInstanceId(t),this.validateGeometryId(e),this._instanceInfo[t].geometryIndex=e,this}getGeometryIdAt(t){return this.validateInstanceId(t),this._instanceInfo[t].geometryIndex}getGeometryRangeAt(t,e={}){this.validateGeometryId(t);const n=this._geometryInfo[t];return e.vertexStart=n.vertexStart,e.vertexCount=n.vertexCount,e.reservedVertexCount=n.reservedVertexCount,e.indexStart=n.indexStart,e.indexCount=n.indexCount,e.reservedIndexCount=n.reservedIndexCount,e.start=n.start,e.count=n.count,e}setInstanceCount(t){const e=this._availableInstanceIds,n=this._instanceInfo;for(e.sort(vS);e[e.length-1]===n.length-1;)n.pop(),e.pop();if(t<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${t} are being used. Cannot shrink instance count.`);const a=new Int32Array(t),s=new Int32Array(t);Lh(this._multiDrawCounts,a),Lh(this._multiDrawStarts,s),this._multiDrawCounts=a,this._multiDrawStarts=s,this._maxInstanceCount=t;const o=this._indirectTexture,c=this._matricesTexture,f=this._colorsTexture;o.dispose(),this._initIndirectTexture(),Lh(o.image.data,this._indirectTexture.image.data),c.dispose(),this._initMatricesTexture(),Lh(c.image.data,this._matricesTexture.image.data),f&&(f.dispose(),this._initColorsTexture(),Lh(f.image.data,this._colorsTexture.image.data))}setGeometrySize(t,e){const n=[...this._geometryInfo].filter(c=>c.active);if(Math.max(...n.map(c=>c.vertexStart+c.reservedVertexCount))>t)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${e}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(f=>f.indexStart+f.reservedIndexCount))>e)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${e}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=t,this._maxIndexCount=e,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new wn,this._initializeGeometry(s));const o=this.geometry;s.index&&Lh(s.index.array,o.index.array);for(const c in s.attributes)Lh(s.attributes[c].array,o.attributes[c].array)}raycast(t,e){const n=this._instanceInfo,a=this._geometryInfo,s=this.matrixWorld,o=this.geometry;nr.material=this.material,nr.geometry.index=o.index,nr.geometry.attributes=o.attributes,nr.geometry.boundingBox===null&&(nr.geometry.boundingBox=new Ts),nr.geometry.boundingSphere===null&&(nr.geometry.boundingSphere=new As);for(let c=0,f=n.length;c<f;c++){if(!n[c].visible||!n[c].active)continue;const d=n[c].geometryIndex,g=a[d];nr.geometry.setDrawRange(g.start,g.count),this.getMatrixAt(c,nr.matrixWorld).premultiply(s),this.getBoundingBoxAt(d,nr.geometry.boundingBox),this.getBoundingSphereAt(d,nr.geometry.boundingSphere),nr.raycast(t,cy);for(let y=0,x=cy.length;y<x;y++){const b=cy[y];b.object=this,b.batchId=c,e.push(b)}cy.length=0}nr.material=null,nr.geometry.index=null,nr.geometry.attributes={},nr.geometry.setDrawRange(0,1/0)}copy(t){return super.copy(t),this.geometry=t.geometry.clone(),this.perObjectFrustumCulled=t.perObjectFrustumCulled,this.sortObjects=t.sortObjects,this.boundingBox=t.boundingBox!==null?t.boundingBox.clone():null,this.boundingSphere=t.boundingSphere!==null?t.boundingSphere.clone():null,this._geometryInfo=t._geometryInfo.map(e=>({...e,boundingBox:e.boundingBox!==null?e.boundingBox.clone():null,boundingSphere:e.boundingSphere!==null?e.boundingSphere.clone():null})),this._instanceInfo=t._instanceInfo.map(e=>({...e})),this._availableInstanceIds=t._availableInstanceIds.slice(),this._availableGeometryIds=t._availableGeometryIds.slice(),this._nextIndexStart=t._nextIndexStart,this._nextVertexStart=t._nextVertexStart,this._geometryCount=t._geometryCount,this._maxInstanceCount=t._maxInstanceCount,this._maxVertexCount=t._maxVertexCount,this._maxIndexCount=t._maxIndexCount,this._geometryInitialized=t._geometryInitialized,this._multiDrawCounts=t._multiDrawCounts.slice(),this._multiDrawStarts=t._multiDrawStarts.slice(),this._indirectTexture=t._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=t._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=t._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(t,e,n,a,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=a.getIndex(),c=o===null?1:o.array.BYTES_PER_ELEMENT,f=this._instanceInfo,d=this._multiDrawStarts,g=this._multiDrawCounts,y=this._geometryInfo,x=this.perObjectFrustumCulled,b=this._indirectTexture,T=b.image.data,R=n.isArrayCamera?eU:GA;x&&!n.isArrayCamera&&(to.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),GA.setFromProjectionMatrix(to,n.coordinateSystem,n.reversedDepth));let C=0;if(this.sortObjects){to.copy(this.matrixWorld).invert(),Sg.setFromMatrixPosition(n.matrixWorld).applyMatrix4(to),jA.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(to);for(let I=0,z=f.length;I<z;I++)if(f[I].visible&&f[I].active){const F=f[I].geometryIndex;this.getMatrixAt(I,to),this.getBoundingSphereAt(F,Dh).applyMatrix4(to);let H=!1;if(x&&(H=!R.intersectsSphere(Dh,n)),!H){const q=y[F],Z=nU.subVectors(Dh.center,Sg).dot(jA);yS.push(q.start,q.count,Z,I)}}const w=yS.list,N=this.customSort;N===null?w.sort(s.transparent?JN:QN):N.call(this,w,n);for(let I=0,z=w.length;I<z;I++){const F=w[I];d[C]=F.start*c,g[C]=F.count,T[C]=F.index,C++}yS.reset()}else for(let w=0,N=f.length;w<N;w++)if(f[w].visible&&f[w].active){const I=f[w].geometryIndex;let z=!1;if(x&&(this.getMatrixAt(w,to),this.getBoundingSphereAt(I,Dh).applyMatrix4(to),z=!R.intersectsSphere(Dh,n)),!z){const F=y[I];d[C]=F.start*c,g[C]=F.count,T[C]=w,C++}}b.needsUpdate=!0,this._multiDrawCount=C,this._visibilityChanged=!1}onBeforeShadow(t,e,n,a,s,o){this.onBeforeRender(t,null,a,s,o)}}class Hr extends lr{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new He(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const j_=new pt,W_=new pt,WA=new gn,bg=new dd,uy=new As,_S=new pt,qA=new pt;class Vf extends li{constructor(t=new wn,e=new Hr){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,n=[0];for(let a=1,s=e.count;a<s;a++)j_.fromBufferAttribute(e,a-1),W_.fromBufferAttribute(e,a),n[a]=n[a-1],n[a]+=j_.distanceTo(W_);t.setAttribute("lineDistance",new Ze(n,1))}else Ie("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,a=this.matrixWorld,s=t.params.Line.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),uy.copy(n.boundingSphere),uy.applyMatrix4(a),uy.radius+=s,t.ray.intersectsSphere(uy)===!1)return;WA.copy(a).invert(),bg.copy(t.ray).applyMatrix4(WA);const c=s/((this.scale.x+this.scale.y+this.scale.z)/3),f=c*c,d=this.isLineSegments?2:1,g=n.index,x=n.attributes.position;if(g!==null){const b=Math.max(0,o.start),T=Math.min(g.count,o.start+o.count);for(let R=b,C=T-1;R<C;R+=d){const w=g.getX(R),N=g.getX(R+1),I=fy(this,t,bg,f,w,N,R);I&&e.push(I)}if(this.isLineLoop){const R=g.getX(T-1),C=g.getX(b),w=fy(this,t,bg,f,R,C,T-1);w&&e.push(w)}}else{const b=Math.max(0,o.start),T=Math.min(x.count,o.start+o.count);for(let R=b,C=T-1;R<C;R+=d){const w=fy(this,t,bg,f,R,R+1,R);w&&e.push(w)}if(this.isLineLoop){const R=fy(this,t,bg,f,T-1,b,T-1);R&&e.push(R)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const a=e[n[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=a.length;s<o;s++){const c=a[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=s}}}}}function fy(i,t,e,n,a,s,o){const c=i.geometry.attributes.position;if(j_.fromBufferAttribute(c,a),W_.fromBufferAttribute(c,s),e.distanceSqToSegment(j_,W_,_S,qA)>n)return;_S.applyMatrix4(i.matrixWorld);const d=t.ray.origin.distanceTo(_S);if(!(d<t.near||d>t.far))return{distance:d,point:qA.clone().applyMatrix4(i.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:i}}const XA=new pt,YA=new pt;class Gc extends Vf{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,n=[];for(let a=0,s=e.count;a<s;a+=2)XA.fromBufferAttribute(e,a),YA.fromBufferAttribute(e,a+1),n[a]=a===0?0:n[a-1],n[a+1]=n[a]+XA.distanceTo(YA);t.setAttribute("lineDistance",new Ze(n,1))}else Ie("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class tR extends Vf{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class Y2 extends lr{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new He(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const ZA=new gn,Rb=new dd,hy=new As,dy=new pt;class eR extends li{constructor(t=new wn,e=new Y2){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,a=this.matrixWorld,s=t.params.Points.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),hy.copy(n.boundingSphere),hy.applyMatrix4(a),hy.radius+=s,t.ray.intersectsSphere(hy)===!1)return;ZA.copy(a).invert(),Rb.copy(t.ray).applyMatrix4(ZA);const c=s/((this.scale.x+this.scale.y+this.scale.z)/3),f=c*c,d=n.index,y=n.attributes.position;if(d!==null){const x=Math.max(0,o.start),b=Math.min(d.count,o.start+o.count);for(let T=x,R=b;T<R;T++){const C=d.getX(T);dy.fromBufferAttribute(y,C),KA(dy,C,f,a,t,e,this)}}else{const x=Math.max(0,o.start),b=Math.min(y.count,o.start+o.count);for(let T=x,R=b;T<R;T++)dy.fromBufferAttribute(y,T),KA(dy,T,f,a,t,e,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const a=e[n[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=a.length;s<o;s++){const c=a[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=s}}}}}function KA(i,t,e,n,a,s,o){const c=Rb.distanceSqToPoint(i);if(c<e){const f=new pt;Rb.closestPointToPoint(i,f),f.applyMatrix4(n);const d=a.ray.origin.distanceTo(f);if(d<a.near||d>a.far)return;s.push({distance:d,distanceToRay:Math.sqrt(c),point:f,index:t,face:null,faceIndex:null,barycoord:null,object:o})}}class nR extends pa{constructor(t,e,n,a,s=Di,o=Di,c,f,d){super(t,e,n,a,s,o,c,f,d),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const g=this;function y(){g.needsUpdate=!0,g._requestVideoFrameCallbackId=t.requestVideoFrameCallback(y)}"requestVideoFrameCallback"in t&&(this._requestVideoFrameCallbackId=t.requestVideoFrameCallback(y))}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;"requestVideoFrameCallback"in t===!1&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&(this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),this._requestVideoFrameCallbackId=0),super.dispose()}}class aU extends nR{constructor(t,e,n,a,s,o,c,f){super({},t,e,n,a,s,o,c,f),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(t){this.image=t,this.needsUpdate=!0}}class sU extends pa{constructor(t,e){super({width:t,height:e}),this.isFramebufferTexture=!0,this.magFilter=Ba,this.minFilter=Ba,this.generateMipmaps=!1,this.needsUpdate=!0}}class R1 extends pa{constructor(t,e,n,a,s,o,c,f,d,g,y,x){super(null,o,c,f,d,g,a,s,y,x),this.isCompressedTexture=!0,this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class rU extends R1{constructor(t,e,n,a,s,o){super(t,e,n,s,o),this.isCompressedArrayTexture=!0,this.image.depth=a,this.wrapR=ao,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class oU extends R1{constructor(t,e,n){super(void 0,t[0].width,t[0].height,e,n,kc),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=t}}class lU extends pa{constructor(t,e,n,a,s,o,c,f,d){super(t,e,n,a,s,o,c,f,d),this.isCanvasTexture=!0,this.needsUpdate=!0}}class cd extends pa{constructor(t,e,n=dl,a,s,o,c=Ba,f=Ba,d,g=Vc,y=1){if(g!==Vc&&g!==If)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const x={width:t,height:e,depth:y};super(x,a,s,o,c,f,g,n,d),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.source=new Pf(Object.assign({},t.image)),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return this.compareFunction!==null&&(e.compareFunction=this.compareFunction),e}}class iR extends cd{constructor(t,e=dl,n=kc,a,s,o=Ba,c=Ba,f,d=Vc){const g={width:t,height:t,depth:1},y=[g,g,g,g,g,g];super(t,t,e,n,a,s,o,c,f,d),this.image=y,this.isCubeDepthTexture=!0,this.isCubeTexture=!0}get images(){return this.image}set images(t){this.image=t}}class Z2 extends pa{constructor(t=null){super(),this.sourceTexture=t,this.isExternalTexture=!0}copy(t){return super.copy(t),this.sourceTexture=t.sourceTexture,this}}class D1 extends wn{constructor(t=1,e=1,n=4,a=8,s=1){super(),this.type="CapsuleGeometry",this.parameters={radius:t,height:e,capSegments:n,radialSegments:a,heightSegments:s},e=Math.max(0,e),n=Math.max(1,Math.floor(n)),a=Math.max(3,Math.floor(a)),s=Math.max(1,Math.floor(s));const o=[],c=[],f=[],d=[],g=e/2,y=Math.PI/2*t,x=e,b=2*y+x,T=n*2+s,R=a+1,C=new pt,w=new pt;for(let N=0;N<=T;N++){let I=0,z=0,F=0,H=0;if(N<=n){const B=N/n,V=B*Math.PI/2;z=-g-t*Math.cos(V),F=t*Math.sin(V),H=-t*Math.cos(V),I=B*y}else if(N<=n+s){const B=(N-n)/s;z=-g+B*e,F=t,H=0,I=y+B*x}else{const B=(N-n-s)/n,V=B*Math.PI/2;z=g+t*Math.sin(V),F=t*Math.cos(V),H=t*Math.sin(V),I=y+x+B*y}const q=Math.max(0,Math.min(1,I/b));let Z=0;N===0?Z=.5/a:N===T&&(Z=-.5/a);for(let B=0;B<=a;B++){const V=B/a,Q=V*Math.PI*2,J=Math.sin(Q),rt=Math.cos(Q);w.x=-F*rt,w.y=z,w.z=F*J,c.push(w.x,w.y,w.z),C.set(-F*rt,H,F*J),C.normalize(),f.push(C.x,C.y,C.z),d.push(V+Z,q)}if(N>0){const B=(N-1)*R;for(let V=0;V<a;V++){const Q=B+V,J=B+V+1,rt=N*R+V,ut=N*R+V+1;o.push(Q,J,rt),o.push(J,ut,rt)}}}this.setIndex(o),this.setAttribute("position",new Ze(c,3)),this.setAttribute("normal",new Ze(f,3)),this.setAttribute("uv",new Ze(d,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new D1(t.radius,t.height,t.capSegments,t.radialSegments,t.heightSegments)}}class L1 extends wn{constructor(t=1,e=32,n=0,a=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:a},e=Math.max(3,e);const s=[],o=[],c=[],f=[],d=new pt,g=new de;o.push(0,0,0),c.push(0,0,1),f.push(.5,.5);for(let y=0,x=3;y<=e;y++,x+=3){const b=n+y/e*a;d.x=t*Math.cos(b),d.y=t*Math.sin(b),o.push(d.x,d.y,d.z),c.push(0,0,1),g.x=(o[x]/t+1)/2,g.y=(o[x+1]/t+1)/2,f.push(g.x,g.y)}for(let y=1;y<=e;y++)s.push(y,y+1,0);this.setIndex(s),this.setAttribute("position",new Ze(o,3)),this.setAttribute("normal",new Ze(c,3)),this.setAttribute("uv",new Ze(f,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new L1(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class C0 extends wn{constructor(t=1,e=1,n=1,a=32,s=1,o=!1,c=0,f=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:a,heightSegments:s,openEnded:o,thetaStart:c,thetaLength:f};const d=this;a=Math.floor(a),s=Math.floor(s);const g=[],y=[],x=[],b=[];let T=0;const R=[],C=n/2;let w=0;N(),o===!1&&(t>0&&I(!0),e>0&&I(!1)),this.setIndex(g),this.setAttribute("position",new Ze(y,3)),this.setAttribute("normal",new Ze(x,3)),this.setAttribute("uv",new Ze(b,2));function N(){const z=new pt,F=new pt;let H=0;const q=(e-t)/n;for(let Z=0;Z<=s;Z++){const B=[],V=Z/s,Q=V*(e-t)+t;for(let J=0;J<=a;J++){const rt=J/a,ut=rt*f+c,vt=Math.sin(ut),j=Math.cos(ut);F.x=Q*vt,F.y=-V*n+C,F.z=Q*j,y.push(F.x,F.y,F.z),z.set(vt,q,j).normalize(),x.push(z.x,z.y,z.z),b.push(rt,1-V),B.push(T++)}R.push(B)}for(let Z=0;Z<a;Z++)for(let B=0;B<s;B++){const V=R[B][Z],Q=R[B+1][Z],J=R[B+1][Z+1],rt=R[B][Z+1];(t>0||B!==0)&&(g.push(V,Q,rt),H+=3),(e>0||B!==s-1)&&(g.push(Q,J,rt),H+=3)}d.addGroup(w,H,0),w+=H}function I(z){const F=T,H=new de,q=new pt;let Z=0;const B=z===!0?t:e,V=z===!0?1:-1;for(let J=1;J<=a;J++)y.push(0,C*V,0),x.push(0,V,0),b.push(.5,.5),T++;const Q=T;for(let J=0;J<=a;J++){const ut=J/a*f+c,vt=Math.cos(ut),j=Math.sin(ut);q.x=B*j,q.y=C*V,q.z=B*vt,y.push(q.x,q.y,q.z),x.push(0,V,0),H.x=vt*.5+.5,H.y=j*.5*V+.5,b.push(H.x,H.y),T++}for(let J=0;J<a;J++){const rt=F+J,ut=Q+J;z===!0?g.push(ut,ut+1,rt):g.push(ut+1,ut,rt),Z+=3}d.addGroup(w,Z,z===!0?1:2),w+=Z}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new C0(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class R0 extends C0{constructor(t=1,e=1,n=32,a=1,s=!1,o=0,c=Math.PI*2){super(0,t,e,n,a,s,o,c),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:a,openEnded:s,thetaStart:o,thetaLength:c}}static fromJSON(t){return new R0(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Wf extends wn{constructor(t=[],e=[],n=1,a=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:a};const s=[],o=[];c(a),d(n),g(),this.setAttribute("position",new Ze(s,3)),this.setAttribute("normal",new Ze(s.slice(),3)),this.setAttribute("uv",new Ze(o,2)),a===0?this.computeVertexNormals():this.normalizeNormals();function c(N){const I=new pt,z=new pt,F=new pt;for(let H=0;H<e.length;H+=3)b(e[H+0],I),b(e[H+1],z),b(e[H+2],F),f(I,z,F,N)}function f(N,I,z,F){const H=F+1,q=[];for(let Z=0;Z<=H;Z++){q[Z]=[];const B=N.clone().lerp(z,Z/H),V=I.clone().lerp(z,Z/H),Q=H-Z;for(let J=0;J<=Q;J++)J===0&&Z===H?q[Z][J]=B:q[Z][J]=B.clone().lerp(V,J/Q)}for(let Z=0;Z<H;Z++)for(let B=0;B<2*(H-Z)-1;B++){const V=Math.floor(B/2);B%2===0?(x(q[Z][V+1]),x(q[Z+1][V]),x(q[Z][V])):(x(q[Z][V+1]),x(q[Z+1][V+1]),x(q[Z+1][V]))}}function d(N){const I=new pt;for(let z=0;z<s.length;z+=3)I.x=s[z+0],I.y=s[z+1],I.z=s[z+2],I.normalize().multiplyScalar(N),s[z+0]=I.x,s[z+1]=I.y,s[z+2]=I.z}function g(){const N=new pt;for(let I=0;I<s.length;I+=3){N.x=s[I+0],N.y=s[I+1],N.z=s[I+2];const z=C(N)/2/Math.PI+.5,F=w(N)/Math.PI+.5;o.push(z,1-F)}T(),y()}function y(){for(let N=0;N<o.length;N+=6){const I=o[N+0],z=o[N+2],F=o[N+4],H=Math.max(I,z,F),q=Math.min(I,z,F);H>.9&&q<.1&&(I<.2&&(o[N+0]+=1),z<.2&&(o[N+2]+=1),F<.2&&(o[N+4]+=1))}}function x(N){s.push(N.x,N.y,N.z)}function b(N,I){const z=N*3;I.x=t[z+0],I.y=t[z+1],I.z=t[z+2]}function T(){const N=new pt,I=new pt,z=new pt,F=new pt,H=new de,q=new de,Z=new de;for(let B=0,V=0;B<s.length;B+=9,V+=6){N.set(s[B+0],s[B+1],s[B+2]),I.set(s[B+3],s[B+4],s[B+5]),z.set(s[B+6],s[B+7],s[B+8]),H.set(o[V+0],o[V+1]),q.set(o[V+2],o[V+3]),Z.set(o[V+4],o[V+5]),F.copy(N).add(I).add(z).divideScalar(3);const Q=C(F);R(H,V+0,N,Q),R(q,V+2,I,Q),R(Z,V+4,z,Q)}}function R(N,I,z,F){F<0&&N.x===1&&(o[I]=N.x-1),z.x===0&&z.z===0&&(o[I]=F/2/Math.PI+.5)}function C(N){return Math.atan2(N.z,-N.x)}function w(N){return Math.atan2(-N.y,Math.sqrt(N.x*N.x+N.z*N.z))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Wf(t.vertices,t.indices,t.radius,t.detail)}}class O1 extends Wf{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2,a=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-a,-n,0,-a,n,0,a,-n,0,a,n,-a,-n,0,-a,n,0,a,-n,0,a,n,0,-n,0,-a,n,0,-a,-n,0,a,n,0,a],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new O1(t.radius,t.detail)}}const py=new pt,my=new pt,xS=new pt,gy=new io;class aR extends wn{constructor(t=null,e=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},t!==null){const a=Math.pow(10,4),s=Math.cos(td*e),o=t.getIndex(),c=t.getAttribute("position"),f=o?o.count:c.count,d=[0,0,0],g=["a","b","c"],y=new Array(3),x={},b=[];for(let T=0;T<f;T+=3){o?(d[0]=o.getX(T),d[1]=o.getX(T+1),d[2]=o.getX(T+2)):(d[0]=T,d[1]=T+1,d[2]=T+2);const{a:R,b:C,c:w}=gy;if(R.fromBufferAttribute(c,d[0]),C.fromBufferAttribute(c,d[1]),w.fromBufferAttribute(c,d[2]),gy.getNormal(xS),y[0]=`${Math.round(R.x*a)},${Math.round(R.y*a)},${Math.round(R.z*a)}`,y[1]=`${Math.round(C.x*a)},${Math.round(C.y*a)},${Math.round(C.z*a)}`,y[2]=`${Math.round(w.x*a)},${Math.round(w.y*a)},${Math.round(w.z*a)}`,!(y[0]===y[1]||y[1]===y[2]||y[2]===y[0]))for(let N=0;N<3;N++){const I=(N+1)%3,z=y[N],F=y[I],H=gy[g[N]],q=gy[g[I]],Z=`${z}_${F}`,B=`${F}_${z}`;B in x&&x[B]?(xS.dot(x[B].normal)<=s&&(b.push(H.x,H.y,H.z),b.push(q.x,q.y,q.z)),x[B]=null):Z in x||(x[Z]={index0:d[N],index1:d[I],normal:xS.clone()})}}for(const T in x)if(x[T]){const{index0:R,index1:C}=x[T];py.fromBufferAttribute(c,R),my.fromBufferAttribute(c,C),b.push(py.x,py.y,py.z),b.push(my.x,my.y,my.z)}this.setAttribute("position",new Ze(b,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}class ec{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){Ie("Curve: .getPoint() not implemented.")}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,a=this.getPoint(0),s=0;e.push(0);for(let o=1;o<=t;o++)n=this.getPoint(o/t),s+=n.distanceTo(a),e.push(s),a=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e=null){const n=this.getLengths();let a=0;const s=n.length;let o;e?o=e:o=t*n[s-1];let c=0,f=s-1,d;for(;c<=f;)if(a=Math.floor(c+(f-c)/2),d=n[a]-o,d<0)c=a+1;else if(d>0)f=a-1;else{f=a;break}if(a=f,n[a]===o)return a/(s-1);const g=n[a],x=n[a+1]-g,b=(o-g)/x;return(a+b)/(s-1)}getTangent(t,e){let a=t-1e-4,s=t+1e-4;a<0&&(a=0),s>1&&(s=1);const o=this.getPoint(a),c=this.getPoint(s),f=e||(o.isVector2?new de:new pt);return f.copy(c).sub(o).normalize(),f}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e=!1){const n=new pt,a=[],s=[],o=[],c=new pt,f=new gn;for(let b=0;b<=t;b++){const T=b/t;a[b]=this.getTangentAt(T,new pt)}s[0]=new pt,o[0]=new pt;let d=Number.MAX_VALUE;const g=Math.abs(a[0].x),y=Math.abs(a[0].y),x=Math.abs(a[0].z);g<=d&&(d=g,n.set(1,0,0)),y<=d&&(d=y,n.set(0,1,0)),x<=d&&n.set(0,0,1),c.crossVectors(a[0],n).normalize(),s[0].crossVectors(a[0],c),o[0].crossVectors(a[0],s[0]);for(let b=1;b<=t;b++){if(s[b]=s[b-1].clone(),o[b]=o[b-1].clone(),c.crossVectors(a[b-1],a[b]),c.length()>Number.EPSILON){c.normalize();const T=Math.acos(mn(a[b-1].dot(a[b]),-1,1));s[b].applyMatrix4(f.makeRotationAxis(c,T))}o[b].crossVectors(a[b],s[b])}if(e===!0){let b=Math.acos(mn(s[0].dot(s[t]),-1,1));b/=t,a[0].dot(c.crossVectors(s[0],s[t]))>0&&(b=-b);for(let T=1;T<=t;T++)s[T].applyMatrix4(f.makeRotationAxis(a[T],b*T)),o[T].crossVectors(a[T],s[T])}return{tangents:a,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class N1 extends ec{constructor(t=0,e=0,n=1,a=1,s=0,o=Math.PI*2,c=!1,f=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=a,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=c,this.aRotation=f}getPoint(t,e=new de){const n=e,a=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=a;for(;s>a;)s-=a;s<Number.EPSILON&&(o?s=0:s=a),this.aClockwise===!0&&!o&&(s===a?s=-a:s=s-a);const c=this.aStartAngle+t*s;let f=this.aX+this.xRadius*Math.cos(c),d=this.aY+this.yRadius*Math.sin(c);if(this.aRotation!==0){const g=Math.cos(this.aRotation),y=Math.sin(this.aRotation),x=f-this.aX,b=d-this.aY;f=x*g-b*y+this.aX,d=x*y+b*g+this.aY}return n.set(f,d)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class sR extends N1{constructor(t,e,n,a,s,o){super(t,e,n,n,a,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function K2(){let i=0,t=0,e=0,n=0;function a(s,o,c,f){i=s,t=c,e=-3*s+3*o-2*c-f,n=2*s-2*o+c+f}return{initCatmullRom:function(s,o,c,f,d){a(o,c,d*(c-s),d*(f-o))},initNonuniformCatmullRom:function(s,o,c,f,d,g,y){let x=(o-s)/d-(c-s)/(d+g)+(c-o)/g,b=(c-o)/g-(f-o)/(g+y)+(f-c)/y;x*=g,b*=g,a(o,c,x,b)},calc:function(s){const o=s*s,c=o*s;return i+t*s+e*o+n*c}}}const vy=new pt,SS=new K2,bS=new K2,MS=new K2;class rR extends ec{constructor(t=[],e=!1,n="centripetal",a=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=a}getPoint(t,e=new pt){const n=e,a=this.points,s=a.length,o=(s-(this.closed?0:1))*t;let c=Math.floor(o),f=o-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/s)+1)*s:f===0&&c===s-1&&(c=s-2,f=1);let d,g;this.closed||c>0?d=a[(c-1)%s]:(vy.subVectors(a[0],a[1]).add(a[0]),d=vy);const y=a[c%s],x=a[(c+1)%s];if(this.closed||c+2<s?g=a[(c+2)%s]:(vy.subVectors(a[s-1],a[s-2]).add(a[s-1]),g=vy),this.curveType==="centripetal"||this.curveType==="chordal"){const b=this.curveType==="chordal"?.5:.25;let T=Math.pow(d.distanceToSquared(y),b),R=Math.pow(y.distanceToSquared(x),b),C=Math.pow(x.distanceToSquared(g),b);R<1e-4&&(R=1),T<1e-4&&(T=R),C<1e-4&&(C=R),SS.initNonuniformCatmullRom(d.x,y.x,x.x,g.x,T,R,C),bS.initNonuniformCatmullRom(d.y,y.y,x.y,g.y,T,R,C),MS.initNonuniformCatmullRom(d.z,y.z,x.z,g.z,T,R,C)}else this.curveType==="catmullrom"&&(SS.initCatmullRom(d.x,y.x,x.x,g.x,this.tension),bS.initCatmullRom(d.y,y.y,x.y,g.y,this.tension),MS.initCatmullRom(d.z,y.z,x.z,g.z,this.tension));return n.set(SS.calc(f),bS.calc(f),MS.calc(f)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const a=t.points[e];this.points.push(a.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const a=this.points[e];t.points.push(a.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const a=t.points[e];this.points.push(new pt().fromArray(a))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function QA(i,t,e,n,a){const s=(n-t)*.5,o=(a-e)*.5,c=i*i,f=i*c;return(2*e-2*n+s+o)*f+(-3*e+3*n-2*s-o)*c+s*i+e}function cU(i,t){const e=1-i;return e*e*t}function uU(i,t){return 2*(1-i)*i*t}function fU(i,t){return i*i*t}function Gg(i,t,e,n){return cU(i,t)+uU(i,e)+fU(i,n)}function hU(i,t){const e=1-i;return e*e*e*t}function dU(i,t){const e=1-i;return 3*e*e*i*t}function pU(i,t){return 3*(1-i)*i*i*t}function mU(i,t){return i*i*i*t}function jg(i,t,e,n,a){return hU(i,t)+dU(i,e)+pU(i,n)+mU(i,a)}class Q2 extends ec{constructor(t=new de,e=new de,n=new de,a=new de){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=a}getPoint(t,e=new de){const n=e,a=this.v0,s=this.v1,o=this.v2,c=this.v3;return n.set(jg(t,a.x,s.x,o.x,c.x),jg(t,a.y,s.y,o.y,c.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class oR extends ec{constructor(t=new pt,e=new pt,n=new pt,a=new pt){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=a}getPoint(t,e=new pt){const n=e,a=this.v0,s=this.v1,o=this.v2,c=this.v3;return n.set(jg(t,a.x,s.x,o.x,c.x),jg(t,a.y,s.y,o.y,c.y),jg(t,a.z,s.z,o.z,c.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class J2 extends ec{constructor(t=new de,e=new de){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new de){const n=e;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new de){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class lR extends ec{constructor(t=new pt,e=new pt){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new pt){const n=e;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new pt){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class $2 extends ec{constructor(t=new de,e=new de,n=new de){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new de){const n=e,a=this.v0,s=this.v1,o=this.v2;return n.set(Gg(t,a.x,s.x,o.x),Gg(t,a.y,s.y,o.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class tM extends ec{constructor(t=new pt,e=new pt,n=new pt){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new pt){const n=e,a=this.v0,s=this.v1,o=this.v2;return n.set(Gg(t,a.x,s.x,o.x),Gg(t,a.y,s.y,o.y),Gg(t,a.z,s.z,o.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class eM extends ec{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new de){const n=e,a=this.points,s=(a.length-1)*t,o=Math.floor(s),c=s-o,f=a[o===0?o:o-1],d=a[o],g=a[o>a.length-2?a.length-1:o+1],y=a[o>a.length-3?a.length-1:o+2];return n.set(QA(c,f.x,d.x,g.x,y.x),QA(c,f.y,d.y,g.y,y.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const a=t.points[e];this.points.push(a.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const a=this.points[e];t.points.push(a.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const a=t.points[e];this.points.push(new de().fromArray(a))}return this}}var q_=Object.freeze({__proto__:null,ArcCurve:sR,CatmullRomCurve3:rR,CubicBezierCurve:Q2,CubicBezierCurve3:oR,EllipseCurve:N1,LineCurve:J2,LineCurve3:lR,QuadraticBezierCurve:$2,QuadraticBezierCurve3:tM,SplineCurve:eM});class cR extends ec{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);if(!t.equals(e)){const n=t.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new q_[n](e,t))}return this}getPoint(t,e){const n=t*this.getLength(),a=this.getCurveLengths();let s=0;for(;s<a.length;){if(a[s]>=n){const o=a[s]-n,c=this.curves[s],f=c.getLength(),d=f===0?0:1-o/f;return c.getPointAt(d,e)}s++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,a=this.curves.length;n<a;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let a=0,s=this.curves;a<s.length;a++){const o=s[a],c=o.isEllipseCurve?t*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?t*o.points.length:t,f=o.getPoints(c);for(let d=0;d<f.length;d++){const g=f[d];n&&n.equals(g)||(e.push(g),n=g)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const a=t.curves[e];this.curves.push(a.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const a=this.curves[e];t.curves.push(a.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const a=t.curves[e];this.curves.push(new q_[a.type]().fromJSON(a))}return this}}class X_ extends cR{constructor(t){super(),this.type="Path",this.currentPoint=new de,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new J2(this.currentPoint.clone(),new de(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,a){const s=new $2(this.currentPoint.clone(),new de(t,e),new de(n,a));return this.curves.push(s),this.currentPoint.set(n,a),this}bezierCurveTo(t,e,n,a,s,o){const c=new Q2(this.currentPoint.clone(),new de(t,e),new de(n,a),new de(s,o));return this.curves.push(c),this.currentPoint.set(s,o),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new eM(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,a,s,o){const c=this.currentPoint.x,f=this.currentPoint.y;return this.absarc(t+c,e+f,n,a,s,o),this}absarc(t,e,n,a,s,o){return this.absellipse(t,e,n,n,a,s,o),this}ellipse(t,e,n,a,s,o,c,f){const d=this.currentPoint.x,g=this.currentPoint.y;return this.absellipse(t+d,e+g,n,a,s,o,c,f),this}absellipse(t,e,n,a,s,o,c,f){const d=new N1(t,e,n,a,s,o,c,f);if(this.curves.length>0){const y=d.getPoint(0);y.equals(this.currentPoint)||this.lineTo(y.x,y.y)}this.curves.push(d);const g=d.getPoint(1);return this.currentPoint.copy(g),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class ed extends X_{constructor(t){super(t),this.uuid=ko(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,a=this.holes.length;n<a;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const a=t.holes[e];this.holes.push(a.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const a=this.holes[e];t.holes.push(a.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const a=t.holes[e];this.holes.push(new X_().fromJSON(a))}return this}}function gU(i,t,e=2){const n=t&&t.length,a=n?t[0]*e:i.length;let s=uR(i,0,a,e,!0);const o=[];if(!s||s.next===s.prev)return o;let c,f,d;if(n&&(s=SU(i,t,s,e)),i.length>80*e){c=i[0],f=i[1];let g=c,y=f;for(let x=e;x<a;x+=e){const b=i[x],T=i[x+1];b<c&&(c=b),T<f&&(f=T),b>g&&(g=b),T>y&&(y=T)}d=Math.max(g-c,y-f),d=d!==0?32767/d:0}return c0(s,o,e,c,f,d,0),o}function uR(i,t,e,n,a){let s;if(a===OU(i,t,e,n)>0)for(let o=t;o<e;o+=n)s=JA(o/n|0,i[o],i[o+1],s);else for(let o=e-n;o>=t;o-=n)s=JA(o/n|0,i[o],i[o+1],s);return s&&Zp(s,s.next)&&(f0(s),s=s.next),s}function ud(i,t){if(!i)return i;t||(t=i);let e=i,n;do if(n=!1,!e.steiner&&(Zp(e,e.next)||ha(e.prev,e,e.next)===0)){if(f0(e),e=t=e.prev,e===e.next)break;n=!0}else e=e.next;while(n||e!==t);return t}function c0(i,t,e,n,a,s,o){if(!i)return;!o&&s&&EU(i,n,a,s);let c=i;for(;i.prev!==i.next;){const f=i.prev,d=i.next;if(s?yU(i,n,a,s):vU(i)){t.push(f.i,i.i,d.i),f0(i),i=d.next,c=d.next;continue}if(i=d,i===c){o?o===1?(i=_U(ud(i),t),c0(i,t,e,n,a,s,2)):o===2&&xU(i,t,e,n,a,s):c0(ud(i),t,e,n,a,s,1);break}}}function vU(i){const t=i.prev,e=i,n=i.next;if(ha(t,e,n)>=0)return!1;const a=t.x,s=e.x,o=n.x,c=t.y,f=e.y,d=n.y,g=Math.min(a,s,o),y=Math.min(c,f,d),x=Math.max(a,s,o),b=Math.max(c,f,d);let T=n.next;for(;T!==t;){if(T.x>=g&&T.x<=x&&T.y>=y&&T.y<=b&&Lg(a,c,s,f,o,d,T.x,T.y)&&ha(T.prev,T,T.next)>=0)return!1;T=T.next}return!0}function yU(i,t,e,n){const a=i.prev,s=i,o=i.next;if(ha(a,s,o)>=0)return!1;const c=a.x,f=s.x,d=o.x,g=a.y,y=s.y,x=o.y,b=Math.min(c,f,d),T=Math.min(g,y,x),R=Math.max(c,f,d),C=Math.max(g,y,x),w=Db(b,T,t,e,n),N=Db(R,C,t,e,n);let I=i.prevZ,z=i.nextZ;for(;I&&I.z>=w&&z&&z.z<=N;){if(I.x>=b&&I.x<=R&&I.y>=T&&I.y<=C&&I!==a&&I!==o&&Lg(c,g,f,y,d,x,I.x,I.y)&&ha(I.prev,I,I.next)>=0||(I=I.prevZ,z.x>=b&&z.x<=R&&z.y>=T&&z.y<=C&&z!==a&&z!==o&&Lg(c,g,f,y,d,x,z.x,z.y)&&ha(z.prev,z,z.next)>=0))return!1;z=z.nextZ}for(;I&&I.z>=w;){if(I.x>=b&&I.x<=R&&I.y>=T&&I.y<=C&&I!==a&&I!==o&&Lg(c,g,f,y,d,x,I.x,I.y)&&ha(I.prev,I,I.next)>=0)return!1;I=I.prevZ}for(;z&&z.z<=N;){if(z.x>=b&&z.x<=R&&z.y>=T&&z.y<=C&&z!==a&&z!==o&&Lg(c,g,f,y,d,x,z.x,z.y)&&ha(z.prev,z,z.next)>=0)return!1;z=z.nextZ}return!0}function _U(i,t){let e=i;do{const n=e.prev,a=e.next.next;!Zp(n,a)&&hR(n,e,e.next,a)&&u0(n,a)&&u0(a,n)&&(t.push(n.i,e.i,a.i),f0(e),f0(e.next),e=i=a),e=e.next}while(e!==i);return ud(e)}function xU(i,t,e,n,a,s){let o=i;do{let c=o.next.next;for(;c!==o.prev;){if(o.i!==c.i&&RU(o,c)){let f=dR(o,c);o=ud(o,o.next),f=ud(f,f.next),c0(o,t,e,n,a,s,0),c0(f,t,e,n,a,s,0);return}c=c.next}o=o.next}while(o!==i)}function SU(i,t,e,n){const a=[];for(let s=0,o=t.length;s<o;s++){const c=t[s]*n,f=s<o-1?t[s+1]*n:i.length,d=uR(i,c,f,n,!1);d===d.next&&(d.steiner=!0),a.push(CU(d))}a.sort(bU);for(let s=0;s<a.length;s++)e=MU(a[s],e);return e}function bU(i,t){let e=i.x-t.x;if(e===0&&(e=i.y-t.y,e===0)){const n=(i.next.y-i.y)/(i.next.x-i.x),a=(t.next.y-t.y)/(t.next.x-t.x);e=n-a}return e}function MU(i,t){const e=TU(i,t);if(!e)return t;const n=dR(e,i);return ud(n,n.next),ud(e,e.next)}function TU(i,t){let e=t;const n=i.x,a=i.y;let s=-1/0,o;if(Zp(i,e))return e;do{if(Zp(i,e.next))return e.next;if(a<=e.y&&a>=e.next.y&&e.next.y!==e.y){const y=e.x+(a-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(y<=n&&y>s&&(s=y,o=e.x<e.next.x?e:e.next,y===n))return o}e=e.next}while(e!==t);if(!o)return null;const c=o,f=o.x,d=o.y;let g=1/0;e=o;do{if(n>=e.x&&e.x>=f&&n!==e.x&&fR(a<d?n:s,a,f,d,a<d?s:n,a,e.x,e.y)){const y=Math.abs(a-e.y)/(n-e.x);u0(e,i)&&(y<g||y===g&&(e.x>o.x||e.x===o.x&&AU(o,e)))&&(o=e,g=y)}e=e.next}while(e!==c);return o}function AU(i,t){return ha(i.prev,i,t.prev)<0&&ha(t.next,i,i.next)<0}function EU(i,t,e,n){let a=i;do a.z===0&&(a.z=Db(a.x,a.y,t,e,n)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==i);a.prevZ.nextZ=null,a.prevZ=null,wU(a)}function wU(i){let t,e=1;do{let n=i,a;i=null;let s=null;for(t=0;n;){t++;let o=n,c=0;for(let d=0;d<e&&(c++,o=o.nextZ,!!o);d++);let f=e;for(;c>0||f>0&&o;)c!==0&&(f===0||!o||n.z<=o.z)?(a=n,n=n.nextZ,c--):(a=o,o=o.nextZ,f--),s?s.nextZ=a:i=a,a.prevZ=s,s=a;n=o}s.nextZ=null,e*=2}while(t>1);return i}function Db(i,t,e,n,a){return i=(i-e)*a|0,t=(t-n)*a|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,i|t<<1}function CU(i){let t=i,e=i;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==i);return e}function fR(i,t,e,n,a,s,o,c){return(a-o)*(t-c)>=(i-o)*(s-c)&&(i-o)*(n-c)>=(e-o)*(t-c)&&(e-o)*(s-c)>=(a-o)*(n-c)}function Lg(i,t,e,n,a,s,o,c){return!(i===o&&t===c)&&fR(i,t,e,n,a,s,o,c)}function RU(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!DU(i,t)&&(u0(i,t)&&u0(t,i)&&LU(i,t)&&(ha(i.prev,i,t.prev)||ha(i,t.prev,t))||Zp(i,t)&&ha(i.prev,i,i.next)>0&&ha(t.prev,t,t.next)>0)}function ha(i,t,e){return(t.y-i.y)*(e.x-t.x)-(t.x-i.x)*(e.y-t.y)}function Zp(i,t){return i.x===t.x&&i.y===t.y}function hR(i,t,e,n){const a=_y(ha(i,t,e)),s=_y(ha(i,t,n)),o=_y(ha(e,n,i)),c=_y(ha(e,n,t));return!!(a!==s&&o!==c||a===0&&yy(i,e,t)||s===0&&yy(i,n,t)||o===0&&yy(e,i,n)||c===0&&yy(e,t,n))}function yy(i,t,e){return t.x<=Math.max(i.x,e.x)&&t.x>=Math.min(i.x,e.x)&&t.y<=Math.max(i.y,e.y)&&t.y>=Math.min(i.y,e.y)}function _y(i){return i>0?1:i<0?-1:0}function DU(i,t){let e=i;do{if(e.i!==i.i&&e.next.i!==i.i&&e.i!==t.i&&e.next.i!==t.i&&hR(e,e.next,i,t))return!0;e=e.next}while(e!==i);return!1}function u0(i,t){return ha(i.prev,i,i.next)<0?ha(i,t,i.next)>=0&&ha(i,i.prev,t)>=0:ha(i,t,i.prev)<0||ha(i,i.next,t)<0}function LU(i,t){let e=i,n=!1;const a=(i.x+t.x)/2,s=(i.y+t.y)/2;do e.y>s!=e.next.y>s&&e.next.y!==e.y&&a<(e.next.x-e.x)*(s-e.y)/(e.next.y-e.y)+e.x&&(n=!n),e=e.next;while(e!==i);return n}function dR(i,t){const e=Lb(i.i,i.x,i.y),n=Lb(t.i,t.x,t.y),a=i.next,s=t.prev;return i.next=t,t.prev=i,e.next=a,a.prev=e,n.next=e,e.prev=n,s.next=n,n.prev=s,n}function JA(i,t,e,n){const a=Lb(i,t,e);return n?(a.next=n.next,a.prev=n,n.next.prev=a,n.next=a):(a.prev=a,a.next=a),a}function f0(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Lb(i,t,e){return{i,x:t,y:e,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function OU(i,t,e,n){let a=0;for(let s=t,o=e-n;s<e;s+=n)a+=(i[o]-i[s])*(i[s+1]+i[o+1]),o=s;return a}class NU{static triangulate(t,e,n=2){return gU(t,e,n)}}class Ql{static area(t){const e=t.length;let n=0;for(let a=e-1,s=0;s<e;a=s++)n+=t[a].x*t[s].y-t[s].x*t[a].y;return n*.5}static isClockWise(t){return Ql.area(t)<0}static triangulateShape(t,e){const n=[],a=[],s=[];$A(t),tE(n,t);let o=t.length;e.forEach($A);for(let f=0;f<e.length;f++)a.push(o),o+=e[f].length,tE(n,e[f]);const c=NU.triangulate(n,a);for(let f=0;f<c.length;f+=3)s.push(c.slice(f,f+3));return s}}function $A(i){const t=i.length;t>2&&i[t-1].equals(i[0])&&i.pop()}function tE(i,t){for(let e=0;e<t.length;e++)i.push(t[e].x),i.push(t[e].y)}class U1 extends wn{constructor(t=new ed([new de(.5,.5),new de(-.5,.5),new de(-.5,-.5),new de(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,a=[],s=[];for(let c=0,f=t.length;c<f;c++){const d=t[c];o(d)}this.setAttribute("position",new Ze(a,3)),this.setAttribute("uv",new Ze(s,2)),this.computeVertexNormals();function o(c){const f=[],d=e.curveSegments!==void 0?e.curveSegments:12,g=e.steps!==void 0?e.steps:1,y=e.depth!==void 0?e.depth:1;let x=e.bevelEnabled!==void 0?e.bevelEnabled:!0,b=e.bevelThickness!==void 0?e.bevelThickness:.2,T=e.bevelSize!==void 0?e.bevelSize:b-.1,R=e.bevelOffset!==void 0?e.bevelOffset:0,C=e.bevelSegments!==void 0?e.bevelSegments:3;const w=e.extrudePath,N=e.UVGenerator!==void 0?e.UVGenerator:UU;let I,z=!1,F,H,q,Z;if(w){I=w.getSpacedPoints(g),z=!0,x=!1;const Nt=w.isCatmullRomCurve3?w.closed:!1;F=w.computeFrenetFrames(g,Nt),H=new pt,q=new pt,Z=new pt}x||(C=0,b=0,T=0,R=0);const B=c.extractPoints(d);let V=B.shape;const Q=B.holes;if(!Ql.isClockWise(V)){V=V.reverse();for(let Nt=0,Vt=Q.length;Nt<Vt;Nt++){const Ft=Q[Nt];Ql.isClockWise(Ft)&&(Q[Nt]=Ft.reverse())}}function rt(Nt){const Ft=10000000000000001e-36;let re=Nt[0];for(let at=1;at<=Nt.length;at++){const ue=at%Nt.length,Zt=Nt[ue],Lt=Zt.x-re.x,ee=Zt.y-re.y,$=Lt*Lt+ee*ee,Y=Math.max(Math.abs(Zt.x),Math.abs(Zt.y),Math.abs(re.x),Math.abs(re.y)),yt=Ft*Y*Y;if($<=yt){Nt.splice(ue,1),at--;continue}re=Zt}}rt(V),Q.forEach(rt);const ut=Q.length,vt=V;for(let Nt=0;Nt<ut;Nt++){const Vt=Q[Nt];V=V.concat(Vt)}function j(Nt,Vt,Ft){return Vt||rn("ExtrudeGeometry: vec does not exist"),Nt.clone().addScaledVector(Vt,Ft)}const K=V.length;function et(Nt,Vt,Ft){let re,at,ue;const Zt=Nt.x-Vt.x,Lt=Nt.y-Vt.y,ee=Ft.x-Nt.x,$=Ft.y-Nt.y,Y=Zt*Zt+Lt*Lt,yt=Zt*$-Lt*ee;if(Math.abs(yt)>Number.EPSILON){const Bt=Math.sqrt(Y),Dt=Math.sqrt(ee*ee+$*$),Ct=Vt.x-Lt/Bt,ve=Vt.y+Zt/Bt,he=Ft.x-$/Dt,be=Ft.y+ee/Dt,Ce=((he-Ct)*$-(be-ve)*ee)/(Zt*$-Lt*ee);re=Ct+Zt*Ce-Nt.x,at=ve+Lt*Ce-Nt.y;const Gt=re*re+at*at;if(Gt<=2)return new de(re,at);ue=Math.sqrt(Gt/2)}else{let Bt=!1;Zt>Number.EPSILON?ee>Number.EPSILON&&(Bt=!0):Zt<-Number.EPSILON?ee<-Number.EPSILON&&(Bt=!0):Math.sign(Lt)===Math.sign($)&&(Bt=!0),Bt?(re=-Lt,at=Zt,ue=Math.sqrt(Y)):(re=Zt,at=Lt,ue=Math.sqrt(Y/2))}return new de(re/ue,at/ue)}const dt=[];for(let Nt=0,Vt=vt.length,Ft=Vt-1,re=Nt+1;Nt<Vt;Nt++,Ft++,re++)Ft===Vt&&(Ft=0),re===Vt&&(re=0),dt[Nt]=et(vt[Nt],vt[Ft],vt[re]);const lt=[];let G,nt=dt.concat();for(let Nt=0,Vt=ut;Nt<Vt;Nt++){const Ft=Q[Nt];G=[];for(let re=0,at=Ft.length,ue=at-1,Zt=re+1;re<at;re++,ue++,Zt++)ue===at&&(ue=0),Zt===at&&(Zt=0),G[re]=et(Ft[re],Ft[ue],Ft[Zt]);lt.push(G),nt=nt.concat(G)}let ft;if(C===0)ft=Ql.triangulateShape(vt,Q);else{const Nt=[],Vt=[];for(let Ft=0;Ft<C;Ft++){const re=Ft/C,at=b*Math.cos(re*Math.PI/2),ue=T*Math.sin(re*Math.PI/2)+R;for(let Zt=0,Lt=vt.length;Zt<Lt;Zt++){const ee=j(vt[Zt],dt[Zt],ue);$t(ee.x,ee.y,-at),re===0&&Nt.push(ee)}for(let Zt=0,Lt=ut;Zt<Lt;Zt++){const ee=Q[Zt];G=lt[Zt];const $=[];for(let Y=0,yt=ee.length;Y<yt;Y++){const Bt=j(ee[Y],G[Y],ue);$t(Bt.x,Bt.y,-at),re===0&&$.push(Bt)}re===0&&Vt.push($)}}ft=Ql.triangulateShape(Nt,Vt)}const mt=ft.length,xt=T+R;for(let Nt=0;Nt<K;Nt++){const Vt=x?j(V[Nt],nt[Nt],xt):V[Nt];z?(q.copy(F.normals[0]).multiplyScalar(Vt.x),H.copy(F.binormals[0]).multiplyScalar(Vt.y),Z.copy(I[0]).add(q).add(H),$t(Z.x,Z.y,Z.z)):$t(Vt.x,Vt.y,0)}for(let Nt=1;Nt<=g;Nt++)for(let Vt=0;Vt<K;Vt++){const Ft=x?j(V[Vt],nt[Vt],xt):V[Vt];z?(q.copy(F.normals[Nt]).multiplyScalar(Ft.x),H.copy(F.binormals[Nt]).multiplyScalar(Ft.y),Z.copy(I[Nt]).add(q).add(H),$t(Z.x,Z.y,Z.z)):$t(Ft.x,Ft.y,y/g*Nt)}for(let Nt=C-1;Nt>=0;Nt--){const Vt=Nt/C,Ft=b*Math.cos(Vt*Math.PI/2),re=T*Math.sin(Vt*Math.PI/2)+R;for(let at=0,ue=vt.length;at<ue;at++){const Zt=j(vt[at],dt[at],re);$t(Zt.x,Zt.y,y+Ft)}for(let at=0,ue=Q.length;at<ue;at++){const Zt=Q[at];G=lt[at];for(let Lt=0,ee=Zt.length;Lt<ee;Lt++){const $=j(Zt[Lt],G[Lt],re);z?$t($.x,$.y+I[g-1].y,I[g-1].x+Ft):$t($.x,$.y,y+Ft)}}}ht(),_t();function ht(){const Nt=a.length/3;if(x){let Vt=0,Ft=K*Vt;for(let re=0;re<mt;re++){const at=ft[re];te(at[2]+Ft,at[1]+Ft,at[0]+Ft)}Vt=g+C*2,Ft=K*Vt;for(let re=0;re<mt;re++){const at=ft[re];te(at[0]+Ft,at[1]+Ft,at[2]+Ft)}}else{for(let Vt=0;Vt<mt;Vt++){const Ft=ft[Vt];te(Ft[2],Ft[1],Ft[0])}for(let Vt=0;Vt<mt;Vt++){const Ft=ft[Vt];te(Ft[0]+K*g,Ft[1]+K*g,Ft[2]+K*g)}}n.addGroup(Nt,a.length/3-Nt,0)}function _t(){const Nt=a.length/3;let Vt=0;At(vt,Vt),Vt+=vt.length;for(let Ft=0,re=Q.length;Ft<re;Ft++){const at=Q[Ft];At(at,Vt),Vt+=at.length}n.addGroup(Nt,a.length/3-Nt,1)}function At(Nt,Vt){let Ft=Nt.length;for(;--Ft>=0;){const re=Ft;let at=Ft-1;at<0&&(at=Nt.length-1);for(let ue=0,Zt=g+C*2;ue<Zt;ue++){const Lt=K*ue,ee=K*(ue+1),$=Vt+re+Lt,Y=Vt+at+Lt,yt=Vt+at+ee,Bt=Vt+re+ee;qt($,Y,yt,Bt)}}}function $t(Nt,Vt,Ft){f.push(Nt),f.push(Vt),f.push(Ft)}function te(Nt,Vt,Ft){ne(Nt),ne(Vt),ne(Ft);const re=a.length/3,at=N.generateTopUV(n,a,re-3,re-2,re-1);Se(at[0]),Se(at[1]),Se(at[2])}function qt(Nt,Vt,Ft,re){ne(Nt),ne(Vt),ne(re),ne(Vt),ne(Ft),ne(re);const at=a.length/3,ue=N.generateSideWallUV(n,a,at-6,at-3,at-2,at-1);Se(ue[0]),Se(ue[1]),Se(ue[3]),Se(ue[1]),Se(ue[2]),Se(ue[3])}function ne(Nt){a.push(f[Nt*3+0]),a.push(f[Nt*3+1]),a.push(f[Nt*3+2])}function Se(Nt){s.push(Nt.x),s.push(Nt.y)}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),e=this.parameters.shapes,n=this.parameters.options;return IU(e,n,t)}static fromJSON(t,e){const n=[];for(let s=0,o=t.shapes.length;s<o;s++){const c=e[t.shapes[s]];n.push(c)}const a=t.options.extrudePath;return a!==void 0&&(t.options.extrudePath=new q_[a.type]().fromJSON(a)),new U1(n,t.options)}}const UU={generateTopUV:function(i,t,e,n,a){const s=t[e*3],o=t[e*3+1],c=t[n*3],f=t[n*3+1],d=t[a*3],g=t[a*3+1];return[new de(s,o),new de(c,f),new de(d,g)]},generateSideWallUV:function(i,t,e,n,a,s){const o=t[e*3],c=t[e*3+1],f=t[e*3+2],d=t[n*3],g=t[n*3+1],y=t[n*3+2],x=t[a*3],b=t[a*3+1],T=t[a*3+2],R=t[s*3],C=t[s*3+1],w=t[s*3+2];return Math.abs(c-g)<Math.abs(o-d)?[new de(o,1-f),new de(d,1-y),new de(x,1-T),new de(R,1-w)]:[new de(c,1-f),new de(g,1-y),new de(b,1-T),new de(C,1-w)]}};function IU(i,t,e){if(e.shapes=[],Array.isArray(i))for(let n=0,a=i.length;n<a;n++){const s=i[n];e.shapes.push(s.uuid)}else e.shapes.push(i.uuid);return e.options=Object.assign({},t),t.extrudePath!==void 0&&(e.options.extrudePath=t.extrudePath.toJSON()),e}class I1 extends Wf{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2,a=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(a,s,t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new I1(t.radius,t.detail)}}class P1 extends wn{constructor(t=[new de(0,-.5),new de(.5,0),new de(0,.5)],e=12,n=0,a=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:a},e=Math.floor(e),a=mn(a,0,Math.PI*2);const s=[],o=[],c=[],f=[],d=[],g=1/e,y=new pt,x=new de,b=new pt,T=new pt,R=new pt;let C=0,w=0;for(let N=0;N<=t.length-1;N++)switch(N){case 0:C=t[N+1].x-t[N].x,w=t[N+1].y-t[N].y,b.x=w*1,b.y=-C,b.z=w*0,R.copy(b),b.normalize(),f.push(b.x,b.y,b.z);break;case t.length-1:f.push(R.x,R.y,R.z);break;default:C=t[N+1].x-t[N].x,w=t[N+1].y-t[N].y,b.x=w*1,b.y=-C,b.z=w*0,T.copy(b),b.x+=R.x,b.y+=R.y,b.z+=R.z,b.normalize(),f.push(b.x,b.y,b.z),R.copy(T)}for(let N=0;N<=e;N++){const I=n+N*g*a,z=Math.sin(I),F=Math.cos(I);for(let H=0;H<=t.length-1;H++){y.x=t[H].x*z,y.y=t[H].y,y.z=t[H].x*F,o.push(y.x,y.y,y.z),x.x=N/e,x.y=H/(t.length-1),c.push(x.x,x.y);const q=f[3*H+0]*z,Z=f[3*H+1],B=f[3*H+0]*F;d.push(q,Z,B)}}for(let N=0;N<e;N++)for(let I=0;I<t.length-1;I++){const z=I+N*t.length,F=z,H=z+t.length,q=z+t.length+1,Z=z+1;s.push(F,H,Z),s.push(q,Z,H)}this.setIndex(s),this.setAttribute("position",new Ze(o,3)),this.setAttribute("uv",new Ze(c,2)),this.setAttribute("normal",new Ze(d,3))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new P1(t.points,t.segments,t.phiStart,t.phiLength)}}class D0 extends Wf{constructor(t=1,e=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],a=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,a,t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new D0(t.radius,t.detail)}}class Bu extends wn{constructor(t=1,e=1,n=1,a=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:a};const s=t/2,o=e/2,c=Math.floor(n),f=Math.floor(a),d=c+1,g=f+1,y=t/c,x=e/f,b=[],T=[],R=[],C=[];for(let w=0;w<g;w++){const N=w*x-o;for(let I=0;I<d;I++){const z=I*y-s;T.push(z,-N,0),R.push(0,0,1),C.push(I/c),C.push(1-w/f)}}for(let w=0;w<f;w++)for(let N=0;N<c;N++){const I=N+d*w,z=N+d*(w+1),F=N+1+d*(w+1),H=N+1+d*w;b.push(I,z,H),b.push(z,F,H)}this.setIndex(b),this.setAttribute("position",new Ze(T,3)),this.setAttribute("normal",new Ze(R,3)),this.setAttribute("uv",new Ze(C,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Bu(t.width,t.height,t.widthSegments,t.heightSegments)}}class z1 extends wn{constructor(t=.5,e=1,n=32,a=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:a,thetaStart:s,thetaLength:o},n=Math.max(3,n),a=Math.max(1,a);const c=[],f=[],d=[],g=[];let y=t;const x=(e-t)/a,b=new pt,T=new de;for(let R=0;R<=a;R++){for(let C=0;C<=n;C++){const w=s+C/n*o;b.x=y*Math.cos(w),b.y=y*Math.sin(w),f.push(b.x,b.y,b.z),d.push(0,0,1),T.x=(b.x/e+1)/2,T.y=(b.y/e+1)/2,g.push(T.x,T.y)}y+=x}for(let R=0;R<a;R++){const C=R*(n+1);for(let w=0;w<n;w++){const N=w+C,I=N,z=N+n+1,F=N+n+2,H=N+1;c.push(I,z,H),c.push(z,F,H)}}this.setIndex(c),this.setAttribute("position",new Ze(f,3)),this.setAttribute("normal",new Ze(d,3)),this.setAttribute("uv",new Ze(g,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new z1(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class B1 extends wn{constructor(t=new ed([new de(0,.5),new de(-.5,-.5),new de(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],a=[],s=[],o=[];let c=0,f=0;if(Array.isArray(t)===!1)d(t);else for(let g=0;g<t.length;g++)d(t[g]),this.addGroup(c,f,g),c+=f,f=0;this.setIndex(n),this.setAttribute("position",new Ze(a,3)),this.setAttribute("normal",new Ze(s,3)),this.setAttribute("uv",new Ze(o,2));function d(g){const y=a.length/3,x=g.extractPoints(e);let b=x.shape;const T=x.holes;Ql.isClockWise(b)===!1&&(b=b.reverse());for(let C=0,w=T.length;C<w;C++){const N=T[C];Ql.isClockWise(N)===!0&&(T[C]=N.reverse())}const R=Ql.triangulateShape(b,T);for(let C=0,w=T.length;C<w;C++){const N=T[C];b=b.concat(N)}for(let C=0,w=b.length;C<w;C++){const N=b[C];a.push(N.x,N.y,0),s.push(0,0,1),o.push(N.x,N.y)}for(let C=0,w=R.length;C<w;C++){const N=R[C],I=N[0]+y,z=N[1]+y,F=N[2]+y;n.push(I,z,F),f+=3}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),e=this.parameters.shapes;return PU(e,t)}static fromJSON(t,e){const n=[];for(let a=0,s=t.shapes.length;a<s;a++){const o=e[t.shapes[a]];n.push(o)}return new B1(n,t.curveSegments)}}function PU(i,t){if(t.shapes=[],Array.isArray(i))for(let e=0,n=i.length;e<n;e++){const a=i[e];t.shapes.push(a.uuid)}else t.shapes.push(i.uuid);return t}class L0 extends wn{constructor(t=1,e=32,n=16,a=0,s=Math.PI*2,o=0,c=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:a,phiLength:s,thetaStart:o,thetaLength:c},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const f=Math.min(o+c,Math.PI);let d=0;const g=[],y=new pt,x=new pt,b=[],T=[],R=[],C=[];for(let w=0;w<=n;w++){const N=[],I=w/n;let z=0;w===0&&o===0?z=.5/e:w===n&&f===Math.PI&&(z=-.5/e);for(let F=0;F<=e;F++){const H=F/e;y.x=-t*Math.cos(a+H*s)*Math.sin(o+I*c),y.y=t*Math.cos(o+I*c),y.z=t*Math.sin(a+H*s)*Math.sin(o+I*c),T.push(y.x,y.y,y.z),x.copy(y).normalize(),R.push(x.x,x.y,x.z),C.push(H+z,1-I),N.push(d++)}g.push(N)}for(let w=0;w<n;w++)for(let N=0;N<e;N++){const I=g[w][N+1],z=g[w][N],F=g[w+1][N],H=g[w+1][N+1];(w!==0||o>0)&&b.push(I,z,H),(w!==n-1||f<Math.PI)&&b.push(z,F,H)}this.setIndex(b),this.setAttribute("position",new Ze(T,3)),this.setAttribute("normal",new Ze(R,3)),this.setAttribute("uv",new Ze(C,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new L0(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class F1 extends Wf{constructor(t=1,e=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],a=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,a,t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new F1(t.radius,t.detail)}}class k1 extends wn{constructor(t=1,e=.4,n=12,a=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:a,arc:s},n=Math.floor(n),a=Math.floor(a);const o=[],c=[],f=[],d=[],g=new pt,y=new pt,x=new pt;for(let b=0;b<=n;b++)for(let T=0;T<=a;T++){const R=T/a*s,C=b/n*Math.PI*2;y.x=(t+e*Math.cos(C))*Math.cos(R),y.y=(t+e*Math.cos(C))*Math.sin(R),y.z=e*Math.sin(C),c.push(y.x,y.y,y.z),g.x=t*Math.cos(R),g.y=t*Math.sin(R),x.subVectors(y,g).normalize(),f.push(x.x,x.y,x.z),d.push(T/a),d.push(b/n)}for(let b=1;b<=n;b++)for(let T=1;T<=a;T++){const R=(a+1)*b+T-1,C=(a+1)*(b-1)+T-1,w=(a+1)*(b-1)+T,N=(a+1)*b+T;o.push(R,C,N),o.push(C,w,N)}this.setIndex(o),this.setAttribute("position",new Ze(c,3)),this.setAttribute("normal",new Ze(f,3)),this.setAttribute("uv",new Ze(d,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new k1(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class V1 extends wn{constructor(t=1,e=.4,n=64,a=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:a,p:s,q:o},n=Math.floor(n),a=Math.floor(a);const c=[],f=[],d=[],g=[],y=new pt,x=new pt,b=new pt,T=new pt,R=new pt,C=new pt,w=new pt;for(let I=0;I<=n;++I){const z=I/n*s*Math.PI*2;N(z,s,o,t,b),N(z+.01,s,o,t,T),C.subVectors(T,b),w.addVectors(T,b),R.crossVectors(C,w),w.crossVectors(R,C),R.normalize(),w.normalize();for(let F=0;F<=a;++F){const H=F/a*Math.PI*2,q=-e*Math.cos(H),Z=e*Math.sin(H);y.x=b.x+(q*w.x+Z*R.x),y.y=b.y+(q*w.y+Z*R.y),y.z=b.z+(q*w.z+Z*R.z),f.push(y.x,y.y,y.z),x.subVectors(y,b).normalize(),d.push(x.x,x.y,x.z),g.push(I/n),g.push(F/a)}}for(let I=1;I<=n;I++)for(let z=1;z<=a;z++){const F=(a+1)*(I-1)+(z-1),H=(a+1)*I+(z-1),q=(a+1)*I+z,Z=(a+1)*(I-1)+z;c.push(F,H,Z),c.push(H,q,Z)}this.setIndex(c),this.setAttribute("position",new Ze(f,3)),this.setAttribute("normal",new Ze(d,3)),this.setAttribute("uv",new Ze(g,2));function N(I,z,F,H,q){const Z=Math.cos(I),B=Math.sin(I),V=F/z*I,Q=Math.cos(V);q.x=H*(2+Q)*.5*Z,q.y=H*(2+Q)*B*.5,q.z=H*Math.sin(V)*.5}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new V1(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class H1 extends wn{constructor(t=new tM(new pt(-1,-1,0),new pt(-1,1,0),new pt(1,1,0)),e=64,n=1,a=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:a,closed:s};const o=t.computeFrenetFrames(e,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const c=new pt,f=new pt,d=new de;let g=new pt;const y=[],x=[],b=[],T=[];R(),this.setIndex(T),this.setAttribute("position",new Ze(y,3)),this.setAttribute("normal",new Ze(x,3)),this.setAttribute("uv",new Ze(b,2));function R(){for(let I=0;I<e;I++)C(I);C(s===!1?e:0),N(),w()}function C(I){g=t.getPointAt(I/e,g);const z=o.normals[I],F=o.binormals[I];for(let H=0;H<=a;H++){const q=H/a*Math.PI*2,Z=Math.sin(q),B=-Math.cos(q);f.x=B*z.x+Z*F.x,f.y=B*z.y+Z*F.y,f.z=B*z.z+Z*F.z,f.normalize(),x.push(f.x,f.y,f.z),c.x=g.x+n*f.x,c.y=g.y+n*f.y,c.z=g.z+n*f.z,y.push(c.x,c.y,c.z)}}function w(){for(let I=1;I<=e;I++)for(let z=1;z<=a;z++){const F=(a+1)*(I-1)+(z-1),H=(a+1)*I+(z-1),q=(a+1)*I+z,Z=(a+1)*(I-1)+z;T.push(F,H,Z),T.push(H,q,Z)}}function N(){for(let I=0;I<=e;I++)for(let z=0;z<=a;z++)d.x=I/e,d.y=z/a,b.push(d.x,d.y)}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new H1(new q_[t.path.type]().fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class pR extends wn{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},t!==null){const e=[],n=new Set,a=new pt,s=new pt;if(t.index!==null){const o=t.attributes.position,c=t.index;let f=t.groups;f.length===0&&(f=[{start:0,count:c.count,materialIndex:0}]);for(let d=0,g=f.length;d<g;++d){const y=f[d],x=y.start,b=y.count;for(let T=x,R=x+b;T<R;T+=3)for(let C=0;C<3;C++){const w=c.getX(T+C),N=c.getX(T+(C+1)%3);a.fromBufferAttribute(o,w),s.fromBufferAttribute(o,N),eE(a,s,n)===!0&&(e.push(a.x,a.y,a.z),e.push(s.x,s.y,s.z))}}}else{const o=t.attributes.position;for(let c=0,f=o.count/3;c<f;c++)for(let d=0;d<3;d++){const g=3*c+d,y=3*c+(d+1)%3;a.fromBufferAttribute(o,g),s.fromBufferAttribute(o,y),eE(a,s,n)===!0&&(e.push(a.x,a.y,a.z),e.push(s.x,s.y,s.z))}}this.setAttribute("position",new Ze(e,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}function eE(i,t,e){const n=`${i.x},${i.y},${i.z}-${t.x},${t.y},${t.z}`,a=`${t.x},${t.y},${t.z}-${i.x},${i.y},${i.z}`;return e.has(n)===!0||e.has(a)===!0?!1:(e.add(n),e.add(a),!0)}var nE=Object.freeze({__proto__:null,BoxGeometry:pd,CapsuleGeometry:D1,CircleGeometry:L1,ConeGeometry:R0,CylinderGeometry:C0,DodecahedronGeometry:O1,EdgesGeometry:aR,ExtrudeGeometry:U1,IcosahedronGeometry:I1,LatheGeometry:P1,OctahedronGeometry:D0,PlaneGeometry:Bu,PolyhedronGeometry:Wf,RingGeometry:z1,ShapeGeometry:B1,SphereGeometry:L0,TetrahedronGeometry:F1,TorusGeometry:k1,TorusKnotGeometry:V1,TubeGeometry:H1,WireframeGeometry:pR});class mR extends lr{constructor(t){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new He(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}class nM extends pl{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class iM extends lr{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new He(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new He(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=jf,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Vo,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class gR extends iM{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new de(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return mn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new He(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new He(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new He(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class vR extends lr{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new He(16777215),this.specular=new He(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new He(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=jf,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Vo,this.combine=A0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class yR extends lr{constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new He(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new He(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=jf,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}class _R extends lr{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=jf,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}class xR extends lr{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new He(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new He(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=jf,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Vo,this.combine=A0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class G1 extends lr{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=OC,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class j1 extends lr{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}class SR extends lr{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new He(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=jf,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this.fog=t.fog,this}}class bR extends Hr{constructor(t){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}function Kh(i,t){return!i||i.constructor===t?i:typeof t.BYTES_PER_ELEMENT=="number"?new t(i):Array.prototype.slice.call(i)}function MR(i){function t(a,s){return i[a]-i[s]}const e=i.length,n=new Array(e);for(let a=0;a!==e;++a)n[a]=a;return n.sort(t),n}function Ob(i,t,e){const n=i.length,a=new i.constructor(n);for(let s=0,o=0;o!==n;++s){const c=e[s]*t;for(let f=0;f!==t;++f)a[o++]=i[c+f]}return a}function aM(i,t,e,n){let a=1,s=i[0];for(;s!==void 0&&s[n]===void 0;)s=i[a++];if(s===void 0)return;let o=s[n];if(o!==void 0)if(Array.isArray(o))do o=s[n],o!==void 0&&(t.push(s.time),e.push(...o)),s=i[a++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[n],o!==void 0&&(t.push(s.time),o.toArray(e,e.length)),s=i[a++];while(s!==void 0);else do o=s[n],o!==void 0&&(t.push(s.time),e.push(o)),s=i[a++];while(s!==void 0)}function zU(i,t,e,n,a=30){const s=i.clone();s.name=t;const o=[];for(let f=0;f<s.tracks.length;++f){const d=s.tracks[f],g=d.getValueSize(),y=[],x=[];for(let b=0;b<d.times.length;++b){const T=d.times[b]*a;if(!(T<e||T>=n)){y.push(d.times[b]);for(let R=0;R<g;++R)x.push(d.values[b*g+R])}}y.length!==0&&(d.times=Kh(y,d.times.constructor),d.values=Kh(x,d.values.constructor),o.push(d))}s.tracks=o;let c=1/0;for(let f=0;f<s.tracks.length;++f)c>s.tracks[f].times[0]&&(c=s.tracks[f].times[0]);for(let f=0;f<s.tracks.length;++f)s.tracks[f].shift(-1*c);return s.resetDuration(),s}function BU(i,t=0,e=i,n=30){n<=0&&(n=30);const a=e.tracks.length,s=t/n;for(let o=0;o<a;++o){const c=e.tracks[o],f=c.ValueTypeName;if(f==="bool"||f==="string")continue;const d=i.tracks.find(function(w){return w.name===c.name&&w.ValueTypeName===f});if(d===void 0)continue;let g=0;const y=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(g=y/3);let x=0;const b=d.getValueSize();d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(x=b/3);const T=c.times.length-1;let R;if(s<=c.times[0]){const w=g,N=y-g;R=c.values.slice(w,N)}else if(s>=c.times[T]){const w=T*y+g,N=w+y-g;R=c.values.slice(w,N)}else{const w=c.createInterpolant(),N=g,I=y-g;w.evaluate(s),R=w.resultBuffer.slice(N,I)}f==="quaternion"&&new or().fromArray(R).normalize().conjugate().toArray(R);const C=d.times.length;for(let w=0;w<C;++w){const N=w*b+x;if(f==="quaternion")or.multiplyQuaternionsFlat(d.values,N,R,0,d.values,N);else{const I=b-x*2;for(let z=0;z<I;++z)d.values[N+z]-=R[z]}}}return i.blendMode=B2,i}class FU{static convertArray(t,e){return Kh(t,e)}static isTypedArray(t){return HC(t)}static getKeyframeOrder(t){return MR(t)}static sortedArray(t,e,n){return Ob(t,e,n)}static flattenJSON(t,e,n,a){aM(t,e,n,a)}static subclip(t,e,n,a,s=30){return zU(t,e,n,a,s)}static makeClipAdditive(t,e=0,n=t,a=30){return BU(t,e,n,a)}}class O0{constructor(t,e,n,a){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=a!==void 0?a:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,a=e[n],s=e[n-1];t:{e:{let o;n:{i:if(!(t<a)){for(let c=n+2;;){if(a===void 0){if(t<s)break i;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===c)break;if(s=a,a=e[++n],t<a)break e}o=e.length;break n}if(!(t>=s)){const c=e[1];t<c&&(n=2,s=c);for(let f=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===f)break;if(a=s,s=e[--n-1],t>=s)break e}o=n,n=0;break n}break t}for(;n<o;){const c=n+o>>>1;t<e[c]?o=c:n=c+1}if(a=e[n],s=e[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(a===void 0)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,a)}return this.interpolate_(n,s,t,a)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,a=this.valueSize,s=t*a;for(let o=0;o!==a;++o)e[o]=n[s+o];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class TR extends O0{constructor(t,e,n,a){super(t,e,n,a),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Yh,endingEnd:Yh}}intervalChanged_(t,e,n){const a=this.parameterPositions;let s=t-2,o=t+1,c=a[s],f=a[o];if(c===void 0)switch(this.getSettings_().endingStart){case Zh:s=t,c=2*e-n;break;case a0:s=a.length-2,c=e+a[s]-a[s+1];break;default:s=t,c=n}if(f===void 0)switch(this.getSettings_().endingEnd){case Zh:o=t,f=2*n-e;break;case a0:o=1,f=n+a[1]-a[0];break;default:o=t-1,f=e}const d=(n-e)*.5,g=this.valueSize;this._weightPrev=d/(e-c),this._weightNext=d/(f-n),this._offsetPrev=s*g,this._offsetNext=o*g}interpolate_(t,e,n,a){const s=this.resultBuffer,o=this.sampleValues,c=this.valueSize,f=t*c,d=f-c,g=this._offsetPrev,y=this._offsetNext,x=this._weightPrev,b=this._weightNext,T=(n-e)/(a-e),R=T*T,C=R*T,w=-x*C+2*x*R-x*T,N=(1+x)*C+(-1.5-2*x)*R+(-.5+x)*T+1,I=(-1-b)*C+(1.5+b)*R+.5*T,z=b*C-b*R;for(let F=0;F!==c;++F)s[F]=w*o[g+F]+N*o[d+F]+I*o[f+F]+z*o[y+F];return s}}class sM extends O0{constructor(t,e,n,a){super(t,e,n,a)}interpolate_(t,e,n,a){const s=this.resultBuffer,o=this.sampleValues,c=this.valueSize,f=t*c,d=f-c,g=(n-e)/(a-e),y=1-g;for(let x=0;x!==c;++x)s[x]=o[d+x]*y+o[f+x]*g;return s}}class AR extends O0{constructor(t,e,n,a){super(t,e,n,a)}interpolate_(t){return this.copySampleValue_(t-1)}}class ml{constructor(t,e,n,a){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Kh(e,this.TimeBufferType),this.values=Kh(n,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:Kh(t.times,Array),values:Kh(t.values,Array)};const a=t.getInterpolation();a!==t.DefaultInterpolation&&(n.interpolation=a)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new AR(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new sM(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new TR(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case i0:e=this.InterpolantFactoryMethodDiscrete;break;case G_:e=this.InterpolantFactoryMethodLinear;break;case qy:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return Ie("KeyframeTrack:",n),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return i0;case this.InterpolantFactoryMethodLinear:return G_;case this.InterpolantFactoryMethodSmooth:return qy}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const e=this.times;for(let n=0,a=e.length;n!==a;++n)e[n]+=t}return this}scale(t){if(t!==1){const e=this.times;for(let n=0,a=e.length;n!==a;++n)e[n]*=t}return this}trim(t,e){const n=this.times,a=n.length;let s=0,o=a-1;for(;s!==a&&n[s]<t;)++s;for(;o!==-1&&n[o]>e;)--o;if(++o,s!==0||o!==a){s>=o&&(o=Math.max(o,1),s=o-1);const c=this.getValueSize();this.times=n.slice(s,o),this.values=this.values.slice(s*c,o*c)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(rn("KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,a=this.values,s=n.length;s===0&&(rn("KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let c=0;c!==s;c++){const f=n[c];if(typeof f=="number"&&isNaN(f)){rn("KeyframeTrack: Time is not a valid number.",this,c,f),t=!1;break}if(o!==null&&o>f){rn("KeyframeTrack: Out of order keys.",this,c,f,o),t=!1;break}o=f}if(a!==void 0&&HC(a))for(let c=0,f=a.length;c!==f;++c){const d=a[c];if(isNaN(d)){rn("KeyframeTrack: Value is not a valid number.",this,c,d),t=!1;break}}return t}optimize(){const t=this.times.slice(),e=this.values.slice(),n=this.getValueSize(),a=this.getInterpolation()===qy,s=t.length-1;let o=1;for(let c=1;c<s;++c){let f=!1;const d=t[c],g=t[c+1];if(d!==g&&(c!==1||d!==t[0]))if(a)f=!0;else{const y=c*n,x=y-n,b=y+n;for(let T=0;T!==n;++T){const R=e[y+T];if(R!==e[x+T]||R!==e[b+T]){f=!0;break}}}if(f){if(c!==o){t[o]=t[c];const y=c*n,x=o*n;for(let b=0;b!==n;++b)e[x+b]=e[y+b]}++o}}if(s>0){t[o]=t[s];for(let c=s*n,f=o*n,d=0;d!==n;++d)e[f+d]=e[c+d];++o}return o!==t.length?(this.times=t.slice(0,o),this.values=e.slice(0,o*n)):(this.times=t,this.values=e),this}clone(){const t=this.times.slice(),e=this.values.slice(),n=this.constructor,a=new n(this.name,t,e);return a.createInterpolant=this.createInterpolant,a}}ml.prototype.ValueTypeName="";ml.prototype.TimeBufferType=Float32Array;ml.prototype.ValueBufferType=Float32Array;ml.prototype.DefaultInterpolation=G_;class md extends ml{constructor(t,e,n){super(t,e,n)}}md.prototype.ValueTypeName="bool";md.prototype.ValueBufferType=Array;md.prototype.DefaultInterpolation=i0;md.prototype.InterpolantFactoryMethodLinear=void 0;md.prototype.InterpolantFactoryMethodSmooth=void 0;class rM extends ml{constructor(t,e,n,a){super(t,e,n,a)}}rM.prototype.ValueTypeName="color";class h0 extends ml{constructor(t,e,n,a){super(t,e,n,a)}}h0.prototype.ValueTypeName="number";class ER extends O0{constructor(t,e,n,a){super(t,e,n,a)}interpolate_(t,e,n,a){const s=this.resultBuffer,o=this.sampleValues,c=this.valueSize,f=(n-e)/(a-e);let d=t*c;for(let g=d+c;d!==g;d+=4)or.slerpFlat(s,0,o,d-c,o,d,f);return s}}class N0 extends ml{constructor(t,e,n,a){super(t,e,n,a)}InterpolantFactoryMethodLinear(t){return new ER(this.times,this.values,this.getValueSize(),t)}}N0.prototype.ValueTypeName="quaternion";N0.prototype.InterpolantFactoryMethodSmooth=void 0;class gd extends ml{constructor(t,e,n){super(t,e,n)}}gd.prototype.ValueTypeName="string";gd.prototype.ValueBufferType=Array;gd.prototype.DefaultInterpolation=i0;gd.prototype.InterpolantFactoryMethodLinear=void 0;gd.prototype.InterpolantFactoryMethodSmooth=void 0;class d0 extends ml{constructor(t,e,n,a){super(t,e,n,a)}}d0.prototype.ValueTypeName="vector";class p0{constructor(t="",e=-1,n=[],a=y1){this.name=t,this.tracks=n,this.duration=e,this.blendMode=a,this.uuid=ko(),this.userData={},this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,a=1/(t.fps||1);for(let o=0,c=n.length;o!==c;++o)e.push(VU(n[o]).scale(a));const s=new this(t.name,t.duration,e,t.blendMode);return s.uuid=t.uuid,s.userData=JSON.parse(t.userData||"{}"),s}static toJSON(t){const e=[],n=t.tracks,a={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode,userData:JSON.stringify(t.userData)};for(let s=0,o=n.length;s!==o;++s)e.push(ml.toJSON(n[s]));return a}static CreateFromMorphTargetSequence(t,e,n,a){const s=e.length,o=[];for(let c=0;c<s;c++){let f=[],d=[];f.push((c+s-1)%s,c,(c+1)%s),d.push(0,1,0);const g=MR(f);f=Ob(f,1,g),d=Ob(d,1,g),!a&&f[0]===0&&(f.push(s),d.push(d[0])),o.push(new h0(".morphTargetInfluences["+e[c].name+"]",f,d).scale(1/n))}return new this(t,-1,o)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const a=t;n=a.geometry&&a.geometry.animations||a.animations}for(let a=0;a<n.length;a++)if(n[a].name===e)return n[a];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const a={},s=/^([\w-]*?)([\d]+)$/;for(let c=0,f=t.length;c<f;c++){const d=t[c],g=d.name.match(s);if(g&&g.length>1){const y=g[1];let x=a[y];x||(a[y]=x=[]),x.push(d)}}const o=[];for(const c in a)o.push(this.CreateFromMorphTargetSequence(c,a[c],e,n));return o}static parseAnimation(t,e){if(Ie("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!t)return rn("AnimationClip: No animation in JSONLoader data."),null;const n=function(y,x,b,T,R){if(b.length!==0){const C=[],w=[];aM(b,C,w,T),C.length!==0&&R.push(new y(x,C,w))}},a=[],s=t.name||"default",o=t.fps||30,c=t.blendMode;let f=t.length||-1;const d=t.hierarchy||[];for(let y=0;y<d.length;y++){const x=d[y].keys;if(!(!x||x.length===0))if(x[0].morphTargets){const b={};let T;for(T=0;T<x.length;T++)if(x[T].morphTargets)for(let R=0;R<x[T].morphTargets.length;R++)b[x[T].morphTargets[R]]=-1;for(const R in b){const C=[],w=[];for(let N=0;N!==x[T].morphTargets.length;++N){const I=x[T];C.push(I.time),w.push(I.morphTarget===R?1:0)}a.push(new h0(".morphTargetInfluence["+R+"]",C,w))}f=b.length*o}else{const b=".bones["+e[y].name+"]";n(d0,b+".position",x,"pos",a),n(N0,b+".quaternion",x,"rot",a),n(d0,b+".scale",x,"scl",a)}}return a.length===0?null:new this(s,f,a,c)}resetDuration(){const t=this.tracks;let e=0;for(let n=0,a=t.length;n!==a;++n){const s=this.tracks[n];e=Math.max(e,s.times[s.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let n=0;n<this.tracks.length;n++)t.push(this.tracks[n].clone());const e=new this.constructor(this.name,this.duration,t,this.blendMode);return e.userData=JSON.parse(JSON.stringify(this.userData)),e}toJSON(){return this.constructor.toJSON(this)}}function kU(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return h0;case"vector":case"vector2":case"vector3":case"vector4":return d0;case"color":return rM;case"quaternion":return N0;case"bool":case"boolean":return md;case"string":return gd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function VU(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=kU(i.type);if(i.times===void 0){const e=[],n=[];aM(i.keys,e,n,"value"),i.times=e,i.values=n}return t.parse!==void 0?t.parse(i):new t(i.name,i.times,i.values,i.interpolation)}const Ic={enabled:!1,files:{},add:function(i,t){this.enabled!==!1&&(this.files[i]=t)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class oM{constructor(t,e,n){const a=this;let s=!1,o=0,c=0,f;const d=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this._abortController=null,this.itemStart=function(g){c++,s===!1&&a.onStart!==void 0&&a.onStart(g,o,c),s=!0},this.itemEnd=function(g){o++,a.onProgress!==void 0&&a.onProgress(g,o,c),o===c&&(s=!1,a.onLoad!==void 0&&a.onLoad())},this.itemError=function(g){a.onError!==void 0&&a.onError(g)},this.resolveURL=function(g){return f?f(g):g},this.setURLModifier=function(g){return f=g,this},this.addHandler=function(g,y){return d.push(g,y),this},this.removeHandler=function(g){const y=d.indexOf(g);return y!==-1&&d.splice(y,2),this},this.getHandler=function(g){for(let y=0,x=d.length;y<x;y+=2){const b=d[y],T=d[y+1];if(b.global&&(b.lastIndex=0),b.test(g))return T}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const wR=new oM;class oo{constructor(t){this.manager=t!==void 0?t:wR,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise(function(a,s){n.load(t,a,e,s)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}abort(){return this}}oo.DEFAULT_MATERIAL_NAME="__DEFAULT";const Eu={};class HU extends Error{constructor(t,e){super(t),this.response=e}}class Uu extends oo{constructor(t){super(t),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(t,e,n,a){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const s=Ic.get(`file:${t}`);if(s!==void 0)return this.manager.itemStart(t),setTimeout(()=>{e&&e(s),this.manager.itemEnd(t)},0),s;if(Eu[t]!==void 0){Eu[t].push({onLoad:e,onProgress:n,onError:a});return}Eu[t]=[],Eu[t].push({onLoad:e,onProgress:n,onError:a});const o=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),c=this.mimeType,f=this.responseType;fetch(o).then(d=>{if(d.status===200||d.status===0){if(d.status===0&&Ie("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||d.body===void 0||d.body.getReader===void 0)return d;const g=Eu[t],y=d.body.getReader(),x=d.headers.get("X-File-Size")||d.headers.get("Content-Length"),b=x?parseInt(x):0,T=b!==0;let R=0;const C=new ReadableStream({start(w){N();function N(){y.read().then(({done:I,value:z})=>{if(I)w.close();else{R+=z.byteLength;const F=new ProgressEvent("progress",{lengthComputable:T,loaded:R,total:b});for(let H=0,q=g.length;H<q;H++){const Z=g[H];Z.onProgress&&Z.onProgress(F)}w.enqueue(z),N()}},I=>{w.error(I)})}}});return new Response(C)}else throw new HU(`fetch for "${d.url}" responded with ${d.status}: ${d.statusText}`,d)}).then(d=>{switch(f){case"arraybuffer":return d.arrayBuffer();case"blob":return d.blob();case"document":return d.text().then(g=>new DOMParser().parseFromString(g,c));case"json":return d.json();default:if(c==="")return d.text();{const y=/charset="?([^;"\s]*)"?/i.exec(c),x=y&&y[1]?y[1].toLowerCase():void 0,b=new TextDecoder(x);return d.arrayBuffer().then(T=>b.decode(T))}}}).then(d=>{Ic.add(`file:${t}`,d);const g=Eu[t];delete Eu[t];for(let y=0,x=g.length;y<x;y++){const b=g[y];b.onLoad&&b.onLoad(d)}}).catch(d=>{const g=Eu[t];if(g===void 0)throw this.manager.itemError(t),d;delete Eu[t];for(let y=0,x=g.length;y<x;y++){const b=g[y];b.onError&&b.onError(d)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class GU extends oo{constructor(t){super(t)}load(t,e,n,a){const s=this,o=new Uu(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,function(c){try{e(s.parse(JSON.parse(c)))}catch(f){a?a(f):rn(f),s.manager.itemError(t)}},n,a)}parse(t){const e=[];for(let n=0;n<t.length;n++){const a=p0.parse(t[n]);e.push(a)}return e}}class jU extends oo{constructor(t){super(t)}load(t,e,n,a){const s=this,o=[],c=new R1,f=new Uu(this.manager);f.setPath(this.path),f.setResponseType("arraybuffer"),f.setRequestHeader(this.requestHeader),f.setWithCredentials(s.withCredentials);let d=0;function g(y){f.load(t[y],function(x){const b=s.parse(x,!0);o[y]={width:b.width,height:b.height,format:b.format,mipmaps:b.mipmaps},d+=1,d===6&&(b.mipmapCount===1&&(c.minFilter=Di),c.image=o,c.format=b.format,c.needsUpdate=!0,e&&e(c))},n,a)}if(Array.isArray(t))for(let y=0,x=t.length;y<x;++y)g(y);else f.load(t,function(y){const x=s.parse(y,!0);if(x.isCubemap){const b=x.mipmaps.length/x.mipmapCount;for(let T=0;T<b;T++){o[T]={mipmaps:[]};for(let R=0;R<x.mipmapCount;R++)o[T].mipmaps.push(x.mipmaps[T*x.mipmapCount+R]),o[T].format=x.format,o[T].width=x.width,o[T].height=x.height}c.image=o}else c.image.width=x.width,c.image.height=x.height,c.mipmaps=x.mipmaps;x.mipmapCount===1&&(c.minFilter=Di),c.format=x.format,c.needsUpdate=!0,e&&e(c)},n,a);return c}}const Sp=new WeakMap;class m0 extends oo{constructor(t){super(t)}load(t,e,n,a){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const s=this,o=Ic.get(`image:${t}`);if(o!==void 0){if(o.complete===!0)s.manager.itemStart(t),setTimeout(function(){e&&e(o),s.manager.itemEnd(t)},0);else{let y=Sp.get(o);y===void 0&&(y=[],Sp.set(o,y)),y.push({onLoad:e,onError:a})}return o}const c=o0("img");function f(){g(),e&&e(this);const y=Sp.get(this)||[];for(let x=0;x<y.length;x++){const b=y[x];b.onLoad&&b.onLoad(this)}Sp.delete(this),s.manager.itemEnd(t)}function d(y){g(),a&&a(y),Ic.remove(`image:${t}`);const x=Sp.get(this)||[];for(let b=0;b<x.length;b++){const T=x[b];T.onError&&T.onError(y)}Sp.delete(this),s.manager.itemError(t),s.manager.itemEnd(t)}function g(){c.removeEventListener("load",f,!1),c.removeEventListener("error",d,!1)}return c.addEventListener("load",f,!1),c.addEventListener("error",d,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(c.crossOrigin=this.crossOrigin),Ic.add(`image:${t}`,c),s.manager.itemStart(t),c.src=t,c}}class WU extends oo{constructor(t){super(t)}load(t,e,n,a){const s=new w0;s.colorSpace=ir;const o=new m0(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let c=0;function f(d){o.load(t[d],function(g){s.images[d]=g,c++,c===6&&(s.needsUpdate=!0,e&&e(s))},void 0,a)}for(let d=0;d<t.length;++d)f(d);return s}}class qU extends oo{constructor(t){super(t)}load(t,e,n,a){const s=this,o=new Jl,c=new Uu(this.manager);return c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setPath(this.path),c.setWithCredentials(s.withCredentials),c.load(t,function(f){let d;try{d=s.parse(f)}catch(g){if(a!==void 0)a(g);else{g(g);return}}d.image!==void 0?o.image=d.image:d.data!==void 0&&(o.image.width=d.width,o.image.height=d.height,o.image.data=d.data),o.wrapS=d.wrapS!==void 0?d.wrapS:ao,o.wrapT=d.wrapT!==void 0?d.wrapT:ao,o.magFilter=d.magFilter!==void 0?d.magFilter:Di,o.minFilter=d.minFilter!==void 0?d.minFilter:Di,o.anisotropy=d.anisotropy!==void 0?d.anisotropy:1,d.colorSpace!==void 0&&(o.colorSpace=d.colorSpace),d.flipY!==void 0&&(o.flipY=d.flipY),d.format!==void 0&&(o.format=d.format),d.type!==void 0&&(o.type=d.type),d.mipmaps!==void 0&&(o.mipmaps=d.mipmaps,o.minFilter=Uc),d.mipmapCount===1&&(o.minFilter=Di),d.generateMipmaps!==void 0&&(o.generateMipmaps=d.generateMipmaps),o.needsUpdate=!0,e&&e(o,d)},n,a),o}}class XU extends oo{constructor(t){super(t)}load(t,e,n,a){const s=new pa,o=new m0(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(c){s.image=c,s.needsUpdate=!0,e!==void 0&&e(s)},n,a),s}}class qf extends li{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new He(t),this.intensity=e}dispose(){this.dispatchEvent({type:"dispose"})}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,e}}class CR extends qf{constructor(t,e,n){super(t,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(li.DEFAULT_UP),this.updateMatrix(),this.groundColor=new He(e)}copy(t,e){return super.copy(t,e),this.groundColor.copy(t.groundColor),this}toJSON(t){const e=super.toJSON(t);return e.object.groundColor=this.groundColor.getHex(),e}}const TS=new gn,iE=new pt,aE=new pt;class lM{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new de(512,512),this.mapType=Br,this.map=null,this.mapPass=null,this.matrix=new gn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new im,this._frameExtents=new de(1,1),this._viewportCount=1,this._viewports=[new Ri(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;iE.setFromMatrixPosition(t.matrixWorld),e.position.copy(iE),aE.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(aE),e.updateMatrixWorld(),TS.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(TS,e.coordinateSystem,e.reversedDepth),e.reversedDepth?n.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(TS)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.autoUpdate=t.autoUpdate,this.needsUpdate=t.needsUpdate,this.normalBias=t.normalBias,this.blurSamples=t.blurSamples,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.intensity!==1&&(t.intensity=this.intensity),this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class YU extends lM{constructor(){super(new fa(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(t){const e=this.camera,n=qp*2*t.angle*this.focus,a=this.mapSize.width/this.mapSize.height*this.aspect,s=t.distance||e.far;(n!==e.fov||a!==e.aspect||s!==e.far)&&(e.fov=n,e.aspect=a,e.far=s,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class RR extends qf{constructor(t,e,n=0,a=Math.PI/3,s=0,o=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(li.DEFAULT_UP),this.updateMatrix(),this.target=new li,this.distance=n,this.angle=a,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new YU}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){super.dispose(),this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.map=t.map,this.shadow=t.shadow.clone(),this}toJSON(t){const e=super.toJSON(t);return e.object.distance=this.distance,e.object.angle=this.angle,e.object.decay=this.decay,e.object.penumbra=this.penumbra,e.object.target=this.target.uuid,this.map&&this.map.isTexture&&(e.object.map=this.map.toJSON(t).uuid),e.object.shadow=this.shadow.toJSON(),e}}class ZU extends lM{constructor(){super(new fa(90,1,.5,500)),this.isPointLightShadow=!0}}class DR extends qf{constructor(t,e,n=0,a=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=a,this.shadow=new ZU}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){super.dispose(),this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}toJSON(t){const e=super.toJSON(t);return e.object.distance=this.distance,e.object.decay=this.decay,e.object.shadow=this.shadow.toJSON(),e}}class $l extends M1{constructor(t=-1,e=1,n=1,a=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=a,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,n,a,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=a,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,a=(this.top+this.bottom)/2;let s=n-t,o=n+t,c=a+e,f=a-e;if(this.view!==null&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=d*this.view.offsetX,o=s+d*this.view.width,c-=g*this.view.offsetY,f=c-g*this.view.height}this.projectionMatrix.makeOrthographic(s,o,c,f,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}}class KU extends lM{constructor(){super(new $l(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class LR extends qf{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(li.DEFAULT_UP),this.updateMatrix(),this.target=new li,this.shadow=new KU}dispose(){super.dispose(),this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}toJSON(t){const e=super.toJSON(t);return e.object.shadow=this.shadow.toJSON(),e.object.target=this.target.uuid,e}}class OR extends qf{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class NR extends qf{constructor(t,e,n=10,a=10){super(t,e),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=a}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}class cM{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new pt)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,a=t.y,s=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.282095),e.addScaledVector(o[1],.488603*a),e.addScaledVector(o[2],.488603*s),e.addScaledVector(o[3],.488603*n),e.addScaledVector(o[4],1.092548*(n*a)),e.addScaledVector(o[5],1.092548*(a*s)),e.addScaledVector(o[6],.315392*(3*s*s-1)),e.addScaledVector(o[7],1.092548*(n*s)),e.addScaledVector(o[8],.546274*(n*n-a*a)),e}getIrradianceAt(t,e){const n=t.x,a=t.y,s=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.886227),e.addScaledVector(o[1],2*.511664*a),e.addScaledVector(o[2],2*.511664*s),e.addScaledVector(o[3],2*.511664*n),e.addScaledVector(o[4],2*.429043*n*a),e.addScaledVector(o[5],2*.429043*a*s),e.addScaledVector(o[6],.743125*s*s-.247708),e.addScaledVector(o[7],2*.429043*n*s),e.addScaledVector(o[8],.429043*(n*n-a*a)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(t,e=0){const n=this.coefficients;for(let a=0;a<9;a++)n[a].fromArray(t,e+a*3);return this}toArray(t=[],e=0){const n=this.coefficients;for(let a=0;a<9;a++)n[a].toArray(t,e+a*3);return t}static getBasisAt(t,e){const n=t.x,a=t.y,s=t.z;e[0]=.282095,e[1]=.488603*a,e[2]=.488603*s,e[3]=.488603*n,e[4]=1.092548*n*a,e[5]=1.092548*a*s,e[6]=.315392*(3*s*s-1),e[7]=1.092548*n*s,e[8]=.546274*(n*n-a*a)}}class UR extends qf{constructor(t=new cM,e=1){super(void 0,e),this.isLightProbe=!0,this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}class W1 extends oo{constructor(t){super(t),this.textures={}}load(t,e,n,a){const s=this,o=new Uu(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(t,function(c){try{e(s.parse(JSON.parse(c)))}catch(f){a?a(f):rn(f),s.manager.itemError(t)}},n,a)}parse(t){const e=this.textures;function n(s){return e[s]===void 0&&Ie("MaterialLoader: Undefined texture",s),e[s]}const a=this.createMaterialFromType(t.type);if(t.uuid!==void 0&&(a.uuid=t.uuid),t.name!==void 0&&(a.name=t.name),t.color!==void 0&&a.color!==void 0&&a.color.setHex(t.color),t.roughness!==void 0&&(a.roughness=t.roughness),t.metalness!==void 0&&(a.metalness=t.metalness),t.sheen!==void 0&&(a.sheen=t.sheen),t.sheenColor!==void 0&&(a.sheenColor=new He().setHex(t.sheenColor)),t.sheenRoughness!==void 0&&(a.sheenRoughness=t.sheenRoughness),t.emissive!==void 0&&a.emissive!==void 0&&a.emissive.setHex(t.emissive),t.specular!==void 0&&a.specular!==void 0&&a.specular.setHex(t.specular),t.specularIntensity!==void 0&&(a.specularIntensity=t.specularIntensity),t.specularColor!==void 0&&a.specularColor!==void 0&&a.specularColor.setHex(t.specularColor),t.shininess!==void 0&&(a.shininess=t.shininess),t.clearcoat!==void 0&&(a.clearcoat=t.clearcoat),t.clearcoatRoughness!==void 0&&(a.clearcoatRoughness=t.clearcoatRoughness),t.dispersion!==void 0&&(a.dispersion=t.dispersion),t.iridescence!==void 0&&(a.iridescence=t.iridescence),t.iridescenceIOR!==void 0&&(a.iridescenceIOR=t.iridescenceIOR),t.iridescenceThicknessRange!==void 0&&(a.iridescenceThicknessRange=t.iridescenceThicknessRange),t.transmission!==void 0&&(a.transmission=t.transmission),t.thickness!==void 0&&(a.thickness=t.thickness),t.attenuationDistance!==void 0&&(a.attenuationDistance=t.attenuationDistance),t.attenuationColor!==void 0&&a.attenuationColor!==void 0&&a.attenuationColor.setHex(t.attenuationColor),t.anisotropy!==void 0&&(a.anisotropy=t.anisotropy),t.anisotropyRotation!==void 0&&(a.anisotropyRotation=t.anisotropyRotation),t.fog!==void 0&&(a.fog=t.fog),t.flatShading!==void 0&&(a.flatShading=t.flatShading),t.blending!==void 0&&(a.blending=t.blending),t.combine!==void 0&&(a.combine=t.combine),t.side!==void 0&&(a.side=t.side),t.shadowSide!==void 0&&(a.shadowSide=t.shadowSide),t.opacity!==void 0&&(a.opacity=t.opacity),t.transparent!==void 0&&(a.transparent=t.transparent),t.alphaTest!==void 0&&(a.alphaTest=t.alphaTest),t.alphaHash!==void 0&&(a.alphaHash=t.alphaHash),t.depthFunc!==void 0&&(a.depthFunc=t.depthFunc),t.depthTest!==void 0&&(a.depthTest=t.depthTest),t.depthWrite!==void 0&&(a.depthWrite=t.depthWrite),t.colorWrite!==void 0&&(a.colorWrite=t.colorWrite),t.blendSrc!==void 0&&(a.blendSrc=t.blendSrc),t.blendDst!==void 0&&(a.blendDst=t.blendDst),t.blendEquation!==void 0&&(a.blendEquation=t.blendEquation),t.blendSrcAlpha!==void 0&&(a.blendSrcAlpha=t.blendSrcAlpha),t.blendDstAlpha!==void 0&&(a.blendDstAlpha=t.blendDstAlpha),t.blendEquationAlpha!==void 0&&(a.blendEquationAlpha=t.blendEquationAlpha),t.blendColor!==void 0&&a.blendColor!==void 0&&a.blendColor.setHex(t.blendColor),t.blendAlpha!==void 0&&(a.blendAlpha=t.blendAlpha),t.stencilWriteMask!==void 0&&(a.stencilWriteMask=t.stencilWriteMask),t.stencilFunc!==void 0&&(a.stencilFunc=t.stencilFunc),t.stencilRef!==void 0&&(a.stencilRef=t.stencilRef),t.stencilFuncMask!==void 0&&(a.stencilFuncMask=t.stencilFuncMask),t.stencilFail!==void 0&&(a.stencilFail=t.stencilFail),t.stencilZFail!==void 0&&(a.stencilZFail=t.stencilZFail),t.stencilZPass!==void 0&&(a.stencilZPass=t.stencilZPass),t.stencilWrite!==void 0&&(a.stencilWrite=t.stencilWrite),t.wireframe!==void 0&&(a.wireframe=t.wireframe),t.wireframeLinewidth!==void 0&&(a.wireframeLinewidth=t.wireframeLinewidth),t.wireframeLinecap!==void 0&&(a.wireframeLinecap=t.wireframeLinecap),t.wireframeLinejoin!==void 0&&(a.wireframeLinejoin=t.wireframeLinejoin),t.rotation!==void 0&&(a.rotation=t.rotation),t.linewidth!==void 0&&(a.linewidth=t.linewidth),t.dashSize!==void 0&&(a.dashSize=t.dashSize),t.gapSize!==void 0&&(a.gapSize=t.gapSize),t.scale!==void 0&&(a.scale=t.scale),t.polygonOffset!==void 0&&(a.polygonOffset=t.polygonOffset),t.polygonOffsetFactor!==void 0&&(a.polygonOffsetFactor=t.polygonOffsetFactor),t.polygonOffsetUnits!==void 0&&(a.polygonOffsetUnits=t.polygonOffsetUnits),t.dithering!==void 0&&(a.dithering=t.dithering),t.alphaToCoverage!==void 0&&(a.alphaToCoverage=t.alphaToCoverage),t.premultipliedAlpha!==void 0&&(a.premultipliedAlpha=t.premultipliedAlpha),t.forceSinglePass!==void 0&&(a.forceSinglePass=t.forceSinglePass),t.allowOverride!==void 0&&(a.allowOverride=t.allowOverride),t.visible!==void 0&&(a.visible=t.visible),t.toneMapped!==void 0&&(a.toneMapped=t.toneMapped),t.userData!==void 0&&(a.userData=t.userData),t.vertexColors!==void 0&&(typeof t.vertexColors=="number"?a.vertexColors=t.vertexColors>0:a.vertexColors=t.vertexColors),t.uniforms!==void 0)for(const s in t.uniforms){const o=t.uniforms[s];switch(a.uniforms[s]={},o.type){case"t":a.uniforms[s].value=n(o.value);break;case"c":a.uniforms[s].value=new He().setHex(o.value);break;case"v2":a.uniforms[s].value=new de().fromArray(o.value);break;case"v3":a.uniforms[s].value=new pt().fromArray(o.value);break;case"v4":a.uniforms[s].value=new Ri().fromArray(o.value);break;case"m3":a.uniforms[s].value=new En().fromArray(o.value);break;case"m4":a.uniforms[s].value=new gn().fromArray(o.value);break;default:a.uniforms[s].value=o.value}}if(t.defines!==void 0&&(a.defines=t.defines),t.vertexShader!==void 0&&(a.vertexShader=t.vertexShader),t.fragmentShader!==void 0&&(a.fragmentShader=t.fragmentShader),t.glslVersion!==void 0&&(a.glslVersion=t.glslVersion),t.extensions!==void 0)for(const s in t.extensions)a.extensions[s]=t.extensions[s];if(t.lights!==void 0&&(a.lights=t.lights),t.clipping!==void 0&&(a.clipping=t.clipping),t.size!==void 0&&(a.size=t.size),t.sizeAttenuation!==void 0&&(a.sizeAttenuation=t.sizeAttenuation),t.map!==void 0&&(a.map=n(t.map)),t.matcap!==void 0&&(a.matcap=n(t.matcap)),t.alphaMap!==void 0&&(a.alphaMap=n(t.alphaMap)),t.bumpMap!==void 0&&(a.bumpMap=n(t.bumpMap)),t.bumpScale!==void 0&&(a.bumpScale=t.bumpScale),t.normalMap!==void 0&&(a.normalMap=n(t.normalMap)),t.normalMapType!==void 0&&(a.normalMapType=t.normalMapType),t.normalScale!==void 0){let s=t.normalScale;Array.isArray(s)===!1&&(s=[s,s]),a.normalScale=new de().fromArray(s)}return t.displacementMap!==void 0&&(a.displacementMap=n(t.displacementMap)),t.displacementScale!==void 0&&(a.displacementScale=t.displacementScale),t.displacementBias!==void 0&&(a.displacementBias=t.displacementBias),t.roughnessMap!==void 0&&(a.roughnessMap=n(t.roughnessMap)),t.metalnessMap!==void 0&&(a.metalnessMap=n(t.metalnessMap)),t.emissiveMap!==void 0&&(a.emissiveMap=n(t.emissiveMap)),t.emissiveIntensity!==void 0&&(a.emissiveIntensity=t.emissiveIntensity),t.specularMap!==void 0&&(a.specularMap=n(t.specularMap)),t.specularIntensityMap!==void 0&&(a.specularIntensityMap=n(t.specularIntensityMap)),t.specularColorMap!==void 0&&(a.specularColorMap=n(t.specularColorMap)),t.envMap!==void 0&&(a.envMap=n(t.envMap)),t.envMapRotation!==void 0&&a.envMapRotation.fromArray(t.envMapRotation),t.envMapIntensity!==void 0&&(a.envMapIntensity=t.envMapIntensity),t.reflectivity!==void 0&&(a.reflectivity=t.reflectivity),t.refractionRatio!==void 0&&(a.refractionRatio=t.refractionRatio),t.lightMap!==void 0&&(a.lightMap=n(t.lightMap)),t.lightMapIntensity!==void 0&&(a.lightMapIntensity=t.lightMapIntensity),t.aoMap!==void 0&&(a.aoMap=n(t.aoMap)),t.aoMapIntensity!==void 0&&(a.aoMapIntensity=t.aoMapIntensity),t.gradientMap!==void 0&&(a.gradientMap=n(t.gradientMap)),t.clearcoatMap!==void 0&&(a.clearcoatMap=n(t.clearcoatMap)),t.clearcoatRoughnessMap!==void 0&&(a.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),t.clearcoatNormalMap!==void 0&&(a.clearcoatNormalMap=n(t.clearcoatNormalMap)),t.clearcoatNormalScale!==void 0&&(a.clearcoatNormalScale=new de().fromArray(t.clearcoatNormalScale)),t.iridescenceMap!==void 0&&(a.iridescenceMap=n(t.iridescenceMap)),t.iridescenceThicknessMap!==void 0&&(a.iridescenceThicknessMap=n(t.iridescenceThicknessMap)),t.transmissionMap!==void 0&&(a.transmissionMap=n(t.transmissionMap)),t.thicknessMap!==void 0&&(a.thicknessMap=n(t.thicknessMap)),t.anisotropyMap!==void 0&&(a.anisotropyMap=n(t.anisotropyMap)),t.sheenColorMap!==void 0&&(a.sheenColorMap=n(t.sheenColorMap)),t.sheenRoughnessMap!==void 0&&(a.sheenRoughnessMap=n(t.sheenRoughnessMap)),a}setTextures(t){return this.textures=t,this}createMaterialFromType(t){return W1.createMaterialFromType(t)}static createMaterialFromType(t){const e={ShadowMaterial:mR,SpriteMaterial:q2,RawShaderMaterial:nM,ShaderMaterial:pl,PointsMaterial:Y2,MeshPhysicalMaterial:gR,MeshStandardMaterial:iM,MeshPhongMaterial:vR,MeshToonMaterial:yR,MeshNormalMaterial:_R,MeshLambertMaterial:xR,MeshDepthMaterial:G1,MeshDistanceMaterial:j1,MeshBasicMaterial:zu,MeshMatcapMaterial:SR,LineDashedMaterial:bR,LineBasicMaterial:Hr,Material:lr};return new e[t]}}class Nb{static extractUrlBase(t){const e=t.lastIndexOf("/");return e===-1?"./":t.slice(0,e+1)}static resolveURL(t,e){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class uM extends wn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){const t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}class IR extends oo{constructor(t){super(t)}load(t,e,n,a){const s=this,o=new Uu(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(t,function(c){try{e(s.parse(JSON.parse(c)))}catch(f){a?a(f):rn(f),s.manager.itemError(t)}},n,a)}parse(t){const e={},n={};function a(b,T){if(e[T]!==void 0)return e[T];const C=b.interleavedBuffers[T],w=s(b,C.buffer),N=Lp(C.type,w),I=new E1(N,C.stride);return I.uuid=C.uuid,e[T]=I,I}function s(b,T){if(n[T]!==void 0)return n[T];const C=b.arrayBuffers[T],w=new Uint32Array(C).buffer;return n[T]=w,w}const o=t.isInstancedBufferGeometry?new uM:new wn,c=t.data.index;if(c!==void 0){const b=Lp(c.type,c.array);o.setIndex(new Pi(b,1))}const f=t.data.attributes;for(const b in f){const T=f[b];let R;if(T.isInterleavedBufferAttribute){const C=a(t.data,T.data);R=new od(C,T.itemSize,T.offset,T.normalized)}else{const C=Lp(T.type,T.array),w=T.isInstancedBufferAttribute?ld:Pi;R=new w(C,T.itemSize,T.normalized)}T.name!==void 0&&(R.name=T.name),T.usage!==void 0&&R.setUsage(T.usage),o.setAttribute(b,R)}const d=t.data.morphAttributes;if(d)for(const b in d){const T=d[b],R=[];for(let C=0,w=T.length;C<w;C++){const N=T[C];let I;if(N.isInterleavedBufferAttribute){const z=a(t.data,N.data);I=new od(z,N.itemSize,N.offset,N.normalized)}else{const z=Lp(N.type,N.array);I=new Pi(z,N.itemSize,N.normalized)}N.name!==void 0&&(I.name=N.name),R.push(I)}o.morphAttributes[b]=R}t.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const y=t.data.groups||t.data.drawcalls||t.data.offsets;if(y!==void 0)for(let b=0,T=y.length;b!==T;++b){const R=y[b];o.addGroup(R.start,R.count,R.materialIndex)}const x=t.data.boundingSphere;return x!==void 0&&(o.boundingSphere=new As().fromJSON(x)),t.name&&(o.name=t.name),t.userData&&(o.userData=t.userData),o}}class QU extends oo{constructor(t){super(t)}load(t,e,n,a){const s=this,o=this.path===""?Nb.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||o;const c=new Uu(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(t,function(f){let d=null;try{d=JSON.parse(f)}catch(y){a!==void 0&&a(y),y("ObjectLoader: Can't parse "+t+".",y.message);return}const g=d.metadata;if(g===void 0||g.type===void 0||g.type.toLowerCase()==="geometry"){a!==void 0&&a(new Error("THREE.ObjectLoader: Can't load "+t)),rn("ObjectLoader: Can't load "+t);return}s.parse(d,e)},n,a)}async loadAsync(t,e){const n=this,a=this.path===""?Nb.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a;const s=new Uu(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(t,e),c=JSON.parse(o),f=c.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+t);return await n.parseAsync(c)}parse(t,e){const n=this.parseAnimations(t.animations),a=this.parseShapes(t.shapes),s=this.parseGeometries(t.geometries,a),o=this.parseImages(t.images,function(){e!==void 0&&e(d)}),c=this.parseTextures(t.textures,o),f=this.parseMaterials(t.materials,c),d=this.parseObject(t.object,s,f,c,n),g=this.parseSkeletons(t.skeletons,d);if(this.bindSkeletons(d,g),this.bindLightTargets(d),e!==void 0){let y=!1;for(const x in o)if(o[x].data instanceof HTMLImageElement){y=!0;break}y===!1&&e(d)}return d}async parseAsync(t){const e=this.parseAnimations(t.animations),n=this.parseShapes(t.shapes),a=this.parseGeometries(t.geometries,n),s=await this.parseImagesAsync(t.images),o=this.parseTextures(t.textures,s),c=this.parseMaterials(t.materials,o),f=this.parseObject(t.object,a,c,o,e),d=this.parseSkeletons(t.skeletons,f);return this.bindSkeletons(f,d),this.bindLightTargets(f),f}parseShapes(t){const e={};if(t!==void 0)for(let n=0,a=t.length;n<a;n++){const s=new ed().fromJSON(t[n]);e[s.uuid]=s}return e}parseSkeletons(t,e){const n={},a={};if(e.traverse(function(s){s.isBone&&(a[s.uuid]=s)}),t!==void 0)for(let s=0,o=t.length;s<o;s++){const c=new w1().fromJSON(t[s],a);n[c.uuid]=c}return n}parseGeometries(t,e){const n={};if(t!==void 0){const a=new IR;for(let s=0,o=t.length;s<o;s++){let c;const f=t[s];switch(f.type){case"BufferGeometry":case"InstancedBufferGeometry":c=a.parse(f);break;default:f.type in nE?c=nE[f.type].fromJSON(f,e):Ie(`ObjectLoader: Unsupported geometry type "${f.type}"`)}c.uuid=f.uuid,f.name!==void 0&&(c.name=f.name),f.userData!==void 0&&(c.userData=f.userData),n[f.uuid]=c}}return n}parseMaterials(t,e){const n={},a={};if(t!==void 0){const s=new W1;s.setTextures(e);for(let o=0,c=t.length;o<c;o++){const f=t[o];n[f.uuid]===void 0&&(n[f.uuid]=s.parse(f)),a[f.uuid]=n[f.uuid]}}return a}parseAnimations(t){const e={};if(t!==void 0)for(let n=0;n<t.length;n++){const a=t[n],s=p0.parse(a);e[s.uuid]=s}return e}parseImages(t,e){const n=this,a={};let s;function o(f){return n.manager.itemStart(f),s.load(f,function(){n.manager.itemEnd(f)},void 0,function(){n.manager.itemError(f),n.manager.itemEnd(f)})}function c(f){if(typeof f=="string"){const d=f,g=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:n.resourcePath+d;return o(g)}else return f.data?{data:Lp(f.type,f.data),width:f.width,height:f.height}:null}if(t!==void 0&&t.length>0){const f=new oM(e);s=new m0(f),s.setCrossOrigin(this.crossOrigin);for(let d=0,g=t.length;d<g;d++){const y=t[d],x=y.url;if(Array.isArray(x)){const b=[];for(let T=0,R=x.length;T<R;T++){const C=x[T],w=c(C);w!==null&&(w instanceof HTMLImageElement?b.push(w):b.push(new Jl(w.data,w.width,w.height)))}a[y.uuid]=new Pf(b)}else{const b=c(y.url);a[y.uuid]=new Pf(b)}}}return a}async parseImagesAsync(t){const e=this,n={};let a;async function s(o){if(typeof o=="string"){const c=o,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:e.resourcePath+c;return await a.loadAsync(f)}else return o.data?{data:Lp(o.type,o.data),width:o.width,height:o.height}:null}if(t!==void 0&&t.length>0){a=new m0(this.manager),a.setCrossOrigin(this.crossOrigin);for(let o=0,c=t.length;o<c;o++){const f=t[o],d=f.url;if(Array.isArray(d)){const g=[];for(let y=0,x=d.length;y<x;y++){const b=d[y],T=await s(b);T!==null&&(T instanceof HTMLImageElement?g.push(T):g.push(new Jl(T.data,T.width,T.height)))}n[f.uuid]=new Pf(g)}else{const g=await s(f.url);n[f.uuid]=new Pf(g)}}}return n}parseTextures(t,e){function n(s,o){return typeof s=="number"?s:(Ie("ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const a={};if(t!==void 0)for(let s=0,o=t.length;s<o;s++){const c=t[s];c.image===void 0&&Ie('ObjectLoader: No "image" specified for',c.uuid),e[c.image]===void 0&&Ie("ObjectLoader: Undefined image",c.image);const f=e[c.image],d=f.data;let g;Array.isArray(d)?(g=new w0,d.length===6&&(g.needsUpdate=!0)):(d&&d.data?g=new Jl:g=new pa,d&&(g.needsUpdate=!0)),g.source=f,g.uuid=c.uuid,c.name!==void 0&&(g.name=c.name),c.mapping!==void 0&&(g.mapping=n(c.mapping,JU)),c.channel!==void 0&&(g.channel=c.channel),c.offset!==void 0&&g.offset.fromArray(c.offset),c.repeat!==void 0&&g.repeat.fromArray(c.repeat),c.center!==void 0&&g.center.fromArray(c.center),c.rotation!==void 0&&(g.rotation=c.rotation),c.wrap!==void 0&&(g.wrapS=n(c.wrap[0],sE),g.wrapT=n(c.wrap[1],sE)),c.format!==void 0&&(g.format=c.format),c.internalFormat!==void 0&&(g.internalFormat=c.internalFormat),c.type!==void 0&&(g.type=c.type),c.colorSpace!==void 0&&(g.colorSpace=c.colorSpace),c.minFilter!==void 0&&(g.minFilter=n(c.minFilter,rE)),c.magFilter!==void 0&&(g.magFilter=n(c.magFilter,rE)),c.anisotropy!==void 0&&(g.anisotropy=c.anisotropy),c.flipY!==void 0&&(g.flipY=c.flipY),c.generateMipmaps!==void 0&&(g.generateMipmaps=c.generateMipmaps),c.premultiplyAlpha!==void 0&&(g.premultiplyAlpha=c.premultiplyAlpha),c.unpackAlignment!==void 0&&(g.unpackAlignment=c.unpackAlignment),c.compareFunction!==void 0&&(g.compareFunction=c.compareFunction),c.userData!==void 0&&(g.userData=c.userData),a[c.uuid]=g}return a}parseObject(t,e,n,a,s){let o;function c(x){return e[x]===void 0&&Ie("ObjectLoader: Undefined geometry",x),e[x]}function f(x){if(x!==void 0){if(Array.isArray(x)){const b=[];for(let T=0,R=x.length;T<R;T++){const C=x[T];n[C]===void 0&&Ie("ObjectLoader: Undefined material",C),b.push(n[C])}return b}return n[x]===void 0&&Ie("ObjectLoader: Undefined material",x),n[x]}}function d(x){return a[x]===void 0&&Ie("ObjectLoader: Undefined texture",x),a[x]}let g,y;switch(t.type){case"Scene":o=new W2,t.background!==void 0&&(Number.isInteger(t.background)?o.background=new He(t.background):o.background=d(t.background)),t.environment!==void 0&&(o.environment=d(t.environment)),t.fog!==void 0&&(t.fog.type==="Fog"?o.fog=new A1(t.fog.color,t.fog.near,t.fog.far):t.fog.type==="FogExp2"&&(o.fog=new T1(t.fog.color,t.fog.density)),t.fog.name!==""&&(o.fog.name=t.fog.name)),t.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=t.backgroundBlurriness),t.backgroundIntensity!==void 0&&(o.backgroundIntensity=t.backgroundIntensity),t.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(t.backgroundRotation),t.environmentIntensity!==void 0&&(o.environmentIntensity=t.environmentIntensity),t.environmentRotation!==void 0&&o.environmentRotation.fromArray(t.environmentRotation);break;case"PerspectiveCamera":o=new fa(t.fov,t.aspect,t.near,t.far),t.focus!==void 0&&(o.focus=t.focus),t.zoom!==void 0&&(o.zoom=t.zoom),t.filmGauge!==void 0&&(o.filmGauge=t.filmGauge),t.filmOffset!==void 0&&(o.filmOffset=t.filmOffset),t.view!==void 0&&(o.view=Object.assign({},t.view));break;case"OrthographicCamera":o=new $l(t.left,t.right,t.top,t.bottom,t.near,t.far),t.zoom!==void 0&&(o.zoom=t.zoom),t.view!==void 0&&(o.view=Object.assign({},t.view));break;case"AmbientLight":o=new OR(t.color,t.intensity);break;case"DirectionalLight":o=new LR(t.color,t.intensity),o.target=t.target||"";break;case"PointLight":o=new DR(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":o=new NR(t.color,t.intensity,t.width,t.height);break;case"SpotLight":o=new RR(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay),o.target=t.target||"";break;case"HemisphereLight":o=new CR(t.color,t.groundColor,t.intensity);break;case"LightProbe":const x=new cM().fromArray(t.sh);o=new UR(x,t.intensity);break;case"SkinnedMesh":g=c(t.geometry),y=f(t.material),o=new QC(g,y),t.bindMode!==void 0&&(o.bindMode=t.bindMode),t.bindMatrix!==void 0&&o.bindMatrix.fromArray(t.bindMatrix),t.skeleton!==void 0&&(o.skeleton=t.skeleton);break;case"Mesh":g=c(t.geometry),y=f(t.material),o=new ma(g,y);break;case"InstancedMesh":g=c(t.geometry),y=f(t.material);const b=t.count,T=t.instanceMatrix,R=t.instanceColor;o=new JC(g,y,b),o.instanceMatrix=new ld(new Float32Array(T.array),16),R!==void 0&&(o.instanceColor=new ld(new Float32Array(R.array),R.itemSize));break;case"BatchedMesh":g=c(t.geometry),y=f(t.material),o=new $C(t.maxInstanceCount,t.maxVertexCount,t.maxIndexCount,y),o.geometry=g,o.perObjectFrustumCulled=t.perObjectFrustumCulled,o.sortObjects=t.sortObjects,o._drawRanges=t.drawRanges,o._reservedRanges=t.reservedRanges,o._geometryInfo=t.geometryInfo.map(C=>{let w=null,N=null;return C.boundingBox!==void 0&&(w=new Ts().fromJSON(C.boundingBox)),C.boundingSphere!==void 0&&(N=new As().fromJSON(C.boundingSphere)),{...C,boundingBox:w,boundingSphere:N}}),o._instanceInfo=t.instanceInfo,o._availableInstanceIds=t._availableInstanceIds,o._availableGeometryIds=t._availableGeometryIds,o._nextIndexStart=t.nextIndexStart,o._nextVertexStart=t.nextVertexStart,o._geometryCount=t.geometryCount,o._maxInstanceCount=t.maxInstanceCount,o._maxVertexCount=t.maxVertexCount,o._maxIndexCount=t.maxIndexCount,o._geometryInitialized=t.geometryInitialized,o._matricesTexture=d(t.matricesTexture.uuid),o._indirectTexture=d(t.indirectTexture.uuid),t.colorsTexture!==void 0&&(o._colorsTexture=d(t.colorsTexture.uuid)),t.boundingSphere!==void 0&&(o.boundingSphere=new As().fromJSON(t.boundingSphere)),t.boundingBox!==void 0&&(o.boundingBox=new Ts().fromJSON(t.boundingBox));break;case"LOD":o=new KC;break;case"Line":o=new Vf(c(t.geometry),f(t.material));break;case"LineLoop":o=new tR(c(t.geometry),f(t.material));break;case"LineSegments":o=new Gc(c(t.geometry),f(t.material));break;case"PointCloud":case"Points":o=new eR(c(t.geometry),f(t.material));break;case"Sprite":o=new ZC(f(t.material));break;case"Group":o=new Op;break;case"Bone":o=new X2;break;default:o=new li}if(o.uuid=t.uuid,t.name!==void 0&&(o.name=t.name),t.matrix!==void 0?(o.matrix.fromArray(t.matrix),t.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=t.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(t.position!==void 0&&o.position.fromArray(t.position),t.rotation!==void 0&&o.rotation.fromArray(t.rotation),t.quaternion!==void 0&&o.quaternion.fromArray(t.quaternion),t.scale!==void 0&&o.scale.fromArray(t.scale)),t.up!==void 0&&o.up.fromArray(t.up),t.castShadow!==void 0&&(o.castShadow=t.castShadow),t.receiveShadow!==void 0&&(o.receiveShadow=t.receiveShadow),t.shadow&&(t.shadow.intensity!==void 0&&(o.shadow.intensity=t.shadow.intensity),t.shadow.bias!==void 0&&(o.shadow.bias=t.shadow.bias),t.shadow.normalBias!==void 0&&(o.shadow.normalBias=t.shadow.normalBias),t.shadow.radius!==void 0&&(o.shadow.radius=t.shadow.radius),t.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(t.shadow.mapSize),t.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(t.shadow.camera))),t.visible!==void 0&&(o.visible=t.visible),t.frustumCulled!==void 0&&(o.frustumCulled=t.frustumCulled),t.renderOrder!==void 0&&(o.renderOrder=t.renderOrder),t.userData!==void 0&&(o.userData=t.userData),t.layers!==void 0&&(o.layers.mask=t.layers),t.children!==void 0){const x=t.children;for(let b=0;b<x.length;b++)o.add(this.parseObject(x[b],e,n,a,s))}if(t.animations!==void 0){const x=t.animations;for(let b=0;b<x.length;b++){const T=x[b];o.animations.push(s[T])}}if(t.type==="LOD"){t.autoUpdate!==void 0&&(o.autoUpdate=t.autoUpdate);const x=t.levels;for(let b=0;b<x.length;b++){const T=x[b],R=o.getObjectByProperty("uuid",T.object);R!==void 0&&o.addLevel(R,T.distance,T.hysteresis)}}return o}bindSkeletons(t,e){Object.keys(e).length!==0&&t.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const a=e[n.skeleton];a===void 0?Ie("ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(a,n.bindMatrix)}})}bindLightTargets(t){t.traverse(function(e){if(e.isDirectionalLight||e.isSpotLight){const n=e.target,a=t.getObjectByProperty("uuid",n);a!==void 0?e.target=a:e.target=new li}})}}const JU={UVMapping:f1,CubeReflectionMapping:kc,CubeRefractionMapping:Bf,EquirectangularReflectionMapping:$g,EquirectangularRefractionMapping:t0,CubeUVReflectionMapping:nm},sE={RepeatWrapping:e0,ClampToEdgeWrapping:ao,MirroredRepeatWrapping:n0},rE={NearestFilter:Ba,NearestMipmapNearestFilter:L2,NearestMipmapLinearFilter:Dp,LinearFilter:Di,LinearMipmapNearestFilter:zg,LinearMipmapLinearFilter:Uc},AS=new WeakMap;class $U extends oo{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&Ie("ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&Ie("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(t){return this.options=t,this}load(t,e,n,a){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const s=this,o=Ic.get(`image-bitmap:${t}`);if(o!==void 0){if(s.manager.itemStart(t),o.then){o.then(d=>{if(AS.has(o)===!0)a&&a(AS.get(o)),s.manager.itemError(t),s.manager.itemEnd(t);else return e&&e(d),s.manager.itemEnd(t),d});return}return setTimeout(function(){e&&e(o),s.manager.itemEnd(t)},0),o}const c={};c.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",c.headers=this.requestHeader,c.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const f=fetch(t,c).then(function(d){return d.blob()}).then(function(d){return createImageBitmap(d,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(d){return Ic.add(`image-bitmap:${t}`,d),e&&e(d),s.manager.itemEnd(t),d}).catch(function(d){a&&a(d),AS.set(f,d),Ic.remove(`image-bitmap:${t}`),s.manager.itemError(t),s.manager.itemEnd(t)});Ic.add(`image-bitmap:${t}`,f),s.manager.itemStart(t)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let xy,fM=class{static getContext(){return xy===void 0&&(xy=new(window.AudioContext||window.webkitAudioContext)),xy}static setContext(t){xy=t}};class tI extends oo{constructor(t){super(t)}load(t,e,n,a){const s=this,o=new Uu(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,function(f){try{const d=f.slice(0);fM.getContext().decodeAudioData(d,function(y){e(y)}).catch(c)}catch(d){c(d)}},n,a);function c(f){a?a(f):rn(f),s.manager.itemError(t)}}}const oE=new gn,lE=new gn,Oh=new gn;class eI{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new fa,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new fa,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep,Oh.copy(t.projectionMatrix);const a=e.eyeSep/2,s=a*e.near/e.focus,o=e.near*Math.tan(td*e.fov*.5)/e.zoom;let c,f;lE.elements[12]=-a,oE.elements[12]=a,c=-o*e.aspect+s,f=o*e.aspect+s,Oh.elements[0]=2*e.near/(f-c),Oh.elements[8]=(f+c)/(f-c),this.cameraL.projectionMatrix.copy(Oh),c=-o*e.aspect-s,f=o*e.aspect-s,Oh.elements[0]=2*e.near/(f-c),Oh.elements[8]=(f+c)/(f-c),this.cameraR.projectionMatrix.copy(Oh)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(lE),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(oE)}}class PR extends fa{constructor(t=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=t}}let hM=class{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=performance.now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}};const Nh=new pt,ES=new or,nI=new pt,Uh=new pt,Ih=new pt;class iI extends li{constructor(){super(),this.type="AudioListener",this.context=fM.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new hM}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Nh,ES,nI),Uh.set(0,0,-1).applyQuaternion(ES),Ih.set(0,1,0).applyQuaternion(ES),e.positionX){const n=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(Nh.x,n),e.positionY.linearRampToValueAtTime(Nh.y,n),e.positionZ.linearRampToValueAtTime(Nh.z,n),e.forwardX.linearRampToValueAtTime(Uh.x,n),e.forwardY.linearRampToValueAtTime(Uh.y,n),e.forwardZ.linearRampToValueAtTime(Uh.z,n),e.upX.linearRampToValueAtTime(Ih.x,n),e.upY.linearRampToValueAtTime(Ih.y,n),e.upZ.linearRampToValueAtTime(Ih.z,n)}else e.setPosition(Nh.x,Nh.y,Nh.z),e.setOrientation(Uh.x,Uh.y,Uh.z,Ih.x,Ih.y,Ih.z)}}let zR=class extends li{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(this.isPlaying===!0){Ie("Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){Ie("Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){Ie("Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(t=0){if(this.hasPlaybackControl===!1){Ie("Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+t),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(t){return t||(t=[]),this._connected===!0?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){return this.detune=t,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(this.hasPlaybackControl===!1){Ie("Audio: this Audio has no playback control.");return}return this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(Ie("Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(this.hasPlaybackControl===!1){Ie("Audio: this Audio has no playback control.");return}return this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}copy(t,e){return super.copy(t,e),t.sourceType!=="buffer"?(Ie("Audio: Audio source type cannot be copied."),this):(this.autoplay=t.autoplay,this.buffer=t.buffer,this.detune=t.detune,this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.offset=t.offset,this.duration=t.duration,this.playbackRate=t.playbackRate,this.hasPlaybackControl=t.hasPlaybackControl,this.sourceType=t.sourceType,this.filters=t.filters.slice(),this)}clone(t){return new this.constructor(this.listener).copy(this,t)}};const Ph=new pt,cE=new or,aI=new pt,zh=new pt;class sI extends zR{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Ph,cE,aI),zh.set(0,0,1).applyQuaternion(cE);const e=this.panner;if(e.positionX){const n=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(Ph.x,n),e.positionY.linearRampToValueAtTime(Ph.y,n),e.positionZ.linearRampToValueAtTime(Ph.z,n),e.orientationX.linearRampToValueAtTime(zh.x,n),e.orientationY.linearRampToValueAtTime(zh.y,n),e.orientationZ.linearRampToValueAtTime(zh.z,n)}else e.setPosition(Ph.x,Ph.y,Ph.z),e.setOrientation(zh.x,zh.y,zh.z)}}class rI{constructor(t,e=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let n=0;n<e.length;n++)t+=e[n];return t/e.length}}class BR{constructor(t,e,n){this.binding=t,this.valueSize=n;let a,s,o;switch(e){case"quaternion":a=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":a=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:a=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=a,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const n=this.buffer,a=this.valueSize,s=t*a+a;let o=this.cumulativeWeight;if(o===0){for(let c=0;c!==a;++c)n[s+c]=n[c];o=e}else{o+=e;const c=e/o;this._mixBufferRegion(n,s,0,c,a)}this.cumulativeWeight=o}accumulateAdditive(t){const e=this.buffer,n=this.valueSize,a=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(e,a,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,n=this.buffer,a=t*e+e,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,c=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const f=e*this._origIndex;this._mixBufferRegion(n,a,f,1-s,e)}o>0&&this._mixBufferRegionAdditive(n,a,this._addIndex*e,1,e);for(let f=e,d=e+e;f!==d;++f)if(n[f]!==n[f+e]){c.setValue(n,a);break}}saveOriginalState(){const t=this.binding,e=this.buffer,n=this.valueSize,a=n*this._origIndex;t.getValue(e,a);for(let s=n,o=a;s!==o;++s)e[s]=e[a+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=this.valueSize*3;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}_select(t,e,n,a,s){if(a>=.5)for(let o=0;o!==s;++o)t[e+o]=t[n+o]}_slerp(t,e,n,a){or.slerpFlat(t,e,t,e,t,n,a)}_slerpAdditive(t,e,n,a,s){const o=this._workIndex*s;or.multiplyQuaternionsFlat(t,o,t,e,t,n),or.slerpFlat(t,e,t,e,t,o,a)}_lerp(t,e,n,a,s){const o=1-a;for(let c=0;c!==s;++c){const f=e+c;t[f]=t[f]*o+t[n+c]*a}}_lerpAdditive(t,e,n,a,s){for(let o=0;o!==s;++o){const c=e+o;t[c]=t[c]+t[n+o]*a}}}const dM="\\[\\]\\.:\\/",oI=new RegExp("["+dM+"]","g"),pM="[^"+dM+"]",lI="[^"+dM.replace("\\.","")+"]",cI=/((?:WC+[\/:])*)/.source.replace("WC",pM),uI=/(WCOD+)?/.source.replace("WCOD",lI),fI=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",pM),hI=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",pM),dI=new RegExp("^"+cI+uI+fI+hI+"$"),pI=["material","materials","bones","map"];class mI{constructor(t,e,n){const a=n||oi.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,a)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,a=this._bindings[n];a!==void 0&&a.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let a=this._targetGroup.nCachedObjects_,s=n.length;a!==s;++a)n[a].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}class oi{constructor(t,e,n){this.path=e,this.parsedPath=n||oi.parseTrackName(e),this.node=oi.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new oi.Composite(t,e,n):new oi(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(oI,"")}static parseTrackName(t){const e=dI.exec(t);if(e===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},a=n.nodeName&&n.nodeName.lastIndexOf(".");if(a!==void 0&&a!==-1){const s=n.nodeName.substring(a+1);pI.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,a),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(e===void 0||e===""||e==="."||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(n!==void 0)return n}if(t.children){const n=function(s){for(let o=0;o<s.length;o++){const c=s[o];if(c.name===e||c.uuid===e)return c;const f=n(c.children);if(f)return f}return null},a=n(t.children);if(a)return a}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let a=0,s=n.length;a!==s;++a)t[e++]=n[a]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let a=0,s=n.length;a!==s;++a)n[a]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let a=0,s=n.length;a!==s;++a)n[a]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let a=0,s=n.length;a!==s;++a)n[a]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,a=e.propertyName;let s=e.propertyIndex;if(t||(t=oi.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){Ie("PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let d=e.objectIndex;switch(n){case"materials":if(!t.material){rn("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){rn("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){rn("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let g=0;g<t.length;g++)if(t[g].name===d){d=g;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){rn("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){rn("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[n]===void 0){rn("PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[n]}if(d!==void 0){if(t[d]===void 0){rn("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[d]}}const o=t[a];if(o===void 0){const d=e.nodeName;rn("PropertyBinding: Trying to update property for track: "+d+"."+a+" but it wasn't found.",t);return}let c=this.Versioning.None;this.targetObject=t,t.isMaterial===!0?c=this.Versioning.NeedsUpdate:t.isObject3D===!0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let f=this.BindingType.Direct;if(s!==void 0){if(a==="morphTargetInfluences"){if(!t.geometry){rn("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){rn("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[s]!==void 0&&(s=t.morphTargetDictionary[s])}f=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(f=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(f=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=a;this.getValue=this.GetterByBindingType[f],this.setValue=this.SetterByBindingTypeAndVersioning[f][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}oi.Composite=mI;oi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};oi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};oi.prototype.GetterByBindingType=[oi.prototype._getValue_direct,oi.prototype._getValue_array,oi.prototype._getValue_arrayElement,oi.prototype._getValue_toArray];oi.prototype.SetterByBindingTypeAndVersioning=[[oi.prototype._setValue_direct,oi.prototype._setValue_direct_setNeedsUpdate,oi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[oi.prototype._setValue_array,oi.prototype._setValue_array_setNeedsUpdate,oi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[oi.prototype._setValue_arrayElement,oi.prototype._setValue_arrayElement_setNeedsUpdate,oi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[oi.prototype._setValue_fromArray,oi.prototype._setValue_fromArray_setNeedsUpdate,oi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class gI{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ko(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let n=0,a=arguments.length;n!==a;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}add(){const t=this._objects,e=this._indicesByUUID,n=this._paths,a=this._parsedPaths,s=this._bindings,o=s.length;let c,f=t.length,d=this.nCachedObjects_;for(let g=0,y=arguments.length;g!==y;++g){const x=arguments[g],b=x.uuid;let T=e[b];if(T===void 0){T=f++,e[b]=T,t.push(x);for(let R=0,C=o;R!==C;++R)s[R].push(new oi(x,n[R],a[R]))}else if(T<d){c=t[T];const R=--d,C=t[R];e[C.uuid]=T,t[T]=C,e[b]=R,t[R]=x;for(let w=0,N=o;w!==N;++w){const I=s[w],z=I[R];let F=I[T];I[T]=z,F===void 0&&(F=new oi(x,n[w],a[w])),I[R]=F}}else t[T]!==c&&rn("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=d}remove(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,a=n.length;let s=this.nCachedObjects_;for(let o=0,c=arguments.length;o!==c;++o){const f=arguments[o],d=f.uuid,g=e[d];if(g!==void 0&&g>=s){const y=s++,x=t[y];e[x.uuid]=g,t[g]=x,e[d]=y,t[y]=f;for(let b=0,T=a;b!==T;++b){const R=n[b],C=R[y],w=R[g];R[g]=C,R[y]=w}}}this.nCachedObjects_=s}uncache(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,a=n.length;let s=this.nCachedObjects_,o=t.length;for(let c=0,f=arguments.length;c!==f;++c){const d=arguments[c],g=d.uuid,y=e[g];if(y!==void 0)if(delete e[g],y<s){const x=--s,b=t[x],T=--o,R=t[T];e[b.uuid]=y,t[y]=b,e[R.uuid]=x,t[x]=R,t.pop();for(let C=0,w=a;C!==w;++C){const N=n[C],I=N[x],z=N[T];N[y]=I,N[x]=z,N.pop()}}else{const x=--o,b=t[x];x>0&&(e[b.uuid]=y),t[y]=b,t.pop();for(let T=0,R=a;T!==R;++T){const C=n[T];C[y]=C[x],C.pop()}}}this.nCachedObjects_=s}subscribe_(t,e){const n=this._bindingsIndicesByPath;let a=n[t];const s=this._bindings;if(a!==void 0)return s[a];const o=this._paths,c=this._parsedPaths,f=this._objects,d=f.length,g=this.nCachedObjects_,y=new Array(d);a=s.length,n[t]=a,o.push(t),c.push(e),s.push(y);for(let x=g,b=f.length;x!==b;++x){const T=f[x];y[x]=new oi(T,t,e)}return y}unsubscribe_(t){const e=this._bindingsIndicesByPath,n=e[t];if(n!==void 0){const a=this._paths,s=this._parsedPaths,o=this._bindings,c=o.length-1,f=o[c],d=t[c];e[d]=n,o[n]=f,o.pop(),s[n]=s[c],s.pop(),a[n]=a[c],a.pop()}}}class FR{constructor(t,e,n=null,a=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=a;const s=e.tracks,o=s.length,c=new Array(o),f={endingStart:Yh,endingEnd:Yh};for(let d=0;d!==o;++d){const g=s[d].createInterpolant(null);c[d]=g,g.settings=f}this._interpolantSettings=f,this._interpolants=c,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=DC,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n=!1){if(t.fadeOut(e),this.fadeIn(e),n===!0){const a=this._clip.duration,s=t._clip.duration,o=s/a,c=a/s;t.warp(1,o,e),this.warp(c,1,e)}return this}crossFadeTo(t,e,n=!1){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const a=this._mixer,s=a.time,o=this.timeScale;let c=this._timeScaleInterpolant;c===null&&(c=a._lendControlInterpolant(),this._timeScaleInterpolant=c);const f=c.parameterPositions,d=c.sampleValues;return f[0]=s,f[1]=s+n,d[0]=t/o,d[1]=e/o,this}stopWarping(){const t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,a){if(!this.enabled){this._updateWeight(t);return}const s=this._startTime;if(s!==null){const f=(t-s)*n;f<0||n===0?e=0:(this._startTime=null,e=n*f)}e*=this._updateTimeScale(t);const o=this._updateTime(e),c=this._updateWeight(t);if(c>0){const f=this._interpolants,d=this._propertyBindings;switch(this.blendMode){case B2:for(let g=0,y=f.length;g!==y;++g)f[g].evaluate(o),d[g].accumulateAdditive(c);break;case y1:default:for(let g=0,y=f.length;g!==y;++g)f[g].evaluate(o),d[g].accumulate(a,c)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(n!==null){const a=n.evaluate(t)[0];e*=a,t>n.parameterPositions[1]&&(this.stopFading(),a===0&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const a=n.evaluate(t)[0];e*=a,t>n.parameterPositions[1]&&(this.stopWarping(),e===0?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let a=this.time+t,s=this._loopCount;const o=n===LC;if(t===0)return s===-1?a:o&&(s&1)===1?e-a:a;if(n===RC){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(a>=e)a=e;else if(a<0)a=0;else{this.time=a;break t}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(s===-1&&(t>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),a>=e||a<0){const c=Math.floor(a/e);a-=e*c,s+=Math.abs(c);const f=this.repetitions-s;if(f<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,a=t>0?e:0,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(f===1){const d=t<0;this._setEndings(d,!d,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=a,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:c})}}else this.time=a;if(o&&(s&1)===1)return e-a}return a}_setEndings(t,e,n){const a=this._interpolantSettings;n?(a.endingStart=Zh,a.endingEnd=Zh):(t?a.endingStart=this.zeroSlopeAtStart?Zh:Yh:a.endingStart=a0,e?a.endingEnd=this.zeroSlopeAtEnd?Zh:Yh:a.endingEnd=a0)}_scheduleFading(t,e,n){const a=this._mixer,s=a.time;let o=this._weightInterpolant;o===null&&(o=a._lendControlInterpolant(),this._weightInterpolant=o);const c=o.parameterPositions,f=o.sampleValues;return c[0]=s,f[0]=e,c[1]=s+t,f[1]=n,this}}const vI=new Float32Array(1);class yI extends Hc{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const n=t._localRoot||this._root,a=t._clip.tracks,s=a.length,o=t._propertyBindings,c=t._interpolants,f=n.uuid,d=this._bindingsByRootAndName;let g=d[f];g===void 0&&(g={},d[f]=g);for(let y=0;y!==s;++y){const x=a[y],b=x.name;let T=g[b];if(T!==void 0)++T.referenceCount,o[y]=T;else{if(T=o[y],T!==void 0){T._cacheIndex===null&&(++T.referenceCount,this._addInactiveBinding(T,f,b));continue}const R=e&&e._propertyBindings[y].binding.parsedPath;T=new BR(oi.create(n,b,R),x.ValueTypeName,x.getValueSize()),++T.referenceCount,this._addInactiveBinding(T,f,b),o[y]=T}c[y].resultBuffer=T.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){const n=(t._localRoot||this._root).uuid,a=t._clip.uuid,s=this._actionsByClip[a];this._bindAction(t,s&&s.knownActions[0]),this._addInactiveAction(t,a,n)}const e=t._propertyBindings;for(let n=0,a=e.length;n!==a;++n){const s=e[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let n=0,a=e.length;n!==a;++n){const s=e[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return e!==null&&e<this._nActiveActions}_addInactiveAction(t,e,n){const a=this._actions,s=this._actionsByClip;let o=s[e];if(o===void 0)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,s[e]=o;else{const c=o.knownActions;t._byClipCacheIndex=c.length,c.push(t)}t._cacheIndex=a.length,a.push(t),o.actionByRoot[n]=t}_removeInactiveAction(t){const e=this._actions,n=e[e.length-1],a=t._cacheIndex;n._cacheIndex=a,e[a]=n,e.pop(),t._cacheIndex=null;const s=t._clip.uuid,o=this._actionsByClip,c=o[s],f=c.knownActions,d=f[f.length-1],g=t._byClipCacheIndex;d._byClipCacheIndex=g,f[g]=d,f.pop(),t._byClipCacheIndex=null;const y=c.actionByRoot,x=(t._localRoot||this._root).uuid;delete y[x],f.length===0&&delete o[s],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let n=0,a=e.length;n!==a;++n){const s=e[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(t){const e=this._actions,n=t._cacheIndex,a=this._nActiveActions++,s=e[a];t._cacheIndex=a,e[a]=t,s._cacheIndex=n,e[n]=s}_takeBackAction(t){const e=this._actions,n=t._cacheIndex,a=--this._nActiveActions,s=e[a];t._cacheIndex=a,e[a]=t,s._cacheIndex=n,e[n]=s}_addInactiveBinding(t,e,n){const a=this._bindingsByRootAndName,s=this._bindings;let o=a[e];o===void 0&&(o={},a[e]=o),o[n]=t,t._cacheIndex=s.length,s.push(t)}_removeInactiveBinding(t){const e=this._bindings,n=t.binding,a=n.rootNode.uuid,s=n.path,o=this._bindingsByRootAndName,c=o[a],f=e[e.length-1],d=t._cacheIndex;f._cacheIndex=d,e[d]=f,e.pop(),delete c[s],Object.keys(c).length===0&&delete o[a]}_lendBinding(t){const e=this._bindings,n=t._cacheIndex,a=this._nActiveBindings++,s=e[a];t._cacheIndex=a,e[a]=t,s._cacheIndex=n,e[n]=s}_takeBackBinding(t){const e=this._bindings,n=t._cacheIndex,a=--this._nActiveBindings,s=e[a];t._cacheIndex=a,e[a]=t,s._cacheIndex=n,e[n]=s}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return n===void 0&&(n=new sM(new Float32Array(2),new Float32Array(2),1,vI),n.__cacheIndex=e,t[e]=n),n}_takeBackControlInterpolant(t){const e=this._controlInterpolants,n=t.__cacheIndex,a=--this._nActiveControlInterpolants,s=e[a];t.__cacheIndex=a,e[a]=t,s.__cacheIndex=n,e[n]=s}clipAction(t,e,n){const a=e||this._root,s=a.uuid;let o=typeof t=="string"?p0.findByName(a,t):t;const c=o!==null?o.uuid:t,f=this._actionsByClip[c];let d=null;if(n===void 0&&(o!==null?n=o.blendMode:n=y1),f!==void 0){const y=f.actionByRoot[s];if(y!==void 0&&y.blendMode===n)return y;d=f.knownActions[0],o===null&&(o=d._clip)}if(o===null)return null;const g=new FR(this,o,e,n);return this._bindAction(g,d),this._addInactiveAction(g,c,s),g}existingAction(t,e){const n=e||this._root,a=n.uuid,s=typeof t=="string"?p0.findByName(n,t):t,o=s?s.uuid:t,c=this._actionsByClip[o];return c!==void 0&&c.actionByRoot[a]||null}stopAllAction(){const t=this._actions,e=this._nActiveActions;for(let n=e-1;n>=0;--n)t[n].stop();return this}update(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,a=this.time+=t,s=Math.sign(t),o=this._accuIndex^=1;for(let d=0;d!==n;++d)e[d]._update(a,t,s,o);const c=this._bindings,f=this._nActiveBindings;for(let d=0;d!==f;++d)c[d].apply(o);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,n=t.uuid,a=this._actionsByClip,s=a[n];if(s!==void 0){const o=s.knownActions;for(let c=0,f=o.length;c!==f;++c){const d=o[c];this._deactivateAction(d);const g=d._cacheIndex,y=e[e.length-1];d._cacheIndex=null,d._byClipCacheIndex=null,y._cacheIndex=g,e[g]=y,e.pop(),this._removeInactiveBindingsForAction(d)}delete a[n]}}uncacheRoot(t){const e=t.uuid,n=this._actionsByClip;for(const o in n){const c=n[o].actionByRoot,f=c[e];f!==void 0&&(this._deactivateAction(f),this._removeInactiveAction(f))}const a=this._bindingsByRootAndName,s=a[e];if(s!==void 0)for(const o in s){const c=s[o];c.restoreOriginalState(),this._removeInactiveBinding(c)}}uncacheAction(t,e){const n=this.existingAction(t,e);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class _I extends k2{constructor(t=1,e=1,n=1,a={}){super(t,e,a),this.isRenderTarget3D=!0,this.depth=n,this.texture=new b1(null,t,e,n),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class mM{constructor(t){this.value=t}clone(){return new mM(this.value.clone===void 0?this.value:this.value.clone())}}let xI=0;class SI extends Hc{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:xI++}),this.name="",this.usage=r0,this.uniforms=[]}add(t){return this.uniforms.push(t),this}remove(t){const e=this.uniforms.indexOf(t);return e!==-1&&this.uniforms.splice(e,1),this}setName(t){return this.name=t,this}setUsage(t){return this.usage=t,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(t){this.name=t.name,this.usage=t.usage;const e=t.uniforms;this.uniforms.length=0;for(let n=0,a=e.length;n<a;n++){const s=Array.isArray(e[n])?e[n]:[e[n]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class bI extends E1{constructor(t,e,n=1){super(t,e),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}class MI{constructor(t,e,n,a,s,o=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=t,this.type=e,this.itemSize=n,this.elementSize=a,this.count=s,this.normalized=o,this.version=0}set needsUpdate(t){t===!0&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,e){return this.type=t,this.elementSize=e,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}}const uE=new gn;class kR{constructor(t,e,n=0,a=1/0){this.ray=new dd(t,e),this.near=n,this.far=a,this.camera=null,this.layers=new Xp,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):rn("Raycaster: Unsupported camera type: "+e.type)}setFromXRController(t){return uE.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(uE),this}intersectObject(t,e=!0,n=[]){return Ub(t,this,n,e),n.sort(fE),n}intersectObjects(t,e=!0,n=[]){for(let a=0,s=t.length;a<s;a++)Ub(t[a],this,n,e);return n.sort(fE),n}}function fE(i,t){return i.distance-t.distance}function Ub(i,t,e,n){let a=!0;if(i.layers.test(t.layers)&&i.raycast(t,e)===!1&&(a=!1),a===!0&&n===!0){const s=i.children;for(let o=0,c=s.length;o<c;o++)Ub(s[o],t,e,!0)}}class TI{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(t){this._document=t,t.hidden!==void 0&&(this._pageVisibilityHandler=AI.bind(this),t.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(t){return this._timescale=t,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(t){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(t!==void 0?t:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function AI(){this._document.hidden===!1&&this.reset()}class Ib{constructor(t=1,e=0,n=0){this.radius=t,this.phi=e,this.theta=n}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=mn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(mn(e/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class EI{constructor(t=1,e=0,n=0){this.radius=t,this.theta=e,this.y=n}set(t,e,n){return this.radius=t,this.theta=e,this.y=n,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}clone(){return new this.constructor().copy(this)}}class gM{constructor(t,e,n,a){gM.prototype.isMatrix2=!0,this.elements=[1,0,0,1],t!==void 0&&this.set(t,e,n,a)}identity(){return this.set(1,0,0,1),this}fromArray(t,e=0){for(let n=0;n<4;n++)this.elements[n]=t[n+e];return this}set(t,e,n,a){const s=this.elements;return s[0]=t,s[2]=e,s[1]=n,s[3]=a,this}}const hE=new de;class wI{constructor(t=new de(1/0,1/0),e=new de(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=hE.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,hE).distanceTo(t)}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const dE=new pt,Sy=new pt,bp=new pt,Mp=new pt,wS=new pt,CI=new pt,RI=new pt;class DI{constructor(t=new pt,e=new pt){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){dE.subVectors(t,this.start),Sy.subVectors(this.end,this.start);const n=Sy.dot(Sy);let s=Sy.dot(dE)/n;return e&&(s=mn(s,0,1)),s}closestPointToPoint(t,e,n){const a=this.closestPointToPointParameter(t,e);return this.delta(n).multiplyScalar(a).add(this.start)}distanceSqToLine3(t,e=CI,n=RI){const a=10000000000000001e-32;let s,o;const c=this.start,f=t.start,d=this.end,g=t.end;bp.subVectors(d,c),Mp.subVectors(g,f),wS.subVectors(c,f);const y=bp.dot(bp),x=Mp.dot(Mp),b=Mp.dot(wS);if(y<=a&&x<=a)return e.copy(c),n.copy(f),e.sub(n),e.dot(e);if(y<=a)s=0,o=b/x,o=mn(o,0,1);else{const T=bp.dot(wS);if(x<=a)o=0,s=mn(-T/y,0,1);else{const R=bp.dot(Mp),C=y*x-R*R;C!==0?s=mn((R*b-T*x)/C,0,1):s=0,o=(R*s+b)/x,o<0?(o=0,s=mn(-T/y,0,1)):o>1&&(o=1,s=mn((R-T)/y,0,1))}}return e.copy(c).add(bp.multiplyScalar(s)),n.copy(f).add(Mp.multiplyScalar(o)),e.sub(n),e.dot(e)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const pE=new pt;class LI extends li{constructor(t,e){super(),this.light=t,this.matrixAutoUpdate=!1,this.color=e,this.type="SpotLightHelper";const n=new wn,a=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,c=1,f=32;o<f;o++,c++){const d=o/f*Math.PI*2,g=c/f*Math.PI*2;a.push(Math.cos(d),Math.sin(d),1,Math.cos(g),Math.sin(g),1)}n.setAttribute("position",new Ze(a,3));const s=new Hr({fog:!1,toneMapped:!1});this.cone=new Gc(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),pE.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(pE),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Df=new pt,by=new gn,CS=new gn;class OI extends Gc{constructor(t){const e=VR(t),n=new wn,a=[],s=[];for(let d=0;d<e.length;d++){const g=e[d];g.parent&&g.parent.isBone&&(a.push(0,0,0),a.push(0,0,0),s.push(0,0,0),s.push(0,0,0))}n.setAttribute("position",new Ze(a,3)),n.setAttribute("color",new Ze(s,3));const o=new Hr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,o),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1;const c=new He(255),f=new He(65280);this.setColors(c,f)}updateMatrixWorld(t){const e=this.bones,n=this.geometry,a=n.getAttribute("position");CS.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<e.length;s++){const c=e[s];c.parent&&c.parent.isBone&&(by.multiplyMatrices(CS,c.matrixWorld),Df.setFromMatrixPosition(by),a.setXYZ(o,Df.x,Df.y,Df.z),by.multiplyMatrices(CS,c.parent.matrixWorld),Df.setFromMatrixPosition(by),a.setXYZ(o+1,Df.x,Df.y,Df.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}setColors(t,e){const a=this.geometry.getAttribute("color");for(let s=0;s<a.count;s+=2)a.setXYZ(s,t.r,t.g,t.b),a.setXYZ(s+1,e.r,e.g,e.b);return a.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function VR(i){const t=[];i.isBone===!0&&t.push(i);for(let e=0;e<i.children.length;e++)t.push(...VR(i.children[e]));return t}class NI extends ma{constructor(t,e,n){const a=new L0(e,4,2),s=new zu({wireframe:!0,fog:!1,toneMapped:!1});super(a,s),this.light=t,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const UI=new pt,mE=new He,gE=new He;class II extends li{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const a=new D0(e);a.rotateY(Math.PI*.5),this.material=new zu({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=a.getAttribute("position"),o=new Float32Array(s.count*3);a.setAttribute("color",new Pi(o,3)),this.add(new ma(a,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");mE.copy(this.light.color),gE.copy(this.light.groundColor);for(let n=0,a=e.count;n<a;n++){const s=n<a/2?mE:gE;e.setXYZ(n,s.r,s.g,s.b)}e.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),t.lookAt(UI.setFromMatrixPosition(this.light.matrixWorld).negate())}}class PI extends Gc{constructor(t=10,e=10,n=4473924,a=8947848){n=new He(n),a=new He(a);const s=e/2,o=t/e,c=t/2,f=[],d=[];for(let x=0,b=0,T=-c;x<=e;x++,T+=o){f.push(-c,0,T,c,0,T),f.push(T,0,-c,T,0,c);const R=x===s?n:a;R.toArray(d,b),b+=3,R.toArray(d,b),b+=3,R.toArray(d,b),b+=3,R.toArray(d,b),b+=3}const g=new wn;g.setAttribute("position",new Ze(f,3)),g.setAttribute("color",new Ze(d,3));const y=new Hr({vertexColors:!0,toneMapped:!1});super(g,y),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class zI extends Gc{constructor(t=10,e=16,n=8,a=64,s=4473924,o=8947848){s=new He(s),o=new He(o);const c=[],f=[];if(e>1)for(let y=0;y<e;y++){const x=y/e*(Math.PI*2),b=Math.sin(x)*t,T=Math.cos(x)*t;c.push(0,0,0),c.push(b,0,T);const R=y&1?s:o;f.push(R.r,R.g,R.b),f.push(R.r,R.g,R.b)}for(let y=0;y<n;y++){const x=y&1?s:o,b=t-t/n*y;for(let T=0;T<a;T++){let R=T/a*(Math.PI*2),C=Math.sin(R)*b,w=Math.cos(R)*b;c.push(C,0,w),f.push(x.r,x.g,x.b),R=(T+1)/a*(Math.PI*2),C=Math.sin(R)*b,w=Math.cos(R)*b,c.push(C,0,w),f.push(x.r,x.g,x.b)}}const d=new wn;d.setAttribute("position",new Ze(c,3)),d.setAttribute("color",new Ze(f,3));const g=new Hr({vertexColors:!0,toneMapped:!1});super(d,g),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const vE=new pt,My=new pt,yE=new pt;class BI extends li{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",e===void 0&&(e=1);let a=new wn;a.setAttribute("position",new Ze([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const s=new Hr({fog:!1,toneMapped:!1});this.lightPlane=new Vf(a,s),this.add(this.lightPlane),a=new wn,a.setAttribute("position",new Ze([0,0,0,0,0,1],3)),this.targetLine=new Vf(a,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),vE.setFromMatrixPosition(this.light.matrixWorld),My.setFromMatrixPosition(this.light.target.matrixWorld),yE.subVectors(My,vE),this.lightPlane.lookAt(My),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(My),this.targetLine.scale.z=yE.length()}}const Ty=new pt,Ea=new M1;class FI extends Gc{constructor(t){const e=new wn,n=new Hr({color:16777215,vertexColors:!0,toneMapped:!1}),a=[],s=[],o={};c("n1","n2"),c("n2","n4"),c("n4","n3"),c("n3","n1"),c("f1","f2"),c("f2","f4"),c("f4","f3"),c("f3","f1"),c("n1","f1"),c("n2","f2"),c("n3","f3"),c("n4","f4"),c("p","n1"),c("p","n2"),c("p","n3"),c("p","n4"),c("u1","u2"),c("u2","u3"),c("u3","u1"),c("c","t"),c("p","c"),c("cn1","cn2"),c("cn3","cn4"),c("cf1","cf2"),c("cf3","cf4");function c(T,R){f(T),f(R)}function f(T){a.push(0,0,0),s.push(0,0,0),o[T]===void 0&&(o[T]=[]),o[T].push(a.length/3-1)}e.setAttribute("position",new Ze(a,3)),e.setAttribute("color",new Ze(s,3)),super(e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const d=new He(16755200),g=new He(16711680),y=new He(43775),x=new He(16777215),b=new He(3355443);this.setColors(d,g,y,x,b)}setColors(t,e,n,a,s){const c=this.geometry.getAttribute("color");return c.setXYZ(0,t.r,t.g,t.b),c.setXYZ(1,t.r,t.g,t.b),c.setXYZ(2,t.r,t.g,t.b),c.setXYZ(3,t.r,t.g,t.b),c.setXYZ(4,t.r,t.g,t.b),c.setXYZ(5,t.r,t.g,t.b),c.setXYZ(6,t.r,t.g,t.b),c.setXYZ(7,t.r,t.g,t.b),c.setXYZ(8,t.r,t.g,t.b),c.setXYZ(9,t.r,t.g,t.b),c.setXYZ(10,t.r,t.g,t.b),c.setXYZ(11,t.r,t.g,t.b),c.setXYZ(12,t.r,t.g,t.b),c.setXYZ(13,t.r,t.g,t.b),c.setXYZ(14,t.r,t.g,t.b),c.setXYZ(15,t.r,t.g,t.b),c.setXYZ(16,t.r,t.g,t.b),c.setXYZ(17,t.r,t.g,t.b),c.setXYZ(18,t.r,t.g,t.b),c.setXYZ(19,t.r,t.g,t.b),c.setXYZ(20,t.r,t.g,t.b),c.setXYZ(21,t.r,t.g,t.b),c.setXYZ(22,t.r,t.g,t.b),c.setXYZ(23,t.r,t.g,t.b),c.setXYZ(24,e.r,e.g,e.b),c.setXYZ(25,e.r,e.g,e.b),c.setXYZ(26,e.r,e.g,e.b),c.setXYZ(27,e.r,e.g,e.b),c.setXYZ(28,e.r,e.g,e.b),c.setXYZ(29,e.r,e.g,e.b),c.setXYZ(30,e.r,e.g,e.b),c.setXYZ(31,e.r,e.g,e.b),c.setXYZ(32,n.r,n.g,n.b),c.setXYZ(33,n.r,n.g,n.b),c.setXYZ(34,n.r,n.g,n.b),c.setXYZ(35,n.r,n.g,n.b),c.setXYZ(36,n.r,n.g,n.b),c.setXYZ(37,n.r,n.g,n.b),c.setXYZ(38,a.r,a.g,a.b),c.setXYZ(39,a.r,a.g,a.b),c.setXYZ(40,s.r,s.g,s.b),c.setXYZ(41,s.r,s.g,s.b),c.setXYZ(42,s.r,s.g,s.b),c.setXYZ(43,s.r,s.g,s.b),c.setXYZ(44,s.r,s.g,s.b),c.setXYZ(45,s.r,s.g,s.b),c.setXYZ(46,s.r,s.g,s.b),c.setXYZ(47,s.r,s.g,s.b),c.setXYZ(48,s.r,s.g,s.b),c.setXYZ(49,s.r,s.g,s.b),c.needsUpdate=!0,this}update(){const t=this.geometry,e=this.pointMap,n=1,a=1;let s,o;if(Ea.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)s=1,o=0;else if(this.camera.coordinateSystem===Fo)s=-1,o=1;else if(this.camera.coordinateSystem===jp)s=0,o=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);za("c",e,t,Ea,0,0,s),za("t",e,t,Ea,0,0,o),za("n1",e,t,Ea,-n,-a,s),za("n2",e,t,Ea,n,-a,s),za("n3",e,t,Ea,-n,a,s),za("n4",e,t,Ea,n,a,s),za("f1",e,t,Ea,-n,-a,o),za("f2",e,t,Ea,n,-a,o),za("f3",e,t,Ea,-n,a,o),za("f4",e,t,Ea,n,a,o),za("u1",e,t,Ea,n*.7,a*1.1,s),za("u2",e,t,Ea,-n*.7,a*1.1,s),za("u3",e,t,Ea,0,a*2,s),za("cf1",e,t,Ea,-n,0,o),za("cf2",e,t,Ea,n,0,o),za("cf3",e,t,Ea,0,-a,o),za("cf4",e,t,Ea,0,a,o),za("cn1",e,t,Ea,-n,0,s),za("cn2",e,t,Ea,n,0,s),za("cn3",e,t,Ea,0,-a,s),za("cn4",e,t,Ea,0,a,s),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function za(i,t,e,n,a,s,o){Ty.set(a,s,o).unproject(n);const c=t[i];if(c!==void 0){const f=e.getAttribute("position");for(let d=0,g=c.length;d<g;d++)f.setXYZ(c[d],Ty.x,Ty.y,Ty.z)}}const Ay=new Ts;class kI extends Gc{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=new Float32Array(24),s=new wn;s.setIndex(new Pi(n,1)),s.setAttribute("position",new Pi(a,3)),super(s,new Hr({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&Ay.setFromObject(this.object),Ay.isEmpty())return;const t=Ay.min,e=Ay.max,n=this.geometry.attributes.position,a=n.array;a[0]=e.x,a[1]=e.y,a[2]=e.z,a[3]=t.x,a[4]=e.y,a[5]=e.z,a[6]=t.x,a[7]=t.y,a[8]=e.z,a[9]=e.x,a[10]=t.y,a[11]=e.z,a[12]=e.x,a[13]=e.y,a[14]=t.z,a[15]=t.x,a[16]=e.y,a[17]=t.z,a[18]=t.x,a[19]=t.y,a[20]=t.z,a[21]=e.x,a[22]=t.y,a[23]=t.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t,e){return super.copy(t,e),this.object=t.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class VI extends Gc{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new wn;s.setIndex(new Pi(n,1)),s.setAttribute("position",new Ze(a,3)),super(s,new Hr({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}}class HI extends Vf{constructor(t,e=1,n=16776960){const a=n,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new wn;o.setAttribute("position",new Ze(s,3)),o.computeBoundingSphere(),super(o,new Hr({color:a,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=e;const c=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],f=new wn;f.setAttribute("position",new Ze(c,3)),f.computeBoundingSphere(),this.add(new ma(f,new zu({color:a,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const _E=new pt;let Ey,RS;class GI extends li{constructor(t=new pt(0,0,1),e=new pt(0,0,0),n=1,a=16776960,s=n*.2,o=s*.2){super(),this.type="ArrowHelper",Ey===void 0&&(Ey=new wn,Ey.setAttribute("position",new Ze([0,0,0,0,1,0],3)),RS=new R0(.5,1,5,1),RS.translate(0,-.5,0)),this.position.copy(e),this.line=new Vf(Ey,new Hr({color:a,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ma(RS,new zu({color:a,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,s,o)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{_E.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(_E,e)}}setLength(t,e=t*.2,n=e*.2){this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class jI extends Gc{constructor(t=1){const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],a=new wn;a.setAttribute("position",new Ze(e,3)),a.setAttribute("color",new Ze(n,3));const s=new Hr({vertexColors:!0,toneMapped:!1});super(a,s),this.type="AxesHelper"}setColors(t,e,n){const a=new He,s=this.geometry.attributes.color.array;return a.set(t),a.toArray(s,0),a.toArray(s,3),a.set(e),a.toArray(s,6),a.toArray(s,9),a.set(n),a.toArray(s,12),a.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class WI{constructor(){this.type="ShapePath",this.color=new He,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new X_,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,n,a){return this.currentPath.quadraticCurveTo(t,e,n,a),this}bezierCurveTo(t,e,n,a,s,o){return this.currentPath.bezierCurveTo(t,e,n,a,s,o),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function e(w){const N=[];for(let I=0,z=w.length;I<z;I++){const F=w[I],H=new ed;H.curves=F.curves,N.push(H)}return N}function n(w,N){const I=N.length;let z=!1;for(let F=I-1,H=0;H<I;F=H++){let q=N[F],Z=N[H],B=Z.x-q.x,V=Z.y-q.y;if(Math.abs(V)>Number.EPSILON){if(V<0&&(q=N[H],B=-B,Z=N[F],V=-V),w.y<q.y||w.y>Z.y)continue;if(w.y===q.y){if(w.x===q.x)return!0}else{const Q=V*(w.x-q.x)-B*(w.y-q.y);if(Q===0)return!0;if(Q<0)continue;z=!z}}else{if(w.y!==q.y)continue;if(Z.x<=w.x&&w.x<=q.x||q.x<=w.x&&w.x<=Z.x)return!0}}return z}const a=Ql.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,c,f;const d=[];if(s.length===1)return c=s[0],f=new ed,f.curves=c.curves,d.push(f),d;let g=!a(s[0].getPoints());g=t?!g:g;const y=[],x=[];let b=[],T=0,R;x[T]=void 0,b[T]=[];for(let w=0,N=s.length;w<N;w++)c=s[w],R=c.getPoints(),o=a(R),o=t?!o:o,o?(!g&&x[T]&&T++,x[T]={s:new ed,p:R},x[T].s.curves=c.curves,g&&T++,b[T]=[]):b[T].push({h:c,p:R[0]});if(!x[0])return e(s);if(x.length>1){let w=!1,N=0;for(let I=0,z=x.length;I<z;I++)y[I]=[];for(let I=0,z=x.length;I<z;I++){const F=b[I];for(let H=0;H<F.length;H++){const q=F[H];let Z=!0;for(let B=0;B<x.length;B++)n(q.p,x[B].p)&&(I!==B&&N++,Z?(Z=!1,y[B].push(q)):w=!0);Z&&y[I].push(q)}}N>0&&w===!1&&(b=y)}let C;for(let w=0,N=x.length;w<N;w++){f=x[w].s,d.push(f),C=b[w];for(let I=0,z=C.length;I<z;I++)f.holes.push(C[I].h)}return d}}class qI extends Hc{constructor(t,e=null){super(),this.object=t,this.domElement=e,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(t){if(t===void 0){Ie("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=t}disconnect(){}dispose(){}update(){}}function XI(i,t){const e=i.image&&i.image.width?i.image.width/i.image.height:1;return e>t?(i.repeat.x=1,i.repeat.y=e/t,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=t/e,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function YI(i,t){const e=i.image&&i.image.width?i.image.width/i.image.height:1;return e>t?(i.repeat.x=t/e,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=e/t,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function ZI(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function Pb(i,t,e,n){const a=KI(n);switch(e){case P2:return i*t;case m1:return i*t/a.components*a.byteLength;case E0:return i*t/a.components*a.byteLength;case rd:return i*t*2/a.components*a.byteLength;case g1:return i*t*2/a.components*a.byteLength;case z2:return i*t*3/a.components*a.byteLength;case sr:return i*t*4/a.components*a.byteLength;case v1:return i*t*4/a.components*a.byteLength;case Bg:case Fg:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*8;case kg:case Vg:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case h_:case p_:return Math.max(i,16)*Math.max(t,8)/4;case f_:case d_:return Math.max(i,8)*Math.max(t,8)/2;case m_:case g_:case y_:case __:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*8;case v_:case x_:case S_:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case b_:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case M_:return Math.floor((i+4)/5)*Math.floor((t+3)/4)*16;case T_:return Math.floor((i+4)/5)*Math.floor((t+4)/5)*16;case A_:return Math.floor((i+5)/6)*Math.floor((t+4)/5)*16;case E_:return Math.floor((i+5)/6)*Math.floor((t+5)/6)*16;case w_:return Math.floor((i+7)/8)*Math.floor((t+4)/5)*16;case C_:return Math.floor((i+7)/8)*Math.floor((t+5)/6)*16;case R_:return Math.floor((i+7)/8)*Math.floor((t+7)/8)*16;case D_:return Math.floor((i+9)/10)*Math.floor((t+4)/5)*16;case L_:return Math.floor((i+9)/10)*Math.floor((t+5)/6)*16;case O_:return Math.floor((i+9)/10)*Math.floor((t+7)/8)*16;case N_:return Math.floor((i+9)/10)*Math.floor((t+9)/10)*16;case U_:return Math.floor((i+11)/12)*Math.floor((t+9)/10)*16;case I_:return Math.floor((i+11)/12)*Math.floor((t+11)/12)*16;case P_:case z_:case B_:return Math.ceil(i/4)*Math.ceil(t/4)*16;case F_:case k_:return Math.ceil(i/4)*Math.ceil(t/4)*8;case V_:case H_:return Math.ceil(i/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${e} format.`)}function KI(i){switch(i){case Br:case O2:return{byteLength:1,components:1};case Hp:case N2:case tc:return{byteLength:2,components:1};case d1:case p1:return{byteLength:2,components:4};case dl:case h1:case ar:return{byteLength:4,components:1};case U2:case I2:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}class QI{static contain(t,e){return XI(t,e)}static cover(t,e){return YI(t,e)}static fill(t){return ZI(t)}static getByteLength(t,e,n,a){return Pb(t,e,n,a)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:c1}}));typeof window<"u"&&(window.__THREE__?Ie("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=c1);function HR(){let i=null,t=!1,e=null,n=null;function a(s,o){e(s,o),n=i.requestAnimationFrame(a)}return{start:function(){t!==!0&&e!==null&&(n=i.requestAnimationFrame(a),t=!0)},stop:function(){i.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(s){e=s},setContext:function(s){i=s}}}function JI(i){const t=new WeakMap;function e(c,f){const d=c.array,g=c.usage,y=d.byteLength,x=i.createBuffer();i.bindBuffer(f,x),i.bufferData(f,d,g),c.onUploadCallback();let b;if(d instanceof Float32Array)b=i.FLOAT;else if(typeof Float16Array<"u"&&d instanceof Float16Array)b=i.HALF_FLOAT;else if(d instanceof Uint16Array)c.isFloat16BufferAttribute?b=i.HALF_FLOAT:b=i.UNSIGNED_SHORT;else if(d instanceof Int16Array)b=i.SHORT;else if(d instanceof Uint32Array)b=i.UNSIGNED_INT;else if(d instanceof Int32Array)b=i.INT;else if(d instanceof Int8Array)b=i.BYTE;else if(d instanceof Uint8Array)b=i.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)b=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:x,type:b,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version,size:y}}function n(c,f,d){const g=f.array,y=f.updateRanges;if(i.bindBuffer(d,c),y.length===0)i.bufferSubData(d,0,g);else{y.sort((b,T)=>b.start-T.start);let x=0;for(let b=1;b<y.length;b++){const T=y[x],R=y[b];R.start<=T.start+T.count+1?T.count=Math.max(T.count,R.start+R.count-T.start):(++x,y[x]=R)}y.length=x+1;for(let b=0,T=y.length;b<T;b++){const R=y[b];i.bufferSubData(d,R.start*g.BYTES_PER_ELEMENT,g,R.start,R.count)}f.clearUpdateRanges()}f.onUploadCallback()}function a(c){return c.isInterleavedBufferAttribute&&(c=c.data),t.get(c)}function s(c){c.isInterleavedBufferAttribute&&(c=c.data);const f=t.get(c);f&&(i.deleteBuffer(f.buffer),t.delete(c))}function o(c,f){if(c.isInterleavedBufferAttribute&&(c=c.data),c.isGLBufferAttribute){const g=t.get(c);(!g||g.version<c.version)&&t.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}const d=t.get(c);if(d===void 0)t.set(c,e(c,f));else if(d.version<c.version){if(d.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(d.buffer,c,f),d.version=c.version}}return{get:a,remove:s,update:o}}var $I=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,tP=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,eP=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,nP=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,iP=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,aP=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,sP=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,rP=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,oP=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,lP=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,cP=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,uP=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,fP=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,hP=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,dP=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,pP=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,mP=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,gP=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,vP=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,yP=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,_P=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,xP=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,SP=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,bP=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,MP=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,TP=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,AP=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,EP=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,wP=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,CP=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,RP="gl_FragColor = linearToOutputTexel( gl_FragColor );",DP=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,LP=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,OP=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,NP=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,UP=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,IP=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,PP=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,zP=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,BP=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,FP=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,kP=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,VP=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,HP=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,GP=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,jP=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,WP=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,qP=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,XP=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,YP=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,ZP=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,KP=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.diffuseContribution = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.metalness = metalnessFactor;
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor;
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = vec3( 0.04 );
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.0001, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,QP=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	vec3 diffuseContribution;
	vec3 specularColor;
	vec3 specularColorBlended;
	float roughness;
	float metalness;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
		vec3 iridescenceFresnelDielectric;
		vec3 iridescenceFresnelMetallic;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return v;
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColorBlended;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float rInv = 1.0 / ( roughness + 0.1 );
	float a = -1.9362 + 1.0678 * roughness + 0.4573 * r2 - 0.8469 * rInv;
	float b = -0.6014 + 0.5538 * roughness - 0.4670 * r2 - 0.1255 * rInv;
	float DG = exp( a * dotNV + b );
	return saturate( DG );
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = texture2D( dfgLUT, vec2( material.roughness, dotNV ) ).rg;
	vec2 dfgL = texture2D( dfgLUT, vec2( material.roughness, dotNL ) ).rg;
	vec3 FssEss_V = material.specularColorBlended * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColorBlended * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColorBlended + ( 1.0 - material.specularColorBlended ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColorBlended * t2.x + ( vec3( 1.0 ) - material.specularColorBlended ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseContribution * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
 
 		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
 
 		float sheenAlbedoV = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
 		float sheenAlbedoL = IBLSheenBRDF( geometryNormal, directLight.direction, material.sheenRoughness );
 
 		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * max( sheenAlbedoV, sheenAlbedoL );
 
 		irradiance *= sheenEnergyComp;
 
 	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseContribution );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 diffuse = irradiance * BRDF_Lambert( material.diffuseContribution );
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		diffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectDiffuse += diffuse;
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness ) * RECIPROCAL_PI;
 	#endif
	vec3 singleScatteringDielectric = vec3( 0.0 );
	vec3 multiScatteringDielectric = vec3( 0.0 );
	vec3 singleScatteringMetallic = vec3( 0.0 );
	vec3 multiScatteringMetallic = vec3( 0.0 );
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnelDielectric, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.iridescence, material.iridescenceFresnelMetallic, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscattering( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#endif
	vec3 singleScattering = mix( singleScatteringDielectric, singleScatteringMetallic, material.metalness );
	vec3 multiScattering = mix( multiScatteringDielectric, multiScatteringMetallic, material.metalness );
	vec3 totalScatteringDielectric = singleScatteringDielectric + multiScatteringDielectric;
	vec3 diffuse = material.diffuseContribution * ( 1.0 - totalScatteringDielectric );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	vec3 indirectSpecular = radiance * singleScattering;
	indirectSpecular += multiScattering * cosineWeightedIrradiance;
	vec3 indirectDiffuse = diffuse * cosineWeightedIrradiance;
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		indirectSpecular *= sheenEnergyComp;
		indirectDiffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectSpecular += indirectSpecular;
	reflectedLight.indirectDiffuse += indirectDiffuse;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,JP=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnelDielectric = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceFresnelMetallic = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.diffuseColor );
		material.iridescenceFresnel = mix( material.iridescenceFresnelDielectric, material.iridescenceFresnelMetallic, material.metalness );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS ) && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,$P=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,tz=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,ez=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,nz=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,iz=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,az=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,sz=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,rz=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,oz=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,lz=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,cz=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,uz=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,fz=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,hz=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,dz=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,pz=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,mz=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,gz=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,vz=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,yz=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,_z=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,xz=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Sz=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,bz=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Mz=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Tz=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Az=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Ez=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,wz=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Cz=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Rz=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Dz=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Lz=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Oz=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Nz=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Uz=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#else
			uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#endif
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#else
			uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#endif
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform samplerCubeShadow pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#elif defined( SHADOWMAP_TYPE_BASIC )
			uniform samplerCube pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#endif
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float interleavedGradientNoise( vec2 position ) {
			return fract( 52.9829189 * fract( dot( position, vec2( 0.06711056, 0.00583715 ) ) ) );
		}
		vec2 vogelDiskSample( int sampleIndex, int samplesCount, float phi ) {
			const float goldenAngle = 2.399963229728653;
			float r = sqrt( ( float( sampleIndex ) + 0.5 ) / float( samplesCount ) );
			float theta = float( sampleIndex ) * goldenAngle + phi;
			return vec2( cos( theta ), sin( theta ) ) * r;
		}
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float getShadow( sampler2DShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
				float radius = shadowRadius * texelSize.x;
				float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
				shadow = (
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 0, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 1, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 2, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 3, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 4, 5, phi ) * radius, shadowCoord.z ) )
				) * 0.2;
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#elif defined( SHADOWMAP_TYPE_VSM )
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 distribution = texture2D( shadowMap, shadowCoord.xy ).rg;
				float mean = distribution.x;
				float variance = distribution.y * distribution.y;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					float hard_shadow = step( mean, shadowCoord.z );
				#else
					float hard_shadow = step( shadowCoord.z, mean );
				#endif
				if ( hard_shadow == 1.0 ) {
					shadow = 1.0;
				} else {
					variance = max( variance, 0.0000001 );
					float d = shadowCoord.z - mean;
					float p_max = variance / ( variance + d * d );
					p_max = clamp( ( p_max - 0.3 ) / 0.65, 0.0, 1.0 );
					shadow = max( hard_shadow, p_max );
				}
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#else
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				float depth = texture2D( shadowMap, shadowCoord.xy ).r;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					shadow = step( depth, shadowCoord.z );
				#else
					shadow = step( shadowCoord.z, depth );
				#endif
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#if defined( SHADOWMAP_TYPE_PCF )
	float getPointShadow( samplerCubeShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float texelSize = shadowRadius / shadowMapSize.x;
			vec3 absDir = abs( bd3D );
			vec3 tangent = absDir.x > absDir.z ? vec3( 0.0, 1.0, 0.0 ) : vec3( 1.0, 0.0, 0.0 );
			tangent = normalize( cross( bd3D, tangent ) );
			vec3 bitangent = cross( bd3D, tangent );
			float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
			shadow = (
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 0, 5, phi ).x + bitangent * vogelDiskSample( 0, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 1, 5, phi ).x + bitangent * vogelDiskSample( 1, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 2, 5, phi ).x + bitangent * vogelDiskSample( 2, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 3, 5, phi ).x + bitangent * vogelDiskSample( 3, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 4, 5, phi ).x + bitangent * vogelDiskSample( 4, 5, phi ).y ) * texelSize, dp ) )
			) * 0.2;
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#elif defined( SHADOWMAP_TYPE_BASIC )
	float getPointShadow( samplerCube shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float depth = textureCube( shadowMap, bd3D ).r;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadow = step( depth, dp );
			#else
				shadow = step( dp, depth );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#endif
	#endif
#endif`,Iz=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Pz=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,zz=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0 && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Bz=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Fz=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,kz=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Vz=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Hz=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Gz=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,jz=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Wz=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,qz=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseContribution, material.specularColorBlended, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Xz=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Yz=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Zz=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Kz=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Qz=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Jz=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,$z=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,tB=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,eB=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,nB=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,iB=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,aB=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,sB=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,rB=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,oB=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = vec4( dist, 0.0, 0.0, 1.0 );
}`,lB=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,cB=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,uB=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fB=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,hB=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,dB=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pB=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mB=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gB=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,vB=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,yB=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,_B=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( normalize( normal ) * 0.5 + 0.5, diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,xB=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,SB=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,bB=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,MB=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
 
		outgoingLight = outgoingLight + sheenSpecularDirect + sheenSpecularIndirect;
 
 	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,TB=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,AB=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,EB=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,wB=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,CB=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,RB=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,DB=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,LB=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Ln={alphahash_fragment:$I,alphahash_pars_fragment:tP,alphamap_fragment:eP,alphamap_pars_fragment:nP,alphatest_fragment:iP,alphatest_pars_fragment:aP,aomap_fragment:sP,aomap_pars_fragment:rP,batching_pars_vertex:oP,batching_vertex:lP,begin_vertex:cP,beginnormal_vertex:uP,bsdfs:fP,iridescence_fragment:hP,bumpmap_pars_fragment:dP,clipping_planes_fragment:pP,clipping_planes_pars_fragment:mP,clipping_planes_pars_vertex:gP,clipping_planes_vertex:vP,color_fragment:yP,color_pars_fragment:_P,color_pars_vertex:xP,color_vertex:SP,common:bP,cube_uv_reflection_fragment:MP,defaultnormal_vertex:TP,displacementmap_pars_vertex:AP,displacementmap_vertex:EP,emissivemap_fragment:wP,emissivemap_pars_fragment:CP,colorspace_fragment:RP,colorspace_pars_fragment:DP,envmap_fragment:LP,envmap_common_pars_fragment:OP,envmap_pars_fragment:NP,envmap_pars_vertex:UP,envmap_physical_pars_fragment:WP,envmap_vertex:IP,fog_vertex:PP,fog_pars_vertex:zP,fog_fragment:BP,fog_pars_fragment:FP,gradientmap_pars_fragment:kP,lightmap_pars_fragment:VP,lights_lambert_fragment:HP,lights_lambert_pars_fragment:GP,lights_pars_begin:jP,lights_toon_fragment:qP,lights_toon_pars_fragment:XP,lights_phong_fragment:YP,lights_phong_pars_fragment:ZP,lights_physical_fragment:KP,lights_physical_pars_fragment:QP,lights_fragment_begin:JP,lights_fragment_maps:$P,lights_fragment_end:tz,logdepthbuf_fragment:ez,logdepthbuf_pars_fragment:nz,logdepthbuf_pars_vertex:iz,logdepthbuf_vertex:az,map_fragment:sz,map_pars_fragment:rz,map_particle_fragment:oz,map_particle_pars_fragment:lz,metalnessmap_fragment:cz,metalnessmap_pars_fragment:uz,morphinstance_vertex:fz,morphcolor_vertex:hz,morphnormal_vertex:dz,morphtarget_pars_vertex:pz,morphtarget_vertex:mz,normal_fragment_begin:gz,normal_fragment_maps:vz,normal_pars_fragment:yz,normal_pars_vertex:_z,normal_vertex:xz,normalmap_pars_fragment:Sz,clearcoat_normal_fragment_begin:bz,clearcoat_normal_fragment_maps:Mz,clearcoat_pars_fragment:Tz,iridescence_pars_fragment:Az,opaque_fragment:Ez,packing:wz,premultiplied_alpha_fragment:Cz,project_vertex:Rz,dithering_fragment:Dz,dithering_pars_fragment:Lz,roughnessmap_fragment:Oz,roughnessmap_pars_fragment:Nz,shadowmap_pars_fragment:Uz,shadowmap_pars_vertex:Iz,shadowmap_vertex:Pz,shadowmask_pars_fragment:zz,skinbase_vertex:Bz,skinning_pars_vertex:Fz,skinning_vertex:kz,skinnormal_vertex:Vz,specularmap_fragment:Hz,specularmap_pars_fragment:Gz,tonemapping_fragment:jz,tonemapping_pars_fragment:Wz,transmission_fragment:qz,transmission_pars_fragment:Xz,uv_pars_fragment:Yz,uv_pars_vertex:Zz,uv_vertex:Kz,worldpos_vertex:Qz,background_vert:Jz,background_frag:$z,backgroundCube_vert:tB,backgroundCube_frag:eB,cube_vert:nB,cube_frag:iB,depth_vert:aB,depth_frag:sB,distance_vert:rB,distance_frag:oB,equirect_vert:lB,equirect_frag:cB,linedashed_vert:uB,linedashed_frag:fB,meshbasic_vert:hB,meshbasic_frag:dB,meshlambert_vert:pB,meshlambert_frag:mB,meshmatcap_vert:gB,meshmatcap_frag:vB,meshnormal_vert:yB,meshnormal_frag:_B,meshphong_vert:xB,meshphong_frag:SB,meshphysical_vert:bB,meshphysical_frag:MB,meshtoon_vert:TB,meshtoon_frag:AB,points_vert:EB,points_frag:wB,shadow_vert:CB,shadow_frag:RB,sprite_vert:DB,sprite_frag:LB},Fe={common:{diffuse:{value:new He(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new En},alphaMap:{value:null},alphaMapTransform:{value:new En},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new En}},envmap:{envMap:{value:null},envMapRotation:{value:new En},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new En}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new En}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new En},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new En},normalScale:{value:new de(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new En},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new En}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new En}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new En}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new He(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new He(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new En},alphaTest:{value:0},uvTransform:{value:new En}},sprite:{diffuse:{value:new He(16777215)},opacity:{value:1},center:{value:new de(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new En},alphaMap:{value:null},alphaMapTransform:{value:new En},alphaTest:{value:0}}},Kl={basic:{uniforms:Ir([Fe.common,Fe.specularmap,Fe.envmap,Fe.aomap,Fe.lightmap,Fe.fog]),vertexShader:Ln.meshbasic_vert,fragmentShader:Ln.meshbasic_frag},lambert:{uniforms:Ir([Fe.common,Fe.specularmap,Fe.envmap,Fe.aomap,Fe.lightmap,Fe.emissivemap,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,Fe.fog,Fe.lights,{emissive:{value:new He(0)}}]),vertexShader:Ln.meshlambert_vert,fragmentShader:Ln.meshlambert_frag},phong:{uniforms:Ir([Fe.common,Fe.specularmap,Fe.envmap,Fe.aomap,Fe.lightmap,Fe.emissivemap,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,Fe.fog,Fe.lights,{emissive:{value:new He(0)},specular:{value:new He(1118481)},shininess:{value:30}}]),vertexShader:Ln.meshphong_vert,fragmentShader:Ln.meshphong_frag},standard:{uniforms:Ir([Fe.common,Fe.envmap,Fe.aomap,Fe.lightmap,Fe.emissivemap,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,Fe.roughnessmap,Fe.metalnessmap,Fe.fog,Fe.lights,{emissive:{value:new He(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ln.meshphysical_vert,fragmentShader:Ln.meshphysical_frag},toon:{uniforms:Ir([Fe.common,Fe.aomap,Fe.lightmap,Fe.emissivemap,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,Fe.gradientmap,Fe.fog,Fe.lights,{emissive:{value:new He(0)}}]),vertexShader:Ln.meshtoon_vert,fragmentShader:Ln.meshtoon_frag},matcap:{uniforms:Ir([Fe.common,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,Fe.fog,{matcap:{value:null}}]),vertexShader:Ln.meshmatcap_vert,fragmentShader:Ln.meshmatcap_frag},points:{uniforms:Ir([Fe.points,Fe.fog]),vertexShader:Ln.points_vert,fragmentShader:Ln.points_frag},dashed:{uniforms:Ir([Fe.common,Fe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ln.linedashed_vert,fragmentShader:Ln.linedashed_frag},depth:{uniforms:Ir([Fe.common,Fe.displacementmap]),vertexShader:Ln.depth_vert,fragmentShader:Ln.depth_frag},normal:{uniforms:Ir([Fe.common,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,{opacity:{value:1}}]),vertexShader:Ln.meshnormal_vert,fragmentShader:Ln.meshnormal_frag},sprite:{uniforms:Ir([Fe.sprite,Fe.fog]),vertexShader:Ln.sprite_vert,fragmentShader:Ln.sprite_frag},background:{uniforms:{uvTransform:{value:new En},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ln.background_vert,fragmentShader:Ln.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new En}},vertexShader:Ln.backgroundCube_vert,fragmentShader:Ln.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ln.cube_vert,fragmentShader:Ln.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ln.equirect_vert,fragmentShader:Ln.equirect_frag},distance:{uniforms:Ir([Fe.common,Fe.displacementmap,{referencePosition:{value:new pt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ln.distance_vert,fragmentShader:Ln.distance_frag},shadow:{uniforms:Ir([Fe.lights,Fe.fog,{color:{value:new He(0)},opacity:{value:1}}]),vertexShader:Ln.shadow_vert,fragmentShader:Ln.shadow_frag}};Kl.physical={uniforms:Ir([Kl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new En},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new En},clearcoatNormalScale:{value:new de(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new En},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new En},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new En},sheen:{value:0},sheenColor:{value:new He(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new En},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new En},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new En},transmissionSamplerSize:{value:new de},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new En},attenuationDistance:{value:0},attenuationColor:{value:new He(0)},specularColor:{value:new He(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new En},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new En},anisotropyVector:{value:new de},anisotropyMap:{value:null},anisotropyMapTransform:{value:new En}}]),vertexShader:Ln.meshphysical_vert,fragmentShader:Ln.meshphysical_frag};const wy={r:0,b:0,g:0},Bh=new Vo,OB=new gn;function NB(i,t,e,n,a,s,o){const c=new He(0);let f=s===!0?0:1,d,g,y=null,x=0,b=null;function T(I){let z=I.isScene===!0?I.background:null;return z&&z.isTexture&&(z=(I.backgroundBlurriness>0?e:t).get(z)),z}function R(I){let z=!1;const F=T(I);F===null?w(c,f):F&&F.isColor&&(w(F,1),z=!0);const H=i.xr.getEnvironmentBlendMode();H==="additive"?n.buffers.color.setClear(0,0,0,1,o):H==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,o),(i.autoClear||z)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function C(I,z){const F=T(z);F&&(F.isCubeTexture||F.mapping===nm)?(g===void 0&&(g=new ma(new pd(1,1,1),new pl({name:"BackgroundCubeMaterial",uniforms:Yp(Kl.backgroundCube.uniforms),vertexShader:Kl.backgroundCube.vertexShader,fragmentShader:Kl.backgroundCube.fragmentShader,side:Vr,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),g.geometry.deleteAttribute("normal"),g.geometry.deleteAttribute("uv"),g.onBeforeRender=function(H,q,Z){this.matrixWorld.copyPosition(Z.matrixWorld)},Object.defineProperty(g.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(g)),Bh.copy(z.backgroundRotation),Bh.x*=-1,Bh.y*=-1,Bh.z*=-1,F.isCubeTexture&&F.isRenderTargetTexture===!1&&(Bh.y*=-1,Bh.z*=-1),g.material.uniforms.envMap.value=F,g.material.uniforms.flipEnvMap.value=F.isCubeTexture&&F.isRenderTargetTexture===!1?-1:1,g.material.uniforms.backgroundBlurriness.value=z.backgroundBlurriness,g.material.uniforms.backgroundIntensity.value=z.backgroundIntensity,g.material.uniforms.backgroundRotation.value.setFromMatrix4(OB.makeRotationFromEuler(Bh)),g.material.toneMapped=Xn.getTransfer(F.colorSpace)!==Ti,(y!==F||x!==F.version||b!==i.toneMapping)&&(g.material.needsUpdate=!0,y=F,x=F.version,b=i.toneMapping),g.layers.enableAll(),I.unshift(g,g.geometry,g.material,0,0,null)):F&&F.isTexture&&(d===void 0&&(d=new ma(new Bu(2,2),new pl({name:"BackgroundMaterial",uniforms:Yp(Kl.background.uniforms),vertexShader:Kl.background.vertexShader,fragmentShader:Kl.background.fragmentShader,side:Nu,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(d)),d.material.uniforms.t2D.value=F,d.material.uniforms.backgroundIntensity.value=z.backgroundIntensity,d.material.toneMapped=Xn.getTransfer(F.colorSpace)!==Ti,F.matrixAutoUpdate===!0&&F.updateMatrix(),d.material.uniforms.uvTransform.value.copy(F.matrix),(y!==F||x!==F.version||b!==i.toneMapping)&&(d.material.needsUpdate=!0,y=F,x=F.version,b=i.toneMapping),d.layers.enableAll(),I.unshift(d,d.geometry,d.material,0,0,null))}function w(I,z){I.getRGB(wy,qC(i)),n.buffers.color.setClear(wy.r,wy.g,wy.b,z,o)}function N(){g!==void 0&&(g.geometry.dispose(),g.material.dispose(),g=void 0),d!==void 0&&(d.geometry.dispose(),d.material.dispose(),d=void 0)}return{getClearColor:function(){return c},setClearColor:function(I,z=1){c.set(I),f=z,w(c,f)},getClearAlpha:function(){return f},setClearAlpha:function(I){f=I,w(c,f)},render:R,addToRenderList:C,dispose:N}}function UB(i,t){const e=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},a=x(null);let s=a,o=!1;function c(V,Q,J,rt,ut){let vt=!1;const j=y(rt,J,Q);s!==j&&(s=j,d(s.object)),vt=b(V,rt,J,ut),vt&&T(V,rt,J,ut),ut!==null&&t.update(ut,i.ELEMENT_ARRAY_BUFFER),(vt||o)&&(o=!1,z(V,Q,J,rt),ut!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.get(ut).buffer))}function f(){return i.createVertexArray()}function d(V){return i.bindVertexArray(V)}function g(V){return i.deleteVertexArray(V)}function y(V,Q,J){const rt=J.wireframe===!0;let ut=n[V.id];ut===void 0&&(ut={},n[V.id]=ut);let vt=ut[Q.id];vt===void 0&&(vt={},ut[Q.id]=vt);let j=vt[rt];return j===void 0&&(j=x(f()),vt[rt]=j),j}function x(V){const Q=[],J=[],rt=[];for(let ut=0;ut<e;ut++)Q[ut]=0,J[ut]=0,rt[ut]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Q,enabledAttributes:J,attributeDivisors:rt,object:V,attributes:{},index:null}}function b(V,Q,J,rt){const ut=s.attributes,vt=Q.attributes;let j=0;const K=J.getAttributes();for(const et in K)if(K[et].location>=0){const lt=ut[et];let G=vt[et];if(G===void 0&&(et==="instanceMatrix"&&V.instanceMatrix&&(G=V.instanceMatrix),et==="instanceColor"&&V.instanceColor&&(G=V.instanceColor)),lt===void 0||lt.attribute!==G||G&&lt.data!==G.data)return!0;j++}return s.attributesNum!==j||s.index!==rt}function T(V,Q,J,rt){const ut={},vt=Q.attributes;let j=0;const K=J.getAttributes();for(const et in K)if(K[et].location>=0){let lt=vt[et];lt===void 0&&(et==="instanceMatrix"&&V.instanceMatrix&&(lt=V.instanceMatrix),et==="instanceColor"&&V.instanceColor&&(lt=V.instanceColor));const G={};G.attribute=lt,lt&&lt.data&&(G.data=lt.data),ut[et]=G,j++}s.attributes=ut,s.attributesNum=j,s.index=rt}function R(){const V=s.newAttributes;for(let Q=0,J=V.length;Q<J;Q++)V[Q]=0}function C(V){w(V,0)}function w(V,Q){const J=s.newAttributes,rt=s.enabledAttributes,ut=s.attributeDivisors;J[V]=1,rt[V]===0&&(i.enableVertexAttribArray(V),rt[V]=1),ut[V]!==Q&&(i.vertexAttribDivisor(V,Q),ut[V]=Q)}function N(){const V=s.newAttributes,Q=s.enabledAttributes;for(let J=0,rt=Q.length;J<rt;J++)Q[J]!==V[J]&&(i.disableVertexAttribArray(J),Q[J]=0)}function I(V,Q,J,rt,ut,vt,j){j===!0?i.vertexAttribIPointer(V,Q,J,ut,vt):i.vertexAttribPointer(V,Q,J,rt,ut,vt)}function z(V,Q,J,rt){R();const ut=rt.attributes,vt=J.getAttributes(),j=Q.defaultAttributeValues;for(const K in vt){const et=vt[K];if(et.location>=0){let dt=ut[K];if(dt===void 0&&(K==="instanceMatrix"&&V.instanceMatrix&&(dt=V.instanceMatrix),K==="instanceColor"&&V.instanceColor&&(dt=V.instanceColor)),dt!==void 0){const lt=dt.normalized,G=dt.itemSize,nt=t.get(dt);if(nt===void 0)continue;const ft=nt.buffer,mt=nt.type,xt=nt.bytesPerElement,ht=mt===i.INT||mt===i.UNSIGNED_INT||dt.gpuType===h1;if(dt.isInterleavedBufferAttribute){const _t=dt.data,At=_t.stride,$t=dt.offset;if(_t.isInstancedInterleavedBuffer){for(let te=0;te<et.locationSize;te++)w(et.location+te,_t.meshPerAttribute);V.isInstancedMesh!==!0&&rt._maxInstanceCount===void 0&&(rt._maxInstanceCount=_t.meshPerAttribute*_t.count)}else for(let te=0;te<et.locationSize;te++)C(et.location+te);i.bindBuffer(i.ARRAY_BUFFER,ft);for(let te=0;te<et.locationSize;te++)I(et.location+te,G/et.locationSize,mt,lt,At*xt,($t+G/et.locationSize*te)*xt,ht)}else{if(dt.isInstancedBufferAttribute){for(let _t=0;_t<et.locationSize;_t++)w(et.location+_t,dt.meshPerAttribute);V.isInstancedMesh!==!0&&rt._maxInstanceCount===void 0&&(rt._maxInstanceCount=dt.meshPerAttribute*dt.count)}else for(let _t=0;_t<et.locationSize;_t++)C(et.location+_t);i.bindBuffer(i.ARRAY_BUFFER,ft);for(let _t=0;_t<et.locationSize;_t++)I(et.location+_t,G/et.locationSize,mt,lt,G*xt,G/et.locationSize*_t*xt,ht)}}else if(j!==void 0){const lt=j[K];if(lt!==void 0)switch(lt.length){case 2:i.vertexAttrib2fv(et.location,lt);break;case 3:i.vertexAttrib3fv(et.location,lt);break;case 4:i.vertexAttrib4fv(et.location,lt);break;default:i.vertexAttrib1fv(et.location,lt)}}}}N()}function F(){Z();for(const V in n){const Q=n[V];for(const J in Q){const rt=Q[J];for(const ut in rt)g(rt[ut].object),delete rt[ut];delete Q[J]}delete n[V]}}function H(V){if(n[V.id]===void 0)return;const Q=n[V.id];for(const J in Q){const rt=Q[J];for(const ut in rt)g(rt[ut].object),delete rt[ut];delete Q[J]}delete n[V.id]}function q(V){for(const Q in n){const J=n[Q];if(J[V.id]===void 0)continue;const rt=J[V.id];for(const ut in rt)g(rt[ut].object),delete rt[ut];delete J[V.id]}}function Z(){B(),o=!0,s!==a&&(s=a,d(s.object))}function B(){a.geometry=null,a.program=null,a.wireframe=!1}return{setup:c,reset:Z,resetDefaultState:B,dispose:F,releaseStatesOfGeometry:H,releaseStatesOfProgram:q,initAttributes:R,enableAttribute:C,disableUnusedAttributes:N}}function IB(i,t,e){let n;function a(d){n=d}function s(d,g){i.drawArrays(n,d,g),e.update(g,n,1)}function o(d,g,y){y!==0&&(i.drawArraysInstanced(n,d,g,y),e.update(g,n,y))}function c(d,g,y){if(y===0)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,d,0,g,0,y);let b=0;for(let T=0;T<y;T++)b+=g[T];e.update(b,n,1)}function f(d,g,y,x){if(y===0)return;const b=t.get("WEBGL_multi_draw");if(b===null)for(let T=0;T<d.length;T++)o(d[T],g[T],x[T]);else{b.multiDrawArraysInstancedWEBGL(n,d,0,g,0,x,0,y);let T=0;for(let R=0;R<y;R++)T+=g[R]*x[R];e.update(T,n,1)}}this.setMode=a,this.render=s,this.renderInstances=o,this.renderMultiDraw=c,this.renderMultiDrawInstances=f}function PB(i,t,e,n){let a;function s(){if(a!==void 0)return a;if(t.has("EXT_texture_filter_anisotropic")===!0){const q=t.get("EXT_texture_filter_anisotropic");a=i.getParameter(q.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else a=0;return a}function o(q){return!(q!==sr&&n.convert(q)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function c(q){const Z=q===tc&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(q!==Br&&n.convert(q)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&q!==ar&&!Z)}function f(q){if(q==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";q="mediump"}return q==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let d=e.precision!==void 0?e.precision:"highp";const g=f(d);g!==d&&(Ie("WebGLRenderer:",d,"not supported, using",g,"instead."),d=g);const y=e.logarithmicDepthBuffer===!0,x=e.reversedDepthBuffer===!0&&t.has("EXT_clip_control"),b=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),T=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),R=i.getParameter(i.MAX_TEXTURE_SIZE),C=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),w=i.getParameter(i.MAX_VERTEX_ATTRIBS),N=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),I=i.getParameter(i.MAX_VARYING_VECTORS),z=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),F=i.getParameter(i.MAX_SAMPLES),H=i.getParameter(i.SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:f,textureFormatReadable:o,textureTypeReadable:c,precision:d,logarithmicDepthBuffer:y,reversedDepthBuffer:x,maxTextures:b,maxVertexTextures:T,maxTextureSize:R,maxCubemapSize:C,maxAttributes:w,maxVertexUniforms:N,maxVaryings:I,maxFragmentUniforms:z,maxSamples:F,samples:H}}function zB(i){const t=this;let e=null,n=0,a=!1,s=!1;const o=new wu,c=new En,f={value:null,needsUpdate:!1};this.uniform=f,this.numPlanes=0,this.numIntersection=0,this.init=function(y,x){const b=y.length!==0||x||n!==0||a;return a=x,n=y.length,b},this.beginShadows=function(){s=!0,g(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(y,x){e=g(y,x,0)},this.setState=function(y,x,b){const T=y.clippingPlanes,R=y.clipIntersection,C=y.clipShadows,w=i.get(y);if(!a||T===null||T.length===0||s&&!C)s?g(null):d();else{const N=s?0:n,I=N*4;let z=w.clippingState||null;f.value=z,z=g(T,x,I,b);for(let F=0;F!==I;++F)z[F]=e[F];w.clippingState=z,this.numIntersection=R?this.numPlanes:0,this.numPlanes+=N}};function d(){f.value!==e&&(f.value=e,f.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function g(y,x,b,T){const R=y!==null?y.length:0;let C=null;if(R!==0){if(C=f.value,T!==!0||C===null){const w=b+R*4,N=x.matrixWorldInverse;c.getNormalMatrix(N),(C===null||C.length<w)&&(C=new Float32Array(w));for(let I=0,z=b;I!==R;++I,z+=4)o.copy(y[I]).applyMatrix4(N,c),o.normal.toArray(C,z),C[z+3]=o.constant}f.value=C,f.needsUpdate=!0}return t.numPlanes=R,t.numIntersection=0,C}}function BB(i){let t=new WeakMap;function e(o,c){return c===$g?o.mapping=kc:c===t0&&(o.mapping=Bf),o}function n(o){if(o&&o.isTexture){const c=o.mapping;if(c===$g||c===t0)if(t.has(o)){const f=t.get(o).texture;return e(f,o.mapping)}else{const f=o.image;if(f&&f.height>0){const d=new j2(f.height);return d.fromEquirectangularTexture(i,o),t.set(o,d),o.addEventListener("dispose",a),e(d.texture,o.mapping)}else return null}}return o}function a(o){const c=o.target;c.removeEventListener("dispose",a);const f=t.get(c);f!==void 0&&(t.delete(c),f.dispose())}function s(){t=new WeakMap}return{get:n,dispose:s}}const zf=4,xE=[.125,.215,.35,.446,.526,.582],qh=20,FB=256,Mg=new $l,SE=new He;let DS=null,LS=0,OS=0,NS=!1;const kB=new pt;class zb{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(t,e=0,n=.1,a=100,s={}){const{size:o=256,position:c=kB}=s;DS=this._renderer.getRenderTarget(),LS=this._renderer.getActiveCubeFace(),OS=this._renderer.getActiveMipmapLevel(),NS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const f=this._allocateTargets();return f.depthBuffer=!0,this._sceneToCubeUV(t,n,a,f,c),e>0&&this._blur(f,0,0,e),this._applyPMREM(f),this._cleanup(f),f}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=TE(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=ME(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodMeshes.length;t++)this._lodMeshes[t].geometry.dispose()}_cleanup(t){this._renderer.setRenderTarget(DS,LS,OS),this._renderer.xr.enabled=NS,t.scissorTest=!1,Tp(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===kc||t.mapping===Bf?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),DS=this._renderer.getRenderTarget(),LS=this._renderer.getActiveCubeFace(),OS=this._renderer.getActiveMipmapLevel(),NS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:Di,minFilter:Di,generateMipmaps:!1,type:tc,format:sr,colorSpace:Ff,depthBuffer:!1},a=bE(t,e,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=bE(t,e,n);const{_lodMax:s}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=VB(s)),this._blurMaterial=GB(s,t,e),this._ggxMaterial=HB(s,t,e)}return a}_compileMaterial(t){const e=new ma(new wn,t);this._renderer.compile(e,Mg)}_sceneToCubeUV(t,e,n,a,s){const f=new fa(90,1,e,n),d=[1,-1,1,1,1,1],g=[1,1,1,-1,-1,-1],y=this._renderer,x=y.autoClear,b=y.toneMapping;y.getClearColor(SE),y.toneMapping=fl,y.autoClear=!1,y.state.buffers.depth.getReversed()&&(y.setRenderTarget(a),y.clearDepth(),y.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new ma(new pd,new zu({name:"PMREM.Background",side:Vr,depthWrite:!1,depthTest:!1})));const R=this._backgroundBox,C=R.material;let w=!1;const N=t.background;N?N.isColor&&(C.color.copy(N),t.background=null,w=!0):(C.color.copy(SE),w=!0);for(let I=0;I<6;I++){const z=I%3;z===0?(f.up.set(0,d[I],0),f.position.set(s.x,s.y,s.z),f.lookAt(s.x+g[I],s.y,s.z)):z===1?(f.up.set(0,0,d[I]),f.position.set(s.x,s.y,s.z),f.lookAt(s.x,s.y+g[I],s.z)):(f.up.set(0,d[I],0),f.position.set(s.x,s.y,s.z),f.lookAt(s.x,s.y,s.z+g[I]));const F=this._cubeSize;Tp(a,z*F,I>2?F:0,F,F),y.setRenderTarget(a),w&&y.render(R,f),y.render(t,f)}y.toneMapping=b,y.autoClear=x,t.background=N}_textureToCubeUV(t,e){const n=this._renderer,a=t.mapping===kc||t.mapping===Bf;a?(this._cubemapMaterial===null&&(this._cubemapMaterial=TE()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=ME());const s=a?this._cubemapMaterial:this._equirectMaterial,o=this._lodMeshes[0];o.material=s;const c=s.uniforms;c.envMap.value=t;const f=this._cubeSize;Tp(e,0,0,3*f,2*f),n.setRenderTarget(e),n.render(o,Mg)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;const a=this._lodMeshes.length;for(let s=1;s<a;s++)this._applyGGXFilter(t,s-1,s);e.autoClear=n}_applyGGXFilter(t,e,n){const a=this._renderer,s=this._pingPongRenderTarget,o=this._ggxMaterial,c=this._lodMeshes[n];c.material=o;const f=o.uniforms,d=n/(this._lodMeshes.length-1),g=e/(this._lodMeshes.length-1),y=Math.sqrt(d*d-g*g),x=0+d*1.25,b=y*x,{_lodMax:T}=this,R=this._sizeLods[n],C=3*R*(n>T-zf?n-T+zf:0),w=4*(this._cubeSize-R);f.envMap.value=t.texture,f.roughness.value=b,f.mipInt.value=T-e,Tp(s,C,w,3*R,2*R),a.setRenderTarget(s),a.render(c,Mg),f.envMap.value=s.texture,f.roughness.value=0,f.mipInt.value=T-n,Tp(t,C,w,3*R,2*R),a.setRenderTarget(t),a.render(c,Mg)}_blur(t,e,n,a,s){const o=this._pingPongRenderTarget;this._halfBlur(t,o,e,n,a,"latitudinal",s),this._halfBlur(o,t,n,n,a,"longitudinal",s)}_halfBlur(t,e,n,a,s,o,c){const f=this._renderer,d=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&rn("blur direction must be either latitudinal or longitudinal!");const g=3,y=this._lodMeshes[a];y.material=d;const x=d.uniforms,b=this._sizeLods[n]-1,T=isFinite(s)?Math.PI/(2*b):2*Math.PI/(2*qh-1),R=s/T,C=isFinite(s)?1+Math.floor(g*R):qh;C>qh&&Ie(`sigmaRadians, ${s}, is too large and will clip, as it requested ${C} samples when the maximum is set to ${qh}`);const w=[];let N=0;for(let q=0;q<qh;++q){const Z=q/R,B=Math.exp(-Z*Z/2);w.push(B),q===0?N+=B:q<C&&(N+=2*B)}for(let q=0;q<w.length;q++)w[q]=w[q]/N;x.envMap.value=t.texture,x.samples.value=C,x.weights.value=w,x.latitudinal.value=o==="latitudinal",c&&(x.poleAxis.value=c);const{_lodMax:I}=this;x.dTheta.value=T,x.mipInt.value=I-n;const z=this._sizeLods[a],F=3*z*(a>I-zf?a-I+zf:0),H=4*(this._cubeSize-z);Tp(e,F,H,3*z,2*z),f.setRenderTarget(e),f.render(y,Mg)}}function VB(i){const t=[],e=[],n=[];let a=i;const s=i-zf+1+xE.length;for(let o=0;o<s;o++){const c=Math.pow(2,a);t.push(c);let f=1/c;o>i-zf?f=xE[o-i+zf-1]:o===0&&(f=0),e.push(f);const d=1/(c-2),g=-d,y=1+d,x=[g,g,y,g,y,y,g,g,y,y,g,y],b=6,T=6,R=3,C=2,w=1,N=new Float32Array(R*T*b),I=new Float32Array(C*T*b),z=new Float32Array(w*T*b);for(let H=0;H<b;H++){const q=H%3*2/3-1,Z=H>2?0:-1,B=[q,Z,0,q+2/3,Z,0,q+2/3,Z+1,0,q,Z,0,q+2/3,Z+1,0,q,Z+1,0];N.set(B,R*T*H),I.set(x,C*T*H);const V=[H,H,H,H,H,H];z.set(V,w*T*H)}const F=new wn;F.setAttribute("position",new Pi(N,R)),F.setAttribute("uv",new Pi(I,C)),F.setAttribute("faceIndex",new Pi(z,w)),n.push(new ma(F,null)),a>zf&&a--}return{lodMeshes:n,sizeLods:t,sigmas:e}}function bE(i,t,e){const n=new ro(i,t,e);return n.texture.mapping=nm,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Tp(i,t,e,n,a){i.viewport.set(t,e,n,a),i.scissor.set(t,e,n,a)}function HB(i,t,e){return new pl({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:FB,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:q1(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:zc,depthTest:!1,depthWrite:!1})}function GB(i,t,e){const n=new Float32Array(qh),a=new pt(0,1,0);return new pl({name:"SphericalGaussianBlur",defines:{n:qh,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:q1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:zc,depthTest:!1,depthWrite:!1})}function ME(){return new pl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:q1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:zc,depthTest:!1,depthWrite:!1})}function TE(){return new pl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:q1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:zc,depthTest:!1,depthWrite:!1})}function q1(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function jB(i){let t=new WeakMap,e=null;function n(c){if(c&&c.isTexture){const f=c.mapping,d=f===$g||f===t0,g=f===kc||f===Bf;if(d||g){let y=t.get(c);const x=y!==void 0?y.texture.pmremVersion:0;if(c.isRenderTargetTexture&&c.pmremVersion!==x)return e===null&&(e=new zb(i)),y=d?e.fromEquirectangular(c,y):e.fromCubemap(c,y),y.texture.pmremVersion=c.pmremVersion,t.set(c,y),y.texture;if(y!==void 0)return y.texture;{const b=c.image;return d&&b&&b.height>0||g&&b&&a(b)?(e===null&&(e=new zb(i)),y=d?e.fromEquirectangular(c):e.fromCubemap(c),y.texture.pmremVersion=c.pmremVersion,t.set(c,y),c.addEventListener("dispose",s),y.texture):null}}}return c}function a(c){let f=0;const d=6;for(let g=0;g<d;g++)c[g]!==void 0&&f++;return f===d}function s(c){const f=c.target;f.removeEventListener("dispose",s);const d=t.get(f);d!==void 0&&(t.delete(f),d.dispose())}function o(){t=new WeakMap,e!==null&&(e.dispose(),e=null)}return{get:n,dispose:o}}function WB(i){const t={};function e(n){if(t[n]!==void 0)return t[n];const a=i.getExtension(n);return t[n]=a,a}return{has:function(n){return e(n)!==null},init:function(){e("EXT_color_buffer_float"),e("WEBGL_clip_cull_distance"),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture"),e("WEBGL_render_shared_exponent")},get:function(n){const a=e(n);return a===null&&Wp("WebGLRenderer: "+n+" extension not supported."),a}}}function qB(i,t,e,n){const a={},s=new WeakMap;function o(y){const x=y.target;x.index!==null&&t.remove(x.index);for(const T in x.attributes)t.remove(x.attributes[T]);x.removeEventListener("dispose",o),delete a[x.id];const b=s.get(x);b&&(t.remove(b),s.delete(x)),n.releaseStatesOfGeometry(x),x.isInstancedBufferGeometry===!0&&delete x._maxInstanceCount,e.memory.geometries--}function c(y,x){return a[x.id]===!0||(x.addEventListener("dispose",o),a[x.id]=!0,e.memory.geometries++),x}function f(y){const x=y.attributes;for(const b in x)t.update(x[b],i.ARRAY_BUFFER)}function d(y){const x=[],b=y.index,T=y.attributes.position;let R=0;if(b!==null){const N=b.array;R=b.version;for(let I=0,z=N.length;I<z;I+=3){const F=N[I+0],H=N[I+1],q=N[I+2];x.push(F,H,H,q,q,F)}}else if(T!==void 0){const N=T.array;R=T.version;for(let I=0,z=N.length/3-1;I<z;I+=3){const F=I+0,H=I+1,q=I+2;x.push(F,H,H,q,q,F)}}else return;const C=new(VC(x)?H2:V2)(x,1);C.version=R;const w=s.get(y);w&&t.remove(w),s.set(y,C)}function g(y){const x=s.get(y);if(x){const b=y.index;b!==null&&x.version<b.version&&d(y)}else d(y);return s.get(y)}return{get:c,update:f,getWireframeAttribute:g}}function XB(i,t,e){let n;function a(x){n=x}let s,o;function c(x){s=x.type,o=x.bytesPerElement}function f(x,b){i.drawElements(n,b,s,x*o),e.update(b,n,1)}function d(x,b,T){T!==0&&(i.drawElementsInstanced(n,b,s,x*o,T),e.update(b,n,T))}function g(x,b,T){if(T===0)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,b,0,s,x,0,T);let C=0;for(let w=0;w<T;w++)C+=b[w];e.update(C,n,1)}function y(x,b,T,R){if(T===0)return;const C=t.get("WEBGL_multi_draw");if(C===null)for(let w=0;w<x.length;w++)d(x[w]/o,b[w],R[w]);else{C.multiDrawElementsInstancedWEBGL(n,b,0,s,x,0,R,0,T);let w=0;for(let N=0;N<T;N++)w+=b[N]*R[N];e.update(w,n,1)}}this.setMode=a,this.setIndex=c,this.render=f,this.renderInstances=d,this.renderMultiDraw=g,this.renderMultiDrawInstances=y}function YB(i){const t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,o,c){switch(e.calls++,o){case i.TRIANGLES:e.triangles+=c*(s/3);break;case i.LINES:e.lines+=c*(s/2);break;case i.LINE_STRIP:e.lines+=c*(s-1);break;case i.LINE_LOOP:e.lines+=c*s;break;case i.POINTS:e.points+=c*s;break;default:rn("WebGLInfo: Unknown draw mode:",o);break}}function a(){e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:a,update:n}}function ZB(i,t,e){const n=new WeakMap,a=new Ri;function s(o,c,f){const d=o.morphTargetInfluences,g=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,y=g!==void 0?g.length:0;let x=n.get(c);if(x===void 0||x.count!==y){let V=function(){Z.dispose(),n.delete(c),c.removeEventListener("dispose",V)};var b=V;x!==void 0&&x.texture.dispose();const T=c.morphAttributes.position!==void 0,R=c.morphAttributes.normal!==void 0,C=c.morphAttributes.color!==void 0,w=c.morphAttributes.position||[],N=c.morphAttributes.normal||[],I=c.morphAttributes.color||[];let z=0;T===!0&&(z=1),R===!0&&(z=2),C===!0&&(z=3);let F=c.attributes.position.count*z,H=1;F>t.maxTextureSize&&(H=Math.ceil(F/t.maxTextureSize),F=t.maxTextureSize);const q=new Float32Array(F*H*4*y),Z=new S1(q,F,H,y);Z.type=ar,Z.needsUpdate=!0;const B=z*4;for(let Q=0;Q<y;Q++){const J=w[Q],rt=N[Q],ut=I[Q],vt=F*H*4*Q;for(let j=0;j<J.count;j++){const K=j*B;T===!0&&(a.fromBufferAttribute(J,j),q[vt+K+0]=a.x,q[vt+K+1]=a.y,q[vt+K+2]=a.z,q[vt+K+3]=0),R===!0&&(a.fromBufferAttribute(rt,j),q[vt+K+4]=a.x,q[vt+K+5]=a.y,q[vt+K+6]=a.z,q[vt+K+7]=0),C===!0&&(a.fromBufferAttribute(ut,j),q[vt+K+8]=a.x,q[vt+K+9]=a.y,q[vt+K+10]=a.z,q[vt+K+11]=ut.itemSize===4?a.w:1)}}x={count:y,texture:Z,size:new de(F,H)},n.set(c,x),c.addEventListener("dispose",V)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)f.getUniforms().setValue(i,"morphTexture",o.morphTexture,e);else{let T=0;for(let C=0;C<d.length;C++)T+=d[C];const R=c.morphTargetsRelative?1:1-T;f.getUniforms().setValue(i,"morphTargetBaseInfluence",R),f.getUniforms().setValue(i,"morphTargetInfluences",d)}f.getUniforms().setValue(i,"morphTargetsTexture",x.texture,e),f.getUniforms().setValue(i,"morphTargetsTextureSize",x.size)}return{update:s}}function KB(i,t,e,n){let a=new WeakMap;function s(f){const d=n.render.frame,g=f.geometry,y=t.get(f,g);if(a.get(y)!==d&&(t.update(y),a.set(y,d)),f.isInstancedMesh&&(f.hasEventListener("dispose",c)===!1&&f.addEventListener("dispose",c),a.get(f)!==d&&(e.update(f.instanceMatrix,i.ARRAY_BUFFER),f.instanceColor!==null&&e.update(f.instanceColor,i.ARRAY_BUFFER),a.set(f,d))),f.isSkinnedMesh){const x=f.skeleton;a.get(x)!==d&&(x.update(),a.set(x,d))}return y}function o(){a=new WeakMap}function c(f){const d=f.target;d.removeEventListener("dispose",c),e.remove(d.instanceMatrix),d.instanceColor!==null&&e.remove(d.instanceColor)}return{update:s,dispose:o}}const QB={[A2]:"LINEAR_TONE_MAPPING",[E2]:"REINHARD_TONE_MAPPING",[w2]:"CINEON_TONE_MAPPING",[u1]:"ACES_FILMIC_TONE_MAPPING",[R2]:"AGX_TONE_MAPPING",[D2]:"NEUTRAL_TONE_MAPPING",[C2]:"CUSTOM_TONE_MAPPING"};function JB(i,t,e,n,a){const s=new ro(t,e,{type:i,depthBuffer:n,stencilBuffer:a}),o=new ro(t,e,{type:tc,depthBuffer:!1,stencilBuffer:!1}),c=new wn;c.setAttribute("position",new Ze([-1,3,0,-1,-1,0,3,-1,0],3)),c.setAttribute("uv",new Ze([0,2,0,0,2,0],2));const f=new nM({uniforms:{tDiffuse:{value:null}},vertexShader:`
			precision highp float;

			uniform mat4 modelViewMatrix;
			uniform mat4 projectionMatrix;

			attribute vec3 position;
			attribute vec2 uv;

			varying vec2 vUv;

			void main() {
				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}`,fragmentShader:`
			precision highp float;

			uniform sampler2D tDiffuse;

			varying vec2 vUv;

			#include <tonemapping_pars_fragment>
			#include <colorspace_pars_fragment>

			void main() {
				gl_FragColor = texture2D( tDiffuse, vUv );

				#ifdef LINEAR_TONE_MAPPING
					gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );
				#elif defined( REINHARD_TONE_MAPPING )
					gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );
				#elif defined( CINEON_TONE_MAPPING )
					gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );
				#elif defined( ACES_FILMIC_TONE_MAPPING )
					gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );
				#elif defined( AGX_TONE_MAPPING )
					gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );
				#elif defined( NEUTRAL_TONE_MAPPING )
					gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );
				#elif defined( CUSTOM_TONE_MAPPING )
					gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );
				#endif

				#ifdef SRGB_TRANSFER
					gl_FragColor = sRGBTransferOETF( gl_FragColor );
				#endif
			}`,depthTest:!1,depthWrite:!1}),d=new ma(c,f),g=new $l(-1,1,1,-1,0,1);let y=null,x=null,b=!1,T,R=null,C=[],w=!1;this.setSize=function(N,I){s.setSize(N,I),o.setSize(N,I);for(let z=0;z<C.length;z++){const F=C[z];F.setSize&&F.setSize(N,I)}},this.setEffects=function(N){C=N,w=C.length>0&&C[0].isRenderPass===!0;const I=s.width,z=s.height;for(let F=0;F<C.length;F++){const H=C[F];H.setSize&&H.setSize(I,z)}},this.begin=function(N,I){if(b||N.toneMapping===fl&&C.length===0)return!1;if(R=I,I!==null){const z=I.width,F=I.height;(s.width!==z||s.height!==F)&&this.setSize(z,F)}return w===!1&&N.setRenderTarget(s),T=N.toneMapping,N.toneMapping=fl,!0},this.hasRenderPass=function(){return w},this.end=function(N,I){N.toneMapping=T,b=!0;let z=s,F=o;for(let H=0;H<C.length;H++){const q=C[H];if(q.enabled!==!1&&(q.render(N,F,z,I),q.needsSwap!==!1)){const Z=z;z=F,F=Z}}if(y!==N.outputColorSpace||x!==N.toneMapping){y=N.outputColorSpace,x=N.toneMapping,f.defines={},Xn.getTransfer(y)===Ti&&(f.defines.SRGB_TRANSFER="");const H=QB[x];H&&(f.defines[H]=""),f.needsUpdate=!0}f.uniforms.tDiffuse.value=z.texture,N.setRenderTarget(R),N.render(d,g),R=null,b=!1},this.isCompositing=function(){return b},this.dispose=function(){s.dispose(),o.dispose(),c.dispose(),f.dispose()}}const GR=new pa,Bb=new cd(1,1),jR=new S1,WR=new b1,qR=new w0,AE=[],EE=[],wE=new Float32Array(16),CE=new Float32Array(9),RE=new Float32Array(4);function am(i,t,e){const n=i[0];if(n<=0||n>0)return i;const a=t*e;let s=AE[a];if(s===void 0&&(s=new Float32Array(a),AE[a]=s),t!==0){n.toArray(s,0);for(let o=1,c=0;o!==t;++o)c+=e,i[o].toArray(s,c)}return s}function cs(i,t){if(i.length!==t.length)return!1;for(let e=0,n=i.length;e<n;e++)if(i[e]!==t[e])return!1;return!0}function us(i,t){for(let e=0,n=t.length;e<n;e++)i[e]=t[e]}function X1(i,t){let e=EE[t];e===void 0&&(e=new Int32Array(t),EE[t]=e);for(let n=0;n!==t;++n)e[n]=i.allocateTextureUnit();return e}function $B(i,t){const e=this.cache;e[0]!==t&&(i.uniform1f(this.addr,t),e[0]=t)}function t6(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(cs(e,t))return;i.uniform2fv(this.addr,t),us(e,t)}}function e6(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(i.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(cs(e,t))return;i.uniform3fv(this.addr,t),us(e,t)}}function n6(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(cs(e,t))return;i.uniform4fv(this.addr,t),us(e,t)}}function i6(i,t){const e=this.cache,n=t.elements;if(n===void 0){if(cs(e,t))return;i.uniformMatrix2fv(this.addr,!1,t),us(e,t)}else{if(cs(e,n))return;RE.set(n),i.uniformMatrix2fv(this.addr,!1,RE),us(e,n)}}function a6(i,t){const e=this.cache,n=t.elements;if(n===void 0){if(cs(e,t))return;i.uniformMatrix3fv(this.addr,!1,t),us(e,t)}else{if(cs(e,n))return;CE.set(n),i.uniformMatrix3fv(this.addr,!1,CE),us(e,n)}}function s6(i,t){const e=this.cache,n=t.elements;if(n===void 0){if(cs(e,t))return;i.uniformMatrix4fv(this.addr,!1,t),us(e,t)}else{if(cs(e,n))return;wE.set(n),i.uniformMatrix4fv(this.addr,!1,wE),us(e,n)}}function r6(i,t){const e=this.cache;e[0]!==t&&(i.uniform1i(this.addr,t),e[0]=t)}function o6(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(cs(e,t))return;i.uniform2iv(this.addr,t),us(e,t)}}function l6(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(cs(e,t))return;i.uniform3iv(this.addr,t),us(e,t)}}function c6(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(cs(e,t))return;i.uniform4iv(this.addr,t),us(e,t)}}function u6(i,t){const e=this.cache;e[0]!==t&&(i.uniform1ui(this.addr,t),e[0]=t)}function f6(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(cs(e,t))return;i.uniform2uiv(this.addr,t),us(e,t)}}function h6(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(cs(e,t))return;i.uniform3uiv(this.addr,t),us(e,t)}}function d6(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(cs(e,t))return;i.uniform4uiv(this.addr,t),us(e,t)}}function p6(i,t,e){const n=this.cache,a=e.allocateTextureUnit();n[0]!==a&&(i.uniform1i(this.addr,a),n[0]=a);let s;this.type===i.SAMPLER_2D_SHADOW?(Bb.compareFunction=e.isReversedDepthBuffer()?x1:_1,s=Bb):s=GR,e.setTexture2D(t||s,a)}function m6(i,t,e){const n=this.cache,a=e.allocateTextureUnit();n[0]!==a&&(i.uniform1i(this.addr,a),n[0]=a),e.setTexture3D(t||WR,a)}function g6(i,t,e){const n=this.cache,a=e.allocateTextureUnit();n[0]!==a&&(i.uniform1i(this.addr,a),n[0]=a),e.setTextureCube(t||qR,a)}function v6(i,t,e){const n=this.cache,a=e.allocateTextureUnit();n[0]!==a&&(i.uniform1i(this.addr,a),n[0]=a),e.setTexture2DArray(t||jR,a)}function y6(i){switch(i){case 5126:return $B;case 35664:return t6;case 35665:return e6;case 35666:return n6;case 35674:return i6;case 35675:return a6;case 35676:return s6;case 5124:case 35670:return r6;case 35667:case 35671:return o6;case 35668:case 35672:return l6;case 35669:case 35673:return c6;case 5125:return u6;case 36294:return f6;case 36295:return h6;case 36296:return d6;case 35678:case 36198:case 36298:case 36306:case 35682:return p6;case 35679:case 36299:case 36307:return m6;case 35680:case 36300:case 36308:case 36293:return g6;case 36289:case 36303:case 36311:case 36292:return v6}}function _6(i,t){i.uniform1fv(this.addr,t)}function x6(i,t){const e=am(t,this.size,2);i.uniform2fv(this.addr,e)}function S6(i,t){const e=am(t,this.size,3);i.uniform3fv(this.addr,e)}function b6(i,t){const e=am(t,this.size,4);i.uniform4fv(this.addr,e)}function M6(i,t){const e=am(t,this.size,4);i.uniformMatrix2fv(this.addr,!1,e)}function T6(i,t){const e=am(t,this.size,9);i.uniformMatrix3fv(this.addr,!1,e)}function A6(i,t){const e=am(t,this.size,16);i.uniformMatrix4fv(this.addr,!1,e)}function E6(i,t){i.uniform1iv(this.addr,t)}function w6(i,t){i.uniform2iv(this.addr,t)}function C6(i,t){i.uniform3iv(this.addr,t)}function R6(i,t){i.uniform4iv(this.addr,t)}function D6(i,t){i.uniform1uiv(this.addr,t)}function L6(i,t){i.uniform2uiv(this.addr,t)}function O6(i,t){i.uniform3uiv(this.addr,t)}function N6(i,t){i.uniform4uiv(this.addr,t)}function U6(i,t,e){const n=this.cache,a=t.length,s=X1(e,a);cs(n,s)||(i.uniform1iv(this.addr,s),us(n,s));let o;this.type===i.SAMPLER_2D_SHADOW?o=Bb:o=GR;for(let c=0;c!==a;++c)e.setTexture2D(t[c]||o,s[c])}function I6(i,t,e){const n=this.cache,a=t.length,s=X1(e,a);cs(n,s)||(i.uniform1iv(this.addr,s),us(n,s));for(let o=0;o!==a;++o)e.setTexture3D(t[o]||WR,s[o])}function P6(i,t,e){const n=this.cache,a=t.length,s=X1(e,a);cs(n,s)||(i.uniform1iv(this.addr,s),us(n,s));for(let o=0;o!==a;++o)e.setTextureCube(t[o]||qR,s[o])}function z6(i,t,e){const n=this.cache,a=t.length,s=X1(e,a);cs(n,s)||(i.uniform1iv(this.addr,s),us(n,s));for(let o=0;o!==a;++o)e.setTexture2DArray(t[o]||jR,s[o])}function B6(i){switch(i){case 5126:return _6;case 35664:return x6;case 35665:return S6;case 35666:return b6;case 35674:return M6;case 35675:return T6;case 35676:return A6;case 5124:case 35670:return E6;case 35667:case 35671:return w6;case 35668:case 35672:return C6;case 35669:case 35673:return R6;case 5125:return D6;case 36294:return L6;case 36295:return O6;case 36296:return N6;case 35678:case 36198:case 36298:case 36306:case 35682:return U6;case 35679:case 36299:case 36307:return I6;case 35680:case 36300:case 36308:case 36293:return P6;case 36289:case 36303:case 36311:case 36292:return z6}}class F6{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.setValue=y6(e.type)}}class k6{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=B6(e.type)}}class V6{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const a=this.seq;for(let s=0,o=a.length;s!==o;++s){const c=a[s];c.setValue(t,e[c.id],n)}}}const US=/(\w+)(\])?(\[|\.)?/g;function DE(i,t){i.seq.push(t),i.map[t.id]=t}function H6(i,t,e){const n=i.name,a=n.length;for(US.lastIndex=0;;){const s=US.exec(n),o=US.lastIndex;let c=s[1];const f=s[2]==="]",d=s[3];if(f&&(c=c|0),d===void 0||d==="["&&o+2===a){DE(e,d===void 0?new F6(c,i,t):new k6(c,i,t));break}else{let y=e.map[c];y===void 0&&(y=new V6(c),DE(e,y)),e=y}}}class Yy{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let o=0;o<n;++o){const c=t.getActiveUniform(e,o),f=t.getUniformLocation(e,c.name);H6(c,f,this)}const a=[],s=[];for(const o of this.seq)o.type===t.SAMPLER_2D_SHADOW||o.type===t.SAMPLER_CUBE_SHADOW||o.type===t.SAMPLER_2D_ARRAY_SHADOW?a.push(o):s.push(o);a.length>0&&(this.seq=a.concat(s))}setValue(t,e,n,a){const s=this.map[e];s!==void 0&&s.setValue(t,n,a)}setOptional(t,e,n){const a=e[n];a!==void 0&&this.setValue(t,n,a)}static upload(t,e,n,a){for(let s=0,o=e.length;s!==o;++s){const c=e[s],f=n[c.id];f.needsUpdate!==!1&&c.setValue(t,f.value,a)}}static seqWithValue(t,e){const n=[];for(let a=0,s=t.length;a!==s;++a){const o=t[a];o.id in e&&n.push(o)}return n}}function LE(i,t,e){const n=i.createShader(t);return i.shaderSource(n,e),i.compileShader(n),n}const G6=37297;let j6=0;function W6(i,t){const e=i.split(`
`),n=[],a=Math.max(t-6,0),s=Math.min(t+6,e.length);for(let o=a;o<s;o++){const c=o+1;n.push(`${c===t?">":" "} ${c}: ${e[o]}`)}return n.join(`
`)}const OE=new En;function q6(i){Xn._getMatrix(OE,Xn.workingColorSpace,i);const t=`mat3( ${OE.elements.map(e=>e.toFixed(4))} )`;switch(Xn.getTransfer(i)){case s0:return[t,"LinearTransferOETF"];case Ti:return[t,"sRGBTransferOETF"];default:return Ie("WebGLProgram: Unsupported color space: ",i),[t,"LinearTransferOETF"]}}function NE(i,t,e){const n=i.getShaderParameter(t,i.COMPILE_STATUS),s=(i.getShaderInfoLog(t)||"").trim();if(n&&s==="")return"";const o=/ERROR: 0:(\d+)/.exec(s);if(o){const c=parseInt(o[1]);return e.toUpperCase()+`

`+s+`

`+W6(i.getShaderSource(t),c)}else return s}function X6(i,t){const e=q6(t);return[`vec4 ${i}( vec4 value ) {`,`	return ${e[1]}( vec4( value.rgb * ${e[0]}, value.a ) );`,"}"].join(`
`)}const Y6={[A2]:"Linear",[E2]:"Reinhard",[w2]:"Cineon",[u1]:"ACESFilmic",[R2]:"AgX",[D2]:"Neutral",[C2]:"Custom"};function Z6(i,t){const e=Y6[t];return e===void 0?(Ie("WebGLProgram: Unsupported toneMapping:",t),"vec3 "+i+"( vec3 color ) { return LinearToneMapping( color ); }"):"vec3 "+i+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}const Cy=new pt;function K6(){Xn.getLuminanceCoefficients(Cy);const i=Cy.x.toFixed(4),t=Cy.y.toFixed(4),e=Cy.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${t}, ${e} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Q6(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Og).join(`
`)}function J6(i){const t=[];for(const e in i){const n=i[e];n!==!1&&t.push("#define "+e+" "+n)}return t.join(`
`)}function $6(i,t){const e={},n=i.getProgramParameter(t,i.ACTIVE_ATTRIBUTES);for(let a=0;a<n;a++){const s=i.getActiveAttrib(t,a),o=s.name;let c=1;s.type===i.FLOAT_MAT2&&(c=2),s.type===i.FLOAT_MAT3&&(c=3),s.type===i.FLOAT_MAT4&&(c=4),e[o]={type:s.type,location:i.getAttribLocation(t,o),locationSize:c}}return e}function Og(i){return i!==""}function UE(i,t){const e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function IE(i,t){return i.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const tF=/^[ \t]*#include +<([\w\d./]+)>/gm;function Fb(i){return i.replace(tF,nF)}const eF=new Map;function nF(i,t){let e=Ln[t];if(e===void 0){const n=eF.get(t);if(n!==void 0)e=Ln[n],Ie('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,n);else throw new Error("Can not resolve #include <"+t+">")}return Fb(e)}const iF=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function PE(i){return i.replace(iF,aF)}function aF(i,t,e,n){let a="";for(let s=parseInt(t);s<parseInt(e);s++)a+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return a}function zE(i){let t=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?t+=`
#define HIGH_PRECISION`:i.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}const sF={[Fp]:"SHADOWMAP_TYPE_PCF",[Xh]:"SHADOWMAP_TYPE_VSM"};function rF(i){return sF[i.shadowMapType]||"SHADOWMAP_TYPE_BASIC"}const oF={[kc]:"ENVMAP_TYPE_CUBE",[Bf]:"ENVMAP_TYPE_CUBE",[nm]:"ENVMAP_TYPE_CUBE_UV"};function lF(i){return i.envMap===!1?"ENVMAP_TYPE_CUBE":oF[i.envMapMode]||"ENVMAP_TYPE_CUBE"}const cF={[Bf]:"ENVMAP_MODE_REFRACTION"};function uF(i){return i.envMap===!1?"ENVMAP_MODE_REFLECTION":cF[i.envMapMode]||"ENVMAP_MODE_REFLECTION"}const fF={[A0]:"ENVMAP_BLENDING_MULTIPLY",[EC]:"ENVMAP_BLENDING_MIX",[wC]:"ENVMAP_BLENDING_ADD"};function hF(i){return i.envMap===!1?"ENVMAP_BLENDING_NONE":fF[i.combine]||"ENVMAP_BLENDING_NONE"}function dF(i){const t=i.envMapCubeUVHeight;if(t===null)return null;const e=Math.log2(t)-2,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),112)),texelHeight:n,maxMip:e}}function pF(i,t,e,n){const a=i.getContext(),s=e.defines;let o=e.vertexShader,c=e.fragmentShader;const f=rF(e),d=lF(e),g=uF(e),y=hF(e),x=dF(e),b=Q6(e),T=J6(s),R=a.createProgram();let C,w,N=e.glslVersion?"#version "+e.glslVersion+`
`:"";e.isRawShaderMaterial?(C=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,T].filter(Og).join(`
`),C.length>0&&(C+=`
`),w=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,T].filter(Og).join(`
`),w.length>0&&(w+=`
`)):(C=[zE(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,T,e.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",e.batching?"#define USE_BATCHING":"",e.batchingColor?"#define USE_BATCHING_COLOR":"",e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.instancingMorph?"#define USE_INSTANCING_MORPH":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+g:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.displacementMap?"#define USE_DISPLACEMENTMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.mapUv?"#define MAP_UV "+e.mapUv:"",e.alphaMapUv?"#define ALPHAMAP_UV "+e.alphaMapUv:"",e.lightMapUv?"#define LIGHTMAP_UV "+e.lightMapUv:"",e.aoMapUv?"#define AOMAP_UV "+e.aoMapUv:"",e.emissiveMapUv?"#define EMISSIVEMAP_UV "+e.emissiveMapUv:"",e.bumpMapUv?"#define BUMPMAP_UV "+e.bumpMapUv:"",e.normalMapUv?"#define NORMALMAP_UV "+e.normalMapUv:"",e.displacementMapUv?"#define DISPLACEMENTMAP_UV "+e.displacementMapUv:"",e.metalnessMapUv?"#define METALNESSMAP_UV "+e.metalnessMapUv:"",e.roughnessMapUv?"#define ROUGHNESSMAP_UV "+e.roughnessMapUv:"",e.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+e.anisotropyMapUv:"",e.clearcoatMapUv?"#define CLEARCOATMAP_UV "+e.clearcoatMapUv:"",e.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+e.clearcoatNormalMapUv:"",e.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+e.clearcoatRoughnessMapUv:"",e.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+e.iridescenceMapUv:"",e.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+e.iridescenceThicknessMapUv:"",e.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+e.sheenColorMapUv:"",e.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+e.sheenRoughnessMapUv:"",e.specularMapUv?"#define SPECULARMAP_UV "+e.specularMapUv:"",e.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+e.specularColorMapUv:"",e.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+e.specularIntensityMapUv:"",e.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+e.transmissionMapUv:"",e.thicknessMapUv?"#define THICKNESSMAP_UV "+e.thicknessMapUv:"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.morphColors?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+f:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",e.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Og).join(`
`),w=[zE(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,T,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+d:"",e.envMap?"#define "+g:"",e.envMap?"#define "+y:"",x?"#define CUBEUV_TEXEL_WIDTH "+x.texelWidth:"",x?"#define CUBEUV_TEXEL_HEIGHT "+x.texelHeight:"",x?"#define CUBEUV_MAX_MIP "+x.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.dispersion?"#define USE_DISPERSION":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor||e.batchingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+f:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",e.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",e.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==fl?"#define TONE_MAPPING":"",e.toneMapping!==fl?Ln.tonemapping_pars_fragment:"",e.toneMapping!==fl?Z6("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",Ln.colorspace_pars_fragment,X6("linearToOutputTexel",e.outputColorSpace),K6(),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(Og).join(`
`)),o=Fb(o),o=UE(o,e),o=IE(o,e),c=Fb(c),c=UE(c,e),c=IE(c,e),o=PE(o),c=PE(c),e.isRawShaderMaterial!==!0&&(N=`#version 300 es
`,C=[b,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+C,w=["#define varying in",e.glslVersion===Cb?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===Cb?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+w);const I=N+C+o,z=N+w+c,F=LE(a,a.VERTEX_SHADER,I),H=LE(a,a.FRAGMENT_SHADER,z);a.attachShader(R,F),a.attachShader(R,H),e.index0AttributeName!==void 0?a.bindAttribLocation(R,0,e.index0AttributeName):e.morphTargets===!0&&a.bindAttribLocation(R,0,"position"),a.linkProgram(R);function q(Q){if(i.debug.checkShaderErrors){const J=a.getProgramInfoLog(R)||"",rt=a.getShaderInfoLog(F)||"",ut=a.getShaderInfoLog(H)||"",vt=J.trim(),j=rt.trim(),K=ut.trim();let et=!0,dt=!0;if(a.getProgramParameter(R,a.LINK_STATUS)===!1)if(et=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(a,R,F,H);else{const lt=NE(a,F,"vertex"),G=NE(a,H,"fragment");rn("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(R,a.VALIDATE_STATUS)+`

Material Name: `+Q.name+`
Material Type: `+Q.type+`

Program Info Log: `+vt+`
`+lt+`
`+G)}else vt!==""?Ie("WebGLProgram: Program Info Log:",vt):(j===""||K==="")&&(dt=!1);dt&&(Q.diagnostics={runnable:et,programLog:vt,vertexShader:{log:j,prefix:C},fragmentShader:{log:K,prefix:w}})}a.deleteShader(F),a.deleteShader(H),Z=new Yy(a,R),B=$6(a,R)}let Z;this.getUniforms=function(){return Z===void 0&&q(this),Z};let B;this.getAttributes=function(){return B===void 0&&q(this),B};let V=e.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return V===!1&&(V=a.getProgramParameter(R,G6)),V},this.destroy=function(){n.releaseStatesOfProgram(this),a.deleteProgram(R),this.program=void 0},this.type=e.shaderType,this.name=e.shaderName,this.id=j6++,this.cacheKey=t,this.usedTimes=1,this.program=R,this.vertexShader=F,this.fragmentShader=H,this}let mF=0;class gF{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,a=this._getShaderStage(e),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(t);return o.has(a)===!1&&(o.add(a),a.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return n===void 0&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return n===void 0&&(n=new vF(t),e.set(t,n)),n}}class vF{constructor(t){this.id=mF++,this.code=t,this.usedTimes=0}}function yF(i,t,e,n,a,s,o){const c=new Xp,f=new gF,d=new Set,g=[],y=new Map,x=a.logarithmicDepthBuffer;let b=a.precision;const T={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distance",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function R(B){return d.add(B),B===0?"uv":`uv${B}`}function C(B,V,Q,J,rt){const ut=J.fog,vt=rt.geometry,j=B.isMeshStandardMaterial?J.environment:null,K=(B.isMeshStandardMaterial?e:t).get(B.envMap||j),et=K&&K.mapping===nm?K.image.height:null,dt=T[B.type];B.precision!==null&&(b=a.getMaxPrecision(B.precision),b!==B.precision&&Ie("WebGLProgram.getParameters:",B.precision,"not supported, using",b,"instead."));const lt=vt.morphAttributes.position||vt.morphAttributes.normal||vt.morphAttributes.color,G=lt!==void 0?lt.length:0;let nt=0;vt.morphAttributes.position!==void 0&&(nt=1),vt.morphAttributes.normal!==void 0&&(nt=2),vt.morphAttributes.color!==void 0&&(nt=3);let ft,mt,xt,ht;if(dt){const qe=Kl[dt];ft=qe.vertexShader,mt=qe.fragmentShader}else ft=B.vertexShader,mt=B.fragmentShader,f.update(B),xt=f.getVertexShaderID(B),ht=f.getFragmentShaderID(B);const _t=i.getRenderTarget(),At=i.state.buffers.depth.getReversed(),$t=rt.isInstancedMesh===!0,te=rt.isBatchedMesh===!0,qt=!!B.map,ne=!!B.matcap,Se=!!K,Nt=!!B.aoMap,Vt=!!B.lightMap,Ft=!!B.bumpMap,re=!!B.normalMap,at=!!B.displacementMap,ue=!!B.emissiveMap,Zt=!!B.metalnessMap,Lt=!!B.roughnessMap,ee=B.anisotropy>0,$=B.clearcoat>0,Y=B.dispersion>0,yt=B.iridescence>0,Bt=B.sheen>0,Dt=B.transmission>0,Ct=ee&&!!B.anisotropyMap,ve=$&&!!B.clearcoatMap,he=$&&!!B.clearcoatNormalMap,be=$&&!!B.clearcoatRoughnessMap,Ce=yt&&!!B.iridescenceMap,Gt=yt&&!!B.iridescenceThicknessMap,Qt=Bt&&!!B.sheenColorMap,se=Bt&&!!B.sheenRoughnessMap,gt=!!B.specularMap,wt=!!B.specularColorMap,xe=!!B.specularIntensityMap,St=Dt&&!!B.transmissionMap,ie=Dt&&!!B.thicknessMap,le=!!B.gradientMap,Ae=!!B.alphaMap,ce=B.alphaTest>0,jt=!!B.alphaHash,me=!!B.extensions;let Re=fl;B.toneMapped&&(_t===null||_t.isXRRenderTarget===!0)&&(Re=i.toneMapping);const Le={shaderID:dt,shaderType:B.type,shaderName:B.name,vertexShader:ft,fragmentShader:mt,defines:B.defines,customVertexShaderID:xt,customFragmentShaderID:ht,isRawShaderMaterial:B.isRawShaderMaterial===!0,glslVersion:B.glslVersion,precision:b,batching:te,batchingColor:te&&rt._colorsTexture!==null,instancing:$t,instancingColor:$t&&rt.instanceColor!==null,instancingMorph:$t&&rt.morphTexture!==null,outputColorSpace:_t===null?i.outputColorSpace:_t.isXRRenderTarget===!0?_t.texture.colorSpace:Ff,alphaToCoverage:!!B.alphaToCoverage,map:qt,matcap:ne,envMap:Se,envMapMode:Se&&K.mapping,envMapCubeUVHeight:et,aoMap:Nt,lightMap:Vt,bumpMap:Ft,normalMap:re,displacementMap:at,emissiveMap:ue,normalMapObjectSpace:re&&B.normalMapType===UC,normalMapTangentSpace:re&&B.normalMapType===jf,metalnessMap:Zt,roughnessMap:Lt,anisotropy:ee,anisotropyMap:Ct,clearcoat:$,clearcoatMap:ve,clearcoatNormalMap:he,clearcoatRoughnessMap:be,dispersion:Y,iridescence:yt,iridescenceMap:Ce,iridescenceThicknessMap:Gt,sheen:Bt,sheenColorMap:Qt,sheenRoughnessMap:se,specularMap:gt,specularColorMap:wt,specularIntensityMap:xe,transmission:Dt,transmissionMap:St,thicknessMap:ie,gradientMap:le,opaque:B.transparent===!1&&B.blending===$h&&B.alphaToCoverage===!1,alphaMap:Ae,alphaTest:ce,alphaHash:jt,combine:B.combine,mapUv:qt&&R(B.map.channel),aoMapUv:Nt&&R(B.aoMap.channel),lightMapUv:Vt&&R(B.lightMap.channel),bumpMapUv:Ft&&R(B.bumpMap.channel),normalMapUv:re&&R(B.normalMap.channel),displacementMapUv:at&&R(B.displacementMap.channel),emissiveMapUv:ue&&R(B.emissiveMap.channel),metalnessMapUv:Zt&&R(B.metalnessMap.channel),roughnessMapUv:Lt&&R(B.roughnessMap.channel),anisotropyMapUv:Ct&&R(B.anisotropyMap.channel),clearcoatMapUv:ve&&R(B.clearcoatMap.channel),clearcoatNormalMapUv:he&&R(B.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:be&&R(B.clearcoatRoughnessMap.channel),iridescenceMapUv:Ce&&R(B.iridescenceMap.channel),iridescenceThicknessMapUv:Gt&&R(B.iridescenceThicknessMap.channel),sheenColorMapUv:Qt&&R(B.sheenColorMap.channel),sheenRoughnessMapUv:se&&R(B.sheenRoughnessMap.channel),specularMapUv:gt&&R(B.specularMap.channel),specularColorMapUv:wt&&R(B.specularColorMap.channel),specularIntensityMapUv:xe&&R(B.specularIntensityMap.channel),transmissionMapUv:St&&R(B.transmissionMap.channel),thicknessMapUv:ie&&R(B.thicknessMap.channel),alphaMapUv:Ae&&R(B.alphaMap.channel),vertexTangents:!!vt.attributes.tangent&&(re||ee),vertexColors:B.vertexColors,vertexAlphas:B.vertexColors===!0&&!!vt.attributes.color&&vt.attributes.color.itemSize===4,pointsUvs:rt.isPoints===!0&&!!vt.attributes.uv&&(qt||Ae),fog:!!ut,useFog:B.fog===!0,fogExp2:!!ut&&ut.isFogExp2,flatShading:B.flatShading===!0&&B.wireframe===!1,sizeAttenuation:B.sizeAttenuation===!0,logarithmicDepthBuffer:x,reversedDepthBuffer:At,skinning:rt.isSkinnedMesh===!0,morphTargets:vt.morphAttributes.position!==void 0,morphNormals:vt.morphAttributes.normal!==void 0,morphColors:vt.morphAttributes.color!==void 0,morphTargetsCount:G,morphTextureStride:nt,numDirLights:V.directional.length,numPointLights:V.point.length,numSpotLights:V.spot.length,numSpotLightMaps:V.spotLightMap.length,numRectAreaLights:V.rectArea.length,numHemiLights:V.hemi.length,numDirLightShadows:V.directionalShadowMap.length,numPointLightShadows:V.pointShadowMap.length,numSpotLightShadows:V.spotShadowMap.length,numSpotLightShadowsWithMaps:V.numSpotLightShadowsWithMaps,numLightProbes:V.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:B.dithering,shadowMapEnabled:i.shadowMap.enabled&&Q.length>0,shadowMapType:i.shadowMap.type,toneMapping:Re,decodeVideoTexture:qt&&B.map.isVideoTexture===!0&&Xn.getTransfer(B.map.colorSpace)===Ti,decodeVideoTextureEmissive:ue&&B.emissiveMap.isVideoTexture===!0&&Xn.getTransfer(B.emissiveMap.colorSpace)===Ti,premultipliedAlpha:B.premultipliedAlpha,doubleSided:B.side===cl,flipSided:B.side===Vr,useDepthPacking:B.depthPacking>=0,depthPacking:B.depthPacking||0,index0AttributeName:B.index0AttributeName,extensionClipCullDistance:me&&B.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(me&&B.extensions.multiDraw===!0||te)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:B.customProgramCacheKey()};return Le.vertexUv1s=d.has(1),Le.vertexUv2s=d.has(2),Le.vertexUv3s=d.has(3),d.clear(),Le}function w(B){const V=[];if(B.shaderID?V.push(B.shaderID):(V.push(B.customVertexShaderID),V.push(B.customFragmentShaderID)),B.defines!==void 0)for(const Q in B.defines)V.push(Q),V.push(B.defines[Q]);return B.isRawShaderMaterial===!1&&(N(V,B),I(V,B),V.push(i.outputColorSpace)),V.push(B.customProgramCacheKey),V.join()}function N(B,V){B.push(V.precision),B.push(V.outputColorSpace),B.push(V.envMapMode),B.push(V.envMapCubeUVHeight),B.push(V.mapUv),B.push(V.alphaMapUv),B.push(V.lightMapUv),B.push(V.aoMapUv),B.push(V.bumpMapUv),B.push(V.normalMapUv),B.push(V.displacementMapUv),B.push(V.emissiveMapUv),B.push(V.metalnessMapUv),B.push(V.roughnessMapUv),B.push(V.anisotropyMapUv),B.push(V.clearcoatMapUv),B.push(V.clearcoatNormalMapUv),B.push(V.clearcoatRoughnessMapUv),B.push(V.iridescenceMapUv),B.push(V.iridescenceThicknessMapUv),B.push(V.sheenColorMapUv),B.push(V.sheenRoughnessMapUv),B.push(V.specularMapUv),B.push(V.specularColorMapUv),B.push(V.specularIntensityMapUv),B.push(V.transmissionMapUv),B.push(V.thicknessMapUv),B.push(V.combine),B.push(V.fogExp2),B.push(V.sizeAttenuation),B.push(V.morphTargetsCount),B.push(V.morphAttributeCount),B.push(V.numDirLights),B.push(V.numPointLights),B.push(V.numSpotLights),B.push(V.numSpotLightMaps),B.push(V.numHemiLights),B.push(V.numRectAreaLights),B.push(V.numDirLightShadows),B.push(V.numPointLightShadows),B.push(V.numSpotLightShadows),B.push(V.numSpotLightShadowsWithMaps),B.push(V.numLightProbes),B.push(V.shadowMapType),B.push(V.toneMapping),B.push(V.numClippingPlanes),B.push(V.numClipIntersection),B.push(V.depthPacking)}function I(B,V){c.disableAll(),V.instancing&&c.enable(0),V.instancingColor&&c.enable(1),V.instancingMorph&&c.enable(2),V.matcap&&c.enable(3),V.envMap&&c.enable(4),V.normalMapObjectSpace&&c.enable(5),V.normalMapTangentSpace&&c.enable(6),V.clearcoat&&c.enable(7),V.iridescence&&c.enable(8),V.alphaTest&&c.enable(9),V.vertexColors&&c.enable(10),V.vertexAlphas&&c.enable(11),V.vertexUv1s&&c.enable(12),V.vertexUv2s&&c.enable(13),V.vertexUv3s&&c.enable(14),V.vertexTangents&&c.enable(15),V.anisotropy&&c.enable(16),V.alphaHash&&c.enable(17),V.batching&&c.enable(18),V.dispersion&&c.enable(19),V.batchingColor&&c.enable(20),V.gradientMap&&c.enable(21),B.push(c.mask),c.disableAll(),V.fog&&c.enable(0),V.useFog&&c.enable(1),V.flatShading&&c.enable(2),V.logarithmicDepthBuffer&&c.enable(3),V.reversedDepthBuffer&&c.enable(4),V.skinning&&c.enable(5),V.morphTargets&&c.enable(6),V.morphNormals&&c.enable(7),V.morphColors&&c.enable(8),V.premultipliedAlpha&&c.enable(9),V.shadowMapEnabled&&c.enable(10),V.doubleSided&&c.enable(11),V.flipSided&&c.enable(12),V.useDepthPacking&&c.enable(13),V.dithering&&c.enable(14),V.transmission&&c.enable(15),V.sheen&&c.enable(16),V.opaque&&c.enable(17),V.pointsUvs&&c.enable(18),V.decodeVideoTexture&&c.enable(19),V.decodeVideoTextureEmissive&&c.enable(20),V.alphaToCoverage&&c.enable(21),B.push(c.mask)}function z(B){const V=T[B.type];let Q;if(V){const J=Kl[V];Q=G2.clone(J.uniforms)}else Q=B.uniforms;return Q}function F(B,V){let Q=y.get(V);return Q!==void 0?++Q.usedTimes:(Q=new pF(i,V,B,s),g.push(Q),y.set(V,Q)),Q}function H(B){if(--B.usedTimes===0){const V=g.indexOf(B);g[V]=g[g.length-1],g.pop(),y.delete(B.cacheKey),B.destroy()}}function q(B){f.remove(B)}function Z(){f.dispose()}return{getParameters:C,getProgramCacheKey:w,getUniforms:z,acquireProgram:F,releaseProgram:H,releaseShaderCache:q,programs:g,dispose:Z}}function _F(){let i=new WeakMap;function t(o){return i.has(o)}function e(o){let c=i.get(o);return c===void 0&&(c={},i.set(o,c)),c}function n(o){i.delete(o)}function a(o,c,f){i.get(o)[c]=f}function s(){i=new WeakMap}return{has:t,get:e,remove:n,update:a,dispose:s}}function xF(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.material.id!==t.material.id?i.material.id-t.material.id:i.z!==t.z?i.z-t.z:i.id-t.id}function BE(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.z!==t.z?t.z-i.z:i.id-t.id}function FE(){const i=[];let t=0;const e=[],n=[],a=[];function s(){t=0,e.length=0,n.length=0,a.length=0}function o(y,x,b,T,R,C){let w=i[t];return w===void 0?(w={id:y.id,object:y,geometry:x,material:b,groupOrder:T,renderOrder:y.renderOrder,z:R,group:C},i[t]=w):(w.id=y.id,w.object=y,w.geometry=x,w.material=b,w.groupOrder=T,w.renderOrder=y.renderOrder,w.z=R,w.group=C),t++,w}function c(y,x,b,T,R,C){const w=o(y,x,b,T,R,C);b.transmission>0?n.push(w):b.transparent===!0?a.push(w):e.push(w)}function f(y,x,b,T,R,C){const w=o(y,x,b,T,R,C);b.transmission>0?n.unshift(w):b.transparent===!0?a.unshift(w):e.unshift(w)}function d(y,x){e.length>1&&e.sort(y||xF),n.length>1&&n.sort(x||BE),a.length>1&&a.sort(x||BE)}function g(){for(let y=t,x=i.length;y<x;y++){const b=i[y];if(b.id===null)break;b.id=null,b.object=null,b.geometry=null,b.material=null,b.group=null}}return{opaque:e,transmissive:n,transparent:a,init:s,push:c,unshift:f,finish:g,sort:d}}function SF(){let i=new WeakMap;function t(n,a){const s=i.get(n);let o;return s===void 0?(o=new FE,i.set(n,[o])):a>=s.length?(o=new FE,s.push(o)):o=s[a],o}function e(){i=new WeakMap}return{get:t,dispose:e}}function bF(){const i={};return{get:function(t){if(i[t.id]!==void 0)return i[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new pt,color:new He};break;case"SpotLight":e={position:new pt,direction:new pt,color:new He,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new pt,color:new He,distance:0,decay:0};break;case"HemisphereLight":e={direction:new pt,skyColor:new He,groundColor:new He};break;case"RectAreaLight":e={color:new He,position:new pt,halfWidth:new pt,halfHeight:new pt};break}return i[t.id]=e,e}}}function MF(){const i={};return{get:function(t){if(i[t.id]!==void 0)return i[t.id];let e;switch(t.type){case"DirectionalLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new de};break;case"SpotLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new de};break;case"PointLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new de,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[t.id]=e,e}}}let TF=0;function AF(i,t){return(t.castShadow?2:0)-(i.castShadow?2:0)+(t.map?1:0)-(i.map?1:0)}function EF(i){const t=new bF,e=MF(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let d=0;d<9;d++)n.probe.push(new pt);const a=new pt,s=new gn,o=new gn;function c(d){let g=0,y=0,x=0;for(let B=0;B<9;B++)n.probe[B].set(0,0,0);let b=0,T=0,R=0,C=0,w=0,N=0,I=0,z=0,F=0,H=0,q=0;d.sort(AF);for(let B=0,V=d.length;B<V;B++){const Q=d[B],J=Q.color,rt=Q.intensity,ut=Q.distance;let vt=null;if(Q.shadow&&Q.shadow.map&&(Q.shadow.map.texture.format===rd?vt=Q.shadow.map.texture:vt=Q.shadow.map.depthTexture||Q.shadow.map.texture),Q.isAmbientLight)g+=J.r*rt,y+=J.g*rt,x+=J.b*rt;else if(Q.isLightProbe){for(let j=0;j<9;j++)n.probe[j].addScaledVector(Q.sh.coefficients[j],rt);q++}else if(Q.isDirectionalLight){const j=t.get(Q);if(j.color.copy(Q.color).multiplyScalar(Q.intensity),Q.castShadow){const K=Q.shadow,et=e.get(Q);et.shadowIntensity=K.intensity,et.shadowBias=K.bias,et.shadowNormalBias=K.normalBias,et.shadowRadius=K.radius,et.shadowMapSize=K.mapSize,n.directionalShadow[b]=et,n.directionalShadowMap[b]=vt,n.directionalShadowMatrix[b]=Q.shadow.matrix,N++}n.directional[b]=j,b++}else if(Q.isSpotLight){const j=t.get(Q);j.position.setFromMatrixPosition(Q.matrixWorld),j.color.copy(J).multiplyScalar(rt),j.distance=ut,j.coneCos=Math.cos(Q.angle),j.penumbraCos=Math.cos(Q.angle*(1-Q.penumbra)),j.decay=Q.decay,n.spot[R]=j;const K=Q.shadow;if(Q.map&&(n.spotLightMap[F]=Q.map,F++,K.updateMatrices(Q),Q.castShadow&&H++),n.spotLightMatrix[R]=K.matrix,Q.castShadow){const et=e.get(Q);et.shadowIntensity=K.intensity,et.shadowBias=K.bias,et.shadowNormalBias=K.normalBias,et.shadowRadius=K.radius,et.shadowMapSize=K.mapSize,n.spotShadow[R]=et,n.spotShadowMap[R]=vt,z++}R++}else if(Q.isRectAreaLight){const j=t.get(Q);j.color.copy(J).multiplyScalar(rt),j.halfWidth.set(Q.width*.5,0,0),j.halfHeight.set(0,Q.height*.5,0),n.rectArea[C]=j,C++}else if(Q.isPointLight){const j=t.get(Q);if(j.color.copy(Q.color).multiplyScalar(Q.intensity),j.distance=Q.distance,j.decay=Q.decay,Q.castShadow){const K=Q.shadow,et=e.get(Q);et.shadowIntensity=K.intensity,et.shadowBias=K.bias,et.shadowNormalBias=K.normalBias,et.shadowRadius=K.radius,et.shadowMapSize=K.mapSize,et.shadowCameraNear=K.camera.near,et.shadowCameraFar=K.camera.far,n.pointShadow[T]=et,n.pointShadowMap[T]=vt,n.pointShadowMatrix[T]=Q.shadow.matrix,I++}n.point[T]=j,T++}else if(Q.isHemisphereLight){const j=t.get(Q);j.skyColor.copy(Q.color).multiplyScalar(rt),j.groundColor.copy(Q.groundColor).multiplyScalar(rt),n.hemi[w]=j,w++}}C>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Fe.LTC_FLOAT_1,n.rectAreaLTC2=Fe.LTC_FLOAT_2):(n.rectAreaLTC1=Fe.LTC_HALF_1,n.rectAreaLTC2=Fe.LTC_HALF_2)),n.ambient[0]=g,n.ambient[1]=y,n.ambient[2]=x;const Z=n.hash;(Z.directionalLength!==b||Z.pointLength!==T||Z.spotLength!==R||Z.rectAreaLength!==C||Z.hemiLength!==w||Z.numDirectionalShadows!==N||Z.numPointShadows!==I||Z.numSpotShadows!==z||Z.numSpotMaps!==F||Z.numLightProbes!==q)&&(n.directional.length=b,n.spot.length=R,n.rectArea.length=C,n.point.length=T,n.hemi.length=w,n.directionalShadow.length=N,n.directionalShadowMap.length=N,n.pointShadow.length=I,n.pointShadowMap.length=I,n.spotShadow.length=z,n.spotShadowMap.length=z,n.directionalShadowMatrix.length=N,n.pointShadowMatrix.length=I,n.spotLightMatrix.length=z+F-H,n.spotLightMap.length=F,n.numSpotLightShadowsWithMaps=H,n.numLightProbes=q,Z.directionalLength=b,Z.pointLength=T,Z.spotLength=R,Z.rectAreaLength=C,Z.hemiLength=w,Z.numDirectionalShadows=N,Z.numPointShadows=I,Z.numSpotShadows=z,Z.numSpotMaps=F,Z.numLightProbes=q,n.version=TF++)}function f(d,g){let y=0,x=0,b=0,T=0,R=0;const C=g.matrixWorldInverse;for(let w=0,N=d.length;w<N;w++){const I=d[w];if(I.isDirectionalLight){const z=n.directional[y];z.direction.setFromMatrixPosition(I.matrixWorld),a.setFromMatrixPosition(I.target.matrixWorld),z.direction.sub(a),z.direction.transformDirection(C),y++}else if(I.isSpotLight){const z=n.spot[b];z.position.setFromMatrixPosition(I.matrixWorld),z.position.applyMatrix4(C),z.direction.setFromMatrixPosition(I.matrixWorld),a.setFromMatrixPosition(I.target.matrixWorld),z.direction.sub(a),z.direction.transformDirection(C),b++}else if(I.isRectAreaLight){const z=n.rectArea[T];z.position.setFromMatrixPosition(I.matrixWorld),z.position.applyMatrix4(C),o.identity(),s.copy(I.matrixWorld),s.premultiply(C),o.extractRotation(s),z.halfWidth.set(I.width*.5,0,0),z.halfHeight.set(0,I.height*.5,0),z.halfWidth.applyMatrix4(o),z.halfHeight.applyMatrix4(o),T++}else if(I.isPointLight){const z=n.point[x];z.position.setFromMatrixPosition(I.matrixWorld),z.position.applyMatrix4(C),x++}else if(I.isHemisphereLight){const z=n.hemi[R];z.direction.setFromMatrixPosition(I.matrixWorld),z.direction.transformDirection(C),R++}}}return{setup:c,setupView:f,state:n}}function kE(i){const t=new EF(i),e=[],n=[];function a(g){d.camera=g,e.length=0,n.length=0}function s(g){e.push(g)}function o(g){n.push(g)}function c(){t.setup(e)}function f(g){t.setupView(e,g)}const d={lightsArray:e,shadowsArray:n,camera:null,lights:t,transmissionRenderTarget:{}};return{init:a,state:d,setupLights:c,setupLightsView:f,pushLight:s,pushShadow:o}}function wF(i){let t=new WeakMap;function e(a,s=0){const o=t.get(a);let c;return o===void 0?(c=new kE(i),t.set(a,[c])):s>=o.length?(c=new kE(i),o.push(c)):c=o[s],c}function n(){t=new WeakMap}return{get:e,dispose:n}}const CF=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,RF=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ).rg;
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ).r;
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( max( 0.0, squared_mean - mean * mean ) );
	gl_FragColor = vec4( mean, std_dev, 0.0, 1.0 );
}`,DF=[new pt(1,0,0),new pt(-1,0,0),new pt(0,1,0),new pt(0,-1,0),new pt(0,0,1),new pt(0,0,-1)],LF=[new pt(0,-1,0),new pt(0,-1,0),new pt(0,0,1),new pt(0,0,-1),new pt(0,-1,0),new pt(0,-1,0)],VE=new gn,Tg=new pt,IS=new pt;function OF(i,t,e){let n=new im;const a=new de,s=new de,o=new Ri,c=new G1,f=new j1,d={},g=e.maxTextureSize,y={[Nu]:Vr,[Vr]:Nu,[cl]:cl},x=new pl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new de},radius:{value:4}},vertexShader:CF,fragmentShader:RF}),b=x.clone();b.defines.HORIZONTAL_PASS=1;const T=new wn;T.setAttribute("position",new Pi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const R=new ma(T,x),C=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Fp;let w=this.type;this.render=function(H,q,Z){if(C.enabled===!1||C.autoUpdate===!1&&C.needsUpdate===!1||H.length===0)return;H.type===Pg&&(Ie("WebGLShadowMap: PCFSoftShadowMap has been deprecated. Using PCFShadowMap instead."),H.type=Fp);const B=i.getRenderTarget(),V=i.getActiveCubeFace(),Q=i.getActiveMipmapLevel(),J=i.state;J.setBlending(zc),J.buffers.depth.getReversed()===!0?J.buffers.color.setClear(0,0,0,0):J.buffers.color.setClear(1,1,1,1),J.buffers.depth.setTest(!0),J.setScissorTest(!1);const rt=w!==this.type;rt&&q.traverse(function(ut){ut.material&&(Array.isArray(ut.material)?ut.material.forEach(vt=>vt.needsUpdate=!0):ut.material.needsUpdate=!0)});for(let ut=0,vt=H.length;ut<vt;ut++){const j=H[ut],K=j.shadow;if(K===void 0){Ie("WebGLShadowMap:",j,"has no shadow.");continue}if(K.autoUpdate===!1&&K.needsUpdate===!1)continue;a.copy(K.mapSize);const et=K.getFrameExtents();if(a.multiply(et),s.copy(K.mapSize),(a.x>g||a.y>g)&&(a.x>g&&(s.x=Math.floor(g/et.x),a.x=s.x*et.x,K.mapSize.x=s.x),a.y>g&&(s.y=Math.floor(g/et.y),a.y=s.y*et.y,K.mapSize.y=s.y)),K.map===null||rt===!0){if(K.map!==null&&(K.map.depthTexture!==null&&(K.map.depthTexture.dispose(),K.map.depthTexture=null),K.map.dispose()),this.type===Xh){if(j.isPointLight){Ie("WebGLShadowMap: VSM shadow maps are not supported for PointLights. Use PCF or BasicShadowMap instead.");continue}K.map=new ro(a.x,a.y,{format:rd,type:tc,minFilter:Di,magFilter:Di,generateMipmaps:!1}),K.map.texture.name=j.name+".shadowMap",K.map.depthTexture=new cd(a.x,a.y,ar),K.map.depthTexture.name=j.name+".shadowMapDepth",K.map.depthTexture.format=Vc,K.map.depthTexture.compareFunction=null,K.map.depthTexture.minFilter=Ba,K.map.depthTexture.magFilter=Ba}else{j.isPointLight?(K.map=new j2(a.x),K.map.depthTexture=new iR(a.x,dl)):(K.map=new ro(a.x,a.y),K.map.depthTexture=new cd(a.x,a.y,dl)),K.map.depthTexture.name=j.name+".shadowMap",K.map.depthTexture.format=Vc;const lt=i.state.buffers.depth.getReversed();this.type===Fp?(K.map.depthTexture.compareFunction=lt?x1:_1,K.map.depthTexture.minFilter=Di,K.map.depthTexture.magFilter=Di):(K.map.depthTexture.compareFunction=null,K.map.depthTexture.minFilter=Ba,K.map.depthTexture.magFilter=Ba)}K.camera.updateProjectionMatrix()}const dt=K.map.isWebGLCubeRenderTarget?6:1;for(let lt=0;lt<dt;lt++){if(K.map.isWebGLCubeRenderTarget)i.setRenderTarget(K.map,lt),i.clear();else{lt===0&&(i.setRenderTarget(K.map),i.clear());const G=K.getViewport(lt);o.set(s.x*G.x,s.y*G.y,s.x*G.z,s.y*G.w),J.viewport(o)}if(j.isPointLight){const G=K.camera,nt=K.matrix,ft=j.distance||G.far;ft!==G.far&&(G.far=ft,G.updateProjectionMatrix()),Tg.setFromMatrixPosition(j.matrixWorld),G.position.copy(Tg),IS.copy(G.position),IS.add(DF[lt]),G.up.copy(LF[lt]),G.lookAt(IS),G.updateMatrixWorld(),nt.makeTranslation(-Tg.x,-Tg.y,-Tg.z),VE.multiplyMatrices(G.projectionMatrix,G.matrixWorldInverse),K._frustum.setFromProjectionMatrix(VE,G.coordinateSystem,G.reversedDepth)}else K.updateMatrices(j);n=K.getFrustum(),z(q,Z,K.camera,j,this.type)}K.isPointLightShadow!==!0&&this.type===Xh&&N(K,Z),K.needsUpdate=!1}w=this.type,C.needsUpdate=!1,i.setRenderTarget(B,V,Q)};function N(H,q){const Z=t.update(R);x.defines.VSM_SAMPLES!==H.blurSamples&&(x.defines.VSM_SAMPLES=H.blurSamples,b.defines.VSM_SAMPLES=H.blurSamples,x.needsUpdate=!0,b.needsUpdate=!0),H.mapPass===null&&(H.mapPass=new ro(a.x,a.y,{format:rd,type:tc})),x.uniforms.shadow_pass.value=H.map.depthTexture,x.uniforms.resolution.value=H.mapSize,x.uniforms.radius.value=H.radius,i.setRenderTarget(H.mapPass),i.clear(),i.renderBufferDirect(q,null,Z,x,R,null),b.uniforms.shadow_pass.value=H.mapPass.texture,b.uniforms.resolution.value=H.mapSize,b.uniforms.radius.value=H.radius,i.setRenderTarget(H.map),i.clear(),i.renderBufferDirect(q,null,Z,b,R,null)}function I(H,q,Z,B){let V=null;const Q=Z.isPointLight===!0?H.customDistanceMaterial:H.customDepthMaterial;if(Q!==void 0)V=Q;else if(V=Z.isPointLight===!0?f:c,i.localClippingEnabled&&q.clipShadows===!0&&Array.isArray(q.clippingPlanes)&&q.clippingPlanes.length!==0||q.displacementMap&&q.displacementScale!==0||q.alphaMap&&q.alphaTest>0||q.map&&q.alphaTest>0||q.alphaToCoverage===!0){const J=V.uuid,rt=q.uuid;let ut=d[J];ut===void 0&&(ut={},d[J]=ut);let vt=ut[rt];vt===void 0&&(vt=V.clone(),ut[rt]=vt,q.addEventListener("dispose",F)),V=vt}if(V.visible=q.visible,V.wireframe=q.wireframe,B===Xh?V.side=q.shadowSide!==null?q.shadowSide:q.side:V.side=q.shadowSide!==null?q.shadowSide:y[q.side],V.alphaMap=q.alphaMap,V.alphaTest=q.alphaToCoverage===!0?.5:q.alphaTest,V.map=q.map,V.clipShadows=q.clipShadows,V.clippingPlanes=q.clippingPlanes,V.clipIntersection=q.clipIntersection,V.displacementMap=q.displacementMap,V.displacementScale=q.displacementScale,V.displacementBias=q.displacementBias,V.wireframeLinewidth=q.wireframeLinewidth,V.linewidth=q.linewidth,Z.isPointLight===!0&&V.isMeshDistanceMaterial===!0){const J=i.properties.get(V);J.light=Z}return V}function z(H,q,Z,B,V){if(H.visible===!1)return;if(H.layers.test(q.layers)&&(H.isMesh||H.isLine||H.isPoints)&&(H.castShadow||H.receiveShadow&&V===Xh)&&(!H.frustumCulled||n.intersectsObject(H))){H.modelViewMatrix.multiplyMatrices(Z.matrixWorldInverse,H.matrixWorld);const rt=t.update(H),ut=H.material;if(Array.isArray(ut)){const vt=rt.groups;for(let j=0,K=vt.length;j<K;j++){const et=vt[j],dt=ut[et.materialIndex];if(dt&&dt.visible){const lt=I(H,dt,B,V);H.onBeforeShadow(i,H,q,Z,rt,lt,et),i.renderBufferDirect(Z,null,rt,lt,H,et),H.onAfterShadow(i,H,q,Z,rt,lt,et)}}}else if(ut.visible){const vt=I(H,ut,B,V);H.onBeforeShadow(i,H,q,Z,rt,vt,null),i.renderBufferDirect(Z,null,rt,vt,H,null),H.onAfterShadow(i,H,q,Z,rt,vt,null)}}const J=H.children;for(let rt=0,ut=J.length;rt<ut;rt++)z(J[rt],q,Z,B,V)}function F(H){H.target.removeEventListener("dispose",F);for(const Z in d){const B=d[Z],V=H.target.uuid;V in B&&(B[V].dispose(),delete B[V])}}}const NF={[a_]:s_,[r_]:c_,[o_]:u_,[sd]:l_,[s_]:a_,[c_]:r_,[u_]:o_,[l_]:sd};function UF(i,t){function e(){let St=!1;const ie=new Ri;let le=null;const Ae=new Ri(0,0,0,0);return{setMask:function(ce){le!==ce&&!St&&(i.colorMask(ce,ce,ce,ce),le=ce)},setLocked:function(ce){St=ce},setClear:function(ce,jt,me,Re,Le){Le===!0&&(ce*=Re,jt*=Re,me*=Re),ie.set(ce,jt,me,Re),Ae.equals(ie)===!1&&(i.clearColor(ce,jt,me,Re),Ae.copy(ie))},reset:function(){St=!1,le=null,Ae.set(-1,0,0,0)}}}function n(){let St=!1,ie=!1,le=null,Ae=null,ce=null;return{setReversed:function(jt){if(ie!==jt){const me=t.get("EXT_clip_control");jt?me.clipControlEXT(me.LOWER_LEFT_EXT,me.ZERO_TO_ONE_EXT):me.clipControlEXT(me.LOWER_LEFT_EXT,me.NEGATIVE_ONE_TO_ONE_EXT),ie=jt;const Re=ce;ce=null,this.setClear(Re)}},getReversed:function(){return ie},setTest:function(jt){jt?_t(i.DEPTH_TEST):At(i.DEPTH_TEST)},setMask:function(jt){le!==jt&&!St&&(i.depthMask(jt),le=jt)},setFunc:function(jt){if(ie&&(jt=NF[jt]),Ae!==jt){switch(jt){case a_:i.depthFunc(i.NEVER);break;case s_:i.depthFunc(i.ALWAYS);break;case r_:i.depthFunc(i.LESS);break;case sd:i.depthFunc(i.LEQUAL);break;case o_:i.depthFunc(i.EQUAL);break;case l_:i.depthFunc(i.GEQUAL);break;case c_:i.depthFunc(i.GREATER);break;case u_:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}Ae=jt}},setLocked:function(jt){St=jt},setClear:function(jt){ce!==jt&&(ie&&(jt=1-jt),i.clearDepth(jt),ce=jt)},reset:function(){St=!1,le=null,Ae=null,ce=null,ie=!1}}}function a(){let St=!1,ie=null,le=null,Ae=null,ce=null,jt=null,me=null,Re=null,Le=null;return{setTest:function(qe){St||(qe?_t(i.STENCIL_TEST):At(i.STENCIL_TEST))},setMask:function(qe){ie!==qe&&!St&&(i.stencilMask(qe),ie=qe)},setFunc:function(qe,bn,Bn){(le!==qe||Ae!==bn||ce!==Bn)&&(i.stencilFunc(qe,bn,Bn),le=qe,Ae=bn,ce=Bn)},setOp:function(qe,bn,Bn){(jt!==qe||me!==bn||Re!==Bn)&&(i.stencilOp(qe,bn,Bn),jt=qe,me=bn,Re=Bn)},setLocked:function(qe){St=qe},setClear:function(qe){Le!==qe&&(i.clearStencil(qe),Le=qe)},reset:function(){St=!1,ie=null,le=null,Ae=null,ce=null,jt=null,me=null,Re=null,Le=null}}}const s=new e,o=new n,c=new a,f=new WeakMap,d=new WeakMap;let g={},y={},x=new WeakMap,b=[],T=null,R=!1,C=null,w=null,N=null,I=null,z=null,F=null,H=null,q=new He(0,0,0),Z=0,B=!1,V=null,Q=null,J=null,rt=null,ut=null;const vt=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let j=!1,K=0;const et=i.getParameter(i.VERSION);et.indexOf("WebGL")!==-1?(K=parseFloat(/^WebGL (\d)/.exec(et)[1]),j=K>=1):et.indexOf("OpenGL ES")!==-1&&(K=parseFloat(/^OpenGL ES (\d)/.exec(et)[1]),j=K>=2);let dt=null,lt={};const G=i.getParameter(i.SCISSOR_BOX),nt=i.getParameter(i.VIEWPORT),ft=new Ri().fromArray(G),mt=new Ri().fromArray(nt);function xt(St,ie,le,Ae){const ce=new Uint8Array(4),jt=i.createTexture();i.bindTexture(St,jt),i.texParameteri(St,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(St,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let me=0;me<le;me++)St===i.TEXTURE_3D||St===i.TEXTURE_2D_ARRAY?i.texImage3D(ie,0,i.RGBA,1,1,Ae,0,i.RGBA,i.UNSIGNED_BYTE,ce):i.texImage2D(ie+me,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,ce);return jt}const ht={};ht[i.TEXTURE_2D]=xt(i.TEXTURE_2D,i.TEXTURE_2D,1),ht[i.TEXTURE_CUBE_MAP]=xt(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),ht[i.TEXTURE_2D_ARRAY]=xt(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),ht[i.TEXTURE_3D]=xt(i.TEXTURE_3D,i.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),c.setClear(0),_t(i.DEPTH_TEST),o.setFunc(sd),Ft(!1),re(bb),_t(i.CULL_FACE),Nt(zc);function _t(St){g[St]!==!0&&(i.enable(St),g[St]=!0)}function At(St){g[St]!==!1&&(i.disable(St),g[St]=!1)}function $t(St,ie){return y[St]!==ie?(i.bindFramebuffer(St,ie),y[St]=ie,St===i.DRAW_FRAMEBUFFER&&(y[i.FRAMEBUFFER]=ie),St===i.FRAMEBUFFER&&(y[i.DRAW_FRAMEBUFFER]=ie),!0):!1}function te(St,ie){let le=b,Ae=!1;if(St){le=x.get(ie),le===void 0&&(le=[],x.set(ie,le));const ce=St.textures;if(le.length!==ce.length||le[0]!==i.COLOR_ATTACHMENT0){for(let jt=0,me=ce.length;jt<me;jt++)le[jt]=i.COLOR_ATTACHMENT0+jt;le.length=ce.length,Ae=!0}}else le[0]!==i.BACK&&(le[0]=i.BACK,Ae=!0);Ae&&i.drawBuffers(le)}function qt(St){return T!==St?(i.useProgram(St),T=St,!0):!1}const ne={[Of]:i.FUNC_ADD,[cC]:i.FUNC_SUBTRACT,[uC]:i.FUNC_REVERSE_SUBTRACT};ne[fC]=i.MIN,ne[hC]=i.MAX;const Se={[dC]:i.ZERO,[pC]:i.ONE,[mC]:i.SRC_COLOR,[n_]:i.SRC_ALPHA,[SC]:i.SRC_ALPHA_SATURATE,[_C]:i.DST_COLOR,[vC]:i.DST_ALPHA,[gC]:i.ONE_MINUS_SRC_COLOR,[i_]:i.ONE_MINUS_SRC_ALPHA,[xC]:i.ONE_MINUS_DST_COLOR,[yC]:i.ONE_MINUS_DST_ALPHA,[bC]:i.CONSTANT_COLOR,[MC]:i.ONE_MINUS_CONSTANT_COLOR,[TC]:i.CONSTANT_ALPHA,[AC]:i.ONE_MINUS_CONSTANT_ALPHA};function Nt(St,ie,le,Ae,ce,jt,me,Re,Le,qe){if(St===zc){R===!0&&(At(i.BLEND),R=!1);return}if(R===!1&&(_t(i.BLEND),R=!0),St!==lC){if(St!==C||qe!==B){if((w!==Of||z!==Of)&&(i.blendEquation(i.FUNC_ADD),w=Of,z=Of),qe)switch(St){case $h:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case Mb:i.blendFunc(i.ONE,i.ONE);break;case Tb:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case Ab:i.blendFuncSeparate(i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA,i.ZERO,i.ONE);break;default:rn("WebGLState: Invalid blending: ",St);break}else switch(St){case $h:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case Mb:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE,i.ONE,i.ONE);break;case Tb:rn("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case Ab:rn("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:rn("WebGLState: Invalid blending: ",St);break}N=null,I=null,F=null,H=null,q.set(0,0,0),Z=0,C=St,B=qe}return}ce=ce||ie,jt=jt||le,me=me||Ae,(ie!==w||ce!==z)&&(i.blendEquationSeparate(ne[ie],ne[ce]),w=ie,z=ce),(le!==N||Ae!==I||jt!==F||me!==H)&&(i.blendFuncSeparate(Se[le],Se[Ae],Se[jt],Se[me]),N=le,I=Ae,F=jt,H=me),(Re.equals(q)===!1||Le!==Z)&&(i.blendColor(Re.r,Re.g,Re.b,Le),q.copy(Re),Z=Le),C=St,B=!1}function Vt(St,ie){St.side===cl?At(i.CULL_FACE):_t(i.CULL_FACE);let le=St.side===Vr;ie&&(le=!le),Ft(le),St.blending===$h&&St.transparent===!1?Nt(zc):Nt(St.blending,St.blendEquation,St.blendSrc,St.blendDst,St.blendEquationAlpha,St.blendSrcAlpha,St.blendDstAlpha,St.blendColor,St.blendAlpha,St.premultipliedAlpha),o.setFunc(St.depthFunc),o.setTest(St.depthTest),o.setMask(St.depthWrite),s.setMask(St.colorWrite);const Ae=St.stencilWrite;c.setTest(Ae),Ae&&(c.setMask(St.stencilWriteMask),c.setFunc(St.stencilFunc,St.stencilRef,St.stencilFuncMask),c.setOp(St.stencilFail,St.stencilZFail,St.stencilZPass)),ue(St.polygonOffset,St.polygonOffsetFactor,St.polygonOffsetUnits),St.alphaToCoverage===!0?_t(i.SAMPLE_ALPHA_TO_COVERAGE):At(i.SAMPLE_ALPHA_TO_COVERAGE)}function Ft(St){V!==St&&(St?i.frontFace(i.CW):i.frontFace(i.CCW),V=St)}function re(St){St!==sC?(_t(i.CULL_FACE),St!==Q&&(St===bb?i.cullFace(i.BACK):St===rC?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):At(i.CULL_FACE),Q=St}function at(St){St!==J&&(j&&i.lineWidth(St),J=St)}function ue(St,ie,le){St?(_t(i.POLYGON_OFFSET_FILL),(rt!==ie||ut!==le)&&(i.polygonOffset(ie,le),rt=ie,ut=le)):At(i.POLYGON_OFFSET_FILL)}function Zt(St){St?_t(i.SCISSOR_TEST):At(i.SCISSOR_TEST)}function Lt(St){St===void 0&&(St=i.TEXTURE0+vt-1),dt!==St&&(i.activeTexture(St),dt=St)}function ee(St,ie,le){le===void 0&&(dt===null?le=i.TEXTURE0+vt-1:le=dt);let Ae=lt[le];Ae===void 0&&(Ae={type:void 0,texture:void 0},lt[le]=Ae),(Ae.type!==St||Ae.texture!==ie)&&(dt!==le&&(i.activeTexture(le),dt=le),i.bindTexture(St,ie||ht[St]),Ae.type=St,Ae.texture=ie)}function $(){const St=lt[dt];St!==void 0&&St.type!==void 0&&(i.bindTexture(St.type,null),St.type=void 0,St.texture=void 0)}function Y(){try{i.compressedTexImage2D(...arguments)}catch(St){rn("WebGLState:",St)}}function yt(){try{i.compressedTexImage3D(...arguments)}catch(St){rn("WebGLState:",St)}}function Bt(){try{i.texSubImage2D(...arguments)}catch(St){rn("WebGLState:",St)}}function Dt(){try{i.texSubImage3D(...arguments)}catch(St){rn("WebGLState:",St)}}function Ct(){try{i.compressedTexSubImage2D(...arguments)}catch(St){rn("WebGLState:",St)}}function ve(){try{i.compressedTexSubImage3D(...arguments)}catch(St){rn("WebGLState:",St)}}function he(){try{i.texStorage2D(...arguments)}catch(St){rn("WebGLState:",St)}}function be(){try{i.texStorage3D(...arguments)}catch(St){rn("WebGLState:",St)}}function Ce(){try{i.texImage2D(...arguments)}catch(St){rn("WebGLState:",St)}}function Gt(){try{i.texImage3D(...arguments)}catch(St){rn("WebGLState:",St)}}function Qt(St){ft.equals(St)===!1&&(i.scissor(St.x,St.y,St.z,St.w),ft.copy(St))}function se(St){mt.equals(St)===!1&&(i.viewport(St.x,St.y,St.z,St.w),mt.copy(St))}function gt(St,ie){let le=d.get(ie);le===void 0&&(le=new WeakMap,d.set(ie,le));let Ae=le.get(St);Ae===void 0&&(Ae=i.getUniformBlockIndex(ie,St.name),le.set(St,Ae))}function wt(St,ie){const Ae=d.get(ie).get(St);f.get(ie)!==Ae&&(i.uniformBlockBinding(ie,Ae,St.__bindingPointIndex),f.set(ie,Ae))}function xe(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),o.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),g={},dt=null,lt={},y={},x=new WeakMap,b=[],T=null,R=!1,C=null,w=null,N=null,I=null,z=null,F=null,H=null,q=new He(0,0,0),Z=0,B=!1,V=null,Q=null,J=null,rt=null,ut=null,ft.set(0,0,i.canvas.width,i.canvas.height),mt.set(0,0,i.canvas.width,i.canvas.height),s.reset(),o.reset(),c.reset()}return{buffers:{color:s,depth:o,stencil:c},enable:_t,disable:At,bindFramebuffer:$t,drawBuffers:te,useProgram:qt,setBlending:Nt,setMaterial:Vt,setFlipSided:Ft,setCullFace:re,setLineWidth:at,setPolygonOffset:ue,setScissorTest:Zt,activeTexture:Lt,bindTexture:ee,unbindTexture:$,compressedTexImage2D:Y,compressedTexImage3D:yt,texImage2D:Ce,texImage3D:Gt,updateUBOMapping:gt,uniformBlockBinding:wt,texStorage2D:he,texStorage3D:be,texSubImage2D:Bt,texSubImage3D:Dt,compressedTexSubImage2D:Ct,compressedTexSubImage3D:ve,scissor:Qt,viewport:se,reset:xe}}function IF(i,t,e,n,a,s,o){const c=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),d=new de,g=new WeakMap;let y;const x=new WeakMap;let b=!1;try{b=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function T($,Y){return b?new OffscreenCanvas($,Y):o0("canvas")}function R($,Y,yt){let Bt=1;const Dt=ee($);if((Dt.width>yt||Dt.height>yt)&&(Bt=yt/Math.max(Dt.width,Dt.height)),Bt<1)if(typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&$ instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&$ instanceof ImageBitmap||typeof VideoFrame<"u"&&$ instanceof VideoFrame){const Ct=Math.floor(Bt*Dt.width),ve=Math.floor(Bt*Dt.height);y===void 0&&(y=T(Ct,ve));const he=Y?T(Ct,ve):y;return he.width=Ct,he.height=ve,he.getContext("2d").drawImage($,0,0,Ct,ve),Ie("WebGLRenderer: Texture has been resized from ("+Dt.width+"x"+Dt.height+") to ("+Ct+"x"+ve+")."),he}else return"data"in $&&Ie("WebGLRenderer: Image in DataTexture is too big ("+Dt.width+"x"+Dt.height+")."),$;return $}function C($){return $.generateMipmaps}function w($){i.generateMipmap($)}function N($){return $.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:$.isWebGL3DRenderTarget?i.TEXTURE_3D:$.isWebGLArrayRenderTarget||$.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function I($,Y,yt,Bt,Dt=!1){if($!==null){if(i[$]!==void 0)return i[$];Ie("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+$+"'")}let Ct=Y;if(Y===i.RED&&(yt===i.FLOAT&&(Ct=i.R32F),yt===i.HALF_FLOAT&&(Ct=i.R16F),yt===i.UNSIGNED_BYTE&&(Ct=i.R8)),Y===i.RED_INTEGER&&(yt===i.UNSIGNED_BYTE&&(Ct=i.R8UI),yt===i.UNSIGNED_SHORT&&(Ct=i.R16UI),yt===i.UNSIGNED_INT&&(Ct=i.R32UI),yt===i.BYTE&&(Ct=i.R8I),yt===i.SHORT&&(Ct=i.R16I),yt===i.INT&&(Ct=i.R32I)),Y===i.RG&&(yt===i.FLOAT&&(Ct=i.RG32F),yt===i.HALF_FLOAT&&(Ct=i.RG16F),yt===i.UNSIGNED_BYTE&&(Ct=i.RG8)),Y===i.RG_INTEGER&&(yt===i.UNSIGNED_BYTE&&(Ct=i.RG8UI),yt===i.UNSIGNED_SHORT&&(Ct=i.RG16UI),yt===i.UNSIGNED_INT&&(Ct=i.RG32UI),yt===i.BYTE&&(Ct=i.RG8I),yt===i.SHORT&&(Ct=i.RG16I),yt===i.INT&&(Ct=i.RG32I)),Y===i.RGB_INTEGER&&(yt===i.UNSIGNED_BYTE&&(Ct=i.RGB8UI),yt===i.UNSIGNED_SHORT&&(Ct=i.RGB16UI),yt===i.UNSIGNED_INT&&(Ct=i.RGB32UI),yt===i.BYTE&&(Ct=i.RGB8I),yt===i.SHORT&&(Ct=i.RGB16I),yt===i.INT&&(Ct=i.RGB32I)),Y===i.RGBA_INTEGER&&(yt===i.UNSIGNED_BYTE&&(Ct=i.RGBA8UI),yt===i.UNSIGNED_SHORT&&(Ct=i.RGBA16UI),yt===i.UNSIGNED_INT&&(Ct=i.RGBA32UI),yt===i.BYTE&&(Ct=i.RGBA8I),yt===i.SHORT&&(Ct=i.RGBA16I),yt===i.INT&&(Ct=i.RGBA32I)),Y===i.RGB&&(yt===i.UNSIGNED_INT_5_9_9_9_REV&&(Ct=i.RGB9_E5),yt===i.UNSIGNED_INT_10F_11F_11F_REV&&(Ct=i.R11F_G11F_B10F)),Y===i.RGBA){const ve=Dt?s0:Xn.getTransfer(Bt);yt===i.FLOAT&&(Ct=i.RGBA32F),yt===i.HALF_FLOAT&&(Ct=i.RGBA16F),yt===i.UNSIGNED_BYTE&&(Ct=ve===Ti?i.SRGB8_ALPHA8:i.RGBA8),yt===i.UNSIGNED_SHORT_4_4_4_4&&(Ct=i.RGBA4),yt===i.UNSIGNED_SHORT_5_5_5_1&&(Ct=i.RGB5_A1)}return(Ct===i.R16F||Ct===i.R32F||Ct===i.RG16F||Ct===i.RG32F||Ct===i.RGBA16F||Ct===i.RGBA32F)&&t.get("EXT_color_buffer_float"),Ct}function z($,Y){let yt;return $?Y===null||Y===dl||Y===Gp?yt=i.DEPTH24_STENCIL8:Y===ar?yt=i.DEPTH32F_STENCIL8:Y===Hp&&(yt=i.DEPTH24_STENCIL8,Ie("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):Y===null||Y===dl||Y===Gp?yt=i.DEPTH_COMPONENT24:Y===ar?yt=i.DEPTH_COMPONENT32F:Y===Hp&&(yt=i.DEPTH_COMPONENT16),yt}function F($,Y){return C($)===!0||$.isFramebufferTexture&&$.minFilter!==Ba&&$.minFilter!==Di?Math.log2(Math.max(Y.width,Y.height))+1:$.mipmaps!==void 0&&$.mipmaps.length>0?$.mipmaps.length:$.isCompressedTexture&&Array.isArray($.image)?Y.mipmaps.length:1}function H($){const Y=$.target;Y.removeEventListener("dispose",H),Z(Y),Y.isVideoTexture&&g.delete(Y)}function q($){const Y=$.target;Y.removeEventListener("dispose",q),V(Y)}function Z($){const Y=n.get($);if(Y.__webglInit===void 0)return;const yt=$.source,Bt=x.get(yt);if(Bt){const Dt=Bt[Y.__cacheKey];Dt.usedTimes--,Dt.usedTimes===0&&B($),Object.keys(Bt).length===0&&x.delete(yt)}n.remove($)}function B($){const Y=n.get($);i.deleteTexture(Y.__webglTexture);const yt=$.source,Bt=x.get(yt);delete Bt[Y.__cacheKey],o.memory.textures--}function V($){const Y=n.get($);if($.depthTexture&&($.depthTexture.dispose(),n.remove($.depthTexture)),$.isWebGLCubeRenderTarget)for(let Bt=0;Bt<6;Bt++){if(Array.isArray(Y.__webglFramebuffer[Bt]))for(let Dt=0;Dt<Y.__webglFramebuffer[Bt].length;Dt++)i.deleteFramebuffer(Y.__webglFramebuffer[Bt][Dt]);else i.deleteFramebuffer(Y.__webglFramebuffer[Bt]);Y.__webglDepthbuffer&&i.deleteRenderbuffer(Y.__webglDepthbuffer[Bt])}else{if(Array.isArray(Y.__webglFramebuffer))for(let Bt=0;Bt<Y.__webglFramebuffer.length;Bt++)i.deleteFramebuffer(Y.__webglFramebuffer[Bt]);else i.deleteFramebuffer(Y.__webglFramebuffer);if(Y.__webglDepthbuffer&&i.deleteRenderbuffer(Y.__webglDepthbuffer),Y.__webglMultisampledFramebuffer&&i.deleteFramebuffer(Y.__webglMultisampledFramebuffer),Y.__webglColorRenderbuffer)for(let Bt=0;Bt<Y.__webglColorRenderbuffer.length;Bt++)Y.__webglColorRenderbuffer[Bt]&&i.deleteRenderbuffer(Y.__webglColorRenderbuffer[Bt]);Y.__webglDepthRenderbuffer&&i.deleteRenderbuffer(Y.__webglDepthRenderbuffer)}const yt=$.textures;for(let Bt=0,Dt=yt.length;Bt<Dt;Bt++){const Ct=n.get(yt[Bt]);Ct.__webglTexture&&(i.deleteTexture(Ct.__webglTexture),o.memory.textures--),n.remove(yt[Bt])}n.remove($)}let Q=0;function J(){Q=0}function rt(){const $=Q;return $>=a.maxTextures&&Ie("WebGLTextures: Trying to use "+$+" texture units while this GPU supports only "+a.maxTextures),Q+=1,$}function ut($){const Y=[];return Y.push($.wrapS),Y.push($.wrapT),Y.push($.wrapR||0),Y.push($.magFilter),Y.push($.minFilter),Y.push($.anisotropy),Y.push($.internalFormat),Y.push($.format),Y.push($.type),Y.push($.generateMipmaps),Y.push($.premultiplyAlpha),Y.push($.flipY),Y.push($.unpackAlignment),Y.push($.colorSpace),Y.join()}function vt($,Y){const yt=n.get($);if($.isVideoTexture&&Zt($),$.isRenderTargetTexture===!1&&$.isExternalTexture!==!0&&$.version>0&&yt.__version!==$.version){const Bt=$.image;if(Bt===null)Ie("WebGLRenderer: Texture marked for update but no image data found.");else if(Bt.complete===!1)Ie("WebGLRenderer: Texture marked for update but image is incomplete");else{ht(yt,$,Y);return}}else $.isExternalTexture&&(yt.__webglTexture=$.sourceTexture?$.sourceTexture:null);e.bindTexture(i.TEXTURE_2D,yt.__webglTexture,i.TEXTURE0+Y)}function j($,Y){const yt=n.get($);if($.isRenderTargetTexture===!1&&$.version>0&&yt.__version!==$.version){ht(yt,$,Y);return}else $.isExternalTexture&&(yt.__webglTexture=$.sourceTexture?$.sourceTexture:null);e.bindTexture(i.TEXTURE_2D_ARRAY,yt.__webglTexture,i.TEXTURE0+Y)}function K($,Y){const yt=n.get($);if($.isRenderTargetTexture===!1&&$.version>0&&yt.__version!==$.version){ht(yt,$,Y);return}e.bindTexture(i.TEXTURE_3D,yt.__webglTexture,i.TEXTURE0+Y)}function et($,Y){const yt=n.get($);if($.isCubeDepthTexture!==!0&&$.version>0&&yt.__version!==$.version){_t(yt,$,Y);return}e.bindTexture(i.TEXTURE_CUBE_MAP,yt.__webglTexture,i.TEXTURE0+Y)}const dt={[e0]:i.REPEAT,[ao]:i.CLAMP_TO_EDGE,[n0]:i.MIRRORED_REPEAT},lt={[Ba]:i.NEAREST,[L2]:i.NEAREST_MIPMAP_NEAREST,[Dp]:i.NEAREST_MIPMAP_LINEAR,[Di]:i.LINEAR,[zg]:i.LINEAR_MIPMAP_NEAREST,[Uc]:i.LINEAR_MIPMAP_LINEAR},G={[IC]:i.NEVER,[kC]:i.ALWAYS,[PC]:i.LESS,[_1]:i.LEQUAL,[zC]:i.EQUAL,[x1]:i.GEQUAL,[BC]:i.GREATER,[FC]:i.NOTEQUAL};function nt($,Y){if(Y.type===ar&&t.has("OES_texture_float_linear")===!1&&(Y.magFilter===Di||Y.magFilter===zg||Y.magFilter===Dp||Y.magFilter===Uc||Y.minFilter===Di||Y.minFilter===zg||Y.minFilter===Dp||Y.minFilter===Uc)&&Ie("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri($,i.TEXTURE_WRAP_S,dt[Y.wrapS]),i.texParameteri($,i.TEXTURE_WRAP_T,dt[Y.wrapT]),($===i.TEXTURE_3D||$===i.TEXTURE_2D_ARRAY)&&i.texParameteri($,i.TEXTURE_WRAP_R,dt[Y.wrapR]),i.texParameteri($,i.TEXTURE_MAG_FILTER,lt[Y.magFilter]),i.texParameteri($,i.TEXTURE_MIN_FILTER,lt[Y.minFilter]),Y.compareFunction&&(i.texParameteri($,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri($,i.TEXTURE_COMPARE_FUNC,G[Y.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){if(Y.magFilter===Ba||Y.minFilter!==Dp&&Y.minFilter!==Uc||Y.type===ar&&t.has("OES_texture_float_linear")===!1)return;if(Y.anisotropy>1||n.get(Y).__currentAnisotropy){const yt=t.get("EXT_texture_filter_anisotropic");i.texParameterf($,yt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Y.anisotropy,a.getMaxAnisotropy())),n.get(Y).__currentAnisotropy=Y.anisotropy}}}function ft($,Y){let yt=!1;$.__webglInit===void 0&&($.__webglInit=!0,Y.addEventListener("dispose",H));const Bt=Y.source;let Dt=x.get(Bt);Dt===void 0&&(Dt={},x.set(Bt,Dt));const Ct=ut(Y);if(Ct!==$.__cacheKey){Dt[Ct]===void 0&&(Dt[Ct]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,yt=!0),Dt[Ct].usedTimes++;const ve=Dt[$.__cacheKey];ve!==void 0&&(Dt[$.__cacheKey].usedTimes--,ve.usedTimes===0&&B(Y)),$.__cacheKey=Ct,$.__webglTexture=Dt[Ct].texture}return yt}function mt($,Y,yt){return Math.floor(Math.floor($/yt)/Y)}function xt($,Y,yt,Bt){const Ct=$.updateRanges;if(Ct.length===0)e.texSubImage2D(i.TEXTURE_2D,0,0,0,Y.width,Y.height,yt,Bt,Y.data);else{Ct.sort((Gt,Qt)=>Gt.start-Qt.start);let ve=0;for(let Gt=1;Gt<Ct.length;Gt++){const Qt=Ct[ve],se=Ct[Gt],gt=Qt.start+Qt.count,wt=mt(se.start,Y.width,4),xe=mt(Qt.start,Y.width,4);se.start<=gt+1&&wt===xe&&mt(se.start+se.count-1,Y.width,4)===wt?Qt.count=Math.max(Qt.count,se.start+se.count-Qt.start):(++ve,Ct[ve]=se)}Ct.length=ve+1;const he=i.getParameter(i.UNPACK_ROW_LENGTH),be=i.getParameter(i.UNPACK_SKIP_PIXELS),Ce=i.getParameter(i.UNPACK_SKIP_ROWS);i.pixelStorei(i.UNPACK_ROW_LENGTH,Y.width);for(let Gt=0,Qt=Ct.length;Gt<Qt;Gt++){const se=Ct[Gt],gt=Math.floor(se.start/4),wt=Math.ceil(se.count/4),xe=gt%Y.width,St=Math.floor(gt/Y.width),ie=wt,le=1;i.pixelStorei(i.UNPACK_SKIP_PIXELS,xe),i.pixelStorei(i.UNPACK_SKIP_ROWS,St),e.texSubImage2D(i.TEXTURE_2D,0,xe,St,ie,le,yt,Bt,Y.data)}$.clearUpdateRanges(),i.pixelStorei(i.UNPACK_ROW_LENGTH,he),i.pixelStorei(i.UNPACK_SKIP_PIXELS,be),i.pixelStorei(i.UNPACK_SKIP_ROWS,Ce)}}function ht($,Y,yt){let Bt=i.TEXTURE_2D;(Y.isDataArrayTexture||Y.isCompressedArrayTexture)&&(Bt=i.TEXTURE_2D_ARRAY),Y.isData3DTexture&&(Bt=i.TEXTURE_3D);const Dt=ft($,Y),Ct=Y.source;e.bindTexture(Bt,$.__webglTexture,i.TEXTURE0+yt);const ve=n.get(Ct);if(Ct.version!==ve.__version||Dt===!0){e.activeTexture(i.TEXTURE0+yt);const he=Xn.getPrimaries(Xn.workingColorSpace),be=Y.colorSpace===Cu?null:Xn.getPrimaries(Y.colorSpace),Ce=Y.colorSpace===Cu||he===be?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,Y.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,Y.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ce);let Gt=R(Y.image,!1,a.maxTextureSize);Gt=Lt(Y,Gt);const Qt=s.convert(Y.format,Y.colorSpace),se=s.convert(Y.type);let gt=I(Y.internalFormat,Qt,se,Y.colorSpace,Y.isVideoTexture);nt(Bt,Y);let wt;const xe=Y.mipmaps,St=Y.isVideoTexture!==!0,ie=ve.__version===void 0||Dt===!0,le=Ct.dataReady,Ae=F(Y,Gt);if(Y.isDepthTexture)gt=z(Y.format===If,Y.type),ie&&(St?e.texStorage2D(i.TEXTURE_2D,1,gt,Gt.width,Gt.height):e.texImage2D(i.TEXTURE_2D,0,gt,Gt.width,Gt.height,0,Qt,se,null));else if(Y.isDataTexture)if(xe.length>0){St&&ie&&e.texStorage2D(i.TEXTURE_2D,Ae,gt,xe[0].width,xe[0].height);for(let ce=0,jt=xe.length;ce<jt;ce++)wt=xe[ce],St?le&&e.texSubImage2D(i.TEXTURE_2D,ce,0,0,wt.width,wt.height,Qt,se,wt.data):e.texImage2D(i.TEXTURE_2D,ce,gt,wt.width,wt.height,0,Qt,se,wt.data);Y.generateMipmaps=!1}else St?(ie&&e.texStorage2D(i.TEXTURE_2D,Ae,gt,Gt.width,Gt.height),le&&xt(Y,Gt,Qt,se)):e.texImage2D(i.TEXTURE_2D,0,gt,Gt.width,Gt.height,0,Qt,se,Gt.data);else if(Y.isCompressedTexture)if(Y.isCompressedArrayTexture){St&&ie&&e.texStorage3D(i.TEXTURE_2D_ARRAY,Ae,gt,xe[0].width,xe[0].height,Gt.depth);for(let ce=0,jt=xe.length;ce<jt;ce++)if(wt=xe[ce],Y.format!==sr)if(Qt!==null)if(St){if(le)if(Y.layerUpdates.size>0){const me=Pb(wt.width,wt.height,Y.format,Y.type);for(const Re of Y.layerUpdates){const Le=wt.data.subarray(Re*me/wt.data.BYTES_PER_ELEMENT,(Re+1)*me/wt.data.BYTES_PER_ELEMENT);e.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,ce,0,0,Re,wt.width,wt.height,1,Qt,Le)}Y.clearLayerUpdates()}else e.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,ce,0,0,0,wt.width,wt.height,Gt.depth,Qt,wt.data)}else e.compressedTexImage3D(i.TEXTURE_2D_ARRAY,ce,gt,wt.width,wt.height,Gt.depth,0,wt.data,0,0);else Ie("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else St?le&&e.texSubImage3D(i.TEXTURE_2D_ARRAY,ce,0,0,0,wt.width,wt.height,Gt.depth,Qt,se,wt.data):e.texImage3D(i.TEXTURE_2D_ARRAY,ce,gt,wt.width,wt.height,Gt.depth,0,Qt,se,wt.data)}else{St&&ie&&e.texStorage2D(i.TEXTURE_2D,Ae,gt,xe[0].width,xe[0].height);for(let ce=0,jt=xe.length;ce<jt;ce++)wt=xe[ce],Y.format!==sr?Qt!==null?St?le&&e.compressedTexSubImage2D(i.TEXTURE_2D,ce,0,0,wt.width,wt.height,Qt,wt.data):e.compressedTexImage2D(i.TEXTURE_2D,ce,gt,wt.width,wt.height,0,wt.data):Ie("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):St?le&&e.texSubImage2D(i.TEXTURE_2D,ce,0,0,wt.width,wt.height,Qt,se,wt.data):e.texImage2D(i.TEXTURE_2D,ce,gt,wt.width,wt.height,0,Qt,se,wt.data)}else if(Y.isDataArrayTexture)if(St){if(ie&&e.texStorage3D(i.TEXTURE_2D_ARRAY,Ae,gt,Gt.width,Gt.height,Gt.depth),le)if(Y.layerUpdates.size>0){const ce=Pb(Gt.width,Gt.height,Y.format,Y.type);for(const jt of Y.layerUpdates){const me=Gt.data.subarray(jt*ce/Gt.data.BYTES_PER_ELEMENT,(jt+1)*ce/Gt.data.BYTES_PER_ELEMENT);e.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,jt,Gt.width,Gt.height,1,Qt,se,me)}Y.clearLayerUpdates()}else e.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Gt.width,Gt.height,Gt.depth,Qt,se,Gt.data)}else e.texImage3D(i.TEXTURE_2D_ARRAY,0,gt,Gt.width,Gt.height,Gt.depth,0,Qt,se,Gt.data);else if(Y.isData3DTexture)St?(ie&&e.texStorage3D(i.TEXTURE_3D,Ae,gt,Gt.width,Gt.height,Gt.depth),le&&e.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Gt.width,Gt.height,Gt.depth,Qt,se,Gt.data)):e.texImage3D(i.TEXTURE_3D,0,gt,Gt.width,Gt.height,Gt.depth,0,Qt,se,Gt.data);else if(Y.isFramebufferTexture){if(ie)if(St)e.texStorage2D(i.TEXTURE_2D,Ae,gt,Gt.width,Gt.height);else{let ce=Gt.width,jt=Gt.height;for(let me=0;me<Ae;me++)e.texImage2D(i.TEXTURE_2D,me,gt,ce,jt,0,Qt,se,null),ce>>=1,jt>>=1}}else if(xe.length>0){if(St&&ie){const ce=ee(xe[0]);e.texStorage2D(i.TEXTURE_2D,Ae,gt,ce.width,ce.height)}for(let ce=0,jt=xe.length;ce<jt;ce++)wt=xe[ce],St?le&&e.texSubImage2D(i.TEXTURE_2D,ce,0,0,Qt,se,wt):e.texImage2D(i.TEXTURE_2D,ce,gt,Qt,se,wt);Y.generateMipmaps=!1}else if(St){if(ie){const ce=ee(Gt);e.texStorage2D(i.TEXTURE_2D,Ae,gt,ce.width,ce.height)}le&&e.texSubImage2D(i.TEXTURE_2D,0,0,0,Qt,se,Gt)}else e.texImage2D(i.TEXTURE_2D,0,gt,Qt,se,Gt);C(Y)&&w(Bt),ve.__version=Ct.version,Y.onUpdate&&Y.onUpdate(Y)}$.__version=Y.version}function _t($,Y,yt){if(Y.image.length!==6)return;const Bt=ft($,Y),Dt=Y.source;e.bindTexture(i.TEXTURE_CUBE_MAP,$.__webglTexture,i.TEXTURE0+yt);const Ct=n.get(Dt);if(Dt.version!==Ct.__version||Bt===!0){e.activeTexture(i.TEXTURE0+yt);const ve=Xn.getPrimaries(Xn.workingColorSpace),he=Y.colorSpace===Cu?null:Xn.getPrimaries(Y.colorSpace),be=Y.colorSpace===Cu||ve===he?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,Y.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,Y.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,be);const Ce=Y.isCompressedTexture||Y.image[0].isCompressedTexture,Gt=Y.image[0]&&Y.image[0].isDataTexture,Qt=[];for(let jt=0;jt<6;jt++)!Ce&&!Gt?Qt[jt]=R(Y.image[jt],!0,a.maxCubemapSize):Qt[jt]=Gt?Y.image[jt].image:Y.image[jt],Qt[jt]=Lt(Y,Qt[jt]);const se=Qt[0],gt=s.convert(Y.format,Y.colorSpace),wt=s.convert(Y.type),xe=I(Y.internalFormat,gt,wt,Y.colorSpace),St=Y.isVideoTexture!==!0,ie=Ct.__version===void 0||Bt===!0,le=Dt.dataReady;let Ae=F(Y,se);nt(i.TEXTURE_CUBE_MAP,Y);let ce;if(Ce){St&&ie&&e.texStorage2D(i.TEXTURE_CUBE_MAP,Ae,xe,se.width,se.height);for(let jt=0;jt<6;jt++){ce=Qt[jt].mipmaps;for(let me=0;me<ce.length;me++){const Re=ce[me];Y.format!==sr?gt!==null?St?le&&e.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+jt,me,0,0,Re.width,Re.height,gt,Re.data):e.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+jt,me,xe,Re.width,Re.height,0,Re.data):Ie("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):St?le&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+jt,me,0,0,Re.width,Re.height,gt,wt,Re.data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+jt,me,xe,Re.width,Re.height,0,gt,wt,Re.data)}}}else{if(ce=Y.mipmaps,St&&ie){ce.length>0&&Ae++;const jt=ee(Qt[0]);e.texStorage2D(i.TEXTURE_CUBE_MAP,Ae,xe,jt.width,jt.height)}for(let jt=0;jt<6;jt++)if(Gt){St?le&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+jt,0,0,0,Qt[jt].width,Qt[jt].height,gt,wt,Qt[jt].data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+jt,0,xe,Qt[jt].width,Qt[jt].height,0,gt,wt,Qt[jt].data);for(let me=0;me<ce.length;me++){const Le=ce[me].image[jt].image;St?le&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+jt,me+1,0,0,Le.width,Le.height,gt,wt,Le.data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+jt,me+1,xe,Le.width,Le.height,0,gt,wt,Le.data)}}else{St?le&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+jt,0,0,0,gt,wt,Qt[jt]):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+jt,0,xe,gt,wt,Qt[jt]);for(let me=0;me<ce.length;me++){const Re=ce[me];St?le&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+jt,me+1,0,0,gt,wt,Re.image[jt]):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+jt,me+1,xe,gt,wt,Re.image[jt])}}}C(Y)&&w(i.TEXTURE_CUBE_MAP),Ct.__version=Dt.version,Y.onUpdate&&Y.onUpdate(Y)}$.__version=Y.version}function At($,Y,yt,Bt,Dt,Ct){const ve=s.convert(yt.format,yt.colorSpace),he=s.convert(yt.type),be=I(yt.internalFormat,ve,he,yt.colorSpace),Ce=n.get(Y),Gt=n.get(yt);if(Gt.__renderTarget=Y,!Ce.__hasExternalTextures){const Qt=Math.max(1,Y.width>>Ct),se=Math.max(1,Y.height>>Ct);Dt===i.TEXTURE_3D||Dt===i.TEXTURE_2D_ARRAY?e.texImage3D(Dt,Ct,be,Qt,se,Y.depth,0,ve,he,null):e.texImage2D(Dt,Ct,be,Qt,se,0,ve,he,null)}e.bindFramebuffer(i.FRAMEBUFFER,$),ue(Y)?c.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Bt,Dt,Gt.__webglTexture,0,at(Y)):(Dt===i.TEXTURE_2D||Dt>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&Dt<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Bt,Dt,Gt.__webglTexture,Ct),e.bindFramebuffer(i.FRAMEBUFFER,null)}function $t($,Y,yt){if(i.bindRenderbuffer(i.RENDERBUFFER,$),Y.depthBuffer){const Bt=Y.depthTexture,Dt=Bt&&Bt.isDepthTexture?Bt.type:null,Ct=z(Y.stencilBuffer,Dt),ve=Y.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;ue(Y)?c.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,at(Y),Ct,Y.width,Y.height):yt?i.renderbufferStorageMultisample(i.RENDERBUFFER,at(Y),Ct,Y.width,Y.height):i.renderbufferStorage(i.RENDERBUFFER,Ct,Y.width,Y.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,ve,i.RENDERBUFFER,$)}else{const Bt=Y.textures;for(let Dt=0;Dt<Bt.length;Dt++){const Ct=Bt[Dt],ve=s.convert(Ct.format,Ct.colorSpace),he=s.convert(Ct.type),be=I(Ct.internalFormat,ve,he,Ct.colorSpace);ue(Y)?c.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,at(Y),be,Y.width,Y.height):yt?i.renderbufferStorageMultisample(i.RENDERBUFFER,at(Y),be,Y.width,Y.height):i.renderbufferStorage(i.RENDERBUFFER,be,Y.width,Y.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function te($,Y,yt){const Bt=Y.isWebGLCubeRenderTarget===!0;if(e.bindFramebuffer(i.FRAMEBUFFER,$),!(Y.depthTexture&&Y.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Dt=n.get(Y.depthTexture);if(Dt.__renderTarget=Y,(!Dt.__webglTexture||Y.depthTexture.image.width!==Y.width||Y.depthTexture.image.height!==Y.height)&&(Y.depthTexture.image.width=Y.width,Y.depthTexture.image.height=Y.height,Y.depthTexture.needsUpdate=!0),Bt){if(Dt.__webglInit===void 0&&(Dt.__webglInit=!0,Y.depthTexture.addEventListener("dispose",H)),Dt.__webglTexture===void 0){Dt.__webglTexture=i.createTexture(),e.bindTexture(i.TEXTURE_CUBE_MAP,Dt.__webglTexture),nt(i.TEXTURE_CUBE_MAP,Y.depthTexture);const Ce=s.convert(Y.depthTexture.format),Gt=s.convert(Y.depthTexture.type);let Qt;Y.depthTexture.format===Vc?Qt=i.DEPTH_COMPONENT24:Y.depthTexture.format===If&&(Qt=i.DEPTH24_STENCIL8);for(let se=0;se<6;se++)i.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+se,0,Qt,Y.width,Y.height,0,Ce,Gt,null)}}else vt(Y.depthTexture,0);const Ct=Dt.__webglTexture,ve=at(Y),he=Bt?i.TEXTURE_CUBE_MAP_POSITIVE_X+yt:i.TEXTURE_2D,be=Y.depthTexture.format===If?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;if(Y.depthTexture.format===Vc)ue(Y)?c.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,be,he,Ct,0,ve):i.framebufferTexture2D(i.FRAMEBUFFER,be,he,Ct,0);else if(Y.depthTexture.format===If)ue(Y)?c.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,be,he,Ct,0,ve):i.framebufferTexture2D(i.FRAMEBUFFER,be,he,Ct,0);else throw new Error("Unknown depthTexture format")}function qt($){const Y=n.get($),yt=$.isWebGLCubeRenderTarget===!0;if(Y.__boundDepthTexture!==$.depthTexture){const Bt=$.depthTexture;if(Y.__depthDisposeCallback&&Y.__depthDisposeCallback(),Bt){const Dt=()=>{delete Y.__boundDepthTexture,delete Y.__depthDisposeCallback,Bt.removeEventListener("dispose",Dt)};Bt.addEventListener("dispose",Dt),Y.__depthDisposeCallback=Dt}Y.__boundDepthTexture=Bt}if($.depthTexture&&!Y.__autoAllocateDepthBuffer)if(yt)for(let Bt=0;Bt<6;Bt++)te(Y.__webglFramebuffer[Bt],$,Bt);else{const Bt=$.texture.mipmaps;Bt&&Bt.length>0?te(Y.__webglFramebuffer[0],$,0):te(Y.__webglFramebuffer,$,0)}else if(yt){Y.__webglDepthbuffer=[];for(let Bt=0;Bt<6;Bt++)if(e.bindFramebuffer(i.FRAMEBUFFER,Y.__webglFramebuffer[Bt]),Y.__webglDepthbuffer[Bt]===void 0)Y.__webglDepthbuffer[Bt]=i.createRenderbuffer(),$t(Y.__webglDepthbuffer[Bt],$,!1);else{const Dt=$.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Ct=Y.__webglDepthbuffer[Bt];i.bindRenderbuffer(i.RENDERBUFFER,Ct),i.framebufferRenderbuffer(i.FRAMEBUFFER,Dt,i.RENDERBUFFER,Ct)}}else{const Bt=$.texture.mipmaps;if(Bt&&Bt.length>0?e.bindFramebuffer(i.FRAMEBUFFER,Y.__webglFramebuffer[0]):e.bindFramebuffer(i.FRAMEBUFFER,Y.__webglFramebuffer),Y.__webglDepthbuffer===void 0)Y.__webglDepthbuffer=i.createRenderbuffer(),$t(Y.__webglDepthbuffer,$,!1);else{const Dt=$.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Ct=Y.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,Ct),i.framebufferRenderbuffer(i.FRAMEBUFFER,Dt,i.RENDERBUFFER,Ct)}}e.bindFramebuffer(i.FRAMEBUFFER,null)}function ne($,Y,yt){const Bt=n.get($);Y!==void 0&&At(Bt.__webglFramebuffer,$,$.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),yt!==void 0&&qt($)}function Se($){const Y=$.texture,yt=n.get($),Bt=n.get(Y);$.addEventListener("dispose",q);const Dt=$.textures,Ct=$.isWebGLCubeRenderTarget===!0,ve=Dt.length>1;if(ve||(Bt.__webglTexture===void 0&&(Bt.__webglTexture=i.createTexture()),Bt.__version=Y.version,o.memory.textures++),Ct){yt.__webglFramebuffer=[];for(let he=0;he<6;he++)if(Y.mipmaps&&Y.mipmaps.length>0){yt.__webglFramebuffer[he]=[];for(let be=0;be<Y.mipmaps.length;be++)yt.__webglFramebuffer[he][be]=i.createFramebuffer()}else yt.__webglFramebuffer[he]=i.createFramebuffer()}else{if(Y.mipmaps&&Y.mipmaps.length>0){yt.__webglFramebuffer=[];for(let he=0;he<Y.mipmaps.length;he++)yt.__webglFramebuffer[he]=i.createFramebuffer()}else yt.__webglFramebuffer=i.createFramebuffer();if(ve)for(let he=0,be=Dt.length;he<be;he++){const Ce=n.get(Dt[he]);Ce.__webglTexture===void 0&&(Ce.__webglTexture=i.createTexture(),o.memory.textures++)}if($.samples>0&&ue($)===!1){yt.__webglMultisampledFramebuffer=i.createFramebuffer(),yt.__webglColorRenderbuffer=[],e.bindFramebuffer(i.FRAMEBUFFER,yt.__webglMultisampledFramebuffer);for(let he=0;he<Dt.length;he++){const be=Dt[he];yt.__webglColorRenderbuffer[he]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,yt.__webglColorRenderbuffer[he]);const Ce=s.convert(be.format,be.colorSpace),Gt=s.convert(be.type),Qt=I(be.internalFormat,Ce,Gt,be.colorSpace,$.isXRRenderTarget===!0),se=at($);i.renderbufferStorageMultisample(i.RENDERBUFFER,se,Qt,$.width,$.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+he,i.RENDERBUFFER,yt.__webglColorRenderbuffer[he])}i.bindRenderbuffer(i.RENDERBUFFER,null),$.depthBuffer&&(yt.__webglDepthRenderbuffer=i.createRenderbuffer(),$t(yt.__webglDepthRenderbuffer,$,!0)),e.bindFramebuffer(i.FRAMEBUFFER,null)}}if(Ct){e.bindTexture(i.TEXTURE_CUBE_MAP,Bt.__webglTexture),nt(i.TEXTURE_CUBE_MAP,Y);for(let he=0;he<6;he++)if(Y.mipmaps&&Y.mipmaps.length>0)for(let be=0;be<Y.mipmaps.length;be++)At(yt.__webglFramebuffer[he][be],$,Y,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+he,be);else At(yt.__webglFramebuffer[he],$,Y,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+he,0);C(Y)&&w(i.TEXTURE_CUBE_MAP),e.unbindTexture()}else if(ve){for(let he=0,be=Dt.length;he<be;he++){const Ce=Dt[he],Gt=n.get(Ce);let Qt=i.TEXTURE_2D;($.isWebGL3DRenderTarget||$.isWebGLArrayRenderTarget)&&(Qt=$.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),e.bindTexture(Qt,Gt.__webglTexture),nt(Qt,Ce),At(yt.__webglFramebuffer,$,Ce,i.COLOR_ATTACHMENT0+he,Qt,0),C(Ce)&&w(Qt)}e.unbindTexture()}else{let he=i.TEXTURE_2D;if(($.isWebGL3DRenderTarget||$.isWebGLArrayRenderTarget)&&(he=$.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),e.bindTexture(he,Bt.__webglTexture),nt(he,Y),Y.mipmaps&&Y.mipmaps.length>0)for(let be=0;be<Y.mipmaps.length;be++)At(yt.__webglFramebuffer[be],$,Y,i.COLOR_ATTACHMENT0,he,be);else At(yt.__webglFramebuffer,$,Y,i.COLOR_ATTACHMENT0,he,0);C(Y)&&w(he),e.unbindTexture()}$.depthBuffer&&qt($)}function Nt($){const Y=$.textures;for(let yt=0,Bt=Y.length;yt<Bt;yt++){const Dt=Y[yt];if(C(Dt)){const Ct=N($),ve=n.get(Dt).__webglTexture;e.bindTexture(Ct,ve),w(Ct),e.unbindTexture()}}}const Vt=[],Ft=[];function re($){if($.samples>0){if(ue($)===!1){const Y=$.textures,yt=$.width,Bt=$.height;let Dt=i.COLOR_BUFFER_BIT;const Ct=$.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,ve=n.get($),he=Y.length>1;if(he)for(let Ce=0;Ce<Y.length;Ce++)e.bindFramebuffer(i.FRAMEBUFFER,ve.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ce,i.RENDERBUFFER,null),e.bindFramebuffer(i.FRAMEBUFFER,ve.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ce,i.TEXTURE_2D,null,0);e.bindFramebuffer(i.READ_FRAMEBUFFER,ve.__webglMultisampledFramebuffer);const be=$.texture.mipmaps;be&&be.length>0?e.bindFramebuffer(i.DRAW_FRAMEBUFFER,ve.__webglFramebuffer[0]):e.bindFramebuffer(i.DRAW_FRAMEBUFFER,ve.__webglFramebuffer);for(let Ce=0;Ce<Y.length;Ce++){if($.resolveDepthBuffer&&($.depthBuffer&&(Dt|=i.DEPTH_BUFFER_BIT),$.stencilBuffer&&$.resolveStencilBuffer&&(Dt|=i.STENCIL_BUFFER_BIT)),he){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,ve.__webglColorRenderbuffer[Ce]);const Gt=n.get(Y[Ce]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,Gt,0)}i.blitFramebuffer(0,0,yt,Bt,0,0,yt,Bt,Dt,i.NEAREST),f===!0&&(Vt.length=0,Ft.length=0,Vt.push(i.COLOR_ATTACHMENT0+Ce),$.depthBuffer&&$.resolveDepthBuffer===!1&&(Vt.push(Ct),Ft.push(Ct),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,Ft)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,Vt))}if(e.bindFramebuffer(i.READ_FRAMEBUFFER,null),e.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),he)for(let Ce=0;Ce<Y.length;Ce++){e.bindFramebuffer(i.FRAMEBUFFER,ve.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ce,i.RENDERBUFFER,ve.__webglColorRenderbuffer[Ce]);const Gt=n.get(Y[Ce]).__webglTexture;e.bindFramebuffer(i.FRAMEBUFFER,ve.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ce,i.TEXTURE_2D,Gt,0)}e.bindFramebuffer(i.DRAW_FRAMEBUFFER,ve.__webglMultisampledFramebuffer)}else if($.depthBuffer&&$.resolveDepthBuffer===!1&&f){const Y=$.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[Y])}}}function at($){return Math.min(a.maxSamples,$.samples)}function ue($){const Y=n.get($);return $.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&Y.__useRenderToTexture!==!1}function Zt($){const Y=o.render.frame;g.get($)!==Y&&(g.set($,Y),$.update())}function Lt($,Y){const yt=$.colorSpace,Bt=$.format,Dt=$.type;return $.isCompressedTexture===!0||$.isVideoTexture===!0||yt!==Ff&&yt!==Cu&&(Xn.getTransfer(yt)===Ti?(Bt!==sr||Dt!==Br)&&Ie("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):rn("WebGLTextures: Unsupported texture color space:",yt)),Y}function ee($){return typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement?(d.width=$.naturalWidth||$.width,d.height=$.naturalHeight||$.height):typeof VideoFrame<"u"&&$ instanceof VideoFrame?(d.width=$.displayWidth,d.height=$.displayHeight):(d.width=$.width,d.height=$.height),d}this.allocateTextureUnit=rt,this.resetTextureUnits=J,this.setTexture2D=vt,this.setTexture2DArray=j,this.setTexture3D=K,this.setTextureCube=et,this.rebindTextures=ne,this.setupRenderTarget=Se,this.updateRenderTargetMipmap=Nt,this.updateMultisampleRenderTarget=re,this.setupDepthRenderbuffer=qt,this.setupFrameBufferTexture=At,this.useMultisampledRTT=ue,this.isReversedDepthBuffer=function(){return e.buffers.depth.getReversed()}}function XR(i,t){function e(n,a=Cu){let s;const o=Xn.getTransfer(a);if(n===Br)return i.UNSIGNED_BYTE;if(n===d1)return i.UNSIGNED_SHORT_4_4_4_4;if(n===p1)return i.UNSIGNED_SHORT_5_5_5_1;if(n===U2)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===I2)return i.UNSIGNED_INT_10F_11F_11F_REV;if(n===O2)return i.BYTE;if(n===N2)return i.SHORT;if(n===Hp)return i.UNSIGNED_SHORT;if(n===h1)return i.INT;if(n===dl)return i.UNSIGNED_INT;if(n===ar)return i.FLOAT;if(n===tc)return i.HALF_FLOAT;if(n===P2)return i.ALPHA;if(n===z2)return i.RGB;if(n===sr)return i.RGBA;if(n===Vc)return i.DEPTH_COMPONENT;if(n===If)return i.DEPTH_STENCIL;if(n===m1)return i.RED;if(n===E0)return i.RED_INTEGER;if(n===rd)return i.RG;if(n===g1)return i.RG_INTEGER;if(n===v1)return i.RGBA_INTEGER;if(n===Bg||n===Fg||n===kg||n===Vg)if(o===Ti)if(s=t.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(n===Bg)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Fg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===kg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Vg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=t.get("WEBGL_compressed_texture_s3tc"),s!==null){if(n===Bg)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Fg)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===kg)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Vg)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===f_||n===h_||n===d_||n===p_)if(s=t.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(n===f_)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===h_)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===d_)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===p_)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===m_||n===g_||n===v_||n===y_||n===__||n===x_||n===S_)if(s=t.get("WEBGL_compressed_texture_etc"),s!==null){if(n===m_||n===g_)return o===Ti?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===v_)return o===Ti?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC;if(n===y_)return s.COMPRESSED_R11_EAC;if(n===__)return s.COMPRESSED_SIGNED_R11_EAC;if(n===x_)return s.COMPRESSED_RG11_EAC;if(n===S_)return s.COMPRESSED_SIGNED_RG11_EAC}else return null;if(n===b_||n===M_||n===T_||n===A_||n===E_||n===w_||n===C_||n===R_||n===D_||n===L_||n===O_||n===N_||n===U_||n===I_)if(s=t.get("WEBGL_compressed_texture_astc"),s!==null){if(n===b_)return o===Ti?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===M_)return o===Ti?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===T_)return o===Ti?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===A_)return o===Ti?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===E_)return o===Ti?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===w_)return o===Ti?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===C_)return o===Ti?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===R_)return o===Ti?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===D_)return o===Ti?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===L_)return o===Ti?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===O_)return o===Ti?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===N_)return o===Ti?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===U_)return o===Ti?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===I_)return o===Ti?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===P_||n===z_||n===B_)if(s=t.get("EXT_texture_compression_bptc"),s!==null){if(n===P_)return o===Ti?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===z_)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===B_)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===F_||n===k_||n===V_||n===H_)if(s=t.get("EXT_texture_compression_rgtc"),s!==null){if(n===F_)return s.COMPRESSED_RED_RGTC1_EXT;if(n===k_)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===V_)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===H_)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===Gp?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:e}}const PF=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,zF=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class BF{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e){if(this.texture===null){const n=new Z2(t.texture);(t.depthNear!==e.depthNear||t.depthFar!==e.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=n}}getMesh(t){if(this.texture!==null&&this.mesh===null){const e=t.cameras[0].viewport,n=new pl({vertexShader:PF,fragmentShader:zF,uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new ma(new Bu(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class FF extends Hc{constructor(t,e){super();const n=this;let a=null,s=1,o=null,c="local-floor",f=1,d=null,g=null,y=null,x=null,b=null,T=null;const R=typeof XRWebGLBinding<"u",C=new BF,w={},N=e.getContextAttributes();let I=null,z=null;const F=[],H=[],q=new de;let Z=null;const B=new fa;B.viewport=new Ri;const V=new fa;V.viewport=new Ri;const Q=[B,V],J=new PR;let rt=null,ut=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ht){let _t=F[ht];return _t===void 0&&(_t=new Xy,F[ht]=_t),_t.getTargetRaySpace()},this.getControllerGrip=function(ht){let _t=F[ht];return _t===void 0&&(_t=new Xy,F[ht]=_t),_t.getGripSpace()},this.getHand=function(ht){let _t=F[ht];return _t===void 0&&(_t=new Xy,F[ht]=_t),_t.getHandSpace()};function vt(ht){const _t=H.indexOf(ht.inputSource);if(_t===-1)return;const At=F[_t];At!==void 0&&(At.update(ht.inputSource,ht.frame,d||o),At.dispatchEvent({type:ht.type,data:ht.inputSource}))}function j(){a.removeEventListener("select",vt),a.removeEventListener("selectstart",vt),a.removeEventListener("selectend",vt),a.removeEventListener("squeeze",vt),a.removeEventListener("squeezestart",vt),a.removeEventListener("squeezeend",vt),a.removeEventListener("end",j),a.removeEventListener("inputsourceschange",K);for(let ht=0;ht<F.length;ht++){const _t=H[ht];_t!==null&&(H[ht]=null,F[ht].disconnect(_t))}rt=null,ut=null,C.reset();for(const ht in w)delete w[ht];t.setRenderTarget(I),b=null,x=null,y=null,a=null,z=null,xt.stop(),n.isPresenting=!1,t.setPixelRatio(Z),t.setSize(q.width,q.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ht){s=ht,n.isPresenting===!0&&Ie("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ht){c=ht,n.isPresenting===!0&&Ie("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||o},this.setReferenceSpace=function(ht){d=ht},this.getBaseLayer=function(){return x!==null?x:b},this.getBinding=function(){return y===null&&R&&(y=new XRWebGLBinding(a,e)),y},this.getFrame=function(){return T},this.getSession=function(){return a},this.setSession=async function(ht){if(a=ht,a!==null){if(I=t.getRenderTarget(),a.addEventListener("select",vt),a.addEventListener("selectstart",vt),a.addEventListener("selectend",vt),a.addEventListener("squeeze",vt),a.addEventListener("squeezestart",vt),a.addEventListener("squeezeend",vt),a.addEventListener("end",j),a.addEventListener("inputsourceschange",K),N.xrCompatible!==!0&&await e.makeXRCompatible(),Z=t.getPixelRatio(),t.getSize(q),R&&"createProjectionLayer"in XRWebGLBinding.prototype){let At=null,$t=null,te=null;N.depth&&(te=N.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,At=N.stencil?If:Vc,$t=N.stencil?Gp:dl);const qt={colorFormat:e.RGBA8,depthFormat:te,scaleFactor:s};y=this.getBinding(),x=y.createProjectionLayer(qt),a.updateRenderState({layers:[x]}),t.setPixelRatio(1),t.setSize(x.textureWidth,x.textureHeight,!1),z=new ro(x.textureWidth,x.textureHeight,{format:sr,type:Br,depthTexture:new cd(x.textureWidth,x.textureHeight,$t,void 0,void 0,void 0,void 0,void 0,void 0,At),stencilBuffer:N.stencil,colorSpace:t.outputColorSpace,samples:N.antialias?4:0,resolveDepthBuffer:x.ignoreDepthValues===!1,resolveStencilBuffer:x.ignoreDepthValues===!1})}else{const At={antialias:N.antialias,alpha:!0,depth:N.depth,stencil:N.stencil,framebufferScaleFactor:s};b=new XRWebGLLayer(a,e,At),a.updateRenderState({baseLayer:b}),t.setPixelRatio(1),t.setSize(b.framebufferWidth,b.framebufferHeight,!1),z=new ro(b.framebufferWidth,b.framebufferHeight,{format:sr,type:Br,colorSpace:t.outputColorSpace,stencilBuffer:N.stencil,resolveDepthBuffer:b.ignoreDepthValues===!1,resolveStencilBuffer:b.ignoreDepthValues===!1})}z.isXRRenderTarget=!0,this.setFoveation(f),d=null,o=await a.requestReferenceSpace(c),xt.setContext(a),xt.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(a!==null)return a.environmentBlendMode},this.getDepthTexture=function(){return C.getDepthTexture()};function K(ht){for(let _t=0;_t<ht.removed.length;_t++){const At=ht.removed[_t],$t=H.indexOf(At);$t>=0&&(H[$t]=null,F[$t].disconnect(At))}for(let _t=0;_t<ht.added.length;_t++){const At=ht.added[_t];let $t=H.indexOf(At);if($t===-1){for(let qt=0;qt<F.length;qt++)if(qt>=H.length){H.push(At),$t=qt;break}else if(H[qt]===null){H[qt]=At,$t=qt;break}if($t===-1)break}const te=F[$t];te&&te.connect(At)}}const et=new pt,dt=new pt;function lt(ht,_t,At){et.setFromMatrixPosition(_t.matrixWorld),dt.setFromMatrixPosition(At.matrixWorld);const $t=et.distanceTo(dt),te=_t.projectionMatrix.elements,qt=At.projectionMatrix.elements,ne=te[14]/(te[10]-1),Se=te[14]/(te[10]+1),Nt=(te[9]+1)/te[5],Vt=(te[9]-1)/te[5],Ft=(te[8]-1)/te[0],re=(qt[8]+1)/qt[0],at=ne*Ft,ue=ne*re,Zt=$t/(-Ft+re),Lt=Zt*-Ft;if(_t.matrixWorld.decompose(ht.position,ht.quaternion,ht.scale),ht.translateX(Lt),ht.translateZ(Zt),ht.matrixWorld.compose(ht.position,ht.quaternion,ht.scale),ht.matrixWorldInverse.copy(ht.matrixWorld).invert(),te[10]===-1)ht.projectionMatrix.copy(_t.projectionMatrix),ht.projectionMatrixInverse.copy(_t.projectionMatrixInverse);else{const ee=ne+Zt,$=Se+Zt,Y=at-Lt,yt=ue+($t-Lt),Bt=Nt*Se/$*ee,Dt=Vt*Se/$*ee;ht.projectionMatrix.makePerspective(Y,yt,Bt,Dt,ee,$),ht.projectionMatrixInverse.copy(ht.projectionMatrix).invert()}}function G(ht,_t){_t===null?ht.matrixWorld.copy(ht.matrix):ht.matrixWorld.multiplyMatrices(_t.matrixWorld,ht.matrix),ht.matrixWorldInverse.copy(ht.matrixWorld).invert()}this.updateCamera=function(ht){if(a===null)return;let _t=ht.near,At=ht.far;C.texture!==null&&(C.depthNear>0&&(_t=C.depthNear),C.depthFar>0&&(At=C.depthFar)),J.near=V.near=B.near=_t,J.far=V.far=B.far=At,(rt!==J.near||ut!==J.far)&&(a.updateRenderState({depthNear:J.near,depthFar:J.far}),rt=J.near,ut=J.far),J.layers.mask=ht.layers.mask|6,B.layers.mask=J.layers.mask&3,V.layers.mask=J.layers.mask&5;const $t=ht.parent,te=J.cameras;G(J,$t);for(let qt=0;qt<te.length;qt++)G(te[qt],$t);te.length===2?lt(J,B,V):J.projectionMatrix.copy(B.projectionMatrix),nt(ht,J,$t)};function nt(ht,_t,At){At===null?ht.matrix.copy(_t.matrixWorld):(ht.matrix.copy(At.matrixWorld),ht.matrix.invert(),ht.matrix.multiply(_t.matrixWorld)),ht.matrix.decompose(ht.position,ht.quaternion,ht.scale),ht.updateMatrixWorld(!0),ht.projectionMatrix.copy(_t.projectionMatrix),ht.projectionMatrixInverse.copy(_t.projectionMatrixInverse),ht.isPerspectiveCamera&&(ht.fov=qp*2*Math.atan(1/ht.projectionMatrix.elements[5]),ht.zoom=1)}this.getCamera=function(){return J},this.getFoveation=function(){if(!(x===null&&b===null))return f},this.setFoveation=function(ht){f=ht,x!==null&&(x.fixedFoveation=ht),b!==null&&b.fixedFoveation!==void 0&&(b.fixedFoveation=ht)},this.hasDepthSensing=function(){return C.texture!==null},this.getDepthSensingMesh=function(){return C.getMesh(J)},this.getCameraTexture=function(ht){return w[ht]};let ft=null;function mt(ht,_t){if(g=_t.getViewerPose(d||o),T=_t,g!==null){const At=g.views;b!==null&&(t.setRenderTargetFramebuffer(z,b.framebuffer),t.setRenderTarget(z));let $t=!1;At.length!==J.cameras.length&&(J.cameras.length=0,$t=!0);for(let Se=0;Se<At.length;Se++){const Nt=At[Se];let Vt=null;if(b!==null)Vt=b.getViewport(Nt);else{const re=y.getViewSubImage(x,Nt);Vt=re.viewport,Se===0&&(t.setRenderTargetTextures(z,re.colorTexture,re.depthStencilTexture),t.setRenderTarget(z))}let Ft=Q[Se];Ft===void 0&&(Ft=new fa,Ft.layers.enable(Se),Ft.viewport=new Ri,Q[Se]=Ft),Ft.matrix.fromArray(Nt.transform.matrix),Ft.matrix.decompose(Ft.position,Ft.quaternion,Ft.scale),Ft.projectionMatrix.fromArray(Nt.projectionMatrix),Ft.projectionMatrixInverse.copy(Ft.projectionMatrix).invert(),Ft.viewport.set(Vt.x,Vt.y,Vt.width,Vt.height),Se===0&&(J.matrix.copy(Ft.matrix),J.matrix.decompose(J.position,J.quaternion,J.scale)),$t===!0&&J.cameras.push(Ft)}const te=a.enabledFeatures;if(te&&te.includes("depth-sensing")&&a.depthUsage=="gpu-optimized"&&R){y=n.getBinding();const Se=y.getDepthInformation(At[0]);Se&&Se.isValid&&Se.texture&&C.init(Se,a.renderState)}if(te&&te.includes("camera-access")&&R){t.state.unbindTexture(),y=n.getBinding();for(let Se=0;Se<At.length;Se++){const Nt=At[Se].camera;if(Nt){let Vt=w[Nt];Vt||(Vt=new Z2,w[Nt]=Vt);const Ft=y.getCameraImage(Nt);Vt.sourceTexture=Ft}}}}for(let At=0;At<F.length;At++){const $t=H[At],te=F[At];$t!==null&&te!==void 0&&te.update($t,_t,d||o)}ft&&ft(ht,_t),_t.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:_t}),T=null}const xt=new HR;xt.setAnimationLoop(mt),this.setAnimationLoop=function(ht){ft=ht},this.dispose=function(){}}}const Fh=new Vo,kF=new gn;function VF(i,t){function e(C,w){C.matrixAutoUpdate===!0&&C.updateMatrix(),w.value.copy(C.matrix)}function n(C,w){w.color.getRGB(C.fogColor.value,qC(i)),w.isFog?(C.fogNear.value=w.near,C.fogFar.value=w.far):w.isFogExp2&&(C.fogDensity.value=w.density)}function a(C,w,N,I,z){w.isMeshBasicMaterial||w.isMeshLambertMaterial?s(C,w):w.isMeshToonMaterial?(s(C,w),y(C,w)):w.isMeshPhongMaterial?(s(C,w),g(C,w)):w.isMeshStandardMaterial?(s(C,w),x(C,w),w.isMeshPhysicalMaterial&&b(C,w,z)):w.isMeshMatcapMaterial?(s(C,w),T(C,w)):w.isMeshDepthMaterial?s(C,w):w.isMeshDistanceMaterial?(s(C,w),R(C,w)):w.isMeshNormalMaterial?s(C,w):w.isLineBasicMaterial?(o(C,w),w.isLineDashedMaterial&&c(C,w)):w.isPointsMaterial?f(C,w,N,I):w.isSpriteMaterial?d(C,w):w.isShadowMaterial?(C.color.value.copy(w.color),C.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}function s(C,w){C.opacity.value=w.opacity,w.color&&C.diffuse.value.copy(w.color),w.emissive&&C.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity),w.map&&(C.map.value=w.map,e(w.map,C.mapTransform)),w.alphaMap&&(C.alphaMap.value=w.alphaMap,e(w.alphaMap,C.alphaMapTransform)),w.bumpMap&&(C.bumpMap.value=w.bumpMap,e(w.bumpMap,C.bumpMapTransform),C.bumpScale.value=w.bumpScale,w.side===Vr&&(C.bumpScale.value*=-1)),w.normalMap&&(C.normalMap.value=w.normalMap,e(w.normalMap,C.normalMapTransform),C.normalScale.value.copy(w.normalScale),w.side===Vr&&C.normalScale.value.negate()),w.displacementMap&&(C.displacementMap.value=w.displacementMap,e(w.displacementMap,C.displacementMapTransform),C.displacementScale.value=w.displacementScale,C.displacementBias.value=w.displacementBias),w.emissiveMap&&(C.emissiveMap.value=w.emissiveMap,e(w.emissiveMap,C.emissiveMapTransform)),w.specularMap&&(C.specularMap.value=w.specularMap,e(w.specularMap,C.specularMapTransform)),w.alphaTest>0&&(C.alphaTest.value=w.alphaTest);const N=t.get(w),I=N.envMap,z=N.envMapRotation;I&&(C.envMap.value=I,Fh.copy(z),Fh.x*=-1,Fh.y*=-1,Fh.z*=-1,I.isCubeTexture&&I.isRenderTargetTexture===!1&&(Fh.y*=-1,Fh.z*=-1),C.envMapRotation.value.setFromMatrix4(kF.makeRotationFromEuler(Fh)),C.flipEnvMap.value=I.isCubeTexture&&I.isRenderTargetTexture===!1?-1:1,C.reflectivity.value=w.reflectivity,C.ior.value=w.ior,C.refractionRatio.value=w.refractionRatio),w.lightMap&&(C.lightMap.value=w.lightMap,C.lightMapIntensity.value=w.lightMapIntensity,e(w.lightMap,C.lightMapTransform)),w.aoMap&&(C.aoMap.value=w.aoMap,C.aoMapIntensity.value=w.aoMapIntensity,e(w.aoMap,C.aoMapTransform))}function o(C,w){C.diffuse.value.copy(w.color),C.opacity.value=w.opacity,w.map&&(C.map.value=w.map,e(w.map,C.mapTransform))}function c(C,w){C.dashSize.value=w.dashSize,C.totalSize.value=w.dashSize+w.gapSize,C.scale.value=w.scale}function f(C,w,N,I){C.diffuse.value.copy(w.color),C.opacity.value=w.opacity,C.size.value=w.size*N,C.scale.value=I*.5,w.map&&(C.map.value=w.map,e(w.map,C.uvTransform)),w.alphaMap&&(C.alphaMap.value=w.alphaMap,e(w.alphaMap,C.alphaMapTransform)),w.alphaTest>0&&(C.alphaTest.value=w.alphaTest)}function d(C,w){C.diffuse.value.copy(w.color),C.opacity.value=w.opacity,C.rotation.value=w.rotation,w.map&&(C.map.value=w.map,e(w.map,C.mapTransform)),w.alphaMap&&(C.alphaMap.value=w.alphaMap,e(w.alphaMap,C.alphaMapTransform)),w.alphaTest>0&&(C.alphaTest.value=w.alphaTest)}function g(C,w){C.specular.value.copy(w.specular),C.shininess.value=Math.max(w.shininess,1e-4)}function y(C,w){w.gradientMap&&(C.gradientMap.value=w.gradientMap)}function x(C,w){C.metalness.value=w.metalness,w.metalnessMap&&(C.metalnessMap.value=w.metalnessMap,e(w.metalnessMap,C.metalnessMapTransform)),C.roughness.value=w.roughness,w.roughnessMap&&(C.roughnessMap.value=w.roughnessMap,e(w.roughnessMap,C.roughnessMapTransform)),w.envMap&&(C.envMapIntensity.value=w.envMapIntensity)}function b(C,w,N){C.ior.value=w.ior,w.sheen>0&&(C.sheenColor.value.copy(w.sheenColor).multiplyScalar(w.sheen),C.sheenRoughness.value=w.sheenRoughness,w.sheenColorMap&&(C.sheenColorMap.value=w.sheenColorMap,e(w.sheenColorMap,C.sheenColorMapTransform)),w.sheenRoughnessMap&&(C.sheenRoughnessMap.value=w.sheenRoughnessMap,e(w.sheenRoughnessMap,C.sheenRoughnessMapTransform))),w.clearcoat>0&&(C.clearcoat.value=w.clearcoat,C.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap&&(C.clearcoatMap.value=w.clearcoatMap,e(w.clearcoatMap,C.clearcoatMapTransform)),w.clearcoatRoughnessMap&&(C.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap,e(w.clearcoatRoughnessMap,C.clearcoatRoughnessMapTransform)),w.clearcoatNormalMap&&(C.clearcoatNormalMap.value=w.clearcoatNormalMap,e(w.clearcoatNormalMap,C.clearcoatNormalMapTransform),C.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),w.side===Vr&&C.clearcoatNormalScale.value.negate())),w.dispersion>0&&(C.dispersion.value=w.dispersion),w.iridescence>0&&(C.iridescence.value=w.iridescence,C.iridescenceIOR.value=w.iridescenceIOR,C.iridescenceThicknessMinimum.value=w.iridescenceThicknessRange[0],C.iridescenceThicknessMaximum.value=w.iridescenceThicknessRange[1],w.iridescenceMap&&(C.iridescenceMap.value=w.iridescenceMap,e(w.iridescenceMap,C.iridescenceMapTransform)),w.iridescenceThicknessMap&&(C.iridescenceThicknessMap.value=w.iridescenceThicknessMap,e(w.iridescenceThicknessMap,C.iridescenceThicknessMapTransform))),w.transmission>0&&(C.transmission.value=w.transmission,C.transmissionSamplerMap.value=N.texture,C.transmissionSamplerSize.value.set(N.width,N.height),w.transmissionMap&&(C.transmissionMap.value=w.transmissionMap,e(w.transmissionMap,C.transmissionMapTransform)),C.thickness.value=w.thickness,w.thicknessMap&&(C.thicknessMap.value=w.thicknessMap,e(w.thicknessMap,C.thicknessMapTransform)),C.attenuationDistance.value=w.attenuationDistance,C.attenuationColor.value.copy(w.attenuationColor)),w.anisotropy>0&&(C.anisotropyVector.value.set(w.anisotropy*Math.cos(w.anisotropyRotation),w.anisotropy*Math.sin(w.anisotropyRotation)),w.anisotropyMap&&(C.anisotropyMap.value=w.anisotropyMap,e(w.anisotropyMap,C.anisotropyMapTransform))),C.specularIntensity.value=w.specularIntensity,C.specularColor.value.copy(w.specularColor),w.specularColorMap&&(C.specularColorMap.value=w.specularColorMap,e(w.specularColorMap,C.specularColorMapTransform)),w.specularIntensityMap&&(C.specularIntensityMap.value=w.specularIntensityMap,e(w.specularIntensityMap,C.specularIntensityMapTransform))}function T(C,w){w.matcap&&(C.matcap.value=w.matcap)}function R(C,w){const N=t.get(w).light;C.referencePosition.value.setFromMatrixPosition(N.matrixWorld),C.nearDistance.value=N.shadow.camera.near,C.farDistance.value=N.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:a}}function HF(i,t,e,n){let a={},s={},o=[];const c=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function f(N,I){const z=I.program;n.uniformBlockBinding(N,z)}function d(N,I){let z=a[N.id];z===void 0&&(T(N),z=g(N),a[N.id]=z,N.addEventListener("dispose",C));const F=I.program;n.updateUBOMapping(N,F);const H=t.render.frame;s[N.id]!==H&&(x(N),s[N.id]=H)}function g(N){const I=y();N.__bindingPointIndex=I;const z=i.createBuffer(),F=N.__size,H=N.usage;return i.bindBuffer(i.UNIFORM_BUFFER,z),i.bufferData(i.UNIFORM_BUFFER,F,H),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,I,z),z}function y(){for(let N=0;N<c;N++)if(o.indexOf(N)===-1)return o.push(N),N;return rn("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function x(N){const I=a[N.id],z=N.uniforms,F=N.__cache;i.bindBuffer(i.UNIFORM_BUFFER,I);for(let H=0,q=z.length;H<q;H++){const Z=Array.isArray(z[H])?z[H]:[z[H]];for(let B=0,V=Z.length;B<V;B++){const Q=Z[B];if(b(Q,H,B,F)===!0){const J=Q.__offset,rt=Array.isArray(Q.value)?Q.value:[Q.value];let ut=0;for(let vt=0;vt<rt.length;vt++){const j=rt[vt],K=R(j);typeof j=="number"||typeof j=="boolean"?(Q.__data[0]=j,i.bufferSubData(i.UNIFORM_BUFFER,J+ut,Q.__data)):j.isMatrix3?(Q.__data[0]=j.elements[0],Q.__data[1]=j.elements[1],Q.__data[2]=j.elements[2],Q.__data[3]=0,Q.__data[4]=j.elements[3],Q.__data[5]=j.elements[4],Q.__data[6]=j.elements[5],Q.__data[7]=0,Q.__data[8]=j.elements[6],Q.__data[9]=j.elements[7],Q.__data[10]=j.elements[8],Q.__data[11]=0):(j.toArray(Q.__data,ut),ut+=K.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,J,Q.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function b(N,I,z,F){const H=N.value,q=I+"_"+z;if(F[q]===void 0)return typeof H=="number"||typeof H=="boolean"?F[q]=H:F[q]=H.clone(),!0;{const Z=F[q];if(typeof H=="number"||typeof H=="boolean"){if(Z!==H)return F[q]=H,!0}else if(Z.equals(H)===!1)return Z.copy(H),!0}return!1}function T(N){const I=N.uniforms;let z=0;const F=16;for(let q=0,Z=I.length;q<Z;q++){const B=Array.isArray(I[q])?I[q]:[I[q]];for(let V=0,Q=B.length;V<Q;V++){const J=B[V],rt=Array.isArray(J.value)?J.value:[J.value];for(let ut=0,vt=rt.length;ut<vt;ut++){const j=rt[ut],K=R(j),et=z%F,dt=et%K.boundary,lt=et+dt;z+=dt,lt!==0&&F-lt<K.storage&&(z+=F-lt),J.__data=new Float32Array(K.storage/Float32Array.BYTES_PER_ELEMENT),J.__offset=z,z+=K.storage}}}const H=z%F;return H>0&&(z+=F-H),N.__size=z,N.__cache={},this}function R(N){const I={boundary:0,storage:0};return typeof N=="number"||typeof N=="boolean"?(I.boundary=4,I.storage=4):N.isVector2?(I.boundary=8,I.storage=8):N.isVector3||N.isColor?(I.boundary=16,I.storage=12):N.isVector4?(I.boundary=16,I.storage=16):N.isMatrix3?(I.boundary=48,I.storage=48):N.isMatrix4?(I.boundary=64,I.storage=64):N.isTexture?Ie("WebGLRenderer: Texture samplers can not be part of an uniforms group."):Ie("WebGLRenderer: Unsupported uniform value type.",N),I}function C(N){const I=N.target;I.removeEventListener("dispose",C);const z=o.indexOf(I.__bindingPointIndex);o.splice(z,1),i.deleteBuffer(a[I.id]),delete a[I.id],delete s[I.id]}function w(){for(const N in a)i.deleteBuffer(a[N]);o=[],a={},s={}}return{bind:f,update:d,dispose:w}}const GF=new Uint16Array([12469,15057,12620,14925,13266,14620,13807,14376,14323,13990,14545,13625,14713,13328,14840,12882,14931,12528,14996,12233,15039,11829,15066,11525,15080,11295,15085,10976,15082,10705,15073,10495,13880,14564,13898,14542,13977,14430,14158,14124,14393,13732,14556,13410,14702,12996,14814,12596,14891,12291,14937,11834,14957,11489,14958,11194,14943,10803,14921,10506,14893,10278,14858,9960,14484,14039,14487,14025,14499,13941,14524,13740,14574,13468,14654,13106,14743,12678,14818,12344,14867,11893,14889,11509,14893,11180,14881,10751,14852,10428,14812,10128,14765,9754,14712,9466,14764,13480,14764,13475,14766,13440,14766,13347,14769,13070,14786,12713,14816,12387,14844,11957,14860,11549,14868,11215,14855,10751,14825,10403,14782,10044,14729,9651,14666,9352,14599,9029,14967,12835,14966,12831,14963,12804,14954,12723,14936,12564,14917,12347,14900,11958,14886,11569,14878,11247,14859,10765,14828,10401,14784,10011,14727,9600,14660,9289,14586,8893,14508,8533,15111,12234,15110,12234,15104,12216,15092,12156,15067,12010,15028,11776,14981,11500,14942,11205,14902,10752,14861,10393,14812,9991,14752,9570,14682,9252,14603,8808,14519,8445,14431,8145,15209,11449,15208,11451,15202,11451,15190,11438,15163,11384,15117,11274,15055,10979,14994,10648,14932,10343,14871,9936,14803,9532,14729,9218,14645,8742,14556,8381,14461,8020,14365,7603,15273,10603,15272,10607,15267,10619,15256,10631,15231,10614,15182,10535,15118,10389,15042,10167,14963,9787,14883,9447,14800,9115,14710,8665,14615,8318,14514,7911,14411,7507,14279,7198,15314,9675,15313,9683,15309,9712,15298,9759,15277,9797,15229,9773,15166,9668,15084,9487,14995,9274,14898,8910,14800,8539,14697,8234,14590,7790,14479,7409,14367,7067,14178,6621,15337,8619,15337,8631,15333,8677,15325,8769,15305,8871,15264,8940,15202,8909,15119,8775,15022,8565,14916,8328,14804,8009,14688,7614,14569,7287,14448,6888,14321,6483,14088,6171,15350,7402,15350,7419,15347,7480,15340,7613,15322,7804,15287,7973,15229,8057,15148,8012,15046,7846,14933,7611,14810,7357,14682,7069,14552,6656,14421,6316,14251,5948,14007,5528,15356,5942,15356,5977,15353,6119,15348,6294,15332,6551,15302,6824,15249,7044,15171,7122,15070,7050,14949,6861,14818,6611,14679,6349,14538,6067,14398,5651,14189,5311,13935,4958,15359,4123,15359,4153,15356,4296,15353,4646,15338,5160,15311,5508,15263,5829,15188,6042,15088,6094,14966,6001,14826,5796,14678,5543,14527,5287,14377,4985,14133,4586,13869,4257,15360,1563,15360,1642,15358,2076,15354,2636,15341,3350,15317,4019,15273,4429,15203,4732,15105,4911,14981,4932,14836,4818,14679,4621,14517,4386,14359,4156,14083,3795,13808,3437,15360,122,15360,137,15358,285,15355,636,15344,1274,15322,2177,15281,2765,15215,3223,15120,3451,14995,3569,14846,3567,14681,3466,14511,3305,14344,3121,14037,2800,13753,2467,15360,0,15360,1,15359,21,15355,89,15346,253,15325,479,15287,796,15225,1148,15133,1492,15008,1749,14856,1882,14685,1886,14506,1783,14324,1608,13996,1398,13702,1183]);let Oc=null;function jF(){return Oc===null&&(Oc=new Jl(GF,16,16,rd,tc),Oc.name="DFG_LUT",Oc.minFilter=Di,Oc.magFilter=Di,Oc.wrapS=ao,Oc.wrapT=ao,Oc.generateMipmaps=!1,Oc.needsUpdate=!0),Oc}class YR{constructor(t={}){const{canvas:e=GC(),context:n=null,depth:a=!0,stencil:s=!1,alpha:o=!1,antialias:c=!1,premultipliedAlpha:f=!0,preserveDrawingBuffer:d=!1,powerPreference:g="default",failIfMajorPerformanceCaveat:y=!1,reversedDepthBuffer:x=!1,outputBufferType:b=Br}=t;this.isWebGLRenderer=!0;let T;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");T=n.getContextAttributes().alpha}else T=o;const R=b,C=new Set([v1,g1,E0]),w=new Set([Br,dl,Hp,Gp,d1,p1]),N=new Uint32Array(4),I=new Int32Array(4);let z=null,F=null;const H=[],q=[];let Z=null;this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=fl,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const B=this;let V=!1;this._outputColorSpace=ir;let Q=0,J=0,rt=null,ut=-1,vt=null;const j=new Ri,K=new Ri;let et=null;const dt=new He(0);let lt=0,G=e.width,nt=e.height,ft=1,mt=null,xt=null;const ht=new Ri(0,0,G,nt),_t=new Ri(0,0,G,nt);let At=!1;const $t=new im;let te=!1,qt=!1;const ne=new gn,Se=new pt,Nt=new Ri,Vt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ft=!1;function re(){return rt===null?ft:1}let at=n;function ue(it,Rt){return e.getContext(it,Rt)}try{const it={alpha:!0,depth:a,stencil:s,antialias:c,premultipliedAlpha:f,preserveDrawingBuffer:d,powerPreference:g,failIfMajorPerformanceCaveat:y};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${c1}`),e.addEventListener("webglcontextlost",Re,!1),e.addEventListener("webglcontextrestored",Le,!1),e.addEventListener("webglcontextcreationerror",qe,!1),at===null){const Rt="webgl2";if(at=ue(Rt,it),at===null)throw ue(Rt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(it){throw rn("WebGLRenderer: "+it.message),it}let Zt,Lt,ee,$,Y,yt,Bt,Dt,Ct,ve,he,be,Ce,Gt,Qt,se,gt,wt,xe,St,ie,le,Ae,ce;function jt(){Zt=new WB(at),Zt.init(),le=new XR(at,Zt),Lt=new PB(at,Zt,t,le),ee=new UF(at,Zt),Lt.reversedDepthBuffer&&x&&ee.buffers.depth.setReversed(!0),$=new YB(at),Y=new _F,yt=new IF(at,Zt,ee,Y,Lt,le,$),Bt=new BB(B),Dt=new jB(B),Ct=new JI(at),Ae=new UB(at,Ct),ve=new qB(at,Ct,$,Ae),he=new KB(at,ve,Ct,$),xe=new ZB(at,Lt,yt),se=new zB(Y),be=new yF(B,Bt,Dt,Zt,Lt,Ae,se),Ce=new VF(B,Y),Gt=new SF,Qt=new wF(Zt),wt=new NB(B,Bt,Dt,ee,he,T,f),gt=new OF(B,he,Lt),ce=new HF(at,$,Lt,ee),St=new IB(at,Zt,$),ie=new XB(at,Zt,$),$.programs=be.programs,B.capabilities=Lt,B.extensions=Zt,B.properties=Y,B.renderLists=Gt,B.shadowMap=gt,B.state=ee,B.info=$}jt(),R!==Br&&(Z=new JB(R,e.width,e.height,a,s));const me=new FF(B,at);this.xr=me,this.getContext=function(){return at},this.getContextAttributes=function(){return at.getContextAttributes()},this.forceContextLoss=function(){const it=Zt.get("WEBGL_lose_context");it&&it.loseContext()},this.forceContextRestore=function(){const it=Zt.get("WEBGL_lose_context");it&&it.restoreContext()},this.getPixelRatio=function(){return ft},this.setPixelRatio=function(it){it!==void 0&&(ft=it,this.setSize(G,nt,!1))},this.getSize=function(it){return it.set(G,nt)},this.setSize=function(it,Rt,Xt=!0){if(me.isPresenting){Ie("WebGLRenderer: Can't change size while VR device is presenting.");return}G=it,nt=Rt,e.width=Math.floor(it*ft),e.height=Math.floor(Rt*ft),Xt===!0&&(e.style.width=it+"px",e.style.height=Rt+"px"),Z!==null&&Z.setSize(e.width,e.height),this.setViewport(0,0,it,Rt)},this.getDrawingBufferSize=function(it){return it.set(G*ft,nt*ft).floor()},this.setDrawingBufferSize=function(it,Rt,Xt){G=it,nt=Rt,ft=Xt,e.width=Math.floor(it*Xt),e.height=Math.floor(Rt*Xt),this.setViewport(0,0,it,Rt)},this.setEffects=function(it){if(R===Br){console.error("THREE.WebGLRenderer: setEffects() requires outputBufferType set to HalfFloatType or FloatType.");return}if(it){for(let Rt=0;Rt<it.length;Rt++)if(it[Rt].isOutputPass===!0){console.warn("THREE.WebGLRenderer: OutputPass is not needed in setEffects(). Tone mapping and color space conversion are applied automatically.");break}}Z.setEffects(it||[])},this.getCurrentViewport=function(it){return it.copy(j)},this.getViewport=function(it){return it.copy(ht)},this.setViewport=function(it,Rt,Xt,kt){it.isVector4?ht.set(it.x,it.y,it.z,it.w):ht.set(it,Rt,Xt,kt),ee.viewport(j.copy(ht).multiplyScalar(ft).round())},this.getScissor=function(it){return it.copy(_t)},this.setScissor=function(it,Rt,Xt,kt){it.isVector4?_t.set(it.x,it.y,it.z,it.w):_t.set(it,Rt,Xt,kt),ee.scissor(K.copy(_t).multiplyScalar(ft).round())},this.getScissorTest=function(){return At},this.setScissorTest=function(it){ee.setScissorTest(At=it)},this.setOpaqueSort=function(it){mt=it},this.setTransparentSort=function(it){xt=it},this.getClearColor=function(it){return it.copy(wt.getClearColor())},this.setClearColor=function(){wt.setClearColor(...arguments)},this.getClearAlpha=function(){return wt.getClearAlpha()},this.setClearAlpha=function(){wt.setClearAlpha(...arguments)},this.clear=function(it=!0,Rt=!0,Xt=!0){let kt=0;if(it){let Ut=!1;if(rt!==null){const Ee=rt.texture.format;Ut=C.has(Ee)}if(Ut){const Ee=rt.texture.type,Ue=w.has(Ee),De=wt.getClearColor(),Pe=wt.getClearAlpha(),Me=De.r,Oe=De.g,Ve=De.b;Ue?(N[0]=Me,N[1]=Oe,N[2]=Ve,N[3]=Pe,at.clearBufferuiv(at.COLOR,0,N)):(I[0]=Me,I[1]=Oe,I[2]=Ve,I[3]=Pe,at.clearBufferiv(at.COLOR,0,I))}else kt|=at.COLOR_BUFFER_BIT}Rt&&(kt|=at.DEPTH_BUFFER_BIT),Xt&&(kt|=at.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),at.clear(kt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Re,!1),e.removeEventListener("webglcontextrestored",Le,!1),e.removeEventListener("webglcontextcreationerror",qe,!1),wt.dispose(),Gt.dispose(),Qt.dispose(),Y.dispose(),Bt.dispose(),Dt.dispose(),he.dispose(),Ae.dispose(),ce.dispose(),be.dispose(),me.dispose(),me.removeEventListener("sessionstart",ke),me.removeEventListener("sessionend",Fi),si.stop()};function Re(it){it.preventDefault(),l0("WebGLRenderer: Context Lost."),V=!0}function Le(){l0("WebGLRenderer: Context Restored."),V=!1;const it=$.autoReset,Rt=gt.enabled,Xt=gt.autoUpdate,kt=gt.needsUpdate,Ut=gt.type;jt(),$.autoReset=it,gt.enabled=Rt,gt.autoUpdate=Xt,gt.needsUpdate=kt,gt.type=Ut}function qe(it){rn("WebGLRenderer: A WebGL context could not be created. Reason: ",it.statusMessage)}function bn(it){const Rt=it.target;Rt.removeEventListener("dispose",bn),Bn(Rt)}function Bn(it){Ai(it),Y.remove(it)}function Ai(it){const Rt=Y.get(it).programs;Rt!==void 0&&(Rt.forEach(function(Xt){be.releaseProgram(Xt)}),it.isShaderMaterial&&be.releaseShaderCache(it))}this.renderBufferDirect=function(it,Rt,Xt,kt,Ut,Ee){Rt===null&&(Rt=Vt);const Ue=Ut.isMesh&&Ut.matrixWorld.determinant()<0,De=fr(it,Rt,Xt,kt,Ut);ee.setMaterial(kt,Ue);let Pe=Xt.index,Me=1;if(kt.wireframe===!0){if(Pe=ve.getWireframeAttribute(Xt),Pe===void 0)return;Me=2}const Oe=Xt.drawRange,Ve=Xt.attributes.position;let Je=Oe.start*Me,xn=(Oe.start+Oe.count)*Me;Ee!==null&&(Je=Math.max(Je,Ee.start*Me),xn=Math.min(xn,(Ee.start+Ee.count)*Me)),Pe!==null?(Je=Math.max(Je,0),xn=Math.min(xn,Pe.count)):Ve!=null&&(Je=Math.max(Je,0),xn=Math.min(xn,Ve.count));const Kn=xn-Je;if(Kn<0||Kn===1/0)return;Ae.setup(Ut,kt,De,Xt,Pe);let ze,nn=St;if(Pe!==null&&(ze=Ct.get(Pe),nn=ie,nn.setIndex(ze)),Ut.isMesh)kt.wireframe===!0?(ee.setLineWidth(kt.wireframeLinewidth*re()),nn.setMode(at.LINES)):nn.setMode(at.TRIANGLES);else if(Ut.isLine){let Ye=kt.linewidth;Ye===void 0&&(Ye=1),ee.setLineWidth(Ye*re()),Ut.isLineSegments?nn.setMode(at.LINES):Ut.isLineLoop?nn.setMode(at.LINE_LOOP):nn.setMode(at.LINE_STRIP)}else Ut.isPoints?nn.setMode(at.POINTS):Ut.isSprite&&nn.setMode(at.TRIANGLES);if(Ut.isBatchedMesh)if(Ut._multiDrawInstances!==null)Wp("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),nn.renderMultiDrawInstances(Ut._multiDrawStarts,Ut._multiDrawCounts,Ut._multiDrawCount,Ut._multiDrawInstances);else if(Zt.get("WEBGL_multi_draw"))nn.renderMultiDraw(Ut._multiDrawStarts,Ut._multiDrawCounts,Ut._multiDrawCount);else{const Ye=Ut._multiDrawStarts,Cn=Ut._multiDrawCounts,je=Ut._multiDrawCount,qi=Pe?Ct.get(Pe).bytesPerElement:1,ya=Y.get(kt).currentProgram.getUniforms();for(let ai=0;ai<je;ai++)ya.setValue(at,"_gl_DrawID",ai),nn.render(Ye[ai]/qi,Cn[ai])}else if(Ut.isInstancedMesh)nn.renderInstances(Je,Kn,Ut.count);else if(Xt.isInstancedBufferGeometry){const Ye=Xt._maxInstanceCount!==void 0?Xt._maxInstanceCount:1/0,Cn=Math.min(Xt.instanceCount,Ye);nn.renderInstances(Je,Kn,Cn)}else nn.render(Je,Kn)};function ia(it,Rt,Xt){it.transparent===!0&&it.side===cl&&it.forceSinglePass===!1?(it.side=Vr,it.needsUpdate=!0,cr(it,Rt,Xt),it.side=Nu,it.needsUpdate=!0,cr(it,Rt,Xt),it.side=cl):cr(it,Rt,Xt)}this.compile=function(it,Rt,Xt=null){Xt===null&&(Xt=it),F=Qt.get(Xt),F.init(Rt),q.push(F),Xt.traverseVisible(function(Ut){Ut.isLight&&Ut.layers.test(Rt.layers)&&(F.pushLight(Ut),Ut.castShadow&&F.pushShadow(Ut))}),it!==Xt&&it.traverseVisible(function(Ut){Ut.isLight&&Ut.layers.test(Rt.layers)&&(F.pushLight(Ut),Ut.castShadow&&F.pushShadow(Ut))}),F.setupLights();const kt=new Set;return it.traverse(function(Ut){if(!(Ut.isMesh||Ut.isPoints||Ut.isLine||Ut.isSprite))return;const Ee=Ut.material;if(Ee)if(Array.isArray(Ee))for(let Ue=0;Ue<Ee.length;Ue++){const De=Ee[Ue];ia(De,Xt,Ut),kt.add(De)}else ia(Ee,Xt,Ut),kt.add(Ee)}),F=q.pop(),kt},this.compileAsync=function(it,Rt,Xt=null){const kt=this.compile(it,Rt,Xt);return new Promise(Ut=>{function Ee(){if(kt.forEach(function(Ue){Y.get(Ue).currentProgram.isReady()&&kt.delete(Ue)}),kt.size===0){Ut(it);return}setTimeout(Ee,10)}Zt.get("KHR_parallel_shader_compile")!==null?Ee():setTimeout(Ee,10)})};let Ca=null;function Yn(it){Ca&&Ca(it)}function ke(){si.stop()}function Fi(){si.start()}const si=new HR;si.setAnimationLoop(Yn),typeof self<"u"&&si.setContext(self),this.setAnimationLoop=function(it){Ca=it,me.setAnimationLoop(it),it===null?si.stop():si.start()},me.addEventListener("sessionstart",ke),me.addEventListener("sessionend",Fi),this.render=function(it,Rt){if(Rt!==void 0&&Rt.isCamera!==!0){rn("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(V===!0)return;const Xt=me.enabled===!0&&me.isPresenting===!0,kt=Z!==null&&(rt===null||Xt)&&Z.begin(B,rt);if(it.matrixWorldAutoUpdate===!0&&it.updateMatrixWorld(),Rt.parent===null&&Rt.matrixWorldAutoUpdate===!0&&Rt.updateMatrixWorld(),me.enabled===!0&&me.isPresenting===!0&&(Z===null||Z.isCompositing()===!1)&&(me.cameraAutoUpdate===!0&&me.updateCamera(Rt),Rt=me.getCamera()),it.isScene===!0&&it.onBeforeRender(B,it,Rt,rt),F=Qt.get(it,q.length),F.init(Rt),q.push(F),ne.multiplyMatrices(Rt.projectionMatrix,Rt.matrixWorldInverse),$t.setFromProjectionMatrix(ne,Fo,Rt.reversedDepth),qt=this.localClippingEnabled,te=se.init(this.clippingPlanes,qt),z=Gt.get(it,H.length),z.init(),H.push(z),me.enabled===!0&&me.isPresenting===!0){const Ue=B.xr.getDepthSensingMesh();Ue!==null&&Hn(Ue,Rt,-1/0,B.sortObjects)}Hn(it,Rt,0,B.sortObjects),z.finish(),B.sortObjects===!0&&z.sort(mt,xt),Ft=me.enabled===!1||me.isPresenting===!1||me.hasDepthSensing()===!1,Ft&&wt.addToRenderList(z,it),this.info.render.frame++,te===!0&&se.beginShadows();const Ut=F.state.shadowsArray;if(gt.render(Ut,it,Rt),te===!0&&se.endShadows(),this.info.autoReset===!0&&this.info.reset(),(kt&&Z.hasRenderPass())===!1){const Ue=z.opaque,De=z.transmissive;if(F.setupLights(),Rt.isArrayCamera){const Pe=Rt.cameras;if(De.length>0)for(let Me=0,Oe=Pe.length;Me<Oe;Me++){const Ve=Pe[Me];Li(Ue,De,it,Ve)}Ft&&wt.render(it);for(let Me=0,Oe=Pe.length;Me<Oe;Me++){const Ve=Pe[Me];cn(z,it,Ve,Ve.viewport)}}else De.length>0&&Li(Ue,De,it,Rt),Ft&&wt.render(it),cn(z,it,Rt)}rt!==null&&J===0&&(yt.updateMultisampleRenderTarget(rt),yt.updateRenderTargetMipmap(rt)),kt&&Z.end(B),it.isScene===!0&&it.onAfterRender(B,it,Rt),Ae.resetDefaultState(),ut=-1,vt=null,q.pop(),q.length>0?(F=q[q.length-1],te===!0&&se.setGlobalState(B.clippingPlanes,F.state.camera)):F=null,H.pop(),H.length>0?z=H[H.length-1]:z=null};function Hn(it,Rt,Xt,kt){if(it.visible===!1)return;if(it.layers.test(Rt.layers)){if(it.isGroup)Xt=it.renderOrder;else if(it.isLOD)it.autoUpdate===!0&&it.update(Rt);else if(it.isLight)F.pushLight(it),it.castShadow&&F.pushShadow(it);else if(it.isSprite){if(!it.frustumCulled||$t.intersectsSprite(it)){kt&&Nt.setFromMatrixPosition(it.matrixWorld).applyMatrix4(ne);const Ue=he.update(it),De=it.material;De.visible&&z.push(it,Ue,De,Xt,Nt.z,null)}}else if((it.isMesh||it.isLine||it.isPoints)&&(!it.frustumCulled||$t.intersectsObject(it))){const Ue=he.update(it),De=it.material;if(kt&&(it.boundingSphere!==void 0?(it.boundingSphere===null&&it.computeBoundingSphere(),Nt.copy(it.boundingSphere.center)):(Ue.boundingSphere===null&&Ue.computeBoundingSphere(),Nt.copy(Ue.boundingSphere.center)),Nt.applyMatrix4(it.matrixWorld).applyMatrix4(ne)),Array.isArray(De)){const Pe=Ue.groups;for(let Me=0,Oe=Pe.length;Me<Oe;Me++){const Ve=Pe[Me],Je=De[Ve.materialIndex];Je&&Je.visible&&z.push(it,Ue,Je,Xt,Nt.z,Ve)}}else De.visible&&z.push(it,Ue,De,Xt,Nt.z,null)}}const Ee=it.children;for(let Ue=0,De=Ee.length;Ue<De;Ue++)Hn(Ee[Ue],Rt,Xt,kt)}function cn(it,Rt,Xt,kt){const{opaque:Ut,transmissive:Ee,transparent:Ue}=it;F.setupLightsView(Xt),te===!0&&se.setGlobalState(B.clippingPlanes,Xt),kt&&ee.viewport(j.copy(kt)),Ut.length>0&&ga(Ut,Rt,Xt),Ee.length>0&&ga(Ee,Rt,Xt),Ue.length>0&&ga(Ue,Rt,Xt),ee.buffers.depth.setTest(!0),ee.buffers.depth.setMask(!0),ee.buffers.color.setMask(!0),ee.setPolygonOffset(!1)}function Li(it,Rt,Xt,kt){if((Xt.isScene===!0?Xt.overrideMaterial:null)!==null)return;if(F.state.transmissionRenderTarget[kt.id]===void 0){const Je=Zt.has("EXT_color_buffer_half_float")||Zt.has("EXT_color_buffer_float");F.state.transmissionRenderTarget[kt.id]=new ro(1,1,{generateMipmaps:!0,type:Je?tc:Br,minFilter:Uc,samples:Lt.samples,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Xn.workingColorSpace})}const Ee=F.state.transmissionRenderTarget[kt.id],Ue=kt.viewport||j;Ee.setSize(Ue.z*B.transmissionResolutionScale,Ue.w*B.transmissionResolutionScale);const De=B.getRenderTarget(),Pe=B.getActiveCubeFace(),Me=B.getActiveMipmapLevel();B.setRenderTarget(Ee),B.getClearColor(dt),lt=B.getClearAlpha(),lt<1&&B.setClearColor(16777215,.5),B.clear(),Ft&&wt.render(Xt);const Oe=B.toneMapping;B.toneMapping=fl;const Ve=kt.viewport;if(kt.viewport!==void 0&&(kt.viewport=void 0),F.setupLightsView(kt),te===!0&&se.setGlobalState(B.clippingPlanes,kt),ga(it,Xt,kt),yt.updateMultisampleRenderTarget(Ee),yt.updateRenderTargetMipmap(Ee),Zt.has("WEBGL_multisampled_render_to_texture")===!1){let Je=!1;for(let xn=0,Kn=Rt.length;xn<Kn;xn++){const ze=Rt[xn],{object:nn,geometry:Ye,material:Cn,group:je}=ze;if(Cn.side===cl&&nn.layers.test(kt.layers)){const qi=Cn.side;Cn.side=Vr,Cn.needsUpdate=!0,fs(nn,Xt,kt,Ye,Cn,je),Cn.side=qi,Cn.needsUpdate=!0,Je=!0}}Je===!0&&(yt.updateMultisampleRenderTarget(Ee),yt.updateRenderTargetMipmap(Ee))}B.setRenderTarget(De,Pe,Me),B.setClearColor(dt,lt),Ve!==void 0&&(kt.viewport=Ve),B.toneMapping=Oe}function ga(it,Rt,Xt){const kt=Rt.isScene===!0?Rt.overrideMaterial:null;for(let Ut=0,Ee=it.length;Ut<Ee;Ut++){const Ue=it[Ut],{object:De,geometry:Pe,group:Me}=Ue;let Oe=Ue.material;Oe.allowOverride===!0&&kt!==null&&(Oe=kt),De.layers.test(Xt.layers)&&fs(De,Rt,Xt,Pe,Oe,Me)}}function fs(it,Rt,Xt,kt,Ut,Ee){it.onBeforeRender(B,Rt,Xt,kt,Ut,Ee),it.modelViewMatrix.multiplyMatrices(Xt.matrixWorldInverse,it.matrixWorld),it.normalMatrix.getNormalMatrix(it.modelViewMatrix),Ut.onBeforeRender(B,Rt,Xt,kt,it,Ee),Ut.transparent===!0&&Ut.side===cl&&Ut.forceSinglePass===!1?(Ut.side=Vr,Ut.needsUpdate=!0,B.renderBufferDirect(Xt,Rt,kt,Ut,it,Ee),Ut.side=Nu,Ut.needsUpdate=!0,B.renderBufferDirect(Xt,Rt,kt,Ut,it,Ee),Ut.side=cl):B.renderBufferDirect(Xt,Rt,kt,Ut,it,Ee),it.onAfterRender(B,Rt,Xt,kt,Ut,Ee)}function cr(it,Rt,Xt){Rt.isScene!==!0&&(Rt=Vt);const kt=Y.get(it),Ut=F.state.lights,Ee=F.state.shadowsArray,Ue=Ut.state.version,De=be.getParameters(it,Ut.state,Ee,Rt,Xt),Pe=be.getProgramCacheKey(De);let Me=kt.programs;kt.environment=it.isMeshStandardMaterial?Rt.environment:null,kt.fog=Rt.fog,kt.envMap=(it.isMeshStandardMaterial?Dt:Bt).get(it.envMap||kt.environment),kt.envMapRotation=kt.environment!==null&&it.envMap===null?Rt.environmentRotation:it.envMapRotation,Me===void 0&&(it.addEventListener("dispose",bn),Me=new Map,kt.programs=Me);let Oe=Me.get(Pe);if(Oe!==void 0){if(kt.currentProgram===Oe&&kt.lightsStateVersion===Ue)return ur(it,De),Oe}else De.uniforms=be.getUniforms(it),it.onBeforeCompile(De,B),Oe=be.acquireProgram(De,Pe),Me.set(Pe,Oe),kt.uniforms=De.uniforms;const Ve=kt.uniforms;return(!it.isShaderMaterial&&!it.isRawShaderMaterial||it.clipping===!0)&&(Ve.clippingPlanes=se.uniform),ur(it,De),kt.needsLights=yi(it),kt.lightsStateVersion=Ue,kt.needsLights&&(Ve.ambientLightColor.value=Ut.state.ambient,Ve.lightProbe.value=Ut.state.probe,Ve.directionalLights.value=Ut.state.directional,Ve.directionalLightShadows.value=Ut.state.directionalShadow,Ve.spotLights.value=Ut.state.spot,Ve.spotLightShadows.value=Ut.state.spotShadow,Ve.rectAreaLights.value=Ut.state.rectArea,Ve.ltc_1.value=Ut.state.rectAreaLTC1,Ve.ltc_2.value=Ut.state.rectAreaLTC2,Ve.pointLights.value=Ut.state.point,Ve.pointLightShadows.value=Ut.state.pointShadow,Ve.hemisphereLights.value=Ut.state.hemi,Ve.directionalShadowMap.value=Ut.state.directionalShadowMap,Ve.directionalShadowMatrix.value=Ut.state.directionalShadowMatrix,Ve.spotShadowMap.value=Ut.state.spotShadowMap,Ve.spotLightMatrix.value=Ut.state.spotLightMatrix,Ve.spotLightMap.value=Ut.state.spotLightMap,Ve.pointShadowMap.value=Ut.state.pointShadowMap,Ve.pointShadowMatrix.value=Ut.state.pointShadowMatrix),kt.currentProgram=Oe,kt.uniformsList=null,Oe}function lo(it){if(it.uniformsList===null){const Rt=it.currentProgram.getUniforms();it.uniformsList=Yy.seqWithValue(Rt.seq,it.uniforms)}return it.uniformsList}function ur(it,Rt){const Xt=Y.get(it);Xt.outputColorSpace=Rt.outputColorSpace,Xt.batching=Rt.batching,Xt.batchingColor=Rt.batchingColor,Xt.instancing=Rt.instancing,Xt.instancingColor=Rt.instancingColor,Xt.instancingMorph=Rt.instancingMorph,Xt.skinning=Rt.skinning,Xt.morphTargets=Rt.morphTargets,Xt.morphNormals=Rt.morphNormals,Xt.morphColors=Rt.morphColors,Xt.morphTargetsCount=Rt.morphTargetsCount,Xt.numClippingPlanes=Rt.numClippingPlanes,Xt.numIntersection=Rt.numClipIntersection,Xt.vertexAlphas=Rt.vertexAlphas,Xt.vertexTangents=Rt.vertexTangents,Xt.toneMapping=Rt.toneMapping}function fr(it,Rt,Xt,kt,Ut){Rt.isScene!==!0&&(Rt=Vt),yt.resetTextureUnits();const Ee=Rt.fog,Ue=kt.isMeshStandardMaterial?Rt.environment:null,De=rt===null?B.outputColorSpace:rt.isXRRenderTarget===!0?rt.texture.colorSpace:Ff,Pe=(kt.isMeshStandardMaterial?Dt:Bt).get(kt.envMap||Ue),Me=kt.vertexColors===!0&&!!Xt.attributes.color&&Xt.attributes.color.itemSize===4,Oe=!!Xt.attributes.tangent&&(!!kt.normalMap||kt.anisotropy>0),Ve=!!Xt.morphAttributes.position,Je=!!Xt.morphAttributes.normal,xn=!!Xt.morphAttributes.color;let Kn=fl;kt.toneMapped&&(rt===null||rt.isXRRenderTarget===!0)&&(Kn=B.toneMapping);const ze=Xt.morphAttributes.position||Xt.morphAttributes.normal||Xt.morphAttributes.color,nn=ze!==void 0?ze.length:0,Ye=Y.get(kt),Cn=F.state.lights;if(te===!0&&(qt===!0||it!==vt)){const Ei=it===vt&&kt.id===ut;se.setState(kt,it,Ei)}let je=!1;kt.version===Ye.__version?(Ye.needsLights&&Ye.lightsStateVersion!==Cn.state.version||Ye.outputColorSpace!==De||Ut.isBatchedMesh&&Ye.batching===!1||!Ut.isBatchedMesh&&Ye.batching===!0||Ut.isBatchedMesh&&Ye.batchingColor===!0&&Ut.colorTexture===null||Ut.isBatchedMesh&&Ye.batchingColor===!1&&Ut.colorTexture!==null||Ut.isInstancedMesh&&Ye.instancing===!1||!Ut.isInstancedMesh&&Ye.instancing===!0||Ut.isSkinnedMesh&&Ye.skinning===!1||!Ut.isSkinnedMesh&&Ye.skinning===!0||Ut.isInstancedMesh&&Ye.instancingColor===!0&&Ut.instanceColor===null||Ut.isInstancedMesh&&Ye.instancingColor===!1&&Ut.instanceColor!==null||Ut.isInstancedMesh&&Ye.instancingMorph===!0&&Ut.morphTexture===null||Ut.isInstancedMesh&&Ye.instancingMorph===!1&&Ut.morphTexture!==null||Ye.envMap!==Pe||kt.fog===!0&&Ye.fog!==Ee||Ye.numClippingPlanes!==void 0&&(Ye.numClippingPlanes!==se.numPlanes||Ye.numIntersection!==se.numIntersection)||Ye.vertexAlphas!==Me||Ye.vertexTangents!==Oe||Ye.morphTargets!==Ve||Ye.morphNormals!==Je||Ye.morphColors!==xn||Ye.toneMapping!==Kn||Ye.morphTargetsCount!==nn)&&(je=!0):(je=!0,Ye.__version=kt.version);let qi=Ye.currentProgram;je===!0&&(qi=cr(kt,Rt,Ut));let ya=!1,ai=!1,Fn=!1;const Mn=qi.getUniforms(),Qn=Ye.uniforms;if(ee.useProgram(qi.program)&&(ya=!0,ai=!0,Fn=!0),kt.id!==ut&&(ut=kt.id,ai=!0),ya||vt!==it){ee.buffers.depth.getReversed()&&it.reversedDepth!==!0&&(it._reversedDepth=!0,it.updateProjectionMatrix()),Mn.setValue(at,"projectionMatrix",it.projectionMatrix),Mn.setValue(at,"viewMatrix",it.matrixWorldInverse);const _i=Mn.map.cameraPosition;_i!==void 0&&_i.setValue(at,Se.setFromMatrixPosition(it.matrixWorld)),Lt.logarithmicDepthBuffer&&Mn.setValue(at,"logDepthBufFC",2/(Math.log(it.far+1)/Math.LN2)),(kt.isMeshPhongMaterial||kt.isMeshToonMaterial||kt.isMeshLambertMaterial||kt.isMeshBasicMaterial||kt.isMeshStandardMaterial||kt.isShaderMaterial)&&Mn.setValue(at,"isOrthographic",it.isOrthographicCamera===!0),vt!==it&&(vt=it,ai=!0,Fn=!0)}if(Ye.needsLights&&(Cn.state.directionalShadowMap.length>0&&Mn.setValue(at,"directionalShadowMap",Cn.state.directionalShadowMap,yt),Cn.state.spotShadowMap.length>0&&Mn.setValue(at,"spotShadowMap",Cn.state.spotShadowMap,yt),Cn.state.pointShadowMap.length>0&&Mn.setValue(at,"pointShadowMap",Cn.state.pointShadowMap,yt)),Ut.isSkinnedMesh){Mn.setOptional(at,Ut,"bindMatrix"),Mn.setOptional(at,Ut,"bindMatrixInverse");const Ei=Ut.skeleton;Ei&&(Ei.boneTexture===null&&Ei.computeBoneTexture(),Mn.setValue(at,"boneTexture",Ei.boneTexture,yt))}Ut.isBatchedMesh&&(Mn.setOptional(at,Ut,"batchingTexture"),Mn.setValue(at,"batchingTexture",Ut._matricesTexture,yt),Mn.setOptional(at,Ut,"batchingIdTexture"),Mn.setValue(at,"batchingIdTexture",Ut._indirectTexture,yt),Mn.setOptional(at,Ut,"batchingColorTexture"),Ut._colorsTexture!==null&&Mn.setValue(at,"batchingColorTexture",Ut._colorsTexture,yt));const ci=Xt.morphAttributes;if((ci.position!==void 0||ci.normal!==void 0||ci.color!==void 0)&&xe.update(Ut,Xt,qi),(ai||Ye.receiveShadow!==Ut.receiveShadow)&&(Ye.receiveShadow=Ut.receiveShadow,Mn.setValue(at,"receiveShadow",Ut.receiveShadow)),kt.isMeshGouraudMaterial&&kt.envMap!==null&&(Qn.envMap.value=Pe,Qn.flipEnvMap.value=Pe.isCubeTexture&&Pe.isRenderTargetTexture===!1?-1:1),kt.isMeshStandardMaterial&&kt.envMap===null&&Rt.environment!==null&&(Qn.envMapIntensity.value=Rt.environmentIntensity),Qn.dfgLUT!==void 0&&(Qn.dfgLUT.value=jF()),ai&&(Mn.setValue(at,"toneMappingExposure",B.toneMappingExposure),Ye.needsLights&&Gr(Qn,Fn),Ee&&kt.fog===!0&&Ce.refreshFogUniforms(Qn,Ee),Ce.refreshMaterialUniforms(Qn,kt,ft,nt,F.state.transmissionRenderTarget[it.id]),Yy.upload(at,lo(Ye),Qn,yt)),kt.isShaderMaterial&&kt.uniformsNeedUpdate===!0&&(Yy.upload(at,lo(Ye),Qn,yt),kt.uniformsNeedUpdate=!1),kt.isSpriteMaterial&&Mn.setValue(at,"center",Ut.center),Mn.setValue(at,"modelViewMatrix",Ut.modelViewMatrix),Mn.setValue(at,"normalMatrix",Ut.normalMatrix),Mn.setValue(at,"modelMatrix",Ut.matrixWorld),kt.isShaderMaterial||kt.isRawShaderMaterial){const Ei=kt.uniformsGroups;for(let _i=0,Es=Ei.length;_i<Es;_i++){const ki=Ei[_i];ce.update(ki,qi),ce.bind(ki,qi)}}return qi}function Gr(it,Rt){it.ambientLightColor.needsUpdate=Rt,it.lightProbe.needsUpdate=Rt,it.directionalLights.needsUpdate=Rt,it.directionalLightShadows.needsUpdate=Rt,it.pointLights.needsUpdate=Rt,it.pointLightShadows.needsUpdate=Rt,it.spotLights.needsUpdate=Rt,it.spotLightShadows.needsUpdate=Rt,it.rectAreaLights.needsUpdate=Rt,it.hemisphereLights.needsUpdate=Rt}function yi(it){return it.isMeshLambertMaterial||it.isMeshToonMaterial||it.isMeshPhongMaterial||it.isMeshStandardMaterial||it.isShadowMaterial||it.isShaderMaterial&&it.lights===!0}this.getActiveCubeFace=function(){return Q},this.getActiveMipmapLevel=function(){return J},this.getRenderTarget=function(){return rt},this.setRenderTargetTextures=function(it,Rt,Xt){const kt=Y.get(it);kt.__autoAllocateDepthBuffer=it.resolveDepthBuffer===!1,kt.__autoAllocateDepthBuffer===!1&&(kt.__useRenderToTexture=!1),Y.get(it.texture).__webglTexture=Rt,Y.get(it.depthTexture).__webglTexture=kt.__autoAllocateDepthBuffer?void 0:Xt,kt.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(it,Rt){const Xt=Y.get(it);Xt.__webglFramebuffer=Rt,Xt.__useDefaultFramebuffer=Rt===void 0};const Zn=at.createFramebuffer();this.setRenderTarget=function(it,Rt=0,Xt=0){rt=it,Q=Rt,J=Xt;let kt=null,Ut=!1,Ee=!1;if(it){const De=Y.get(it);if(De.__useDefaultFramebuffer!==void 0){ee.bindFramebuffer(at.FRAMEBUFFER,De.__webglFramebuffer),j.copy(it.viewport),K.copy(it.scissor),et=it.scissorTest,ee.viewport(j),ee.scissor(K),ee.setScissorTest(et),ut=-1;return}else if(De.__webglFramebuffer===void 0)yt.setupRenderTarget(it);else if(De.__hasExternalTextures)yt.rebindTextures(it,Y.get(it.texture).__webglTexture,Y.get(it.depthTexture).__webglTexture);else if(it.depthBuffer){const Oe=it.depthTexture;if(De.__boundDepthTexture!==Oe){if(Oe!==null&&Y.has(Oe)&&(it.width!==Oe.image.width||it.height!==Oe.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");yt.setupDepthRenderbuffer(it)}}const Pe=it.texture;(Pe.isData3DTexture||Pe.isDataArrayTexture||Pe.isCompressedArrayTexture)&&(Ee=!0);const Me=Y.get(it).__webglFramebuffer;it.isWebGLCubeRenderTarget?(Array.isArray(Me[Rt])?kt=Me[Rt][Xt]:kt=Me[Rt],Ut=!0):it.samples>0&&yt.useMultisampledRTT(it)===!1?kt=Y.get(it).__webglMultisampledFramebuffer:Array.isArray(Me)?kt=Me[Xt]:kt=Me,j.copy(it.viewport),K.copy(it.scissor),et=it.scissorTest}else j.copy(ht).multiplyScalar(ft).floor(),K.copy(_t).multiplyScalar(ft).floor(),et=At;if(Xt!==0&&(kt=Zn),ee.bindFramebuffer(at.FRAMEBUFFER,kt)&&ee.drawBuffers(it,kt),ee.viewport(j),ee.scissor(K),ee.setScissorTest(et),Ut){const De=Y.get(it.texture);at.framebufferTexture2D(at.FRAMEBUFFER,at.COLOR_ATTACHMENT0,at.TEXTURE_CUBE_MAP_POSITIVE_X+Rt,De.__webglTexture,Xt)}else if(Ee){const De=Rt;for(let Pe=0;Pe<it.textures.length;Pe++){const Me=Y.get(it.textures[Pe]);at.framebufferTextureLayer(at.FRAMEBUFFER,at.COLOR_ATTACHMENT0+Pe,Me.__webglTexture,Xt,De)}}else if(it!==null&&Xt!==0){const De=Y.get(it.texture);at.framebufferTexture2D(at.FRAMEBUFFER,at.COLOR_ATTACHMENT0,at.TEXTURE_2D,De.__webglTexture,Xt)}ut=-1},this.readRenderTargetPixels=function(it,Rt,Xt,kt,Ut,Ee,Ue,De=0){if(!(it&&it.isWebGLRenderTarget)){rn("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Pe=Y.get(it).__webglFramebuffer;if(it.isWebGLCubeRenderTarget&&Ue!==void 0&&(Pe=Pe[Ue]),Pe){ee.bindFramebuffer(at.FRAMEBUFFER,Pe);try{const Me=it.textures[De],Oe=Me.format,Ve=Me.type;if(!Lt.textureFormatReadable(Oe)){rn("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Lt.textureTypeReadable(Ve)){rn("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Rt>=0&&Rt<=it.width-kt&&Xt>=0&&Xt<=it.height-Ut&&(it.textures.length>1&&at.readBuffer(at.COLOR_ATTACHMENT0+De),at.readPixels(Rt,Xt,kt,Ut,le.convert(Oe),le.convert(Ve),Ee))}finally{const Me=rt!==null?Y.get(rt).__webglFramebuffer:null;ee.bindFramebuffer(at.FRAMEBUFFER,Me)}}},this.readRenderTargetPixelsAsync=async function(it,Rt,Xt,kt,Ut,Ee,Ue,De=0){if(!(it&&it.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Pe=Y.get(it).__webglFramebuffer;if(it.isWebGLCubeRenderTarget&&Ue!==void 0&&(Pe=Pe[Ue]),Pe)if(Rt>=0&&Rt<=it.width-kt&&Xt>=0&&Xt<=it.height-Ut){ee.bindFramebuffer(at.FRAMEBUFFER,Pe);const Me=it.textures[De],Oe=Me.format,Ve=Me.type;if(!Lt.textureFormatReadable(Oe))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Lt.textureTypeReadable(Ve))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Je=at.createBuffer();at.bindBuffer(at.PIXEL_PACK_BUFFER,Je),at.bufferData(at.PIXEL_PACK_BUFFER,Ee.byteLength,at.STREAM_READ),it.textures.length>1&&at.readBuffer(at.COLOR_ATTACHMENT0+De),at.readPixels(Rt,Xt,kt,Ut,le.convert(Oe),le.convert(Ve),0);const xn=rt!==null?Y.get(rt).__webglFramebuffer:null;ee.bindFramebuffer(at.FRAMEBUFFER,xn);const Kn=at.fenceSync(at.SYNC_GPU_COMMANDS_COMPLETE,0);return at.flush(),await $5(at,Kn,4),at.bindBuffer(at.PIXEL_PACK_BUFFER,Je),at.getBufferSubData(at.PIXEL_PACK_BUFFER,0,Ee),at.deleteBuffer(Je),at.deleteSync(Kn),Ee}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(it,Rt=null,Xt=0){const kt=Math.pow(2,-Xt),Ut=Math.floor(it.image.width*kt),Ee=Math.floor(it.image.height*kt),Ue=Rt!==null?Rt.x:0,De=Rt!==null?Rt.y:0;yt.setTexture2D(it,0),at.copyTexSubImage2D(at.TEXTURE_2D,Xt,0,0,Ue,De,Ut,Ee),ee.unbindTexture()};const va=at.createFramebuffer(),Xe=at.createFramebuffer();this.copyTextureToTexture=function(it,Rt,Xt=null,kt=null,Ut=0,Ee=null){Ee===null&&(Ut!==0?(Wp("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ee=Ut,Ut=0):Ee=0);let Ue,De,Pe,Me,Oe,Ve,Je,xn,Kn;const ze=it.isCompressedTexture?it.mipmaps[Ee]:it.image;if(Xt!==null)Ue=Xt.max.x-Xt.min.x,De=Xt.max.y-Xt.min.y,Pe=Xt.isBox3?Xt.max.z-Xt.min.z:1,Me=Xt.min.x,Oe=Xt.min.y,Ve=Xt.isBox3?Xt.min.z:0;else{const ci=Math.pow(2,-Ut);Ue=Math.floor(ze.width*ci),De=Math.floor(ze.height*ci),it.isDataArrayTexture?Pe=ze.depth:it.isData3DTexture?Pe=Math.floor(ze.depth*ci):Pe=1,Me=0,Oe=0,Ve=0}kt!==null?(Je=kt.x,xn=kt.y,Kn=kt.z):(Je=0,xn=0,Kn=0);const nn=le.convert(Rt.format),Ye=le.convert(Rt.type);let Cn;Rt.isData3DTexture?(yt.setTexture3D(Rt,0),Cn=at.TEXTURE_3D):Rt.isDataArrayTexture||Rt.isCompressedArrayTexture?(yt.setTexture2DArray(Rt,0),Cn=at.TEXTURE_2D_ARRAY):(yt.setTexture2D(Rt,0),Cn=at.TEXTURE_2D),at.pixelStorei(at.UNPACK_FLIP_Y_WEBGL,Rt.flipY),at.pixelStorei(at.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Rt.premultiplyAlpha),at.pixelStorei(at.UNPACK_ALIGNMENT,Rt.unpackAlignment);const je=at.getParameter(at.UNPACK_ROW_LENGTH),qi=at.getParameter(at.UNPACK_IMAGE_HEIGHT),ya=at.getParameter(at.UNPACK_SKIP_PIXELS),ai=at.getParameter(at.UNPACK_SKIP_ROWS),Fn=at.getParameter(at.UNPACK_SKIP_IMAGES);at.pixelStorei(at.UNPACK_ROW_LENGTH,ze.width),at.pixelStorei(at.UNPACK_IMAGE_HEIGHT,ze.height),at.pixelStorei(at.UNPACK_SKIP_PIXELS,Me),at.pixelStorei(at.UNPACK_SKIP_ROWS,Oe),at.pixelStorei(at.UNPACK_SKIP_IMAGES,Ve);const Mn=it.isDataArrayTexture||it.isData3DTexture,Qn=Rt.isDataArrayTexture||Rt.isData3DTexture;if(it.isDepthTexture){const ci=Y.get(it),Ei=Y.get(Rt),_i=Y.get(ci.__renderTarget),Es=Y.get(Ei.__renderTarget);ee.bindFramebuffer(at.READ_FRAMEBUFFER,_i.__webglFramebuffer),ee.bindFramebuffer(at.DRAW_FRAMEBUFFER,Es.__webglFramebuffer);for(let ki=0;ki<Pe;ki++)Mn&&(at.framebufferTextureLayer(at.READ_FRAMEBUFFER,at.COLOR_ATTACHMENT0,Y.get(it).__webglTexture,Ut,Ve+ki),at.framebufferTextureLayer(at.DRAW_FRAMEBUFFER,at.COLOR_ATTACHMENT0,Y.get(Rt).__webglTexture,Ee,Kn+ki)),at.blitFramebuffer(Me,Oe,Ue,De,Je,xn,Ue,De,at.DEPTH_BUFFER_BIT,at.NEAREST);ee.bindFramebuffer(at.READ_FRAMEBUFFER,null),ee.bindFramebuffer(at.DRAW_FRAMEBUFFER,null)}else if(Ut!==0||it.isRenderTargetTexture||Y.has(it)){const ci=Y.get(it),Ei=Y.get(Rt);ee.bindFramebuffer(at.READ_FRAMEBUFFER,va),ee.bindFramebuffer(at.DRAW_FRAMEBUFFER,Xe);for(let _i=0;_i<Pe;_i++)Mn?at.framebufferTextureLayer(at.READ_FRAMEBUFFER,at.COLOR_ATTACHMENT0,ci.__webglTexture,Ut,Ve+_i):at.framebufferTexture2D(at.READ_FRAMEBUFFER,at.COLOR_ATTACHMENT0,at.TEXTURE_2D,ci.__webglTexture,Ut),Qn?at.framebufferTextureLayer(at.DRAW_FRAMEBUFFER,at.COLOR_ATTACHMENT0,Ei.__webglTexture,Ee,Kn+_i):at.framebufferTexture2D(at.DRAW_FRAMEBUFFER,at.COLOR_ATTACHMENT0,at.TEXTURE_2D,Ei.__webglTexture,Ee),Ut!==0?at.blitFramebuffer(Me,Oe,Ue,De,Je,xn,Ue,De,at.COLOR_BUFFER_BIT,at.NEAREST):Qn?at.copyTexSubImage3D(Cn,Ee,Je,xn,Kn+_i,Me,Oe,Ue,De):at.copyTexSubImage2D(Cn,Ee,Je,xn,Me,Oe,Ue,De);ee.bindFramebuffer(at.READ_FRAMEBUFFER,null),ee.bindFramebuffer(at.DRAW_FRAMEBUFFER,null)}else Qn?it.isDataTexture||it.isData3DTexture?at.texSubImage3D(Cn,Ee,Je,xn,Kn,Ue,De,Pe,nn,Ye,ze.data):Rt.isCompressedArrayTexture?at.compressedTexSubImage3D(Cn,Ee,Je,xn,Kn,Ue,De,Pe,nn,ze.data):at.texSubImage3D(Cn,Ee,Je,xn,Kn,Ue,De,Pe,nn,Ye,ze):it.isDataTexture?at.texSubImage2D(at.TEXTURE_2D,Ee,Je,xn,Ue,De,nn,Ye,ze.data):it.isCompressedTexture?at.compressedTexSubImage2D(at.TEXTURE_2D,Ee,Je,xn,ze.width,ze.height,nn,ze.data):at.texSubImage2D(at.TEXTURE_2D,Ee,Je,xn,Ue,De,nn,Ye,ze);at.pixelStorei(at.UNPACK_ROW_LENGTH,je),at.pixelStorei(at.UNPACK_IMAGE_HEIGHT,qi),at.pixelStorei(at.UNPACK_SKIP_PIXELS,ya),at.pixelStorei(at.UNPACK_SKIP_ROWS,ai),at.pixelStorei(at.UNPACK_SKIP_IMAGES,Fn),Ee===0&&Rt.generateMipmaps&&at.generateMipmap(Cn),ee.unbindTexture()},this.initRenderTarget=function(it){Y.get(it).__webglFramebuffer===void 0&&yt.setupRenderTarget(it)},this.initTexture=function(it){it.isCubeTexture?yt.setTextureCube(it,0):it.isData3DTexture?yt.setTexture3D(it,0):it.isDataArrayTexture||it.isCompressedArrayTexture?yt.setTexture2DArray(it,0):yt.setTexture2D(it,0),ee.unbindTexture()},this.resetState=function(){Q=0,J=0,rt=null,ee.reset(),Ae.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Fo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const e=this.getContext();e.drawingBufferColorSpace=Xn._getDrawingBufferColorSpace(t),e.unpackColorSpace=Xn._getUnpackColorSpace()}}const WF=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:u1,AddEquation:Of,AddOperation:wC,AdditiveAnimationBlendMode:B2,AdditiveBlending:Mb,AgXToneMapping:R2,AlphaFormat:P2,AlwaysCompare:kC,AlwaysDepth:s_,AlwaysStencilFunc:wb,AmbientLight:OR,AnimationAction:FR,AnimationClip:p0,AnimationLoader:GU,AnimationMixer:yI,AnimationObjectGroup:gI,AnimationUtils:FU,ArcCurve:sR,ArrayCamera:PR,ArrowHelper:GI,AttachedBindMode:Eb,Audio:zR,AudioAnalyser:rI,AudioContext:fM,AudioListener:iI,AudioLoader:tI,AxesHelper:jI,BackSide:Vr,BasicDepthPacking:OC,BasicShadowMap:oC,BatchedMesh:$C,Bone:X2,BooleanKeyframeTrack:md,Box2:wI,Box3:Ts,Box3Helper:VI,BoxGeometry:pd,BoxHelper:kI,BufferAttribute:Pi,BufferGeometry:wn,BufferGeometryLoader:IR,ByteType:O2,Cache:Ic,Camera:M1,CameraHelper:FI,CanvasTexture:lU,CapsuleGeometry:D1,CatmullRomCurve3:rR,CineonToneMapping:w2,CircleGeometry:L1,ClampToEdgeWrapping:ao,Clock:hM,Color:He,ColorKeyframeTrack:rM,ColorManagement:Xn,CompressedArrayTexture:rU,CompressedCubeTexture:oU,CompressedTexture:R1,CompressedTextureLoader:jU,ConeGeometry:R0,ConstantAlphaFactor:TC,ConstantColorFactor:bC,Controls:qI,CubeCamera:XC,CubeDepthTexture:iR,CubeReflectionMapping:kc,CubeRefractionMapping:Bf,CubeTexture:w0,CubeTextureLoader:WU,CubeUVReflectionMapping:nm,CubicBezierCurve:Q2,CubicBezierCurve3:oR,CubicInterpolant:TR,CullFaceBack:bb,CullFaceFront:rC,CullFaceFrontBack:u5,CullFaceNone:sC,Curve:ec,CurvePath:cR,CustomBlending:lC,CustomToneMapping:C2,CylinderGeometry:C0,Cylindrical:EI,Data3DTexture:b1,DataArrayTexture:S1,DataTexture:Jl,DataTextureLoader:qU,DataUtils:LN,DecrementStencilOp:w5,DecrementWrapStencilOp:R5,DefaultLoadingManager:wR,DepthFormat:Vc,DepthStencilFormat:If,DepthTexture:cd,DetachedBindMode:CC,DirectionalLight:LR,DirectionalLightHelper:BI,DiscreteInterpolant:AR,DodecahedronGeometry:O1,DoubleSide:cl,DstAlphaFactor:vC,DstColorFactor:_C,DynamicCopyUsage:j5,DynamicDrawUsage:B5,DynamicReadUsage:V5,EdgesGeometry:aR,EllipseCurve:N1,EqualCompare:zC,EqualDepth:o_,EqualStencilFunc:N5,EquirectangularReflectionMapping:$g,EquirectangularRefractionMapping:t0,Euler:Vo,EventDispatcher:Hc,ExternalTexture:Z2,ExtrudeGeometry:U1,FileLoader:Uu,Float16BufferAttribute:BN,Float32BufferAttribute:Ze,FloatType:ar,Fog:A1,FogExp2:T1,FramebufferTexture:sU,FrontSide:Nu,Frustum:im,FrustumArray:C1,GLBufferAttribute:MI,GLSL1:q5,GLSL3:Cb,GreaterCompare:BC,GreaterDepth:c_,GreaterEqualCompare:x1,GreaterEqualDepth:l_,GreaterEqualStencilFunc:z5,GreaterStencilFunc:I5,GridHelper:PI,Group:Op,HalfFloatType:tc,HemisphereLight:CR,HemisphereLightHelper:II,IcosahedronGeometry:I1,ImageBitmapLoader:$U,ImageLoader:m0,ImageUtils:jC,IncrementStencilOp:E5,IncrementWrapStencilOp:C5,InstancedBufferAttribute:ld,InstancedBufferGeometry:uM,InstancedInterleavedBuffer:bI,InstancedMesh:JC,Int16BufferAttribute:PN,Int32BufferAttribute:zN,Int8BufferAttribute:NN,IntType:h1,InterleavedBuffer:E1,InterleavedBufferAttribute:od,Interpolant:O0,InterpolateDiscrete:i0,InterpolateLinear:G_,InterpolateSmooth:qy,InterpolationSamplingMode:Z5,InterpolationSamplingType:Y5,InvertStencilOp:D5,KeepStencilOp:jh,KeyframeTrack:ml,LOD:KC,LatheGeometry:P1,Layers:Xp,LessCompare:PC,LessDepth:r_,LessEqualCompare:_1,LessEqualDepth:sd,LessEqualStencilFunc:U5,LessStencilFunc:O5,Light:qf,LightProbe:UR,Line:Vf,Line3:DI,LineBasicMaterial:Hr,LineCurve:J2,LineCurve3:lR,LineDashedMaterial:bR,LineLoop:tR,LineSegments:Gc,LinearFilter:Di,LinearInterpolant:sM,LinearMipMapLinearFilter:p5,LinearMipMapNearestFilter:d5,LinearMipmapLinearFilter:Uc,LinearMipmapNearestFilter:zg,LinearSRGBColorSpace:Ff,LinearToneMapping:A2,LinearTransfer:s0,Loader:oo,LoaderUtils:Nb,LoadingManager:oM,LoopOnce:RC,LoopPingPong:LC,LoopRepeat:DC,MOUSE:Hh,Material:lr,MaterialLoader:W1,MathUtils:gN,Matrix2:gM,Matrix3:En,Matrix4:gn,MaxEquation:hC,Mesh:ma,MeshBasicMaterial:zu,MeshDepthMaterial:G1,MeshDistanceMaterial:j1,MeshLambertMaterial:xR,MeshMatcapMaterial:SR,MeshNormalMaterial:_R,MeshPhongMaterial:vR,MeshPhysicalMaterial:gR,MeshStandardMaterial:iM,MeshToonMaterial:yR,MinEquation:fC,MirroredRepeatWrapping:n0,MixOperation:EC,MultiplyBlending:Ab,MultiplyOperation:A0,NearestFilter:Ba,NearestMipMapLinearFilter:h5,NearestMipMapNearestFilter:f5,NearestMipmapLinearFilter:Dp,NearestMipmapNearestFilter:L2,NeutralToneMapping:D2,NeverCompare:IC,NeverDepth:a_,NeverStencilFunc:L5,NoBlending:zc,NoColorSpace:Cu,NoNormalPacking:S5,NoToneMapping:fl,NormalAnimationBlendMode:y1,NormalBlending:$h,NormalGAPacking:M5,NormalRGPacking:b5,NotEqualCompare:FC,NotEqualDepth:u_,NotEqualStencilFunc:P5,NumberKeyframeTrack:h0,Object3D:li,ObjectLoader:QU,ObjectSpaceNormalMap:UC,OctahedronGeometry:D0,OneFactor:pC,OneMinusConstantAlphaFactor:AC,OneMinusConstantColorFactor:MC,OneMinusDstAlphaFactor:yC,OneMinusDstColorFactor:xC,OneMinusSrcAlphaFactor:i_,OneMinusSrcColorFactor:gC,OrthographicCamera:$l,PCFShadowMap:Fp,PCFSoftShadowMap:Pg,PMREMGenerator:zb,Path:X_,PerspectiveCamera:fa,Plane:wu,PlaneGeometry:Bu,PlaneHelper:HI,PointLight:DR,PointLightHelper:NI,Points:eR,PointsMaterial:Y2,PolarGridHelper:zI,PolyhedronGeometry:Wf,PositionalAudio:sI,PropertyBinding:oi,PropertyMixer:BR,QuadraticBezierCurve:$2,QuadraticBezierCurve3:tM,Quaternion:or,QuaternionKeyframeTrack:N0,QuaternionLinearInterpolant:ER,R11_EAC_Format:y_,RED_GREEN_RGTC2_Format:V_,RED_RGTC1_Format:F_,REVISION:c1,RG11_EAC_Format:x_,RGBADepthPacking:NC,RGBAFormat:sr,RGBAIntegerFormat:v1,RGBA_ASTC_10x10_Format:N_,RGBA_ASTC_10x5_Format:D_,RGBA_ASTC_10x6_Format:L_,RGBA_ASTC_10x8_Format:O_,RGBA_ASTC_12x10_Format:U_,RGBA_ASTC_12x12_Format:I_,RGBA_ASTC_4x4_Format:b_,RGBA_ASTC_5x4_Format:M_,RGBA_ASTC_5x5_Format:T_,RGBA_ASTC_6x5_Format:A_,RGBA_ASTC_6x6_Format:E_,RGBA_ASTC_8x5_Format:w_,RGBA_ASTC_8x6_Format:C_,RGBA_ASTC_8x8_Format:R_,RGBA_BPTC_Format:P_,RGBA_ETC2_EAC_Format:v_,RGBA_PVRTC_2BPPV1_Format:p_,RGBA_PVRTC_4BPPV1_Format:d_,RGBA_S3TC_DXT1_Format:Fg,RGBA_S3TC_DXT3_Format:kg,RGBA_S3TC_DXT5_Format:Vg,RGBDepthPacking:_5,RGBFormat:z2,RGBIntegerFormat:m5,RGB_BPTC_SIGNED_Format:z_,RGB_BPTC_UNSIGNED_Format:B_,RGB_ETC1_Format:m_,RGB_ETC2_Format:g_,RGB_PVRTC_2BPPV1_Format:h_,RGB_PVRTC_4BPPV1_Format:f_,RGB_S3TC_DXT1_Format:Bg,RGDepthPacking:x5,RGFormat:rd,RGIntegerFormat:g1,RawShaderMaterial:nM,Ray:dd,Raycaster:kR,RectAreaLight:NR,RedFormat:m1,RedIntegerFormat:E0,ReinhardToneMapping:E2,RenderTarget:k2,RenderTarget3D:_I,RepeatWrapping:e0,ReplaceStencilOp:A5,ReverseSubtractEquation:uC,RingGeometry:z1,SIGNED_R11_EAC_Format:__,SIGNED_RED_GREEN_RGTC2_Format:H_,SIGNED_RED_RGTC1_Format:k_,SIGNED_RG11_EAC_Format:S_,SRGBColorSpace:ir,SRGBTransfer:Ti,Scene:W2,ShaderChunk:Ln,ShaderLib:Kl,ShaderMaterial:pl,ShadowMaterial:mR,Shape:ed,ShapeGeometry:B1,ShapePath:WI,ShapeUtils:Ql,ShortType:N2,Skeleton:w1,SkeletonHelper:OI,SkinnedMesh:QC,Source:Pf,Sphere:As,SphereGeometry:L0,Spherical:Ib,SphericalHarmonics3:cM,SplineCurve:eM,SpotLight:RR,SpotLightHelper:LI,Sprite:ZC,SpriteMaterial:q2,SrcAlphaFactor:n_,SrcAlphaSaturateFactor:SC,SrcColorFactor:mC,StaticCopyUsage:G5,StaticDrawUsage:r0,StaticReadUsage:k5,StereoCamera:eI,StreamCopyUsage:W5,StreamDrawUsage:F5,StreamReadUsage:H5,StringKeyframeTrack:gd,SubtractEquation:cC,SubtractiveBlending:Tb,TOUCH:Gh,TangentSpaceNormalMap:jf,TetrahedronGeometry:F1,Texture:pa,TextureLoader:XU,TextureUtils:QI,Timer:TI,TimestampQuery:X5,TorusGeometry:k1,TorusKnotGeometry:V1,Triangle:io,TriangleFanDrawMode:y5,TriangleStripDrawMode:v5,TrianglesDrawMode:g5,TubeGeometry:H1,UVMapping:f1,Uint16BufferAttribute:V2,Uint32BufferAttribute:H2,Uint8BufferAttribute:UN,Uint8ClampedBufferAttribute:IN,Uniform:mM,UniformsGroup:SI,UniformsLib:Fe,UniformsUtils:G2,UnsignedByteType:Br,UnsignedInt101111Type:I2,UnsignedInt248Type:Gp,UnsignedInt5999Type:U2,UnsignedIntType:dl,UnsignedShort4444Type:d1,UnsignedShort5551Type:p1,UnsignedShortType:Hp,VSMShadowMap:Xh,Vector2:de,Vector3:pt,Vector4:Ri,VectorKeyframeTrack:d0,VideoFrameTexture:aU,VideoTexture:nR,WebGL3DRenderTarget:SN,WebGLArrayRenderTarget:xN,WebGLCoordinateSystem:Fo,WebGLCubeRenderTarget:j2,WebGLRenderTarget:ro,WebGLRenderer:YR,WebGLUtils:XR,WebGPUCoordinateSystem:jp,WebXRController:Xy,WireframeGeometry:pR,WrapAroundEnding:a0,ZeroCurvatureEnding:Yh,ZeroFactor:dC,ZeroSlopeEnding:Zh,ZeroStencilOp:T5,createCanvasElement:GC,error:rn,getConsoleFunction:J5,log:l0,setConsoleFunction:Q5,warn:Ie,warnOnce:Wp},Symbol.toStringTag,{value:"Module"}));var PS={exports:{}},zS={},BS={exports:{}},FS={};var HE;function qF(){if(HE)return FS;HE=1;var i=em();function t(y,x){return y===x&&(y!==0||1/y===1/x)||y!==y&&x!==x}var e=typeof Object.is=="function"?Object.is:t,n=i.useState,a=i.useEffect,s=i.useLayoutEffect,o=i.useDebugValue;function c(y,x){var b=x(),T=n({inst:{value:b,getSnapshot:x}}),R=T[0].inst,C=T[1];return s(function(){R.value=b,R.getSnapshot=x,f(R)&&C({inst:R})},[y,b,x]),a(function(){return f(R)&&C({inst:R}),y(function(){f(R)&&C({inst:R})})},[y]),o(b),b}function f(y){var x=y.getSnapshot;y=y.value;try{var b=x();return!e(y,b)}catch{return!0}}function d(y,x){return x()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:c;return FS.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:g,FS}var GE;function XF(){return GE||(GE=1,BS.exports=qF()),BS.exports}var jE;function YF(){if(jE)return zS;jE=1;var i=em(),t=XF();function e(d,g){return d===g&&(d!==0||1/d===1/g)||d!==d&&g!==g}var n=typeof Object.is=="function"?Object.is:e,a=t.useSyncExternalStore,s=i.useRef,o=i.useEffect,c=i.useMemo,f=i.useDebugValue;return zS.useSyncExternalStoreWithSelector=function(d,g,y,x,b){var T=s(null);if(T.current===null){var R={hasValue:!1,value:null};T.current=R}else R=T.current;T=c(function(){function w(H){if(!N){if(N=!0,I=H,H=x(H),b!==void 0&&R.hasValue){var q=R.value;if(b(q,H))return z=q}return z=H}if(q=z,n(I,H))return q;var Z=x(H);return b!==void 0&&b(q,Z)?(I=H,q):(I=H,z=Z)}var N=!1,I,z,F=y===void 0?null:y;return[function(){return w(g())},F===null?void 0:function(){return w(F())}]},[g,y,x,b]);var C=a(d,T[0],T[1]);return o(function(){R.hasValue=!0,R.value=C},[C]),f(C),C},zS}var WE;function ZF(){return WE||(WE=1,PS.exports=YF()),PS.exports}var KF=ZF();const QF=M0(KF),{useSyncExternalStoreWithSelector:JF}=QF,$F=i=>i;function t8(i,t=$F,e){const n=JF(i.subscribe,i.getState,i.getInitialState,t,e);return Lu.useDebugValue(n),n}const qE=(i,t)=>{const e=iC(i),n=(a,s=t)=>t8(e,a,s);return Object.assign(n,e),n},e8=((i,t)=>i?qE(i,t):qE),n8=i=>typeof i=="object"&&typeof i.then=="function",Ry=[];function i8(i,t,e=(n,a)=>n===a){if(i===t)return!0;if(!i||!t)return!1;const n=i.length;if(t.length!==n)return!1;for(let a=0;a<n;a++)if(!e(i[a],t[a]))return!1;return!0}function a8(i,t=null,e=!1,n={}){t===null&&(t=[i]);for(const s of Ry)if(i8(t,s.keys,s.equal)){if(e)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return n.lifespan&&n.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,n.lifespan)),s.response;if(!e)throw s.promise}const a={keys:t,equal:n.equal,remove:()=>{const s=Ry.indexOf(a);s!==-1&&Ry.splice(s,1)},promise:(n8(i)?i:i(...t)).then(s=>{a.response=s,n.lifespan&&n.lifespan>0&&(a.timeout=setTimeout(a.remove,n.lifespan))}).catch(s=>a.error=s)};if(Ry.push(a),!e)throw a.promise}const s8=(i,t,e)=>a8(i,t,!1,e);var kS={exports:{}},VS={exports:{}},HS={exports:{}},GS={};var XE;function r8(){return XE||(XE=1,(function(i){function t(j,K){var et=j.length;j.push(K);t:for(;0<et;){var dt=et-1>>>1,lt=j[dt];if(0<a(lt,K))j[dt]=K,j[et]=lt,et=dt;else break t}}function e(j){return j.length===0?null:j[0]}function n(j){if(j.length===0)return null;var K=j[0],et=j.pop();if(et!==K){j[0]=et;t:for(var dt=0,lt=j.length,G=lt>>>1;dt<G;){var nt=2*(dt+1)-1,ft=j[nt],mt=nt+1,xt=j[mt];if(0>a(ft,et))mt<lt&&0>a(xt,ft)?(j[dt]=xt,j[mt]=et,dt=mt):(j[dt]=ft,j[nt]=et,dt=nt);else if(mt<lt&&0>a(xt,et))j[dt]=xt,j[mt]=et,dt=mt;else break t}}return K}function a(j,K){var et=j.sortIndex-K.sortIndex;return et!==0?et:j.id-K.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();i.unstable_now=function(){return o.now()-c}}var f=[],d=[],g=1,y=null,x=3,b=!1,T=!1,R=!1,C=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function I(j){for(var K=e(d);K!==null;){if(K.callback===null)n(d);else if(K.startTime<=j)n(d),K.sortIndex=K.expirationTime,t(f,K);else break;K=e(d)}}function z(j){if(R=!1,I(j),!T)if(e(f)!==null)T=!0,ut();else{var K=e(d);K!==null&&vt(z,K.startTime-j)}}var F=!1,H=-1,q=5,Z=-1;function B(){return!(i.unstable_now()-Z<q)}function V(){if(F){var j=i.unstable_now();Z=j;var K=!0;try{t:{T=!1,R&&(R=!1,w(H),H=-1),b=!0;var et=x;try{e:{for(I(j),y=e(f);y!==null&&!(y.expirationTime>j&&B());){var dt=y.callback;if(typeof dt=="function"){y.callback=null,x=y.priorityLevel;var lt=dt(y.expirationTime<=j);if(j=i.unstable_now(),typeof lt=="function"){y.callback=lt,I(j),K=!0;break e}y===e(f)&&n(f),I(j)}else n(f);y=e(f)}if(y!==null)K=!0;else{var G=e(d);G!==null&&vt(z,G.startTime-j),K=!1}}break t}finally{y=null,x=et,b=!1}K=void 0}}finally{K?Q():F=!1}}}var Q;if(typeof N=="function")Q=function(){N(V)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,rt=J.port2;J.port1.onmessage=V,Q=function(){rt.postMessage(null)}}else Q=function(){C(V,0)};function ut(){F||(F=!0,Q())}function vt(j,K){H=C(function(){j(i.unstable_now())},K)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(j){j.callback=null},i.unstable_continueExecution=function(){T||b||(T=!0,ut())},i.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<j?Math.floor(1e3/j):5},i.unstable_getCurrentPriorityLevel=function(){return x},i.unstable_getFirstCallbackNode=function(){return e(f)},i.unstable_next=function(j){switch(x){case 1:case 2:case 3:var K=3;break;default:K=x}var et=x;x=K;try{return j()}finally{x=et}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(j,K){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var et=x;x=j;try{return K()}finally{x=et}},i.unstable_scheduleCallback=function(j,K,et){var dt=i.unstable_now();switch(typeof et=="object"&&et!==null?(et=et.delay,et=typeof et=="number"&&0<et?dt+et:dt):et=dt,j){case 1:var lt=-1;break;case 2:lt=250;break;case 5:lt=1073741823;break;case 4:lt=1e4;break;default:lt=5e3}return lt=et+lt,j={id:g++,callback:K,priorityLevel:j,startTime:et,expirationTime:lt,sortIndex:-1},et>dt?(j.sortIndex=et,t(d,j),e(f)===null&&j===e(d)&&(R?(w(H),H=-1):R=!0,vt(z,et-dt))):(j.sortIndex=lt,t(f,j),T||b||(T=!0,ut())),j},i.unstable_shouldYield=B,i.unstable_wrapCallback=function(j){var K=x;return function(){var et=x;x=K;try{return j.apply(this,arguments)}finally{x=et}}}})(GS)),GS}var YE;function o8(){return YE||(YE=1,HS.exports=r8()),HS.exports}var ZE;function l8(){return ZE||(ZE=1,(function(i){i.exports=function(t){function e(h,p,S,E){return new nu(h,p,S,E)}function n(){}function a(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)p+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(h){return h===null||typeof h!="object"?null:(h=ym&&h[ym]||h["@@iterator"],typeof h=="function"?h:null)}function o(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===su?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case tf:return"Fragment";case Ro:return"Portal";case vm:return"Profiler";case gm:return"StrictMode";case Td:return"Suspense";case gc:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case Zo:return(h.displayName||"Context")+".Provider";case mc:return(h._context.displayName||"Context")+".Consumer";case ef:var p=h.render;return h=h.displayName,h||(h=p.displayName||p.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case nh:return p=h.displayName||null,p!==null?p:o(h.type)||"Memo";case Do:p=h._payload,h=h._init;try{return o(h(p))}catch{}}return null}function c(h){if(Ad===void 0)try{throw Error()}catch(S){var p=S.stack.trim().match(/\n( *(at )?)/);Ad=p&&p[1]||"",_m=-1<S.stack.indexOf(`
    at`)?" (<anonymous>)":-1<S.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ad+h+_m}function f(h,p){if(!h||vc)return"";vc=!0;var S=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(p){var Be=function(){throw Error()};if(Object.defineProperty(Be.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Be,[])}catch(_n){var Ge=_n}Reflect.construct(h,[],Be)}else{try{Be.call()}catch(_n){Ge=_n}h.call(Be.prototype)}}else{try{throw Error()}catch(_n){Ge=_n}(Be=h())&&typeof Be.catch=="function"&&Be.catch(function(){})}}catch(_n){if(_n&&Ge&&typeof _n.stack=="string")return[_n.stack,Ge.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var U=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");U&&U.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var k=E.DetermineComponentFrameRoot(),ot=k[0],Mt=k[1];if(ot&&Mt){var zt=ot.split(`
`),pe=Mt.split(`
`);for(U=E=0;E<zt.length&&!zt[E].includes("DetermineComponentFrameRoot");)E++;for(;U<pe.length&&!pe[U].includes("DetermineComponentFrameRoot");)U++;if(E===zt.length||U===pe.length)for(E=zt.length-1,U=pe.length-1;1<=E&&0<=U&&zt[E]!==pe[U];)U--;for(;1<=E&&0<=U;E--,U--)if(zt[E]!==pe[U]){if(E!==1||U!==1)do if(E--,U--,0>U||zt[E]!==pe[U]){var we=`
`+zt[E].replace(" at new "," at ");return h.displayName&&we.includes("<anonymous>")&&(we=we.replace("<anonymous>",h.displayName)),we}while(1<=E&&0<=U);break}}}finally{vc=!1,Error.prepareStackTrace=S}return(S=h?h.displayName||h.name:"")?c(S):""}function d(h){switch(h.tag){case 26:case 27:case 5:return c(h.type);case 16:return c("Lazy");case 13:return c("Suspense");case 19:return c("SuspenseList");case 0:case 15:return h=f(h.type,!1),h;case 11:return h=f(h.type.render,!1),h;case 1:return h=f(h.type,!0),h;default:return""}}function g(h){try{var p="";do p+=d(h),h=h.return;while(h);return p}catch(S){return`
Error generating stack: `+S.message+`
`+S.stack}}function y(h){var p=h,S=h;if(h.alternate)for(;p.return;)p=p.return;else{h=p;do p=h,(p.flags&4098)!==0&&(S=p.return),h=p.return;while(h)}return p.tag===3?S:null}function x(h){if(y(h)!==h)throw Error(a(188))}function b(h){var p=h.alternate;if(!p){if(p=y(h),p===null)throw Error(a(188));return p!==h?null:h}for(var S=h,E=p;;){var U=S.return;if(U===null)break;var k=U.alternate;if(k===null){if(E=U.return,E!==null){S=E;continue}break}if(U.child===k.child){for(k=U.child;k;){if(k===S)return x(U),h;if(k===E)return x(U),p;k=k.sibling}throw Error(a(188))}if(S.return!==E.return)S=U,E=k;else{for(var ot=!1,Mt=U.child;Mt;){if(Mt===S){ot=!0,S=U,E=k;break}if(Mt===E){ot=!0,E=U,S=k;break}Mt=Mt.sibling}if(!ot){for(Mt=k.child;Mt;){if(Mt===S){ot=!0,S=k,E=U;break}if(Mt===E){ot=!0,E=k,S=U;break}Mt=Mt.sibling}if(!ot)throw Error(a(189))}}if(S.alternate!==E)throw Error(a(190))}if(S.tag!==3)throw Error(a(188));return S.stateNode.current===S?h:p}function T(h){var p=h.tag;if(p===5||p===26||p===27||p===6)return h;for(h=h.child;h!==null;){if(p=T(h),p!==null)return p;h=h.sibling}return null}function R(h){var p=h.tag;if(p===5||p===26||p===27||p===6)return h;for(h=h.child;h!==null;){if(h.tag!==4&&(p=R(h),p!==null))return p;h=h.sibling}return null}function C(h){return{current:h}}function w(h){0>Pl||(h.current=fh[Pl],fh[Pl]=null,Pl--)}function N(h,p){Pl++,fh[Pl]=h.current,h.current=p}function I(h){return h>>>=0,h===0?32:31-(hh(h)/hv|0)|0}function z(h){var p=h&42;if(p!==0)return p;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function F(h,p){var S=h.pendingLanes;if(S===0)return 0;var E=0,U=h.suspendedLanes,k=h.pingedLanes,ot=h.warmLanes;h=h.finishedLanes!==0;var Mt=S&134217727;return Mt!==0?(S=Mt&~U,S!==0?E=z(S):(k&=Mt,k!==0?E=z(k):h||(ot=Mt&~ot,ot!==0&&(E=z(ot))))):(Mt=S&~U,Mt!==0?E=z(Mt):k!==0?E=z(k):h||(ot=S&~ot,ot!==0&&(E=z(ot)))),E===0?0:p!==0&&p!==E&&(p&U)===0&&(U=E&-E,ot=p&-p,U>=ot||U===32&&(ot&4194176)!==0)?p:E}function H(h,p){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&p)===0}function q(h,p){switch(h){case 1:case 2:case 4:case 8:return p+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Z(){var h=rf;return rf<<=1,(rf&4194176)===0&&(rf=128),h}function B(){var h=dh;return dh<<=1,(dh&62914560)===0&&(dh=4194304),h}function V(h){for(var p=[],S=0;31>S;S++)p.push(h);return p}function Q(h,p){h.pendingLanes|=p,p!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function J(h,p,S,E,U,k){var ot=h.pendingLanes;h.pendingLanes=S,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=S,h.entangledLanes&=S,h.errorRecoveryDisabledLanes&=S,h.shellSuspendCounter=0;var Mt=h.entanglements,zt=h.expirationTimes,pe=h.hiddenUpdates;for(S=ot&~S;0<S;){var we=31-qs(S),Be=1<<we;Mt[we]=0,zt[we]=-1;var Ge=pe[we];if(Ge!==null)for(pe[we]=null,we=0;we<Ge.length;we++){var _n=Ge[we];_n!==null&&(_n.lane&=-536870913)}S&=~Be}E!==0&&rt(h,E,0),k!==0&&U===0&&h.tag!==0&&(h.suspendedLanes|=k&~(ot&~p))}function rt(h,p,S){h.pendingLanes|=p,h.suspendedLanes&=~p;var E=31-qs(p);h.entangledLanes|=p,h.entanglements[E]=h.entanglements[E]|1073741824|S&4194218}function ut(h,p){var S=h.entangledLanes|=p;for(h=h.entanglements;S;){var E=31-qs(S),U=1<<E;U&p|h[E]&p&&(h[E]|=p),S&=~U}}function vt(h){return h&=-h,2<h?8<h?(h&134217727)!==0?32:268435456:8:2}function j(h){if(Xs&&typeof Xs.onCommitFiberRoot=="function")try{Xs.onCommitFiberRoot(lf,h,void 0,(h.current.flags&128)===128)}catch{}}function K(h){if(typeof gv=="function"&&Km(h),Xs&&typeof Xs.setStrictMode=="function")try{Xs.setStrictMode(lf,h)}catch{}}function et(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}function dt(h,p){if(typeof h=="object"&&h!==null){var S=Hd.get(h);return S!==void 0?S:(p={value:h,source:p,stack:g(p)},Hd.set(h,p),p)}return{value:h,source:p,stack:g(p)}}function lt(h,p){zi[Ji++]=gh,zi[Ji++]=mh,mh=h,gh=p}function G(h,p,S){Tr[Ar++]=tl,Tr[Ar++]=Yr,Tr[Ar++]=Lo,Lo=h;var E=tl;h=Yr;var U=32-qs(E)-1;E&=~(1<<U),S+=1;var k=32-qs(p)+U;if(30<k){var ot=U-U%5;k=(E&(1<<ot)-1).toString(32),E>>=ot,U-=ot,tl=1<<32-qs(p)+U|S<<U|E,Yr=k+h}else tl=1<<k|S<<U|E,Yr=h}function nt(h){h.return!==null&&(lt(h,1),G(h,1,0))}function ft(h){for(;h===mh;)mh=zi[--Ji],zi[Ji]=null,gh=zi[--Ji],zi[Ji]=null;for(;h===Lo;)Lo=Tr[--Ar],Tr[Ar]=null,Yr=Tr[--Ar],Tr[Ar]=null,tl=Tr[--Ar],Tr[Ar]=null}function mt(h,p){N(Oo,p),N(vh,h),N(Ya,null),h=ru(p),w(Ya),N(Ya,h)}function xt(){w(Ya),w(vh),w(Oo)}function ht(h){h.memoizedState!==null&&N(cf,h);var p=Ya.current,S=W0(p,h.type);p!==S&&(N(vh,h),N(Ya,S))}function _t(h){vh.current===h&&(w(Ya),w(vh)),cf.current===h&&(w(cf),Qo?dn._currentValue=Ws:dn._currentValue2=Ws)}function At(h){var p=Error(a(418,""));throw Se(dt(p,h)),yh}function $t(h,p){if(!Is)throw Error(a(175));ox(h.stateNode,h.type,h.memoizedProps,p,h)||At(h)}function te(h){for(_s=h.return;_s;)switch(_s.tag){case 3:case 27:Zr=!0;return;case 5:case 13:Zr=!1;return;default:_s=_s.return}}function qt(h){if(!Is||h!==_s)return!1;if(!ti)return te(h),ti=!0,!1;var p=!1;if(as?h.tag!==3&&h.tag!==27&&(h.tag!==5||ov(h.type)&&!xc(h.type,h.memoizedProps))&&(p=!0):h.tag!==3&&(h.tag!==5||ov(h.type)&&!xc(h.type,h.memoizedProps))&&(p=!0),p&&rs&&At(h),te(h),h.tag===13){if(!Is)throw Error(a(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(a(317));rs=sv(h)}else rs=_s?zm(h.stateNode):null;return!0}function ne(){Is&&(rs=_s=null,ti=!1)}function Se(h){Er===null?Er=[h]:Er.push(h)}function Nt(){for(var h=bc,p=uf=bc=0;p<h;){var S=wr[p];wr[p++]=null;var E=wr[p];wr[p++]=null;var U=wr[p];wr[p++]=null;var k=wr[p];if(wr[p++]=null,E!==null&&U!==null){var ot=E.pending;ot===null?U.next=U:(U.next=ot.next,ot.next=U),E.pending=U}k!==0&&at(S,U,k)}}function Vt(h,p,S,E){wr[bc++]=h,wr[bc++]=p,wr[bc++]=S,wr[bc++]=E,uf|=E,h.lanes|=E,h=h.alternate,h!==null&&(h.lanes|=E)}function Ft(h,p,S,E){return Vt(h,p,S,E),ue(h)}function re(h,p){return Vt(h,null,null,p),ue(h)}function at(h,p,S){h.lanes|=S;var E=h.alternate;E!==null&&(E.lanes|=S);for(var U=!1,k=h.return;k!==null;)k.childLanes|=S,E=k.alternate,E!==null&&(E.childLanes|=S),k.tag===22&&(h=k.stateNode,h===null||h._visibility&1||(U=!0)),h=k,k=k.return;U&&p!==null&&h.tag===3&&(k=h.stateNode,U=31-qs(S),k=k.hiddenUpdates,h=k[U],h===null?k[U]=[p]:h.push(p),p.lane=S|536870912)}function ue(h){if(50<vu)throw vu=0,Bs=null,Error(a(185));for(var p=h.return;p!==null;)h=p,p=h.return;return h.tag===3?h.stateNode:null}function Zt(h){h!==uu&&h.next===null&&(uu===null?ff=uu=h:uu=uu.next=h),xh=!0,_h||(_h=!0,Bt(ee))}function Lt(h,p){if(!No&&xh){No=!0;do for(var S=!1,E=ff;E!==null;){if(h!==0){var U=E.pendingLanes;if(U===0)var k=0;else{var ot=E.suspendedLanes,Mt=E.pingedLanes;k=(1<<31-qs(42|h)+1)-1,k&=U&~(ot&~Mt),k=k&201326677?k&201326677|1:k?k|2:0}k!==0&&(S=!0,yt(E,k))}else k=Nn,k=F(E,E===Pn?k:0),(k&3)===0||H(E,k)||(S=!0,yt(E,k));E=E.next}while(S);No=!1}}function ee(){xh=_h=!1;var h=0;Mc!==0&&(Sc()&&(h=Mc),Mc=0);for(var p=ss(),S=null,E=ff;E!==null;){var U=E.next,k=$(E,p);k===0?(E.next=null,S===null?ff=U:S.next=U,U===null&&(uu=S)):(S=E,(h!==0||(k&3)!==0)&&(xh=!0)),E=U}Lt(h)}function $(h,p){for(var S=h.suspendedLanes,E=h.pingedLanes,U=h.expirationTimes,k=h.pendingLanes&-62914561;0<k;){var ot=31-qs(k),Mt=1<<ot,zt=U[ot];zt===-1?((Mt&S)===0||(Mt&E)!==0)&&(U[ot]=q(Mt,p)):zt<=p&&(h.expiredLanes|=Mt),k&=~Mt}if(p=Pn,S=Nn,S=F(h,h===p?S:0),E=h.callbackNode,S===0||h===p&&Mi===2||h.cancelPendingCommit!==null)return E!==null&&E!==null&&ph(E),h.callbackNode=null,h.callbackPriority=0;if((S&3)===0||H(h,S)){if(p=S&-S,p===h.callbackPriority)return p;switch(E!==null&&ph(E),vt(S)){case 2:case 8:S=mv;break;case 32:S=kd;break;case 268435456:S=Vd;break;default:S=kd}return E=Y.bind(null,h),S=of(S,E),h.callbackPriority=p,h.callbackNode=S,p}return E!==null&&E!==null&&ph(E),h.callbackPriority=2,h.callbackNode=null,2}function Y(h,p){var S=h.callbackNode;if(ba()&&h.callbackNode!==S)return null;var E=Nn;return E=F(h,h===Pn?E:0),E===0?null:(dc(h,E,p),$(h,ss()),h.callbackNode!=null&&h.callbackNode===S?Y.bind(null,h):null)}function yt(h,p){if(ba())return null;dc(h,p,!0)}function Bt(h){Ma?Rd(function(){(sn&6)!==0?of(Zm,h):h()}):of(Zm,h)}function Dt(){return Mc===0&&(Mc=Z()),Mc}function Ct(h,p){if(Sh===null){var S=Sh=[];Gd=0,Ys=Dt(),Tc={status:"pending",value:void 0,then:function(E){S.push(E)}}}return Gd++,p.then(ve,ve),p}function ve(){if(--Gd===0&&Sh!==null){Tc!==null&&(Tc.status="fulfilled");var h=Sh;Sh=null,Ys=0,Tc=null;for(var p=0;p<h.length;p++)(0,h[p])()}}function he(h,p){var S=[],E={status:"pending",value:null,reason:null,then:function(U){S.push(U)}};return h.then(function(){E.status="fulfilled",E.value=p;for(var U=0;U<S.length;U++)(0,S[U])(p)},function(U){for(E.status="rejected",E.reason=U,U=0;U<S.length;U++)(0,S[U])(void 0)}),E}function be(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ce(h,p){h=h.updateQueue,p.updateQueue===h&&(p.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function Gt(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function Qt(h,p,S){var E=h.updateQueue;if(E===null)return null;if(E=E.shared,(sn&2)!==0){var U=E.pending;return U===null?p.next=p:(p.next=U.next,U.next=p),E.pending=p,p=ue(h),at(h,null,S),p}return Vt(h,E,p,S),ue(h)}function se(h,p,S){if(p=p.updateQueue,p!==null&&(p=p.shared,(S&4194176)!==0)){var E=p.lanes;E&=h.pendingLanes,S|=E,p.lanes=S,ut(h,S)}}function gt(h,p){var S=h.updateQueue,E=h.alternate;if(E!==null&&(E=E.updateQueue,S===E)){var U=null,k=null;if(S=S.firstBaseUpdate,S!==null){do{var ot={lane:S.lane,tag:S.tag,payload:S.payload,callback:null,next:null};k===null?U=k=ot:k=k.next=ot,S=S.next}while(S!==null);k===null?U=k=p:k=k.next=p}else U=k=p;S={baseState:E.baseState,firstBaseUpdate:U,lastBaseUpdate:k,shared:E.shared,callbacks:E.callbacks},h.updateQueue=S;return}h=S.lastBaseUpdate,h===null?S.firstBaseUpdate=p:h.next=p,S.lastBaseUpdate=p}function wt(){if(hf){var h=Tc;if(h!==null)throw h}}function xe(h,p,S,E){hf=!1;var U=h.updateQueue;zl=!1;var k=U.firstBaseUpdate,ot=U.lastBaseUpdate,Mt=U.shared.pending;if(Mt!==null){U.shared.pending=null;var zt=Mt,pe=zt.next;zt.next=null,ot===null?k=pe:ot.next=pe,ot=zt;var we=h.alternate;we!==null&&(we=we.updateQueue,Mt=we.lastBaseUpdate,Mt!==ot&&(Mt===null?we.firstBaseUpdate=pe:Mt.next=pe,we.lastBaseUpdate=zt))}if(k!==null){var Be=U.baseState;ot=0,we=pe=zt=null,Mt=k;do{var Ge=Mt.lane&-536870913,_n=Ge!==Mt.lane;if(_n?(Nn&Ge)===Ge:(E&Ge)===Ge){Ge!==0&&Ge===Ys&&(hf=!0),we!==null&&(we=we.next={lane:0,tag:Mt.tag,payload:Mt.payload,callback:null,next:null});t:{var Js=h,Ah=Mt;Ge=p;var yu=S;switch(Ah.tag){case 1:if(Js=Ah.payload,typeof Js=="function"){Be=Js.call(yu,Be,Ge);break t}Be=Js;break t;case 3:Js.flags=Js.flags&-65537|128;case 0:if(Js=Ah.payload,Ge=typeof Js=="function"?Js.call(yu,Be,Ge):Js,Ge==null)break t;Be=au({},Be,Ge);break t;case 2:zl=!0}}Ge=Mt.callback,Ge!==null&&(h.flags|=64,_n&&(h.flags|=8192),_n=U.callbacks,_n===null?U.callbacks=[Ge]:_n.push(Ge))}else _n={lane:Ge,tag:Mt.tag,payload:Mt.payload,callback:Mt.callback,next:null},we===null?(pe=we=_n,zt=Be):we=we.next=_n,ot|=Ge;if(Mt=Mt.next,Mt===null){if(Mt=U.shared.pending,Mt===null)break;_n=Mt,Mt=_n.next,_n.next=null,U.lastBaseUpdate=_n,U.shared.pending=null}}while(!0);we===null&&(zt=Be),U.baseState=zt,U.firstBaseUpdate=pe,U.lastBaseUpdate=we,k===null&&(U.shared.lanes=0),Lr|=ot,h.lanes=ot,h.memoizedState=Be}}function St(h,p){if(typeof h!="function")throw Error(a(191,h));h.call(p)}function ie(h,p){var S=h.callbacks;if(S!==null)for(h.callbacks=null,h=0;h<S.length;h++)St(S[h],p)}function le(h,p){if(Mr(h,p))return!0;if(typeof h!="object"||h===null||typeof p!="object"||p===null)return!1;var S=Object.keys(h),E=Object.keys(p);if(S.length!==E.length)return!1;for(E=0;E<S.length;E++){var U=S[E];if(!bh.call(p,U)||!Mr(h[U],p[U]))return!1}return!0}function Ae(h){return h=h.status,h==="fulfilled"||h==="rejected"}function ce(){}function jt(h,p,S){switch(S=h[S],S===void 0?h.push(p):S!==p&&(p.then(ce,ce),p=S),p.status){case"fulfilled":return p.value;case"rejected":throw h=p.reason,h===xi?Error(a(483)):h;default:if(typeof p.status=="string")p.then(ce,ce);else{if(h=Pn,h!==null&&100<h.shellSuspendCounter)throw Error(a(482));h=p,h.status="pending",h.then(function(E){if(p.status==="pending"){var U=p;U.status="fulfilled",U.value=E}},function(E){if(p.status==="pending"){var U=p;U.status="rejected",U.reason=E}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw h=p.reason,h===xi?Error(a(483)):h}throw fu=p,xi}}function me(){if(fu===null)throw Error(a(459));var h=fu;return fu=null,h}function Re(h){var p=Kr;return Kr+=1,el===null&&(el=[]),jt(el,h,p)}function Le(h,p){p=p.props.ref,h.ref=p!==void 0?p:null}function qe(h,p){throw p.$$typeof===mm?Error(a(525)):(h=Object.prototype.toString.call(p),Error(a(31,h==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":h)))}function bn(h){var p=h._init;return p(h._payload)}function Bn(h){function p(Kt,It){if(h){var ae=Kt.deletions;ae===null?(Kt.deletions=[It],Kt.flags|=16):ae.push(It)}}function S(Kt,It){if(!h)return null;for(;It!==null;)p(Kt,It),It=It.sibling;return null}function E(Kt){for(var It=new Map;Kt!==null;)Kt.key!==null?It.set(Kt.key,Kt):It.set(Kt.index,Kt),Kt=Kt.sibling;return It}function U(Kt,It){return Kt=qa(Kt,It),Kt.index=0,Kt.sibling=null,Kt}function k(Kt,It,ae){return Kt.index=ae,h?(ae=Kt.alternate,ae!==null?(ae=ae.index,ae<It?(Kt.flags|=33554434,It):ae):(Kt.flags|=33554434,It)):(Kt.flags|=1048576,It)}function ot(Kt){return h&&Kt.alternate===null&&(Kt.flags|=33554434),Kt}function Mt(Kt,It,ae,Te){return It===null||It.tag!==6?(It=pc(ae,Kt.mode,Te),It.return=Kt,It):(It=U(It,ae),It.return=Kt,It)}function zt(Kt,It,ae,Te){var en=ae.type;return en===tf?we(Kt,It,ae.props.children,Te,ae.key):It!==null&&(It.elementType===en||typeof en=="object"&&en!==null&&en.$$typeof===Do&&bn(en)===It.type)?(It=U(It,ae.props),Le(It,ae),It.return=Kt,It):(It=qr(ae.type,ae.key,ae.props,null,Kt.mode,Te),Le(It,ae),It.return=Kt,It)}function pe(Kt,It,ae,Te){return It===null||It.tag!==4||It.stateNode.containerInfo!==ae.containerInfo||It.stateNode.implementation!==ae.implementation?(It=$u(ae,Kt.mode,Te),It.return=Kt,It):(It=U(It,ae.children||[]),It.return=Kt,It)}function we(Kt,It,ae,Te,en){return It===null||It.tag!==7?(It=Ll(ae,Kt.mode,Te,en),It.return=Kt,It):(It=U(It,ae),It.return=Kt,It)}function Be(Kt,It,ae){if(typeof It=="string"&&It!==""||typeof It=="number"||typeof It=="bigint")return It=pc(""+It,Kt.mode,ae),It.return=Kt,It;if(typeof It=="object"&&It!==null){switch(It.$$typeof){case Ol:return ae=qr(It.type,It.key,It.props,null,Kt.mode,ae),Le(ae,It),ae.return=Kt,ae;case Ro:return It=$u(It,Kt.mode,ae),It.return=Kt,It;case Do:var Te=It._init;return It=Te(It._payload),Be(Kt,It,ae)}if(yc(It)||s(It))return It=Ll(It,Kt.mode,ae,null),It.return=Kt,It;if(typeof It.then=="function")return Be(Kt,Re(It),ae);if(It.$$typeof===Zo)return Be(Kt,xl(Kt,It),ae);qe(Kt,It)}return null}function Ge(Kt,It,ae,Te){var en=It!==null?It.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return en!==null?null:Mt(Kt,It,""+ae,Te);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case Ol:return ae.key===en?zt(Kt,It,ae,Te):null;case Ro:return ae.key===en?pe(Kt,It,ae,Te):null;case Do:return en=ae._init,ae=en(ae._payload),Ge(Kt,It,ae,Te)}if(yc(ae)||s(ae))return en!==null?null:we(Kt,It,ae,Te,null);if(typeof ae.then=="function")return Ge(Kt,It,Re(ae),Te);if(ae.$$typeof===Zo)return Ge(Kt,It,xl(Kt,ae),Te);qe(Kt,ae)}return null}function _n(Kt,It,ae,Te,en){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return Kt=Kt.get(ae)||null,Mt(It,Kt,""+Te,en);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case Ol:return Kt=Kt.get(Te.key===null?ae:Te.key)||null,zt(It,Kt,Te,en);case Ro:return Kt=Kt.get(Te.key===null?ae:Te.key)||null,pe(It,Kt,Te,en);case Do:var Ni=Te._init;return Te=Ni(Te._payload),_n(Kt,It,ae,Te,en)}if(yc(Te)||s(Te))return Kt=Kt.get(ae)||null,we(It,Kt,Te,en,null);if(typeof Te.then=="function")return _n(Kt,It,ae,Re(Te),en);if(Te.$$typeof===Zo)return _n(Kt,It,ae,xl(It,Te),en);qe(It,Te)}return null}function Js(Kt,It,ae,Te){for(var en=null,Ni=null,pn=It,ni=It=0,Pa=null;pn!==null&&ni<ae.length;ni++){pn.index>ni?(Pa=pn,pn=null):Pa=pn.sibling;var ii=Ge(Kt,pn,ae[ni],Te);if(ii===null){pn===null&&(pn=Pa);break}h&&pn&&ii.alternate===null&&p(Kt,pn),It=k(ii,It,ni),Ni===null?en=ii:Ni.sibling=ii,Ni=ii,pn=Pa}if(ni===ae.length)return S(Kt,pn),ti&&lt(Kt,ni),en;if(pn===null){for(;ni<ae.length;ni++)pn=Be(Kt,ae[ni],Te),pn!==null&&(It=k(pn,It,ni),Ni===null?en=pn:Ni.sibling=pn,Ni=pn);return ti&&lt(Kt,ni),en}for(pn=E(pn);ni<ae.length;ni++)Pa=_n(pn,Kt,ni,ae[ni],Te),Pa!==null&&(h&&Pa.alternate!==null&&pn.delete(Pa.key===null?ni:Pa.key),It=k(Pa,It,ni),Ni===null?en=Pa:Ni.sibling=Pa,Ni=Pa);return h&&pn.forEach(function(jl){return p(Kt,jl)}),ti&&lt(Kt,ni),en}function Ah(Kt,It,ae,Te){if(ae==null)throw Error(a(151));for(var en=null,Ni=null,pn=It,ni=It=0,Pa=null,ii=ae.next();pn!==null&&!ii.done;ni++,ii=ae.next()){pn.index>ni?(Pa=pn,pn=null):Pa=pn.sibling;var jl=Ge(Kt,pn,ii.value,Te);if(jl===null){pn===null&&(pn=Pa);break}h&&pn&&jl.alternate===null&&p(Kt,pn),It=k(jl,It,ni),Ni===null?en=jl:Ni.sibling=jl,Ni=jl,pn=Pa}if(ii.done)return S(Kt,pn),ti&&lt(Kt,ni),en;if(pn===null){for(;!ii.done;ni++,ii=ae.next())ii=Be(Kt,ii.value,Te),ii!==null&&(It=k(ii,It,ni),Ni===null?en=ii:Ni.sibling=ii,Ni=ii);return ti&&lt(Kt,ni),en}for(pn=E(pn);!ii.done;ni++,ii=ae.next())ii=_n(pn,Kt,ni,ii.value,Te),ii!==null&&(h&&ii.alternate!==null&&pn.delete(ii.key===null?ni:ii.key),It=k(ii,It,ni),Ni===null?en=ii:Ni.sibling=ii,Ni=ii);return h&&pn.forEach(function(Jd){return p(Kt,Jd)}),ti&&lt(Kt,ni),en}function yu(Kt,It,ae,Te){if(typeof ae=="object"&&ae!==null&&ae.type===tf&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case Ol:t:{for(var en=ae.key;It!==null;){if(It.key===en){if(en=ae.type,en===tf){if(It.tag===7){S(Kt,It.sibling),Te=U(It,ae.props.children),Te.return=Kt,Kt=Te;break t}}else if(It.elementType===en||typeof en=="object"&&en!==null&&en.$$typeof===Do&&bn(en)===It.type){S(Kt,It.sibling),Te=U(It,ae.props),Le(Te,ae),Te.return=Kt,Kt=Te;break t}S(Kt,It);break}else p(Kt,It);It=It.sibling}ae.type===tf?(Te=Ll(ae.props.children,Kt.mode,Te,ae.key),Te.return=Kt,Kt=Te):(Te=qr(ae.type,ae.key,ae.props,null,Kt.mode,Te),Le(Te,ae),Te.return=Kt,Kt=Te)}return ot(Kt);case Ro:t:{for(en=ae.key;It!==null;){if(It.key===en)if(It.tag===4&&It.stateNode.containerInfo===ae.containerInfo&&It.stateNode.implementation===ae.implementation){S(Kt,It.sibling),Te=U(It,ae.children||[]),Te.return=Kt,Kt=Te;break t}else{S(Kt,It);break}else p(Kt,It);It=It.sibling}Te=$u(ae,Kt.mode,Te),Te.return=Kt,Kt=Te}return ot(Kt);case Do:return en=ae._init,ae=en(ae._payload),yu(Kt,It,ae,Te)}if(yc(ae))return Js(Kt,It,ae,Te);if(s(ae)){if(en=s(ae),typeof en!="function")throw Error(a(150));return ae=en.call(ae),Ah(Kt,It,ae,Te)}if(typeof ae.then=="function")return yu(Kt,It,Re(ae),Te);if(ae.$$typeof===Zo)return yu(Kt,It,xl(Kt,ae),Te);qe(Kt,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint"?(ae=""+ae,It!==null&&It.tag===6?(S(Kt,It.sibling),Te=U(It,ae),Te.return=Kt,Kt=Te):(S(Kt,It),Te=pc(ae,Kt.mode,Te),Te.return=Kt,Kt=Te),ot(Kt)):S(Kt,It)}return function(Kt,It,ae,Te){try{Kr=0;var en=yu(Kt,It,ae,Te);return el=null,en}catch(pn){if(pn===xi)throw pn;var Ni=e(29,pn,null,Kt.mode);return Ni.lanes=Te,Ni.return=Kt,Ni}}}function Ai(h,p){h=Uo,N(Cr,h),N(nl,p),Uo=h|p.baseLanes}function ia(){N(Cr,Uo),N(nl,nl.current)}function Ca(){Uo=Cr.current,w(nl),w(Cr)}function Yn(h){var p=h.alternate;N(Ta,Ta.current&1),N(Rr,h),Qr===null&&(p===null||nl.current!==null||p.memoizedState!==null)&&(Qr=h)}function ke(h){if(h.tag===22){if(N(Ta,Ta.current),N(Rr,h),Qr===null){var p=h.alternate;p!==null&&p.memoizedState!==null&&(Qr=h)}}else Fi()}function Fi(){N(Ta,Ta.current),N(Rr,Rr.current)}function si(h){w(Rr),Qr===h&&(Qr=null),w(Ta)}function Hn(h){for(var p=h;p!==null;){if(p.tag===13){var S=p.memoizedState;if(S!==null&&(S=S.dehydrated,S===null||Ud(S)||uh(S)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}function cn(){throw Error(a(321))}function Li(h,p){if(p===null)return!1;for(var S=0;S<p.length&&S<h.length;S++)if(!Mr(h[S],p[S]))return!1;return!0}function ga(h,p,S,E,U,k){return il=k,Rn=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,un.H=h===null||h.memoizedState===null?Aa:xs,Bl=!1,k=S(E,U),Bl=!1,Bi&&(k=cr(p,S,E,U)),fs(h),k}function fs(h){un.H=ei;var p=ri!==null&&ri.next!==null;if(il=0,ra=ri=Rn=null,Jr=!1,$i=0,df=null,p)throw Error(a(300));h===null||oa||(h=h.dependencies,h!==null&&yo(h)&&(oa=!0))}function cr(h,p,S,E){Rn=h;var U=0;do{if(Bi&&(df=null),$i=0,Bi=!1,25<=U)throw Error(a(301));if(U+=1,ra=ri=null,h.updateQueue!=null){var k=h.updateQueue;k.lastEffect=null,k.events=null,k.stores=null,k.memoCache!=null&&(k.memoCache.index=0)}un.H=Ec,k=p(S,E)}while(Bi);return k}function lo(){var h=un.H,p=h.useState()[0];return p=typeof p.then=="function"?va(p):p,h=h.useState()[0],(ri!==null?ri.memoizedState:null)!==h&&(Rn.flags|=1024),p}function ur(){var h=Mh!==0;return Mh=0,h}function fr(h,p,S){p.updateQueue=h.updateQueue,p.flags&=-2053,h.lanes&=~S}function Gr(h){if(Jr){for(h=h.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}Jr=!1}il=0,ra=ri=Rn=null,Bi=!1,$i=Mh=0,df=null}function yi(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ra===null?Rn.memoizedState=ra=h:ra=ra.next=h,ra}function Zn(){if(ri===null){var h=Rn.alternate;h=h!==null?h.memoizedState:null}else h=ri.next;var p=ra===null?Rn.memoizedState:ra.next;if(p!==null)ra=p,ri=h;else{if(h===null)throw Rn.alternate===null?Error(a(467)):Error(a(310));ri=h,h={memoizedState:ri.memoizedState,baseState:ri.baseState,baseQueue:ri.baseQueue,queue:ri.queue,next:null},ra===null?Rn.memoizedState=ra=h:ra=ra.next=h}return ra}function va(h){var p=$i;return $i+=1,df===null&&(df=[]),h=jt(df,h,p),p=Rn,(ra===null?p.memoizedState:ra.next)===null&&(p=p.alternate,un.H=p===null||p.memoizedState===null?Aa:xs),h}function Xe(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return va(h);if(h.$$typeof===Zo)return aa(h)}throw Error(a(438,String(h)))}function it(h){var p=null,S=Rn.updateQueue;if(S!==null&&(p=S.memoCache),p==null){var E=Rn.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(p={data:E.data.map(function(U){return U.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),S===null&&(S=Wd(),Rn.updateQueue=S),S.memoCache=p,S=p.data[p.index],S===void 0)for(S=p.data[p.index]=Array(h),E=0;E<h;E++)S[E]=j0;return p.index++,S}function Rt(h,p){return typeof p=="function"?p(h):p}function Xt(h){var p=Zn();return kt(p,ri,h)}function kt(h,p,S){var E=h.queue;if(E===null)throw Error(a(311));E.lastRenderedReducer=S;var U=h.baseQueue,k=E.pending;if(k!==null){if(U!==null){var ot=U.next;U.next=k.next,k.next=ot}p.baseQueue=U=k,E.pending=null}if(k=h.baseState,U===null)h.memoizedState=k;else{p=U.next;var Mt=ot=null,zt=null,pe=p,we=!1;do{var Be=pe.lane&-536870913;if(Be!==pe.lane?(Nn&Be)===Be:(il&Be)===Be){var Ge=pe.revertLane;if(Ge===0)zt!==null&&(zt=zt.next={lane:0,revertLane:0,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),Be===Ys&&(we=!0);else if((il&Ge)===Ge){pe=pe.next,Ge===Ys&&(we=!0);continue}else Be={lane:0,revertLane:pe.revertLane,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},zt===null?(Mt=zt=Be,ot=k):zt=zt.next=Be,Rn.lanes|=Ge,Lr|=Ge;Be=pe.action,Bl&&S(k,Be),k=pe.hasEagerState?pe.eagerState:S(k,Be)}else Ge={lane:Be,revertLane:pe.revertLane,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},zt===null?(Mt=zt=Ge,ot=k):zt=zt.next=Ge,Rn.lanes|=Be,Lr|=Be;pe=pe.next}while(pe!==null&&pe!==p);if(zt===null?ot=k:zt.next=Mt,!Mr(k,h.memoizedState)&&(oa=!0,we&&(S=Tc,S!==null)))throw S;h.memoizedState=k,h.baseState=ot,h.baseQueue=zt,E.lastRenderedState=k}return U===null&&(E.lanes=0),[h.memoizedState,E.dispatch]}function Ut(h){var p=Zn(),S=p.queue;if(S===null)throw Error(a(311));S.lastRenderedReducer=h;var E=S.dispatch,U=S.pending,k=p.memoizedState;if(U!==null){S.pending=null;var ot=U=U.next;do k=h(k,ot.action),ot=ot.next;while(ot!==U);Mr(k,p.memoizedState)||(oa=!0),p.memoizedState=k,p.baseQueue===null&&(p.baseState=k),S.lastRenderedState=k}return[k,E]}function Ee(h,p,S){var E=Rn,U=Zn(),k=ti;if(k){if(S===void 0)throw Error(a(407));S=S()}else S=p();var ot=!Mr((ri||U).memoizedState,S);if(ot&&(U.memoizedState=S,oa=!0),U=U.queue,ki(Pe.bind(null,E,U,h),[h]),U.getSnapshot!==p||ot||ra!==null&&ra.memoizedState.tag&1){if(E.flags|=2048,Qn(9,De.bind(null,E,U,S,p),{destroy:void 0},null),Pn===null)throw Error(a(349));k||(il&60)!==0||Ue(E,p,S)}return S}function Ue(h,p,S){h.flags|=16384,h={getSnapshot:p,value:S},p=Rn.updateQueue,p===null?(p=Wd(),Rn.updateQueue=p,p.stores=[h]):(S=p.stores,S===null?p.stores=[h]:S.push(h))}function De(h,p,S,E){p.value=S,p.getSnapshot=E,Me(p)&&Oe(h)}function Pe(h,p,S){return S(function(){Me(p)&&Oe(h)})}function Me(h){var p=h.getSnapshot;h=h.value;try{var S=p();return!Mr(h,S)}catch{return!0}}function Oe(h){var p=re(h,2);p!==null&&Na(p,h,2)}function Ve(h){var p=yi();if(typeof h=="function"){var S=h;if(h=S(),Bl){K(!0);try{S()}finally{K(!1)}}}return p.memoizedState=p.baseState=h,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rt,lastRenderedState:h},p}function Je(h,p,S,E){return h.baseState=S,kt(h,ri,typeof E=="function"?E:Rt)}function xn(h,p,S,E,U){if(dr(h))throw Error(a(485));if(h=p.action,h!==null){var k={payload:U,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ot){k.listeners.push(ot)}};un.T!==null?S(!0):k.isTransition=!1,E(k),S=p.pending,S===null?(k.next=p.pending=k,Kn(p,k)):(k.next=S.next,p.pending=S.next=k)}}function Kn(h,p){var S=p.action,E=p.payload,U=h.state;if(p.isTransition){var k=un.T,ot={};un.T=ot;try{var Mt=S(U,E),zt=un.S;zt!==null&&zt(ot,Mt),ze(h,p,Mt)}catch(pe){Ye(h,p,pe)}finally{un.T=k}}else try{k=S(U,E),ze(h,p,k)}catch(pe){Ye(h,p,pe)}}function ze(h,p,S){S!==null&&typeof S=="object"&&typeof S.then=="function"?S.then(function(E){nn(h,p,E)},function(E){return Ye(h,p,E)}):nn(h,p,S)}function nn(h,p,S){p.status="fulfilled",p.value=S,Cn(p),h.state=S,p=h.pending,p!==null&&(S=p.next,S===p?h.pending=null:(S=S.next,p.next=S,Kn(h,S)))}function Ye(h,p,S){var E=h.pending;if(h.pending=null,E!==null){E=E.next;do p.status="rejected",p.reason=S,Cn(p),p=p.next;while(p!==E)}h.action=null}function Cn(h){h=h.listeners;for(var p=0;p<h.length;p++)(0,h[p])()}function je(h,p){return p}function qi(h,p){if(ti){var S=Pn.formState;if(S!==null){t:{var E=Rn;if(ti){if(rs){var U=Q0(rs,Zr);if(U){rs=zm(U),E=J0(U);break t}}At(E)}E=!1}E&&(p=S[0])}}S=yi(),S.memoizedState=S.baseState=p,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:je,lastRenderedState:p},S.queue=E,S=hr.bind(null,Rn,E),E.dispatch=S,E=Ve(!1);var k=Ds.bind(null,Rn,!1,E.queue);return E=yi(),U={state:p,dispatch:null,action:h,pending:null},E.queue=U,S=xn.bind(null,Rn,U,k,S),U.dispatch=S,E.memoizedState=h,[p,S,!1]}function ya(h){var p=Zn();return ai(p,ri,h)}function ai(h,p,S){p=kt(h,p,je)[0],h=Xt(Rt)[0],p=typeof p=="object"&&p!==null&&typeof p.then=="function"?va(p):p;var E=Zn(),U=E.queue,k=U.dispatch;return S!==E.memoizedState&&(Rn.flags|=2048,Qn(9,Fn.bind(null,U,S),{destroy:void 0},null)),[p,k,h]}function Fn(h,p){h.action=p}function Mn(h){var p=Zn(),S=ri;if(S!==null)return ai(p,S,h);Zn(),p=p.memoizedState,S=Zn();var E=S.queue.dispatch;return S.memoizedState=h,[p,E,!1]}function Qn(h,p,S,E){return h={tag:h,create:p,inst:S,deps:E,next:null},p=Rn.updateQueue,p===null&&(p=Wd(),Rn.updateQueue=p),S=p.lastEffect,S===null?p.lastEffect=h.next=h:(E=S.next,S.next=h,h.next=E,p.lastEffect=h),h}function ci(){return Zn().memoizedState}function Ei(h,p,S,E){var U=yi();Rn.flags|=h,U.memoizedState=Qn(1|p,S,{destroy:void 0},E===void 0?null:E)}function _i(h,p,S,E){var U=Zn();E=E===void 0?null:E;var k=U.memoizedState.inst;ri!==null&&E!==null&&Li(E,ri.memoizedState.deps)?U.memoizedState=Qn(p,S,k,E):(Rn.flags|=h,U.memoizedState=Qn(1|p,S,k,E))}function Es(h,p){Ei(8390656,8,h,p)}function ki(h,p){_i(2048,8,h,p)}function Ho(h,p){return _i(4,2,h,p)}function co(h,p){return _i(4,4,h,p)}function hs(h,p){if(typeof p=="function"){h=h();var S=p(h);return function(){typeof S=="function"?S():p(null)}}if(p!=null)return h=h(),p.current=h,function(){p.current=null}}function Xi(h,p,S){S=S!=null?S.concat([h]):null,_i(4,4,hs.bind(null,p,h),S)}function Gs(){}function uo(h,p){var S=Zn();p=p===void 0?null:p;var E=S.memoizedState;return p!==null&&Li(p,E[1])?E[0]:(S.memoizedState=[h,p],h)}function ws(h,p){var S=Zn();p=p===void 0?null:p;var E=S.memoizedState;if(p!==null&&Li(p,E[1]))return E[0];if(E=h(),Bl){K(!0);try{h()}finally{K(!1)}}return S.memoizedState=[E,p],E}function on(h,p,S){return S===void 0||(il&1073741824)!==0?h.memoizedState=p:(h.memoizedState=S,h=yr(),Rn.lanes|=h,Lr|=h,S)}function Fa(h,p,S,E){return Mr(S,p)?S:nl.current!==null?(h=on(h,S,E),Mr(h,p)||(oa=!0),h):(il&42)===0?(oa=!0,h.memoizedState=S):(h=yr(),Rn.lanes|=h,Lr|=h,p)}function Gn(h,p,S,E,U){var k=Ua();ys(k!==0&&8>k?k:8);var ot=un.T,Mt={};un.T=Mt,Ds(h,!1,p,S);try{var zt=U(),pe=un.S;if(pe!==null&&pe(Mt,zt),zt!==null&&typeof zt=="object"&&typeof zt.then=="function"){var we=he(zt,E);ui(h,p,we,ja(h))}else ui(h,p,E,ja(h))}catch(Be){ui(h,p,{then:function(){},status:"rejected",reason:Be},ja())}finally{ys(k),un.T=ot}}function fo(h){var p=h.memoizedState;if(p!==null)return p;p={memoizedState:Ws,baseState:Ws,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rt,lastRenderedState:Ws},next:null};var S={};return p.next={memoizedState:S,baseState:S,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rt,lastRenderedState:S},next:null},h.memoizedState=p,h=h.alternate,h!==null&&(h.memoizedState=p),p}function Cs(){return aa(dn)}function Qa(){return Zn().memoizedState}function _a(){return Zn().memoizedState}function Ja(h){for(var p=h.return;p!==null;){switch(p.tag){case 24:case 3:var S=ja();h=Gt(S);var E=Qt(p,h,S);E!==null&&(Na(E,p,S),se(E,p,S)),p={cache:Zu()},h.payload=p;return}p=p.return}}function Rs(h,p,S){var E=ja();S={lane:E,revertLane:0,action:S,hasEagerState:!1,eagerState:null,next:null},dr(h)?js(p,S):(S=Ft(h,p,S,E),S!==null&&(Na(S,h,E),ho(S,p,E)))}function hr(h,p,S){var E=ja();ui(h,p,S,E)}function ui(h,p,S,E){var U={lane:E,revertLane:0,action:S,hasEagerState:!1,eagerState:null,next:null};if(dr(h))js(p,U);else{var k=h.alternate;if(h.lanes===0&&(k===null||k.lanes===0)&&(k=p.lastRenderedReducer,k!==null))try{var ot=p.lastRenderedState,Mt=k(ot,S);if(U.hasEagerState=!0,U.eagerState=Mt,Mr(Mt,ot))return Vt(h,p,U,0),Pn===null&&Nt(),!1}catch{}if(S=Ft(h,p,U,E),S!==null)return Na(S,h,E),ho(S,p,E),!0}return!1}function Ds(h,p,S,E){if(E={lane:2,revertLane:Dt(),action:E,hasEagerState:!1,eagerState:null,next:null},dr(h)){if(p)throw Error(a(479))}else p=Ft(h,S,E,2),p!==null&&Na(p,h,2)}function dr(h){var p=h.alternate;return h===Rn||p!==null&&p===Rn}function js(h,p){Bi=Jr=!0;var S=h.pending;S===null?p.next=p:(p.next=S.next,S.next=p),h.pending=p}function ho(h,p,S){if((S&4194176)!==0){var E=p.lanes;E&=h.pendingLanes,S|=E,p.lanes=S,ut(h,S)}}function Si(h,p,S,E){p=h.memoizedState,S=S(E,p),S=S==null?p:au({},p,S),h.memoizedState=S,h.lanes===0&&(h.updateQueue.baseState=S)}function Ls(h,p,S,E,U,k,ot){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(E,k,ot):p.prototype&&p.prototype.isPureReactComponent?!le(S,E)||!le(U,k):!0}function po(h,p,S,E){h=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(S,E),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(S,E),p.state!==h&&qd.enqueueReplaceState(p,p.state,null)}function ka(h,p){var S=p;if("ref"in p){S={};for(var E in p)E!=="ref"&&(S[E]=p[E])}if(h=h.defaultProps){S===p&&(S=au({},S));for(var U in h)S[U]===void 0&&(S[U]=h[U])}return S}function yn(h,p){try{var S=h.onUncaughtError;S(p.value,{componentStack:p.stack})}catch(E){setTimeout(function(){throw E})}}function gl(h,p,S){try{var E=h.onCaughtError;E(S.value,{componentStack:S.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(U){setTimeout(function(){throw U})}}function Vi(h,p,S){return S=Gt(S),S.tag=3,S.payload={element:null},S.callback=function(){yn(h,p)},S}function ds(h){return h=Gt(h),h.tag=3,h}function Yi(h,p,S,E){var U=S.type.getDerivedStateFromError;if(typeof U=="function"){var k=E.value;h.payload=function(){return U(k)},h.callback=function(){gl(p,S,E)}}var ot=S.stateNode;ot!==null&&typeof ot.componentDidCatch=="function"&&(h.callback=function(){gl(p,S,E),typeof U!="function"&&(Nr===null?Nr=new Set([this]):Nr.add(this));var Mt=E.stack;this.componentDidCatch(E.value,{componentStack:Mt!==null?Mt:""})})}function Fu(h,p,S,E,U){if(S.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(p=S.alternate,p!==null&&Go(p,S,U,!0),S=Rr.current,S!==null){switch(S.tag){case 13:return Qr===null?Ot():S.alternate===null&&Wn===0&&(Wn=3),S.flags&=-257,S.flags|=65536,S.lanes=U,E===jd?S.flags|=16384:(p=S.updateQueue,p===null?S.updateQueue=new Set([E]):p.add(E),tu(h,E,U)),!1;case 22:return S.flags|=65536,E===jd?S.flags|=16384:(p=S.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([E])},S.updateQueue=p):(S=p.retryQueue,S===null?p.retryQueue=new Set([E]):S.add(E)),tu(h,E,U)),!1}throw Error(a(435,S.tag))}return tu(h,E,U),Ot(),!1}if(ti)return p=Rr.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=U,E!==yh&&(h=Error(a(422),{cause:E}),Se(dt(h,S)))):(E!==yh&&(p=Error(a(423),{cause:E}),Se(dt(p,S))),h=h.current.alternate,h.flags|=65536,U&=-U,h.lanes|=U,E=dt(E,S),U=Vi(h.stateNode,E,U),gt(h,U),Wn!==4&&(Wn=2)),!1;var k=Error(a(520),{cause:E});if(k=dt(k,S),mf===null?mf=[k]:mf.push(k),Wn!==4&&(Wn=2),p===null)return!0;E=dt(E,S),S=p;do{switch(S.tag){case 3:return S.flags|=65536,h=U&-U,S.lanes|=h,h=Vi(S.stateNode,E,h),gt(S,h),!1;case 1:if(p=S.type,k=S.stateNode,(S.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Nr===null||!Nr.has(k))))return S.flags|=65536,U&=-U,S.lanes|=U,U=ds(U),Yi(U,h,S,E),gt(S,U),!1}S=S.return}while(S!==null);return!1}function Oi(h,p,S,E){p.child=h===null?Jm(p,null,S,E):Ac(p,h.child,S,E)}function vl(h,p,S,E,U){S=S.render;var k=p.ref;if("ref"in E){var ot={};for(var Mt in E)Mt!=="ref"&&(ot[Mt]=E[Mt])}else ot=E;return _l(p),E=ga(h,p,S,ot,k,U),Mt=ur(),h!==null&&!oa?(fr(h,p,U),go(h,p,U)):(ti&&Mt&&nt(p),p.flags|=1,Oi(h,p,E,U),p.child)}function nc(h,p,S,E,U){if(h===null){var k=S.type;return typeof k=="function"&&!Wr(k)&&k.defaultProps===void 0&&S.compare===null?(p.tag=15,p.type=k,ic(h,p,k,E,U)):(h=qr(S.type,null,E,p,p.mode,U),h.ref=p.ref,h.return=p,p.child=h)}if(k=h.child,!Yu(h,U)){var ot=k.memoizedProps;if(S=S.compare,S=S!==null?S:le,S(ot,E)&&h.ref===p.ref)return go(h,p,U)}return p.flags|=1,h=qa(k,E),h.ref=p.ref,h.return=p,p.child=h}function ic(h,p,S,E,U){if(h!==null){var k=h.memoizedProps;if(le(k,E)&&h.ref===p.ref)if(oa=!1,p.pendingProps=E=k,Yu(h,U))(h.flags&131072)!==0&&(oa=!0);else return p.lanes=h.lanes,go(h,p,U)}return Hi(h,p,S,E,U)}function Ra(h,p,S){var E=p.pendingProps,U=E.children,k=(p.stateNode._pendingVisibility&2)!==0,ot=h!==null?h.memoizedState:null;if(Zi(h,p),E.mode==="hidden"||k){if((p.flags&128)!==0){if(E=ot!==null?ot.baseLanes|S:S,h!==null){for(U=p.child=h.child,k=0;U!==null;)k=k|U.lanes|U.childLanes,U=U.sibling;p.childLanes=k&~E}else p.childLanes=0,p.child=null;return Va(h,p,E,S)}if((S&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},h!==null&&gs(p,ot!==null?ot.cachePool:null),ot!==null?Ai(p,ot):ia(),ke(p);else return p.lanes=p.childLanes=536870912,Va(h,p,ot!==null?ot.baseLanes|S:S,S)}else ot!==null?(gs(p,ot.cachePool),Ai(p,ot),Fi(),p.memoizedState=null):(h!==null&&gs(p,null),ia(),Fi());return Oi(h,p,U,S),p.child}function Va(h,p,S,E){var U=jo();return U=U===null?null:{parent:Qo?di._currentValue:di._currentValue2,pool:U},p.memoizedState={baseLanes:S,cachePool:U},h!==null&&gs(p,null),ia(),ke(p),h!==null&&Go(h,p,E,!0),null}function Zi(h,p){var S=p.ref;if(S===null)h!==null&&h.ref!==null&&(p.flags|=2097664);else{if(typeof S!="function"&&typeof S!="object")throw Error(a(284));(h===null||h.ref!==S)&&(p.flags|=2097664)}}function Hi(h,p,S,E,U){return _l(p),S=ga(h,p,S,E,void 0,U),E=ur(),h!==null&&!oa?(fr(h,p,U),go(h,p,U)):(ti&&E&&nt(p),p.flags|=1,Oi(h,p,S,U),p.child)}function jc(h,p,S,E,U,k){return _l(p),p.updateQueue=null,S=cr(p,E,S,U),fs(h),E=ur(),h!==null&&!oa?(fr(h,p,k),go(h,p,k)):(ti&&E&&nt(p),p.flags|=1,Oi(h,p,S,k),p.child)}function ku(h,p,S,E,U){if(_l(p),p.stateNode===null){var k=cu,ot=S.contextType;typeof ot=="object"&&ot!==null&&(k=aa(ot)),k=new S(E,k),p.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,k.updater=qd,p.stateNode=k,k._reactInternals=p,k=p.stateNode,k.props=E,k.state=p.memoizedState,k.refs={},be(p),ot=S.contextType,k.context=typeof ot=="object"&&ot!==null?aa(ot):cu,k.state=p.memoizedState,ot=S.getDerivedStateFromProps,typeof ot=="function"&&(Si(p,S,ot,E),k.state=p.memoizedState),typeof S.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(ot=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),ot!==k.state&&qd.enqueueReplaceState(k,k.state,null),xe(p,E,k,U),wt(),k.state=p.memoizedState),typeof k.componentDidMount=="function"&&(p.flags|=4194308),E=!0}else if(h===null){k=p.stateNode;var Mt=p.memoizedProps,zt=ka(S,Mt);k.props=zt;var pe=k.context,we=S.contextType;ot=cu,typeof we=="object"&&we!==null&&(ot=aa(we));var Be=S.getDerivedStateFromProps;we=typeof Be=="function"||typeof k.getSnapshotBeforeUpdate=="function",Mt=p.pendingProps!==Mt,we||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(Mt||pe!==ot)&&po(p,k,E,ot),zl=!1;var Ge=p.memoizedState;k.state=Ge,xe(p,E,k,U),wt(),pe=p.memoizedState,Mt||Ge!==pe||zl?(typeof Be=="function"&&(Si(p,S,Be,E),pe=p.memoizedState),(zt=zl||Ls(p,S,zt,E,Ge,pe,ot))?(we||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(p.flags|=4194308)):(typeof k.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=E,p.memoizedState=pe),k.props=E,k.state=pe,k.context=ot,E=zt):(typeof k.componentDidMount=="function"&&(p.flags|=4194308),E=!1)}else{k=p.stateNode,Ce(h,p),ot=p.memoizedProps,we=ka(S,ot),k.props=we,Be=p.pendingProps,Ge=k.context,pe=S.contextType,zt=cu,typeof pe=="object"&&pe!==null&&(zt=aa(pe)),Mt=S.getDerivedStateFromProps,(pe=typeof Mt=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(ot!==Be||Ge!==zt)&&po(p,k,E,zt),zl=!1,Ge=p.memoizedState,k.state=Ge,xe(p,E,k,U),wt();var _n=p.memoizedState;ot!==Be||Ge!==_n||zl||h!==null&&h.dependencies!==null&&yo(h.dependencies)?(typeof Mt=="function"&&(Si(p,S,Mt,E),_n=p.memoizedState),(we=zl||Ls(p,S,we,E,Ge,_n,zt)||h!==null&&h.dependencies!==null&&yo(h.dependencies))?(pe||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(E,_n,zt),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(E,_n,zt)),typeof k.componentDidUpdate=="function"&&(p.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof k.componentDidUpdate!="function"||ot===h.memoizedProps&&Ge===h.memoizedState||(p.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||ot===h.memoizedProps&&Ge===h.memoizedState||(p.flags|=1024),p.memoizedProps=E,p.memoizedState=_n),k.props=E,k.state=_n,k.context=zt,E=we):(typeof k.componentDidUpdate!="function"||ot===h.memoizedProps&&Ge===h.memoizedState||(p.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||ot===h.memoizedProps&&Ge===h.memoizedState||(p.flags|=1024),E=!1)}return k=E,Zi(h,p),E=(p.flags&128)!==0,k||E?(k=p.stateNode,S=E&&typeof S.getDerivedStateFromError!="function"?null:k.render(),p.flags|=1,h!==null&&E?(p.child=Ac(p,h.child,null,U),p.child=Ac(p,null,S,U)):Oi(h,p,S,U),p.memoizedState=k.state,h=p.child):h=go(h,p,U),h}function mo(h,p,S,E){return ne(),p.flags|=256,Oi(h,p,S,E),p.child}function Vu(h){return{baseLanes:h,cachePool:bl()}}function Hu(h,p,S){return h=h!==null?h.childLanes&~S:0,p&&(h|=Qs),h}function Gu(h,p,S){var E=p.pendingProps,U=!1,k=(p.flags&128)!==0,ot;if((ot=k)||(ot=h!==null&&h.memoizedState===null?!1:(Ta.current&2)!==0),ot&&(U=!0,p.flags&=-129),ot=(p.flags&32)!==0,p.flags&=-33,h===null){if(ti){if(U?Yn(p):Fi(),ti){var Mt=rs,zt;(zt=Mt)&&(Mt=iv(Mt,Zr),Mt!==null?(p.memoizedState={dehydrated:Mt,treeContext:Lo!==null?{id:tl,overflow:Yr}:null,retryLane:536870912},zt=e(18,null,null,0),zt.stateNode=Mt,zt.return=p,p.child=zt,_s=p,rs=null,zt=!0):zt=!1),zt||At(p)}if(Mt=p.memoizedState,Mt!==null&&(Mt=Mt.dehydrated,Mt!==null))return uh(Mt)?p.lanes=16:p.lanes=536870912,null;si(p)}return Mt=E.children,E=E.fallback,U?(Fi(),U=p.mode,Mt=ju({mode:"hidden",children:Mt},U),E=Ll(E,U,S,null),Mt.return=p,E.return=p,Mt.sibling=E,p.child=Mt,U=p.child,U.memoizedState=Vu(S),U.childLanes=Hu(h,ot,S),p.memoizedState=Ss,E):(Yn(p),Wc(p,Mt))}if(zt=h.memoizedState,zt!==null&&(Mt=zt.dehydrated,Mt!==null)){if(k)p.flags&256?(Yn(p),p.flags&=-257,p=Wu(h,p,S)):p.memoizedState!==null?(Fi(),p.child=h.child,p.flags|=128,p=null):(Fi(),U=E.fallback,Mt=p.mode,E=ju({mode:"visible",children:E.children},Mt),U=Ll(U,Mt,S,null),U.flags|=2,E.return=p,U.return=p,E.sibling=U,p.child=E,Ac(p,h.child,null,S),E=p.child,E.memoizedState=Vu(S),E.childLanes=Hu(h,ot,S),p.memoizedState=Ss,p=U);else if(Yn(p),uh(Mt))ot=K0(Mt).digest,E=Error(a(419)),E.stack="",E.digest=ot,Se({value:E,source:null,stack:null}),p=Wu(h,p,S);else if(oa||Go(h,p,S,!1),ot=(S&h.childLanes)!==0,oa||ot){if(ot=Pn,ot!==null){if(E=S&-S,(E&42)!==0)E=1;else switch(E){case 2:E=1;break;case 8:E=4;break;case 32:E=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:E=64;break;case 268435456:E=134217728;break;default:E=0}if(E=(E&(ot.suspendedLanes|S))!==0?0:E,E!==0&&E!==zt.retryLane)throw zt.retryLane=E,re(h,E),Na(ot,h,E),yv}Ud(Mt)||Ot(),p=Wu(h,p,S)}else Ud(Mt)?(p.flags|=128,p.child=h.child,p=Rl.bind(null,h),rx(Mt,p),p=null):(h=zt.treeContext,Is&&(rs=tv(Mt),_s=p,ti=!0,Er=null,Zr=!1,h!==null&&(Tr[Ar++]=tl,Tr[Ar++]=Yr,Tr[Ar++]=Lo,tl=h.id,Yr=h.overflow,Lo=p)),p=Wc(p,E.children),p.flags|=4096);return p}return U?(Fi(),U=E.fallback,Mt=p.mode,zt=h.child,k=zt.sibling,E=qa(zt,{mode:"hidden",children:E.children}),E.subtreeFlags=zt.subtreeFlags&31457280,k!==null?U=qa(k,U):(U=Ll(U,Mt,S,null),U.flags|=2),U.return=p,E.return=p,E.sibling=U,p.child=E,E=U,U=p.child,Mt=h.child.memoizedState,Mt===null?Mt=Vu(S):(zt=Mt.cachePool,zt!==null?(k=Qo?di._currentValue:di._currentValue2,zt=zt.parent!==k?{parent:k,pool:k}:zt):zt=bl(),Mt={baseLanes:Mt.baseLanes|S,cachePool:zt}),U.memoizedState=Mt,U.childLanes=Hu(h,ot,S),p.memoizedState=Ss,E):(Yn(p),S=h.child,h=S.sibling,S=qa(S,{mode:"visible",children:E.children}),S.return=p,S.sibling=null,h!==null&&(ot=p.deletions,ot===null?(p.deletions=[h],p.flags|=16):ot.push(h)),p.child=S,p.memoizedState=null,S)}function Wc(h,p){return p=ju({mode:"visible",children:p},h.mode),p.return=h,h.child=p}function ju(h,p){return Md(h,p,0,null)}function Wu(h,p,S){return Ac(p,h.child,null,S),h=Wc(p,p.pendingProps.children),h.flags|=2,p.memoizedState=null,h}function yd(h,p,S){h.lanes|=p;var E=h.alternate;E!==null&&(E.lanes|=p),yl(h.return,p,S)}function qu(h,p,S,E,U){var k=h.memoizedState;k===null?h.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:E,tail:S,tailMode:U}:(k.isBackwards=p,k.rendering=null,k.renderingStartTime=0,k.last=E,k.tail=S,k.tailMode=U)}function Xu(h,p,S){var E=p.pendingProps,U=E.revealOrder,k=E.tail;if(Oi(h,p,E.children,S),E=Ta.current,(E&2)!==0)E=E&1|2,p.flags|=128;else{if(h!==null&&(h.flags&128)!==0)t:for(h=p.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&yd(h,S,p);else if(h.tag===19)yd(h,S,p);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===p)break t;for(;h.sibling===null;){if(h.return===null||h.return===p)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}E&=1}switch(N(Ta,E),U){case"forwards":for(S=p.child,U=null;S!==null;)h=S.alternate,h!==null&&Hn(h)===null&&(U=S),S=S.sibling;S=U,S===null?(U=p.child,p.child=null):(U=S.sibling,S.sibling=null),qu(p,!1,U,S,k);break;case"backwards":for(S=null,U=p.child,p.child=null;U!==null;){if(h=U.alternate,h!==null&&Hn(h)===null){p.child=U;break}h=U.sibling,U.sibling=S,S=U,U=h}qu(p,!0,S,null,k);break;case"together":qu(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function go(h,p,S){if(h!==null&&(p.dependencies=h.dependencies),Lr|=p.lanes,(S&p.childLanes)===0)if(h!==null){if(Go(h,p,S,!1),(S&p.childLanes)===0)return null}else return null;if(h!==null&&p.child!==h.child)throw Error(a(153));if(p.child!==null){for(h=p.child,S=qa(h,h.pendingProps),p.child=S,S.return=p;h.sibling!==null;)h=h.sibling,S=S.sibling=qa(h,h.pendingProps),S.return=p;S.sibling=null}return p.child}function Yu(h,p){return(h.lanes&p)!==0?!0:(h=h.dependencies,!!(h!==null&&yo(h)))}function _d(h,p,S){switch(p.tag){case 3:mt(p,p.stateNode.containerInfo),ps(p,di,h.memoizedState.cache),ne();break;case 27:case 5:ht(p);break;case 4:mt(p,p.stateNode.containerInfo);break;case 10:ps(p,p.type,p.memoizedProps.value);break;case 13:var E=p.memoizedState;if(E!==null)return E.dehydrated!==null?(Yn(p),p.flags|=128,null):(S&p.child.childLanes)!==0?Gu(h,p,S):(Yn(p),h=go(h,p,S),h!==null?h.sibling:null);Yn(p);break;case 19:var U=(h.flags&128)!==0;if(E=(S&p.childLanes)!==0,E||(Go(h,p,S,!1),E=(S&p.childLanes)!==0),U){if(E)return Xu(h,p,S);p.flags|=128}if(U=p.memoizedState,U!==null&&(U.rendering=null,U.tail=null,U.lastEffect=null),N(Ta,Ta.current),E)break;return null;case 22:case 23:return p.lanes=0,Ra(h,p,S);case 24:ps(p,di,h.memoizedState.cache)}return go(h,p,S)}function qc(h,p,S){if(h!==null)if(h.memoizedProps!==p.pendingProps)oa=!0;else{if(!Yu(h,S)&&(p.flags&128)===0)return oa=!1,_d(h,p,S);oa=(h.flags&131072)!==0}else oa=!1,ti&&(p.flags&1048576)!==0&&G(p,gh,p.index);switch(p.lanes=0,p.tag){case 16:t:{h=p.pendingProps;var E=p.elementType,U=E._init;if(E=U(E._payload),p.type=E,typeof E=="function")Wr(E)?(h=ka(E,h),p.tag=1,p=ku(null,p,E,h,S)):(p.tag=0,p=Hi(null,p,E,h,S));else{if(E!=null){if(U=E.$$typeof,U===ef){p.tag=11,p=vl(null,p,E,h,S);break t}else if(U===nh){p.tag=14,p=nc(null,p,E,h,S);break t}}throw p=o(E)||E,Error(a(306,p,""))}}return p;case 0:return Hi(h,p,p.type,p.pendingProps,S);case 1:return E=p.type,U=ka(E,p.pendingProps),ku(h,p,E,U,S);case 3:t:{if(mt(p,p.stateNode.containerInfo),h===null)throw Error(a(387));var k=p.pendingProps;U=p.memoizedState,E=U.element,Ce(h,p),xe(p,k,null,S);var ot=p.memoizedState;if(k=ot.cache,ps(p,di,k),k!==U.cache&&ms(p,[di],S,!0),wt(),k=ot.element,Is&&U.isDehydrated)if(U={element:k,isDehydrated:!1,cache:ot.cache},p.updateQueue.baseState=U,p.memoizedState=U,p.flags&256){p=mo(h,p,k,S);break t}else if(k!==E){E=dt(Error(a(424)),p),Se(E),p=mo(h,p,k,S);break t}else for(Is&&(rs=$0(p.stateNode.containerInfo),_s=p,ti=!0,Er=null,Zr=!0),S=Jm(p,null,k,S),p.child=S;S;)S.flags=S.flags&-3|4096,S=S.sibling;else{if(ne(),k===E){p=go(h,p,S);break t}Oi(h,p,k,S)}p=p.child}return p;case 26:if(br)return Zi(h,p),h===null?(S=Fd(p.type,null,p.pendingProps,null))?p.memoizedState=S:ti||(p.stateNode=lx(p.type,p.pendingProps,Oo.current,p)):p.memoizedState=Fd(p.type,h.memoizedProps,p.pendingProps,h.memoizedState),null;case 27:if(as)return ht(p),h===null&&as&&ti&&(E=p.stateNode=Ym(p.type,p.pendingProps,Oo.current,Ya.current,!1),_s=p,Zr=!0,rs=Id(E)),E=p.pendingProps.children,h!==null||ti?Oi(h,p,E,S):p.child=Ac(p,null,E,S),Zi(h,p),p.child;case 5:return h===null&&ti&&(lv(p.type,p.pendingProps,Ya.current),(U=E=rs)&&(E=ev(E,p.type,p.pendingProps,Zr),E!==null?(p.stateNode=E,_s=p,rs=Id(E),Zr=!1,U=!0):U=!1),U||At(p)),ht(p),U=p.type,k=p.pendingProps,ot=h!==null?h.memoizedProps:null,E=k.children,xc(U,k)?E=null:ot!==null&&xc(U,ot)&&(p.flags|=32),p.memoizedState!==null&&(U=ga(h,p,lo,null,null,S),Qo?dn._currentValue=U:dn._currentValue2=U),Zi(h,p),Oi(h,p,E,S),p.child;case 6:return h===null&&ti&&(cv(p.pendingProps,Ya.current),(h=S=rs)&&(S=nv(S,p.pendingProps,Zr),S!==null?(p.stateNode=S,_s=p,rs=null,h=!0):h=!1),h||At(p)),null;case 13:return Gu(h,p,S);case 4:return mt(p,p.stateNode.containerInfo),E=p.pendingProps,h===null?p.child=Ac(p,null,E,S):Oi(h,p,E,S),p.child;case 11:return vl(h,p,p.type,p.pendingProps,S);case 7:return Oi(h,p,p.pendingProps,S),p.child;case 8:return Oi(h,p,p.pendingProps.children,S),p.child;case 12:return Oi(h,p,p.pendingProps.children,S),p.child;case 10:return E=p.pendingProps,ps(p,p.type,E.value),Oi(h,p,E.children,S),p.child;case 9:return U=p.type._context,E=p.pendingProps.children,_l(p),U=aa(U),E=E(U),p.flags|=1,Oi(h,p,E,S),p.child;case 14:return nc(h,p,p.type,p.pendingProps,S);case 15:return ic(h,p,p.type,p.pendingProps,S);case 19:return Xu(h,p,S);case 22:return Ra(h,p,S);case 24:return _l(p),E=aa(di),h===null?(U=jo(),U===null&&(U=Pn,k=Zu(),U.pooledCache=k,k.refCount++,k!==null&&(U.pooledCacheLanes|=S),U=k),p.memoizedState={parent:E,cache:U},be(p),ps(p,di,U)):((h.lanes&S)!==0&&(Ce(h,p),xe(p,null,null,S),wt()),U=h.memoizedState,k=p.memoizedState,U.parent!==E?(U={parent:E,cache:E},p.memoizedState=U,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=U),ps(p,di,E)):(E=k.cache,ps(p,di,E),E!==U.cache&&ms(p,[di],S,!0))),Oi(h,p,p.pendingProps.children,S),p.child;case 29:throw p.pendingProps}throw Error(a(156,p.tag))}function ps(h,p,S){Qo?(N(Zs,p._currentValue),p._currentValue=S):(N(Zs,p._currentValue2),p._currentValue2=S)}function vo(h){var p=Zs.current;Qo?h._currentValue=p:h._currentValue2=p,w(Zs)}function yl(h,p,S){for(;h!==null;){var E=h.alternate;if((h.childLanes&p)!==p?(h.childLanes|=p,E!==null&&(E.childLanes|=p)):E!==null&&(E.childLanes&p)!==p&&(E.childLanes|=p),h===S)break;h=h.return}}function ms(h,p,S,E){var U=h.child;for(U!==null&&(U.return=h);U!==null;){var k=U.dependencies;if(k!==null){var ot=U.child;k=k.firstContext;t:for(;k!==null;){var Mt=k;k=U;for(var zt=0;zt<p.length;zt++)if(Mt.context===p[zt]){k.lanes|=S,Mt=k.alternate,Mt!==null&&(Mt.lanes|=S),yl(k.return,S,h),E||(ot=null);break t}k=Mt.next}}else if(U.tag===18){if(ot=U.return,ot===null)throw Error(a(341));ot.lanes|=S,k=ot.alternate,k!==null&&(k.lanes|=S),yl(ot,S,h),ot=null}else ot=U.child;if(ot!==null)ot.return=U;else for(ot=U;ot!==null;){if(ot===h){ot=null;break}if(U=ot.sibling,U!==null){U.return=ot.return,ot=U;break}ot=ot.return}U=ot}}function Go(h,p,S,E){h=null;for(var U=p,k=!1;U!==null;){if(!k){if((U.flags&524288)!==0)k=!0;else if((U.flags&262144)!==0)break}if(U.tag===10){var ot=U.alternate;if(ot===null)throw Error(a(387));if(ot=ot.memoizedProps,ot!==null){var Mt=U.type;Mr(U.pendingProps.value,ot.value)||(h!==null?h.push(Mt):h=[Mt])}}else if(U===cf.current){if(ot=U.alternate,ot===null)throw Error(a(387));ot.memoizedState.memoizedState!==U.memoizedState.memoizedState&&(h!==null?h.push(dn):h=[dn])}U=U.return}h!==null&&ms(p,h,S,E),p.flags|=262144}function yo(h){for(h=h.firstContext;h!==null;){var p=h.context;if(!Mr(Qo?p._currentValue:p._currentValue2,h.memoizedValue))return!0;h=h.next}return!1}function _l(h){wc=h,ta=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function aa(h){return Zf(wc,h)}function xl(h,p){return wc===null&&_l(h),Zf(h,p)}function Zf(h,p){var S=Qo?p._currentValue:p._currentValue2;if(p={context:p,memoizedValue:S,next:null},ta===null){if(h===null)throw Error(a(308));ta=p,h.dependencies={lanes:0,firstContext:p},h.flags|=524288}else ta=ta.next=p;return S}function Zu(){return{controller:new _v,data:new Map,refCount:0}}function Sl(h){h.refCount--,h.refCount===0&&Fl(hu,function(){h.controller.abort()})}function jo(){var h=kl.current;return h!==null?h:Pn.pooledCache}function gs(h,p){p===null?N(kl,kl.current):N(kl,p.pool)}function bl(){var h=jo();return h===null?null:{parent:Qo?di._currentValue:di._currentValue2,pool:h}}function Os(h){h.flags|=4}function pr(h,p){if(h!==null&&h.child===p.child)return!1;if((p.flags&16)!==0)return!0;for(h=p.child;h!==null;){if((h.flags&13878)!==0||(h.subtreeFlags&13878)!==0)return!0;h=h.sibling}return!1}function Ku(h,p,S,E){if(is)for(S=p.child;S!==null;){if(S.tag===5||S.tag===6)Ko(h,S.stateNode);else if(!(S.tag===4||as&&S.tag===27)&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===p)break;for(;S.sibling===null;){if(S.return===null||S.return===p)return;S=S.return}S.sibling.return=S.return,S=S.sibling}else if(xr)for(var U=p.child;U!==null;){if(U.tag===5){var k=U.stateNode;S&&E&&(k=Im(k,U.type,U.memoizedProps)),Ko(h,k)}else if(U.tag===6)k=U.stateNode,S&&E&&(k=Pm(k,U.memoizedProps)),Ko(h,k);else if(U.tag!==4){if(U.tag===22&&U.memoizedState!==null)k=U.child,k!==null&&(k.return=U),Ku(h,U,!0,!0);else if(U.child!==null){U.child.return=U,U=U.child;continue}}if(U===p)break;for(;U.sibling===null;){if(U.return===null||U.return===p)return;U=U.return}U.sibling.return=U.return,U=U.sibling}}function mr(h,p,S,E){if(xr)for(var U=p.child;U!==null;){if(U.tag===5){var k=U.stateNode;S&&E&&(k=Im(k,U.type,U.memoizedProps)),Nm(h,k)}else if(U.tag===6)k=U.stateNode,S&&E&&(k=Pm(k,U.memoizedProps)),Nm(h,k);else if(U.tag!==4){if(U.tag===22&&U.memoizedState!==null)k=U.child,k!==null&&(k.return=U),mr(h,U,!(U.memoizedProps!==null&&U.memoizedProps.mode==="manual"),!0);else if(U.child!==null){U.child.return=U,U=U.child;continue}}if(U===p)break;for(;U.sibling===null;){if(U.return===null||U.return===p)return;U=U.return}U.sibling.return=U.return,U=U.sibling}}function ac(h,p){if(xr&&pr(h,p)){h=p.stateNode;var S=h.containerInfo,E=Nd();mr(E,p,!1,!1),h.pendingChildren=E,Os(p),Z0(S,E)}}function Ml(h,p,S,E){if(is)h.memoizedProps!==E&&Os(p);else if(xr){var U=h.stateNode,k=h.memoizedProps;if((h=pr(h,p))||k!==E){var ot=Ya.current;k=Om(U,S,k,E,!h,null),k===U?p.stateNode=U:(Nl(k,S,E,ot)&&Os(p),p.stateNode=k,h?Ku(k,p,!1,!1):Os(p))}else p.stateNode=U}}function Tl(h,p,S){if(q0(p,S)){if(h.flags|=16777216,!Ul(p,S))if(W())h.flags|=8192;else throw fu=jd,Qm}else h.flags&=-16777217}function sc(h,p){if(uv(p)){if(h.flags|=16777216,!qm(p))if(W())h.flags|=8192;else throw fu=jd,Qm}else h.flags&=-16777217}function Xc(h,p){p!==null&&(h.flags|=4),h.flags&16384&&(p=h.tag!==22?B():536870912,h.lanes|=p,Hl|=p)}function vs(h,p){if(!ti)switch(h.tailMode){case"hidden":p=h.tail;for(var S=null;p!==null;)p.alternate!==null&&(S=p),p=p.sibling;S===null?h.tail=null:S.sibling=null;break;case"collapsed":S=h.tail;for(var E=null;S!==null;)S.alternate!==null&&(E=S),S=S.sibling;E===null?p||h.tail===null?h.tail=null:h.tail.sibling=null:E.sibling=null}}function fi(h){var p=h.alternate!==null&&h.alternate.child===h.child,S=0,E=0;if(p)for(var U=h.child;U!==null;)S|=U.lanes|U.childLanes,E|=U.subtreeFlags&31457280,E|=U.flags&31457280,U.return=h,U=U.sibling;else for(U=h.child;U!==null;)S|=U.lanes|U.childLanes,E|=U.subtreeFlags,E|=U.flags,U.return=h,U=U.sibling;return h.subtreeFlags|=E,h.childLanes=S,p}function xd(h,p,S){var E=p.pendingProps;switch(ft(p),p.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fi(p),null;case 1:return fi(p),null;case 3:return S=p.stateNode,E=null,h!==null&&(E=h.memoizedState.cache),p.memoizedState.cache!==E&&(p.flags|=2048),vo(di),xt(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(h===null||h.child===null)&&(qt(p)?Os(p):h===null||h.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,Er!==null&&(wo(Er),Er=null))),ac(h,p),fi(p),null;case 26:if(br){S=p.type;var U=p.memoizedState;return h===null?(Os(p),U!==null?(fi(p),sc(p,U)):(fi(p),Tl(p,S,E))):U?U!==h.memoizedState?(Os(p),fi(p),sc(p,U)):(fi(p),p.flags&=-16777217):(is?h.memoizedProps!==E&&Os(p):Ml(h,p,S,E),fi(p),Tl(p,S,E)),null}case 27:if(as){if(_t(p),S=Oo.current,U=p.type,h!==null&&p.stateNode!=null)is?h.memoizedProps!==E&&Os(p):Ml(h,p,U,E);else{if(!E){if(p.stateNode===null)throw Error(a(166));return fi(p),null}h=Ya.current,qt(p)?$t(p,h):(h=Ym(U,E,S,h,!0),p.stateNode=h,Os(p))}return fi(p),null}case 5:if(_t(p),S=p.type,h!==null&&p.stateNode!=null)Ml(h,p,S,E);else{if(!E){if(p.stateNode===null)throw Error(a(166));return fi(p),null}h=Ya.current,qt(p)?$t(p,h):(U=Sm(S,E,Oo.current,h,p),Ku(U,p,!1,!1),p.stateNode=U,Nl(U,S,E,h)&&Os(p))}return fi(p),Tl(p,p.type,p.pendingProps),null;case 6:if(h&&p.stateNode!=null)S=h.memoizedProps,is?S!==E&&Os(p):xr&&(S!==E?(p.stateNode=wd(E,Oo.current,Ya.current,p),Os(p)):p.stateNode=h.stateNode);else{if(typeof E!="string"&&p.stateNode===null)throw Error(a(166));if(h=Oo.current,S=Ya.current,qt(p)){if(!Is)throw Error(a(176));if(h=p.stateNode,S=p.memoizedProps,E=null,U=_s,U!==null)switch(U.tag){case 27:case 5:E=U.memoizedProps}av(h,S,p,E)||At(p)}else p.stateNode=wd(E,h,S,p)}return fi(p),null;case 13:if(E=p.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(U=qt(p),E!==null&&E.dehydrated!==null){if(h===null){if(!U)throw Error(a(318));if(!Is)throw Error(a(344));if(U=p.memoizedState,U=U!==null?U.dehydrated:null,!U)throw Error(a(317));af(U,p)}else ne(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;fi(p),U=!1}else Er!==null&&(wo(Er),Er=null),U=!0;if(!U)return p.flags&256?(si(p),p):(si(p),null)}if(si(p),(p.flags&128)!==0)return p.lanes=S,p;if(S=E!==null,h=h!==null&&h.memoizedState!==null,S){E=p.child,U=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(U=E.alternate.memoizedState.cachePool.pool);var k=null;E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(k=E.memoizedState.cachePool.pool),k!==U&&(E.flags|=2048)}return S!==h&&S&&(p.child.flags|=8192),Xc(p,p.updateQueue),fi(p),null;case 4:return xt(),ac(h,p),h===null&&Tm(p.stateNode.containerInfo),fi(p),null;case 10:return vo(p.type),fi(p),null;case 19:if(w(Ta),U=p.memoizedState,U===null)return fi(p),null;if(E=(p.flags&128)!==0,k=U.rendering,k===null)if(E)vs(U,!1);else{if(Wn!==0||h!==null&&(h.flags&128)!==0)for(h=p.child;h!==null;){if(k=Hn(h),k!==null){for(p.flags|=128,vs(U,!1),h=k.updateQueue,p.updateQueue=h,Xc(p,h),p.subtreeFlags=0,h=S,S=p.child;S!==null;)Dl(S,h),S=S.sibling;return N(Ta,Ta.current&1|2),p.child}h=h.sibling}U.tail!==null&&ss()>Wi&&(p.flags|=128,E=!0,vs(U,!1),p.lanes=4194304)}else{if(!E)if(h=Hn(k),h!==null){if(p.flags|=128,E=!0,h=h.updateQueue,p.updateQueue=h,Xc(p,h),vs(U,!0),U.tail===null&&U.tailMode==="hidden"&&!k.alternate&&!ti)return fi(p),null}else 2*ss()-U.renderingStartTime>Wi&&S!==536870912&&(p.flags|=128,E=!0,vs(U,!1),p.lanes=4194304);U.isBackwards?(k.sibling=p.child,p.child=k):(h=U.last,h!==null?h.sibling=k:p.child=k,U.last=k)}return U.tail!==null?(p=U.tail,U.rendering=p,U.tail=p.sibling,U.renderingStartTime=ss(),p.sibling=null,h=Ta.current,N(Ta,E?h&1|2:h&1),p):(fi(p),null);case 22:case 23:return si(p),Ca(),E=p.memoizedState!==null,h!==null?h.memoizedState!==null!==E&&(p.flags|=8192):E&&(p.flags|=8192),E?(S&536870912)!==0&&(p.flags&128)===0&&(fi(p),p.subtreeFlags&6&&(p.flags|=8192)):fi(p),S=p.updateQueue,S!==null&&Xc(p,S.retryQueue),S=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(S=h.memoizedState.cachePool.pool),E=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(E=p.memoizedState.cachePool.pool),E!==S&&(p.flags|=2048),h!==null&&w(kl),null;case 24:return S=null,h!==null&&(S=h.memoizedState.cache),p.memoizedState.cache!==S&&(p.flags|=2048),vo(di),fi(p),null;case 25:return null}throw Error(a(156,p.tag))}function Qu(h,p){switch(ft(p),p.tag){case 1:return h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 3:return vo(di),xt(),h=p.flags,(h&65536)!==0&&(h&128)===0?(p.flags=h&-65537|128,p):null;case 26:case 27:case 5:return _t(p),null;case 13:if(si(p),h=p.memoizedState,h!==null&&h.dehydrated!==null){if(p.alternate===null)throw Error(a(340));ne()}return h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 19:return w(Ta),null;case 4:return xt(),null;case 10:return vo(p.type),null;case 22:case 23:return si(p),Ca(),h!==null&&w(kl),h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 24:return vo(di),null;case 25:return null;default:return null}}function Kf(h,p){switch(ft(p),p.tag){case 3:vo(di),xt();break;case 26:case 27:case 5:_t(p);break;case 4:xt();break;case 13:si(p);break;case 19:w(Ta);break;case 10:vo(p.type);break;case 22:case 23:si(p),Ca(),h!==null&&w(kl);break;case 24:vo(di)}}function Ns(h,p){try{var S=p.updateQueue,E=S!==null?S.lastEffect:null;if(E!==null){var U=E.next;S=U;do{if((S.tag&h)===h){E=void 0;var k=S.create,ot=S.inst;E=k(),ot.destroy=E}S=S.next}while(S!==U)}}catch(Mt){In(p,p.return,Mt)}}function Wo(h,p,S){try{var E=p.updateQueue,U=E!==null?E.lastEffect:null;if(U!==null){var k=U.next;E=k;do{if((E.tag&h)===h){var ot=E.inst,Mt=ot.destroy;if(Mt!==void 0){ot.destroy=void 0,U=p;var zt=S;try{Mt()}catch(pe){In(U,zt,pe)}}}E=E.next}while(E!==k)}}catch(pe){In(p,p.return,pe)}}function Al(h){var p=h.updateQueue;if(p!==null){var S=h.stateNode;try{ie(p,S)}catch(E){In(h,h.return,E)}}}function Sd(h,p,S){S.props=ka(h.type,h.memoizedProps),S.state=h.memoizedState;try{S.componentWillUnmount()}catch(E){In(h,p,E)}}function $a(h,p){try{var S=h.ref;if(S!==null){var E=h.stateNode;switch(h.tag){case 26:case 27:case 5:var U=nf(E);break;default:U=E}typeof S=="function"?h.refCleanup=S(U):S.current=U}}catch(k){In(h,p,k)}}function hi(h,p){var S=h.ref,E=h.refCleanup;if(S!==null)if(typeof E=="function")try{E()}catch(U){In(h,p,U)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof S=="function")try{S(null)}catch(U){In(h,p,U)}else S.current=null}function El(h){var p=h.type,S=h.memoizedProps,E=h.stateNode;try{sx(E,p,S,h)}catch(U){In(h,h.return,U)}}function Yc(h,p,S){try{Cm(h.stateNode,h.type,S,p,h)}catch(E){In(h,h.return,E)}}function rc(h){return h.tag===5||h.tag===3||(br?h.tag===26:!1)||(as?h.tag===27:!1)||h.tag===4}function oc(h){t:for(;;){for(;h.sibling===null;){if(h.return===null||rc(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&(!as||h.tag!==27)&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue t;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function wl(h,p,S){var E=h.tag;if(E===5||E===6)h=h.stateNode,p?Dm(S,h,p):X0(S,h);else if(!(E===4||as&&E===27)&&(h=h.child,h!==null))for(wl(h,p,S),h=h.sibling;h!==null;)wl(h,p,S),h=h.sibling}function gr(h,p,S){var E=h.tag;if(E===5||E===6)h=h.stateNode,p?Rm(S,h,p):wm(S,h);else if(!(E===4||as&&E===27)&&(h=h.child,h!==null))for(gr(h,p,S),h=h.sibling;h!==null;)gr(h,p,S),h=h.sibling}function Zc(h,p,S){h=h.containerInfo;try{Um(h,S)}catch(E){In(p,p.return,E)}}function qo(h,p){for(_c(h.containerInfo),ea=p;ea!==null;)if(h=ea,p=h.child,(h.subtreeFlags&1028)!==0&&p!==null)p.return=h,ea=p;else for(;ea!==null;){h=ea;var S=h.alternate;switch(p=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((p&1024)!==0&&S!==null){p=void 0;var E=h,U=S.memoizedProps;S=S.memoizedState;var k=E.stateNode;try{var ot=ka(E.type,U,E.elementType===E.type);p=k.getSnapshotBeforeUpdate(ot,S),k.__reactInternalSnapshotBeforeUpdate=p}catch(Mt){In(E,E.return,Mt)}}break;case 3:(p&1024)!==0&&is&&Od(h.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((p&1024)!==0)throw Error(a(163))}if(p=h.sibling,p!==null){p.return=h.return,ea=p;break}ea=h.return}return ot=du,du=!1,ot}function Kc(h,p,S){var E=S.flags;switch(S.tag){case 0:case 11:case 15:Us(h,S),E&4&&Ns(5,S);break;case 1:if(Us(h,S),E&4)if(h=S.stateNode,p===null)try{h.componentDidMount()}catch(Mt){In(S,S.return,Mt)}else{var U=ka(S.type,p.memoizedProps);p=p.memoizedState;try{h.componentDidUpdate(U,p,h.__reactInternalSnapshotBeforeUpdate)}catch(Mt){In(S,S.return,Mt)}}E&64&&Al(S),E&512&&$a(S,S.return);break;case 3:if(Us(h,S),E&64&&(E=S.updateQueue,E!==null)){if(h=null,S.child!==null)switch(S.child.tag){case 27:case 5:h=nf(S.child.stateNode);break;case 1:h=S.child.stateNode}try{ie(E,h)}catch(Mt){In(S,S.return,Mt)}}break;case 26:if(br){Us(h,S),E&512&&$a(S,S.return);break}case 27:case 5:Us(h,S),p===null&&E&4&&El(S),E&512&&$a(S,S.return);break;case 12:Us(h,S);break;case 13:Us(h,S),E&4&&_o(h,S);break;case 22:if(U=S.memoizedState!==null||Ia,!U){p=p!==null&&p.memoizedState!==null||ji;var k=Ia,ot=ji;Ia=U,(ji=p)&&!ot?xo(h,S,(S.subtreeFlags&8772)!==0):Us(h,S),Ia=k,ji=ot}E&512&&(S.memoizedProps.mode==="manual"?$a(S,S.return):hi(S,S.return));break;default:Us(h,S)}}function lc(h){var p=h.alternate;p!==null&&(h.alternate=null,lc(p)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(p=h.stateNode,p!==null&&Am(p)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function Ha(h,p,S){for(S=S.child;S!==null;)Ju(h,p,S),S=S.sibling}function Ju(h,p,S){if(Xs&&typeof Xs.onCommitFiberUnmount=="function")try{Xs.onCommitFiberUnmount(lf,S)}catch{}switch(S.tag){case 26:if(br){ji||hi(S,p),Ha(h,p,S),S.memoizedState?Vm(S.memoizedState):S.stateNode&&jm(S.stateNode);break}case 27:if(as){ji||hi(S,p);var E=la,U=Ks;la=S.stateNode,Ha(h,p,S),fv(S.stateNode),la=E,Ks=U;break}case 5:ji||hi(S,p);case 6:if(is){if(E=la,U=Ks,la=null,Ha(h,p,S),la=E,Ks=U,la!==null)if(Ks)try{sa(la,S.stateNode)}catch(k){In(S,p,k)}else try{Ps(la,S.stateNode)}catch(k){In(S,p,k)}}else Ha(h,p,S);break;case 18:is&&la!==null&&(Ks?Bm(la,S.stateNode):rv(la,S.stateNode));break;case 4:is?(E=la,U=Ks,la=S.stateNode.containerInfo,Ks=!0,Ha(h,p,S),la=E,Ks=U):(xr&&Zc(S.stateNode,S,Nd()),Ha(h,p,S));break;case 0:case 11:case 14:case 15:ji||Wo(2,S,p),ji||Wo(4,S,p),Ha(h,p,S);break;case 1:ji||(hi(S,p),E=S.stateNode,typeof E.componentWillUnmount=="function"&&Sd(S,p,E)),Ha(h,p,S);break;case 21:Ha(h,p,S);break;case 22:ji||hi(S,p),ji=(E=ji)||S.memoizedState!==null,Ha(h,p,S),ji=E;break;default:Ha(h,p,S)}}function _o(h,p){if(Is&&p.memoizedState===null&&(h=p.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{zd(h)}catch(S){In(p,p.return,S)}}function cc(h){switch(h.tag){case 13:case 19:var p=h.stateNode;return p===null&&(p=h.stateNode=new pf),p;case 22:return h=h.stateNode,p=h._retryCache,p===null&&(p=h._retryCache=new pf),p;default:throw Error(a(435,h.tag))}}function uc(h,p){var S=cc(h);p.forEach(function(E){var U=th.bind(null,h,E);S.has(E)||(S.add(E),E.then(U,U))})}function ts(h,p){var S=p.deletions;if(S!==null)for(var E=0;E<S.length;E++){var U=S[E],k=h,ot=p;if(is){var Mt=ot;t:for(;Mt!==null;){switch(Mt.tag){case 27:case 5:la=Mt.stateNode,Ks=!1;break t;case 3:la=Mt.stateNode.containerInfo,Ks=!0;break t;case 4:la=Mt.stateNode.containerInfo,Ks=!0;break t}Mt=Mt.return}if(la===null)throw Error(a(160));Ju(k,ot,U),la=null,Ks=!1}else Ju(k,ot,U);k=U.alternate,k!==null&&(k.return=null),U.return=null}if(p.subtreeFlags&13878)for(p=p.child;p!==null;)Da(p,h),p=p.sibling}function Da(h,p){var S=h.alternate,E=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:ts(p,h),La(h),E&4&&(Wo(3,h,h.return),Ns(3,h),Wo(5,h,h.return));break;case 1:ts(p,h),La(h),E&512&&(ji||S===null||hi(S,S.return)),E&64&&Ia&&(h=h.updateQueue,h!==null&&(E=h.callbacks,E!==null&&(S=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=S===null?E:S.concat(E))));break;case 26:if(br){var U=zs;ts(p,h),La(h),E&512&&(ji||S===null||hi(S,S.return)),E&4&&(E=S!==null?S.memoizedState:null,p=h.memoizedState,S===null?p===null?h.stateNode===null?h.stateNode=Hm(U,h.type,h.memoizedProps,h):Gm(U,h.type,h.stateNode):h.stateNode=km(U,p,h.memoizedProps):E!==p?(E===null?S.stateNode!==null&&jm(S.stateNode):Vm(E),p===null?Gm(U,h.type,h.stateNode):km(U,p,h.memoizedProps)):p===null&&h.stateNode!==null&&Yc(h,h.memoizedProps,S.memoizedProps));break}case 27:if(as&&E&4&&h.alternate===null){U=h.stateNode;var k=h.memoizedProps;try{cx(U),ux(h.type,k,U,h)}catch(we){In(h,h.return,we)}}case 5:if(ts(p,h),La(h),E&512&&(ji||S===null||hi(S,S.return)),is){if(h.flags&32){p=h.stateNode;try{lh(p)}catch(we){In(h,h.return,we)}}E&4&&h.stateNode!=null&&(p=h.memoizedProps,Yc(h,p,S!==null?S.memoizedProps:p)),E&1024&&(Cc=!0)}break;case 6:if(ts(p,h),La(h),E&4&&is){if(h.stateNode===null)throw Error(a(162));E=h.memoizedProps,S=S!==null?S.memoizedProps:E,p=h.stateNode;try{Y0(p,S,E)}catch(we){In(h,h.return,we)}}break;case 3:if(br?(Wm(),U=zs,zs=Bd(p.containerInfo),ts(p,h),zs=U):ts(p,h),La(h),E&4){if(is&&Is&&S!==null&&S.memoizedState.isDehydrated)try{Pd(p.containerInfo)}catch(we){In(h,h.return,we)}if(xr){E=p.containerInfo,S=p.pendingChildren;try{Um(E,S)}catch(we){In(h,h.return,we)}}}Cc&&(Cc=!1,Qf(h));break;case 4:br?(S=zs,zs=Bd(h.stateNode.containerInfo),ts(p,h),La(h),zs=S):(ts(p,h),La(h)),E&4&&xr&&Zc(h.stateNode,h,h.stateNode.pendingChildren);break;case 12:ts(p,h),La(h);break;case 13:ts(p,h),La(h),h.child.flags&8192&&h.memoizedState!==null!=(S!==null&&S.memoizedState!==null)&&(al=ss()),E&4&&(E=h.updateQueue,E!==null&&(h.updateQueue=null,uc(h,E)));break;case 22:E&512&&(ji||S===null||hi(S,S.return)),U=h.memoizedState!==null;var ot=S!==null&&S.memoizedState!==null,Mt=Ia,zt=ji;if(Ia=Mt||U,ji=zt||ot,ts(p,h),ji=zt,Ia=Mt,La(h),p=h.stateNode,p._current=h,p._visibility&=-3,p._visibility|=p._pendingVisibility&2,E&8192&&(p._visibility=U?p._visibility&-2:p._visibility|1,U&&(p=Ia||ji,S===null||ot||p||fc(h)),is&&(h.memoizedProps===null||h.memoizedProps.mode!=="manual"))){t:if(S=null,is)for(p=h;;){if(p.tag===5||br&&p.tag===26||as&&p.tag===27){if(S===null){ot=S=p;try{k=ot.stateNode,U?ch(k):Lm(ot.stateNode,ot.memoizedProps)}catch(we){In(ot,ot.return,we)}}}else if(p.tag===6){if(S===null){ot=p;try{var pe=ot.stateNode;U?Ld(pe):Il(pe,ot.memoizedProps)}catch(we){In(ot,ot.return,we)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===h)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===h)break t;for(;p.sibling===null;){if(p.return===null||p.return===h)break t;S===p&&(S=null),p=p.return}S===p&&(S=null),p.sibling.return=p.return,p=p.sibling}}E&4&&(E=h.updateQueue,E!==null&&(S=E.retryQueue,S!==null&&(E.retryQueue=null,uc(h,S))));break;case 19:ts(p,h),La(h),E&4&&(E=h.updateQueue,E!==null&&(h.updateQueue=null,uc(h,E)));break;case 21:break;default:ts(p,h),La(h)}}function La(h){var p=h.flags;if(p&2){try{if(is&&(!as||h.tag!==27)){t:{for(var S=h.return;S!==null;){if(rc(S)){var E=S;break t}S=S.return}throw Error(a(160))}switch(E.tag){case 27:if(as){var U=E.stateNode,k=oc(h);gr(h,k,U);break}case 5:var ot=E.stateNode;E.flags&32&&(lh(ot),E.flags&=-33);var Mt=oc(h);gr(h,Mt,ot);break;case 3:case 4:var zt=E.stateNode.containerInfo,pe=oc(h);wl(h,pe,zt);break;default:throw Error(a(161))}}}catch(we){In(h,h.return,we)}h.flags&=-3}p&4096&&(h.flags&=-4097)}function Qf(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var p=h;Qf(p),p.tag===5&&p.flags&1024&&bi(p.stateNode),h=h.sibling}}function Us(h,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)Kc(h,p.alternate,p),p=p.sibling}function fc(h){for(h=h.child;h!==null;){var p=h;switch(p.tag){case 0:case 11:case 14:case 15:Wo(4,p,p.return),fc(p);break;case 1:hi(p,p.return);var S=p.stateNode;typeof S.componentWillUnmount=="function"&&Sd(p,p.return,S),fc(p);break;case 26:case 27:case 5:hi(p,p.return),fc(p);break;case 22:hi(p,p.return),p.memoizedState===null&&fc(p);break;default:fc(p)}h=h.sibling}}function xo(h,p,S){for(S=S&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var E=p.alternate,U=h,k=p,ot=k.flags;switch(k.tag){case 0:case 11:case 15:xo(U,k,S),Ns(4,k);break;case 1:if(xo(U,k,S),E=k,U=E.stateNode,typeof U.componentDidMount=="function")try{U.componentDidMount()}catch(pe){In(E,E.return,pe)}if(E=k,U=E.updateQueue,U!==null){var Mt=E.stateNode;try{var zt=U.shared.hiddenCallbacks;if(zt!==null)for(U.shared.hiddenCallbacks=null,U=0;U<zt.length;U++)St(zt[U],Mt)}catch(pe){In(E,E.return,pe)}}S&&ot&64&&Al(k),$a(k,k.return);break;case 26:case 27:case 5:xo(U,k,S),S&&E===null&&ot&4&&El(k),$a(k,k.return);break;case 12:xo(U,k,S);break;case 13:xo(U,k,S),S&&ot&4&&_o(U,k);break;case 22:k.memoizedState===null&&xo(U,k,S),$a(k,k.return);break;default:xo(U,k,S)}p=p.sibling}}function Jf(h,p){var S=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(S=h.memoizedState.cachePool.pool),h=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(h=p.memoizedState.cachePool.pool),h!==S&&(h!=null&&h.refCount++,S!=null&&Sl(S))}function Xo(h,p){h=null,p.alternate!==null&&(h=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==h&&(p.refCount++,h!=null&&Sl(h))}function So(h,p,S,E){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)bo(h,p,S,E),p=p.sibling}function bo(h,p,S,E){var U=p.flags;switch(p.tag){case 0:case 11:case 15:So(h,p,S,E),U&2048&&Ns(9,p);break;case 3:So(h,p,S,E),U&2048&&(h=null,p.alternate!==null&&(h=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==h&&(p.refCount++,h!=null&&Sl(h)));break;case 12:if(U&2048){So(h,p,S,E),h=p.stateNode;try{var k=p.memoizedProps,ot=k.id,Mt=k.onPostCommit;typeof Mt=="function"&&Mt(ot,p.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch(zt){In(p,p.return,zt)}}else So(h,p,S,E);break;case 23:break;case 22:k=p.stateNode,p.memoizedState!==null?k._visibility&4?So(h,p,S,E):Mo(h,p):k._visibility&4?So(h,p,S,E):(k._visibility|=4,Oa(h,p,S,E,(p.subtreeFlags&10256)!==0)),U&2048&&Jf(p.alternate,p);break;case 24:So(h,p,S,E),U&2048&&Xo(p.alternate,p);break;default:So(h,p,S,E)}}function Oa(h,p,S,E,U){for(U=U&&(p.subtreeFlags&10256)!==0,p=p.child;p!==null;){var k=h,ot=p,Mt=S,zt=E,pe=ot.flags;switch(ot.tag){case 0:case 11:case 15:Oa(k,ot,Mt,zt,U),Ns(8,ot);break;case 23:break;case 22:var we=ot.stateNode;ot.memoizedState!==null?we._visibility&4?Oa(k,ot,Mt,zt,U):Mo(k,ot):(we._visibility|=4,Oa(k,ot,Mt,zt,U)),U&&pe&2048&&Jf(ot.alternate,ot);break;case 24:Oa(k,ot,Mt,zt,U),U&&pe&2048&&Xo(ot.alternate,ot);break;default:Oa(k,ot,Mt,zt,U)}p=p.sibling}}function Mo(h,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var S=h,E=p,U=E.flags;switch(E.tag){case 22:Mo(S,E),U&2048&&Jf(E.alternate,E);break;case 24:Mo(S,E),U&2048&&Xo(E.alternate,E);break;default:Mo(S,E)}p=p.sibling}}function xa(h){if(h.subtreeFlags&pu)for(h=h.child;h!==null;)es(h),h=h.sibling}function es(h){switch(h.tag){case 26:xa(h),h.flags&pu&&(h.memoizedState!==null?Xm(zs,h.memoizedState,h.memoizedProps):Ki(h.type,h.memoizedProps));break;case 5:xa(h),h.flags&pu&&Ki(h.type,h.memoizedProps);break;case 3:case 4:if(br){var p=zs;zs=Bd(h.stateNode.containerInfo),xa(h),zs=p}else xa(h);break;case 22:h.memoizedState===null&&(p=h.alternate,p!==null&&p.memoizedState!==null?(p=pu,pu=16777216,xa(h),pu=p):xa(h));break;default:xa(h)}}function Qc(h){var p=h.alternate;if(p!==null&&(h=p.child,h!==null)){p.child=null;do p=h.sibling,h.sibling=null,h=p;while(h!==null)}}function To(h){var p=h.deletions;if((h.flags&16)!==0){if(p!==null)for(var S=0;S<p.length;S++){var E=p[S];ea=E,vr(E,h)}Qc(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)Ao(h),h=h.sibling}function Ao(h){switch(h.tag){case 0:case 11:case 15:To(h),h.flags&2048&&Wo(9,h,h.return);break;case 3:To(h);break;case 12:To(h);break;case 22:var p=h.stateNode;h.memoizedState!==null&&p._visibility&4&&(h.return===null||h.return.tag!==13)?(p._visibility&=-5,hc(h)):To(h);break;default:To(h)}}function hc(h){var p=h.deletions;if((h.flags&16)!==0){if(p!==null)for(var S=0;S<p.length;S++){var E=p[S];ea=E,vr(E,h)}Qc(h)}for(h=h.child;h!==null;){switch(p=h,p.tag){case 0:case 11:case 15:Wo(8,p,p.return),hc(p);break;case 22:S=p.stateNode,S._visibility&4&&(S._visibility&=-5,hc(p));break;default:hc(p)}h=h.sibling}}function vr(h,p){for(;ea!==null;){var S=ea;switch(S.tag){case 0:case 11:case 15:Wo(8,S,p);break;case 23:case 22:if(S.memoizedState!==null&&S.memoizedState.cachePool!==null){var E=S.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:Sl(S.memoizedState.cache)}if(E=S.child,E!==null)E.return=S,ea=E;else t:for(S=h;ea!==null;){E=ea;var U=E.sibling,k=E.return;if(lc(E),E===S){ea=null;break t}if(U!==null){U.return=k,ea=U;break t}ea=k}}}function Yo(h){var p=Mm(h);if(p!=null){if(typeof p.memoizedProps["data-testname"]!="string")throw Error(a(364));return p}if(h=lu(h),h===null)throw Error(a(362));return h.stateNode.current}function Cl(h,p){var S=h.tag;switch(p.$$typeof){case Th:if(h.type===p.value)return!0;break;case Zd:t:{for(p=p.value,h=[h,0],S=0;S<h.length;){var E=h[S++],U=E.tag,k=h[S++],ot=p[k];if(U!==5&&U!==26&&U!==27||!$o(E)){for(;ot!=null&&Cl(E,ot);)k++,ot=p[k];if(k===p.length){p=!0;break t}else for(E=E.child;E!==null;)h.push(E,k),E=E.sibling}}p=!1}return p;case Kd:if((S===5||S===26||S===27)&&ax(h.stateNode,p.value))return!0;break;case pi:if((S===5||S===6||S===26||S===27)&&(h=oh(h),h!==null&&0<=h.indexOf(p.value)))return!0;break;case jn:if((S===5||S===26||S===27)&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===p.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function Eo(h){switch(h.$$typeof){case Th:return"<"+(o(h.value)||"Unknown")+">";case Zd:return":has("+(Eo(h)||"")+")";case Kd:return'[role="'+h.value+'"]';case pi:return'"'+h.value+'"';case jn:return'[data-testname="'+h.value+'"]';default:throw Error(a(365))}}function bd(h,p){var S=[];h=[h,0];for(var E=0;E<h.length;){var U=h[E++],k=U.tag,ot=h[E++],Mt=p[ot];if(k!==5&&k!==26&&k!==27||!$o(U)){for(;Mt!=null&&Cl(U,Mt);)ot++,Mt=p[ot];if(ot===p.length)S.push(U);else for(U=U.child;U!==null;)h.push(U,ot),U=U.sibling}}return S}function Ga(h,p){if(!Jo)throw Error(a(363));h=Yo(h),h=bd(h,p),p=[],h=Array.from(h);for(var S=0;S<h.length;){var E=h[S++],U=E.tag;if(U===5||U===26||U===27)$o(E)||p.push(E.stateNode);else for(E=E.child;E!==null;)h.push(E),E=E.sibling}return p}function ja(){if((sn&2)!==0&&Nn!==0)return Nn&-Nn;if(un.T!==null){var h=Ys;return h!==0?h:Dt()}return Xr()}function yr(){Qs===0&&(Qs=(Nn&536870912)===0||ti?Z():536870912);var h=Rr.current;return h!==null&&(h.flags|=32),Qs}function Na(h,p,S){(h===Pn&&Mi===2||h.cancelPendingCommit!==null)&&(M(h,0),_r(h,Nn,Qs,!1)),Q(h,S),((sn&2)===0||h!==Pn)&&(h===Pn&&((sn&2)===0&&(Io|=S),Wn===4&&_r(h,Nn,Qs,!1)),Zt(h))}function dc(h,p,S){if((sn&6)!==0)throw Error(a(327));var E=!S&&(p&60)===0&&(p&h.expiredLanes)===0||H(h,p),U=E?Ne(h,p):Yt(h,p,!0),k=E;do{if(U===0){Dr&&!E&&_r(h,p,0,!1);break}else if(U===6)_r(h,p,0,!mi);else{if(S=h.current.alternate,k&&!$f(S)){U=Yt(h,p,!1),k=!1;continue}if(U===2){if(k=p,h.errorRecoveryDisabledLanes&k)var ot=0;else ot=h.pendingLanes&-536870913,ot=ot!==0?ot:ot&536870912?536870912:0;if(ot!==0){p=ot;t:{var Mt=h;U=mf;var zt=Is&&Mt.current.memoizedState.isDehydrated;if(zt&&(M(Mt,ot).flags|=256),ot=Yt(Mt,ot,!1),ot!==2){if(Vl&&!zt){Mt.errorRecoveryDisabledLanes|=k,Io|=k,U=4;break t}k=Or,Or=U,k!==null&&wo(k)}U=ot}if(k=!1,U!==2)continue}}if(U===1){M(h,0),_r(h,p,0,!0);break}t:{switch(E=h,U){case 0:case 1:throw Error(a(345));case 4:if((p&4194176)===p){_r(E,p,Qs,!mi);break t}break;case 2:Or=null;break;case 3:case 5:break;default:throw Error(a(329))}if(E.finishedWork=S,E.finishedLanes=p,(p&62914560)===p&&(k=al+300-ss(),10<k)){if(_r(E,p,Qs,!mi),F(E,0)!==0)break t;E.timeoutHandle=bm(Jc.bind(null,E,S,Or,Po,gf,p,Qs,Io,Hl,mi,2,-0,0),k);break t}Jc(E,S,Or,Po,gf,p,Qs,Io,Hl,mi,0,-0,0)}}break}while(!0);Zt(h)}function wo(h){Or===null?Or=h:Or.push.apply(Or,h)}function Jc(h,p,S,E,U,k,ot,Mt,zt,pe,we,Be,Ge){var _n=p.subtreeFlags;if((_n&8192||(_n&16785408)===16785408)&&(Sr(),es(p),p=Cd(),p!==null)){h.cancelPendingCommit=p($n.bind(null,h,S,E,U,ot,Mt,zt,1,Be,Ge)),_r(h,k,ot,!pe);return}$n(h,S,E,U,ot,Mt,zt,we,Be,Ge)}function $f(h){for(var p=h;;){var S=p.tag;if((S===0||S===11||S===15)&&p.flags&16384&&(S=p.updateQueue,S!==null&&(S=S.stores,S!==null)))for(var E=0;E<S.length;E++){var U=S[E],k=U.getSnapshot;U=U.value;try{if(!Mr(k(),U))return!1}catch{return!1}}if(S=p.child,p.subtreeFlags&16384&&S!==null)S.return=p,p=S;else{if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function _r(h,p,S,E){p&=~bs,p&=~Io,h.suspendedLanes|=p,h.pingedLanes&=~p,E&&(h.warmLanes|=p),E=h.expirationTimes;for(var U=p;0<U;){var k=31-qs(U),ot=1<<k;E[k]=-1,U&=~ot}S!==0&&rt(h,S,p)}function u(){return(sn&6)===0?(Lt(0),!1):!0}function v(){if(Sn!==null){if(Mi===0)var h=Sn.return;else h=Sn,ta=wc=null,Gr(h),el=null,Kr=0,h=Sn;for(;h!==null;)Kf(h.alternate,h),h=h.return;Sn=null}}function M(h,p){h.finishedWork=null,h.finishedLanes=0;var S=h.timeoutHandle;S!==ou&&(h.timeoutHandle=ou,rh(S)),S=h.cancelPendingCommit,S!==null&&(h.cancelPendingCommit=null,S()),v(),Pn=h,Sn=S=qa(h.current,null),Nn=p,Mi=0,ca=null,mi=!1,Dr=H(h,p),Vl=!1,Hl=Qs=bs=Io=Lr=Wn=0,Or=mf=null,gf=!1,(p&8)!==0&&(p|=p&32);var E=h.entangledLanes;if(E!==0)for(h=h.entanglements,E&=p;0<E;){var U=31-qs(E),k=1<<U;p|=h[U],E&=~k}return Uo=p,Nt(),S}function P(h,p){Rn=null,un.H=ei,p===xi?(p=me(),Mi=3):p===Qm?(p=me(),Mi=4):Mi=p===yv?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,ca=p,Sn===null&&(Wn=1,yn(h,dt(p,h.current)))}function W(){var h=Rr.current;return h===null?!0:(Nn&4194176)===Nn?Qr===null:(Nn&62914560)===Nn||(Nn&536870912)!==0?h===Qr:!1}function tt(){var h=un.H;return un.H=ei,h===null?ei:h}function bt(){var h=un.A;return un.A=Yd,h}function Ot(){Wn=4,mi||(Nn&4194176)!==Nn&&Rr.current!==null||(Dr=!0),(Lr&134217727)===0&&(Io&134217727)===0||Pn===null||_r(Pn,Nn,Qs,!1)}function Yt(h,p,S){var E=sn;sn|=2;var U=tt(),k=bt();(Pn!==h||Nn!==p)&&(Po=null,M(h,p)),p=!1;var ot=Wn;t:do try{if(Mi!==0&&Sn!==null){var Mt=Sn,zt=ca;switch(Mi){case 8:v(),ot=6;break t;case 3:case 2:case 6:Rr.current===null&&(p=!0);var pe=Mi;if(Mi=0,ca=null,wi(h,Mt,zt,pe),S&&Dr){ot=0;break t}break;default:pe=Mi,Mi=0,ca=null,wi(h,Mt,zt,pe)}}ye(),ot=Wn;break}catch(we){P(h,we)}while(!0);return p&&h.shellSuspendCounter++,ta=wc=null,sn=E,un.H=U,un.A=k,Sn===null&&(Pn=null,Nn=0,Nt()),ot}function ye(){for(;Sn!==null;)Tn(Sn)}function Ne(h,p){var S=sn;sn|=2;var E=tt(),U=bt();Pn!==h||Nn!==p?(Po=null,Wi=ss()+500,M(h,p)):Dr=H(h,p);t:do try{if(Mi!==0&&Sn!==null){p=Sn;var k=ca;e:switch(Mi){case 1:Mi=0,ca=null,wi(h,p,k,1);break;case 2:if(Ae(k)){Mi=0,ca=null,Sa(p);break}p=function(){Mi===2&&Pn===h&&(Mi=7),Zt(h)},k.then(p,p);break t;case 3:Mi=7;break t;case 4:Mi=5;break t;case 7:Ae(k)?(Mi=0,ca=null,Sa(p)):(Mi=0,ca=null,wi(h,p,k,7));break;case 5:var ot=null;switch(Sn.tag){case 26:ot=Sn.memoizedState;case 5:case 27:var Mt=Sn,zt=Mt.type,pe=Mt.pendingProps;if(ot?qm(ot):Ul(zt,pe)){Mi=0,ca=null;var we=Mt.sibling;if(we!==null)Sn=we;else{var Be=Mt.return;Be!==null?(Sn=Be,Wa(Be)):Sn=null}break e}}Mi=0,ca=null,wi(h,p,k,5);break;case 6:Mi=0,ca=null,wi(h,p,k,6);break;case 8:v(),Wn=6;break t;default:throw Error(a(462))}}$e();break}catch(Ge){P(h,Ge)}while(!0);return ta=wc=null,un.H=E,un.A=U,sn=S,Sn!==null?0:(Pn=null,Nn=0,Nt(),Wn)}function $e(){for(;Sn!==null&&!dv();)Tn(Sn)}function Tn(h){var p=qc(h.alternate,h,Uo);h.memoizedProps=h.pendingProps,p===null?Wa(h):Sn=p}function Sa(h){var p=h,S=p.alternate;switch(p.tag){case 15:case 0:p=jc(S,p,p.pendingProps,p.type,void 0,Nn);break;case 11:p=jc(S,p,p.pendingProps,p.type.render,p.ref,Nn);break;case 5:Gr(p);default:Kf(S,p),p=Sn=Dl(p,Uo),p=qc(S,p,Uo)}h.memoizedProps=h.pendingProps,p===null?Wa(h):Sn=p}function wi(h,p,S,E){ta=wc=null,Gr(p),el=null,Kr=0;var U=p.return;try{if(Fu(h,U,p,S,Nn)){Wn=1,yn(h,dt(S,h.current)),Sn=null;return}}catch(k){if(U!==null)throw Sn=U,k;Wn=1,yn(h,dt(S,h.current)),Sn=null;return}p.flags&32768?(ti||E===1?h=!0:Dr||(Nn&536870912)!==0?h=!1:(mi=h=!0,(E===2||E===3||E===6)&&(E=Rr.current,E!==null&&E.tag===13&&(E.flags|=16384))),Jn(p,h)):Wa(p)}function Wa(h){var p=h;do{if((p.flags&32768)!==0){Jn(p,mi);return}h=p.return;var S=xd(p.alternate,p,Uo);if(S!==null){Sn=S;return}if(p=p.sibling,p!==null){Sn=p;return}Sn=p=h}while(p!==null);Wn===0&&(Wn=5)}function Jn(h,p){do{var S=Qu(h.alternate,h);if(S!==null){S.flags&=32767,Sn=S;return}if(S=h.return,S!==null&&(S.flags|=32768,S.subtreeFlags=0,S.deletions=null),!p&&(h=h.sibling,h!==null)){Sn=h;return}Sn=h=S}while(h!==null);Wn=6,Sn=null}function $n(h,p,S,E,U,k,ot,Mt,zt,pe){var we=un.T,Be=Ua();try{ys(2),un.T=null,zn(h,p,S,E,Be,U,k,ot,Mt,zt,pe)}finally{un.T=we,ys(Be)}}function zn(h,p,S,E,U,k,ot,Mt){do ba();while(Gl!==null);if((sn&6)!==0)throw Error(a(327));var zt=h.finishedWork;if(E=h.finishedLanes,zt===null)return null;if(h.finishedWork=null,h.finishedLanes=0,zt===h.current)throw Error(a(177));h.callbackNode=null,h.callbackPriority=0,h.cancelPendingCommit=null;var pe=zt.lanes|zt.childLanes;if(pe|=uf,J(h,E,pe,k,ot,Mt),h===Pn&&(Sn=Pn=null,Nn=0),(zt.subtreeFlags&10256)===0&&(zt.flags&10256)===0||$r||($r=!0,Qd=pe,gu=S,eu(kd,function(){return ba(),null})),S=(zt.flags&15990)!==0,(zt.subtreeFlags&15990)!==0||S?(S=un.T,un.T=null,k=Ua(),ys(2),ot=sn,sn|=4,qo(h,zt),Da(zt,h),xm(h.containerInfo),h.current=zt,Kc(h,zt.alternate,zt),pv(),sn=ot,ys(k),un.T=S):h.current=zt,$r?($r=!1,Gl=h,mu=E):Co(h,pe),pe=h.pendingLanes,pe===0&&(Nr=null),j(zt.stateNode),Zt(h),p!==null)for(U=h.onRecoverableError,zt=0;zt<p.length;zt++)pe=p[zt],U(pe.value,{componentStack:pe.stack});return(mu&3)!==0&&ba(),pe=h.pendingLanes,(E&4194218)!==0&&(pe&42)!==0?h===Bs?vu++:(vu=0,Bs=h):vu=0,Lt(0),null}function Co(h,p){(h.pooledCacheLanes&=p)===0&&(p=h.pooledCache,p!=null&&(h.pooledCache=null,Sl(p)))}function ba(){if(Gl!==null){var h=Gl,p=Qd;Qd=0;var S=vt(mu),E=32>S?32:S;S=un.T;var U=Ua();try{if(ys(E),un.T=null,Gl===null)var k=!1;else{E=gu,gu=null;var ot=Gl,Mt=mu;if(Gl=null,mu=0,(sn&6)!==0)throw Error(a(331));var zt=sn;if(sn|=4,Ao(ot.current),bo(ot,ot.current,Mt,E),sn=zt,Lt(0,!1),Xs&&typeof Xs.onPostCommitFiberRoot=="function")try{Xs.onPostCommitFiberRoot(lf,ot)}catch{}k=!0}return k}finally{ys(U),un.T=S,Co(h,p)}}return!1}function $c(h,p,S){p=dt(S,p),p=Vi(h.stateNode,p,2),h=Qt(h,p,2),h!==null&&(Q(h,2),Zt(h))}function In(h,p,S){if(h.tag===3)$c(h,h,S);else for(;p!==null;){if(p.tag===3){$c(p,h,S);break}else if(p.tag===1){var E=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Nr===null||!Nr.has(E))){h=dt(S,h),S=ds(2),E=Qt(p,S,2),E!==null&&(Yi(S,E,p,h),Q(E,2),Zt(E));break}}p=p.return}}function tu(h,p,S){var E=h.pingCache;if(E===null){E=h.pingCache=new kn;var U=new Set;E.set(p,U)}else U=E.get(p),U===void 0&&(U=new Set,E.set(p,U));U.has(S)||(Vl=!0,U.add(S),h=Gi.bind(null,h,p,S),p.then(h,h))}function Gi(h,p,S){var E=h.pingCache;E!==null&&E.delete(p),h.pingedLanes|=h.suspendedLanes&S,h.warmLanes&=~S,Pn===h&&(Nn&S)===S&&(Wn===4||Wn===3&&(Nn&62914560)===Nn&&300>ss()-al?(sn&2)===0&&M(h,0):bs|=S,Hl===Nn&&(Hl=0)),Zt(h)}function jr(h,p){p===0&&(p=B()),h=re(h,p),h!==null&&(Q(h,p),Zt(h))}function Rl(h){var p=h.memoizedState,S=0;p!==null&&(S=p.retryLane),jr(h,S)}function th(h,p){var S=0;switch(h.tag){case 13:var E=h.stateNode,U=h.memoizedState;U!==null&&(S=U.retryLane);break;case 19:E=h.stateNode;break;case 22:E=h.stateNode._retryCache;break;default:throw Error(a(314))}E!==null&&E.delete(p),jr(h,S)}function eu(h,p){return of(h,p)}function nu(h,p,S,E){this.tag=h,this.key=S,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wr(h){return h=h.prototype,!(!h||!h.isReactComponent)}function qa(h,p){var S=h.alternate;return S===null?(S=e(h.tag,p,h.key,h.mode),S.elementType=h.elementType,S.type=h.type,S.stateNode=h.stateNode,S.alternate=h,h.alternate=S):(S.pendingProps=p,S.type=h.type,S.flags=0,S.subtreeFlags=0,S.deletions=null),S.flags=h.flags&31457280,S.childLanes=h.childLanes,S.lanes=h.lanes,S.child=h.child,S.memoizedProps=h.memoizedProps,S.memoizedState=h.memoizedState,S.updateQueue=h.updateQueue,p=h.dependencies,S.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},S.sibling=h.sibling,S.index=h.index,S.ref=h.ref,S.refCleanup=h.refCleanup,S}function Dl(h,p){h.flags&=31457282;var S=h.alternate;return S===null?(h.childLanes=0,h.lanes=p,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=S.childLanes,h.lanes=S.lanes,h.child=S.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=S.memoizedProps,h.memoizedState=S.memoizedState,h.updateQueue=S.updateQueue,h.type=S.type,p=S.dependencies,h.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),h}function qr(h,p,S,E,U,k){var ot=0;if(E=h,typeof h=="function")Wr(h)&&(ot=1);else if(typeof h=="string")ot=br&&as?Fm(h,S,Ya.current)?26:sf(h)?27:5:br?Fm(h,S,Ya.current)?26:5:as&&sf(h)?27:5;else t:switch(h){case tf:return Ll(S.children,U,k,p);case gm:ot=8,U|=24;break;case vm:return h=e(12,S,p,U|2),h.elementType=vm,h.lanes=k,h;case Td:return h=e(13,S,p,U),h.elementType=Td,h.lanes=k,h;case gc:return h=e(19,S,p,U),h.elementType=gc,h.lanes=k,h;case ih:return Md(S,U,k,p);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case G0:case Zo:ot=10;break t;case mc:ot=9;break t;case ef:ot=11;break t;case nh:ot=14;break t;case Do:ot=16,E=null;break t}ot=29,S=Error(a(130,h===null?"null":typeof h,"")),E=null}return p=e(ot,S,p,U),p.elementType=h,p.type=E,p.lanes=k,p}function Ll(h,p,S,E){return h=e(7,h,E,p),h.lanes=S,h}function Md(h,p,S,E){h=e(22,h,E,p),h.elementType=ih,h.lanes=S;var U={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var k=U._current;if(k===null)throw Error(a(456));if((U._pendingVisibility&2)===0){var ot=re(k,2);ot!==null&&(U._pendingVisibility|=2,Na(ot,k,2))}},attach:function(){var k=U._current;if(k===null)throw Error(a(456));if((U._pendingVisibility&2)!==0){var ot=re(k,2);ot!==null&&(U._pendingVisibility&=-3,Na(ot,k,2))}}};return h.stateNode=U,h}function pc(h,p,S){return h=e(6,h,null,p),h.lanes=S,h}function $u(h,p,S){return p=e(4,h.children!==null?h.children:[],h.key,p),p.lanes=S,p.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},p}function iu(h,p,S,E,U,k,ot,Mt){this.tag=1,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ou,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=V(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=V(0),this.hiddenUpdates=V(null),this.identifierPrefix=E,this.onUncaughtError=U,this.onCaughtError=k,this.onRecoverableError=ot,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Mt,this.incompleteTransitions=new Map}function Xa(h,p,S,E,U,k,ot,Mt,zt,pe,we,Be){return h=new iu(h,p,S,ot,Mt,zt,pe,Be),p=1,k===!0&&(p|=24),k=e(3,null,null,p),h.current=k,k.stateNode=h,p=Zu(),p.refCount++,h.pooledCache=p,p.refCount++,k.memoizedState={element:E,isDehydrated:S,cache:p},be(k),h}function eh(h){return h?(h=cu,h):cu}function hm(h){var p=h._reactInternals;if(p===void 0)throw typeof h.render=="function"?Error(a(188)):(h=Object.keys(h).join(","),Error(a(268,h)));return h=b(p),h=h!==null?T(h):null,h===null?null:nf(h.stateNode)}function V0(h,p,S,E,U,k){U=eh(U),E.context===null?E.context=U:E.pendingContext=U,E=Gt(p),E.payload={element:S},k=k===void 0?null:k,k!==null&&(E.callback=k),S=Qt(h,E,p),S!==null&&(Na(S,h,p),se(S,h,p))}function H0(h,p){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var S=h.retryLane;h.retryLane=S!==0&&S<p?S:p}}function dm(h,p){H0(h,p),(h=h.alternate)&&H0(h,p)}var an={},pm=em(),ns=o8(),au=Object.assign,mm=Symbol.for("react.element"),Ol=Symbol.for("react.transitional.element"),Ro=Symbol.for("react.portal"),tf=Symbol.for("react.fragment"),gm=Symbol.for("react.strict_mode"),vm=Symbol.for("react.profiler"),G0=Symbol.for("react.provider"),mc=Symbol.for("react.consumer"),Zo=Symbol.for("react.context"),ef=Symbol.for("react.forward_ref"),Td=Symbol.for("react.suspense"),gc=Symbol.for("react.suspense_list"),nh=Symbol.for("react.memo"),Do=Symbol.for("react.lazy"),ih=Symbol.for("react.offscreen"),j0=Symbol.for("react.memo_cache_sentinel"),ym=Symbol.iterator,su=Symbol.for("react.client.reference"),un=pm.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ad,_m,vc=!1,yc=Array.isArray,Ed=t.rendererVersion,ah=t.rendererPackageName,sh=t.extraDevToolsConfig,nf=t.getPublicInstance,ru=t.getRootHostContext,W0=t.getChildHostContext,_c=t.prepareForCommit,xm=t.resetAfterCommit,Sm=t.createInstance,Ko=t.appendInitialChild,Nl=t.finalizeInitialChildren,xc=t.shouldSetTextContent,wd=t.createTextInstance,bm=t.scheduleTimeout,rh=t.cancelTimeout,ou=t.noTimeout,Qo=t.isPrimaryRenderer;t.warnsIfNotActing;var is=t.supportsMutation,xr=t.supportsPersistence,Is=t.supportsHydration,Mm=t.getInstanceFromNode;t.beforeActiveInstanceBlur,t.afterActiveInstanceBlur;var Tm=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var ys=t.setCurrentUpdatePriority,Ua=t.getCurrentUpdatePriority,Xr=t.resolveUpdatePriority;t.resolveEventType,t.resolveEventTimeStamp;var Sc=t.shouldAttemptEagerTransition,Am=t.detachDeletedInstance;t.requestPostPaintCallback;var q0=t.maySuspendCommit,Ul=t.preloadInstance,Sr=t.startSuspendingCommit,Ki=t.suspendInstance,Cd=t.waitForCommitToBeReady,Ws=t.NotPendingTransition,dn=t.HostTransitionContext,bi=t.resetFormInstance;t.bindToConsole;var Ma=t.supportsMicrotasks,Rd=t.scheduleMicrotask,Jo=t.supportsTestSelectors,lu=t.findFiberRoot,Dd=t.getBoundingRect,oh=t.getTextContent,$o=t.isHiddenSubtree,ax=t.matchAccessibilityRole,Qi=t.setFocusIfFocusable,Em=t.setupIntersectionObserver,wm=t.appendChild,X0=t.appendChildToContainer,Y0=t.commitTextUpdate,sx=t.commitMount,Cm=t.commitUpdate,Rm=t.insertBefore,Dm=t.insertInContainerBefore,Ps=t.removeChild,sa=t.removeChildFromContainer,lh=t.resetTextContent,ch=t.hideInstance,Ld=t.hideTextInstance,Lm=t.unhideInstance,Il=t.unhideTextInstance,Od=t.clearContainer,Om=t.cloneInstance,Nd=t.createContainerChildSet,Nm=t.appendChildToContainerChildSet,Z0=t.finalizeContainerChildren,Um=t.replaceContainerChildren,Im=t.cloneHiddenInstance,Pm=t.cloneHiddenTextInstance,Ud=t.isSuspenseInstancePending,uh=t.isSuspenseInstanceFallback,K0=t.getSuspenseInstanceFallbackErrorDetails,rx=t.registerSuspenseInstanceRetry,Q0=t.canHydrateFormStateMarker,J0=t.isFormStateMarkerMatching,zm=t.getNextHydratableSibling,Id=t.getFirstHydratableChild,$0=t.getFirstHydratableChildWithinContainer,tv=t.getFirstHydratableChildWithinSuspenseInstance,ev=t.canHydrateInstance,nv=t.canHydrateTextInstance,iv=t.canHydrateSuspenseInstance,ox=t.hydrateInstance,av=t.hydrateTextInstance,af=t.hydrateSuspenseInstance,sv=t.getNextHydratableInstanceAfterSuspenseInstance,Pd=t.commitHydratedContainer,zd=t.commitHydratedSuspenseInstance,rv=t.clearSuspenseBoundary,Bm=t.clearSuspenseBoundaryFromContainer,ov=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var lv=t.validateHydratableInstance,cv=t.validateHydratableTextInstance,br=t.supportsResources,Fm=t.isHostHoistableType,Bd=t.getHoistableRoot,Fd=t.getResource,km=t.acquireResource,Vm=t.releaseResource,Hm=t.hydrateHoistable,Gm=t.mountHoistable,jm=t.unmountHoistable,lx=t.createHoistableInstance,Wm=t.prepareToCommitHoistables,uv=t.mayResourceSuspendCommit,qm=t.preloadResource,Xm=t.suspendResource,as=t.supportsSingletons,Ym=t.resolveSingletonInstance,cx=t.clearSingleton,ux=t.acquireSingletonInstance,fv=t.releaseSingletonInstance,sf=t.isHostSingletonType,fh=[],Pl=-1,cu={},qs=Math.clz32?Math.clz32:I,hh=Math.log,hv=Math.LN2,rf=128,dh=4194304,of=ns.unstable_scheduleCallback,ph=ns.unstable_cancelCallback,dv=ns.unstable_shouldYield,pv=ns.unstable_requestPaint,ss=ns.unstable_now,Zm=ns.unstable_ImmediatePriority,mv=ns.unstable_UserBlockingPriority,kd=ns.unstable_NormalPriority,Vd=ns.unstable_IdlePriority,gv=ns.log,Km=ns.unstable_setDisableYieldValue,lf=null,Xs=null,Mr=typeof Object.is=="function"?Object.is:et,Hd=new WeakMap,zi=[],Ji=0,mh=null,gh=0,Tr=[],Ar=0,Lo=null,tl=1,Yr="",Ya=C(null),vh=C(null),Oo=C(null),cf=C(null),_s=null,rs=null,ti=!1,Er=null,Zr=!1,yh=Error(a(519)),wr=[],bc=0,uf=0,ff=null,uu=null,_h=!1,xh=!1,No=!1,Mc=0,Sh=null,Gd=0,Ys=0,Tc=null,zl=!1,hf=!1,bh=Object.prototype.hasOwnProperty,xi=Error(a(460)),Qm=Error(a(474)),jd={then:function(){}},fu=null,el=null,Kr=0,Ac=Bn(!0),Jm=Bn(!1),nl=C(null),Cr=C(0),Rr=C(null),Qr=null,Ta=C(0),il=0,Rn=null,ri=null,ra=null,Jr=!1,Bi=!1,Bl=!1,Mh=0,$i=0,df=null,vv=0,Wd=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},ei={readContext:aa,use:Xe,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useLayoutEffect:cn,useInsertionEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useSyncExternalStore:cn,useId:cn};ei.useCacheRefresh=cn,ei.useMemoCache=cn,ei.useHostTransitionStatus=cn,ei.useFormState=cn,ei.useActionState=cn,ei.useOptimistic=cn;var Aa={readContext:aa,use:Xe,useCallback:function(h,p){return yi().memoizedState=[h,p===void 0?null:p],h},useContext:aa,useEffect:Es,useImperativeHandle:function(h,p,S){S=S!=null?S.concat([h]):null,Ei(4194308,4,hs.bind(null,p,h),S)},useLayoutEffect:function(h,p){return Ei(4194308,4,h,p)},useInsertionEffect:function(h,p){Ei(4,2,h,p)},useMemo:function(h,p){var S=yi();p=p===void 0?null:p;var E=h();if(Bl){K(!0);try{h()}finally{K(!1)}}return S.memoizedState=[E,p],E},useReducer:function(h,p,S){var E=yi();if(S!==void 0){var U=S(p);if(Bl){K(!0);try{S(p)}finally{K(!1)}}}else U=p;return E.memoizedState=E.baseState=U,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:U},E.queue=h,h=h.dispatch=Rs.bind(null,Rn,h),[E.memoizedState,h]},useRef:function(h){var p=yi();return h={current:h},p.memoizedState=h},useState:function(h){h=Ve(h);var p=h.queue,S=hr.bind(null,Rn,p);return p.dispatch=S,[h.memoizedState,S]},useDebugValue:Gs,useDeferredValue:function(h,p){var S=yi();return on(S,h,p)},useTransition:function(){var h=Ve(!1);return h=Gn.bind(null,Rn,h.queue,!0,!1),yi().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,p,S){var E=Rn,U=yi();if(ti){if(S===void 0)throw Error(a(407));S=S()}else{if(S=p(),Pn===null)throw Error(a(349));(Nn&60)!==0||Ue(E,p,S)}U.memoizedState=S;var k={value:S,getSnapshot:p};return U.queue=k,Es(Pe.bind(null,E,k,h),[h]),E.flags|=2048,Qn(9,De.bind(null,E,k,S,p),{destroy:void 0},null),S},useId:function(){var h=yi(),p=Pn.identifierPrefix;if(ti){var S=Yr,E=tl;S=(E&~(1<<32-qs(E)-1)).toString(32)+S,p=":"+p+"R"+S,S=Mh++,0<S&&(p+="H"+S.toString(32)),p+=":"}else S=vv++,p=":"+p+"r"+S.toString(32)+":";return h.memoizedState=p},useCacheRefresh:function(){return yi().memoizedState=Ja.bind(null,Rn)}};Aa.useMemoCache=it,Aa.useHostTransitionStatus=Cs,Aa.useFormState=qi,Aa.useActionState=qi,Aa.useOptimistic=function(h){var p=yi();p.memoizedState=p.baseState=h;var S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=S,p=Ds.bind(null,Rn,!0,S),S.dispatch=p,[h,p]};var xs={readContext:aa,use:Xe,useCallback:uo,useContext:aa,useEffect:ki,useImperativeHandle:Xi,useInsertionEffect:Ho,useLayoutEffect:co,useMemo:ws,useReducer:Xt,useRef:ci,useState:function(){return Xt(Rt)},useDebugValue:Gs,useDeferredValue:function(h,p){var S=Zn();return Fa(S,ri.memoizedState,h,p)},useTransition:function(){var h=Xt(Rt)[0],p=Zn().memoizedState;return[typeof h=="boolean"?h:va(h),p]},useSyncExternalStore:Ee,useId:Qa};xs.useCacheRefresh=_a,xs.useMemoCache=it,xs.useHostTransitionStatus=Cs,xs.useFormState=ya,xs.useActionState=ya,xs.useOptimistic=function(h,p){var S=Zn();return Je(S,ri,h,p)};var Ec={readContext:aa,use:Xe,useCallback:uo,useContext:aa,useEffect:ki,useImperativeHandle:Xi,useInsertionEffect:Ho,useLayoutEffect:co,useMemo:ws,useReducer:Ut,useRef:ci,useState:function(){return Ut(Rt)},useDebugValue:Gs,useDeferredValue:function(h,p){var S=Zn();return ri===null?on(S,h,p):Fa(S,ri.memoizedState,h,p)},useTransition:function(){var h=Ut(Rt)[0],p=Zn().memoizedState;return[typeof h=="boolean"?h:va(h),p]},useSyncExternalStore:Ee,useId:Qa};Ec.useCacheRefresh=_a,Ec.useMemoCache=it,Ec.useHostTransitionStatus=Cs,Ec.useFormState=Mn,Ec.useActionState=Mn,Ec.useOptimistic=function(h,p){var S=Zn();return ri!==null?Je(S,ri,h,p):(S.baseState=h,[h,S.queue.dispatch])};var qd={isMounted:function(h){return(h=h._reactInternals)?y(h)===h:!1},enqueueSetState:function(h,p,S){h=h._reactInternals;var E=ja(),U=Gt(E);U.payload=p,S!=null&&(U.callback=S),p=Qt(h,U,E),p!==null&&(Na(p,h,E),se(p,h,E))},enqueueReplaceState:function(h,p,S){h=h._reactInternals;var E=ja(),U=Gt(E);U.tag=1,U.payload=p,S!=null&&(U.callback=S),p=Qt(h,U,E),p!==null&&(Na(p,h,E),se(p,h,E))},enqueueForceUpdate:function(h,p){h=h._reactInternals;var S=ja(),E=Gt(S);E.tag=2,p!=null&&(E.callback=p),p=Qt(h,E,S),p!==null&&(Na(p,h,S),se(p,h,S))}},$m=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(p))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)},yv=Error(a(461)),oa=!1,Ss={dehydrated:null,treeContext:null,retryLane:0},Zs=C(null),wc=null,ta=null,_v=typeof AbortController<"u"?AbortController:function(){var h=[],p=this.signal={aborted:!1,addEventListener:function(S,E){h.push(E)}};this.abort=function(){p.aborted=!0,h.forEach(function(S){return S()})}},Fl=ns.unstable_scheduleCallback,hu=ns.unstable_NormalPriority,di={$$typeof:Zo,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Xd=un.S;un.S=function(h,p){typeof p=="object"&&p!==null&&typeof p.then=="function"&&Ct(h,p),Xd!==null&&Xd(h,p)};var kl=C(null),Ia=!1,ji=!1,Cc=!1,pf=typeof WeakSet=="function"?WeakSet:Set,ea=null,du=!1,la=null,Ks=!1,zs=null,pu=8192,Yd={getCacheForType:function(h){var p=aa(di),S=p.data.get(h);return S===void 0&&(S=h(),p.data.set(h,S)),S}},Th=0,Zd=1,Kd=2,jn=3,pi=4;if(typeof Symbol=="function"&&Symbol.for){var Dn=Symbol.for;Th=Dn("selector.component"),Zd=Dn("selector.has_pseudo_class"),Kd=Dn("selector.role"),jn=Dn("selector.test_id"),pi=Dn("selector.text")}var kn=typeof WeakMap=="function"?WeakMap:Map,sn=0,Pn=null,Sn=null,Nn=0,Mi=0,ca=null,mi=!1,Dr=!1,Vl=!1,Uo=0,Wn=0,Lr=0,Io=0,bs=0,Qs=0,Hl=0,mf=null,Or=null,gf=!1,al=0,Wi=1/0,Po=null,Nr=null,$r=!1,Gl=null,mu=0,Qd=0,gu=null,vu=0,Bs=null;return an.attemptContinuousHydration=function(h){if(h.tag===13){var p=re(h,67108864);p!==null&&Na(p,h,67108864),dm(h,67108864)}},an.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var p=ja(),S=re(h,p);S!==null&&Na(S,h,p),dm(h,p)}},an.attemptSynchronousHydration=function(h){switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var p=z(h.pendingLanes);if(p!==0){for(h.pendingLanes|=2,h.entangledLanes|=2;p;){var S=1<<31-qs(p);h.entanglements[1]|=S,p&=~S}Zt(h),(sn&6)===0&&(Wi=ss()+500,Lt(0))}}break;case 13:p=re(h,2),p!==null&&Na(p,h,2),u(),dm(h,2)}},an.batchedUpdates=function(h,p){return h(p)},an.createComponentSelector=function(h){return{$$typeof:Th,value:h}},an.createContainer=function(h,p,S,E,U,k,ot,Mt,zt,pe){return Xa(h,p,!1,null,S,E,k,ot,Mt,zt,pe,null)},an.createHasPseudoClassSelector=function(h){return{$$typeof:Zd,value:h}},an.createHydrationContainer=function(h,p,S,E,U,k,ot,Mt,zt,pe,we,Be,Ge){return h=Xa(S,E,!0,h,U,k,Mt,zt,pe,we,Be,Ge),h.context=eh(null),S=h.current,E=ja(),U=Gt(E),U.callback=p??null,Qt(S,U,E),h.current.lanes=E,Q(h,E),Zt(h),h},an.createPortal=function(h,p,S){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ro,key:E==null?null:""+E,children:h,containerInfo:p,implementation:S}},an.createRoleSelector=function(h){return{$$typeof:Kd,value:h}},an.createTestNameSelector=function(h){return{$$typeof:jn,value:h}},an.createTextSelector=function(h){return{$$typeof:pi,value:h}},an.defaultOnCaughtError=function(h){console.error(h)},an.defaultOnRecoverableError=function(h){$m(h)},an.defaultOnUncaughtError=function(h){$m(h)},an.deferredUpdates=function(h){var p=un.T,S=Ua();try{return ys(32),un.T=null,h()}finally{ys(S),un.T=p}},an.discreteUpdates=function(h,p,S,E,U){var k=un.T,ot=Ua();try{return ys(2),un.T=null,h(p,S,E,U)}finally{ys(ot),un.T=k,sn===0&&(Wi=ss()+500)}},an.findAllNodes=Ga,an.findBoundingRects=function(h,p){if(!Jo)throw Error(a(363));p=Ga(h,p),h=[];for(var S=0;S<p.length;S++)h.push(Dd(p[S]));for(p=h.length-1;0<p;p--){S=h[p];for(var E=S.x,U=E+S.width,k=S.y,ot=k+S.height,Mt=p-1;0<=Mt;Mt--)if(p!==Mt){var zt=h[Mt],pe=zt.x,we=pe+zt.width,Be=zt.y,Ge=Be+zt.height;if(E>=pe&&k>=Be&&U<=we&&ot<=Ge){h.splice(p,1);break}else if(E!==pe||S.width!==zt.width||Ge<k||Be>ot){if(!(k!==Be||S.height!==zt.height||we<E||pe>U)){pe>E&&(zt.width+=pe-E,zt.x=E),we<U&&(zt.width=U-pe),h.splice(p,1);break}}else{Be>k&&(zt.height+=Be-k,zt.y=k),Ge<ot&&(zt.height=ot-Be),h.splice(p,1);break}}}return h},an.findHostInstance=hm,an.findHostInstanceWithNoPortals=function(h){return h=b(h),h=h!==null?R(h):null,h===null?null:nf(h.stateNode)},an.findHostInstanceWithWarning=function(h){return hm(h)},an.flushPassiveEffects=ba,an.flushSyncFromReconciler=function(h){var p=sn;sn|=1;var S=un.T,E=Ua();try{if(ys(2),un.T=null,h)return h()}finally{ys(E),un.T=S,sn=p,(sn&6)===0&&Lt(0)}},an.flushSyncWork=u,an.focusWithin=function(h,p){if(!Jo)throw Error(a(363));for(h=Yo(h),p=bd(h,p),p=Array.from(p),h=0;h<p.length;){var S=p[h++],E=S.tag;if(!$o(S)){if((E===5||E===26||E===27)&&Qi(S.stateNode))return!0;for(S=S.child;S!==null;)p.push(S),S=S.sibling}}return!1},an.getFindAllNodesFailureDescription=function(h,p){if(!Jo)throw Error(a(363));var S=0,E=[];h=[Yo(h),0];for(var U=0;U<h.length;){var k=h[U++],ot=k.tag,Mt=h[U++],zt=p[Mt];if((ot!==5&&ot!==26&&ot!==27||!$o(k))&&(Cl(k,zt)&&(E.push(Eo(zt)),Mt++,Mt>S&&(S=Mt)),Mt<p.length))for(k=k.child;k!==null;)h.push(k,Mt),k=k.sibling}if(S<p.length){for(h=[];S<p.length;S++)h.push(Eo(p[S]));return`findAllNodes was able to match part of the selector:
  `+(E.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},an.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 27:case 5:return nf(h.child.stateNode);default:return h.child.stateNode}},an.injectIntoDevTools=function(){var h={bundleType:0,version:Ed,rendererPackageName:ah,currentDispatcherRef:un,findFiberByHostInstance:Mm,reconcilerVersion:"19.0.0"};if(sh!==null&&(h.rendererConfig=sh),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var p=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(p.isDisabled||!p.supportsFiber)h=!0;else{try{lf=p.inject(h),Xs=p}catch{}h=!!p.checkDCE}}return h},an.isAlreadyRendering=function(){return!1},an.observeVisibleRects=function(h,p,S,E){if(!Jo)throw Error(a(363));h=Ga(h,p);var U=Em(h,S,E).disconnect;return{disconnect:function(){U()}}},an.shouldError=function(){return null},an.shouldSuspend=function(){return!1},an.startHostTransition=function(h,p,S,E){if(h.tag!==5)throw Error(a(476));var U=fo(h).queue;Gn(h,U,p,Ws,S===null?n:function(){var k=fo(h).next.queue;return ui(h,k,{},ja()),S(E)})},an.updateContainer=function(h,p,S,E){var U=p.current,k=ja();return V0(U,k,h,p,S,E),k},an.updateContainerSync=function(h,p,S,E){return p.tag===0&&ba(),V0(p.current,2,h,p,S,E),2},an},i.exports.default=i.exports,Object.defineProperty(i.exports,"__esModule",{value:!0})})(VS)),VS.exports}var KE;function c8(){return KE||(KE=1,kS.exports=l8()),kS.exports}var u8=c8();const f8=M0(u8);var jS={exports:{}},WS={};var QE;function h8(){return QE||(QE=1,(function(i){function t(j,K){var et=j.length;j.push(K);t:for(;0<et;){var dt=et-1>>>1,lt=j[dt];if(0<a(lt,K))j[dt]=K,j[et]=lt,et=dt;else break t}}function e(j){return j.length===0?null:j[0]}function n(j){if(j.length===0)return null;var K=j[0],et=j.pop();if(et!==K){j[0]=et;t:for(var dt=0,lt=j.length,G=lt>>>1;dt<G;){var nt=2*(dt+1)-1,ft=j[nt],mt=nt+1,xt=j[mt];if(0>a(ft,et))mt<lt&&0>a(xt,ft)?(j[dt]=xt,j[mt]=et,dt=mt):(j[dt]=ft,j[nt]=et,dt=nt);else if(mt<lt&&0>a(xt,et))j[dt]=xt,j[mt]=et,dt=mt;else break t}}return K}function a(j,K){var et=j.sortIndex-K.sortIndex;return et!==0?et:j.id-K.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();i.unstable_now=function(){return o.now()-c}}var f=[],d=[],g=1,y=null,x=3,b=!1,T=!1,R=!1,C=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function I(j){for(var K=e(d);K!==null;){if(K.callback===null)n(d);else if(K.startTime<=j)n(d),K.sortIndex=K.expirationTime,t(f,K);else break;K=e(d)}}function z(j){if(R=!1,I(j),!T)if(e(f)!==null)T=!0,ut();else{var K=e(d);K!==null&&vt(z,K.startTime-j)}}var F=!1,H=-1,q=5,Z=-1;function B(){return!(i.unstable_now()-Z<q)}function V(){if(F){var j=i.unstable_now();Z=j;var K=!0;try{t:{T=!1,R&&(R=!1,w(H),H=-1),b=!0;var et=x;try{e:{for(I(j),y=e(f);y!==null&&!(y.expirationTime>j&&B());){var dt=y.callback;if(typeof dt=="function"){y.callback=null,x=y.priorityLevel;var lt=dt(y.expirationTime<=j);if(j=i.unstable_now(),typeof lt=="function"){y.callback=lt,I(j),K=!0;break e}y===e(f)&&n(f),I(j)}else n(f);y=e(f)}if(y!==null)K=!0;else{var G=e(d);G!==null&&vt(z,G.startTime-j),K=!1}}break t}finally{y=null,x=et,b=!1}K=void 0}}finally{K?Q():F=!1}}}var Q;if(typeof N=="function")Q=function(){N(V)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,rt=J.port2;J.port1.onmessage=V,Q=function(){rt.postMessage(null)}}else Q=function(){C(V,0)};function ut(){F||(F=!0,Q())}function vt(j,K){H=C(function(){j(i.unstable_now())},K)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(j){j.callback=null},i.unstable_continueExecution=function(){T||b||(T=!0,ut())},i.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<j?Math.floor(1e3/j):5},i.unstable_getCurrentPriorityLevel=function(){return x},i.unstable_getFirstCallbackNode=function(){return e(f)},i.unstable_next=function(j){switch(x){case 1:case 2:case 3:var K=3;break;default:K=x}var et=x;x=K;try{return j()}finally{x=et}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(j,K){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var et=x;x=j;try{return K()}finally{x=et}},i.unstable_scheduleCallback=function(j,K,et){var dt=i.unstable_now();switch(typeof et=="object"&&et!==null?(et=et.delay,et=typeof et=="number"&&0<et?dt+et:dt):et=dt,j){case 1:var lt=-1;break;case 2:lt=250;break;case 5:lt=1073741823;break;case 4:lt=1e4;break;default:lt=5e3}return lt=et+lt,j={id:g++,callback:K,priorityLevel:j,startTime:et,expirationTime:lt,sortIndex:-1},et>dt?(j.sortIndex=et,t(d,j),e(f)===null&&j===e(d)&&(R?(w(H),H=-1):R=!0,vt(z,et-dt))):(j.sortIndex=lt,t(f,j),T||b||(T=!0,ut())),j},i.unstable_shouldYield=B,i.unstable_wrapCallback=function(j){var K=x;return function(){var et=x;x=K;try{return j.apply(this,arguments)}finally{x=et}}}})(WS)),WS}var JE;function d8(){return JE||(JE=1,jS.exports=h8()),jS.exports}var $E=d8();function vM(i,t,e){if(!i)return;if(e(i)===!0)return i;let n=t?i.return:i.child;for(;n;){const a=vM(n,t,e);if(a)return a;n=t?null:n.sibling}}function ZR(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const yM=ZR(ct.createContext(null));class KR extends ct.Component{render(){return ct.createElement(yM.Provider,{value:this._reactInternals},this.props.children)}}function QR(){const i=ct.useContext(yM);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=ct.useId();return ct.useMemo(()=>{for(const e of[i,i?.alternate]){if(!e)continue;const n=vM(e,!1,a=>{let s=a.memoizedState;for(;s;){if(s.memoizedState===t)return!0;s=s.next}});if(n)return n}},[i,t])}const p8=Symbol.for("react.context"),m8=i=>i!==null&&typeof i=="object"&&"$$typeof"in i&&i.$$typeof===p8;function g8(){const i=QR(),[t]=ct.useState(()=>new Map);t.clear();let e=i;for(;e;){const n=e.type;m8(n)&&n!==yM&&!t.has(n)&&t.set(n,ct.use(ZR(n))),e=e.return}return t}function v8(){const i=g8();return ct.useMemo(()=>Array.from(i.keys()).reduce((t,e)=>n=>ct.createElement(t,null,ct.createElement(e.Provider,{...n,value:i.get(e)})),t=>ct.createElement(KR,{...t})),[i])}function JR(i){let t=i.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}const $R=i=>i&&i.isOrthographicCamera,y8=i=>i&&i.hasOwnProperty("current"),_8=i=>i!=null&&(typeof i=="string"||typeof i=="number"||i.isColor),U0=((i,t)=>typeof window<"u"&&(((i=window.document)==null?void 0:i.createElement)||((t=window.navigator)==null?void 0:t.product)==="ReactNative"))()?ct.useLayoutEffect:ct.useEffect;function tD(i){const t=ct.useRef(i);return U0(()=>{t.current=i},[i]),t}function x8(){const i=QR(),t=v8();return ct.useMemo(()=>({children:e})=>{const a=!!vM(i,!0,s=>s.type===ct.StrictMode)?ct.StrictMode:ct.Fragment;return O.jsx(a,{children:O.jsx(t,{children:e})})},[i,t])}function S8({set:i}){return U0(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}const b8=(i=>(i=class extends ct.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}},i.getDerivedStateFromError=()=>({error:!0}),i))();function eD(i){var t;const e=typeof window<"u"?(t=window.devicePixelRatio)!=null?t:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],e),i[1]):i}function Ap(i){var t;return(t=i.__r3f)==null?void 0:t.root.getState()}const ua={obj:i=>i===Object(i)&&!ua.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,nul:i=>i===null,arr:i=>Array.isArray(i),equ(i,t,{arrays:e="shallow",objects:n="reference",strict:a=!0}={}){if(typeof i!=typeof t||!!i!=!!t)return!1;if(ua.str(i)||ua.num(i)||ua.boo(i))return i===t;const s=ua.obj(i);if(s&&n==="reference")return i===t;const o=ua.arr(i);if(o&&e==="reference")return i===t;if((o||s)&&i===t)return!0;let c;for(c in i)if(!(c in t))return!1;if(s&&e==="shallow"&&n==="shallow"){for(c in a?t:i)if(!ua.equ(i[c],t[c],{strict:a,objects:"reference"}))return!1}else for(c in a?t:i)if(i[c]!==t[c])return!1;if(ua.und(c)){if(o&&i.length===0&&t.length===0||s&&Object.keys(i).length===0&&Object.keys(t).length===0)return!0;if(i!==t)return!1}return!0}};function M8(i){i.type!=="Scene"&&(i.dispose==null||i.dispose());for(const t in i){const e=i[t];e?.type!=="Scene"&&(e==null||e.dispose==null||e.dispose())}}const nD=["children","key","ref"];function T8(i){const t={};for(const e in i)nD.includes(e)||(t[e]=i[e]);return t}function Y_(i,t,e,n){const a=i;let s=a?.__r3f;return s||(s={root:t,type:e,parent:null,children:[],props:T8(n),object:a,eventCount:0,handlers:{},isHidden:!1},a&&(a.__r3f=s)),s}function g0(i,t){if(!t.includes("-"))return{root:i,key:t,target:i[t]};if(t in i)return{root:i,key:t,target:i[t]};let e=i;const n=t.split("-");for(const a of n){if(typeof e!="object"||e===null){if(e!==void 0){const s=n.slice(n.indexOf(a)).join("-");return{root:e,key:s,target:void 0}}return{root:i,key:t,target:void 0}}t=a,i=e,e=e[t]}return{root:i,key:t,target:e}}const t3=/-\d+$/;function Z_(i,t){if(ua.str(t.props.attach)){if(t3.test(t.props.attach)){const a=t.props.attach.replace(t3,""),{root:s,key:o}=g0(i.object,a);Array.isArray(s[o])||(s[o]=[])}const{root:e,key:n}=g0(i.object,t.props.attach);t.previousAttach=e[n],e[n]=t.object}else ua.fun(t.props.attach)&&(t.previousAttach=t.props.attach(i.object,t.object))}function K_(i,t){if(ua.str(t.props.attach)){const{root:e,key:n}=g0(i.object,t.props.attach),a=t.previousAttach;a===void 0?delete e[n]:e[n]=a}else t.previousAttach==null||t.previousAttach(i.object,t.object);delete t.previousAttach}const kb=[...nD,"args","dispose","attach","object","onUpdate","dispose"],e3=new Map;function A8(i){let t=e3.get(i.constructor);try{t||(t=new i.constructor,e3.set(i.constructor,t))}catch{}return t}function E8(i,t){const e={};for(const n in t)if(!kb.includes(n)&&!ua.equ(t[n],i.props[n])){e[n]=t[n];for(const a in t)a.startsWith(`${n}-`)&&(e[a]=t[a])}for(const n in i.props){if(kb.includes(n)||t.hasOwnProperty(n))continue;const{root:a,key:s}=g0(i.object,n);if(a.constructor&&a.constructor.length===0){const o=A8(a);ua.und(o)||(e[s]=o[s])}else e[s]=0}return e}const w8=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],C8=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Nf(i,t){var e;const n=i.__r3f,a=n&&JR(n).getState(),s=n?.eventCount;for(const c in t){let f=t[c];if(kb.includes(c))continue;if(n&&C8.test(c)){typeof f=="function"?n.handlers[c]=f:delete n.handlers[c],n.eventCount=Object.keys(n.handlers).length;continue}if(f===void 0)continue;let{root:d,key:g,target:y}=g0(i,c);if(y===void 0&&(typeof d!="object"||d===null))throw Error(`R3F: Cannot set "${c}". Ensure it is an object before setting "${g}".`);if(y instanceof Xp&&f instanceof Xp)y.mask=f.mask;else if(y instanceof He&&_8(f))y.set(f);else if(y!==null&&typeof y=="object"&&typeof y.set=="function"&&typeof y.copy=="function"&&f!=null&&f.constructor&&y.constructor===f.constructor)y.copy(f);else if(y!==null&&typeof y=="object"&&typeof y.set=="function"&&Array.isArray(f))typeof y.fromArray=="function"?y.fromArray(f):y.set(...f);else if(y!==null&&typeof y=="object"&&typeof y.set=="function"&&typeof f=="number")typeof y.setScalar=="function"?y.setScalar(f):y.set(f);else{var o;d[g]=f,a&&!a.linear&&w8.includes(g)&&(o=d[g])!=null&&o.isTexture&&d[g].format===sr&&d[g].type===Br&&(d[g].colorSpace=ir)}}if(n!=null&&n.parent&&a!=null&&a.internal&&(e=n.object)!=null&&e.isObject3D&&s!==n.eventCount){const c=n.object,f=a.internal.interaction.indexOf(c);f>-1&&a.internal.interaction.splice(f,1),n.eventCount&&c.raycast!==null&&a.internal.interaction.push(c)}return n&&n.props.attach===void 0&&(n.object.isBufferGeometry?n.props.attach="geometry":n.object.isMaterial&&(n.props.attach="material")),n&&sm(n),i}function sm(i){var t;if(!i.parent)return;i.props.onUpdate==null||i.props.onUpdate(i.object);const e=(t=i.root)==null||t.getState==null?void 0:t.getState();e&&e.internal.frames===0&&e.invalidate()}function R8(i,t){i.manual||($R(i)?(i.left=t.width/-2,i.right=t.width/2,i.top=t.height/2,i.bottom=t.height/-2):i.aspect=t.width/t.height,i.updateProjectionMatrix())}const no=i=>i?.isObject3D;function Dy(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function iD(i,t,e,n){const a=e.get(t);a&&(e.delete(t),e.size===0&&(i.delete(n),a.target.releasePointerCapture(n)))}function D8(i,t){const{internal:e}=i.getState();e.interaction=e.interaction.filter(n=>n!==t),e.initialHits=e.initialHits.filter(n=>n!==t),e.hovered.forEach((n,a)=>{(n.eventObject===t||n.object===t)&&e.hovered.delete(a)}),e.capturedMap.forEach((n,a)=>{iD(e.capturedMap,t,n,a)})}function L8(i){function t(f){const{internal:d}=i.getState(),g=f.offsetX-d.initialClick[0],y=f.offsetY-d.initialClick[1];return Math.round(Math.sqrt(g*g+y*y))}function e(f){return f.filter(d=>["Move","Over","Enter","Out","Leave"].some(g=>{var y;return(y=d.__r3f)==null?void 0:y.handlers["onPointer"+g]}))}function n(f,d){const g=i.getState(),y=new Set,x=[],b=d?d(g.internal.interaction):g.internal.interaction;for(let w=0;w<b.length;w++){const N=Ap(b[w]);N&&(N.raycaster.camera=void 0)}g.previousRoot||g.events.compute==null||g.events.compute(f,g);function T(w){const N=Ap(w);if(!N||!N.events.enabled||N.raycaster.camera===null)return[];if(N.raycaster.camera===void 0){var I;N.events.compute==null||N.events.compute(f,N,(I=N.previousRoot)==null?void 0:I.getState()),N.raycaster.camera===void 0&&(N.raycaster.camera=null)}return N.raycaster.camera?N.raycaster.intersectObject(w,!0):[]}let R=b.flatMap(T).sort((w,N)=>{const I=Ap(w.object),z=Ap(N.object);return!I||!z?w.distance-N.distance:z.events.priority-I.events.priority||w.distance-N.distance}).filter(w=>{const N=Dy(w);return y.has(N)?!1:(y.add(N),!0)});g.events.filter&&(R=g.events.filter(R,g));for(const w of R){let N=w.object;for(;N;){var C;(C=N.__r3f)!=null&&C.eventCount&&x.push({...w,eventObject:N}),N=N.parent}}if("pointerId"in f&&g.internal.capturedMap.has(f.pointerId))for(let w of g.internal.capturedMap.get(f.pointerId).values())y.has(Dy(w.intersection))||x.push(w.intersection);return x}function a(f,d,g,y){if(f.length){const x={stopped:!1};for(const b of f){let T=Ap(b.object);if(T||b.object.traverseAncestors(R=>{const C=Ap(R);if(C)return T=C,!1}),T){const{raycaster:R,pointer:C,camera:w,internal:N}=T,I=new pt(C.x,C.y,0).unproject(w),z=B=>{var V,Q;return(V=(Q=N.capturedMap.get(B))==null?void 0:Q.has(b.eventObject))!=null?V:!1},F=B=>{const V={intersection:b,target:d.target};N.capturedMap.has(B)?N.capturedMap.get(B).set(b.eventObject,V):N.capturedMap.set(B,new Map([[b.eventObject,V]])),d.target.setPointerCapture(B)},H=B=>{const V=N.capturedMap.get(B);V&&iD(N.capturedMap,b.eventObject,V,B)};let q={};for(let B in d){let V=d[B];typeof V!="function"&&(q[B]=V)}let Z={...b,...q,pointer:C,intersections:f,stopped:x.stopped,delta:g,unprojectedPoint:I,ray:R.ray,camera:w,stopPropagation(){const B="pointerId"in d&&N.capturedMap.get(d.pointerId);if((!B||B.has(b.eventObject))&&(Z.stopped=x.stopped=!0,N.hovered.size&&Array.from(N.hovered.values()).find(V=>V.eventObject===b.eventObject))){const V=f.slice(0,f.indexOf(b));s([...V,b])}},target:{hasPointerCapture:z,setPointerCapture:F,releasePointerCapture:H},currentTarget:{hasPointerCapture:z,setPointerCapture:F,releasePointerCapture:H},nativeEvent:d};if(y(Z),x.stopped===!0)break}}}return f}function s(f){const{internal:d}=i.getState();for(const g of d.hovered.values())if(!f.length||!f.find(y=>y.object===g.object&&y.index===g.index&&y.instanceId===g.instanceId)){const x=g.eventObject.__r3f;if(d.hovered.delete(Dy(g)),x!=null&&x.eventCount){const b=x.handlers,T={...g,intersections:f};b.onPointerOut==null||b.onPointerOut(T),b.onPointerLeave==null||b.onPointerLeave(T)}}}function o(f,d){for(let g=0;g<d.length;g++){const y=d[g].__r3f;y==null||y.handlers.onPointerMissed==null||y.handlers.onPointerMissed(f)}}function c(f){switch(f){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return d=>{const{internal:g}=i.getState();"pointerId"in d&&g.capturedMap.has(d.pointerId)&&requestAnimationFrame(()=>{g.capturedMap.has(d.pointerId)&&(g.capturedMap.delete(d.pointerId),s([]))})}}return function(g){const{onPointerMissed:y,internal:x}=i.getState();x.lastEvent.current=g;const b=f==="onPointerMove",T=f==="onClick"||f==="onContextMenu"||f==="onDoubleClick",C=n(g,b?e:void 0),w=T?t(g):0;f==="onPointerDown"&&(x.initialClick=[g.offsetX,g.offsetY],x.initialHits=C.map(I=>I.eventObject)),T&&!C.length&&w<=2&&(o(g,x.interaction),y&&y(g)),b&&s(C);function N(I){const z=I.eventObject,F=z.__r3f;if(!(F!=null&&F.eventCount))return;const H=F.handlers;if(b){if(H.onPointerOver||H.onPointerEnter||H.onPointerOut||H.onPointerLeave){const q=Dy(I),Z=x.hovered.get(q);Z?Z.stopped&&I.stopPropagation():(x.hovered.set(q,I),H.onPointerOver==null||H.onPointerOver(I),H.onPointerEnter==null||H.onPointerEnter(I))}H.onPointerMove==null||H.onPointerMove(I)}else{const q=H[f];q?(!T||x.initialHits.includes(z))&&(o(g,x.interaction.filter(Z=>!x.initialHits.includes(Z))),q(I)):T&&x.initialHits.includes(z)&&o(g,x.interaction.filter(Z=>!x.initialHits.includes(Z)))}}a(C,g,w,N)}}return{handlePointer:c}}const n3=i=>!!(i!=null&&i.render),aD=ct.createContext(null),O8=(i,t)=>{const e=e8((c,f)=>{const d=new pt,g=new pt,y=new pt;function x(w=f().camera,N=g,I=f().size){const{width:z,height:F,top:H,left:q}=I,Z=z/F;N.isVector3?y.copy(N):y.set(...N);const B=w.getWorldPosition(d).distanceTo(y);if($R(w))return{width:z/w.zoom,height:F/w.zoom,top:H,left:q,factor:1,distance:B,aspect:Z};{const V=w.fov*Math.PI/180,Q=2*Math.tan(V/2)*B,J=Q*(z/F);return{width:J,height:Q,top:H,left:q,factor:z/J,distance:B,aspect:Z}}}let b;const T=w=>c(N=>({performance:{...N.performance,current:w}})),R=new de;return{set:c,get:f,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(w=1)=>i(f(),w),advance:(w,N)=>t(w,N,f()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new hM,pointer:R,mouse:R,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const w=f();b&&clearTimeout(b),w.performance.current!==w.performance.min&&T(w.performance.min),b=setTimeout(()=>T(f().performance.max),w.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:x},setEvents:w=>c(N=>({...N,events:{...N.events,...w}})),setSize:(w,N,I=0,z=0)=>{const F=f().camera,H={width:w,height:N,top:I,left:z};c(q=>({size:H,viewport:{...q.viewport,...x(F,g,H)}}))},setDpr:w=>c(N=>{const I=eD(w);return{viewport:{...N.viewport,dpr:I,initialDpr:N.viewport.initialDpr||I}}}),setFrameloop:(w="always")=>{const N=f().clock;N.stop(),N.elapsedTime=0,w!=="never"&&(N.start(),N.elapsedTime=0),c(()=>({frameloop:w}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:ct.createRef(),active:!1,frames:0,priority:0,subscribe:(w,N,I)=>{const z=f().internal;return z.priority=z.priority+(N>0?1:0),z.subscribers.push({ref:w,priority:N,store:I}),z.subscribers=z.subscribers.sort((F,H)=>F.priority-H.priority),()=>{const F=f().internal;F!=null&&F.subscribers&&(F.priority=F.priority-(N>0?1:0),F.subscribers=F.subscribers.filter(H=>H.ref!==w))}}}}}),n=e.getState();let a=n.size,s=n.viewport.dpr,o=n.camera;return e.subscribe(()=>{const{camera:c,size:f,viewport:d,gl:g,set:y}=e.getState();if(f.width!==a.width||f.height!==a.height||d.dpr!==s){a=f,s=d.dpr,R8(c,f),d.dpr>0&&g.setPixelRatio(d.dpr);const x=typeof HTMLCanvasElement<"u"&&g.domElement instanceof HTMLCanvasElement;g.setSize(f.width,f.height,x)}c!==o&&(o=c,y(x=>({viewport:{...x.viewport,...x.viewport.getCurrentViewport(c)}})))}),e.subscribe(c=>i(c)),e};function sD(){const i=ct.useContext(aD);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function Pr(i=e=>e,t){return sD()(i,t)}function Y1(i,t=0){const e=sD(),n=e.getState().internal.subscribe,a=tD(i);return U0(()=>n(a,t,e),[t,n,e]),null}var N8={version:"9.4.2"};function U8(i){const t=f8(i);return t.injectIntoDevTools(),t}const rD=0,Kp={},I8=/^three(?=[A-Z])/,Z1=i=>`${i[0].toUpperCase()}${i.slice(1)}`;let P8=0;const z8=i=>typeof i=="function";function B8(i){if(z8(i)){const t=`${P8++}`;return Kp[t]=i,t}else Object.assign(Kp,i)}function oD(i,t){const e=Z1(i),n=Kp[e];if(i!=="primitive"&&!n)throw new Error(`R3F: ${e} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(i==="primitive"&&!t.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(t.args!==void 0&&!Array.isArray(t.args))throw new Error("R3F: The args prop must be an array!")}function F8(i,t,e){var n;return i=Z1(i)in Kp?i:i.replace(I8,""),oD(i,t),i==="primitive"&&(n=t.object)!=null&&n.__r3f&&delete t.object.__r3f,Y_(t.object,e,i,t)}function k8(i){if(!i.isHidden){var t;i.props.attach&&(t=i.parent)!=null&&t.object?K_(i.parent,i):no(i.object)&&(i.object.visible=!1),i.isHidden=!0,sm(i)}}function lD(i){if(i.isHidden){var t;i.props.attach&&(t=i.parent)!=null&&t.object?Z_(i.parent,i):no(i.object)&&i.props.visible!==!1&&(i.object.visible=!0),i.isHidden=!1,sm(i)}}function _M(i,t,e){const n=t.root.getState();if(!(!i.parent&&i.object!==n.scene)){if(!t.object){var a,s;const o=Kp[Z1(t.type)];t.object=(a=t.props.object)!=null?a:new o(...(s=t.props.args)!=null?s:[]),t.object.__r3f=t}if(Nf(t.object,t.props),t.props.attach)Z_(i,t);else if(no(t.object)&&no(i.object)){const o=i.object.children.indexOf(e?.object);if(e&&o!==-1){const c=i.object.children.indexOf(t.object);if(c!==-1){i.object.children.splice(c,1);const f=c<o?o-1:o;i.object.children.splice(f,0,t.object)}else t.object.parent=i.object,i.object.children.splice(o,0,t.object),t.object.dispatchEvent({type:"added"}),i.object.dispatchEvent({type:"childadded",child:t.object})}else i.object.add(t.object)}for(const o of t.children)_M(t,o);sm(t)}}function qS(i,t){t&&(t.parent=i,i.children.push(t),_M(i,t))}function i3(i,t,e){if(!t||!e)return;t.parent=i;const n=i.children.indexOf(e);n!==-1?i.children.splice(n,0,t):i.children.push(t),_M(i,t,e)}function cD(i){if(typeof i.dispose=="function"){const t=()=>{try{i.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?t():$E.unstable_scheduleCallback($E.unstable_IdlePriority,t)}}function Vb(i,t,e){if(!t)return;t.parent=null;const n=i.children.indexOf(t);n!==-1&&i.children.splice(n,1),t.props.attach?K_(i,t):no(t.object)&&no(i.object)&&(i.object.remove(t.object),D8(JR(t),t.object));const a=t.props.dispose!==null&&e!==!1;for(let s=t.children.length-1;s>=0;s--){const o=t.children[s];Vb(t,o,a)}t.children.length=0,delete t.object.__r3f,a&&t.type!=="primitive"&&t.object.type!=="Scene"&&cD(t.object),e===void 0&&sm(t)}function V8(i,t){for(const e of[i,i.alternate])if(e!==null)if(typeof e.ref=="function"){e.refCleanup==null||e.refCleanup();const n=e.ref(t);typeof n=="function"&&(e.refCleanup=n)}else e.ref&&(e.ref.current=t)}const Zy=[];function H8(){for(const[e]of Zy){const n=e.parent;if(n){e.props.attach?K_(n,e):no(e.object)&&no(n.object)&&n.object.remove(e.object);for(const a of e.children)a.props.attach?K_(e,a):no(a.object)&&no(e.object)&&e.object.remove(a.object)}e.isHidden&&lD(e),e.object.__r3f&&delete e.object.__r3f,e.type!=="primitive"&&cD(e.object)}for(const[e,n,a]of Zy){e.props=n;const s=e.parent;if(s){var i,t;const o=Kp[Z1(e.type)];e.object=(i=e.props.object)!=null?i:new o(...(t=e.props.args)!=null?t:[]),e.object.__r3f=e,V8(a,e.object),Nf(e.object,e.props),e.props.attach?Z_(s,e):no(e.object)&&no(s.object)&&s.object.add(e.object);for(const c of e.children)c.props.attach?Z_(e,c):no(c.object)&&no(e.object)&&e.object.add(c.object);sm(e)}}Zy.length=0}const XS=()=>{},a3={};let Ly=rD;const G8=0,j8=4,Hb=U8({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:F8,removeChild:Vb,appendChild:qS,appendInitialChild:qS,insertBefore:i3,appendChildToContainer(i,t){const e=i.getState().scene.__r3f;!t||!e||qS(e,t)},removeChildFromContainer(i,t){const e=i.getState().scene.__r3f;!t||!e||Vb(e,t)},insertInContainerBefore(i,t,e){const n=i.getState().scene.__r3f;!t||!e||!n||i3(n,t,e)},getRootHostContext:()=>a3,getChildHostContext:()=>a3,commitUpdate(i,t,e,n,a){var s,o,c;oD(t,n);let f=!1;if((i.type==="primitive"&&e.object!==n.object||((s=n.args)==null?void 0:s.length)!==((o=e.args)==null?void 0:o.length)||(c=n.args)!=null&&c.some((g,y)=>{var x;return g!==((x=e.args)==null?void 0:x[y])}))&&(f=!0),f)Zy.push([i,{...n},a]);else{const g=E8(i,n);Object.keys(g).length&&(Object.assign(i.props,g),Nf(i.object,g))}(a.sibling===null||(a.flags&j8)===G8)&&H8()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:i=>i?.object,prepareForCommit:()=>null,preparePortalMount:i=>Y_(i.getState().scene,i,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:k8,unhideInstance:lD,createTextInstance:XS,hideTextInstance:XS,unhideTextInstance:XS,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:ct.createContext(null),setCurrentUpdatePriority(i){Ly=i},getCurrentUpdatePriority(){return Ly},resolveUpdatePriority(){var i;if(Ly!==rD)return Ly;switch(typeof window<"u"&&((i=window.event)==null?void 0:i.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Wy.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Wy.ContinuousEventPriority;default:return Wy.DefaultEventPriority}},resetFormInstance(){},rendererPackageName:"@react-three/fiber",rendererVersion:N8.version}),fd=new Map,Ep={objects:"shallow",strict:!1};function W8(i,t){if(!t&&typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:e,height:n,top:a,left:s}=i.parentElement.getBoundingClientRect();return{width:e,height:n,top:a,left:s}}else if(!t&&typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...t}}function q8(i){const t=fd.get(i),e=t?.fiber,n=t?.store;t&&console.warn("R3F.createRoot should only be called once!");const a=typeof reportError=="function"?reportError:console.error,s=n||O8(Wb,r3),o=e||Hb.createContainer(s,Wy.ConcurrentRoot,null,!1,null,"",a,a,a,null);t||fd.set(i,{fiber:o,store:s});let c,f,d=!1,g=null;return{async configure(y={}){let x;g=new Promise(G=>x=G);let{gl:b,size:T,scene:R,events:C,onCreated:w,shadows:N=!1,linear:I=!1,flat:z=!1,legacy:F=!1,orthographic:H=!1,frameloop:q="always",dpr:Z=[1,2],performance:B,raycaster:V,camera:Q,onPointerMissed:J}=y,rt=s.getState(),ut=rt.gl;if(!rt.gl){const G={canvas:i,powerPreference:"high-performance",antialias:!0,alpha:!0},nt=typeof b=="function"?await b(G):b;n3(nt)?ut=nt:ut=new YR({...G,...b}),rt.set({gl:ut})}let vt=rt.raycaster;vt||rt.set({raycaster:vt=new kR});const{params:j,...K}=V||{};if(ua.equ(K,vt,Ep)||Nf(vt,{...K}),ua.equ(j,vt.params,Ep)||Nf(vt,{params:{...vt.params,...j}}),!rt.camera||rt.camera===f&&!ua.equ(f,Q,Ep)){f=Q;const G=Q?.isCamera,nt=G?Q:H?new $l(0,0,0,0,.1,1e3):new fa(75,0,.1,1e3);G||(nt.position.z=5,Q&&(Nf(nt,Q),nt.manual||("aspect"in Q||"left"in Q||"right"in Q||"bottom"in Q||"top"in Q)&&(nt.manual=!0,nt.updateProjectionMatrix())),!rt.camera&&!(Q!=null&&Q.rotation)&&nt.lookAt(0,0,0)),rt.set({camera:nt}),vt.camera=nt}if(!rt.scene){let G;R!=null&&R.isScene?(G=R,Y_(G,s,"",{})):(G=new W2,Y_(G,s,"",{}),R&&Nf(G,R)),rt.set({scene:G})}C&&!rt.events.handlers&&rt.set({events:C(s)});const et=W8(i,T);if(ua.equ(et,rt.size,Ep)||rt.setSize(et.width,et.height,et.top,et.left),Z&&rt.viewport.dpr!==eD(Z)&&rt.setDpr(Z),rt.frameloop!==q&&rt.setFrameloop(q),rt.onPointerMissed||rt.set({onPointerMissed:J}),B&&!ua.equ(B,rt.performance,Ep)&&rt.set(G=>({performance:{...G.performance,...B}})),!rt.xr){var dt;const G=(mt,xt)=>{const ht=s.getState();ht.frameloop!=="never"&&r3(mt,!0,ht,xt)},nt=()=>{const mt=s.getState();mt.gl.xr.enabled=mt.gl.xr.isPresenting,mt.gl.xr.setAnimationLoop(mt.gl.xr.isPresenting?G:null),mt.gl.xr.isPresenting||Wb(mt)},ft={connect(){const mt=s.getState().gl;mt.xr.addEventListener("sessionstart",nt),mt.xr.addEventListener("sessionend",nt)},disconnect(){const mt=s.getState().gl;mt.xr.removeEventListener("sessionstart",nt),mt.xr.removeEventListener("sessionend",nt)}};typeof((dt=ut.xr)==null?void 0:dt.addEventListener)=="function"&&ft.connect(),rt.set({xr:ft})}if(ut.shadowMap){const G=ut.shadowMap.enabled,nt=ut.shadowMap.type;if(ut.shadowMap.enabled=!!N,ua.boo(N))ut.shadowMap.type=Pg;else if(ua.str(N)){var lt;const ft={basic:oC,percentage:Fp,soft:Pg,variance:Xh};ut.shadowMap.type=(lt=ft[N])!=null?lt:Pg}else ua.obj(N)&&Object.assign(ut.shadowMap,N);(G!==ut.shadowMap.enabled||nt!==ut.shadowMap.type)&&(ut.shadowMap.needsUpdate=!0)}return Xn.enabled=!F,d||(ut.outputColorSpace=I?Ff:ir,ut.toneMapping=z?fl:u1),rt.legacy!==F&&rt.set(()=>({legacy:F})),rt.linear!==I&&rt.set(()=>({linear:I})),rt.flat!==z&&rt.set(()=>({flat:z})),b&&!ua.fun(b)&&!n3(b)&&!ua.equ(b,ut,Ep)&&Nf(ut,b),c=w,d=!0,x(),this},render(y){return!d&&!g&&this.configure(),g.then(()=>{Hb.updateContainer(O.jsx(X8,{store:s,children:y,onCreated:c,rootElement:i}),o,null,()=>{})}),s},unmount(){uD(i)}}}function X8({store:i,children:t,onCreated:e,rootElement:n}){return U0(()=>{const a=i.getState();a.set(s=>({internal:{...s.internal,active:!0}})),e&&e(a),i.getState().events.connected||a.events.connect==null||a.events.connect(n)},[]),O.jsx(aD.Provider,{value:i,children:t})}function uD(i,t){const e=fd.get(i),n=e?.fiber;if(n){const a=e?.store.getState();a&&(a.internal.active=!1),Hb.updateContainer(null,n,null,()=>{a&&setTimeout(()=>{try{var s,o,c,f;a.events.disconnect==null||a.events.disconnect(),(s=a.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(c=a.gl)==null||c.forceContextLoss==null||c.forceContextLoss(),(f=a.gl)!=null&&f.xr&&a.xr.disconnect(),M8(a.scene),fd.delete(i)}catch{}},500)})}}const Y8=new Set,Z8=new Set,K8=new Set;function YS(i,t){if(i.size)for(const{callback:e}of i.values())e(t)}function Wg(i,t){switch(i){case"before":return YS(Y8,t);case"after":return YS(Z8,t);case"tail":return YS(K8,t)}}let ZS,KS;function Gb(i,t,e){let n=t.clock.getDelta();t.frameloop==="never"&&typeof i=="number"&&(n=i-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=i),ZS=t.internal.subscribers;for(let a=0;a<ZS.length;a++)KS=ZS[a],KS.ref.current(KS.store.getState(),n,e);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),t.frameloop==="always"?1:t.internal.frames}let Q_=!1,jb=!1,QS,s3,wp;function fD(i){s3=requestAnimationFrame(fD),Q_=!0,QS=0,Wg("before",i),jb=!0;for(const e of fd.values()){var t;wp=e.store.getState(),wp.internal.active&&(wp.frameloop==="always"||wp.internal.frames>0)&&!((t=wp.gl.xr)!=null&&t.isPresenting)&&(QS+=Gb(i,wp))}if(jb=!1,Wg("after",i),QS===0)return Wg("tail",i),Q_=!1,cancelAnimationFrame(s3)}function Wb(i,t=1){var e;if(!i)return fd.forEach(n=>Wb(n.store.getState(),t));(e=i.gl.xr)!=null&&e.isPresenting||!i.internal.active||i.frameloop==="never"||(t>1?i.internal.frames=Math.min(60,i.internal.frames+t):jb?i.internal.frames=2:i.internal.frames=1,Q_||(Q_=!0,requestAnimationFrame(fD)))}function r3(i,t=!0,e,n){if(t&&Wg("before",i),e)Gb(i,e,n);else for(const a of fd.values())Gb(i,a.store.getState());t&&Wg("after",i)}const JS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Q8(i){const{handlePointer:t}=L8(i);return{priority:1,enabled:!0,compute(e,n,a){n.pointer.set(e.offsetX/n.size.width*2-1,-(e.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(JS).reduce((e,n)=>({...e,[n]:t(n)}),{}),update:()=>{var e;const{events:n,internal:a}=i.getState();(e=a.lastEvent)!=null&&e.current&&n.handlers&&n.handlers.onPointerMove(a.lastEvent.current)},connect:e=>{const{set:n,events:a}=i.getState();if(a.disconnect==null||a.disconnect(),n(s=>({events:{...s.events,connected:e}})),a.handlers)for(const s in a.handlers){const o=a.handlers[s],[c,f]=JS[s];e.addEventListener(c,o,{passive:f})}},disconnect:()=>{const{set:e,events:n}=i.getState();if(n.connected){if(n.handlers)for(const a in n.handlers){const s=n.handlers[a],[o]=JS[a];n.connected.removeEventListener(o,s)}e(a=>({events:{...a.events,connected:void 0}}))}}}}function o3(i,t){let e;return(...n)=>{window.clearTimeout(e),e=window.setTimeout(()=>i(...n),t)}}function J8({debounce:i,scroll:t,polyfill:e,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const a=e||(typeof window>"u"?class{}:window.ResizeObserver);if(!a)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=ct.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),c=ct.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),f=i?typeof i=="number"?i:i.scroll:null,d=i?typeof i=="number"?i:i.resize:null,g=ct.useRef(!1);ct.useEffect(()=>(g.current=!0,()=>{g.current=!1}));const[y,x,b]=ct.useMemo(()=>{const w=()=>{if(!c.current.element)return;const{left:N,top:I,width:z,height:F,bottom:H,right:q,x:Z,y:B}=c.current.element.getBoundingClientRect(),V={left:N,top:I,width:z,height:F,bottom:H,right:q,x:Z,y:B};c.current.element instanceof HTMLElement&&n&&(V.height=c.current.element.offsetHeight,V.width=c.current.element.offsetWidth),Object.freeze(V),g.current&&!nk(c.current.lastBounds,V)&&o(c.current.lastBounds=V)};return[w,d?o3(w,d):w,f?o3(w,f):w]},[o,n,f,d]);function T(){c.current.scrollContainers&&(c.current.scrollContainers.forEach(w=>w.removeEventListener("scroll",b,!0)),c.current.scrollContainers=null),c.current.resizeObserver&&(c.current.resizeObserver.disconnect(),c.current.resizeObserver=null),c.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",c.current.orientationHandler))}function R(){c.current.element&&(c.current.resizeObserver=new a(b),c.current.resizeObserver.observe(c.current.element),t&&c.current.scrollContainers&&c.current.scrollContainers.forEach(w=>w.addEventListener("scroll",b,{capture:!0,passive:!0})),c.current.orientationHandler=()=>{b()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",c.current.orientationHandler))}const C=w=>{!w||w===c.current.element||(T(),c.current.element=w,c.current.scrollContainers=hD(w),R())};return tk(b,!!t),$8(x),ct.useEffect(()=>{T(),R()},[t,b,x]),ct.useEffect(()=>T,[]),[C,s,y]}function $8(i){ct.useEffect(()=>{const t=i;return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[i])}function tk(i,t){ct.useEffect(()=>{if(t){const e=i;return window.addEventListener("scroll",e,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",e,!0)}}},[i,t])}function hD(i){const t=[];if(!i||i===document.body)return t;const{overflow:e,overflowX:n,overflowY:a}=window.getComputedStyle(i);return[e,n,a].some(s=>s==="auto"||s==="scroll")&&t.push(i),[...t,...hD(i.parentElement)]}const ek=["x","y","top","bottom","left","right","width","height"],nk=(i,t)=>ek.every(e=>i[e]===t[e]);function ik({ref:i,children:t,fallback:e,resize:n,style:a,gl:s,events:o=Q8,eventSource:c,eventPrefix:f,shadows:d,linear:g,flat:y,legacy:x,orthographic:b,frameloop:T,dpr:R,performance:C,raycaster:w,camera:N,scene:I,onPointerMissed:z,onCreated:F,...H}){ct.useMemo(()=>B8(WF),[]);const q=x8(),[Z,B]=J8({scroll:!0,debounce:{scroll:50,resize:0},...n}),V=ct.useRef(null),Q=ct.useRef(null);ct.useImperativeHandle(i,()=>V.current);const J=tD(z),[rt,ut]=ct.useState(!1),[vt,j]=ct.useState(!1);if(rt)throw rt;if(vt)throw vt;const K=ct.useRef(null);U0(()=>{const dt=V.current;if(B.width>0&&B.height>0&&dt){K.current||(K.current=q8(dt));async function lt(){await K.current.configure({gl:s,scene:I,events:o,shadows:d,linear:g,flat:y,legacy:x,orthographic:b,frameloop:T,dpr:R,performance:C,raycaster:w,camera:N,size:B,onPointerMissed:(...G)=>J.current==null?void 0:J.current(...G),onCreated:G=>{G.events.connect==null||G.events.connect(c?y8(c)?c.current:c:Q.current),f&&G.setEvents({compute:(nt,ft)=>{const mt=nt[f+"X"],xt=nt[f+"Y"];ft.pointer.set(mt/ft.size.width*2-1,-(xt/ft.size.height)*2+1),ft.raycaster.setFromCamera(ft.pointer,ft.camera)}}),F?.(G)}}),K.current.render(O.jsx(q,{children:O.jsx(b8,{set:j,children:O.jsx(ct.Suspense,{fallback:O.jsx(S8,{set:ut}),children:t??null})})}))}lt()}}),ct.useEffect(()=>{const dt=V.current;if(dt)return()=>uD(dt)},[]);const et=c?"none":"auto";return O.jsx("div",{ref:Q,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:et,...a},...H,children:O.jsx("div",{ref:Z,style:{width:"100%",height:"100%"},children:O.jsx("canvas",{ref:V,style:{display:"block"},children:e})})})}function ak(i){return O.jsx(KR,{children:O.jsx(ik,{...i})})}function Qp(){return Qp=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)({}).hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Qp.apply(null,arguments)}const I0=new pt,xM=new pt,sk=new pt,l3=new de;function rk(i,t,e){const n=I0.setFromMatrixPosition(i.matrixWorld);n.project(t);const a=e.width/2,s=e.height/2;return[n.x*a+a,-(n.y*s)+s]}function ok(i,t){const e=I0.setFromMatrixPosition(i.matrixWorld),n=xM.setFromMatrixPosition(t.matrixWorld),a=e.sub(n),s=t.getWorldDirection(sk);return a.angleTo(s)>Math.PI/2}function lk(i,t,e,n){const a=I0.setFromMatrixPosition(i.matrixWorld),s=a.clone();s.project(t),l3.set(s.x,s.y),e.setFromCamera(l3,t);const o=e.intersectObjects(n,!0);if(o.length){const c=o[0].distance;return a.distanceTo(e.ray.origin)<c}return!0}function ck(i,t){if(t instanceof $l)return t.zoom;if(t instanceof fa){const e=I0.setFromMatrixPosition(i.matrixWorld),n=xM.setFromMatrixPosition(t.matrixWorld),a=t.fov*Math.PI/180,s=e.distanceTo(n);return 1/(2*Math.tan(a/2)*s)}else return 1}function uk(i,t,e){if(t instanceof fa||t instanceof $l){const n=I0.setFromMatrixPosition(i.matrixWorld),a=xM.setFromMatrixPosition(t.matrixWorld),s=n.distanceTo(a),o=(e[1]-e[0])/(t.far-t.near),c=e[1]-o*t.far;return Math.round(o*s+c)}}const qb=i=>Math.abs(i)<1e-10?0:i;function dD(i,t,e=""){let n="matrix3d(";for(let a=0;a!==16;a++)n+=qb(t[a]*i.elements[a])+(a!==15?",":")");return e+n}const fk=(i=>t=>dD(t,i))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),hk=(i=>(t,e)=>dD(t,i(e),"translate(-50%,-50%)"))(i=>[1/i,1/i,1/i,1,-1/i,-1/i,-1/i,-1,1/i,1/i,1/i,1,1,1,1,1]);function dk(i){return i&&typeof i=="object"&&"current"in i}const pk=ct.forwardRef(({children:i,eps:t=.001,style:e,className:n,prepend:a,center:s,fullscreen:o,portal:c,distanceFactor:f,sprite:d=!1,transform:g=!1,occlude:y,onOcclude:x,castShadow:b,receiveShadow:T,material:R,geometry:C,zIndexRange:w=[16777271,0],calculatePosition:N=rk,as:I="div",wrapperClass:z,pointerEvents:F="auto",...H},q)=>{const{gl:Z,camera:B,scene:V,size:Q,raycaster:J,events:rt,viewport:ut}=Pr(),[vt]=ct.useState(()=>document.createElement(I)),j=ct.useRef(null),K=ct.useRef(null),et=ct.useRef(0),dt=ct.useRef([0,0]),lt=ct.useRef(null),G=ct.useRef(null),nt=c?.current||rt.connected||Z.domElement.parentNode,ft=ct.useRef(null),mt=ct.useRef(!1),xt=ct.useMemo(()=>y&&y!=="blending"||Array.isArray(y)&&y.length&&dk(y[0]),[y]);ct.useLayoutEffect(()=>{const te=Z.domElement;y&&y==="blending"?(te.style.zIndex=`${Math.floor(w[0]/2)}`,te.style.position="absolute",te.style.pointerEvents="none"):(te.style.zIndex=null,te.style.position=null,te.style.pointerEvents=null)},[y]),ct.useLayoutEffect(()=>{if(K.current){const te=j.current=jw.createRoot(vt);if(V.updateMatrixWorld(),g)vt.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const qt=N(K.current,B,Q);vt.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${qt[0]}px,${qt[1]}px,0);transform-origin:0 0;`}return nt&&(a?nt.prepend(vt):nt.appendChild(vt)),()=>{nt&&nt.removeChild(vt),te.unmount()}}},[nt,g]),ct.useLayoutEffect(()=>{z&&(vt.className=z)},[z]);const ht=ct.useMemo(()=>g?{position:"absolute",top:0,left:0,width:Q.width,height:Q.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-Q.height/2,left:-Q.width/2,width:Q.width,height:Q.height},...e},[e,s,o,Q,g]),_t=ct.useMemo(()=>({position:"absolute",pointerEvents:F}),[F]);ct.useLayoutEffect(()=>{if(mt.current=!1,g){var te;(te=j.current)==null||te.render(ct.createElement("div",{ref:lt,style:ht},ct.createElement("div",{ref:G,style:_t},ct.createElement("div",{ref:q,className:n,style:e,children:i}))))}else{var qt;(qt=j.current)==null||qt.render(ct.createElement("div",{ref:q,style:ht,className:n,children:i}))}});const At=ct.useRef(!0);Y1(te=>{if(K.current){B.updateMatrixWorld(),K.current.updateWorldMatrix(!0,!1);const qt=g?dt.current:N(K.current,B,Q);if(g||Math.abs(et.current-B.zoom)>t||Math.abs(dt.current[0]-qt[0])>t||Math.abs(dt.current[1]-qt[1])>t){const ne=ok(K.current,B);let Se=!1;xt&&(Array.isArray(y)?Se=y.map(re=>re.current):y!=="blending"&&(Se=[V]));const Nt=At.current;if(Se){const re=lk(K.current,B,J,Se);At.current=re&&!ne}else At.current=!ne;Nt!==At.current&&(x?x(!At.current):vt.style.display=At.current?"block":"none");const Vt=Math.floor(w[0]/2),Ft=y?xt?[w[0],Vt]:[Vt-1,0]:w;if(vt.style.zIndex=`${uk(K.current,B,Ft)}`,g){const[re,at]=[Q.width/2,Q.height/2],ue=B.projectionMatrix.elements[5]*at,{isOrthographicCamera:Zt,top:Lt,left:ee,bottom:$,right:Y}=B,yt=fk(B.matrixWorldInverse),Bt=Zt?`scale(${ue})translate(${qb(-(Y+ee)/2)}px,${qb((Lt+$)/2)}px)`:`translateZ(${ue}px)`;let Dt=K.current.matrixWorld;d&&(Dt=B.matrixWorldInverse.clone().transpose().copyPosition(Dt).scale(K.current.scale),Dt.elements[3]=Dt.elements[7]=Dt.elements[11]=0,Dt.elements[15]=1),vt.style.width=Q.width+"px",vt.style.height=Q.height+"px",vt.style.perspective=Zt?"":`${ue}px`,lt.current&&G.current&&(lt.current.style.transform=`${Bt}${yt}translate(${re}px,${at}px)`,G.current.style.transform=hk(Dt,1/((f||10)/400)))}else{const re=f===void 0?1:ck(K.current,B)*f;vt.style.transform=`translate3d(${qt[0]}px,${qt[1]}px,0) scale(${re})`}dt.current=qt,et.current=B.zoom}}if(!xt&&ft.current&&!mt.current)if(g){if(lt.current){const qt=lt.current.children[0];if(qt!=null&&qt.clientWidth&&qt!=null&&qt.clientHeight){const{isOrthographicCamera:ne}=B;if(ne||C)H.scale&&(Array.isArray(H.scale)?H.scale instanceof pt?ft.current.scale.copy(H.scale.clone().divideScalar(1)):ft.current.scale.set(1/H.scale[0],1/H.scale[1],1/H.scale[2]):ft.current.scale.setScalar(1/H.scale));else{const Se=(f||10)/400,Nt=qt.clientWidth*Se,Vt=qt.clientHeight*Se;ft.current.scale.set(Nt,Vt,1)}mt.current=!0}}}else{const qt=vt.children[0];if(qt!=null&&qt.clientWidth&&qt!=null&&qt.clientHeight){const ne=1/ut.factor,Se=qt.clientWidth*ne,Nt=qt.clientHeight*ne;ft.current.scale.set(Se,Nt,1),mt.current=!0}ft.current.lookAt(te.camera.position)}});const $t=ct.useMemo(()=>({vertexShader:g?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[g]);return ct.createElement("group",Qp({},H,{ref:K}),y&&!xt&&ct.createElement("mesh",{castShadow:b,receiveShadow:T,ref:ft},C||ct.createElement("planeGeometry",null),R||ct.createElement("shaderMaterial",{side:cl,vertexShader:$t.vertexShader,fragmentShader:$t.fragmentShader})))});var mk=Object.defineProperty,gk=(i,t,e)=>t in i?mk(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,vk=(i,t,e)=>(gk(i,t+"",e),e);class yk{constructor(){vk(this,"_listeners")}addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)}hasEventListener(t,e){if(this._listeners===void 0)return!1;const n=this._listeners;return n[t]!==void 0&&n[t].indexOf(e)!==-1}removeEventListener(t,e){if(this._listeners===void 0)return;const a=this._listeners[t];if(a!==void 0){const s=a.indexOf(e);s!==-1&&a.splice(s,1)}}dispatchEvent(t){if(this._listeners===void 0)return;const n=this._listeners[t.type];if(n!==void 0){t.target=this;const a=n.slice(0);for(let s=0,o=a.length;s<o;s++)a[s].call(this,t);t.target=null}}}var _k=Object.defineProperty,xk=(i,t,e)=>t in i?_k(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,fn=(i,t,e)=>(xk(i,typeof t!="symbol"?t+"":t,e),e);const Oy=new dd,c3=new wu,Sk=Math.cos(70*(Math.PI/180)),u3=(i,t)=>(i%t+t)%t;let bk=class extends yk{constructor(t,e){super(),fn(this,"object"),fn(this,"domElement"),fn(this,"enabled",!0),fn(this,"target",new pt),fn(this,"minDistance",0),fn(this,"maxDistance",1/0),fn(this,"minZoom",0),fn(this,"maxZoom",1/0),fn(this,"minPolarAngle",0),fn(this,"maxPolarAngle",Math.PI),fn(this,"minAzimuthAngle",-1/0),fn(this,"maxAzimuthAngle",1/0),fn(this,"enableDamping",!1),fn(this,"dampingFactor",.05),fn(this,"enableZoom",!0),fn(this,"zoomSpeed",1),fn(this,"enableRotate",!0),fn(this,"rotateSpeed",1),fn(this,"enablePan",!0),fn(this,"panSpeed",1),fn(this,"screenSpacePanning",!0),fn(this,"keyPanSpeed",7),fn(this,"zoomToCursor",!1),fn(this,"autoRotate",!1),fn(this,"autoRotateSpeed",2),fn(this,"reverseOrbit",!1),fn(this,"reverseHorizontalOrbit",!1),fn(this,"reverseVerticalOrbit",!1),fn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),fn(this,"mouseButtons",{LEFT:Hh.ROTATE,MIDDLE:Hh.DOLLY,RIGHT:Hh.PAN}),fn(this,"touches",{ONE:Gh.ROTATE,TWO:Gh.DOLLY_PAN}),fn(this,"target0"),fn(this,"position0"),fn(this,"zoom0"),fn(this,"_domElementKeyEvents",null),fn(this,"getPolarAngle"),fn(this,"getAzimuthalAngle"),fn(this,"setPolarAngle"),fn(this,"setAzimuthalAngle"),fn(this,"getDistance"),fn(this,"getZoomScale"),fn(this,"listenToKeyEvents"),fn(this,"stopListenToKeyEvents"),fn(this,"saveState"),fn(this,"reset"),fn(this,"update"),fn(this,"connect"),fn(this,"dispose"),fn(this,"dollyIn"),fn(this,"dollyOut"),fn(this,"getScale"),fn(this,"setScale"),this.object=t,this.domElement=e,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>g.phi,this.getAzimuthalAngle=()=>g.theta,this.setPolarAngle=gt=>{let wt=u3(gt,2*Math.PI),xe=g.phi;xe<0&&(xe+=2*Math.PI),wt<0&&(wt+=2*Math.PI);let St=Math.abs(wt-xe);2*Math.PI-St<St&&(wt<xe?wt+=2*Math.PI:xe+=2*Math.PI),y.phi=wt-xe,n.update()},this.setAzimuthalAngle=gt=>{let wt=u3(gt,2*Math.PI),xe=g.theta;xe<0&&(xe+=2*Math.PI),wt<0&&(wt+=2*Math.PI);let St=Math.abs(wt-xe);2*Math.PI-St<St&&(wt<xe?wt+=2*Math.PI:xe+=2*Math.PI),y.theta=wt-xe,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=gt=>{gt.addEventListener("keydown",Ct),this._domElementKeyEvents=gt},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Ct),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(a),n.update(),f=c.NONE},this.update=(()=>{const gt=new pt,wt=new pt(0,1,0),xe=new or().setFromUnitVectors(t.up,wt),St=xe.clone().invert(),ie=new pt,le=new or,Ae=2*Math.PI;return function(){const jt=n.object.position;xe.setFromUnitVectors(t.up,wt),St.copy(xe).invert(),gt.copy(jt).sub(n.target),gt.applyQuaternion(xe),g.setFromVector3(gt),n.autoRotate&&f===c.NONE&&ut(J()),n.enableDamping?(g.theta+=y.theta*n.dampingFactor,g.phi+=y.phi*n.dampingFactor):(g.theta+=y.theta,g.phi+=y.phi);let me=n.minAzimuthAngle,Re=n.maxAzimuthAngle;isFinite(me)&&isFinite(Re)&&(me<-Math.PI?me+=Ae:me>Math.PI&&(me-=Ae),Re<-Math.PI?Re+=Ae:Re>Math.PI&&(Re-=Ae),me<=Re?g.theta=Math.max(me,Math.min(Re,g.theta)):g.theta=g.theta>(me+Re)/2?Math.max(me,g.theta):Math.min(Re,g.theta)),g.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,g.phi)),g.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(b,n.dampingFactor):n.target.add(b),n.zoomToCursor&&B||n.object.isOrthographicCamera?g.radius=ft(g.radius):g.radius=ft(g.radius*x),gt.setFromSpherical(g),gt.applyQuaternion(St),jt.copy(n.target).add(gt),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(y.theta*=1-n.dampingFactor,y.phi*=1-n.dampingFactor,b.multiplyScalar(1-n.dampingFactor)):(y.set(0,0,0),b.set(0,0,0));let Le=!1;if(n.zoomToCursor&&B){let qe=null;if(n.object instanceof fa&&n.object.isPerspectiveCamera){const bn=gt.length();qe=ft(bn*x);const Bn=bn-qe;n.object.position.addScaledVector(q,Bn),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const bn=new pt(Z.x,Z.y,0);bn.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/x)),n.object.updateProjectionMatrix(),Le=!0;const Bn=new pt(Z.x,Z.y,0);Bn.unproject(n.object),n.object.position.sub(Bn).add(bn),n.object.updateMatrixWorld(),qe=gt.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;qe!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(qe).add(n.object.position):(Oy.origin.copy(n.object.position),Oy.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(Oy.direction))<Sk?t.lookAt(n.target):(c3.setFromNormalAndCoplanarPoint(n.object.up,n.target),Oy.intersectPlane(c3,n.target))))}else n.object instanceof $l&&n.object.isOrthographicCamera&&(Le=x!==1,Le&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/x)),n.object.updateProjectionMatrix()));return x=1,B=!1,Le||ie.distanceToSquared(n.object.position)>d||8*(1-le.dot(n.object.quaternion))>d?(n.dispatchEvent(a),ie.copy(n.object.position),le.copy(n.object.quaternion),Le=!1,!0):!1}})(),this.connect=gt=>{n.domElement=gt,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",be),n.domElement.addEventListener("pointerdown",ee),n.domElement.addEventListener("pointercancel",Y),n.domElement.addEventListener("wheel",Dt)},this.dispose=()=>{var gt,wt,xe,St,ie,le;n.domElement&&(n.domElement.style.touchAction="auto"),(gt=n.domElement)==null||gt.removeEventListener("contextmenu",be),(wt=n.domElement)==null||wt.removeEventListener("pointerdown",ee),(xe=n.domElement)==null||xe.removeEventListener("pointercancel",Y),(St=n.domElement)==null||St.removeEventListener("wheel",Dt),(ie=n.domElement)==null||ie.ownerDocument.removeEventListener("pointermove",$),(le=n.domElement)==null||le.ownerDocument.removeEventListener("pointerup",Y),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",Ct)};const n=this,a={type:"change"},s={type:"start"},o={type:"end"},c={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let f=c.NONE;const d=1e-6,g=new Ib,y=new Ib;let x=1;const b=new pt,T=new de,R=new de,C=new de,w=new de,N=new de,I=new de,z=new de,F=new de,H=new de,q=new pt,Z=new de;let B=!1;const V=[],Q={};function J(){return 2*Math.PI/60/60*n.autoRotateSpeed}function rt(){return Math.pow(.95,n.zoomSpeed)}function ut(gt){n.reverseOrbit||n.reverseHorizontalOrbit?y.theta+=gt:y.theta-=gt}function vt(gt){n.reverseOrbit||n.reverseVerticalOrbit?y.phi+=gt:y.phi-=gt}const j=(()=>{const gt=new pt;return function(xe,St){gt.setFromMatrixColumn(St,0),gt.multiplyScalar(-xe),b.add(gt)}})(),K=(()=>{const gt=new pt;return function(xe,St){n.screenSpacePanning===!0?gt.setFromMatrixColumn(St,1):(gt.setFromMatrixColumn(St,0),gt.crossVectors(n.object.up,gt)),gt.multiplyScalar(xe),b.add(gt)}})(),et=(()=>{const gt=new pt;return function(xe,St){const ie=n.domElement;if(ie&&n.object instanceof fa&&n.object.isPerspectiveCamera){const le=n.object.position;gt.copy(le).sub(n.target);let Ae=gt.length();Ae*=Math.tan(n.object.fov/2*Math.PI/180),j(2*xe*Ae/ie.clientHeight,n.object.matrix),K(2*St*Ae/ie.clientHeight,n.object.matrix)}else ie&&n.object instanceof $l&&n.object.isOrthographicCamera?(j(xe*(n.object.right-n.object.left)/n.object.zoom/ie.clientWidth,n.object.matrix),K(St*(n.object.top-n.object.bottom)/n.object.zoom/ie.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function dt(gt){n.object instanceof fa&&n.object.isPerspectiveCamera||n.object instanceof $l&&n.object.isOrthographicCamera?x=gt:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function lt(gt){dt(x/gt)}function G(gt){dt(x*gt)}function nt(gt){if(!n.zoomToCursor||!n.domElement)return;B=!0;const wt=n.domElement.getBoundingClientRect(),xe=gt.clientX-wt.left,St=gt.clientY-wt.top,ie=wt.width,le=wt.height;Z.x=xe/ie*2-1,Z.y=-(St/le)*2+1,q.set(Z.x,Z.y,1).unproject(n.object).sub(n.object.position).normalize()}function ft(gt){return Math.max(n.minDistance,Math.min(n.maxDistance,gt))}function mt(gt){T.set(gt.clientX,gt.clientY)}function xt(gt){nt(gt),z.set(gt.clientX,gt.clientY)}function ht(gt){w.set(gt.clientX,gt.clientY)}function _t(gt){R.set(gt.clientX,gt.clientY),C.subVectors(R,T).multiplyScalar(n.rotateSpeed);const wt=n.domElement;wt&&(ut(2*Math.PI*C.x/wt.clientHeight),vt(2*Math.PI*C.y/wt.clientHeight)),T.copy(R),n.update()}function At(gt){F.set(gt.clientX,gt.clientY),H.subVectors(F,z),H.y>0?lt(rt()):H.y<0&&G(rt()),z.copy(F),n.update()}function $t(gt){N.set(gt.clientX,gt.clientY),I.subVectors(N,w).multiplyScalar(n.panSpeed),et(I.x,I.y),w.copy(N),n.update()}function te(gt){nt(gt),gt.deltaY<0?G(rt()):gt.deltaY>0&&lt(rt()),n.update()}function qt(gt){let wt=!1;switch(gt.code){case n.keys.UP:et(0,n.keyPanSpeed),wt=!0;break;case n.keys.BOTTOM:et(0,-n.keyPanSpeed),wt=!0;break;case n.keys.LEFT:et(n.keyPanSpeed,0),wt=!0;break;case n.keys.RIGHT:et(-n.keyPanSpeed,0),wt=!0;break}wt&&(gt.preventDefault(),n.update())}function ne(){if(V.length==1)T.set(V[0].pageX,V[0].pageY);else{const gt=.5*(V[0].pageX+V[1].pageX),wt=.5*(V[0].pageY+V[1].pageY);T.set(gt,wt)}}function Se(){if(V.length==1)w.set(V[0].pageX,V[0].pageY);else{const gt=.5*(V[0].pageX+V[1].pageX),wt=.5*(V[0].pageY+V[1].pageY);w.set(gt,wt)}}function Nt(){const gt=V[0].pageX-V[1].pageX,wt=V[0].pageY-V[1].pageY,xe=Math.sqrt(gt*gt+wt*wt);z.set(0,xe)}function Vt(){n.enableZoom&&Nt(),n.enablePan&&Se()}function Ft(){n.enableZoom&&Nt(),n.enableRotate&&ne()}function re(gt){if(V.length==1)R.set(gt.pageX,gt.pageY);else{const xe=se(gt),St=.5*(gt.pageX+xe.x),ie=.5*(gt.pageY+xe.y);R.set(St,ie)}C.subVectors(R,T).multiplyScalar(n.rotateSpeed);const wt=n.domElement;wt&&(ut(2*Math.PI*C.x/wt.clientHeight),vt(2*Math.PI*C.y/wt.clientHeight)),T.copy(R)}function at(gt){if(V.length==1)N.set(gt.pageX,gt.pageY);else{const wt=se(gt),xe=.5*(gt.pageX+wt.x),St=.5*(gt.pageY+wt.y);N.set(xe,St)}I.subVectors(N,w).multiplyScalar(n.panSpeed),et(I.x,I.y),w.copy(N)}function ue(gt){const wt=se(gt),xe=gt.pageX-wt.x,St=gt.pageY-wt.y,ie=Math.sqrt(xe*xe+St*St);F.set(0,ie),H.set(0,Math.pow(F.y/z.y,n.zoomSpeed)),lt(H.y),z.copy(F)}function Zt(gt){n.enableZoom&&ue(gt),n.enablePan&&at(gt)}function Lt(gt){n.enableZoom&&ue(gt),n.enableRotate&&re(gt)}function ee(gt){var wt,xe;n.enabled!==!1&&(V.length===0&&((wt=n.domElement)==null||wt.ownerDocument.addEventListener("pointermove",$),(xe=n.domElement)==null||xe.ownerDocument.addEventListener("pointerup",Y)),Ce(gt),gt.pointerType==="touch"?ve(gt):yt(gt))}function $(gt){n.enabled!==!1&&(gt.pointerType==="touch"?he(gt):Bt(gt))}function Y(gt){var wt,xe,St;Gt(gt),V.length===0&&((wt=n.domElement)==null||wt.releasePointerCapture(gt.pointerId),(xe=n.domElement)==null||xe.ownerDocument.removeEventListener("pointermove",$),(St=n.domElement)==null||St.ownerDocument.removeEventListener("pointerup",Y)),n.dispatchEvent(o),f=c.NONE}function yt(gt){let wt;switch(gt.button){case 0:wt=n.mouseButtons.LEFT;break;case 1:wt=n.mouseButtons.MIDDLE;break;case 2:wt=n.mouseButtons.RIGHT;break;default:wt=-1}switch(wt){case Hh.DOLLY:if(n.enableZoom===!1)return;xt(gt),f=c.DOLLY;break;case Hh.ROTATE:if(gt.ctrlKey||gt.metaKey||gt.shiftKey){if(n.enablePan===!1)return;ht(gt),f=c.PAN}else{if(n.enableRotate===!1)return;mt(gt),f=c.ROTATE}break;case Hh.PAN:if(gt.ctrlKey||gt.metaKey||gt.shiftKey){if(n.enableRotate===!1)return;mt(gt),f=c.ROTATE}else{if(n.enablePan===!1)return;ht(gt),f=c.PAN}break;default:f=c.NONE}f!==c.NONE&&n.dispatchEvent(s)}function Bt(gt){if(n.enabled!==!1)switch(f){case c.ROTATE:if(n.enableRotate===!1)return;_t(gt);break;case c.DOLLY:if(n.enableZoom===!1)return;At(gt);break;case c.PAN:if(n.enablePan===!1)return;$t(gt);break}}function Dt(gt){n.enabled===!1||n.enableZoom===!1||f!==c.NONE&&f!==c.ROTATE||(gt.preventDefault(),n.dispatchEvent(s),te(gt),n.dispatchEvent(o))}function Ct(gt){n.enabled===!1||n.enablePan===!1||qt(gt)}function ve(gt){switch(Qt(gt),V.length){case 1:switch(n.touches.ONE){case Gh.ROTATE:if(n.enableRotate===!1)return;ne(),f=c.TOUCH_ROTATE;break;case Gh.PAN:if(n.enablePan===!1)return;Se(),f=c.TOUCH_PAN;break;default:f=c.NONE}break;case 2:switch(n.touches.TWO){case Gh.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Vt(),f=c.TOUCH_DOLLY_PAN;break;case Gh.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Ft(),f=c.TOUCH_DOLLY_ROTATE;break;default:f=c.NONE}break;default:f=c.NONE}f!==c.NONE&&n.dispatchEvent(s)}function he(gt){switch(Qt(gt),f){case c.TOUCH_ROTATE:if(n.enableRotate===!1)return;re(gt),n.update();break;case c.TOUCH_PAN:if(n.enablePan===!1)return;at(gt),n.update();break;case c.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Zt(gt),n.update();break;case c.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Lt(gt),n.update();break;default:f=c.NONE}}function be(gt){n.enabled!==!1&&gt.preventDefault()}function Ce(gt){V.push(gt)}function Gt(gt){delete Q[gt.pointerId];for(let wt=0;wt<V.length;wt++)if(V[wt].pointerId==gt.pointerId){V.splice(wt,1);return}}function Qt(gt){let wt=Q[gt.pointerId];wt===void 0&&(wt=new de,Q[gt.pointerId]=wt),wt.set(gt.pageX,gt.pageY)}function se(gt){const wt=gt.pointerId===V[0].pointerId?V[1]:V[0];return Q[wt.pointerId]}this.dollyIn=(gt=rt())=>{G(gt),n.update()},this.dollyOut=(gt=rt())=>{lt(gt),n.update()},this.getScale=()=>x,this.setScale=gt=>{dt(gt),n.update()},this.getZoomScale=()=>rt(),e!==void 0&&this.connect(e),this.update()}};function Mk(){var i=Object.create(null);function t(a,s){var o=a.id,c=a.name,f=a.dependencies;f===void 0&&(f=[]);var d=a.init;d===void 0&&(d=function(){});var g=a.getTransferables;if(g===void 0&&(g=null),!i[o])try{f=f.map(function(x){return x&&x.isWorkerModule&&(t(x,function(b){if(b instanceof Error)throw b}),x=i[x.id].value),x}),d=n("<"+c+">.init",d),g&&(g=n("<"+c+">.getTransferables",g));var y=null;typeof d=="function"?y=d.apply(void 0,f):console.error("worker module init function failed to rehydrate"),i[o]={id:o,value:y,getTransferables:g},s(y)}catch(x){x&&x.noLog||console.error(x),s(x)}}function e(a,s){var o,c=a.id,f=a.args;(!i[c]||typeof i[c].value!="function")&&s(new Error("Worker module "+c+": not found or its 'init' did not return a function"));try{var d=(o=i[c]).value.apply(o,f);d&&typeof d.then=="function"?d.then(g,function(y){return s(y instanceof Error?y:new Error(""+y))}):g(d)}catch(y){s(y)}function g(y){try{var x=i[c].getTransferables&&i[c].getTransferables(y);(!x||!Array.isArray(x)||!x.length)&&(x=void 0),s(y,x)}catch(b){console.error(b),s(b)}}}function n(a,s){var o=void 0;self.troikaDefine=function(f){return o=f};var c=URL.createObjectURL(new Blob(["/** "+a.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(c)}catch(f){console.error(f)}return URL.revokeObjectURL(c),delete self.troikaDefine,o}self.addEventListener("message",function(a){var s=a.data,o=s.messageId,c=s.action,f=s.data;try{c==="registerModule"&&t(f,function(d){d instanceof Error?postMessage({messageId:o,success:!1,error:d.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof d=="function"}})}),c==="callModule"&&e(f,function(d,g){d instanceof Error?postMessage({messageId:o,success:!1,error:d.message}):postMessage({messageId:o,success:!0,result:d},g||void 0)})}catch(d){postMessage({messageId:o,success:!1,error:d.stack})}})}function Tk(i){var t=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return t._getInitResult().then(function(a){if(typeof a=="function")return a.apply(void 0,e);throw new Error("Worker module function was called but `init` did not return a callable function")})};return t._getInitResult=function(){var e=i.dependencies,n=i.init;e=Array.isArray(e)?e.map(function(s){return s&&(s=s.onMainThread||s,s._getInitResult&&(s=s._getInitResult())),s}):[];var a=Promise.all(e).then(function(s){return n.apply(null,s)});return t._getInitResult=function(){return a},a},t}var pD=function(){var i=!1;if(typeof window<"u"&&typeof window.document<"u")try{var t=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));t.terminate(),i=!0}catch(e){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+e.message+"]")}return pD=function(){return i},i},Ak=0,Ek=0,$S=!1,qg=Object.create(null),Xg=Object.create(null),Xb=Object.create(null);function rm(i){if((!i||typeof i.init!="function")&&!$S)throw new Error("requires `options.init` function");var t=i.dependencies,e=i.init,n=i.getTransferables,a=i.workerId,s=Tk(i);a==null&&(a="#default");var o="workerModule"+ ++Ak,c=i.name||o,f=null;t=t&&t.map(function(g){return typeof g=="function"&&!g.workerModuleData&&($S=!0,g=rm({workerId:a,name:"<"+c+"> function dependency: "+g.name,init:`function(){return (
`+Ky(g)+`
)}`}),$S=!1),g&&g.workerModuleData&&(g=g.workerModuleData),g});function d(){for(var g=[],y=arguments.length;y--;)g[y]=arguments[y];if(!pD())return s.apply(void 0,g);if(!f){f=f3(a,"registerModule",d.workerModuleData);var x=function(){f=null,Xg[a].delete(x)};(Xg[a]||(Xg[a]=new Set)).add(x)}return f.then(function(b){var T=b.isCallable;if(T)return f3(a,"callModule",{id:o,args:g});throw new Error("Worker module function was called but `init` did not return a callable function")})}return d.workerModuleData={isWorkerModule:!0,id:o,name:c,dependencies:t,init:Ky(e),getTransferables:n&&Ky(n)},d.onMainThread=s,d}function wk(i){Xg[i]&&Xg[i].forEach(function(t){t()}),qg[i]&&(qg[i].terminate(),delete qg[i])}function Ky(i){var t=i.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}function Ck(i){var t=qg[i];if(!t){var e=Ky(Mk);t=qg[i]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+i.replace(/\*/g,"")+` **/

;(`+e+")()"],{type:"application/javascript"}))),t.onmessage=function(n){var a=n.data,s=a.messageId,o=Xb[s];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete Xb[s],o(a)}}return t}function f3(i,t,e){return new Promise(function(n,a){var s=++Ek;Xb[s]=function(o){o.success?n(o.result):a(new Error("Error in worker "+t+" call: "+o.error))},Ck(i).postMessage({messageId:s,action:t,data:e})})}function mD(){var i=(function(t){function e(dt,lt,G,nt,ft,mt,xt,ht){var _t=1-xt;ht.x=_t*_t*dt+2*_t*xt*G+xt*xt*ft,ht.y=_t*_t*lt+2*_t*xt*nt+xt*xt*mt}function n(dt,lt,G,nt,ft,mt,xt,ht,_t,At){var $t=1-_t;At.x=$t*$t*$t*dt+3*$t*$t*_t*G+3*$t*_t*_t*ft+_t*_t*_t*xt,At.y=$t*$t*$t*lt+3*$t*$t*_t*nt+3*$t*_t*_t*mt+_t*_t*_t*ht}function a(dt,lt){for(var G=/([MLQCZ])([^MLQCZ]*)/g,nt,ft,mt,xt,ht;nt=G.exec(dt);){var _t=nt[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(At){return parseFloat(At)});switch(nt[1]){case"M":xt=ft=_t[0],ht=mt=_t[1];break;case"L":(_t[0]!==xt||_t[1]!==ht)&&lt("L",xt,ht,xt=_t[0],ht=_t[1]);break;case"Q":{lt("Q",xt,ht,xt=_t[2],ht=_t[3],_t[0],_t[1]);break}case"C":{lt("C",xt,ht,xt=_t[4],ht=_t[5],_t[0],_t[1],_t[2],_t[3]);break}case"Z":(xt!==ft||ht!==mt)&&lt("L",xt,ht,ft,mt);break}}}function s(dt,lt,G){G===void 0&&(G=16);var nt={x:0,y:0};a(dt,function(ft,mt,xt,ht,_t,At,$t,te,qt){switch(ft){case"L":lt(mt,xt,ht,_t);break;case"Q":{for(var ne=mt,Se=xt,Nt=1;Nt<G;Nt++)e(mt,xt,At,$t,ht,_t,Nt/(G-1),nt),lt(ne,Se,nt.x,nt.y),ne=nt.x,Se=nt.y;break}case"C":{for(var Vt=mt,Ft=xt,re=1;re<G;re++)n(mt,xt,At,$t,te,qt,ht,_t,re/(G-1),nt),lt(Vt,Ft,nt.x,nt.y),Vt=nt.x,Ft=nt.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",c="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",f=new WeakMap,d={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function g(dt,lt){var G=dt.getContext?dt.getContext("webgl",d):dt,nt=f.get(G);if(!nt){let Vt=function(Lt){var ee=mt[Lt];if(!ee&&(ee=mt[Lt]=G.getExtension(Lt),!ee))throw new Error(Lt+" not supported");return ee},Ft=function(Lt,ee){var $=G.createShader(ee);return G.shaderSource($,Lt),G.compileShader($),$},re=function(Lt,ee,$,Y){if(!xt[Lt]){var yt={},Bt={},Dt=G.createProgram();G.attachShader(Dt,Ft(ee,G.VERTEX_SHADER)),G.attachShader(Dt,Ft($,G.FRAGMENT_SHADER)),G.linkProgram(Dt),xt[Lt]={program:Dt,transaction:function(ve){G.useProgram(Dt),ve({setUniform:function(be,Ce){for(var Gt=[],Qt=arguments.length-2;Qt-- >0;)Gt[Qt]=arguments[Qt+2];var se=Bt[Ce]||(Bt[Ce]=G.getUniformLocation(Dt,Ce));G["uniform"+be].apply(G,[se].concat(Gt))},setAttribute:function(be,Ce,Gt,Qt,se){var gt=yt[be];gt||(gt=yt[be]={buf:G.createBuffer(),loc:G.getAttribLocation(Dt,be),data:null}),G.bindBuffer(G.ARRAY_BUFFER,gt.buf),G.vertexAttribPointer(gt.loc,Ce,G.FLOAT,!1,0,0),G.enableVertexAttribArray(gt.loc),ft?G.vertexAttribDivisor(gt.loc,Qt):Vt("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(gt.loc,Qt),se!==gt.data&&(G.bufferData(G.ARRAY_BUFFER,se,Gt),gt.data=se)}})}}}xt[Lt].transaction(Y)},at=function(Lt,ee){_t++;try{G.activeTexture(G.TEXTURE0+_t);var $=ht[Lt];$||($=ht[Lt]=G.createTexture(),G.bindTexture(G.TEXTURE_2D,$),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MIN_FILTER,G.NEAREST),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MAG_FILTER,G.NEAREST)),G.bindTexture(G.TEXTURE_2D,$),ee($,_t)}finally{_t--}},ue=function(Lt,ee,$){var Y=G.createFramebuffer();At.push(Y),G.bindFramebuffer(G.FRAMEBUFFER,Y),G.activeTexture(G.TEXTURE0+ee),G.bindTexture(G.TEXTURE_2D,Lt),G.framebufferTexture2D(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0,G.TEXTURE_2D,Lt,0);try{$(Y)}finally{G.deleteFramebuffer(Y),G.bindFramebuffer(G.FRAMEBUFFER,At[--At.length-1]||null)}},Zt=function(){mt={},xt={},ht={},_t=-1,At.length=0};var $t=Vt,te=Ft,qt=re,ne=at,Se=ue,Nt=Zt,ft=typeof WebGL2RenderingContext<"u"&&G instanceof WebGL2RenderingContext,mt={},xt={},ht={},_t=-1,At=[];G.canvas.addEventListener("webglcontextlost",function(Lt){Zt(),Lt.preventDefault()},!1),f.set(G,nt={gl:G,isWebGL2:ft,getExtension:Vt,withProgram:re,withTexture:at,withTextureFramebuffer:ue,handleContextLoss:Zt})}lt(nt)}function y(dt,lt,G,nt,ft,mt,xt,ht){xt===void 0&&(xt=15),ht===void 0&&(ht=null),g(dt,function(_t){var At=_t.gl,$t=_t.withProgram,te=_t.withTexture;te("copy",function(qt,ne){At.texImage2D(At.TEXTURE_2D,0,At.RGBA,ft,mt,0,At.RGBA,At.UNSIGNED_BYTE,lt),$t("copy",o,c,function(Se){var Nt=Se.setUniform,Vt=Se.setAttribute;Vt("aUV",2,At.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),Nt("1i","image",ne),At.bindFramebuffer(At.FRAMEBUFFER,ht||null),At.disable(At.BLEND),At.colorMask(xt&8,xt&4,xt&2,xt&1),At.viewport(G,nt,ft,mt),At.scissor(G,nt,ft,mt),At.drawArrays(At.TRIANGLES,0,3)})})})}function x(dt,lt,G){var nt=dt.width,ft=dt.height;g(dt,function(mt){var xt=mt.gl,ht=new Uint8Array(nt*ft*4);xt.readPixels(0,0,nt,ft,xt.RGBA,xt.UNSIGNED_BYTE,ht),dt.width=lt,dt.height=G,y(xt,ht,0,0,nt,ft)})}var b=Object.freeze({__proto__:null,withWebGLContext:g,renderImageData:y,resizeWebGLCanvasWithoutClearing:x});function T(dt,lt,G,nt,ft,mt){mt===void 0&&(mt=1);var xt=new Uint8Array(dt*lt),ht=nt[2]-nt[0],_t=nt[3]-nt[1],At=[];s(G,function(Vt,Ft,re,at){At.push({x1:Vt,y1:Ft,x2:re,y2:at,minX:Math.min(Vt,re),minY:Math.min(Ft,at),maxX:Math.max(Vt,re),maxY:Math.max(Ft,at)})}),At.sort(function(Vt,Ft){return Vt.maxX-Ft.maxX});for(var $t=0;$t<dt;$t++)for(var te=0;te<lt;te++){var qt=Se(nt[0]+ht*($t+.5)/dt,nt[1]+_t*(te+.5)/lt),ne=Math.pow(1-Math.abs(qt)/ft,mt)/2;qt<0&&(ne=1-ne),ne=Math.max(0,Math.min(255,Math.round(ne*255))),xt[te*dt+$t]=ne}return xt;function Se(Vt,Ft){for(var re=1/0,at=1/0,ue=At.length;ue--;){var Zt=At[ue];if(Zt.maxX+at<=Vt)break;if(Vt+at>Zt.minX&&Ft-at<Zt.maxY&&Ft+at>Zt.minY){var Lt=w(Vt,Ft,Zt.x1,Zt.y1,Zt.x2,Zt.y2);Lt<re&&(re=Lt,at=Math.sqrt(re))}}return Nt(Vt,Ft)&&(at=-at),at}function Nt(Vt,Ft){for(var re=0,at=At.length;at--;){var ue=At[at];if(ue.maxX<=Vt)break;var Zt=ue.y1>Ft!=ue.y2>Ft&&Vt<(ue.x2-ue.x1)*(Ft-ue.y1)/(ue.y2-ue.y1)+ue.x1;Zt&&(re+=ue.y1<ue.y2?1:-1)}return re!==0}}function R(dt,lt,G,nt,ft,mt,xt,ht,_t,At){mt===void 0&&(mt=1),ht===void 0&&(ht=0),_t===void 0&&(_t=0),At===void 0&&(At=0),C(dt,lt,G,nt,ft,mt,xt,null,ht,_t,At)}function C(dt,lt,G,nt,ft,mt,xt,ht,_t,At,$t){mt===void 0&&(mt=1),_t===void 0&&(_t=0),At===void 0&&(At=0),$t===void 0&&($t=0);for(var te=T(dt,lt,G,nt,ft,mt),qt=new Uint8Array(te.length*4),ne=0;ne<te.length;ne++)qt[ne*4+$t]=te[ne];y(xt,qt,_t,At,dt,lt,1<<3-$t,ht)}function w(dt,lt,G,nt,ft,mt){var xt=ft-G,ht=mt-nt,_t=xt*xt+ht*ht,At=_t?Math.max(0,Math.min(1,((dt-G)*xt+(lt-nt)*ht)/_t)):0,$t=dt-(G+At*xt),te=lt-(nt+At*ht);return $t*$t+te*te}var N=Object.freeze({__proto__:null,generate:T,generateIntoCanvas:R,generateIntoFramebuffer:C}),I="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",z="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",F="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",H=new Float32Array([0,0,2,0,0,2]),q=null,Z=!1,B={},V=new WeakMap;function Q(dt){if(!Z&&!vt(dt))throw new Error("WebGL generation not supported")}function J(dt,lt,G,nt,ft,mt,xt){if(mt===void 0&&(mt=1),xt===void 0&&(xt=null),!xt&&(xt=q,!xt)){var ht=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!ht)throw new Error("OffscreenCanvas or DOM canvas not supported");xt=q=ht.getContext("webgl",{depth:!1})}Q(xt);var _t=new Uint8Array(dt*lt*4);g(xt,function(qt){var ne=qt.gl,Se=qt.withTexture,Nt=qt.withTextureFramebuffer;Se("readable",function(Vt,Ft){ne.texImage2D(ne.TEXTURE_2D,0,ne.RGBA,dt,lt,0,ne.RGBA,ne.UNSIGNED_BYTE,null),Nt(Vt,Ft,function(re){ut(dt,lt,G,nt,ft,mt,ne,re,0,0,0),ne.readPixels(0,0,dt,lt,ne.RGBA,ne.UNSIGNED_BYTE,_t)})})});for(var At=new Uint8Array(dt*lt),$t=0,te=0;$t<_t.length;$t+=4)At[te++]=_t[$t];return At}function rt(dt,lt,G,nt,ft,mt,xt,ht,_t,At){mt===void 0&&(mt=1),ht===void 0&&(ht=0),_t===void 0&&(_t=0),At===void 0&&(At=0),ut(dt,lt,G,nt,ft,mt,xt,null,ht,_t,At)}function ut(dt,lt,G,nt,ft,mt,xt,ht,_t,At,$t){mt===void 0&&(mt=1),_t===void 0&&(_t=0),At===void 0&&(At=0),$t===void 0&&($t=0),Q(xt);var te=[];s(G,function(qt,ne,Se,Nt){te.push(qt,ne,Se,Nt)}),te=new Float32Array(te),g(xt,function(qt){var ne=qt.gl,Se=qt.isWebGL2,Nt=qt.getExtension,Vt=qt.withProgram,Ft=qt.withTexture,re=qt.withTextureFramebuffer,at=qt.handleContextLoss;if(Ft("rawDistances",function(ue,Zt){(dt!==ue._lastWidth||lt!==ue._lastHeight)&&ne.texImage2D(ne.TEXTURE_2D,0,ne.RGBA,ue._lastWidth=dt,ue._lastHeight=lt,0,ne.RGBA,ne.UNSIGNED_BYTE,null),Vt("main",I,z,function(Lt){var ee=Lt.setAttribute,$=Lt.setUniform,Y=!Se&&Nt("ANGLE_instanced_arrays"),yt=!Se&&Nt("EXT_blend_minmax");ee("aUV",2,ne.STATIC_DRAW,0,H),ee("aLineSegment",4,ne.DYNAMIC_DRAW,1,te),$.apply(void 0,["4f","uGlyphBounds"].concat(nt)),$("1f","uMaxDistance",ft),$("1f","uExponent",mt),re(ue,Zt,function(Bt){ne.enable(ne.BLEND),ne.colorMask(!0,!0,!0,!0),ne.viewport(0,0,dt,lt),ne.scissor(0,0,dt,lt),ne.blendFunc(ne.ONE,ne.ONE),ne.blendEquationSeparate(ne.FUNC_ADD,Se?ne.MAX:yt.MAX_EXT),ne.clear(ne.COLOR_BUFFER_BIT),Se?ne.drawArraysInstanced(ne.TRIANGLES,0,3,te.length/4):Y.drawArraysInstancedANGLE(ne.TRIANGLES,0,3,te.length/4)})}),Vt("post",o,F,function(Lt){Lt.setAttribute("aUV",2,ne.STATIC_DRAW,0,H),Lt.setUniform("1i","tex",Zt),ne.bindFramebuffer(ne.FRAMEBUFFER,ht),ne.disable(ne.BLEND),ne.colorMask($t===0,$t===1,$t===2,$t===3),ne.viewport(_t,At,dt,lt),ne.scissor(_t,At,dt,lt),ne.drawArrays(ne.TRIANGLES,0,3)})}),ne.isContextLost())throw at(),new Error("webgl context lost")})}function vt(dt){var lt=!dt||dt===q?B:dt.canvas||dt,G=V.get(lt);if(G===void 0){Z=!0;var nt=null;try{var ft=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],mt=J(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,dt);G=mt&&ft.length===mt.length&&mt.every(function(xt,ht){return xt===ft[ht]}),G||(nt="bad trial run results",console.info(ft,mt))}catch(xt){G=!1,nt=xt.message}nt&&console.warn("WebGL SDF generation not supported:",nt),Z=!1,V.set(lt,G)}return G}var j=Object.freeze({__proto__:null,generate:J,generateIntoCanvas:rt,generateIntoFramebuffer:ut,isSupported:vt});function K(dt,lt,G,nt,ft,mt){ft===void 0&&(ft=Math.max(nt[2]-nt[0],nt[3]-nt[1])/2),mt===void 0&&(mt=1);try{return J.apply(j,arguments)}catch(xt){return console.info("WebGL SDF generation failed, falling back to JS",xt),T.apply(N,arguments)}}function et(dt,lt,G,nt,ft,mt,xt,ht,_t,At){ft===void 0&&(ft=Math.max(nt[2]-nt[0],nt[3]-nt[1])/2),mt===void 0&&(mt=1),ht===void 0&&(ht=0),_t===void 0&&(_t=0),At===void 0&&(At=0);try{return rt.apply(j,arguments)}catch($t){return console.info("WebGL SDF generation failed, falling back to JS",$t),R.apply(N,arguments)}}return t.forEachPathCommand=a,t.generate=K,t.generateIntoCanvas=et,t.javascript=N,t.pathToLineSegments=s,t.webgl=j,t.webglUtils=b,Object.defineProperty(t,"__esModule",{value:!0}),t})({});return i}function Rk(){var i=(function(t){var e={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},n={},a={};n.L=1,a[1]="L",Object.keys(e).forEach(function(at,ue){n[at]=1<<ue+1,a[n[at]]=at}),Object.freeze(n);var s=n.LRI|n.RLI|n.FSI,o=n.L|n.R|n.AL,c=n.B|n.S|n.WS|n.ON|n.FSI|n.LRI|n.RLI|n.PDI,f=n.BN|n.RLE|n.LRE|n.RLO|n.LRO|n.PDF,d=n.S|n.WS|n.B|s|n.PDI|f,g=null;function y(){if(!g){g=new Map;var at=function(Zt){if(e.hasOwnProperty(Zt)){var Lt=0;e[Zt].split(",").forEach(function(ee){var $=ee.split("+"),Y=$[0],yt=$[1];Y=parseInt(Y,36),yt=yt?parseInt(yt,36):0,g.set(Lt+=Y,n[Zt]);for(var Bt=0;Bt<yt;Bt++)g.set(++Lt,n[Zt])})}};for(var ue in e)at(ue)}}function x(at){return y(),g.get(at.codePointAt(0))||n.L}function b(at){return a[x(at)]}var T={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function R(at,ue){var Zt=36,Lt=0,ee=new Map,$=ue&&new Map,Y;return at.split(",").forEach(function yt(Bt){if(Bt.indexOf("+")!==-1)for(var Dt=+Bt;Dt--;)yt(Y);else{Y=Bt;var Ct=Bt.split(">"),ve=Ct[0],he=Ct[1];ve=String.fromCodePoint(Lt+=parseInt(ve,Zt)),he=String.fromCodePoint(Lt+=parseInt(he,Zt)),ee.set(ve,he),ue&&$.set(he,ve)}}),{map:ee,reverseMap:$}}var C,w,N;function I(){if(!C){var at=R(T.pairs,!0),ue=at.map,Zt=at.reverseMap;C=ue,w=Zt,N=R(T.canonical,!1).map}}function z(at){return I(),C.get(at)||null}function F(at){return I(),w.get(at)||null}function H(at){return I(),N.get(at)||null}var q=n.L,Z=n.R,B=n.EN,V=n.ES,Q=n.ET,J=n.AN,rt=n.CS,ut=n.B,vt=n.S,j=n.ON,K=n.BN,et=n.NSM,dt=n.AL,lt=n.LRO,G=n.RLO,nt=n.LRE,ft=n.RLE,mt=n.PDF,xt=n.LRI,ht=n.RLI,_t=n.FSI,At=n.PDI;function $t(at,ue){for(var Zt=125,Lt=new Uint32Array(at.length),ee=0;ee<at.length;ee++)Lt[ee]=x(at[ee]);var $=new Map;function Y(Ra,Va){var Zi=Lt[Ra];Lt[Ra]=Va,$.set(Zi,$.get(Zi)-1),Zi&c&&$.set(c,$.get(c)-1),$.set(Va,($.get(Va)||0)+1),Va&c&&$.set(c,($.get(c)||0)+1)}for(var yt=new Uint8Array(at.length),Bt=new Map,Dt=[],Ct=null,ve=0;ve<at.length;ve++)Ct||Dt.push(Ct={start:ve,end:at.length-1,level:ue==="rtl"?1:ue==="ltr"?0:nc(ve,!1)}),Lt[ve]&ut&&(Ct.end=ve,Ct=null);for(var he=ft|nt|G|lt|s|At|mt|ut,be=function(Ra){return Ra+(Ra&1?1:2)},Ce=function(Ra){return Ra+(Ra&1?2:1)},Gt=0;Gt<Dt.length;Gt++){Ct=Dt[Gt];var Qt=[{_level:Ct.level,_override:0,_isolate:0}],se=void 0,gt=0,wt=0,xe=0;$.clear();for(var St=Ct.start;St<=Ct.end;St++){var ie=Lt[St];if(se=Qt[Qt.length-1],$.set(ie,($.get(ie)||0)+1),ie&c&&$.set(c,($.get(c)||0)+1),ie&he)if(ie&(ft|nt)){yt[St]=se._level;var le=(ie===ft?Ce:be)(se._level);le<=Zt&&!gt&&!wt?Qt.push({_level:le,_override:0,_isolate:0}):gt||wt++}else if(ie&(G|lt)){yt[St]=se._level;var Ae=(ie===G?Ce:be)(se._level);Ae<=Zt&&!gt&&!wt?Qt.push({_level:Ae,_override:ie&G?Z:q,_isolate:0}):gt||wt++}else if(ie&s){ie&_t&&(ie=nc(St+1,!0)===1?ht:xt),yt[St]=se._level,se._override&&Y(St,se._override);var ce=(ie===ht?Ce:be)(se._level);ce<=Zt&&gt===0&&wt===0?(xe++,Qt.push({_level:ce,_override:0,_isolate:1,_isolInitIndex:St})):gt++}else if(ie&At){if(gt>0)gt--;else if(xe>0){for(wt=0;!Qt[Qt.length-1]._isolate;)Qt.pop();var jt=Qt[Qt.length-1]._isolInitIndex;jt!=null&&(Bt.set(jt,St),Bt.set(St,jt)),Qt.pop(),xe--}se=Qt[Qt.length-1],yt[St]=se._level,se._override&&Y(St,se._override)}else ie&mt?(gt===0&&(wt>0?wt--:!se._isolate&&Qt.length>1&&(Qt.pop(),se=Qt[Qt.length-1])),yt[St]=se._level):ie&ut&&(yt[St]=Ct.level);else yt[St]=se._level,se._override&&ie!==K&&Y(St,se._override)}for(var me=[],Re=null,Le=Ct.start;Le<=Ct.end;Le++){var qe=Lt[Le];if(!(qe&f)){var bn=yt[Le],Bn=qe&s,Ai=qe===At;Re&&bn===Re._level?(Re._end=Le,Re._endsWithIsolInit=Bn):me.push(Re={_start:Le,_end:Le,_level:bn,_startsWithPDI:Ai,_endsWithIsolInit:Bn})}}for(var ia=[],Ca=0;Ca<me.length;Ca++){var Yn=me[Ca];if(!Yn._startsWithPDI||Yn._startsWithPDI&&!Bt.has(Yn._start)){for(var ke=[Re=Yn],Fi=void 0;Re&&Re._endsWithIsolInit&&(Fi=Bt.get(Re._end))!=null;)for(var si=Ca+1;si<me.length;si++)if(me[si]._start===Fi){ke.push(Re=me[si]);break}for(var Hn=[],cn=0;cn<ke.length;cn++)for(var Li=ke[cn],ga=Li._start;ga<=Li._end;ga++)Hn.push(ga);for(var fs=yt[Hn[0]],cr=Ct.level,lo=Hn[0]-1;lo>=0;lo--)if(!(Lt[lo]&f)){cr=yt[lo];break}var ur=Hn[Hn.length-1],fr=yt[ur],Gr=Ct.level;if(!(Lt[ur]&s)){for(var yi=ur+1;yi<=Ct.end;yi++)if(!(Lt[yi]&f)){Gr=yt[yi];break}}ia.push({_seqIndices:Hn,_sosType:Math.max(cr,fs)%2?Z:q,_eosType:Math.max(Gr,fr)%2?Z:q})}}for(var Zn=0;Zn<ia.length;Zn++){var va=ia[Zn],Xe=va._seqIndices,it=va._sosType,Rt=va._eosType,Xt=yt[Xe[0]]&1?Z:q;if($.get(et))for(var kt=0;kt<Xe.length;kt++){var Ut=Xe[kt];if(Lt[Ut]&et){for(var Ee=it,Ue=kt-1;Ue>=0;Ue--)if(!(Lt[Xe[Ue]]&f)){Ee=Lt[Xe[Ue]];break}Y(Ut,Ee&(s|At)?j:Ee)}}if($.get(B))for(var De=0;De<Xe.length;De++){var Pe=Xe[De];if(Lt[Pe]&B)for(var Me=De-1;Me>=-1;Me--){var Oe=Me===-1?it:Lt[Xe[Me]];if(Oe&o){Oe===dt&&Y(Pe,J);break}}}if($.get(dt))for(var Ve=0;Ve<Xe.length;Ve++){var Je=Xe[Ve];Lt[Je]&dt&&Y(Je,Z)}if($.get(V)||$.get(rt))for(var xn=1;xn<Xe.length-1;xn++){var Kn=Xe[xn];if(Lt[Kn]&(V|rt)){for(var ze=0,nn=0,Ye=xn-1;Ye>=0&&(ze=Lt[Xe[Ye]],!!(ze&f));Ye--);for(var Cn=xn+1;Cn<Xe.length&&(nn=Lt[Xe[Cn]],!!(nn&f));Cn++);ze===nn&&(Lt[Kn]===V?ze===B:ze&(B|J))&&Y(Kn,ze)}}if($.get(B))for(var je=0;je<Xe.length;je++){var qi=Xe[je];if(Lt[qi]&B){for(var ya=je-1;ya>=0&&Lt[Xe[ya]]&(Q|f);ya--)Y(Xe[ya],B);for(je++;je<Xe.length&&Lt[Xe[je]]&(Q|f|B);je++)Lt[Xe[je]]!==B&&Y(Xe[je],B)}}if($.get(Q)||$.get(V)||$.get(rt))for(var ai=0;ai<Xe.length;ai++){var Fn=Xe[ai];if(Lt[Fn]&(Q|V|rt)){Y(Fn,j);for(var Mn=ai-1;Mn>=0&&Lt[Xe[Mn]]&f;Mn--)Y(Xe[Mn],j);for(var Qn=ai+1;Qn<Xe.length&&Lt[Xe[Qn]]&f;Qn++)Y(Xe[Qn],j)}}if($.get(B))for(var ci=0,Ei=it;ci<Xe.length;ci++){var _i=Xe[ci],Es=Lt[_i];Es&B?Ei===q&&Y(_i,q):Es&o&&(Ei=Es)}if($.get(c)){var ki=Z|B|J,Ho=ki|q,co=[];{for(var hs=[],Xi=0;Xi<Xe.length;Xi++)if(Lt[Xe[Xi]]&c){var Gs=at[Xe[Xi]],uo=void 0;if(z(Gs)!==null)if(hs.length<63)hs.push({char:Gs,seqIndex:Xi});else break;else if((uo=F(Gs))!==null)for(var ws=hs.length-1;ws>=0;ws--){var on=hs[ws].char;if(on===uo||on===F(H(Gs))||z(H(on))===Gs){co.push([hs[ws].seqIndex,Xi]),hs.length=ws;break}}}co.sort(function(Ra,Va){return Ra[0]-Va[0]})}for(var Fa=0;Fa<co.length;Fa++){for(var Gn=co[Fa],fo=Gn[0],Cs=Gn[1],Qa=!1,_a=0,Ja=fo+1;Ja<Cs;Ja++){var Rs=Xe[Ja];if(Lt[Rs]&Ho){Qa=!0;var hr=Lt[Rs]&ki?Z:q;if(hr===Xt){_a=hr;break}}}if(Qa&&!_a){_a=it;for(var ui=fo-1;ui>=0;ui--){var Ds=Xe[ui];if(Lt[Ds]&Ho){var dr=Lt[Ds]&ki?Z:q;dr!==Xt?_a=dr:_a=Xt;break}}}if(_a){if(Lt[Xe[fo]]=Lt[Xe[Cs]]=_a,_a!==Xt){for(var js=fo+1;js<Xe.length;js++)if(!(Lt[Xe[js]]&f)){x(at[Xe[js]])&et&&(Lt[Xe[js]]=_a);break}}if(_a!==Xt){for(var ho=Cs+1;ho<Xe.length;ho++)if(!(Lt[Xe[ho]]&f)){x(at[Xe[ho]])&et&&(Lt[Xe[ho]]=_a);break}}}}for(var Si=0;Si<Xe.length;Si++)if(Lt[Xe[Si]]&c){for(var Ls=Si,po=Si,ka=it,yn=Si-1;yn>=0;yn--)if(Lt[Xe[yn]]&f)Ls=yn;else{ka=Lt[Xe[yn]]&ki?Z:q;break}for(var gl=Rt,Vi=Si+1;Vi<Xe.length;Vi++)if(Lt[Xe[Vi]]&(c|f))po=Vi;else{gl=Lt[Xe[Vi]]&ki?Z:q;break}for(var ds=Ls;ds<=po;ds++)Lt[Xe[ds]]=ka===gl?ka:Xt;Si=po}}}for(var Yi=Ct.start;Yi<=Ct.end;Yi++){var Fu=yt[Yi],Oi=Lt[Yi];if(Fu&1?Oi&(q|B|J)&&yt[Yi]++:Oi&Z?yt[Yi]++:Oi&(J|B)&&(yt[Yi]+=2),Oi&f&&(yt[Yi]=Yi===0?Ct.level:yt[Yi-1]),Yi===Ct.end||x(at[Yi])&(vt|ut))for(var vl=Yi;vl>=0&&x(at[vl])&d;vl--)yt[vl]=Ct.level}}return{levels:yt,paragraphs:Dt};function nc(Ra,Va){for(var Zi=Ra;Zi<at.length;Zi++){var Hi=Lt[Zi];if(Hi&(Z|dt))return 1;if(Hi&(ut|q)||Va&&Hi===At)return 0;if(Hi&s){var jc=ic(Zi);Zi=jc===-1?at.length:jc}}return 0}function ic(Ra){for(var Va=1,Zi=Ra+1;Zi<at.length;Zi++){var Hi=Lt[Zi];if(Hi&ut)break;if(Hi&At){if(--Va===0)return Zi}else Hi&s&&Va++}return-1}}var te="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",qt;function ne(){if(!qt){var at=R(te,!0),ue=at.map,Zt=at.reverseMap;Zt.forEach(function(Lt,ee){ue.set(ee,Lt)}),qt=ue}}function Se(at){return ne(),qt.get(at)||null}function Nt(at,ue,Zt,Lt){var ee=at.length;Zt=Math.max(0,Zt==null?0:+Zt),Lt=Math.min(ee-1,Lt==null?ee-1:+Lt);for(var $=new Map,Y=Zt;Y<=Lt;Y++)if(ue[Y]&1){var yt=Se(at[Y]);yt!==null&&$.set(Y,yt)}return $}function Vt(at,ue,Zt,Lt){var ee=at.length;Zt=Math.max(0,Zt==null?0:+Zt),Lt=Math.min(ee-1,Lt==null?ee-1:+Lt);var $=[];return ue.paragraphs.forEach(function(Y){var yt=Math.max(Zt,Y.start),Bt=Math.min(Lt,Y.end);if(yt<Bt){for(var Dt=ue.levels.slice(yt,Bt+1),Ct=Bt;Ct>=yt&&x(at[Ct])&d;Ct--)Dt[Ct]=Y.level;for(var ve=Y.level,he=1/0,be=0;be<Dt.length;be++){var Ce=Dt[be];Ce>ve&&(ve=Ce),Ce<he&&(he=Ce|1)}for(var Gt=ve;Gt>=he;Gt--)for(var Qt=0;Qt<Dt.length;Qt++)if(Dt[Qt]>=Gt){for(var se=Qt;Qt+1<Dt.length&&Dt[Qt+1]>=Gt;)Qt++;Qt>se&&$.push([se+yt,Qt+yt])}}}),$}function Ft(at,ue,Zt,Lt){var ee=re(at,ue,Zt,Lt),$=[].concat(at);return ee.forEach(function(Y,yt){$[yt]=(ue.levels[Y]&1?Se(at[Y]):null)||at[Y]}),$.join("")}function re(at,ue,Zt,Lt){for(var ee=Vt(at,ue,Zt,Lt),$=[],Y=0;Y<at.length;Y++)$[Y]=Y;return ee.forEach(function(yt){for(var Bt=yt[0],Dt=yt[1],Ct=$.slice(Bt,Dt+1),ve=Ct.length;ve--;)$[Dt-ve]=Ct[ve]}),$}return t.closingToOpeningBracket=F,t.getBidiCharType=x,t.getBidiCharTypeName=b,t.getCanonicalBracket=H,t.getEmbeddingLevels=$t,t.getMirroredCharacter=Se,t.getMirroredCharactersMap=Nt,t.getReorderSegments=Vt,t.getReorderedIndices=re,t.getReorderedString=Ft,t.openingToClosingBracket=z,Object.defineProperty(t,"__esModule",{value:!0}),t})({});return i}const gD=/\bvoid\s+main\s*\(\s*\)\s*{/g;function Yb(i){const t=/^[ \t]*#include +<([\w\d./]+)>/gm;function e(n,a){let s=Ln[a];return s?Yb(s):n}return i.replace(t,e)}const ks=[];for(let i=0;i<256;i++)ks[i]=(i<16?"0":"")+i.toString(16);function Dk(){const i=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(ks[i&255]+ks[i>>8&255]+ks[i>>16&255]+ks[i>>24&255]+"-"+ks[t&255]+ks[t>>8&255]+"-"+ks[t>>16&15|64]+ks[t>>24&255]+"-"+ks[e&63|128]+ks[e>>8&255]+"-"+ks[e>>16&255]+ks[e>>24&255]+ks[n&255]+ks[n>>8&255]+ks[n>>16&255]+ks[n>>24&255]).toUpperCase()}const kh=Object.assign||function(){let i=arguments[0];for(let t=1,e=arguments.length;t<e;t++){let n=arguments[t];if(n)for(let a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])}return i},Lk=Date.now(),h3=new WeakMap,d3=new Map;let Ok=1e10;function Zb(i,t){const e=Pk(t);let n=h3.get(i);if(n||h3.set(i,n=Object.create(null)),n[e])return new n[e];const a=`_onBeforeCompile${e}`,s=function(d,g){i.onBeforeCompile.call(this,d,g);const y=this.customProgramCacheKey()+"|"+d.vertexShader+"|"+d.fragmentShader;let x=d3[y];if(!x){const b=Nk(this,d,t,e);x=d3[y]=b}d.vertexShader=x.vertexShader,d.fragmentShader=x.fragmentShader,kh(d.uniforms,this.uniforms),t.timeUniform&&(d.uniforms[t.timeUniform]={get value(){return Date.now()-Lk}}),this[a]&&this[a](d)},o=function(){return c(t.chained?i:i.clone())},c=function(d){const g=Object.create(d,f);return Object.defineProperty(g,"baseMaterial",{value:i}),Object.defineProperty(g,"id",{value:Ok++}),g.uuid=Dk(),g.uniforms=kh({},d.uniforms,t.uniforms),g.defines=kh({},d.defines,t.defines),g.defines[`TROIKA_DERIVED_MATERIAL_${e}`]="",g.extensions=kh({},d.extensions,t.extensions),g._listeners=void 0,g},f={constructor:{value:o},isDerivedMaterial:{value:!0},type:{get:()=>i.type,set:d=>{i.type=d}},isDerivedFrom:{writable:!0,configurable:!0,value:function(d){const g=this.baseMaterial;return d===g||g.isDerivedMaterial&&g.isDerivedFrom(d)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return i.customProgramCacheKey()+"|"+e}},onBeforeCompile:{get(){return s},set(d){this[a]=d}},copy:{writable:!0,configurable:!0,value:function(d){return i.copy.call(this,d),!i.isShaderMaterial&&!i.isDerivedMaterial&&(kh(this.extensions,d.extensions),kh(this.defines,d.defines),kh(this.uniforms,G2.clone(d.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const d=new i.constructor;return c(d).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let d=this._depthMaterial;return d||(d=this._depthMaterial=Zb(i.isDerivedMaterial?i.getDepthMaterial():new G1({depthPacking:NC}),t),d.defines.IS_DEPTH_MATERIAL="",d.uniforms=this.uniforms),d}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let d=this._distanceMaterial;return d||(d=this._distanceMaterial=Zb(i.isDerivedMaterial?i.getDistanceMaterial():new j1,t),d.defines.IS_DISTANCE_MATERIAL="",d.uniforms=this.uniforms),d}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:d,_distanceMaterial:g}=this;d&&d.dispose(),g&&g.dispose(),i.dispose.call(this)}}};return n[e]=o,new o}function Nk(i,{vertexShader:t,fragmentShader:e},n,a){let{vertexDefs:s,vertexMainIntro:o,vertexMainOutro:c,vertexTransform:f,fragmentDefs:d,fragmentMainIntro:g,fragmentMainOutro:y,fragmentColorTransform:x,customRewriter:b,timeUniform:T}=n;if(s=s||"",o=o||"",c=c||"",d=d||"",g=g||"",y=y||"",(f||b)&&(t=Yb(t)),(x||b)&&(e=e.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),e=Yb(e)),b){let R=b({vertexShader:t,fragmentShader:e});t=R.vertexShader,e=R.fragmentShader}if(x){let R=[];e=e.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,C=>(R.push(C),"")),y=`${x}
${R.join(`
`)}
${y}`}if(T){const R=`
uniform float ${T};
`;s=R+s,d=R+d}return f&&(t=`vec3 troika_position_${a};
vec3 troika_normal_${a};
vec2 troika_uv_${a};
${t}
`,s=`${s}
void troikaVertexTransform${a}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${f}
}
`,o=`
troika_position_${a} = vec3(position);
troika_normal_${a} = vec3(normal);
troika_uv_${a} = vec2(uv);
troikaVertexTransform${a}(troika_position_${a}, troika_normal_${a}, troika_uv_${a});
${o}
`,t=t.replace(/\b(position|normal|uv)\b/g,(R,C,w,N)=>/\battribute\s+vec[23]\s+$/.test(N.substr(0,w))?C:`troika_${C}_${a}`),i.map&&i.map.channel>0||(t=t.replace(/\bMAP_UV\b/g,`troika_uv_${a}`))),t=p3(t,a,s,o,c),e=p3(e,a,d,g,y),{vertexShader:t,fragmentShader:e}}function p3(i,t,e,n,a){return(n||a||e)&&(i=i.replace(gD,`
${e}
void troikaOrigMain${t}() {`),i+=`
void main() {
  ${n}
  troikaOrigMain${t}();
  ${a}
}`),i}function Uk(i,t){return i==="uniforms"?void 0:typeof t=="function"?t.toString():t}let Ik=0;const m3=new Map;function Pk(i){const t=JSON.stringify(i,Uk);let e=m3.get(t);return e==null&&m3.set(t,e=++Ik),e}function zk(){return typeof window>"u"&&(self.window=self),(function(i){var t={parse:function(a){var s=t._bin,o=new Uint8Array(a);if(s.readASCII(o,0,4)=="ttcf"){var c=4;s.readUshort(o,c),c+=2,s.readUshort(o,c),c+=2;var f=s.readUint(o,c);c+=4;for(var d=[],g=0;g<f;g++){var y=s.readUint(o,c);c+=4,d.push(t._readFont(o,y))}return d}return[t._readFont(o,0)]},_readFont:function(a,s){var o=t._bin,c=s;o.readFixed(a,s),s+=4;var f=o.readUshort(a,s);s+=2,o.readUshort(a,s),s+=2,o.readUshort(a,s),s+=2,o.readUshort(a,s),s+=2;for(var d=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],g={_data:a,_offset:c},y={},x=0;x<f;x++){var b=o.readASCII(a,s,4);s+=4,o.readUint(a,s),s+=4;var T=o.readUint(a,s);s+=4;var R=o.readUint(a,s);s+=4,y[b]={offset:T,length:R}}for(x=0;x<d.length;x++){var C=d[x];y[C]&&(g[C.trim()]=t[C.trim()].parse(a,y[C].offset,y[C].length,g))}return g},_tabOffset:function(a,s,o){for(var c=t._bin,f=c.readUshort(a,o+4),d=o+12,g=0;g<f;g++){var y=c.readASCII(a,d,4);d+=4,c.readUint(a,d),d+=4;var x=c.readUint(a,d);if(d+=4,c.readUint(a,d),d+=4,y==s)return x}return 0}};t._bin={readFixed:function(a,s){return(a[s]<<8|a[s+1])+(a[s+2]<<8|a[s+3])/65540},readF2dot14:function(a,s){return t._bin.readShort(a,s)/16384},readInt:function(a,s){return t._bin._view(a).getInt32(s)},readInt8:function(a,s){return t._bin._view(a).getInt8(s)},readShort:function(a,s){return t._bin._view(a).getInt16(s)},readUshort:function(a,s){return t._bin._view(a).getUint16(s)},readUshorts:function(a,s,o){for(var c=[],f=0;f<o;f++)c.push(t._bin.readUshort(a,s+2*f));return c},readUint:function(a,s){return t._bin._view(a).getUint32(s)},readUint64:function(a,s){return 4294967296*t._bin.readUint(a,s)+t._bin.readUint(a,s+4)},readASCII:function(a,s,o){for(var c="",f=0;f<o;f++)c+=String.fromCharCode(a[s+f]);return c},readUnicode:function(a,s,o){for(var c="",f=0;f<o;f++){var d=a[s++]<<8|a[s++];c+=String.fromCharCode(d)}return c},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(a,s,o){var c=t._bin._tdec;return c&&s==0&&o==a.length?c.decode(a):t._bin.readASCII(a,s,o)},readBytes:function(a,s,o){for(var c=[],f=0;f<o;f++)c.push(a[s+f]);return c},readASCIIArray:function(a,s,o){for(var c=[],f=0;f<o;f++)c.push(String.fromCharCode(a[s+f]));return c},_view:function(a){return a._dataView||(a._dataView=a.buffer?new DataView(a.buffer,a.byteOffset,a.byteLength):new DataView(new Uint8Array(a).buffer))}},t._lctf={},t._lctf.parse=function(a,s,o,c,f){var d=t._bin,g={},y=s;d.readFixed(a,s),s+=4;var x=d.readUshort(a,s);s+=2;var b=d.readUshort(a,s);s+=2;var T=d.readUshort(a,s);return s+=2,g.scriptList=t._lctf.readScriptList(a,y+x),g.featureList=t._lctf.readFeatureList(a,y+b),g.lookupList=t._lctf.readLookupList(a,y+T,f),g},t._lctf.readLookupList=function(a,s,o){var c=t._bin,f=s,d=[],g=c.readUshort(a,s);s+=2;for(var y=0;y<g;y++){var x=c.readUshort(a,s);s+=2;var b=t._lctf.readLookupTable(a,f+x,o);d.push(b)}return d},t._lctf.readLookupTable=function(a,s,o){var c=t._bin,f=s,d={tabs:[]};d.ltype=c.readUshort(a,s),s+=2,d.flag=c.readUshort(a,s),s+=2;var g=c.readUshort(a,s);s+=2;for(var y=d.ltype,x=0;x<g;x++){var b=c.readUshort(a,s);s+=2;var T=o(a,y,f+b,d);d.tabs.push(T)}return d},t._lctf.numOfOnes=function(a){for(var s=0,o=0;o<32;o++)(a>>>o&1)!=0&&s++;return s},t._lctf.readClassDef=function(a,s){var o=t._bin,c=[],f=o.readUshort(a,s);if(s+=2,f==1){var d=o.readUshort(a,s);s+=2;var g=o.readUshort(a,s);s+=2;for(var y=0;y<g;y++)c.push(d+y),c.push(d+y),c.push(o.readUshort(a,s)),s+=2}if(f==2){var x=o.readUshort(a,s);for(s+=2,y=0;y<x;y++)c.push(o.readUshort(a,s)),s+=2,c.push(o.readUshort(a,s)),s+=2,c.push(o.readUshort(a,s)),s+=2}return c},t._lctf.getInterval=function(a,s){for(var o=0;o<a.length;o+=3){var c=a[o],f=a[o+1];if(a[o+2],c<=s&&s<=f)return o}return-1},t._lctf.readCoverage=function(a,s){var o=t._bin,c={};c.fmt=o.readUshort(a,s),s+=2;var f=o.readUshort(a,s);return s+=2,c.fmt==1&&(c.tab=o.readUshorts(a,s,f)),c.fmt==2&&(c.tab=o.readUshorts(a,s,3*f)),c},t._lctf.coverageIndex=function(a,s){var o=a.tab;if(a.fmt==1)return o.indexOf(s);if(a.fmt==2){var c=t._lctf.getInterval(o,s);if(c!=-1)return o[c+2]+(s-o[c])}return-1},t._lctf.readFeatureList=function(a,s){var o=t._bin,c=s,f=[],d=o.readUshort(a,s);s+=2;for(var g=0;g<d;g++){var y=o.readASCII(a,s,4);s+=4;var x=o.readUshort(a,s);s+=2;var b=t._lctf.readFeatureTable(a,c+x);b.tag=y.trim(),f.push(b)}return f},t._lctf.readFeatureTable=function(a,s){var o=t._bin,c=s,f={},d=o.readUshort(a,s);s+=2,d>0&&(f.featureParams=c+d);var g=o.readUshort(a,s);s+=2,f.tab=[];for(var y=0;y<g;y++)f.tab.push(o.readUshort(a,s+2*y));return f},t._lctf.readScriptList=function(a,s){var o=t._bin,c=s,f={},d=o.readUshort(a,s);s+=2;for(var g=0;g<d;g++){var y=o.readASCII(a,s,4);s+=4;var x=o.readUshort(a,s);s+=2,f[y.trim()]=t._lctf.readScriptTable(a,c+x)}return f},t._lctf.readScriptTable=function(a,s){var o=t._bin,c=s,f={},d=o.readUshort(a,s);s+=2,d>0&&(f.default=t._lctf.readLangSysTable(a,c+d));var g=o.readUshort(a,s);s+=2;for(var y=0;y<g;y++){var x=o.readASCII(a,s,4);s+=4;var b=o.readUshort(a,s);s+=2,f[x.trim()]=t._lctf.readLangSysTable(a,c+b)}return f},t._lctf.readLangSysTable=function(a,s){var o=t._bin,c={};o.readUshort(a,s),s+=2,c.reqFeature=o.readUshort(a,s),s+=2;var f=o.readUshort(a,s);return s+=2,c.features=o.readUshorts(a,s,f),c},t.CFF={},t.CFF.parse=function(a,s,o){var c=t._bin;(a=new Uint8Array(a.buffer,s,o))[s=0],a[++s],a[++s],a[++s],s++;var f=[];s=t.CFF.readIndex(a,s,f);for(var d=[],g=0;g<f.length-1;g++)d.push(c.readASCII(a,s+f[g],f[g+1]-f[g]));s+=f[f.length-1];var y=[];s=t.CFF.readIndex(a,s,y);var x=[];for(g=0;g<y.length-1;g++)x.push(t.CFF.readDict(a,s+y[g],s+y[g+1]));s+=y[y.length-1];var b=x[0],T=[];s=t.CFF.readIndex(a,s,T);var R=[];for(g=0;g<T.length-1;g++)R.push(c.readASCII(a,s+T[g],T[g+1]-T[g]));if(s+=T[T.length-1],t.CFF.readSubrs(a,s,b),b.CharStrings){s=b.CharStrings,T=[],s=t.CFF.readIndex(a,s,T);var C=[];for(g=0;g<T.length-1;g++)C.push(c.readBytes(a,s+T[g],T[g+1]-T[g]));b.CharStrings=C}if(b.ROS){s=b.FDArray;var w=[];for(s=t.CFF.readIndex(a,s,w),b.FDArray=[],g=0;g<w.length-1;g++){var N=t.CFF.readDict(a,s+w[g],s+w[g+1]);t.CFF._readFDict(a,N,R),b.FDArray.push(N)}s+=w[w.length-1],s=b.FDSelect,b.FDSelect=[];var I=a[s];if(s++,I!=3)throw I;var z=c.readUshort(a,s);for(s+=2,g=0;g<z+1;g++)b.FDSelect.push(c.readUshort(a,s),a[s+2]),s+=3}return b.Encoding&&(b.Encoding=t.CFF.readEncoding(a,b.Encoding,b.CharStrings.length)),b.charset&&(b.charset=t.CFF.readCharset(a,b.charset,b.CharStrings.length)),t.CFF._readFDict(a,b,R),b},t.CFF._readFDict=function(a,s,o){var c;for(var f in s.Private&&(c=s.Private[1],s.Private=t.CFF.readDict(a,c,c+s.Private[0]),s.Private.Subrs&&t.CFF.readSubrs(a,c+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(f)!=-1&&(s[f]=o[s[f]-426+35])},t.CFF.readSubrs=function(a,s,o){var c=t._bin,f=[];s=t.CFF.readIndex(a,s,f);var d,g=f.length;d=g<1240?107:g<33900?1131:32768,o.Bias=d,o.Subrs=[];for(var y=0;y<f.length-1;y++)o.Subrs.push(c.readBytes(a,s+f[y],f[y+1]-f[y]))},t.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],t.CFF.glyphByUnicode=function(a,s){for(var o=0;o<a.charset.length;o++)if(a.charset[o]==s)return o;return-1},t.CFF.glyphBySE=function(a,s){return s<0||s>255?-1:t.CFF.glyphByUnicode(a,t.CFF.tableSE[s])},t.CFF.readEncoding=function(a,s,o){t._bin;var c=[".notdef"],f=a[s];if(s++,f!=0)throw"error: unknown encoding format: "+f;var d=a[s];s++;for(var g=0;g<d;g++)c.push(a[s+g]);return c},t.CFF.readCharset=function(a,s,o){var c=t._bin,f=[".notdef"],d=a[s];if(s++,d==0)for(var g=0;g<o;g++){var y=c.readUshort(a,s);s+=2,f.push(y)}else{if(d!=1&&d!=2)throw"error: format: "+d;for(;f.length<o;){y=c.readUshort(a,s),s+=2;var x=0;for(d==1?(x=a[s],s++):(x=c.readUshort(a,s),s+=2),g=0;g<=x;g++)f.push(y),y++}}return f},t.CFF.readIndex=function(a,s,o){var c=t._bin,f=c.readUshort(a,s)+1,d=a[s+=2];if(s++,d==1)for(var g=0;g<f;g++)o.push(a[s+g]);else if(d==2)for(g=0;g<f;g++)o.push(c.readUshort(a,s+2*g));else if(d==3)for(g=0;g<f;g++)o.push(16777215&c.readUint(a,s+3*g-1));else if(f!=1)throw"unsupported offset size: "+d+", count: "+f;return(s+=f*d)-1},t.CFF.getCharString=function(a,s,o){var c=t._bin,f=a[s],d=a[s+1];a[s+2],a[s+3],a[s+4];var g=1,y=null,x=null;f<=20&&(y=f,g=1),f==12&&(y=100*f+d,g=2),21<=f&&f<=27&&(y=f,g=1),f==28&&(x=c.readShort(a,s+1),g=3),29<=f&&f<=31&&(y=f,g=1),32<=f&&f<=246&&(x=f-139,g=1),247<=f&&f<=250&&(x=256*(f-247)+d+108,g=2),251<=f&&f<=254&&(x=256*-(f-251)-d-108,g=2),f==255&&(x=c.readInt(a,s+1)/65535,g=5),o.val=x??"o"+y,o.size=g},t.CFF.readCharString=function(a,s,o){for(var c=s+o,f=t._bin,d=[];s<c;){var g=a[s],y=a[s+1];a[s+2],a[s+3],a[s+4];var x=1,b=null,T=null;g<=20&&(b=g,x=1),g==12&&(b=100*g+y,x=2),g!=19&&g!=20||(b=g,x=2),21<=g&&g<=27&&(b=g,x=1),g==28&&(T=f.readShort(a,s+1),x=3),29<=g&&g<=31&&(b=g,x=1),32<=g&&g<=246&&(T=g-139,x=1),247<=g&&g<=250&&(T=256*(g-247)+y+108,x=2),251<=g&&g<=254&&(T=256*-(g-251)-y-108,x=2),g==255&&(T=f.readInt(a,s+1)/65535,x=5),d.push(T??"o"+b),s+=x}return d},t.CFF.readDict=function(a,s,o){for(var c=t._bin,f={},d=[];s<o;){var g=a[s],y=a[s+1];a[s+2],a[s+3],a[s+4];var x=1,b=null,T=null;if(g==28&&(T=c.readShort(a,s+1),x=3),g==29&&(T=c.readInt(a,s+1),x=5),32<=g&&g<=246&&(T=g-139,x=1),247<=g&&g<=250&&(T=256*(g-247)+y+108,x=2),251<=g&&g<=254&&(T=256*-(g-251)-y-108,x=2),g==255)throw T=c.readInt(a,s+1)/65535,x=5,"unknown number";if(g==30){var R=[];for(x=1;;){var C=a[s+x];x++;var w=C>>4,N=15&C;if(w!=15&&R.push(w),N!=15&&R.push(N),N==15)break}for(var I="",z=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],F=0;F<R.length;F++)I+=z[R[F]];T=parseFloat(I)}g<=21&&(b=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][g],x=1,g==12&&(b=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][y],x=2)),b!=null?(f[b]=d.length==1?d[0]:d,d=[]):d.push(T),s+=x}return f},t.cmap={},t.cmap.parse=function(a,s,o){a=new Uint8Array(a.buffer,s,o),s=0;var c=t._bin,f={};c.readUshort(a,s),s+=2;var d=c.readUshort(a,s);s+=2;var g=[];f.tables=[];for(var y=0;y<d;y++){var x=c.readUshort(a,s);s+=2;var b=c.readUshort(a,s);s+=2;var T=c.readUint(a,s);s+=4;var R="p"+x+"e"+b,C=g.indexOf(T);if(C==-1){var w;C=f.tables.length,g.push(T);var N=c.readUshort(a,T);N==0?w=t.cmap.parse0(a,T):N==4?w=t.cmap.parse4(a,T):N==6?w=t.cmap.parse6(a,T):N==12?w=t.cmap.parse12(a,T):console.debug("unknown format: "+N,x,b,T),f.tables.push(w)}if(f[R]!=null)throw"multiple tables for one platform+encoding";f[R]=C}return f},t.cmap.parse0=function(a,s){var o=t._bin,c={};c.format=o.readUshort(a,s),s+=2;var f=o.readUshort(a,s);s+=2,o.readUshort(a,s),s+=2,c.map=[];for(var d=0;d<f-6;d++)c.map.push(a[s+d]);return c},t.cmap.parse4=function(a,s){var o=t._bin,c=s,f={};f.format=o.readUshort(a,s),s+=2;var d=o.readUshort(a,s);s+=2,o.readUshort(a,s),s+=2;var g=o.readUshort(a,s);s+=2;var y=g/2;f.searchRange=o.readUshort(a,s),s+=2,f.entrySelector=o.readUshort(a,s),s+=2,f.rangeShift=o.readUshort(a,s),s+=2,f.endCount=o.readUshorts(a,s,y),s+=2*y,s+=2,f.startCount=o.readUshorts(a,s,y),s+=2*y,f.idDelta=[];for(var x=0;x<y;x++)f.idDelta.push(o.readShort(a,s)),s+=2;for(f.idRangeOffset=o.readUshorts(a,s,y),s+=2*y,f.glyphIdArray=[];s<c+d;)f.glyphIdArray.push(o.readUshort(a,s)),s+=2;return f},t.cmap.parse6=function(a,s){var o=t._bin,c={};c.format=o.readUshort(a,s),s+=2,o.readUshort(a,s),s+=2,o.readUshort(a,s),s+=2,c.firstCode=o.readUshort(a,s),s+=2;var f=o.readUshort(a,s);s+=2,c.glyphIdArray=[];for(var d=0;d<f;d++)c.glyphIdArray.push(o.readUshort(a,s)),s+=2;return c},t.cmap.parse12=function(a,s){var o=t._bin,c={};c.format=o.readUshort(a,s),s+=2,s+=2,o.readUint(a,s),s+=4,o.readUint(a,s),s+=4;var f=o.readUint(a,s);s+=4,c.groups=[];for(var d=0;d<f;d++){var g=s+12*d,y=o.readUint(a,g+0),x=o.readUint(a,g+4),b=o.readUint(a,g+8);c.groups.push([y,x,b])}return c},t.glyf={},t.glyf.parse=function(a,s,o,c){for(var f=[],d=0;d<c.maxp.numGlyphs;d++)f.push(null);return f},t.glyf._parseGlyf=function(a,s){var o=t._bin,c=a._data,f=t._tabOffset(c,"glyf",a._offset)+a.loca[s];if(a.loca[s]==a.loca[s+1])return null;var d={};if(d.noc=o.readShort(c,f),f+=2,d.xMin=o.readShort(c,f),f+=2,d.yMin=o.readShort(c,f),f+=2,d.xMax=o.readShort(c,f),f+=2,d.yMax=o.readShort(c,f),f+=2,d.xMin>=d.xMax||d.yMin>=d.yMax)return null;if(d.noc>0){d.endPts=[];for(var g=0;g<d.noc;g++)d.endPts.push(o.readUshort(c,f)),f+=2;var y=o.readUshort(c,f);if(f+=2,c.length-f<y)return null;d.instructions=o.readBytes(c,f,y),f+=y;var x=d.endPts[d.noc-1]+1;for(d.flags=[],g=0;g<x;g++){var b=c[f];if(f++,d.flags.push(b),(8&b)!=0){var T=c[f];f++;for(var R=0;R<T;R++)d.flags.push(b),g++}}for(d.xs=[],g=0;g<x;g++){var C=(2&d.flags[g])!=0,w=(16&d.flags[g])!=0;C?(d.xs.push(w?c[f]:-c[f]),f++):w?d.xs.push(0):(d.xs.push(o.readShort(c,f)),f+=2)}for(d.ys=[],g=0;g<x;g++)C=(4&d.flags[g])!=0,w=(32&d.flags[g])!=0,C?(d.ys.push(w?c[f]:-c[f]),f++):w?d.ys.push(0):(d.ys.push(o.readShort(c,f)),f+=2);var N=0,I=0;for(g=0;g<x;g++)N+=d.xs[g],I+=d.ys[g],d.xs[g]=N,d.ys[g]=I}else{var z;d.parts=[];do{z=o.readUshort(c,f),f+=2;var F={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(d.parts.push(F),F.glyphIndex=o.readUshort(c,f),f+=2,1&z){var H=o.readShort(c,f);f+=2;var q=o.readShort(c,f);f+=2}else H=o.readInt8(c,f),f++,q=o.readInt8(c,f),f++;2&z?(F.m.tx=H,F.m.ty=q):(F.p1=H,F.p2=q),8&z?(F.m.a=F.m.d=o.readF2dot14(c,f),f+=2):64&z?(F.m.a=o.readF2dot14(c,f),f+=2,F.m.d=o.readF2dot14(c,f),f+=2):128&z&&(F.m.a=o.readF2dot14(c,f),f+=2,F.m.b=o.readF2dot14(c,f),f+=2,F.m.c=o.readF2dot14(c,f),f+=2,F.m.d=o.readF2dot14(c,f),f+=2)}while(32&z);if(256&z){var Z=o.readUshort(c,f);for(f+=2,d.instr=[],g=0;g<Z;g++)d.instr.push(c[f]),f++}}return d},t.GDEF={},t.GDEF.parse=function(a,s,o,c){var f=s;s+=4;var d=t._bin.readUshort(a,s);return{glyphClassDef:d===0?null:t._lctf.readClassDef(a,f+d)}},t.GPOS={},t.GPOS.parse=function(a,s,o,c){return t._lctf.parse(a,s,o,c,t.GPOS.subt)},t.GPOS.subt=function(a,s,o,c){var f=t._bin,d=o,g={};if(g.fmt=f.readUshort(a,o),o+=2,s==1||s==2||s==3||s==7||s==8&&g.fmt<=2){var y=f.readUshort(a,o);o+=2,g.coverage=t._lctf.readCoverage(a,y+d)}if(s==1&&g.fmt==1){var x=f.readUshort(a,o);o+=2,x!=0&&(g.pos=t.GPOS.readValueRecord(a,o,x))}else if(s==2&&g.fmt>=1&&g.fmt<=2){x=f.readUshort(a,o),o+=2;var b=f.readUshort(a,o);o+=2;var T=t._lctf.numOfOnes(x),R=t._lctf.numOfOnes(b);if(g.fmt==1){g.pairsets=[];var C=f.readUshort(a,o);o+=2;for(var w=0;w<C;w++){var N=d+f.readUshort(a,o);o+=2;var I=f.readUshort(a,N);N+=2;for(var z=[],F=0;F<I;F++){var H=f.readUshort(a,N);N+=2,x!=0&&(J=t.GPOS.readValueRecord(a,N,x),N+=2*T),b!=0&&(rt=t.GPOS.readValueRecord(a,N,b),N+=2*R),z.push({gid2:H,val1:J,val2:rt})}g.pairsets.push(z)}}if(g.fmt==2){var q=f.readUshort(a,o);o+=2;var Z=f.readUshort(a,o);o+=2;var B=f.readUshort(a,o);o+=2;var V=f.readUshort(a,o);for(o+=2,g.classDef1=t._lctf.readClassDef(a,d+q),g.classDef2=t._lctf.readClassDef(a,d+Z),g.matrix=[],w=0;w<B;w++){var Q=[];for(F=0;F<V;F++){var J=null,rt=null;x!=0&&(J=t.GPOS.readValueRecord(a,o,x),o+=2*T),b!=0&&(rt=t.GPOS.readValueRecord(a,o,b),o+=2*R),Q.push({val1:J,val2:rt})}g.matrix.push(Q)}}}else if(s==4&&g.fmt==1)g.markCoverage=t._lctf.readCoverage(a,f.readUshort(a,o)+d),g.baseCoverage=t._lctf.readCoverage(a,f.readUshort(a,o+2)+d),g.markClassCount=f.readUshort(a,o+4),g.markArray=t.GPOS.readMarkArray(a,f.readUshort(a,o+6)+d),g.baseArray=t.GPOS.readBaseArray(a,f.readUshort(a,o+8)+d,g.markClassCount);else if(s==6&&g.fmt==1)g.mark1Coverage=t._lctf.readCoverage(a,f.readUshort(a,o)+d),g.mark2Coverage=t._lctf.readCoverage(a,f.readUshort(a,o+2)+d),g.markClassCount=f.readUshort(a,o+4),g.mark1Array=t.GPOS.readMarkArray(a,f.readUshort(a,o+6)+d),g.mark2Array=t.GPOS.readBaseArray(a,f.readUshort(a,o+8)+d,g.markClassCount);else{if(s==9&&g.fmt==1){var ut=f.readUshort(a,o);o+=2;var vt=f.readUint(a,o);if(o+=4,c.ltype==9)c.ltype=ut;else if(c.ltype!=ut)throw"invalid extension substitution";return t.GPOS.subt(a,c.ltype,d+vt)}console.debug("unsupported GPOS table LookupType",s,"format",g.fmt)}return g},t.GPOS.readValueRecord=function(a,s,o){var c=t._bin,f=[];return f.push(1&o?c.readShort(a,s):0),s+=1&o?2:0,f.push(2&o?c.readShort(a,s):0),s+=2&o?2:0,f.push(4&o?c.readShort(a,s):0),s+=4&o?2:0,f.push(8&o?c.readShort(a,s):0),s+=8&o?2:0,f},t.GPOS.readBaseArray=function(a,s,o){var c=t._bin,f=[],d=s,g=c.readUshort(a,s);s+=2;for(var y=0;y<g;y++){for(var x=[],b=0;b<o;b++)x.push(t.GPOS.readAnchorRecord(a,d+c.readUshort(a,s))),s+=2;f.push(x)}return f},t.GPOS.readMarkArray=function(a,s){var o=t._bin,c=[],f=s,d=o.readUshort(a,s);s+=2;for(var g=0;g<d;g++){var y=t.GPOS.readAnchorRecord(a,o.readUshort(a,s+2)+f);y.markClass=o.readUshort(a,s),c.push(y),s+=4}return c},t.GPOS.readAnchorRecord=function(a,s){var o=t._bin,c={};return c.fmt=o.readUshort(a,s),c.x=o.readShort(a,s+2),c.y=o.readShort(a,s+4),c},t.GSUB={},t.GSUB.parse=function(a,s,o,c){return t._lctf.parse(a,s,o,c,t.GSUB.subt)},t.GSUB.subt=function(a,s,o,c){var f=t._bin,d=o,g={};if(g.fmt=f.readUshort(a,o),o+=2,s!=1&&s!=2&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==2||s==4||s==5&&g.fmt<=2||s==6&&g.fmt<=2){var y=f.readUshort(a,o);o+=2,g.coverage=t._lctf.readCoverage(a,d+y)}if(s==1&&g.fmt>=1&&g.fmt<=2){if(g.fmt==1)g.delta=f.readShort(a,o),o+=2;else if(g.fmt==2){var x=f.readUshort(a,o);o+=2,g.newg=f.readUshorts(a,o,x),o+=2*g.newg.length}}else if(s==2&&g.fmt==1){x=f.readUshort(a,o),o+=2,g.seqs=[];for(var b=0;b<x;b++){var T=f.readUshort(a,o)+d;o+=2;var R=f.readUshort(a,T);g.seqs.push(f.readUshorts(a,T+2,R))}}else if(s==4)for(g.vals=[],x=f.readUshort(a,o),o+=2,b=0;b<x;b++){var C=f.readUshort(a,o);o+=2,g.vals.push(t.GSUB.readLigatureSet(a,d+C))}else if(s==5&&g.fmt==2){if(g.fmt==2){var w=f.readUshort(a,o);o+=2,g.cDef=t._lctf.readClassDef(a,d+w),g.scset=[];var N=f.readUshort(a,o);for(o+=2,b=0;b<N;b++){var I=f.readUshort(a,o);o+=2,g.scset.push(I==0?null:t.GSUB.readSubClassSet(a,d+I))}}}else if(s==6&&g.fmt==3){if(g.fmt==3){for(b=0;b<3;b++){x=f.readUshort(a,o),o+=2;for(var z=[],F=0;F<x;F++)z.push(t._lctf.readCoverage(a,d+f.readUshort(a,o+2*F)));o+=2*x,b==0&&(g.backCvg=z),b==1&&(g.inptCvg=z),b==2&&(g.ahedCvg=z)}x=f.readUshort(a,o),o+=2,g.lookupRec=t.GSUB.readSubstLookupRecords(a,o,x)}}else{if(s==7&&g.fmt==1){var H=f.readUshort(a,o);o+=2;var q=f.readUint(a,o);if(o+=4,c.ltype==9)c.ltype=H;else if(c.ltype!=H)throw"invalid extension substitution";return t.GSUB.subt(a,c.ltype,d+q)}console.debug("unsupported GSUB table LookupType",s,"format",g.fmt)}return g},t.GSUB.readSubClassSet=function(a,s){var o=t._bin.readUshort,c=s,f=[],d=o(a,s);s+=2;for(var g=0;g<d;g++){var y=o(a,s);s+=2,f.push(t.GSUB.readSubClassRule(a,c+y))}return f},t.GSUB.readSubClassRule=function(a,s){var o=t._bin.readUshort,c={},f=o(a,s),d=o(a,s+=2);s+=2,c.input=[];for(var g=0;g<f-1;g++)c.input.push(o(a,s)),s+=2;return c.substLookupRecords=t.GSUB.readSubstLookupRecords(a,s,d),c},t.GSUB.readSubstLookupRecords=function(a,s,o){for(var c=t._bin.readUshort,f=[],d=0;d<o;d++)f.push(c(a,s),c(a,s+2)),s+=4;return f},t.GSUB.readChainSubClassSet=function(a,s){var o=t._bin,c=s,f=[],d=o.readUshort(a,s);s+=2;for(var g=0;g<d;g++){var y=o.readUshort(a,s);s+=2,f.push(t.GSUB.readChainSubClassRule(a,c+y))}return f},t.GSUB.readChainSubClassRule=function(a,s){for(var o=t._bin,c={},f=["backtrack","input","lookahead"],d=0;d<f.length;d++){var g=o.readUshort(a,s);s+=2,d==1&&g--,c[f[d]]=o.readUshorts(a,s,g),s+=2*c[f[d]].length}return g=o.readUshort(a,s),s+=2,c.subst=o.readUshorts(a,s,2*g),s+=2*c.subst.length,c},t.GSUB.readLigatureSet=function(a,s){var o=t._bin,c=s,f=[],d=o.readUshort(a,s);s+=2;for(var g=0;g<d;g++){var y=o.readUshort(a,s);s+=2,f.push(t.GSUB.readLigature(a,c+y))}return f},t.GSUB.readLigature=function(a,s){var o=t._bin,c={chain:[]};c.nglyph=o.readUshort(a,s),s+=2;var f=o.readUshort(a,s);s+=2;for(var d=0;d<f-1;d++)c.chain.push(o.readUshort(a,s)),s+=2;return c},t.head={},t.head.parse=function(a,s,o){var c=t._bin,f={};return c.readFixed(a,s),s+=4,f.fontRevision=c.readFixed(a,s),s+=4,c.readUint(a,s),s+=4,c.readUint(a,s),s+=4,f.flags=c.readUshort(a,s),s+=2,f.unitsPerEm=c.readUshort(a,s),s+=2,f.created=c.readUint64(a,s),s+=8,f.modified=c.readUint64(a,s),s+=8,f.xMin=c.readShort(a,s),s+=2,f.yMin=c.readShort(a,s),s+=2,f.xMax=c.readShort(a,s),s+=2,f.yMax=c.readShort(a,s),s+=2,f.macStyle=c.readUshort(a,s),s+=2,f.lowestRecPPEM=c.readUshort(a,s),s+=2,f.fontDirectionHint=c.readShort(a,s),s+=2,f.indexToLocFormat=c.readShort(a,s),s+=2,f.glyphDataFormat=c.readShort(a,s),s+=2,f},t.hhea={},t.hhea.parse=function(a,s,o){var c=t._bin,f={};return c.readFixed(a,s),s+=4,f.ascender=c.readShort(a,s),s+=2,f.descender=c.readShort(a,s),s+=2,f.lineGap=c.readShort(a,s),s+=2,f.advanceWidthMax=c.readUshort(a,s),s+=2,f.minLeftSideBearing=c.readShort(a,s),s+=2,f.minRightSideBearing=c.readShort(a,s),s+=2,f.xMaxExtent=c.readShort(a,s),s+=2,f.caretSlopeRise=c.readShort(a,s),s+=2,f.caretSlopeRun=c.readShort(a,s),s+=2,f.caretOffset=c.readShort(a,s),s+=2,s+=8,f.metricDataFormat=c.readShort(a,s),s+=2,f.numberOfHMetrics=c.readUshort(a,s),s+=2,f},t.hmtx={},t.hmtx.parse=function(a,s,o,c){for(var f=t._bin,d={aWidth:[],lsBearing:[]},g=0,y=0,x=0;x<c.maxp.numGlyphs;x++)x<c.hhea.numberOfHMetrics&&(g=f.readUshort(a,s),s+=2,y=f.readShort(a,s),s+=2),d.aWidth.push(g),d.lsBearing.push(y);return d},t.kern={},t.kern.parse=function(a,s,o,c){var f=t._bin,d=f.readUshort(a,s);if(s+=2,d==1)return t.kern.parseV1(a,s-2,o,c);var g=f.readUshort(a,s);s+=2;for(var y={glyph1:[],rval:[]},x=0;x<g;x++){s+=2,o=f.readUshort(a,s),s+=2;var b=f.readUshort(a,s);s+=2;var T=b>>>8;if((T&=15)!=0)throw"unknown kern table format: "+T;s=t.kern.readFormat0(a,s,y)}return y},t.kern.parseV1=function(a,s,o,c){var f=t._bin;f.readFixed(a,s),s+=4;var d=f.readUint(a,s);s+=4;for(var g={glyph1:[],rval:[]},y=0;y<d;y++){f.readUint(a,s),s+=4;var x=f.readUshort(a,s);s+=2,f.readUshort(a,s),s+=2;var b=x>>>8;if((b&=15)!=0)throw"unknown kern table format: "+b;s=t.kern.readFormat0(a,s,g)}return g},t.kern.readFormat0=function(a,s,o){var c=t._bin,f=-1,d=c.readUshort(a,s);s+=2,c.readUshort(a,s),s+=2,c.readUshort(a,s),s+=2,c.readUshort(a,s),s+=2;for(var g=0;g<d;g++){var y=c.readUshort(a,s);s+=2;var x=c.readUshort(a,s);s+=2;var b=c.readShort(a,s);s+=2,y!=f&&(o.glyph1.push(y),o.rval.push({glyph2:[],vals:[]}));var T=o.rval[o.rval.length-1];T.glyph2.push(x),T.vals.push(b),f=y}return s},t.loca={},t.loca.parse=function(a,s,o,c){var f=t._bin,d=[],g=c.head.indexToLocFormat,y=c.maxp.numGlyphs+1;if(g==0)for(var x=0;x<y;x++)d.push(f.readUshort(a,s+(x<<1))<<1);if(g==1)for(x=0;x<y;x++)d.push(f.readUint(a,s+(x<<2)));return d},t.maxp={},t.maxp.parse=function(a,s,o){var c=t._bin,f={},d=c.readUint(a,s);return s+=4,f.numGlyphs=c.readUshort(a,s),s+=2,d==65536&&(f.maxPoints=c.readUshort(a,s),s+=2,f.maxContours=c.readUshort(a,s),s+=2,f.maxCompositePoints=c.readUshort(a,s),s+=2,f.maxCompositeContours=c.readUshort(a,s),s+=2,f.maxZones=c.readUshort(a,s),s+=2,f.maxTwilightPoints=c.readUshort(a,s),s+=2,f.maxStorage=c.readUshort(a,s),s+=2,f.maxFunctionDefs=c.readUshort(a,s),s+=2,f.maxInstructionDefs=c.readUshort(a,s),s+=2,f.maxStackElements=c.readUshort(a,s),s+=2,f.maxSizeOfInstructions=c.readUshort(a,s),s+=2,f.maxComponentElements=c.readUshort(a,s),s+=2,f.maxComponentDepth=c.readUshort(a,s),s+=2),f},t.name={},t.name.parse=function(a,s,o){var c=t._bin,f={};c.readUshort(a,s),s+=2;var d=c.readUshort(a,s);s+=2,c.readUshort(a,s);for(var g,y=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],x=s+=2,b=0;b<d;b++){var T=c.readUshort(a,s);s+=2;var R=c.readUshort(a,s);s+=2;var C=c.readUshort(a,s);s+=2;var w=c.readUshort(a,s);s+=2;var N=c.readUshort(a,s);s+=2;var I=c.readUshort(a,s);s+=2;var z,F=y[w],H=x+12*d+I;if(T==0)z=c.readUnicode(a,H,N/2);else if(T==3&&R==0)z=c.readUnicode(a,H,N/2);else if(R==0)z=c.readASCII(a,H,N);else if(R==1)z=c.readUnicode(a,H,N/2);else if(R==3)z=c.readUnicode(a,H,N/2);else{if(T!=1)throw"unknown encoding "+R+", platformID: "+T;z=c.readASCII(a,H,N),console.debug("reading unknown MAC encoding "+R+" as ASCII")}var q="p"+T+","+C.toString(16);f[q]==null&&(f[q]={}),f[q][F!==void 0?F:w]=z,f[q]._lang=C}for(var Z in f)if(f[Z].postScriptName!=null&&f[Z]._lang==1033)return f[Z];for(var Z in f)if(f[Z].postScriptName!=null&&f[Z]._lang==0)return f[Z];for(var Z in f)if(f[Z].postScriptName!=null&&f[Z]._lang==3084)return f[Z];for(var Z in f)if(f[Z].postScriptName!=null)return f[Z];for(var Z in f){g=Z;break}return console.debug("returning name table with languageID "+f[g]._lang),f[g]},t["OS/2"]={},t["OS/2"].parse=function(a,s,o){var c=t._bin.readUshort(a,s);s+=2;var f={};if(c==0)t["OS/2"].version0(a,s,f);else if(c==1)t["OS/2"].version1(a,s,f);else if(c==2||c==3||c==4)t["OS/2"].version2(a,s,f);else{if(c!=5)throw"unknown OS/2 table version: "+c;t["OS/2"].version5(a,s,f)}return f},t["OS/2"].version0=function(a,s,o){var c=t._bin;return o.xAvgCharWidth=c.readShort(a,s),s+=2,o.usWeightClass=c.readUshort(a,s),s+=2,o.usWidthClass=c.readUshort(a,s),s+=2,o.fsType=c.readUshort(a,s),s+=2,o.ySubscriptXSize=c.readShort(a,s),s+=2,o.ySubscriptYSize=c.readShort(a,s),s+=2,o.ySubscriptXOffset=c.readShort(a,s),s+=2,o.ySubscriptYOffset=c.readShort(a,s),s+=2,o.ySuperscriptXSize=c.readShort(a,s),s+=2,o.ySuperscriptYSize=c.readShort(a,s),s+=2,o.ySuperscriptXOffset=c.readShort(a,s),s+=2,o.ySuperscriptYOffset=c.readShort(a,s),s+=2,o.yStrikeoutSize=c.readShort(a,s),s+=2,o.yStrikeoutPosition=c.readShort(a,s),s+=2,o.sFamilyClass=c.readShort(a,s),s+=2,o.panose=c.readBytes(a,s,10),s+=10,o.ulUnicodeRange1=c.readUint(a,s),s+=4,o.ulUnicodeRange2=c.readUint(a,s),s+=4,o.ulUnicodeRange3=c.readUint(a,s),s+=4,o.ulUnicodeRange4=c.readUint(a,s),s+=4,o.achVendID=[c.readInt8(a,s),c.readInt8(a,s+1),c.readInt8(a,s+2),c.readInt8(a,s+3)],s+=4,o.fsSelection=c.readUshort(a,s),s+=2,o.usFirstCharIndex=c.readUshort(a,s),s+=2,o.usLastCharIndex=c.readUshort(a,s),s+=2,o.sTypoAscender=c.readShort(a,s),s+=2,o.sTypoDescender=c.readShort(a,s),s+=2,o.sTypoLineGap=c.readShort(a,s),s+=2,o.usWinAscent=c.readUshort(a,s),s+=2,o.usWinDescent=c.readUshort(a,s),s+=2},t["OS/2"].version1=function(a,s,o){var c=t._bin;return s=t["OS/2"].version0(a,s,o),o.ulCodePageRange1=c.readUint(a,s),s+=4,o.ulCodePageRange2=c.readUint(a,s),s+=4},t["OS/2"].version2=function(a,s,o){var c=t._bin;return s=t["OS/2"].version1(a,s,o),o.sxHeight=c.readShort(a,s),s+=2,o.sCapHeight=c.readShort(a,s),s+=2,o.usDefault=c.readUshort(a,s),s+=2,o.usBreak=c.readUshort(a,s),s+=2,o.usMaxContext=c.readUshort(a,s),s+=2},t["OS/2"].version5=function(a,s,o){var c=t._bin;return s=t["OS/2"].version2(a,s,o),o.usLowerOpticalPointSize=c.readUshort(a,s),s+=2,o.usUpperOpticalPointSize=c.readUshort(a,s),s+=2},t.post={},t.post.parse=function(a,s,o){var c=t._bin,f={};return f.version=c.readFixed(a,s),s+=4,f.italicAngle=c.readFixed(a,s),s+=4,f.underlinePosition=c.readShort(a,s),s+=2,f.underlineThickness=c.readShort(a,s),s+=2,f},t==null&&(t={}),t.U==null&&(t.U={}),t.U.codeToGlyph=function(a,s){var o=a.cmap,c=-1;if(o.p0e4!=null?c=o.p0e4:o.p3e1!=null?c=o.p3e1:o.p1e0!=null?c=o.p1e0:o.p0e3!=null&&(c=o.p0e3),c==-1)throw"no familiar platform and encoding!";var f=o.tables[c];if(f.format==0)return s>=f.map.length?0:f.map[s];if(f.format==4){for(var d=-1,g=0;g<f.endCount.length;g++)if(s<=f.endCount[g]){d=g;break}return d==-1||f.startCount[d]>s?0:65535&(f.idRangeOffset[d]!=0?f.glyphIdArray[s-f.startCount[d]+(f.idRangeOffset[d]>>1)-(f.idRangeOffset.length-d)]:s+f.idDelta[d])}if(f.format==12){if(s>f.groups[f.groups.length-1][1])return 0;for(g=0;g<f.groups.length;g++){var y=f.groups[g];if(y[0]<=s&&s<=y[1])return y[2]+(s-y[0])}return 0}throw"unknown cmap table format "+f.format},t.U.glyphToPath=function(a,s){var o={cmds:[],crds:[]};if(a.SVG&&a.SVG.entries[s]){var c=a.SVG.entries[s];return c==null?o:(typeof c=="string"&&(c=t.SVG.toPath(c),a.SVG.entries[s]=c),c)}if(a.CFF){var f={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:a.CFF.Private?a.CFF.Private.defaultWidthX:0,open:!1},d=a.CFF,g=a.CFF.Private;if(d.ROS){for(var y=0;d.FDSelect[y+2]<=s;)y+=2;g=d.FDArray[d.FDSelect[y+1]].Private}t.U._drawCFF(a.CFF.CharStrings[s],f,d,g,o)}else a.glyf&&t.U._drawGlyf(s,a,o);return o},t.U._drawGlyf=function(a,s,o){var c=s.glyf[a];c==null&&(c=s.glyf[a]=t.glyf._parseGlyf(s,a)),c!=null&&(c.noc>-1?t.U._simpleGlyph(c,o):t.U._compoGlyph(c,s,o))},t.U._simpleGlyph=function(a,s){for(var o=0;o<a.noc;o++){for(var c=o==0?0:a.endPts[o-1]+1,f=a.endPts[o],d=c;d<=f;d++){var g=d==c?f:d-1,y=d==f?c:d+1,x=1&a.flags[d],b=1&a.flags[g],T=1&a.flags[y],R=a.xs[d],C=a.ys[d];if(d==c)if(x){if(!b){t.U.P.moveTo(s,R,C);continue}t.U.P.moveTo(s,a.xs[g],a.ys[g])}else b?t.U.P.moveTo(s,a.xs[g],a.ys[g]):t.U.P.moveTo(s,(a.xs[g]+R)/2,(a.ys[g]+C)/2);x?b&&t.U.P.lineTo(s,R,C):T?t.U.P.qcurveTo(s,R,C,a.xs[y],a.ys[y]):t.U.P.qcurveTo(s,R,C,(R+a.xs[y])/2,(C+a.ys[y])/2)}t.U.P.closePath(s)}},t.U._compoGlyph=function(a,s,o){for(var c=0;c<a.parts.length;c++){var f={cmds:[],crds:[]},d=a.parts[c];t.U._drawGlyf(d.glyphIndex,s,f);for(var g=d.m,y=0;y<f.crds.length;y+=2){var x=f.crds[y],b=f.crds[y+1];o.crds.push(x*g.a+b*g.b+g.tx),o.crds.push(x*g.c+b*g.d+g.ty)}for(y=0;y<f.cmds.length;y++)o.cmds.push(f.cmds[y])}},t.U._getGlyphClass=function(a,s){var o=t._lctf.getInterval(s,a);return o==-1?0:s[o+2]},t.U._applySubs=function(a,s,o,c){for(var f=a.length-s-1,d=0;d<o.tabs.length;d++)if(o.tabs[d]!=null){var g,y=o.tabs[d];if(!y.coverage||(g=t._lctf.coverageIndex(y.coverage,a[s]))!=-1){if(o.ltype==1)a[s],y.fmt==1?a[s]=a[s]+y.delta:a[s]=y.newg[g];else if(o.ltype==4)for(var x=y.vals[g],b=0;b<x.length;b++){var T=x[b],R=T.chain.length;if(!(R>f)){for(var C=!0,w=0,N=0;N<R;N++){for(;a[s+w+(1+N)]==-1;)w++;T.chain[N]!=a[s+w+(1+N)]&&(C=!1)}if(C){for(a[s]=T.nglyph,N=0;N<R+w;N++)a[s+N+1]=-1;break}}}else if(o.ltype==5&&y.fmt==2)for(var I=t._lctf.getInterval(y.cDef,a[s]),z=y.cDef[I+2],F=y.scset[z],H=0;H<F.length;H++){var q=F[H],Z=q.input;if(!(Z.length>f)){for(C=!0,N=0;N<Z.length;N++){var B=t._lctf.getInterval(y.cDef,a[s+1+N]);if(I==-1&&y.cDef[B+2]!=Z[N]){C=!1;break}}if(C){var V=q.substLookupRecords;for(b=0;b<V.length;b+=2)V[b],V[b+1]}}}else if(o.ltype==6&&y.fmt==3){if(!t.U._glsCovered(a,y.backCvg,s-y.backCvg.length)||!t.U._glsCovered(a,y.inptCvg,s)||!t.U._glsCovered(a,y.ahedCvg,s+y.inptCvg.length))continue;var Q=y.lookupRec;for(H=0;H<Q.length;H+=2){I=Q[H];var J=c[Q[H+1]];t.U._applySubs(a,s+I,J,c)}}}}},t.U._glsCovered=function(a,s,o){for(var c=0;c<s.length;c++)if(t._lctf.coverageIndex(s[c],a[o+c])==-1)return!1;return!0},t.U.glyphsToPath=function(a,s,o){for(var c={cmds:[],crds:[]},f=0,d=0;d<s.length;d++){var g=s[d];if(g!=-1){for(var y=d<s.length-1&&s[d+1]!=-1?s[d+1]:0,x=t.U.glyphToPath(a,g),b=0;b<x.crds.length;b+=2)c.crds.push(x.crds[b]+f),c.crds.push(x.crds[b+1]);for(o&&c.cmds.push(o),b=0;b<x.cmds.length;b++)c.cmds.push(x.cmds[b]);o&&c.cmds.push("X"),f+=a.hmtx.aWidth[g],d<s.length-1&&(f+=t.U.getPairAdjustment(a,g,y))}}return c},t.U.P={},t.U.P.moveTo=function(a,s,o){a.cmds.push("M"),a.crds.push(s,o)},t.U.P.lineTo=function(a,s,o){a.cmds.push("L"),a.crds.push(s,o)},t.U.P.curveTo=function(a,s,o,c,f,d,g){a.cmds.push("C"),a.crds.push(s,o,c,f,d,g)},t.U.P.qcurveTo=function(a,s,o,c,f){a.cmds.push("Q"),a.crds.push(s,o,c,f)},t.U.P.closePath=function(a){a.cmds.push("Z")},t.U._drawCFF=function(a,s,o,c,f){for(var d=s.stack,g=s.nStems,y=s.haveWidth,x=s.width,b=s.open,T=0,R=s.x,C=s.y,w=0,N=0,I=0,z=0,F=0,H=0,q=0,Z=0,B=0,V=0,Q={val:0,size:0};T<a.length;){t.CFF.getCharString(a,T,Q);var J=Q.val;if(T+=Q.size,J=="o1"||J=="o18")d.length%2!=0&&!y&&(x=d.shift()+c.nominalWidthX),g+=d.length>>1,d.length=0,y=!0;else if(J=="o3"||J=="o23")d.length%2!=0&&!y&&(x=d.shift()+c.nominalWidthX),g+=d.length>>1,d.length=0,y=!0;else if(J=="o4")d.length>1&&!y&&(x=d.shift()+c.nominalWidthX,y=!0),b&&t.U.P.closePath(f),C+=d.pop(),t.U.P.moveTo(f,R,C),b=!0;else if(J=="o5")for(;d.length>0;)R+=d.shift(),C+=d.shift(),t.U.P.lineTo(f,R,C);else if(J=="o6"||J=="o7")for(var rt=d.length,ut=J=="o6",vt=0;vt<rt;vt++){var j=d.shift();ut?R+=j:C+=j,ut=!ut,t.U.P.lineTo(f,R,C)}else if(J=="o8"||J=="o24"){rt=d.length;for(var K=0;K+6<=rt;)w=R+d.shift(),N=C+d.shift(),I=w+d.shift(),z=N+d.shift(),R=I+d.shift(),C=z+d.shift(),t.U.P.curveTo(f,w,N,I,z,R,C),K+=6;J=="o24"&&(R+=d.shift(),C+=d.shift(),t.U.P.lineTo(f,R,C))}else{if(J=="o11")break;if(J=="o1234"||J=="o1235"||J=="o1236"||J=="o1237")J=="o1234"&&(N=C,I=(w=R+d.shift())+d.shift(),V=z=N+d.shift(),H=z,Z=C,R=(q=(F=(B=I+d.shift())+d.shift())+d.shift())+d.shift(),t.U.P.curveTo(f,w,N,I,z,B,V),t.U.P.curveTo(f,F,H,q,Z,R,C)),J=="o1235"&&(w=R+d.shift(),N=C+d.shift(),I=w+d.shift(),z=N+d.shift(),B=I+d.shift(),V=z+d.shift(),F=B+d.shift(),H=V+d.shift(),q=F+d.shift(),Z=H+d.shift(),R=q+d.shift(),C=Z+d.shift(),d.shift(),t.U.P.curveTo(f,w,N,I,z,B,V),t.U.P.curveTo(f,F,H,q,Z,R,C)),J=="o1236"&&(w=R+d.shift(),N=C+d.shift(),I=w+d.shift(),V=z=N+d.shift(),H=z,q=(F=(B=I+d.shift())+d.shift())+d.shift(),Z=H+d.shift(),R=q+d.shift(),t.U.P.curveTo(f,w,N,I,z,B,V),t.U.P.curveTo(f,F,H,q,Z,R,C)),J=="o1237"&&(w=R+d.shift(),N=C+d.shift(),I=w+d.shift(),z=N+d.shift(),B=I+d.shift(),V=z+d.shift(),F=B+d.shift(),H=V+d.shift(),q=F+d.shift(),Z=H+d.shift(),Math.abs(q-R)>Math.abs(Z-C)?R=q+d.shift():C=Z+d.shift(),t.U.P.curveTo(f,w,N,I,z,B,V),t.U.P.curveTo(f,F,H,q,Z,R,C));else if(J=="o14"){if(d.length>0&&!y&&(x=d.shift()+o.nominalWidthX,y=!0),d.length==4){var et=d.shift(),dt=d.shift(),lt=d.shift(),G=d.shift(),nt=t.CFF.glyphBySE(o,lt),ft=t.CFF.glyphBySE(o,G);t.U._drawCFF(o.CharStrings[nt],s,o,c,f),s.x=et,s.y=dt,t.U._drawCFF(o.CharStrings[ft],s,o,c,f)}b&&(t.U.P.closePath(f),b=!1)}else if(J=="o19"||J=="o20")d.length%2!=0&&!y&&(x=d.shift()+c.nominalWidthX),g+=d.length>>1,d.length=0,y=!0,T+=g+7>>3;else if(J=="o21")d.length>2&&!y&&(x=d.shift()+c.nominalWidthX,y=!0),C+=d.pop(),R+=d.pop(),b&&t.U.P.closePath(f),t.U.P.moveTo(f,R,C),b=!0;else if(J=="o22")d.length>1&&!y&&(x=d.shift()+c.nominalWidthX,y=!0),R+=d.pop(),b&&t.U.P.closePath(f),t.U.P.moveTo(f,R,C),b=!0;else if(J=="o25"){for(;d.length>6;)R+=d.shift(),C+=d.shift(),t.U.P.lineTo(f,R,C);w=R+d.shift(),N=C+d.shift(),I=w+d.shift(),z=N+d.shift(),R=I+d.shift(),C=z+d.shift(),t.U.P.curveTo(f,w,N,I,z,R,C)}else if(J=="o26")for(d.length%2&&(R+=d.shift());d.length>0;)w=R,N=C+d.shift(),R=I=w+d.shift(),C=(z=N+d.shift())+d.shift(),t.U.P.curveTo(f,w,N,I,z,R,C);else if(J=="o27")for(d.length%2&&(C+=d.shift());d.length>0;)N=C,I=(w=R+d.shift())+d.shift(),z=N+d.shift(),R=I+d.shift(),C=z,t.U.P.curveTo(f,w,N,I,z,R,C);else if(J=="o10"||J=="o29"){var mt=J=="o10"?c:o;if(d.length==0)console.debug("error: empty stack");else{var xt=d.pop(),ht=mt.Subrs[xt+mt.Bias];s.x=R,s.y=C,s.nStems=g,s.haveWidth=y,s.width=x,s.open=b,t.U._drawCFF(ht,s,o,c,f),R=s.x,C=s.y,g=s.nStems,y=s.haveWidth,x=s.width,b=s.open}}else if(J=="o30"||J=="o31"){var _t=d.length,At=(K=0,J=="o31");for(K+=_t-(rt=-3&_t);K<rt;)At?(N=C,I=(w=R+d.shift())+d.shift(),C=(z=N+d.shift())+d.shift(),rt-K==5?(R=I+d.shift(),K++):R=I,At=!1):(w=R,N=C+d.shift(),I=w+d.shift(),z=N+d.shift(),R=I+d.shift(),rt-K==5?(C=z+d.shift(),K++):C=z,At=!0),t.U.P.curveTo(f,w,N,I,z,R,C),K+=4}else{if((J+"").charAt(0)=="o")throw console.debug("Unknown operation: "+J,a),J;d.push(J)}}}s.x=R,s.y=C,s.nStems=g,s.haveWidth=y,s.width=x,s.open=b};var e=t,n={Typr:e};return i.Typr=e,i.default=n,Object.defineProperty(i,"__esModule",{value:!0}),i})({}).Typr}function Bk(){return(function(i){var t=Uint8Array,e=Uint16Array,n=Uint32Array,a=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c=function(J,rt){for(var ut=new e(31),vt=0;vt<31;++vt)ut[vt]=rt+=1<<J[vt-1];var j=new n(ut[30]);for(vt=1;vt<30;++vt)for(var K=ut[vt];K<ut[vt+1];++K)j[K]=K-ut[vt]<<5|vt;return[ut,j]},f=c(a,2),d=f[0],g=f[1];d[28]=258,g[258]=28;for(var y=c(s,0)[0],x=new e(32768),b=0;b<32768;++b){var T=(43690&b)>>>1|(21845&b)<<1;T=(61680&(T=(52428&T)>>>2|(13107&T)<<2))>>>4|(3855&T)<<4,x[b]=((65280&T)>>>8|(255&T)<<8)>>>1}var R=function(J,rt,ut){for(var vt=J.length,j=0,K=new e(rt);j<vt;++j)++K[J[j]-1];var et,dt=new e(rt);for(j=0;j<rt;++j)dt[j]=dt[j-1]+K[j-1]<<1;{et=new e(1<<rt);var lt=15-rt;for(j=0;j<vt;++j)if(J[j])for(var G=j<<4|J[j],nt=rt-J[j],ft=dt[J[j]-1]++<<nt,mt=ft|(1<<nt)-1;ft<=mt;++ft)et[x[ft]>>>lt]=G}return et},C=new t(288);for(b=0;b<144;++b)C[b]=8;for(b=144;b<256;++b)C[b]=9;for(b=256;b<280;++b)C[b]=7;for(b=280;b<288;++b)C[b]=8;var w=new t(32);for(b=0;b<32;++b)w[b]=5;var N=R(C,9),I=R(w,5),z=function(J){for(var rt=J[0],ut=1;ut<J.length;++ut)J[ut]>rt&&(rt=J[ut]);return rt},F=function(J,rt,ut){var vt=rt/8|0;return(J[vt]|J[vt+1]<<8)>>(7&rt)&ut},H=function(J,rt){var ut=rt/8|0;return(J[ut]|J[ut+1]<<8|J[ut+2]<<16)>>(7&rt)},q=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Z=function(J,rt,ut){var vt=new Error(rt||q[J]);if(vt.code=J,Error.captureStackTrace&&Error.captureStackTrace(vt,Z),!ut)throw vt;return vt},B=function(J,rt,ut){var vt=J.length;if(!vt||ut&&!ut.l&&vt<5)return rt||new t(0);var j=!rt||ut,K=!ut||ut.i;ut||(ut={}),rt||(rt=new t(3*vt));var et,dt=function(se){var gt=rt.length;if(se>gt){var wt=new t(Math.max(2*gt,se));wt.set(rt),rt=wt}},lt=ut.f||0,G=ut.p||0,nt=ut.b||0,ft=ut.l,mt=ut.d,xt=ut.m,ht=ut.n,_t=8*vt;do{if(!ft){ut.f=lt=F(J,G,1);var At=F(J,G+1,3);if(G+=3,!At){var $t=J[(Zt=((et=G)/8|0)+(7&et&&1)+4)-4]|J[Zt-3]<<8,te=Zt+$t;if(te>vt){K&&Z(0);break}j&&dt(nt+$t),rt.set(J.subarray(Zt,te),nt),ut.b=nt+=$t,ut.p=G=8*te;continue}if(At==1)ft=N,mt=I,xt=9,ht=5;else if(At==2){var qt=F(J,G,31)+257,ne=F(J,G+10,15)+4,Se=qt+F(J,G+5,31)+1;G+=14;for(var Nt=new t(Se),Vt=new t(19),Ft=0;Ft<ne;++Ft)Vt[o[Ft]]=F(J,G+3*Ft,7);G+=3*ne;var re=z(Vt),at=(1<<re)-1,ue=R(Vt,re);for(Ft=0;Ft<Se;){var Zt,Lt=ue[F(J,G,at)];if(G+=15&Lt,(Zt=Lt>>>4)<16)Nt[Ft++]=Zt;else{var ee=0,$=0;for(Zt==16?($=3+F(J,G,3),G+=2,ee=Nt[Ft-1]):Zt==17?($=3+F(J,G,7),G+=3):Zt==18&&($=11+F(J,G,127),G+=7);$--;)Nt[Ft++]=ee}}var Y=Nt.subarray(0,qt),yt=Nt.subarray(qt);xt=z(Y),ht=z(yt),ft=R(Y,xt),mt=R(yt,ht)}else Z(1);if(G>_t){K&&Z(0);break}}j&&dt(nt+131072);for(var Bt=(1<<xt)-1,Dt=(1<<ht)-1,Ct=G;;Ct=G){var ve=(ee=ft[H(J,G)&Bt])>>>4;if((G+=15&ee)>_t){K&&Z(0);break}if(ee||Z(2),ve<256)rt[nt++]=ve;else{if(ve==256){Ct=G,ft=null;break}var he=ve-254;if(ve>264){var be=a[Ft=ve-257];he=F(J,G,(1<<be)-1)+d[Ft],G+=be}var Ce=mt[H(J,G)&Dt],Gt=Ce>>>4;if(Ce||Z(3),G+=15&Ce,yt=y[Gt],Gt>3&&(be=s[Gt],yt+=H(J,G)&(1<<be)-1,G+=be),G>_t){K&&Z(0);break}j&&dt(nt+131072);for(var Qt=nt+he;nt<Qt;nt+=4)rt[nt]=rt[nt-yt],rt[nt+1]=rt[nt+1-yt],rt[nt+2]=rt[nt+2-yt],rt[nt+3]=rt[nt+3-yt];nt=Qt}}ut.l=ft,ut.p=Ct,ut.b=nt,ft&&(lt=1,ut.m=xt,ut.d=mt,ut.n=ht)}while(!lt);return nt==rt.length?rt:(function(se,gt,wt){(wt==null||wt>se.length)&&(wt=se.length);var xe=new(se instanceof e?e:se instanceof n?n:t)(wt-gt);return xe.set(se.subarray(gt,wt)),xe})(rt,0,nt)},V=new t(0),Q=typeof TextDecoder<"u"&&new TextDecoder;try{Q.decode(V,{stream:!0})}catch{}return i.convert_streams=function(J){var rt=new DataView(J),ut=0;function vt(){var qt=rt.getUint16(ut);return ut+=2,qt}function j(){var qt=rt.getUint32(ut);return ut+=4,qt}function K(qt){$t.setUint16(te,qt),te+=2}function et(qt){$t.setUint32(te,qt),te+=4}for(var dt={signature:j(),flavor:j(),length:j(),numTables:vt(),reserved:vt(),totalSfntSize:j(),majorVersion:vt(),minorVersion:vt(),metaOffset:j(),metaLength:j(),metaOrigLength:j(),privOffset:j(),privLength:j()},lt=0;Math.pow(2,lt)<=dt.numTables;)lt++;lt--;for(var G=16*Math.pow(2,lt),nt=16*dt.numTables-G,ft=12,mt=[],xt=0;xt<dt.numTables;xt++)mt.push({tag:j(),offset:j(),compLength:j(),origLength:j(),origChecksum:j()}),ft+=16;var ht,_t=new Uint8Array(12+16*mt.length+mt.reduce((function(qt,ne){return qt+ne.origLength+4}),0)),At=_t.buffer,$t=new DataView(At),te=0;return et(dt.flavor),K(dt.numTables),K(G),K(lt),K(nt),mt.forEach((function(qt){et(qt.tag),et(qt.origChecksum),et(ft),et(qt.origLength),qt.outOffset=ft,(ft+=qt.origLength)%4!=0&&(ft+=4-ft%4)})),mt.forEach((function(qt){var ne,Se=J.slice(qt.offset,qt.offset+qt.compLength);if(qt.compLength!=qt.origLength){var Nt=new Uint8Array(qt.origLength);ne=new Uint8Array(Se,2),B(ne,Nt)}else Nt=new Uint8Array(Se);_t.set(Nt,qt.outOffset);var Vt=0;(ft=qt.outOffset+qt.origLength)%4!=0&&(Vt=4-ft%4),_t.set(new Uint8Array(Vt).buffer,qt.outOffset+qt.origLength),ht=ft+Vt})),At.slice(0,ht)},Object.defineProperty(i,"__esModule",{value:!0}),i})({}).convert_streams}function Fk(i,t){const e={M:2,L:2,Q:4,C:6,Z:0},n={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},a=1,s=2,o=4,c=8,f=16,d=32;let g;function y(q){if(!g){const Z={R:s,L:a,D:o,C:f,U:d,T:c};g=new Map;for(let B in n){let V=0;n[B].split(",").forEach(Q=>{let[J,rt]=Q.split("+");J=parseInt(J,36),rt=rt?parseInt(rt,36):0,g.set(V+=J,Z[B]);for(let ut=rt;ut--;)g.set(++V,Z[B])})}}return g.get(q)||d}const x=1,b=2,T=3,R=4,C=[null,"isol","init","fina","medi"];function w(q){const Z=new Uint8Array(q.length);let B=d,V=x,Q=-1;for(let J=0;J<q.length;J++){const rt=q.codePointAt(J);let ut=y(rt)|0,vt=x;ut&c||(B&(a|o|f)?ut&(s|o|f)?(vt=T,(V===x||V===T)&&Z[Q]++):ut&(a|d)&&(V===b||V===R)&&Z[Q]--:B&(s|d)&&(V===b||V===R)&&Z[Q]--,V=Z[J]=vt,B=ut,Q=J,rt>65535&&J++)}return Z}function N(q,Z){const B=[];for(let Q=0;Q<Z.length;Q++){const J=Z.codePointAt(Q);J>65535&&Q++,B.push(i.U.codeToGlyph(q,J))}const V=q.GSUB;if(V){const{lookupList:Q,featureList:J}=V;let rt;const ut=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,vt=[];J.forEach(j=>{if(ut.test(j.tag))for(let K=0;K<j.tab.length;K++){if(vt[j.tab[K]])continue;vt[j.tab[K]]=!0;const et=Q[j.tab[K]],dt=/^(isol|init|fina|medi)$/.test(j.tag);dt&&!rt&&(rt=w(Z));for(let lt=0;lt<B.length;lt++)(!rt||!dt||C[rt[lt]]===j.tag)&&i.U._applySubs(B,lt,et,Q)}})}return B}function I(q,Z){const B=new Int16Array(Z.length*3);let V=0;for(;V<Z.length;V++){const ut=Z[V];if(ut===-1)continue;B[V*3+2]=q.hmtx.aWidth[ut];const vt=q.GPOS;if(vt){const j=vt.lookupList;for(let K=0;K<j.length;K++){const et=j[K];for(let dt=0;dt<et.tabs.length;dt++){const lt=et.tabs[dt];if(et.ltype===1){if(i._lctf.coverageIndex(lt.coverage,ut)!==-1&&lt.pos){rt(lt.pos,V);break}}else if(et.ltype===2){let G=null,nt=Q();if(nt!==-1){const ft=i._lctf.coverageIndex(lt.coverage,Z[nt]);if(ft!==-1){if(lt.fmt===1){const mt=lt.pairsets[ft];for(let xt=0;xt<mt.length;xt++)mt[xt].gid2===ut&&(G=mt[xt])}else if(lt.fmt===2){const mt=i.U._getGlyphClass(Z[nt],lt.classDef1),xt=i.U._getGlyphClass(ut,lt.classDef2);G=lt.matrix[mt][xt]}if(G){G.val1&&rt(G.val1,nt),G.val2&&rt(G.val2,V);break}}}}else if(et.ltype===4){const G=i._lctf.coverageIndex(lt.markCoverage,ut);if(G!==-1){const nt=Q(J),ft=nt===-1?-1:i._lctf.coverageIndex(lt.baseCoverage,Z[nt]);if(ft!==-1){const mt=lt.markArray[G],xt=lt.baseArray[ft][mt.markClass];B[V*3]=xt.x-mt.x+B[nt*3]-B[nt*3+2],B[V*3+1]=xt.y-mt.y+B[nt*3+1];break}}}else if(et.ltype===6){const G=i._lctf.coverageIndex(lt.mark1Coverage,ut);if(G!==-1){const nt=Q();if(nt!==-1){const ft=Z[nt];if(z(q,ft)===3){const mt=i._lctf.coverageIndex(lt.mark2Coverage,ft);if(mt!==-1){const xt=lt.mark1Array[G],ht=lt.mark2Array[mt][xt.markClass];B[V*3]=ht.x-xt.x+B[nt*3]-B[nt*3+2],B[V*3+1]=ht.y-xt.y+B[nt*3+1];break}}}}}}}}else if(q.kern&&!q.cff){const j=Q();if(j!==-1){const K=q.kern.glyph1.indexOf(Z[j]);if(K!==-1){const et=q.kern.rval[K].glyph2.indexOf(ut);et!==-1&&(B[j*3+2]+=q.kern.rval[K].vals[et])}}}}return B;function Q(ut){for(let vt=V-1;vt>=0;vt--)if(Z[vt]!==-1&&(!ut||ut(Z[vt])))return vt;return-1}function J(ut){return z(q,ut)===1}function rt(ut,vt){for(let j=0;j<3;j++)B[vt*3+j]+=ut[j]||0}}function z(q,Z){const B=q.GDEF&&q.GDEF.glyphClassDef;return B?i.U._getGlyphClass(Z,B):0}function F(...q){for(let Z=0;Z<q.length;Z++)if(typeof q[Z]=="number")return q[Z]}function H(q){const Z=Object.create(null),B=q["OS/2"],V=q.hhea,Q=q.head.unitsPerEm,J=F(B&&B.sTypoAscender,V&&V.ascender,Q),rt={unitsPerEm:Q,ascender:J,descender:F(B&&B.sTypoDescender,V&&V.descender,0),capHeight:F(B&&B.sCapHeight,J),xHeight:F(B&&B.sxHeight,J),lineGap:F(B&&B.sTypoLineGap,V&&V.lineGap),supportsCodePoint(ut){return i.U.codeToGlyph(q,ut)>0},forEachGlyph(ut,vt,j,K){let et=0;const dt=1/rt.unitsPerEm*vt,lt=N(q,ut);let G=0;const nt=I(q,lt);return lt.forEach((ft,mt)=>{if(ft!==-1){let xt=Z[ft];if(!xt){const{cmds:ht,crds:_t}=i.U.glyphToPath(q,ft);let At="",$t=0;for(let Nt=0,Vt=ht.length;Nt<Vt;Nt++){const Ft=e[ht[Nt]];At+=ht[Nt];for(let re=1;re<=Ft;re++)At+=(re>1?",":"")+_t[$t++]}let te,qt,ne,Se;if(_t.length){te=qt=1/0,ne=Se=-1/0;for(let Nt=0,Vt=_t.length;Nt<Vt;Nt+=2){let Ft=_t[Nt],re=_t[Nt+1];Ft<te&&(te=Ft),re<qt&&(qt=re),Ft>ne&&(ne=Ft),re>Se&&(Se=re)}}else te=ne=qt=Se=0;xt=Z[ft]={index:ft,advanceWidth:q.hmtx.aWidth[ft],xMin:te,yMin:qt,xMax:ne,yMax:Se,path:At}}K.call(null,xt,et+nt[mt*3]*dt,nt[mt*3+1]*dt,G),et+=nt[mt*3+2]*dt,j&&(et+=j*vt)}G+=ut.codePointAt(G)>65535?2:1}),et}};return rt}return function(Z){const B=new Uint8Array(Z,0,4),V=i._bin.readASCII(B,0,4);if(V==="wOFF")Z=t(Z);else if(V==="wOF2")throw new Error("woff2 fonts not supported");return H(i.parse(Z)[0])}}const kk=rm({name:"Typr Font Parser",dependencies:[zk,Bk,Fk],init(i,t,e){const n=i(),a=t();return e(n,a)}});function Vk(){return(function(i){var t=function(){this.buckets=new Map};t.prototype.add=function(I){var z=I>>5;this.buckets.set(z,(this.buckets.get(z)||0)|1<<(31&I))},t.prototype.has=function(I){var z=this.buckets.get(I>>5);return z!==void 0&&(z&1<<(31&I))!=0},t.prototype.serialize=function(){var I=[];return this.buckets.forEach((function(z,F){I.push((+F).toString(36)+":"+z.toString(36))})),I.join(",")},t.prototype.deserialize=function(I){var z=this;this.buckets.clear(),I.split(",").forEach((function(F){var H=F.split(":");z.buckets.set(parseInt(H[0],36),parseInt(H[1],36))}))};var e=Math.pow(2,8),n=e-1,a=~n;function s(I){var z=(function(H){return H&a})(I).toString(16),F=(function(H){return(H&a)+e-1})(I).toString(16);return"codepoint-index/plane"+(I>>16)+"/"+z+"-"+F+".json"}function o(I,z){var F=I&n,H=z.codePointAt(F/6|0);return((H=(H||48)-48)&1<<F%6)!=0}function c(I,z){var F;(F=I,F.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map((function(H){return H.split("-").map((function(q){return parseInt(q.trim(),16)}))}))).forEach((function(H){var q=H[0],Z=H[1];Z===void 0&&(Z=q),z(q,Z)}))}function f(I,z){c(I,(function(F,H){for(var q=F;q<=H;q++)z(q)}))}var d={},g={},y=new WeakMap,x="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function b(I){var z=y.get(I);return z||(z=new t,f(I.ranges,(function(F){return z.add(F)})),y.set(I,z)),z}var T,R=new Map;function C(I,z,F){return I[z]?z:I[F]?F:(function(H){for(var q in H)return q})(I)}function w(I,z){var F=z;if(!I.includes(F)){F=1/0;for(var H=0;H<I.length;H++)Math.abs(I[H]-z)<Math.abs(F-z)&&(F=I[H])}return F}function N(I){return T||(T=new Set,f("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",(function(z){T.add(z)}))),T.has(I)}return i.CodePointSet=t,i.clearCache=function(){d={},g={}},i.getFontsForString=function(I,z){z===void 0&&(z={});var F,H=z.lang;H===void 0&&(H=new RegExp("\\p{Script=Hangul}","u").test(F=I)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(F)?"ja":"en");var q=z.category;q===void 0&&(q="sans-serif");var Z=z.style;Z===void 0&&(Z="normal");var B=z.weight;B===void 0&&(B=400);var V=(z.dataUrl||x).replace(/\/$/g,""),Q=new Map,J=new Uint8Array(I.length),rt={},ut={},vt=new Array(I.length),j=new Map,K=!1;function et(G){var nt=R.get(G);return nt||(nt=fetch(V+"/"+G).then((function(ft){if(!ft.ok)throw new Error(ft.statusText);return ft.json().then((function(mt){if(!Array.isArray(mt)||mt[0]!==1)throw new Error("Incorrect schema version; need 1, got "+mt[0]);return mt[1]}))})).catch((function(ft){if(V!==x)return K||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+V+'", trying default CDN. '+ft.message),K=!0),V=x,R.delete(G),et(G);throw ft})),R.set(G,nt)),nt}for(var dt=function(G){var nt=I.codePointAt(G),ft=s(nt);vt[G]=ft,d[ft]||j.has(ft)||j.set(ft,et(ft).then((function(mt){d[ft]=mt}))),nt>65535&&(G++,lt=G)},lt=0;lt<I.length;lt++)dt(lt);return Promise.all(j.values()).then((function(){j.clear();for(var G=function(ft){var mt=I.codePointAt(ft),xt=null,ht=d[vt[ft]],_t=void 0;for(var At in ht){var $t=ut[At];if($t===void 0&&($t=ut[At]=new RegExp(At).test(H||"en")),$t){for(var te in _t=At,ht[At])if(o(mt,ht[At][te])){xt=te;break}break}}if(!xt){t:for(var qt in ht)if(qt!==_t){for(var ne in ht[qt])if(o(mt,ht[qt][ne])){xt=ne;break t}}}xt||(console.debug("No font coverage for U+"+mt.toString(16)),xt="latin"),vt[ft]=xt,g[xt]||j.has(xt)||j.set(xt,et("font-meta/"+xt+".json").then((function(Se){g[xt]=Se}))),mt>65535&&(ft++,nt=ft)},nt=0;nt<I.length;nt++)G(nt);return Promise.all(j.values())})).then((function(){for(var G,nt=null,ft=0;ft<I.length;ft++){var mt=I.codePointAt(ft);if(nt&&(N(mt)||b(nt).has(mt)))J[ft]=J[ft-1];else{nt=g[vt[ft]];var xt=rt[nt.id];if(!xt){var ht=nt.typeforms,_t=C(ht,q,"sans-serif"),At=C(ht[_t],Z,"normal"),$t=w((G=ht[_t])===null||G===void 0?void 0:G[At],B);xt=rt[nt.id]=V+"/font-files/"+nt.id+"/"+_t+"."+At+"."+$t+".woff"}var te=Q.get(xt);te==null&&(te=Q.size,Q.set(xt,te)),J[ft]=te}mt>65535&&(ft++,J[ft]=J[ft-1])}return{fontUrls:Array.from(Q.keys()),chars:J}}))},Object.defineProperty(i,"__esModule",{value:!0}),i})({})}function Hk(i,t){const e=Object.create(null),n=Object.create(null);function a(o,c){const f=d=>{console.error(`Failure loading font ${o}`,d)};try{const d=new XMLHttpRequest;d.open("get",o,!0),d.responseType="arraybuffer",d.onload=function(){if(d.status>=400)f(new Error(d.statusText));else if(d.status>0)try{const g=i(d.response);g.src=o,c(g)}catch(g){f(g)}},d.onerror=f,d.send()}catch(d){f(d)}}function s(o,c){let f=e[o];f?c(f):n[o]?n[o].push(c):(n[o]=[c],a(o,d=>{d.src=o,e[o]=d,n[o].forEach(g=>g(d)),delete n[o]}))}return function(o,c,{lang:f,fonts:d=[],style:g="normal",weight:y="normal",unicodeFontsURL:x}={}){const b=new Uint8Array(o.length),T=[];o.length||N();const R=new Map,C=[];if(g!=="italic"&&(g="normal"),typeof y!="number"&&(y=y==="bold"?700:400),d&&!Array.isArray(d)&&(d=[d]),d=d.slice().filter(z=>!z.lang||z.lang.test(f)).reverse(),d.length){let q=0;(function Z(B=0){for(let V=B,Q=o.length;V<Q;V++){const J=o.codePointAt(V);if(q===1&&T[b[V-1]].supportsCodePoint(J)||V>0&&/\s/.test(o[V]))b[V]=b[V-1],q===2&&(C[C.length-1][1]=V);else for(let rt=b[V],ut=d.length;rt<=ut;rt++)if(rt===ut){const vt=q===2?C[C.length-1]:C[C.length]=[V,V];vt[1]=V,q=2}else{b[V]=rt;const{src:vt,unicodeRange:j}=d[rt];if(!j||I(J,j)){const K=e[vt];if(!K){s(vt,()=>{Z(V)});return}if(K.supportsCodePoint(J)){let et=R.get(K);typeof et!="number"&&(et=T.length,T.push(K),R.set(K,et)),b[V]=et,q=1;break}}}J>65535&&V+1<Q&&(b[V+1]=b[V],V++,q===2&&(C[C.length-1][1]=V))}w()})()}else C.push([0,o.length-1]),w();function w(){if(C.length){const z=C.map(F=>o.substring(F[0],F[1]+1)).join(`
`);t.getFontsForString(z,{lang:f||void 0,style:g,weight:y,dataUrl:x}).then(({fontUrls:F,chars:H})=>{const q=T.length;let Z=0;C.forEach(V=>{for(let Q=0,J=V[1]-V[0];Q<=J;Q++)b[V[0]+Q]=H[Z++]+q;Z++});let B=0;F.forEach((V,Q)=>{s(V,J=>{T[Q+q]=J,++B===F.length&&N()})})})}else N()}function N(){c({chars:b,fonts:T})}function I(z,F){for(let H=0;H<F.length;H++){const[q,Z=q]=F[H];if(q<=z&&z<=Z)return!0}return!1}}}const Gk=rm({name:"FontResolver",dependencies:[Hk,kk,Vk],init(i,t,e){return i(t,e())}});function jk(i,t){const n=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,a="[^\\S\\u00A0]",s=new RegExp(`${a}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function o({text:T,lang:R,fonts:C,style:w,weight:N,preResolvedFonts:I,unicodeFontsURL:z},F){const H=({chars:q,fonts:Z})=>{let B,V;const Q=[];for(let J=0;J<q.length;J++)q[J]!==V?(V=q[J],Q.push(B={start:J,end:J,fontObj:Z[q[J]]})):B.end=J;F(Q)};I?H(I):i(T,H,{lang:R,fonts:C,style:w,weight:N,unicodeFontsURL:z})}function c({text:T="",font:R,lang:C,sdfGlyphSize:w=64,fontSize:N=400,fontWeight:I=1,fontStyle:z="normal",letterSpacing:F=0,lineHeight:H="normal",maxWidth:q=1/0,direction:Z,textAlign:B="left",textIndent:V=0,whiteSpace:Q="normal",overflowWrap:J="normal",anchorX:rt=0,anchorY:ut=0,metricsOnly:vt=!1,unicodeFontsURL:j,preResolvedFonts:K=null,includeCaretPositions:et=!1,chunkedBoundsSize:dt=8192,colorRanges:lt=null},G){const nt=y(),ft={fontLoad:0,typesetting:0};T.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),T=T.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),N=+N,F=+F,q=+q,H=H||"normal",V=+V,o({text:T,lang:C,style:z,weight:I,fonts:typeof R=="string"?[{src:R}]:R,unicodeFontsURL:j,preResolvedFonts:K},mt=>{ft.fontLoad=y()-nt;const xt=isFinite(q);let ht=null,_t=null,At=null,$t=null,te=null,qt=null,ne=null,Se=null,Nt=0,Vt=0,Ft=Q!=="nowrap";const re=new Map,at=y();let ue=V,Zt=0,Lt=new x;const ee=[Lt];mt.forEach(Dt=>{const{fontObj:Ct}=Dt,{ascender:ve,descender:he,unitsPerEm:be,lineGap:Ce,capHeight:Gt,xHeight:Qt}=Ct;let se=re.get(Ct);if(!se){const ie=N/be,le=H==="normal"?(ve-he+Ce)*ie:H*N,Ae=(le-(ve-he)*ie)/2,ce=Math.min(le,(ve-he)*ie),jt=(ve+he)/2*ie+ce/2;se={index:re.size,src:Ct.src,fontObj:Ct,fontSizeMult:ie,unitsPerEm:be,ascender:ve*ie,descender:he*ie,capHeight:Gt*ie,xHeight:Qt*ie,lineHeight:le,baseline:-Ae-ve*ie,caretTop:jt,caretBottom:jt-ce},re.set(Ct,se)}const{fontSizeMult:gt}=se,wt=T.slice(Dt.start,Dt.end+1);let xe,St;Ct.forEachGlyph(wt,N,F,(ie,le,Ae,ce)=>{le+=Zt,ce+=Dt.start,xe=le,St=ie;const jt=T.charAt(ce),me=ie.advanceWidth*gt,Re=Lt.count;let Le;if("isEmpty"in ie||(ie.isWhitespace=!!jt&&new RegExp(a).test(jt),ie.canBreakAfter=!!jt&&s.test(jt),ie.isEmpty=ie.xMin===ie.xMax||ie.yMin===ie.yMax||n.test(jt)),!ie.isWhitespace&&!ie.isEmpty&&Vt++,Ft&&xt&&!ie.isWhitespace&&le+me+ue>q&&Re){if(Lt.glyphAt(Re-1).glyphObj.canBreakAfter)Le=new x,ue=-le;else for(let bn=Re;bn--;)if(bn===0&&J==="break-word"){Le=new x,ue=-le;break}else if(Lt.glyphAt(bn).glyphObj.canBreakAfter){Le=Lt.splitAt(bn+1);const Bn=Le.glyphAt(0).x;ue-=Bn;for(let Ai=Le.count;Ai--;)Le.glyphAt(Ai).x-=Bn;break}Le&&(Lt.isSoftWrapped=!0,Lt=Le,ee.push(Lt),Nt=q)}let qe=Lt.glyphAt(Lt.count);qe.glyphObj=ie,qe.x=le+ue,qe.y=Ae,qe.width=me,qe.charIndex=ce,qe.fontData=se,jt===`
`&&(Lt=new x,ee.push(Lt),ue=-(le+me+F*N)+V)}),Zt=xe+St.advanceWidth*gt+F*N});let $=0;ee.forEach(Dt=>{let Ct=!0;for(let ve=Dt.count;ve--;){const he=Dt.glyphAt(ve);Ct&&!he.glyphObj.isWhitespace&&(Dt.width=he.x+he.width,Dt.width>Nt&&(Nt=Dt.width),Ct=!1);let{lineHeight:be,capHeight:Ce,xHeight:Gt,baseline:Qt}=he.fontData;be>Dt.lineHeight&&(Dt.lineHeight=be);const se=Qt-Dt.baseline;se<0&&(Dt.baseline+=se,Dt.cap+=se,Dt.ex+=se),Dt.cap=Math.max(Dt.cap,Dt.baseline+Ce),Dt.ex=Math.max(Dt.ex,Dt.baseline+Gt)}Dt.baseline-=$,Dt.cap-=$,Dt.ex-=$,$+=Dt.lineHeight});let Y=0,yt=0;if(rt&&(typeof rt=="number"?Y=-rt:typeof rt=="string"&&(Y=-Nt*(rt==="left"?0:rt==="center"?.5:rt==="right"?1:d(rt)))),ut&&(typeof ut=="number"?yt=-ut:typeof ut=="string"&&(yt=ut==="top"?0:ut==="top-baseline"?-ee[0].baseline:ut==="top-cap"?-ee[0].cap:ut==="top-ex"?-ee[0].ex:ut==="middle"?$/2:ut==="bottom"?$:ut==="bottom-baseline"?-ee[ee.length-1].baseline:d(ut)*$)),!vt){const Dt=t.getEmbeddingLevels(T,Z);ht=new Uint16Array(Vt),_t=new Uint8Array(Vt),At=new Float32Array(Vt*2),$t={},ne=[1/0,1/0,-1/0,-1/0],Se=[],et&&(qt=new Float32Array(T.length*4)),lt&&(te=new Uint8Array(Vt*3));let Ct=0,ve=-1,he=-1,be,Ce;if(ee.forEach((Gt,Qt)=>{let{count:se,width:gt}=Gt;if(se>0){let wt=0;for(let ce=se;ce--&&Gt.glyphAt(ce).glyphObj.isWhitespace;)wt++;let xe=0,St=0;if(B==="center")xe=(Nt-gt)/2;else if(B==="right")xe=Nt-gt;else if(B==="justify"&&Gt.isSoftWrapped){let ce=0;for(let jt=se-wt;jt--;)Gt.glyphAt(jt).glyphObj.isWhitespace&&ce++;St=(Nt-gt)/ce}if(St||xe){let ce=0;for(let jt=0;jt<se;jt++){let me=Gt.glyphAt(jt);const Re=me.glyphObj;me.x+=xe+ce,St!==0&&Re.isWhitespace&&jt<se-wt&&(ce+=St,me.width+=St)}}const ie=t.getReorderSegments(T,Dt,Gt.glyphAt(0).charIndex,Gt.glyphAt(Gt.count-1).charIndex);for(let ce=0;ce<ie.length;ce++){const[jt,me]=ie[ce];let Re=1/0,Le=-1/0;for(let qe=0;qe<se;qe++)if(Gt.glyphAt(qe).charIndex>=jt){let bn=qe,Bn=qe;for(;Bn<se;Bn++){let Ai=Gt.glyphAt(Bn);if(Ai.charIndex>me)break;Bn<se-wt&&(Re=Math.min(Re,Ai.x),Le=Math.max(Le,Ai.x+Ai.width))}for(let Ai=bn;Ai<Bn;Ai++){const ia=Gt.glyphAt(Ai);ia.x=Le-(ia.x+ia.width-Re)}break}}let le;const Ae=ce=>le=ce;for(let ce=0;ce<se;ce++){const jt=Gt.glyphAt(ce);le=jt.glyphObj;const me=le.index,Re=Dt.levels[jt.charIndex]&1;if(Re){const Le=t.getMirroredCharacter(T[jt.charIndex]);Le&&jt.fontData.fontObj.forEachGlyph(Le,0,0,Ae)}if(et){const{charIndex:Le,fontData:qe}=jt,bn=jt.x+Y,Bn=jt.x+jt.width+Y;qt[Le*4]=Re?Bn:bn,qt[Le*4+1]=Re?bn:Bn,qt[Le*4+2]=Gt.baseline+qe.caretBottom+yt,qt[Le*4+3]=Gt.baseline+qe.caretTop+yt;const Ai=Le-ve;Ai>1&&g(qt,ve,Ai),ve=Le}if(lt){const{charIndex:Le}=jt;for(;Le>he;)he++,lt.hasOwnProperty(he)&&(Ce=lt[he])}if(!le.isWhitespace&&!le.isEmpty){const Le=Ct++,{fontSizeMult:qe,src:bn,index:Bn}=jt.fontData,Ai=$t[bn]||($t[bn]={});Ai[me]||(Ai[me]={path:le.path,pathBounds:[le.xMin,le.yMin,le.xMax,le.yMax]});const ia=jt.x+Y,Ca=jt.y+Gt.baseline+yt;At[Le*2]=ia,At[Le*2+1]=Ca;const Yn=ia+le.xMin*qe,ke=Ca+le.yMin*qe,Fi=ia+le.xMax*qe,si=Ca+le.yMax*qe;Yn<ne[0]&&(ne[0]=Yn),ke<ne[1]&&(ne[1]=ke),Fi>ne[2]&&(ne[2]=Fi),si>ne[3]&&(ne[3]=si),Le%dt===0&&(be={start:Le,end:Le,rect:[1/0,1/0,-1/0,-1/0]},Se.push(be)),be.end++;const Hn=be.rect;if(Yn<Hn[0]&&(Hn[0]=Yn),ke<Hn[1]&&(Hn[1]=ke),Fi>Hn[2]&&(Hn[2]=Fi),si>Hn[3]&&(Hn[3]=si),ht[Le]=me,_t[Le]=Bn,lt){const cn=Le*3;te[cn]=Ce>>16&255,te[cn+1]=Ce>>8&255,te[cn+2]=Ce&255}}}}}),qt){const Gt=T.length-ve;Gt>1&&g(qt,ve,Gt)}}const Bt=[];re.forEach(({index:Dt,src:Ct,unitsPerEm:ve,ascender:he,descender:be,lineHeight:Ce,capHeight:Gt,xHeight:Qt})=>{Bt[Dt]={src:Ct,unitsPerEm:ve,ascender:he,descender:be,lineHeight:Ce,capHeight:Gt,xHeight:Qt}}),ft.typesetting=y()-at,G({glyphIds:ht,glyphFontIndices:_t,glyphPositions:At,glyphData:$t,fontData:Bt,caretPositions:qt,glyphColors:te,chunkedBounds:Se,fontSize:N,topBaseline:yt+ee[0].baseline,blockBounds:[Y,yt-$,Y+Nt,yt],visibleBounds:ne,timings:ft})})}function f(T,R){c({...T,metricsOnly:!0},C=>{const[w,N,I,z]=C.blockBounds;R({width:I-w,height:z-N})})}function d(T){let R=T.match(/^([\d.]+)%$/),C=R?parseFloat(R[1]):NaN;return isNaN(C)?0:C/100}function g(T,R,C){const w=T[R*4],N=T[R*4+1],I=T[R*4+2],z=T[R*4+3],F=(N-w)/C;for(let H=0;H<C;H++){const q=(R+H)*4;T[q]=w+F*H,T[q+1]=w+F*(H+1),T[q+2]=I,T[q+3]=z}}function y(){return(self.performance||Date).now()}function x(){this.data=[]}const b=["glyphObj","x","y","width","charIndex","fontData"];return x.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/b.length)},glyphAt(T){let R=x.flyweight;return R.data=this.data,R.index=T,R},splitAt(T){let R=new x;return R.data=this.data.splice(T*b.length),R}},x.flyweight=b.reduce((T,R,C,w)=>(Object.defineProperty(T,R,{get(){return this.data[this.index*b.length+C]},set(N){this.data[this.index*b.length+C]=N}}),T),{data:null,index:0}),{typeset:c,measure:f}}const nd=()=>(self.performance||Date).now(),K1=mD();let g3;function Wk(i,t,e,n,a,s,o,c,f,d,g=!0){return g?Xk(i,t,e,n,a,s,o,c,f,d).then(null,y=>(g3||(console.warn("WebGL SDF generation failed, falling back to JS",y),g3=!0),y3(i,t,e,n,a,s,o,c,f,d))):y3(i,t,e,n,a,s,o,c,f,d)}const Qy=[],qk=5;let Kb=0;function vD(){const i=nd();for(;Qy.length&&nd()-i<qk;)Qy.shift()();Kb=Qy.length?setTimeout(vD,0):0}const Xk=(...i)=>new Promise((t,e)=>{Qy.push(()=>{const n=nd();try{K1.webgl.generateIntoCanvas(...i),t({timing:nd()-n})}catch(a){e(a)}}),Kb||(Kb=setTimeout(vD,0))}),Yk=4,Zk=2e3,v3={};let Kk=0;function y3(i,t,e,n,a,s,o,c,f,d){const g="TroikaTextSDFGenerator_JS_"+Kk++%Yk;let y=v3[g];return y||(y=v3[g]={workerModule:rm({name:g,workerId:g,dependencies:[mD,nd],init(x,b){const T=x().javascript.generate;return function(...R){const C=b();return{textureData:T(...R),timing:b()-C}}},getTransferables(x){return[x.textureData.buffer]}}),requests:0,idleTimer:null}),y.requests++,clearTimeout(y.idleTimer),y.workerModule(i,t,e,n,a,s).then(({textureData:x,timing:b})=>{const T=nd(),R=new Uint8Array(x.length*4);for(let C=0;C<x.length;C++)R[C*4+d]=x[C];return K1.webglUtils.renderImageData(o,R,c,f,i,t,1<<3-d),b+=nd()-T,--y.requests===0&&(y.idleTimer=setTimeout(()=>{wk(g)},Zk)),{timing:b}})}function Qk(i){i._warm||(K1.webgl.isSupported(i),i._warm=!0)}const Jk=K1.webglUtils.resizeWebGLCanvasWithoutClearing,Ng={unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},$k=new He;function Cp(){return(self.performance||Date).now()}const _3=Object.create(null);function yD(i,t){i=nV({},i);const e=Cp(),n=[];if(i.font&&n.push({label:"user",src:iV(i.font)}),i.font=n,i.text=""+i.text,i.sdfGlyphSize=i.sdfGlyphSize||Ng.sdfGlyphSize,i.unicodeFontsURL=i.unicodeFontsURL||Ng.unicodeFontsURL,i.colorRanges!=null){let x={};for(let b in i.colorRanges)if(i.colorRanges.hasOwnProperty(b)){let T=i.colorRanges[b];typeof T!="number"&&(T=$k.set(T).getHex()),x[b]=T}i.colorRanges=x}Object.freeze(i);const{textureWidth:a,sdfExponent:s}=Ng,{sdfGlyphSize:o}=i,c=a/o*4;let f=_3[o];if(!f){const x=document.createElement("canvas");x.width=a,x.height=o*256/c,f=_3[o]={glyphCount:0,sdfGlyphSize:o,sdfCanvas:x,sdfTexture:new pa(x,void 0,void 0,void 0,Di,Di),contextLost:!1,glyphsByFont:new Map},f.sdfTexture.generateMipmaps=!1,tV(f)}const{sdfTexture:d,sdfCanvas:g}=f;SD(i).then(x=>{const{glyphIds:b,glyphFontIndices:T,fontData:R,glyphPositions:C,fontSize:w,timings:N}=x,I=[],z=new Float32Array(b.length*4);let F=0,H=0;const q=Cp(),Z=R.map(rt=>{let ut=f.glyphsByFont.get(rt.src);return ut||f.glyphsByFont.set(rt.src,ut=new Map),ut});b.forEach((rt,ut)=>{const vt=T[ut],{src:j,unitsPerEm:K}=R[vt];let et=Z[vt].get(rt);if(!et){const{path:ft,pathBounds:mt}=x.glyphData[j][rt],xt=Math.max(mt[2]-mt[0],mt[3]-mt[1])/o*(Ng.sdfMargin*o+.5),ht=f.glyphCount++,_t=[mt[0]-xt,mt[1]-xt,mt[2]+xt,mt[3]+xt];Z[vt].set(rt,et={path:ft,atlasIndex:ht,sdfViewBox:_t}),I.push(et)}const{sdfViewBox:dt}=et,lt=C[H++],G=C[H++],nt=w/K;z[F++]=lt+dt[0]*nt,z[F++]=G+dt[1]*nt,z[F++]=lt+dt[2]*nt,z[F++]=G+dt[3]*nt,b[ut]=et.atlasIndex}),N.quads=(N.quads||0)+(Cp()-q);const B=Cp();N.sdf={};const V=g.height,Q=Math.ceil(f.glyphCount/c),J=Math.pow(2,Math.ceil(Math.log2(Q*o)));J>V&&(console.info(`Increasing SDF texture size ${V}->${J}`),Jk(g,a,J),d.dispose()),Promise.all(I.map(rt=>_D(rt,f,i.gpuAccelerateSDF).then(({timing:ut})=>{N.sdf[rt.atlasIndex]=ut}))).then(()=>{I.length&&!f.contextLost&&(xD(f),d.needsUpdate=!0),N.sdfTotal=Cp()-B,N.total=Cp()-e,t(Object.freeze({parameters:i,sdfTexture:d,sdfGlyphSize:o,sdfExponent:s,glyphBounds:z,glyphAtlasIndices:b,glyphColors:x.glyphColors,caretPositions:x.caretPositions,chunkedBounds:x.chunkedBounds,ascender:x.ascender,descender:x.descender,lineHeight:x.lineHeight,capHeight:x.capHeight,xHeight:x.xHeight,topBaseline:x.topBaseline,blockBounds:x.blockBounds,visibleBounds:x.visibleBounds,timings:x.timings}))})}),Promise.resolve().then(()=>{f.contextLost||Qk(g)})}function _D({path:i,atlasIndex:t,sdfViewBox:e},{sdfGlyphSize:n,sdfCanvas:a,contextLost:s},o){if(s)return Promise.resolve({timing:-1});const{textureWidth:c,sdfExponent:f}=Ng,d=Math.max(e[2]-e[0],e[3]-e[1]),g=Math.floor(t/4),y=g%(c/n)*n,x=Math.floor(g/(c/n))*n,b=t%4;return Wk(n,n,i,e,d,f,a,y,x,b,o)}function tV(i){const t=i.sdfCanvas;t.addEventListener("webglcontextlost",e=>{console.log("Context Lost",e),e.preventDefault(),i.contextLost=!0}),t.addEventListener("webglcontextrestored",e=>{console.log("Context Restored",e),i.contextLost=!1;const n=[];i.glyphsByFont.forEach(a=>{a.forEach(s=>{n.push(_D(s,i,!0))})}),Promise.all(n).then(()=>{xD(i),i.sdfTexture.needsUpdate=!0})})}function eV({font:i,characters:t,sdfGlyphSize:e},n){let a=Array.isArray(t)?t.join(`
`):""+t;yD({font:i,sdfGlyphSize:e,text:a},n)}function nV(i,t){for(let e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}let Ny;function iV(i){return Ny||(Ny=typeof document>"u"?{}:document.createElement("a")),Ny.href=i,Ny.href}function xD(i){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:t,sdfTexture:e}=i,{width:n,height:a}=t,s=i.sdfCanvas.getContext("webgl");let o=e.image.data;(!o||o.length!==n*a*4)&&(o=new Uint8Array(n*a*4),e.image={width:n,height:a,data:o},e.flipY=!1,e.isDataTexture=!0),s.readPixels(0,0,n,a,s.RGBA,s.UNSIGNED_BYTE,o)}}const aV=rm({name:"Typesetter",dependencies:[jk,Gk,Rk],init(i,t,e){return i(t,e())}}),SD=rm({name:"Typesetter",dependencies:[aV],init(i){return function(t){return new Promise(e=>{i.typeset(t,e)})}},getTransferables(i){const t=[];for(let e in i)i[e]&&i[e].buffer&&t.push(i[e].buffer);return t}});SD.onMainThread;const x3={};function sV(i){let t=x3[i];return t||(t=x3[i]=new Bu(1,1,i,i).translate(.5,.5,0)),t}const rV="aTroikaGlyphBounds",S3="aTroikaGlyphIndex",oV="aTroikaGlyphColor";class lV extends uM{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new As,this.boundingBox=new Ts}computeBoundingSphere(){}computeBoundingBox(){}set detail(t){if(t!==this._detail){this._detail=t,(typeof t!="number"||t<1)&&(t=1);let e=sV(t);["position","normal","uv"].forEach(n=>{this.attributes[n]=e.attributes[n].clone()}),this.setIndex(e.getIndex().clone())}}get detail(){return this._detail}set curveRadius(t){t!==this._curveRadius&&(this._curveRadius=t,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(t,e,n,a,s){this.updateAttributeData(rV,t,4),this.updateAttributeData(S3,e,1),this.updateAttributeData(oV,s,3),this._blockBounds=n,this._chunkedBounds=a,this.instanceCount=e.length,this._updateBounds()}_updateBounds(){const t=this._blockBounds;if(t){const{curveRadius:e,boundingBox:n}=this;if(e){const{PI:a,floor:s,min:o,max:c,sin:f,cos:d}=Math,g=a/2,y=a*2,x=Math.abs(e),b=t[0]/x,T=t[2]/x,R=s((b+g)/y)!==s((T+g)/y)?-x:o(f(b)*x,f(T)*x),C=s((b-g)/y)!==s((T-g)/y)?x:c(f(b)*x,f(T)*x),w=s((b+a)/y)!==s((T+a)/y)?x*2:c(x-d(b)*x,x-d(T)*x);n.min.set(R,t[1],e<0?-w:0),n.max.set(C,t[3],e<0?0:w)}else n.min.set(t[0],t[1],0),n.max.set(t[2],t[3],0);n.getBoundingSphere(this.boundingSphere)}}applyClipRect(t){let e=this.getAttribute(S3).count,n=this._chunkedBounds;if(n)for(let a=n.length;a--;){e=n[a].end;let s=n[a].rect;if(s[1]<t.w&&s[3]>t.y&&s[0]<t.z&&s[2]>t.x)break}this.instanceCount=e}updateAttributeData(t,e,n){const a=this.getAttribute(t);e?a&&a.array.length===e.length?(a.array.set(e),a.needsUpdate=!0):(this.setAttribute(t,new ld(e,n)),delete this._maxInstanceCount,this.dispose()):a&&this.deleteAttribute(t)}}const cV=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,uV=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,fV=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,hV=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function dV(i){const t=Zb(i,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new de},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Ri(0,0,0,0)},uTroikaClipRect:{value:new Ri(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new de},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new He},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new En},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:cV,vertexTransform:uV,fragmentDefs:fV,fragmentColorTransform:hV,customRewriter({vertexShader:e,fragmentShader:n}){let a=/\buniform\s+vec3\s+diffuse\b/;return a.test(n)&&(n=n.replace(a,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),a.test(e)||(e=e.replace(gD,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:e,fragmentShader:n}}});return t.transparent=!0,t.forceSinglePass=!0,Object.defineProperties(t,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),t}const SM=new zu({color:16777215,side:cl,transparent:!0}),b3=8421504,M3=new gn,Uy=new pt,tb=new pt,Ag=[],pV=new pt,eb="+x+y";function T3(i){return Array.isArray(i)?i[0]:i}let bD=()=>{const i=new ma(new Bu(1,1),SM);return bD=()=>i,i},MD=()=>{const i=new ma(new Bu(1,1,32,1),SM);return MD=()=>i,i};const mV={type:"syncstart"},gV={type:"synccomplete"},TD=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],vV=TD.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let AD=class extends ma{constructor(){const t=new lV;super(t,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=b3,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=eb,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(t){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(t):(this._isSyncing=!0,this.dispatchEvent(mV),yD({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},e=>{this._isSyncing=!1,this._textRenderInfo=e,this.geometry.updateGlyphs(e.glyphBounds,e.glyphAtlasIndices,e.blockBounds,e.chunkedBounds,e.glyphColors);const n=this._queuedSyncs;n&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{n.forEach(a=>a&&a())})),this.dispatchEvent(gV),t&&t()})))}onBeforeRender(t,e,n,a,s,o){this.sync(),s.isTroikaTextMaterial&&this._prepareForRender(s)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(t){return dV(t)}get material(){let t=this._derivedMaterial;const e=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=SM.clone());if((!t||!t.isDerivedFrom(e))&&(t=this._derivedMaterial=this.createDerivedMaterial(e),e.addEventListener("dispose",function n(){e.removeEventListener("dispose",n),t.dispose()})),this.hasOutline()){let n=t._outlineMtl;return n||(n=t._outlineMtl=Object.create(t,{id:{value:t.id+.1}}),n.isTextOutlineMaterial=!0,n.depthWrite=!1,n.map=null,t.addEventListener("dispose",function a(){t.removeEventListener("dispose",a),n.dispose()})),[n,t]}else return t}set material(t){t&&t.isTroikaTextMaterial?(this._derivedMaterial=t,this._baseMaterial=t.baseMaterial):this._baseMaterial=t}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(t){this.geometry.detail=t}get curveRadius(){return this.geometry.curveRadius}set curveRadius(t){this.geometry.curveRadius=t}get customDepthMaterial(){return T3(this.material).getDepthMaterial()}set customDepthMaterial(t){}get customDistanceMaterial(){return T3(this.material).getDistanceMaterial()}set customDistanceMaterial(t){}_prepareForRender(t){const e=t.isTextOutlineMaterial,n=t.uniforms,a=this.textRenderInfo;if(a){const{sdfTexture:c,blockBounds:f}=a;n.uTroikaSDFTexture.value=c,n.uTroikaSDFTextureSize.value.set(c.image.width,c.image.height),n.uTroikaSDFGlyphSize.value=a.sdfGlyphSize,n.uTroikaSDFExponent.value=a.sdfExponent,n.uTroikaTotalBounds.value.fromArray(f),n.uTroikaUseGlyphColors.value=!e&&!!a.glyphColors;let d=0,g=0,y=0,x,b,T,R=0,C=0;if(e){let{outlineWidth:N,outlineOffsetX:I,outlineOffsetY:z,outlineBlur:F,outlineOpacity:H}=this;d=this._parsePercent(N)||0,g=Math.max(0,this._parsePercent(F)||0),x=H,R=this._parsePercent(I)||0,C=this._parsePercent(z)||0}else y=Math.max(0,this._parsePercent(this.strokeWidth)||0),y&&(T=this.strokeColor,n.uTroikaStrokeColor.value.set(T??b3),b=this.strokeOpacity,b==null&&(b=1)),x=this.fillOpacity;n.uTroikaEdgeOffset.value=d,n.uTroikaPositionOffset.value.set(R,C),n.uTroikaBlurRadius.value=g,n.uTroikaStrokeWidth.value=y,n.uTroikaStrokeOpacity.value=b,n.uTroikaFillOpacity.value=x??1,n.uTroikaCurveRadius.value=this.curveRadius||0;let w=this.clipRect;if(w&&Array.isArray(w)&&w.length===4)n.uTroikaClipRect.value.fromArray(w);else{const N=(this.fontSize||.1)*100;n.uTroikaClipRect.value.set(f[0]-N,f[1]-N,f[2]+N,f[3]+N)}this.geometry.applyClipRect(n.uTroikaClipRect.value)}n.uTroikaSDFDebug.value=!!this.debugSDF,t.polygonOffset=!!this.depthOffset,t.polygonOffsetFactor=t.polygonOffsetUnits=this.depthOffset||0;const s=e?this.outlineColor||0:this.color;if(s==null)delete t.color;else{const c=t.hasOwnProperty("color")?t.color:t.color=new He;(s!==c._input||typeof s=="object")&&c.set(c._input=s)}let o=this.orientation||eb;if(o!==t._orientation){let c=n.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let f=o!==eb&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(f){let[,d,g,y,x]=f;Uy.set(0,0,0)[g]=d==="-"?1:-1,tb.set(0,0,0)[x]=y==="-"?-1:1,M3.lookAt(pV,Uy.cross(tb),tb),c.setFromMatrix4(M3)}else c.identity();t._orientation=o}}_parsePercent(t){if(typeof t=="string"){let e=t.match(/^(-?[\d.]+)%$/),n=e?parseFloat(e[1]):NaN;t=(isNaN(n)?0:n/100)*this.fontSize}return t}localPositionToTextCoords(t,e=new de){e.copy(t);const n=this.curveRadius;return n&&(e.x=Math.atan2(t.x,Math.abs(n)-Math.abs(t.z))*Math.abs(n)),e}worldPositionToTextCoords(t,e=new de){return Uy.copy(t),this.localPositionToTextCoords(this.worldToLocal(Uy),e)}raycast(t,e){const{textRenderInfo:n,curveRadius:a}=this;if(n){const s=n.blockBounds,o=a?MD():bD(),c=o.geometry,{position:f,uv:d}=c.attributes;for(let g=0;g<d.count;g++){let y=s[0]+d.getX(g)*(s[2]-s[0]);const x=s[1]+d.getY(g)*(s[3]-s[1]);let b=0;a&&(b=a-Math.cos(y/a)*a,y=Math.sin(y/a)*a),f.setXYZ(g,y,x,b)}c.boundingSphere=this.geometry.boundingSphere,c.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,Ag.length=0,o.raycast(t,Ag);for(let g=0;g<Ag.length;g++)Ag[g].object=this,e.push(Ag[g])}}copy(t){const e=this.geometry;return super.copy(t),this.geometry=e,vV.forEach(n=>{this[n]=t[n]}),this}clone(){return new this.constructor().copy(this)}};TD.forEach(i=>{const t="_private_"+i;Object.defineProperty(AD.prototype,i,{get(){return this[t]},set(e){e!==this[t]&&(this[t]=e,this._needsSync=!0)}})});new Ts;new He;const yV=ct.forwardRef(({sdfGlyphSize:i=64,anchorX:t="center",anchorY:e="middle",font:n,fontSize:a=1,children:s,characters:o,onSync:c,...f},d)=>{const g=Pr(({invalidate:T})=>T),[y]=ct.useState(()=>new AD),[x,b]=ct.useMemo(()=>{const T=[];let R="";return ct.Children.forEach(s,C=>{typeof C=="string"||typeof C=="number"?R+=C:T.push(C)}),[T,R]},[s]);return s8(()=>new Promise(T=>eV({font:n,characters:o},T)),["troika-text",n,o]),ct.useLayoutEffect(()=>{y.sync(()=>{g(),c&&c(y)})}),ct.useEffect(()=>()=>y.dispose(),[y]),ct.createElement("primitive",Qp({object:y,ref:d,font:n,text:b,anchorX:t,anchorY:e,fontSize:a,sdfGlyphSize:i},f),x)});function _V(i,t,e){const n=Pr(b=>b.size),a=Pr(b=>b.viewport),s=typeof i=="number"?i:n.width*a.dpr,o=n.height*a.dpr,c=(typeof i=="number"?e:i)||{},{samples:f=0,depth:d,...g}=c,y=d??c.depthBuffer,x=ct.useMemo(()=>{const b=new ro(s,o,{minFilter:Di,magFilter:Di,type:tc,...g});return y&&(b.depthTexture=new cd(s,o,ar)),b.samples=f,b},[]);return ct.useLayoutEffect(()=>{x.setSize(s,o),f&&(x.samples=f)},[f,x,s,o]),ct.useEffect(()=>()=>x.dispose(),[]),x}const xV=i=>typeof i=="function",SV=ct.forwardRef(({envMap:i,resolution:t=256,frames:e=1/0,makeDefault:n,children:a,...s},o)=>{const c=Pr(({set:C})=>C),f=Pr(({camera:C})=>C),d=Pr(({size:C})=>C),g=ct.useRef(null);ct.useImperativeHandle(o,()=>g.current,[]);const y=ct.useRef(null),x=_V(t);ct.useLayoutEffect(()=>{s.manual||(g.current.aspect=d.width/d.height)},[d,s]),ct.useLayoutEffect(()=>{g.current.updateProjectionMatrix()});let b=0,T=null;const R=xV(a);return Y1(C=>{R&&(e===1/0||b<e)&&(y.current.visible=!1,C.gl.setRenderTarget(x),T=C.scene.background,i&&(C.scene.background=i),C.gl.render(C.scene,g.current),C.scene.background=T,C.gl.setRenderTarget(null),y.current.visible=!0,b++)}),ct.useLayoutEffect(()=>{if(n){const C=f;return c(()=>({camera:g.current})),()=>c(()=>({camera:C}))}},[g,n,c]),ct.createElement(ct.Fragment,null,ct.createElement("perspectiveCamera",Qp({ref:g},s),!R&&a),ct.createElement("group",{ref:y},R&&a(x.texture)))}),bV=ct.forwardRef(({makeDefault:i,camera:t,regress:e,domElement:n,enableDamping:a=!0,keyEvents:s=!1,onChange:o,onStart:c,onEnd:f,...d},g)=>{const y=Pr(H=>H.invalidate),x=Pr(H=>H.camera),b=Pr(H=>H.gl),T=Pr(H=>H.events),R=Pr(H=>H.setEvents),C=Pr(H=>H.set),w=Pr(H=>H.get),N=Pr(H=>H.performance),I=t||x,z=n||T.connected||b.domElement,F=ct.useMemo(()=>new bk(I),[I]);return Y1(()=>{F.enabled&&F.update()},-1),ct.useEffect(()=>(s&&F.connect(s===!0?z:s),F.connect(z),()=>{F.dispose()}),[s,z,e,F,y]),ct.useEffect(()=>{const H=B=>{y(),e&&N.regress(),o&&o(B)},q=B=>{c&&c(B)},Z=B=>{f&&f(B)};return F.addEventListener("change",H),F.addEventListener("start",q),F.addEventListener("end",Z),()=>{F.removeEventListener("start",q),F.removeEventListener("end",Z),F.removeEventListener("change",H)}},[o,c,f,F,y,R]),ct.useEffect(()=>{if(i){const H=w().controls;return C({controls:F}),()=>C({controls:H})}},[i,F]),ct.createElement("primitive",Qp({ref:g,object:F,enableDamping:a},d))});function MV({track:i,position:t,isSelected:e,onClick:n}){const a=ct.useRef(null),s=ct.useRef(null),o=(i.headingDeg-90)*Math.PI/180;Y1(({clock:f})=>{if(s.current&&e){const d=1+Math.sin(f.elapsedTime*3)*.1;s.current.scale.setScalar(d)}});const c=()=>i.verticalRateFpm>500?"#00ff88":i.verticalRateFpm<-500?"#00d4ff":"#ffffff";return O.jsxs("group",{position:t,children:[e&&O.jsxs("mesh",{ref:s,children:[O.jsx("sphereGeometry",{args:[.3,16,16]}),O.jsx("meshBasicMaterial",{color:"#00ff88",transparent:!0,opacity:.3})]}),O.jsxs("mesh",{ref:a,rotation:[0,-o,0],onClick:f=>{f.stopPropagation(),n()},children:[O.jsx("coneGeometry",{args:[.08,.25,8]}),O.jsx("meshStandardMaterial",{color:c(),emissive:e?"#00ff88":"#000000",emissiveIntensity:e?.5:0})]}),O.jsxs("line",{children:[O.jsx("bufferGeometry",{attach:"geometry",children:O.jsx("bufferAttribute",{attach:"attributes-position",args:[new Float32Array([0,0,0,0,-t[1],0]),3]})}),O.jsx("lineBasicMaterial",{color:"#00ff8844",transparent:!0,opacity:.3})]}),e&&O.jsx(pk,{position:[.3,.2,0],style:{pointerEvents:"none"},children:O.jsxs("div",{style:{background:"rgba(13, 17, 23, 0.9)",border:"1px solid #00ff88",borderRadius:4,padding:"4px 8px",fontFamily:"'JetBrains Mono', monospace",fontSize:10,color:"#00ff88",whiteSpace:"nowrap"},children:[O.jsx("div",{children:i.callsign}),O.jsxs("div",{children:["FL",Math.round(i.altitudeFt/100)]}),O.jsxs("div",{children:[i.speedKt,"KT"]})]})})]})}const TV=[{altitude:1e4,label:"FL100",color:"#00ff8822"},{altitude:2e4,label:"FL200",color:"#00ff8833"},{altitude:3e4,label:"FL300",color:"#00ff8844"},{altitude:4e4,label:"FL400",color:"#00ff8855"}];function AV(){const i=ct.useMemo(()=>TV.map(({altitude:t,label:e,color:n})=>({y:t/1e4,label:e,color:n})),[]);return O.jsx(O.Fragment,{children:i.map(({y:t,label:e,color:n})=>O.jsxs("group",{position:[0,t,0],children:[O.jsxs("mesh",{rotation:[-Math.PI/2,0,0],children:[O.jsx("planeGeometry",{args:[40,40]}),O.jsx("meshBasicMaterial",{color:n,transparent:!0,opacity:.1,side:2})]}),O.jsx(yV,{position:[-18,0,0],fontSize:.3,color:"#00ff88",anchorX:"left",anchorY:"middle",children:e})]},e))})}function EV(i,t,e){const a=(t-e[1])*Math.cos(e[0]*Math.PI/180)*60*1,s=(i-e[0])*60*(100/100);return[a,-s]}function wV(i){return i/1e4}function CV({tracks:i,selectedTrackId:t,onSelectTrack:e,mapCenter:n}){const a=Hs(o=>o.viewMode),s=()=>a==="3d"?[8,10,12]:[0,15,.01];return O.jsx(ak,{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},gl:{antialias:!0,alpha:!0},children:O.jsxs(ct.Suspense,{fallback:null,children:[O.jsx(SV,{makeDefault:!0,position:s(),fov:a==="3d"?50:30}),a==="3d"&&O.jsx(bV,{enablePan:!0,enableZoom:!0,enableRotate:!0,maxPolarAngle:Math.PI/2.2,minPolarAngle:Math.PI/6,minDistance:5,maxDistance:40}),O.jsx("ambientLight",{intensity:.4}),O.jsx("directionalLight",{position:[10,10,5],intensity:.6}),O.jsxs("mesh",{rotation:[-Math.PI/2,0,0],position:[0,0,0],children:[O.jsx("planeGeometry",{args:[50,50,50,50]}),O.jsx("meshBasicMaterial",{color:"#0a0e14",wireframe:!0,opacity:.3,transparent:!0})]}),O.jsx(AV,{}),i.map(o=>{const[c,f]=EV(o.latitudeDeg,o.longitudeDeg,n),d=wV(o.altitudeFt);return O.jsx(MV,{track:o,position:[c,d,f],isSelected:o.trackId===t,onClick:()=>e(o.trackId)},o.trackId)})]})})}const bM=ct.createContext({});function MM(i){const t=ct.useRef(null);return t.current===null&&(t.current=i()),t.current}const TM=typeof window<"u",ED=TM?ct.useLayoutEffect:ct.useEffect,Q1=ct.createContext(null);function AM(i,t){i.indexOf(t)===-1&&i.push(t)}function EM(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}const Iu=(i,t,e)=>e>t?t:e<i?i:e;let wM=()=>{};const Pu={},wD=i=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(i);function CD(i){return typeof i=="object"&&i!==null}const RD=i=>/^0[^.\s]+$/u.test(i);function CM(i){let t;return()=>(t===void 0&&(t=i()),t)}const hl=i=>i,RV=(i,t)=>e=>t(i(e)),P0=(...i)=>i.reduce(RV),v0=(i,t,e)=>{const n=t-i;return n===0?1:(e-i)/n};class RM{constructor(){this.subscriptions=[]}add(t){return AM(this.subscriptions,t),()=>EM(this.subscriptions,t)}notify(t,e,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,e,n);else for(let s=0;s<a;s++){const o=this.subscriptions[s];o&&o(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Bc=i=>i*1e3,ul=i=>i/1e3;function DD(i,t){return t?i*(1e3/t):0}const LD=(i,t,e)=>(((1-3*e+3*t)*i+(3*e-6*t))*i+3*t)*i,DV=1e-7,LV=12;function OV(i,t,e,n,a){let s,o,c=0;do o=t+(e-t)/2,s=LD(o,n,a)-i,s>0?e=o:t=o;while(Math.abs(s)>DV&&++c<LV);return o}function z0(i,t,e,n){if(i===t&&e===n)return hl;const a=s=>OV(s,0,1,i,e);return s=>s===0||s===1?s:LD(a(s),t,n)}const OD=i=>t=>t<=.5?i(2*t)/2:(2-i(2*(1-t)))/2,ND=i=>t=>1-i(1-t),UD=z0(.33,1.53,.69,.99),DM=ND(UD),ID=OD(DM),PD=i=>(i*=2)<1?.5*DM(i):.5*(2-Math.pow(2,-10*(i-1))),LM=i=>1-Math.sin(Math.acos(i)),zD=ND(LM),BD=OD(LM),NV=z0(.42,0,1,1),UV=z0(0,0,.58,1),FD=z0(.42,0,.58,1),IV=i=>Array.isArray(i)&&typeof i[0]!="number",kD=i=>Array.isArray(i)&&typeof i[0]=="number",PV={linear:hl,easeIn:NV,easeInOut:FD,easeOut:UV,circIn:LM,circInOut:BD,circOut:zD,backIn:DM,backInOut:ID,backOut:UD,anticipate:PD},zV=i=>typeof i=="string",A3=i=>{if(kD(i)){wM(i.length===4);const[t,e,n,a]=i;return z0(t,e,n,a)}else if(zV(i))return PV[i];return i},Iy=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function BV(i,t){let e=new Set,n=new Set,a=!1,s=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function f(g){o.has(g)&&(d.schedule(g),i()),g(c)}const d={schedule:(g,y=!1,x=!1)=>{const T=x&&a?e:n;return y&&o.add(g),T.has(g)||T.add(g),g},cancel:g=>{n.delete(g),o.delete(g)},process:g=>{if(c=g,a){s=!0;return}a=!0,[e,n]=[n,e],e.forEach(f),e.clear(),a=!1,s&&(s=!1,d.process(g))}};return d}const FV=40;function VD(i,t){let e=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},s=()=>e=!0,o=Iy.reduce((I,z)=>(I[z]=BV(s),I),{}),{setup:c,read:f,resolveKeyframes:d,preUpdate:g,update:y,preRender:x,render:b,postRender:T}=o,R=()=>{const I=Pu.useManualTiming?a.timestamp:performance.now();e=!1,Pu.useManualTiming||(a.delta=n?1e3/60:Math.max(Math.min(I-a.timestamp,FV),1)),a.timestamp=I,a.isProcessing=!0,c.process(a),f.process(a),d.process(a),g.process(a),y.process(a),x.process(a),b.process(a),T.process(a),a.isProcessing=!1,e&&t&&(n=!1,i(R))},C=()=>{e=!0,n=!0,a.isProcessing||i(R)};return{schedule:Iy.reduce((I,z)=>{const F=o[z];return I[z]=(H,q=!1,Z=!1)=>(e||C(),F.schedule(H,q,Z)),I},{}),cancel:I=>{for(let z=0;z<Iy.length;z++)o[Iy[z]].cancel(I)},state:a,steps:o}}const{schedule:na,cancel:Hf,state:Vs,steps:nb}=VD(typeof requestAnimationFrame<"u"?requestAnimationFrame:hl,!0);let Jy;function kV(){Jy=void 0}const so={now:()=>(Jy===void 0&&so.set(Vs.isProcessing||Pu.useManualTiming?Vs.timestamp:performance.now()),Jy),set:i=>{Jy=i,queueMicrotask(kV)}},HD=i=>t=>typeof t=="string"&&t.startsWith(i),GD=HD("--"),VV=HD("var(--"),OM=i=>VV(i)?HV.test(i.split("/*")[0].trim()):!1,HV=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,om={test:i=>typeof i=="number",parse:parseFloat,transform:i=>i},y0={...om,transform:i=>Iu(0,1,i)},Py={...om,default:1},Yg=i=>Math.round(i*1e5)/1e5,NM=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function GV(i){return i==null}const jV=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,UM=(i,t)=>e=>!!(typeof e=="string"&&jV.test(e)&&e.startsWith(i)||t&&!GV(e)&&Object.prototype.hasOwnProperty.call(e,t)),jD=(i,t,e)=>n=>{if(typeof n!="string")return n;const[a,s,o,c]=n.match(NM);return{[i]:parseFloat(a),[t]:parseFloat(s),[e]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},WV=i=>Iu(0,255,i),ib={...om,transform:i=>Math.round(WV(i))},Qh={test:UM("rgb","red"),parse:jD("red","green","blue"),transform:({red:i,green:t,blue:e,alpha:n=1})=>"rgba("+ib.transform(i)+", "+ib.transform(t)+", "+ib.transform(e)+", "+Yg(y0.transform(n))+")"};function qV(i){let t="",e="",n="",a="";return i.length>5?(t=i.substring(1,3),e=i.substring(3,5),n=i.substring(5,7),a=i.substring(7,9)):(t=i.substring(1,2),e=i.substring(2,3),n=i.substring(3,4),a=i.substring(4,5),t+=t,e+=e,n+=n,a+=a),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const Qb={test:UM("#"),parse:qV,transform:Qh.transform},B0=i=>({test:t=>typeof t=="string"&&t.endsWith(i)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${i}`}),Lf=B0("deg"),Fc=B0("%"),vn=B0("px"),XV=B0("vh"),YV=B0("vw"),E3={...Fc,parse:i=>Fc.parse(i)/100,transform:i=>Fc.transform(i*100)},Np={test:UM("hsl","hue"),parse:jD("hue","saturation","lightness"),transform:({hue:i,saturation:t,lightness:e,alpha:n=1})=>"hsla("+Math.round(i)+", "+Fc.transform(Yg(t))+", "+Fc.transform(Yg(e))+", "+Yg(y0.transform(n))+")"},Ka={test:i=>Qh.test(i)||Qb.test(i)||Np.test(i),parse:i=>Qh.test(i)?Qh.parse(i):Np.test(i)?Np.parse(i):Qb.parse(i),transform:i=>typeof i=="string"?i:i.hasOwnProperty("red")?Qh.transform(i):Np.transform(i),getAnimatableNone:i=>{const t=Ka.parse(i);return t.alpha=0,Ka.transform(t)}},ZV=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function KV(i){return isNaN(i)&&typeof i=="string"&&(i.match(NM)?.length||0)+(i.match(ZV)?.length||0)>0}const WD="number",qD="color",QV="var",JV="var(",w3="${}",$V=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function _0(i){const t=i.toString(),e=[],n={color:[],number:[],var:[]},a=[];let s=0;const c=t.replace($V,f=>(Ka.test(f)?(n.color.push(s),a.push(qD),e.push(Ka.parse(f))):f.startsWith(JV)?(n.var.push(s),a.push(QV),e.push(f)):(n.number.push(s),a.push(WD),e.push(parseFloat(f))),++s,w3)).split(w3);return{values:e,split:c,indexes:n,types:a}}function XD(i){return _0(i).values}function YD(i){const{split:t,types:e}=_0(i),n=t.length;return a=>{let s="";for(let o=0;o<n;o++)if(s+=t[o],a[o]!==void 0){const c=e[o];c===WD?s+=Yg(a[o]):c===qD?s+=Ka.transform(a[o]):s+=a[o]}return s}}const tH=i=>typeof i=="number"?0:Ka.test(i)?Ka.getAnimatableNone(i):i;function eH(i){const t=XD(i);return YD(i)(t.map(tH))}const Gf={test:KV,parse:XD,createTransformer:YD,getAnimatableNone:eH};function ab(i,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+(t-i)*6*e:e<1/2?t:e<2/3?i+(t-i)*(2/3-e)*6:i}function nH({hue:i,saturation:t,lightness:e,alpha:n}){i/=360,t/=100,e/=100;let a=0,s=0,o=0;if(!t)a=s=o=e;else{const c=e<.5?e*(1+t):e+t-e*t,f=2*e-c;a=ab(f,c,i+1/3),s=ab(f,c,i),o=ab(f,c,i-1/3)}return{red:Math.round(a*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:n}}function J_(i,t){return e=>e>0?t:i}const da=(i,t,e)=>i+(t-i)*e,sb=(i,t,e)=>{const n=i*i,a=e*(t*t-n)+n;return a<0?0:Math.sqrt(a)},iH=[Qb,Qh,Np],aH=i=>iH.find(t=>t.test(i));function C3(i){const t=aH(i);if(!t)return!1;let e=t.parse(i);return t===Np&&(e=nH(e)),e}const R3=(i,t)=>{const e=C3(i),n=C3(t);if(!e||!n)return J_(i,t);const a={...e};return s=>(a.red=sb(e.red,n.red,s),a.green=sb(e.green,n.green,s),a.blue=sb(e.blue,n.blue,s),a.alpha=da(e.alpha,n.alpha,s),Qh.transform(a))},Jb=new Set(["none","hidden"]);function sH(i,t){return Jb.has(i)?e=>e<=0?i:t:e=>e>=1?t:i}function rH(i,t){return e=>da(i,t,e)}function IM(i){return typeof i=="number"?rH:typeof i=="string"?OM(i)?J_:Ka.test(i)?R3:cH:Array.isArray(i)?ZD:typeof i=="object"?Ka.test(i)?R3:oH:J_}function ZD(i,t){const e=[...i],n=e.length,a=i.map((s,o)=>IM(s)(s,t[o]));return s=>{for(let o=0;o<n;o++)e[o]=a[o](s);return e}}function oH(i,t){const e={...i,...t},n={};for(const a in e)i[a]!==void 0&&t[a]!==void 0&&(n[a]=IM(i[a])(i[a],t[a]));return a=>{for(const s in n)e[s]=n[s](a);return e}}function lH(i,t){const e=[],n={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const s=t.types[a],o=i.indexes[s][n[s]],c=i.values[o]??0;e[a]=c,n[s]++}return e}const cH=(i,t)=>{const e=Gf.createTransformer(t),n=_0(i),a=_0(t);return n.indexes.var.length===a.indexes.var.length&&n.indexes.color.length===a.indexes.color.length&&n.indexes.number.length>=a.indexes.number.length?Jb.has(i)&&!a.values.length||Jb.has(t)&&!n.values.length?sH(i,t):P0(ZD(lH(n,a),a.values),e):J_(i,t)};function KD(i,t,e){return typeof i=="number"&&typeof t=="number"&&typeof e=="number"?da(i,t,e):IM(i)(i,t)}const uH=i=>{const t=({timestamp:e})=>i(e);return{start:(e=!0)=>na.update(t,e),stop:()=>Hf(t),now:()=>Vs.isProcessing?Vs.timestamp:so.now()}},QD=(i,t,e=10)=>{let n="";const a=Math.max(Math.round(t/e),2);for(let s=0;s<a;s++)n+=Math.round(i(s/(a-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},$_=2e4;function PM(i){let t=0;const e=50;let n=i.next(t);for(;!n.done&&t<$_;)t+=e,n=i.next(t);return t>=$_?1/0:t}function fH(i,t=100,e){const n=e({...i,keyframes:[0,t]}),a=Math.min(PM(n),$_);return{type:"keyframes",ease:s=>n.next(a*s).value/t,duration:ul(a)}}const hH=5;function JD(i,t,e){const n=Math.max(t-hH,0);return DD(e-i(n),t-n)}const wa={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},rb=.001;function dH({duration:i=wa.duration,bounce:t=wa.bounce,velocity:e=wa.velocity,mass:n=wa.mass}){let a,s,o=1-t;o=Iu(wa.minDamping,wa.maxDamping,o),i=Iu(wa.minDuration,wa.maxDuration,ul(i)),o<1?(a=d=>{const g=d*o,y=g*i,x=g-e,b=$b(d,o),T=Math.exp(-y);return rb-x/b*T},s=d=>{const y=d*o*i,x=y*e+e,b=Math.pow(o,2)*Math.pow(d,2)*i,T=Math.exp(-y),R=$b(Math.pow(d,2),o);return(-a(d)+rb>0?-1:1)*((x-b)*T)/R}):(a=d=>{const g=Math.exp(-d*i),y=(d-e)*i+1;return-rb+g*y},s=d=>{const g=Math.exp(-d*i),y=(e-d)*(i*i);return g*y});const c=5/i,f=mH(a,s,c);if(i=Bc(i),isNaN(f))return{stiffness:wa.stiffness,damping:wa.damping,duration:i};{const d=Math.pow(f,2)*n;return{stiffness:d,damping:o*2*Math.sqrt(n*d),duration:i}}}const pH=12;function mH(i,t,e){let n=e;for(let a=1;a<pH;a++)n=n-i(n)/t(n);return n}function $b(i,t){return i*Math.sqrt(1-t*t)}const gH=["duration","bounce"],vH=["stiffness","damping","mass"];function D3(i,t){return t.some(e=>i[e]!==void 0)}function yH(i){let t={velocity:wa.velocity,stiffness:wa.stiffness,damping:wa.damping,mass:wa.mass,isResolvedFromDuration:!1,...i};if(!D3(i,vH)&&D3(i,gH))if(i.visualDuration){const e=i.visualDuration,n=2*Math.PI/(e*1.2),a=n*n,s=2*Iu(.05,1,1-(i.bounce||0))*Math.sqrt(a);t={...t,mass:wa.mass,stiffness:a,damping:s}}else{const e=dH(i);t={...t,...e,mass:wa.mass},t.isResolvedFromDuration=!0}return t}function t1(i=wa.visualDuration,t=wa.bounce){const e=typeof i!="object"?{visualDuration:i,keyframes:[0,1],bounce:t}:i;let{restSpeed:n,restDelta:a}=e;const s=e.keyframes[0],o=e.keyframes[e.keyframes.length-1],c={done:!1,value:s},{stiffness:f,damping:d,mass:g,duration:y,velocity:x,isResolvedFromDuration:b}=yH({...e,velocity:-ul(e.velocity||0)}),T=x||0,R=d/(2*Math.sqrt(f*g)),C=o-s,w=ul(Math.sqrt(f/g)),N=Math.abs(C)<5;n||(n=N?wa.restSpeed.granular:wa.restSpeed.default),a||(a=N?wa.restDelta.granular:wa.restDelta.default);let I;if(R<1){const F=$b(w,R);I=H=>{const q=Math.exp(-R*w*H);return o-q*((T+R*w*C)/F*Math.sin(F*H)+C*Math.cos(F*H))}}else if(R===1)I=F=>o-Math.exp(-w*F)*(C+(T+w*C)*F);else{const F=w*Math.sqrt(R*R-1);I=H=>{const q=Math.exp(-R*w*H),Z=Math.min(F*H,300);return o-q*((T+R*w*C)*Math.sinh(Z)+F*C*Math.cosh(Z))/F}}const z={calculatedDuration:b&&y||null,next:F=>{const H=I(F);if(b)c.done=F>=y;else{let q=F===0?T:0;R<1&&(q=F===0?Bc(T):JD(I,F,H));const Z=Math.abs(q)<=n,B=Math.abs(o-H)<=a;c.done=Z&&B}return c.value=c.done?o:H,c},toString:()=>{const F=Math.min(PM(z),$_),H=QD(q=>z.next(F*q).value,F,30);return F+"ms "+H},toTransition:()=>{}};return z}t1.applyToOptions=i=>{const t=fH(i,100,t1);return i.ease=t.ease,i.duration=Bc(t.duration),i.type="keyframes",i};function t2({keyframes:i,velocity:t=0,power:e=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:s=500,modifyTarget:o,min:c,max:f,restDelta:d=.5,restSpeed:g}){const y=i[0],x={done:!1,value:y},b=Z=>c!==void 0&&Z<c||f!==void 0&&Z>f,T=Z=>c===void 0?f:f===void 0||Math.abs(c-Z)<Math.abs(f-Z)?c:f;let R=e*t;const C=y+R,w=o===void 0?C:o(C);w!==C&&(R=w-y);const N=Z=>-R*Math.exp(-Z/n),I=Z=>w+N(Z),z=Z=>{const B=N(Z),V=I(Z);x.done=Math.abs(B)<=d,x.value=x.done?w:V};let F,H;const q=Z=>{b(x.value)&&(F=Z,H=t1({keyframes:[x.value,T(x.value)],velocity:JD(I,Z,x.value),damping:a,stiffness:s,restDelta:d,restSpeed:g}))};return q(0),{calculatedDuration:null,next:Z=>{let B=!1;return!H&&F===void 0&&(B=!0,z(Z),q(Z)),F!==void 0&&Z>=F?H.next(Z-F):(!B&&z(Z),x)}}}function _H(i,t,e){const n=[],a=e||Pu.mix||KD,s=i.length-1;for(let o=0;o<s;o++){let c=a(i[o],i[o+1]);if(t){const f=Array.isArray(t)?t[o]||hl:t;c=P0(f,c)}n.push(c)}return n}function xH(i,t,{clamp:e=!0,ease:n,mixer:a}={}){const s=i.length;if(wM(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const o=i[0]===i[1];i[0]>i[s-1]&&(i=[...i].reverse(),t=[...t].reverse());const c=_H(t,n,a),f=c.length,d=g=>{if(o&&g<i[0])return t[0];let y=0;if(f>1)for(;y<i.length-2&&!(g<i[y+1]);y++);const x=v0(i[y],i[y+1],g);return c[y](x)};return e?g=>d(Iu(i[0],i[s-1],g)):d}function SH(i,t){const e=i[i.length-1];for(let n=1;n<=t;n++){const a=v0(0,t,n);i.push(da(e,1,a))}}function bH(i){const t=[0];return SH(t,i.length-1),t}function MH(i,t){return i.map(e=>e*t)}function TH(i,t){return i.map(()=>t||FD).splice(0,i.length-1)}function Zg({duration:i=300,keyframes:t,times:e,ease:n="easeInOut"}){const a=IV(n)?n.map(A3):A3(n),s={done:!1,value:t[0]},o=MH(e&&e.length===t.length?e:bH(t),i),c=xH(o,t,{ease:Array.isArray(a)?a:TH(t,a)});return{calculatedDuration:i,next:f=>(s.value=c(f),s.done=f>=i,s)}}const AH=i=>i!==null;function zM(i,{repeat:t,repeatType:e="loop"},n,a=1){const s=i.filter(AH),c=a<0||t&&e!=="loop"&&t%2===1?0:s.length-1;return!c||n===void 0?s[c]:n}const EH={decay:t2,inertia:t2,tween:Zg,keyframes:Zg,spring:t1};function $D(i){typeof i.type=="string"&&(i.type=EH[i.type])}class BM{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const wH=i=>i/100;class FM extends BM{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:e}=this.options;e&&e.updatedAt!==so.now()&&this.tick(so.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;$D(t);const{type:e=Zg,repeat:n=0,repeatDelay:a=0,repeatType:s,velocity:o=0}=t;let{keyframes:c}=t;const f=e||Zg;f!==Zg&&typeof c[0]!="number"&&(this.mixKeyframes=P0(wH,KD(c[0],c[1])),c=[0,100]);const d=f({...t,keyframes:c});s==="mirror"&&(this.mirroredGenerator=f({...t,keyframes:[...c].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=PM(d));const{calculatedDuration:g}=d;this.calculatedDuration=g,this.resolvedDuration=g+a,this.totalDuration=this.resolvedDuration*(n+1)-a,this.generator=d}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:n,totalDuration:a,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:f}=this;if(this.startTime===null)return n.next(0);const{delay:d=0,keyframes:g,repeat:y,repeatType:x,repeatDelay:b,type:T,onUpdate:R,finalKeyframe:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-a/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const w=this.currentTime-d*(this.playbackSpeed>=0?1:-1),N=this.playbackSpeed>=0?w<0:w>a;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let I=this.currentTime,z=n;if(y){const Z=Math.min(this.currentTime,a)/c;let B=Math.floor(Z),V=Z%1;!V&&Z>=1&&(V=1),V===1&&B--,B=Math.min(B,y+1),B%2&&(x==="reverse"?(V=1-V,b&&(V-=b/c)):x==="mirror"&&(z=o)),I=Iu(0,1,V)*c}const F=N?{done:!1,value:g[0]}:z.next(I);s&&(F.value=s(F.value));let{done:H}=F;!N&&f!==null&&(H=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const q=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&H);return q&&T!==t2&&(F.value=zM(g,this.options,C,this.speed)),R&&R(F.value),q&&this.finish(),F}then(t,e){return this.finished.then(t,e)}get duration(){return ul(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+ul(t)}get time(){return ul(this.currentTime)}set time(t){t=Bc(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(so.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=ul(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=uH,startTime:e}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=e??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(so.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function CH(i){for(let t=1;t<i.length;t++)i[t]??(i[t]=i[t-1])}const Jh=i=>i*180/Math.PI,e2=i=>{const t=Jh(Math.atan2(i[1],i[0]));return n2(t)},RH={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:i=>(Math.abs(i[0])+Math.abs(i[3]))/2,rotate:e2,rotateZ:e2,skewX:i=>Jh(Math.atan(i[1])),skewY:i=>Jh(Math.atan(i[2])),skew:i=>(Math.abs(i[1])+Math.abs(i[2]))/2},n2=i=>(i=i%360,i<0&&(i+=360),i),L3=e2,O3=i=>Math.sqrt(i[0]*i[0]+i[1]*i[1]),N3=i=>Math.sqrt(i[4]*i[4]+i[5]*i[5]),DH={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:O3,scaleY:N3,scale:i=>(O3(i)+N3(i))/2,rotateX:i=>n2(Jh(Math.atan2(i[6],i[5]))),rotateY:i=>n2(Jh(Math.atan2(-i[2],i[0]))),rotateZ:L3,rotate:L3,skewX:i=>Jh(Math.atan(i[4])),skewY:i=>Jh(Math.atan(i[1])),skew:i=>(Math.abs(i[1])+Math.abs(i[4]))/2};function i2(i){return i.includes("scale")?1:0}function a2(i,t){if(!i||i==="none")return i2(t);const e=i.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,a;if(e)n=DH,a=e;else{const c=i.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=RH,a=c}if(!a)return i2(t);const s=n[t],o=a[1].split(",").map(OH);return typeof s=="function"?s(o):o[s]}const LH=(i,t)=>{const{transform:e="none"}=getComputedStyle(i);return a2(e,t)};function OH(i){return parseFloat(i.trim())}const lm=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],cm=new Set(lm),U3=i=>i===om||i===vn,NH=new Set(["x","y","z"]),UH=lm.filter(i=>!NH.has(i));function IH(i){const t=[];return UH.forEach(e=>{const n=i.getValue(e);n!==void 0&&(t.push([e,n.get()]),n.set(e.startsWith("scale")?1:0))}),t}const id={width:({x:i},{paddingLeft:t="0",paddingRight:e="0"})=>i.max-i.min-parseFloat(t)-parseFloat(e),height:({y:i},{paddingTop:t="0",paddingBottom:e="0"})=>i.max-i.min-parseFloat(t)-parseFloat(e),top:(i,{top:t})=>parseFloat(t),left:(i,{left:t})=>parseFloat(t),bottom:({y:i},{top:t})=>parseFloat(t)+(i.max-i.min),right:({x:i},{left:t})=>parseFloat(t)+(i.max-i.min),x:(i,{transform:t})=>a2(t,"x"),y:(i,{transform:t})=>a2(t,"y")};id.translateX=id.x;id.translateY=id.y;const ad=new Set;let s2=!1,r2=!1,o2=!1;function tL(){if(r2){const i=Array.from(ad).filter(n=>n.needsMeasurement),t=new Set(i.map(n=>n.element)),e=new Map;t.forEach(n=>{const a=IH(n);a.length&&(e.set(n,a),n.render())}),i.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const a=e.get(n);a&&a.forEach(([s,o])=>{n.getValue(s)?.set(o)})}),i.forEach(n=>n.measureEndState()),i.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}r2=!1,s2=!1,ad.forEach(i=>i.complete(o2)),ad.clear()}function eL(){ad.forEach(i=>{i.readKeyframes(),i.needsMeasurement&&(r2=!0)})}function PH(){o2=!0,eL(),tL(),o2=!1}class kM{constructor(t,e,n,a,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=n,this.motionValue=a,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(ad.add(this),s2||(s2=!0,na.read(eL),na.resolveKeyframes(tL))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:n,motionValue:a}=this;if(t[0]===null){const s=a?.get(),o=t[t.length-1];if(s!==void 0)t[0]=s;else if(n&&e){const c=n.readValue(e,o);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=o),a&&s===void 0&&a.set(t[0])}CH(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),ad.delete(this)}cancel(){this.state==="scheduled"&&(ad.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const zH=i=>i.startsWith("--");function BH(i,t,e){zH(t)?i.style.setProperty(t,e):i.style[t]=e}const FH=CM(()=>window.ScrollTimeline!==void 0),kH={};function VH(i,t){const e=CM(i);return()=>kH[t]??e()}const nL=VH(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ug=([i,t,e,n])=>`cubic-bezier(${i}, ${t}, ${e}, ${n})`,I3={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ug([0,.65,.55,1]),circOut:Ug([.55,0,1,.45]),backIn:Ug([.31,.01,.66,-.59]),backOut:Ug([.33,1.53,.69,.99])};function iL(i,t){if(i)return typeof i=="function"?nL()?QD(i,t):"ease-out":kD(i)?Ug(i):Array.isArray(i)?i.map(e=>iL(e,t)||I3.easeOut):I3[i]}function HH(i,t,e,{delay:n=0,duration:a=300,repeat:s=0,repeatType:o="loop",ease:c="easeOut",times:f}={},d=void 0){const g={[t]:e};f&&(g.offset=f);const y=iL(c,a);Array.isArray(y)&&(g.easing=y);const x={delay:n,duration:a,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return d&&(x.pseudoElement=d),i.animate(g,x)}function aL(i){return typeof i=="function"&&"applyToOptions"in i}function GH({type:i,...t}){return aL(i)&&nL()?i.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class jH extends BM{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:e,name:n,keyframes:a,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:c,onComplete:f}=t;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=t,wM(typeof t.type!="string");const d=GH(t);this.animation=HH(e,n,a,d,s),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const g=zM(a,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(g):BH(e,n,g),this.animation.cancel()}f?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return ul(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+ul(t)}get time(){return ul(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Bc(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&FH()?(this.animation.timeline=t,hl):e(this)}}const sL={anticipate:PD,backInOut:ID,circInOut:BD};function WH(i){return i in sL}function qH(i){typeof i.ease=="string"&&WH(i.ease)&&(i.ease=sL[i.ease])}const P3=10;class XH extends jH{constructor(t){qH(t),$D(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:n,onComplete:a,element:s,...o}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const c=new FM({...o,autoplay:!1}),f=Bc(this.finishedTime??this.time);e.setWithVelocity(c.sample(f-P3).value,c.sample(f).value,P3),c.stop()}}const z3=(i,t)=>t==="zIndex"?!1:!!(typeof i=="number"||Array.isArray(i)||typeof i=="string"&&(Gf.test(i)||i==="0")&&!i.startsWith("url("));function YH(i){const t=i[0];if(i.length===1)return!0;for(let e=0;e<i.length;e++)if(i[e]!==t)return!0}function ZH(i,t,e,n){const a=i[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const s=i[i.length-1],o=z3(a,t),c=z3(s,t);return!o||!c?!1:YH(i)||(e==="spring"||aL(e))&&n}function l2(i){i.duration=0,i.type="keyframes"}const KH=new Set(["opacity","clipPath","filter","transform"]),QH=CM(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function JH(i){const{motionValue:t,name:e,repeatDelay:n,repeatType:a,damping:s,type:o}=i;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:d}=t.owner.getProps();return QH()&&e&&KH.has(e)&&(e!=="transform"||!d)&&!f&&!n&&a!=="mirror"&&s!==0&&o!=="inertia"}const $H=40;class t9 extends BM{constructor({autoplay:t=!0,delay:e=0,type:n="keyframes",repeat:a=0,repeatDelay:s=0,repeatType:o="loop",keyframes:c,name:f,motionValue:d,element:g,...y}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=so.now();const x={autoplay:t,delay:e,type:n,repeat:a,repeatDelay:s,repeatType:o,name:f,motionValue:d,element:g,...y},b=g?.KeyframeResolver||kM;this.keyframeResolver=new b(c,(T,R,C)=>this.onKeyframesResolved(T,R,x,!C),f,d,g),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,e,n,a){this.keyframeResolver=void 0;const{name:s,type:o,velocity:c,delay:f,isHandoff:d,onUpdate:g}=n;this.resolvedAt=so.now(),ZH(t,s,o,c)||((Pu.instantAnimations||!f)&&g?.(zM(t,n,e)),t[0]=t[t.length-1],l2(n),n.repeat=0);const x={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>$H?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...n,keyframes:t},b=!d&&JH(x)?new XH({...x,element:x.motionValue.owner.current}):new FM(x);b.finished.then(()=>this.notifyFinished()).catch(hl),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),PH()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const e9=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function n9(i){const t=e9.exec(i);if(!t)return[,];const[,e,n,a]=t;return[`--${e??n}`,a]}function rL(i,t,e=1){const[n,a]=n9(i);if(!n)return;const s=window.getComputedStyle(t).getPropertyValue(n);if(s){const o=s.trim();return wD(o)?parseFloat(o):o}return OM(a)?rL(a,t,e+1):a}function VM(i,t){return i?.[t]??i?.default??i}const oL=new Set(["width","height","top","left","right","bottom",...lm]),i9={test:i=>i==="auto",parse:i=>i},lL=i=>t=>t.test(i),cL=[om,vn,Fc,Lf,YV,XV,i9],B3=i=>cL.find(lL(i));function a9(i){return typeof i=="number"?i===0:i!==null?i==="none"||i==="0"||RD(i):!0}const s9=new Set(["brightness","contrast","saturate","opacity"]);function r9(i){const[t,e]=i.slice(0,-1).split("(");if(t==="drop-shadow")return i;const[n]=e.match(NM)||[];if(!n)return i;const a=e.replace(n,"");let s=s9.has(t)?1:0;return n!==e&&(s*=100),t+"("+s+a+")"}const o9=/\b([a-z-]*)\(.*?\)/gu,c2={...Gf,getAnimatableNone:i=>{const t=i.match(o9);return t?t.map(r9).join(" "):i}},F3={...om,transform:Math.round},l9={rotate:Lf,rotateX:Lf,rotateY:Lf,rotateZ:Lf,scale:Py,scaleX:Py,scaleY:Py,scaleZ:Py,skew:Lf,skewX:Lf,skewY:Lf,distance:vn,translateX:vn,translateY:vn,translateZ:vn,x:vn,y:vn,z:vn,perspective:vn,transformPerspective:vn,opacity:y0,originX:E3,originY:E3,originZ:vn},HM={borderWidth:vn,borderTopWidth:vn,borderRightWidth:vn,borderBottomWidth:vn,borderLeftWidth:vn,borderRadius:vn,radius:vn,borderTopLeftRadius:vn,borderTopRightRadius:vn,borderBottomRightRadius:vn,borderBottomLeftRadius:vn,width:vn,maxWidth:vn,height:vn,maxHeight:vn,top:vn,right:vn,bottom:vn,left:vn,padding:vn,paddingTop:vn,paddingRight:vn,paddingBottom:vn,paddingLeft:vn,margin:vn,marginTop:vn,marginRight:vn,marginBottom:vn,marginLeft:vn,backgroundPositionX:vn,backgroundPositionY:vn,...l9,zIndex:F3,fillOpacity:y0,strokeOpacity:y0,numOctaves:F3},c9={...HM,color:Ka,backgroundColor:Ka,outlineColor:Ka,fill:Ka,stroke:Ka,borderColor:Ka,borderTopColor:Ka,borderRightColor:Ka,borderBottomColor:Ka,borderLeftColor:Ka,filter:c2,WebkitFilter:c2},uL=i=>c9[i];function fL(i,t){let e=uL(i);return e!==c2&&(e=Gf),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const u9=new Set(["auto","none","0"]);function f9(i,t,e){let n=0,a;for(;n<i.length&&!a;){const s=i[n];typeof s=="string"&&!u9.has(s)&&_0(s).values.length&&(a=i[n]),n++}if(a&&e)for(const s of t)i[s]=fL(e,a)}class h9 extends kM{constructor(t,e,n,a,s){super(t,e,n,a,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:n}=this;if(!e||!e.current)return;super.readKeyframes();for(let f=0;f<t.length;f++){let d=t[f];if(typeof d=="string"&&(d=d.trim(),OM(d))){const g=rL(d,e.current);g!==void 0&&(t[f]=g),f===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!oL.has(n)||t.length!==2)return;const[a,s]=t,o=B3(a),c=B3(s);if(o!==c)if(U3(o)&&U3(c))for(let f=0;f<t.length;f++){const d=t[f];typeof d=="string"&&(t[f]=parseFloat(d))}else id[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,n=[];for(let a=0;a<t.length;a++)(t[a]===null||a9(t[a]))&&n.push(a);n.length&&f9(t,n,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=id[n](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const a=e[e.length-1];a!==void 0&&t.getValue(n,a).jump(a,!1)}measureEndState(){const{element:t,name:e,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const a=t.getValue(e);a&&a.jump(this.measuredOrigin,!1);const s=n.length-1,o=n[s];n[s]=id[e](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,f])=>{t.getValue(c).set(f)}),this.resolveNoneKeyframes()}}function d9(i,t,e){if(i instanceof EventTarget)return[i];if(typeof i=="string"){let n=document;const a=e?.[i]??n.querySelectorAll(i);return a?Array.from(a):[]}return Array.from(i)}const hL=(i,t)=>t&&typeof i=="number"?t.transform(i):i;function dL(i){return CD(i)&&"offsetHeight"in i}const k3=30,p9=i=>!isNaN(parseFloat(i));class m9{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const a=so.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=so.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=p9(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new RM);const n=this.events[t].add(e);return t==="change"?()=>{n(),na.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,n){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=so.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>k3)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,k3);return DD(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Jp(i,t){return new m9(i,t)}const{schedule:GM}=VD(queueMicrotask,!1),Zl={x:!1,y:!1};function pL(){return Zl.x||Zl.y}function g9(i){return i==="x"||i==="y"?Zl[i]?null:(Zl[i]=!0,()=>{Zl[i]=!1}):Zl.x||Zl.y?null:(Zl.x=Zl.y=!0,()=>{Zl.x=Zl.y=!1})}function mL(i,t){const e=d9(i),n=new AbortController,a={passive:!0,...t,signal:n.signal};return[e,a,()=>n.abort()]}function V3(i){return!(i.pointerType==="touch"||pL())}function v9(i,t,e={}){const[n,a,s]=mL(i,e),o=c=>{if(!V3(c))return;const{target:f}=c,d=t(f,c);if(typeof d!="function"||!f)return;const g=y=>{V3(y)&&(d(y),f.removeEventListener("pointerleave",g))};f.addEventListener("pointerleave",g,a)};return n.forEach(c=>{c.addEventListener("pointerenter",o,a)}),s}const gL=(i,t)=>t?i===t?!0:gL(i,t.parentElement):!1,jM=i=>i.pointerType==="mouse"?typeof i.button!="number"||i.button<=0:i.isPrimary!==!1,y9=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function _9(i){return y9.has(i.tagName)||i.tabIndex!==-1}const $y=new WeakSet;function H3(i){return t=>{t.key==="Enter"&&i(t)}}function ob(i,t){i.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const x9=(i,t)=>{const e=i.currentTarget;if(!e)return;const n=H3(()=>{if($y.has(e))return;ob(e,"down");const a=H3(()=>{ob(e,"up")}),s=()=>ob(e,"cancel");e.addEventListener("keyup",a,t),e.addEventListener("blur",s,t)});e.addEventListener("keydown",n,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",n),t)};function G3(i){return jM(i)&&!pL()}function S9(i,t,e={}){const[n,a,s]=mL(i,e),o=c=>{const f=c.currentTarget;if(!G3(c))return;$y.add(f);const d=t(f,c),g=(b,T)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",x),$y.has(f)&&$y.delete(f),G3(b)&&typeof d=="function"&&d(b,{success:T})},y=b=>{g(b,f===window||f===document||e.useGlobalTarget||gL(f,b.target))},x=b=>{g(b,!1)};window.addEventListener("pointerup",y,a),window.addEventListener("pointercancel",x,a)};return n.forEach(c=>{(e.useGlobalTarget?window:c).addEventListener("pointerdown",o,a),dL(c)&&(c.addEventListener("focus",d=>x9(d,a)),!_9(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),s}function vL(i){return CD(i)&&"ownerSVGElement"in i}function b9(i){return vL(i)&&i.tagName==="svg"}const rr=i=>!!(i&&i.getVelocity),M9=[...cL,Ka,Gf],T9=i=>M9.find(lL(i)),WM=ct.createContext({transformPagePoint:i=>i,isStatic:!1,reducedMotion:"never"});function j3(i,t){if(typeof i=="function")return i(t);i!=null&&(i.current=t)}function A9(...i){return t=>{let e=!1;const n=i.map(a=>{const s=j3(a,t);return!e&&typeof s=="function"&&(e=!0),s});if(e)return()=>{for(let a=0;a<n.length;a++){const s=n[a];typeof s=="function"?s():j3(i[a],null)}}}}function E9(...i){return ct.useCallback(A9(...i),i)}class w9 extends ct.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const n=e.offsetParent,a=dL(n)&&n.offsetWidth||0,s=this.props.sizeRef.current;s.height=e.offsetHeight||0,s.width=e.offsetWidth||0,s.top=e.offsetTop,s.left=e.offsetLeft,s.right=a-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function C9({children:i,isPresent:t,anchorX:e,root:n}){const a=ct.useId(),s=ct.useRef(null),o=ct.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=ct.useContext(WM),f=E9(s,i?.ref);return ct.useInsertionEffect(()=>{const{width:d,height:g,top:y,left:x,right:b}=o.current;if(t||!s.current||!d||!g)return;const T=e==="left"?`left: ${x}`:`right: ${b}`;s.current.dataset.motionPopId=a;const R=document.createElement("style");c&&(R.nonce=c);const C=n??document.head;return C.appendChild(R),R.sheet&&R.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${g}px !important;
            ${T}px !important;
            top: ${y}px !important;
          }
        `),()=>{C.contains(R)&&C.removeChild(R)}},[t]),O.jsx(w9,{isPresent:t,childRef:s,sizeRef:o,children:ct.cloneElement(i,{ref:f})})}const R9=({children:i,initial:t,isPresent:e,onExitComplete:n,custom:a,presenceAffectsLayout:s,mode:o,anchorX:c,root:f})=>{const d=MM(D9),g=ct.useId();let y=!0,x=ct.useMemo(()=>(y=!1,{id:g,initial:t,isPresent:e,custom:a,onExitComplete:b=>{d.set(b,!0);for(const T of d.values())if(!T)return;n&&n()},register:b=>(d.set(b,!1),()=>d.delete(b))}),[e,d,n]);return s&&y&&(x={...x}),ct.useMemo(()=>{d.forEach((b,T)=>d.set(T,!1))},[e]),ct.useEffect(()=>{!e&&!d.size&&n&&n()},[e]),o==="popLayout"&&(i=O.jsx(C9,{isPresent:e,anchorX:c,root:f,children:i})),O.jsx(Q1.Provider,{value:x,children:i})};function D9(){return new Map}function yL(i=!0){const t=ct.useContext(Q1);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:a}=t,s=ct.useId();ct.useEffect(()=>{if(i)return a(s)},[i]);const o=ct.useCallback(()=>i&&n&&n(s),[s,n,i]);return!e&&n?[!1,o]:[!0]}const zy=i=>i.key||"";function W3(i){const t=[];return ct.Children.forEach(i,e=>{ct.isValidElement(e)&&t.push(e)}),t}const ls=({children:i,custom:t,initial:e=!0,onExitComplete:n,presenceAffectsLayout:a=!0,mode:s="sync",propagate:o=!1,anchorX:c="left",root:f})=>{const[d,g]=yL(o),y=ct.useMemo(()=>W3(i),[i]),x=o&&!d?[]:y.map(zy),b=ct.useRef(!0),T=ct.useRef(y),R=MM(()=>new Map),[C,w]=ct.useState(y),[N,I]=ct.useState(y);ED(()=>{b.current=!1,T.current=y;for(let H=0;H<N.length;H++){const q=zy(N[H]);x.includes(q)?R.delete(q):R.get(q)!==!0&&R.set(q,!1)}},[N,x.length,x.join("-")]);const z=[];if(y!==C){let H=[...y];for(let q=0;q<N.length;q++){const Z=N[q],B=zy(Z);x.includes(B)||(H.splice(q,0,Z),z.push(Z))}return s==="wait"&&z.length&&(H=z),I(W3(H)),w(y),null}const{forceRender:F}=ct.useContext(bM);return O.jsx(O.Fragment,{children:N.map(H=>{const q=zy(H),Z=o&&!d?!1:y===N||x.includes(q),B=()=>{if(R.has(q))R.set(q,!0);else return;let V=!0;R.forEach(Q=>{Q||(V=!1)}),V&&(F?.(),I(T.current),o&&g?.(),n&&n())};return O.jsx(R9,{isPresent:Z,initial:!b.current||e?void 0:!1,custom:t,presenceAffectsLayout:a,mode:s,root:f,onExitComplete:Z?void 0:B,anchorX:c,children:H},q)})})},_L=ct.createContext({strict:!1}),q3={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},$p={};for(const i in q3)$p[i]={isEnabled:t=>q3[i].some(e=>!!t[e])};function L9(i){for(const t in i)$p[t]={...$p[t],...i[t]}}const O9=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function e1(i){return i.startsWith("while")||i.startsWith("drag")&&i!=="draggable"||i.startsWith("layout")||i.startsWith("onTap")||i.startsWith("onPan")||i.startsWith("onLayout")||O9.has(i)}let xL=i=>!e1(i);function N9(i){typeof i=="function"&&(xL=t=>t.startsWith("on")?!e1(t):i(t))}try{N9(require("@emotion/is-prop-valid").default)}catch{}function U9(i,t,e){const n={};for(const a in i)a==="values"&&typeof i.values=="object"||(xL(a)||e===!0&&e1(a)||!t&&!e1(a)||i.draggable&&a.startsWith("onDrag"))&&(n[a]=i[a]);return n}const J1=ct.createContext({});function $1(i){return i!==null&&typeof i=="object"&&typeof i.start=="function"}function x0(i){return typeof i=="string"||Array.isArray(i)}const qM=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],XM=["initial",...qM];function tx(i){return $1(i.animate)||XM.some(t=>x0(i[t]))}function SL(i){return!!(tx(i)||i.variants)}function I9(i,t){if(tx(i)){const{initial:e,animate:n}=i;return{initial:e===!1||x0(e)?e:void 0,animate:x0(n)?n:void 0}}return i.inherit!==!1?t:{}}function P9(i){const{initial:t,animate:e}=I9(i,ct.useContext(J1));return ct.useMemo(()=>({initial:t,animate:e}),[X3(t),X3(e)])}function X3(i){return Array.isArray(i)?i.join(" "):i}function Y3(i,t){return t.max===t.min?0:i/(t.max-t.min)*100}const Eg={correct:(i,t)=>{if(!t.target)return i;if(typeof i=="string")if(vn.test(i))i=parseFloat(i);else return i;const e=Y3(i,t.target.x),n=Y3(i,t.target.y);return`${e}% ${n}%`}},z9={correct:(i,{treeScale:t,projectionDelta:e})=>{const n=i,a=Gf.parse(i);if(a.length>5)return n;const s=Gf.createTransformer(i),o=typeof a[0]!="number"?1:0,c=e.x.scale*t.x,f=e.y.scale*t.y;a[0+o]/=c,a[1+o]/=f;const d=da(c,f,.5);return typeof a[2+o]=="number"&&(a[2+o]/=d),typeof a[3+o]=="number"&&(a[3+o]/=d),s(a)}},u2={borderRadius:{...Eg,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Eg,borderTopRightRadius:Eg,borderBottomLeftRadius:Eg,borderBottomRightRadius:Eg,boxShadow:z9};function bL(i,{layout:t,layoutId:e}){return cm.has(i)||i.startsWith("origin")||(t||e!==void 0)&&(!!u2[i]||i==="opacity")}const B9={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},F9=lm.length;function k9(i,t,e){let n="",a=!0;for(let s=0;s<F9;s++){const o=lm[s],c=i[o];if(c===void 0)continue;let f=!0;if(typeof c=="number"?f=c===(o.startsWith("scale")?1:0):f=parseFloat(c)===0,!f||e){const d=hL(c,HM[o]);if(!f){a=!1;const g=B9[o]||o;n+=`${g}(${d}) `}e&&(t[o]=d)}}return n=n.trim(),e?n=e(t,a?"":n):a&&(n="none"),n}function YM(i,t,e){const{style:n,vars:a,transformOrigin:s}=i;let o=!1,c=!1;for(const f in t){const d=t[f];if(cm.has(f)){o=!0;continue}else if(GD(f)){a[f]=d;continue}else{const g=hL(d,HM[f]);f.startsWith("origin")?(c=!0,s[f]=g):n[f]=g}}if(t.transform||(o||e?n.transform=k9(t,i.transform,e):n.transform&&(n.transform="none")),c){const{originX:f="50%",originY:d="50%",originZ:g=0}=s;n.transformOrigin=`${f} ${d} ${g}`}}const ZM=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ML(i,t,e){for(const n in t)!rr(t[n])&&!bL(n,e)&&(i[n]=t[n])}function V9({transformTemplate:i},t){return ct.useMemo(()=>{const e=ZM();return YM(e,t,i),Object.assign({},e.vars,e.style)},[t])}function H9(i,t){const e=i.style||{},n={};return ML(n,e,i),Object.assign(n,V9(i,t)),n}function G9(i,t){const e={},n=H9(i,t);return i.drag&&i.dragListener!==!1&&(e.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=i.drag===!0?"none":`pan-${i.drag==="x"?"y":"x"}`),i.tabIndex===void 0&&(i.onTap||i.onTapStart||i.whileTap)&&(e.tabIndex=0),e.style=n,e}const j9={offset:"stroke-dashoffset",array:"stroke-dasharray"},W9={offset:"strokeDashoffset",array:"strokeDasharray"};function q9(i,t,e=1,n=0,a=!0){i.pathLength=1;const s=a?j9:W9;i[s.offset]=vn.transform(-n);const o=vn.transform(t),c=vn.transform(e);i[s.array]=`${o} ${c}`}function TL(i,{attrX:t,attrY:e,attrScale:n,pathLength:a,pathSpacing:s=1,pathOffset:o=0,...c},f,d,g){if(YM(i,c,d),f){i.style.viewBox&&(i.attrs.viewBox=i.style.viewBox);return}i.attrs=i.style,i.style={};const{attrs:y,style:x}=i;y.transform&&(x.transform=y.transform,delete y.transform),(x.transform||y.transformOrigin)&&(x.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),x.transform&&(x.transformBox=g?.transformBox??"fill-box",delete y.transformBox),t!==void 0&&(y.x=t),e!==void 0&&(y.y=e),n!==void 0&&(y.scale=n),a!==void 0&&q9(y,a,s,o,!1)}const AL=()=>({...ZM(),attrs:{}}),EL=i=>typeof i=="string"&&i.toLowerCase()==="svg";function X9(i,t,e,n){const a=ct.useMemo(()=>{const s=AL();return TL(s,t,EL(n),i.transformTemplate,i.style),{...s.attrs,style:{...s.style}}},[t]);if(i.style){const s={};ML(s,i.style,i),a.style={...s,...a.style}}return a}const Y9=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function KM(i){return typeof i!="string"||i.includes("-")?!1:!!(Y9.indexOf(i)>-1||/[A-Z]/u.test(i))}function Z9(i,t,e,{latestValues:n},a,s=!1){const c=(KM(i)?X9:G9)(t,n,a,i),f=U9(t,typeof i=="string",s),d=i!==ct.Fragment?{...f,...c,ref:e}:{},{children:g}=t,y=ct.useMemo(()=>rr(g)?g.get():g,[g]);return ct.createElement(i,{...d,children:y})}function Z3(i){const t=[{},{}];return i?.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function QM(i,t,e,n){if(typeof t=="function"){const[a,s]=Z3(n);t=t(e!==void 0?e:i.custom,a,s)}if(typeof t=="string"&&(t=i.variants&&i.variants[t]),typeof t=="function"){const[a,s]=Z3(n);t=t(e!==void 0?e:i.custom,a,s)}return t}function t_(i){return rr(i)?i.get():i}function K9({scrapeMotionValuesFromProps:i,createRenderState:t},e,n,a){return{latestValues:Q9(e,n,a,i),renderState:t()}}function Q9(i,t,e,n){const a={},s=n(i,{});for(const x in s)a[x]=t_(s[x]);let{initial:o,animate:c}=i;const f=tx(i),d=SL(i);t&&d&&!f&&i.inherit!==!1&&(o===void 0&&(o=t.initial),c===void 0&&(c=t.animate));let g=e?e.initial===!1:!1;g=g||o===!1;const y=g?c:o;if(y&&typeof y!="boolean"&&!$1(y)){const x=Array.isArray(y)?y:[y];for(let b=0;b<x.length;b++){const T=QM(i,x[b]);if(T){const{transitionEnd:R,transition:C,...w}=T;for(const N in w){let I=w[N];if(Array.isArray(I)){const z=g?I.length-1:0;I=I[z]}I!==null&&(a[N]=I)}for(const N in R)a[N]=R[N]}}}return a}const wL=i=>(t,e)=>{const n=ct.useContext(J1),a=ct.useContext(Q1),s=()=>K9(i,t,n,a);return e?s():MM(s)};function JM(i,t,e){const{style:n}=i,a={};for(const s in n)(rr(n[s])||t.style&&rr(t.style[s])||bL(s,i)||e?.getValue(s)?.liveStyle!==void 0)&&(a[s]=n[s]);return a}const J9=wL({scrapeMotionValuesFromProps:JM,createRenderState:ZM});function CL(i,t,e){const n=JM(i,t,e);for(const a in i)if(rr(i[a])||rr(t[a])){const s=lm.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;n[s]=i[a]}return n}const $9=wL({scrapeMotionValuesFromProps:CL,createRenderState:AL}),t7=Symbol.for("motionComponentSymbol");function Up(i){return i&&typeof i=="object"&&Object.prototype.hasOwnProperty.call(i,"current")}function e7(i,t,e){return ct.useCallback(n=>{n&&i.onMount&&i.onMount(n),t&&(n?t.mount(n):t.unmount()),e&&(typeof e=="function"?e(n):Up(e)&&(e.current=n))},[t])}const $M=i=>i.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),n7="framerAppearId",RL="data-"+$M(n7),DL=ct.createContext({});function i7(i,t,e,n,a){const{visualElement:s}=ct.useContext(J1),o=ct.useContext(_L),c=ct.useContext(Q1),f=ct.useContext(WM).reducedMotion,d=ct.useRef(null);n=n||o.renderer,!d.current&&n&&(d.current=n(i,{visualState:t,parent:s,props:e,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:f}));const g=d.current,y=ct.useContext(DL);g&&!g.projection&&a&&(g.type==="html"||g.type==="svg")&&a7(d.current,e,a,y);const x=ct.useRef(!1);ct.useInsertionEffect(()=>{g&&x.current&&g.update(e,c)});const b=e[RL],T=ct.useRef(!!b&&!window.MotionHandoffIsComplete?.(b)&&window.MotionHasOptimisedAnimation?.(b));return ED(()=>{g&&(x.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),T.current&&g.animationState&&g.animationState.animateChanges())}),ct.useEffect(()=>{g&&(!T.current&&g.animationState&&g.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(b)}),T.current=!1),g.enteringChildren=void 0)}),g}function a7(i,t,e,n){const{layoutId:a,layout:s,drag:o,dragConstraints:c,layoutScroll:f,layoutRoot:d,layoutCrossfade:g}=t;i.projection=new e(i.latestValues,t["data-framer-portal-id"]?void 0:LL(i.parent)),i.projection.setOptions({layoutId:a,layout:s,alwaysMeasureLayout:!!o||c&&Up(c),visualElement:i,animationType:typeof s=="string"?s:"both",initialPromotionConfig:n,crossfade:g,layoutScroll:f,layoutRoot:d})}function LL(i){if(i)return i.options.allowProjection!==!1?i.projection:LL(i.parent)}function lb(i,{forwardMotionProps:t=!1}={},e,n){e&&L9(e);const a=KM(i)?$9:J9;function s(c,f){let d;const g={...ct.useContext(WM),...c,layoutId:s7(c)},{isStatic:y}=g,x=P9(c),b=a(c,y);if(!y&&TM){r7();const T=o7(g);d=T.MeasureLayout,x.visualElement=i7(i,b,g,n,T.ProjectionNode)}return O.jsxs(J1.Provider,{value:x,children:[d&&x.visualElement?O.jsx(d,{visualElement:x.visualElement,...g}):null,Z9(i,c,e7(b,x.visualElement,f),b,y,t)]})}s.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const o=ct.forwardRef(s);return o[t7]=i,o}function s7({layoutId:i}){const t=ct.useContext(bM).id;return t&&i!==void 0?t+"-"+i:i}function r7(i,t){ct.useContext(_L).strict}function o7(i){const{drag:t,layout:e}=$p;if(!t&&!e)return{};const n={...t,...e};return{MeasureLayout:t?.isEnabled(i)||e?.isEnabled(i)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function l7(i,t){if(typeof Proxy>"u")return lb;const e=new Map,n=(s,o)=>lb(s,o,i,t),a=(s,o)=>n(s,o);return new Proxy(a,{get:(s,o)=>o==="create"?n:(e.has(o)||e.set(o,lb(o,void 0,i,t)),e.get(o))})}function OL({top:i,left:t,right:e,bottom:n}){return{x:{min:t,max:e},y:{min:i,max:n}}}function c7({x:i,y:t}){return{top:t.min,right:i.max,bottom:t.max,left:i.min}}function u7(i,t){if(!t)return i;const e=t({x:i.left,y:i.top}),n=t({x:i.right,y:i.bottom});return{top:e.y,left:e.x,bottom:n.y,right:n.x}}function cb(i){return i===void 0||i===1}function f2({scale:i,scaleX:t,scaleY:e}){return!cb(i)||!cb(t)||!cb(e)}function Wh(i){return f2(i)||NL(i)||i.z||i.rotate||i.rotateX||i.rotateY||i.skewX||i.skewY}function NL(i){return K3(i.x)||K3(i.y)}function K3(i){return i&&i!=="0%"}function n1(i,t,e){const n=i-e,a=t*n;return e+a}function Q3(i,t,e,n,a){return a!==void 0&&(i=n1(i,a,n)),n1(i,e,n)+t}function h2(i,t=0,e=1,n,a){i.min=Q3(i.min,t,e,n,a),i.max=Q3(i.max,t,e,n,a)}function UL(i,{x:t,y:e}){h2(i.x,t.translate,t.scale,t.originPoint),h2(i.y,e.translate,e.scale,e.originPoint)}const J3=.999999999999,$3=1.0000000000001;function f7(i,t,e,n=!1){const a=e.length;if(!a)return;t.x=t.y=1;let s,o;for(let c=0;c<a;c++){s=e[c],o=s.projectionDelta;const{visualElement:f}=s.options;f&&f.props.style&&f.props.style.display==="contents"||(n&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Pp(i,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,UL(i,o)),n&&Wh(s.latestValues)&&Pp(i,s.latestValues))}t.x<$3&&t.x>J3&&(t.x=1),t.y<$3&&t.y>J3&&(t.y=1)}function Ip(i,t){i.min=i.min+t,i.max=i.max+t}function tw(i,t,e,n,a=.5){const s=da(i.min,i.max,a);h2(i,t,e,s,n)}function Pp(i,t){tw(i.x,t.x,t.scaleX,t.scale,t.originX),tw(i.y,t.y,t.scaleY,t.scale,t.originY)}function IL(i,t){return OL(u7(i.getBoundingClientRect(),t))}function h7(i,t,e){const n=IL(i,e),{scroll:a}=t;return a&&(Ip(n.x,a.offset.x),Ip(n.y,a.offset.y)),n}const ew=()=>({translate:0,scale:1,origin:0,originPoint:0}),zp=()=>({x:ew(),y:ew()}),nw=()=>({min:0,max:0}),os=()=>({x:nw(),y:nw()}),d2={current:null},PL={current:!1};function d7(){if(PL.current=!0,!!TM)if(window.matchMedia){const i=window.matchMedia("(prefers-reduced-motion)"),t=()=>d2.current=i.matches;i.addEventListener("change",t),t()}else d2.current=!1}const p7=new WeakMap;function m7(i,t,e){for(const n in t){const a=t[n],s=e[n];if(rr(a))i.addValue(n,a);else if(rr(s))i.addValue(n,Jp(a,{owner:i}));else if(s!==a)if(i.hasValue(n)){const o=i.getValue(n);o.liveStyle===!0?o.jump(a):o.hasAnimated||o.set(a)}else{const o=i.getStaticValue(n);i.addValue(n,Jp(o!==void 0?o:a,{owner:i}))}}for(const n in e)t[n]===void 0&&i.removeValue(n);return t}const iw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class g7{scrapeMotionValuesFromProps(t,e,n){return{}}constructor({parent:t,props:e,presenceContext:n,reducedMotionConfig:a,blockInitialAnimation:s,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=kM,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=so.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,na.render(this.render,!1,!0))};const{latestValues:f,renderState:d}=o;this.latestValues=f,this.baseTarget={...f},this.initialValues=e.initial?{...f}:{},this.renderState=d,this.parent=t,this.props=e,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=c,this.blockInitialAnimation=!!s,this.isControllingVariants=tx(e),this.isVariantNode=SL(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:g,...y}=this.scrapeMotionValuesFromProps(e,{},this);for(const x in y){const b=y[x];f[x]!==void 0&&rr(b)&&b.set(f[x])}}mount(t){this.current=t,p7.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,n)=>this.bindToMotionValue(n,e)),PL.current||d7(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:d2.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Hf(this.notifyUpdate),Hf(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=cm.has(t);n&&this.onBindTransform&&this.onBindTransform();const a=e.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&na.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{a(),s&&s(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in $p){const e=$p[t];if(!e)continue;const{isEnabled:n,Feature:a}=e;if(!this.features[t]&&a&&n(this.props)&&(this.features[t]=new a(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):os()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let n=0;n<iw.length;n++){const a=iw[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const s="on"+a,o=t[s];o&&(this.propEventSubscriptions[a]=this.on(a,o))}this.prevMotionValues=m7(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const n=this.values.get(t);e!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&e!==void 0&&(n=Jp(e===null?void 0:e,{owner:this}),this.addValue(t,n)),n}readValue(t,e){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(wD(n)||RD(n))?n=parseFloat(n):!T9(n)&&Gf.test(e)&&(n=fL(t,e)),this.setBaseTarget(t,rr(n)?n.get():n)),rr(n)?n.get():n}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){const{initial:e}=this.props;let n;if(typeof e=="string"||typeof e=="object"){const s=QM(this.props,e,this.presenceContext?.custom);s&&(n=s[t])}if(e&&n!==void 0)return n;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!rr(a)?a:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new RM),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){GM.render(this.render)}}class zL extends g7{constructor(){super(...arguments),this.KeyframeResolver=h9}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:n}){delete e[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;rr(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function BL(i,{style:t,vars:e},n,a){const s=i.style;let o;for(o in t)s[o]=t[o];a?.applyProjectionStyles(s,n);for(o in e)s.setProperty(o,e[o])}function v7(i){return window.getComputedStyle(i)}class y7 extends zL{constructor(){super(...arguments),this.type="html",this.renderInstance=BL}readValueFromInstance(t,e){if(cm.has(e))return this.projection?.isProjecting?i2(e):LH(t,e);{const n=v7(t),a=(GD(e)?n.getPropertyValue(e):n[e])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:e}){return IL(t,e)}build(t,e,n){YM(t,e,n.transformTemplate)}scrapeMotionValuesFromProps(t,e,n){return JM(t,e,n)}}const FL=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function _7(i,t,e,n){BL(i,t,void 0,n);for(const a in t.attrs)i.setAttribute(FL.has(a)?a:$M(a),t.attrs[a])}class x7 extends zL{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=os}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(cm.has(e)){const n=uL(e);return n&&n.default||0}return e=FL.has(e)?e:$M(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,n){return CL(t,e,n)}build(t,e,n){TL(t,e,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,e,n,a){_7(t,e,n,a)}mount(t){this.isSVGTag=EL(t.tagName),super.mount(t)}}const S7=(i,t)=>KM(i)?new x7(t):new y7(t,{allowProjection:i!==ct.Fragment});function Vp(i,t,e){const n=i.getProps();return QM(n,t,e!==void 0?e:n.custom,i)}const p2=i=>Array.isArray(i);function b7(i,t,e){i.hasValue(t)?i.getValue(t).set(e):i.addValue(t,Jp(e))}function M7(i){return p2(i)?i[i.length-1]||0:i}function T7(i,t){const e=Vp(i,t);let{transitionEnd:n={},transition:a={},...s}=e||{};s={...s,...n};for(const o in s){const c=M7(s[o]);b7(i,o,c)}}function A7(i){return!!(rr(i)&&i.add)}function m2(i,t){const e=i.getValue("willChange");if(A7(e))return e.add(t);if(!e&&Pu.WillChange){const n=new Pu.WillChange("auto");i.addValue("willChange",n),n.add(t)}}function kL(i){return i.props[RL]}const E7=i=>i!==null;function w7(i,{repeat:t,repeatType:e="loop"},n){const a=i.filter(E7),s=t&&e!=="loop"&&t%2===1?0:a.length-1;return a[s]}const C7={type:"spring",stiffness:500,damping:25,restSpeed:10},R7=i=>({type:"spring",stiffness:550,damping:i===0?2*Math.sqrt(550):30,restSpeed:10}),D7={type:"keyframes",duration:.8},L7={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},O7=(i,{keyframes:t})=>t.length>2?D7:cm.has(i)?i.startsWith("scale")?R7(t[1]):C7:L7;function N7({when:i,delay:t,delayChildren:e,staggerChildren:n,staggerDirection:a,repeat:s,repeatType:o,repeatDelay:c,from:f,elapsed:d,...g}){return!!Object.keys(g).length}const tT=(i,t,e,n={},a,s)=>o=>{const c=VM(n,i)||{},f=c.delay||n.delay||0;let{elapsed:d=0}=n;d=d-Bc(f);const g={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...c,delay:-d,onUpdate:x=>{t.set(x),c.onUpdate&&c.onUpdate(x)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:i,motionValue:t,element:s?void 0:a};N7(c)||Object.assign(g,O7(i,g)),g.duration&&(g.duration=Bc(g.duration)),g.repeatDelay&&(g.repeatDelay=Bc(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let y=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(l2(g),g.delay===0&&(y=!0)),(Pu.instantAnimations||Pu.skipAnimations)&&(y=!0,l2(g),g.delay=0),g.allowFlatten=!c.type&&!c.ease,y&&!s&&t.get()!==void 0){const x=w7(g.keyframes,c);if(x!==void 0){na.update(()=>{g.onUpdate(x),g.onComplete()});return}}return c.isSync?new FM(g):new t9(g)};function U7({protectedKeys:i,needsAnimating:t},e){const n=i.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,n}function VL(i,t,{delay:e=0,transitionOverride:n,type:a}={}){let{transition:s=i.getDefaultTransition(),transitionEnd:o,...c}=t;n&&(s=n);const f=[],d=a&&i.animationState&&i.animationState.getState()[a];for(const g in c){const y=i.getValue(g,i.latestValues[g]??null),x=c[g];if(x===void 0||d&&U7(d,g))continue;const b={delay:e,...VM(s||{},g)},T=y.get();if(T!==void 0&&!y.isAnimating&&!Array.isArray(x)&&x===T&&!b.velocity)continue;let R=!1;if(window.MotionHandoffAnimation){const w=kL(i);if(w){const N=window.MotionHandoffAnimation(w,g,na);N!==null&&(b.startTime=N,R=!0)}}m2(i,g),y.start(tT(g,y,x,i.shouldReduceMotion&&oL.has(g)?{type:!1}:b,i,R));const C=y.animation;C&&f.push(C)}return o&&Promise.all(f).then(()=>{na.update(()=>{o&&T7(i,o)})}),f}function HL(i,t,e,n=0,a=1){const s=Array.from(i).sort((d,g)=>d.sortNodePosition(g)).indexOf(t),o=i.size,c=(o-1)*n;return typeof e=="function"?e(s,o):a===1?s*n:c-s*n}function g2(i,t,e={}){const n=Vp(i,t,e.type==="exit"?i.presenceContext?.custom:void 0);let{transition:a=i.getDefaultTransition()||{}}=n||{};e.transitionOverride&&(a=e.transitionOverride);const s=n?()=>Promise.all(VL(i,n,e)):()=>Promise.resolve(),o=i.variantChildren&&i.variantChildren.size?(f=0)=>{const{delayChildren:d=0,staggerChildren:g,staggerDirection:y}=a;return I7(i,t,f,d,g,y,e)}:()=>Promise.resolve(),{when:c}=a;if(c){const[f,d]=c==="beforeChildren"?[s,o]:[o,s];return f().then(()=>d())}else return Promise.all([s(),o(e.delay)])}function I7(i,t,e=0,n=0,a=0,s=1,o){const c=[];for(const f of i.variantChildren)f.notify("AnimationStart",t),c.push(g2(f,t,{...o,delay:e+(typeof n=="function"?0:n)+HL(i.variantChildren,f,n,a,s)}).then(()=>f.notify("AnimationComplete",t)));return Promise.all(c)}function P7(i,t,e={}){i.notify("AnimationStart",t);let n;if(Array.isArray(t)){const a=t.map(s=>g2(i,s,e));n=Promise.all(a)}else if(typeof t=="string")n=g2(i,t,e);else{const a=typeof t=="function"?Vp(i,t,e.custom):t;n=Promise.all(VL(i,a,e))}return n.then(()=>{i.notify("AnimationComplete",t)})}function GL(i,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==i.length)return!1;for(let n=0;n<e;n++)if(t[n]!==i[n])return!1;return!0}const z7=XM.length;function jL(i){if(!i)return;if(!i.isControllingVariants){const e=i.parent?jL(i.parent)||{}:{};return i.props.initial!==void 0&&(e.initial=i.props.initial),e}const t={};for(let e=0;e<z7;e++){const n=XM[e],a=i.props[n];(x0(a)||a===!1)&&(t[n]=a)}return t}const B7=[...qM].reverse(),F7=qM.length;function k7(i){return t=>Promise.all(t.map(({animation:e,options:n})=>P7(i,e,n)))}function V7(i){let t=k7(i),e=aw(),n=!0;const a=f=>(d,g)=>{const y=Vp(i,g,f==="exit"?i.presenceContext?.custom:void 0);if(y){const{transition:x,transitionEnd:b,...T}=y;d={...d,...T,...b}}return d};function s(f){t=f(i)}function o(f){const{props:d}=i,g=jL(i.parent)||{},y=[],x=new Set;let b={},T=1/0;for(let C=0;C<F7;C++){const w=B7[C],N=e[w],I=d[w]!==void 0?d[w]:g[w],z=x0(I),F=w===f?N.isActive:null;F===!1&&(T=C);let H=I===g[w]&&I!==d[w]&&z;if(H&&n&&i.manuallyAnimateOnMount&&(H=!1),N.protectedKeys={...b},!N.isActive&&F===null||!I&&!N.prevProp||$1(I)||typeof I=="boolean")continue;const q=H7(N.prevProp,I);let Z=q||w===f&&N.isActive&&!H&&z||C>T&&z,B=!1;const V=Array.isArray(I)?I:[I];let Q=V.reduce(a(w),{});F===!1&&(Q={});const{prevResolvedValues:J={}}=N,rt={...J,...Q},ut=K=>{Z=!0,x.has(K)&&(B=!0,x.delete(K)),N.needsAnimating[K]=!0;const et=i.getValue(K);et&&(et.liveStyle=!1)};for(const K in rt){const et=Q[K],dt=J[K];if(b.hasOwnProperty(K))continue;let lt=!1;p2(et)&&p2(dt)?lt=!GL(et,dt):lt=et!==dt,lt?et!=null?ut(K):x.add(K):et!==void 0&&x.has(K)?ut(K):N.protectedKeys[K]=!0}N.prevProp=I,N.prevResolvedValues=Q,N.isActive&&(b={...b,...Q}),n&&i.blockInitialAnimation&&(Z=!1);const vt=H&&q;Z&&(!vt||B)&&y.push(...V.map(K=>{const et={type:w};if(typeof K=="string"&&n&&!vt&&i.manuallyAnimateOnMount&&i.parent){const{parent:dt}=i,lt=Vp(dt,K);if(dt.enteringChildren&&lt){const{delayChildren:G}=lt.transition||{};et.delay=HL(dt.enteringChildren,i,G)}}return{animation:K,options:et}}))}if(x.size){const C={};if(typeof d.initial!="boolean"){const w=Vp(i,Array.isArray(d.initial)?d.initial[0]:d.initial);w&&w.transition&&(C.transition=w.transition)}x.forEach(w=>{const N=i.getBaseTarget(w),I=i.getValue(w);I&&(I.liveStyle=!0),C[w]=N??null}),y.push({animation:C})}let R=!!y.length;return n&&(d.initial===!1||d.initial===d.animate)&&!i.manuallyAnimateOnMount&&(R=!1),n=!1,R?t(y):Promise.resolve()}function c(f,d){if(e[f].isActive===d)return Promise.resolve();i.variantChildren?.forEach(y=>y.animationState?.setActive(f,d)),e[f].isActive=d;const g=o(f);for(const y in e)e[y].protectedKeys={};return g}return{animateChanges:o,setActive:c,setAnimateFunction:s,getState:()=>e,reset:()=>{e=aw()}}}function H7(i,t){return typeof t=="string"?t!==i:Array.isArray(t)?!GL(t,i):!1}function Vh(i=!1){return{isActive:i,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function aw(){return{animate:Vh(!0),whileInView:Vh(),whileHover:Vh(),whileTap:Vh(),whileDrag:Vh(),whileFocus:Vh(),exit:Vh()}}class Xf{constructor(t){this.isMounted=!1,this.node=t}update(){}}class G7 extends Xf{constructor(t){super(t),t.animationState||(t.animationState=V7(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();$1(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let j7=0;class W7 extends Xf{constructor(){super(...arguments),this.id=j7++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const a=this.node.animationState.setActive("exit",!t);e&&!t&&a.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const q7={animation:{Feature:G7},exit:{Feature:W7}};function S0(i,t,e,n={passive:!0}){return i.addEventListener(t,e,n),()=>i.removeEventListener(t,e)}function F0(i){return{point:{x:i.pageX,y:i.pageY}}}const X7=i=>t=>jM(t)&&i(t,F0(t));function Kg(i,t,e,n){return S0(i,t,X7(e),n)}const WL=1e-4,Y7=1-WL,Z7=1+WL,qL=.01,K7=0-qL,Q7=0+qL;function kr(i){return i.max-i.min}function J7(i,t,e){return Math.abs(i-t)<=e}function sw(i,t,e,n=.5){i.origin=n,i.originPoint=da(t.min,t.max,i.origin),i.scale=kr(e)/kr(t),i.translate=da(e.min,e.max,i.origin)-i.originPoint,(i.scale>=Y7&&i.scale<=Z7||isNaN(i.scale))&&(i.scale=1),(i.translate>=K7&&i.translate<=Q7||isNaN(i.translate))&&(i.translate=0)}function Qg(i,t,e,n){sw(i.x,t.x,e.x,n?n.originX:void 0),sw(i.y,t.y,e.y,n?n.originY:void 0)}function rw(i,t,e){i.min=e.min+t.min,i.max=i.min+kr(t)}function $7(i,t,e){rw(i.x,t.x,e.x),rw(i.y,t.y,e.y)}function ow(i,t,e){i.min=t.min-e.min,i.max=i.min+kr(t)}function i1(i,t,e){ow(i.x,t.x,e.x),ow(i.y,t.y,e.y)}function ll(i){return[i("x"),i("y")]}const XL=({current:i})=>i?i.ownerDocument.defaultView:null,lw=(i,t)=>Math.abs(i-t);function tG(i,t){const e=lw(i.x,t.x),n=lw(i.y,t.y);return Math.sqrt(e**2+n**2)}class YL{constructor(t,e,{transformPagePoint:n,contextWindow:a=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=fb(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,T=tG(x.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!T)return;const{point:R}=x,{timestamp:C}=Vs;this.history.push({...R,timestamp:C});const{onStart:w,onMove:N}=this.handlers;b||(w&&w(this.lastMoveEvent,x),this.startEvent=this.lastMoveEvent),N&&N(this.lastMoveEvent,x)},this.handlePointerMove=(x,b)=>{this.lastMoveEvent=x,this.lastMoveEventInfo=ub(b,this.transformPagePoint),na.update(this.updatePoint,!0)},this.handlePointerUp=(x,b)=>{this.end();const{onEnd:T,onSessionEnd:R,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=fb(x.type==="pointercancel"?this.lastMoveEventInfo:ub(b,this.transformPagePoint),this.history);this.startEvent&&T&&T(x,w),R&&R(x,w)},!jM(t))return;this.dragSnapToOrigin=s,this.handlers=e,this.transformPagePoint=n,this.distanceThreshold=o,this.contextWindow=a||window;const c=F0(t),f=ub(c,this.transformPagePoint),{point:d}=f,{timestamp:g}=Vs;this.history=[{...d,timestamp:g}];const{onSessionStart:y}=e;y&&y(t,fb(f,this.history)),this.removeListeners=P0(Kg(this.contextWindow,"pointermove",this.handlePointerMove),Kg(this.contextWindow,"pointerup",this.handlePointerUp),Kg(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Hf(this.updatePoint)}}function ub(i,t){return t?{point:t(i.point)}:i}function cw(i,t){return{x:i.x-t.x,y:i.y-t.y}}function fb({point:i},t){return{point:i,delta:cw(i,ZL(t)),offset:cw(i,eG(t)),velocity:nG(t,.1)}}function eG(i){return i[0]}function ZL(i){return i[i.length-1]}function nG(i,t){if(i.length<2)return{x:0,y:0};let e=i.length-1,n=null;const a=ZL(i);for(;e>=0&&(n=i[e],!(a.timestamp-n.timestamp>Bc(t)));)e--;if(!n)return{x:0,y:0};const s=ul(a.timestamp-n.timestamp);if(s===0)return{x:0,y:0};const o={x:(a.x-n.x)/s,y:(a.y-n.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function iG(i,{min:t,max:e},n){return t!==void 0&&i<t?i=n?da(t,i,n.min):Math.max(i,t):e!==void 0&&i>e&&(i=n?da(e,i,n.max):Math.min(i,e)),i}function uw(i,t,e){return{min:t!==void 0?i.min+t:void 0,max:e!==void 0?i.max+e-(i.max-i.min):void 0}}function aG(i,{top:t,left:e,bottom:n,right:a}){return{x:uw(i.x,e,a),y:uw(i.y,t,n)}}function fw(i,t){let e=t.min-i.min,n=t.max-i.max;return t.max-t.min<i.max-i.min&&([e,n]=[n,e]),{min:e,max:n}}function sG(i,t){return{x:fw(i.x,t.x),y:fw(i.y,t.y)}}function rG(i,t){let e=.5;const n=kr(i),a=kr(t);return a>n?e=v0(t.min,t.max-n,i.min):n>a&&(e=v0(i.min,i.max-a,t.min)),Iu(0,1,e)}function oG(i,t){const e={};return t.min!==void 0&&(e.min=t.min-i.min),t.max!==void 0&&(e.max=t.max-i.min),e}const v2=.35;function lG(i=v2){return i===!1?i=0:i===!0&&(i=v2),{x:hw(i,"left","right"),y:hw(i,"top","bottom")}}function hw(i,t,e){return{min:dw(i,t),max:dw(i,e)}}function dw(i,t){return typeof i=="number"?i:i[t]||0}const cG=new WeakMap;class uG{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=os(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:n}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const s=y=>{const{dragSnapToOrigin:x}=this.getProps();x?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(F0(y).point)},o=(y,x)=>{const{drag:b,dragPropagation:T,onDragStart:R}=this.getProps();if(b&&!T&&(this.openDragLock&&this.openDragLock(),this.openDragLock=g9(b),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=x,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ll(w=>{let N=this.getAxisMotionValue(w).get()||0;if(Fc.test(N)){const{projection:I}=this.visualElement;if(I&&I.layout){const z=I.layout.layoutBox[w];z&&(N=kr(z)*(parseFloat(N)/100))}}this.originPoint[w]=N}),R&&na.postRender(()=>R(y,x)),m2(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},c=(y,x)=>{this.latestPointerEvent=y,this.latestPanInfo=x;const{dragPropagation:b,dragDirectionLock:T,onDirectionLock:R,onDrag:C}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:w}=x;if(T&&this.currentDirection===null){this.currentDirection=fG(w),this.currentDirection!==null&&R&&R(this.currentDirection);return}this.updateAxis("x",x.point,w),this.updateAxis("y",x.point,w),this.visualElement.render(),C&&C(y,x)},f=(y,x)=>{this.latestPointerEvent=y,this.latestPanInfo=x,this.stop(y,x),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>ll(y=>this.getAnimationState(y)==="paused"&&this.getAxisMotionValue(y).animation?.play()),{dragSnapToOrigin:g}=this.getProps();this.panSession=new YL(t,{onSessionStart:s,onStart:o,onMove:c,onSessionEnd:f,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:n,contextWindow:XL(this.visualElement)})}stop(t,e){const n=t||this.latestPointerEvent,a=e||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!a||!n)return;const{velocity:o}=a;this.startAnimation(o);const{onDragEnd:c}=this.getProps();c&&na.postRender(()=>c(n,a))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,n){const{drag:a}=this.getProps();if(!n||!By(t,a,this.currentDirection))return;const s=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=iG(o,this.constraints[t],this.elastic[t])),s.set(o)}resolveConstraints(){const{dragConstraints:t,dragElastic:e}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,a=this.constraints;t&&Up(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=aG(n.layoutBox,t):this.constraints=!1,this.elastic=lG(e),a!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&ll(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=oG(n.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Up(t))return!1;const n=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const s=h7(n,a.root,this.visualElement.getTransformPagePoint());let o=sG(a.layout.layoutBox,s);if(e){const c=e(c7(o));this.hasMutatedConstraints=!!c,c&&(o=OL(c))}return o}startAnimation(t){const{drag:e,dragMomentum:n,dragElastic:a,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),f=this.constraints||{},d=ll(g=>{if(!By(g,e,this.currentDirection))return;let y=f&&f[g]||{};o&&(y={min:0,max:0});const x=a?200:1e6,b=a?40:1e7,T={type:"inertia",velocity:n?t[g]:0,bounceStiffness:x,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...s,...y};return this.startAxisValueAnimation(g,T)});return Promise.all(d).then(c)}startAxisValueAnimation(t,e){const n=this.getAxisMotionValue(t);return m2(this.visualElement,t),n.start(tT(t,n,0,e,this.visualElement,!1))}stopAnimation(){ll(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ll(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),a=n[e];return a||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){ll(e=>{const{drag:n}=this.getProps();if(!By(e,n,this.currentDirection))return;const{projection:a}=this.visualElement,s=this.getAxisMotionValue(e);if(a&&a.layout){const{min:o,max:c}=a.layout.layoutBox[e];s.set(t[e]-da(o,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:n}=this.visualElement;if(!Up(e)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};ll(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const f=c.get();a[o]=rG({min:f,max:f},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),ll(o=>{if(!By(o,t,null))return;const c=this.getAxisMotionValue(o),{min:f,max:d}=this.constraints[o];c.set(da(f,d,a[o]))})}addListeners(){if(!this.visualElement.current)return;cG.set(this.visualElement,this);const t=this.visualElement.current,e=Kg(t,"pointerdown",f=>{const{drag:d,dragListener:g=!0}=this.getProps();d&&g&&this.start(f)}),n=()=>{const{dragConstraints:f}=this.getProps();Up(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,s=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),na.read(n);const o=S0(window,"resize",()=>this.scalePositionWithinConstraints()),c=a.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:d})=>{this.isDragging&&d&&(ll(g=>{const y=this.getAxisMotionValue(g);y&&(this.originPoint[g]+=f[g].translate,y.set(y.get()+f[g].translate))}),this.visualElement.render())}));return()=>{o(),e(),s(),c&&c()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:s=!1,dragElastic:o=v2,dragMomentum:c=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:a,dragConstraints:s,dragElastic:o,dragMomentum:c}}}function By(i,t,e){return(t===!0||t===i)&&(e===null||e===i)}function fG(i,t=10){let e=null;return Math.abs(i.y)>t?e="y":Math.abs(i.x)>t&&(e="x"),e}class hG extends Xf{constructor(t){super(t),this.removeGroupControls=hl,this.removeListeners=hl,this.controls=new uG(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||hl}unmount(){this.removeGroupControls(),this.removeListeners()}}const pw=i=>(t,e)=>{i&&na.postRender(()=>i(t,e))};class dG extends Xf{constructor(){super(...arguments),this.removePointerDownListener=hl}onPointerDown(t){this.session=new YL(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:XL(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:pw(t),onStart:pw(e),onMove:n,onEnd:(s,o)=>{delete this.session,a&&na.postRender(()=>a(s,o))}}}mount(){this.removePointerDownListener=Kg(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const e_={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let hb=!1;class pG extends ct.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:a}=this.props,{projection:s}=t;s&&(e.group&&e.group.add(s),n&&n.register&&a&&n.register(s),hb&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),e_.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:n,drag:a,isPresent:s}=this.props,{projection:o}=n;return o&&(o.isPresent=s,hb=!0,a||t.layoutDependency!==e||e===void 0||t.isPresent!==s?o.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?o.promote():o.relegate()||na.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),GM.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props,{projection:a}=t;hb=!0,a&&(a.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function KL(i){const[t,e]=yL(),n=ct.useContext(bM);return O.jsx(pG,{...i,layoutGroup:n,switchLayoutGroup:ct.useContext(DL),isPresent:t,safeToRemove:e})}function mG(i,t,e){const n=rr(i)?i:Jp(i);return n.start(tT("",n,t,e)),n.animation}const gG=(i,t)=>i.depth-t.depth;class vG{constructor(){this.children=[],this.isDirty=!1}add(t){AM(this.children,t),this.isDirty=!0}remove(t){EM(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(gG),this.isDirty=!1,this.children.forEach(t)}}function yG(i,t){const e=so.now(),n=({timestamp:a})=>{const s=a-e;s>=t&&(Hf(n),i(s-t))};return na.setup(n,!0),()=>Hf(n)}const QL=["TopLeft","TopRight","BottomLeft","BottomRight"],_G=QL.length,mw=i=>typeof i=="string"?parseFloat(i):i,gw=i=>typeof i=="number"||vn.test(i);function xG(i,t,e,n,a,s){a?(i.opacity=da(0,e.opacity??1,SG(n)),i.opacityExit=da(t.opacity??1,0,bG(n))):s&&(i.opacity=da(t.opacity??1,e.opacity??1,n));for(let o=0;o<_G;o++){const c=`border${QL[o]}Radius`;let f=vw(t,c),d=vw(e,c);if(f===void 0&&d===void 0)continue;f||(f=0),d||(d=0),f===0||d===0||gw(f)===gw(d)?(i[c]=Math.max(da(mw(f),mw(d),n),0),(Fc.test(d)||Fc.test(f))&&(i[c]+="%")):i[c]=d}(t.rotate||e.rotate)&&(i.rotate=da(t.rotate||0,e.rotate||0,n))}function vw(i,t){return i[t]!==void 0?i[t]:i.borderRadius}const SG=JL(0,.5,zD),bG=JL(.5,.95,hl);function JL(i,t,e){return n=>n<i?0:n>t?1:e(v0(i,t,n))}function yw(i,t){i.min=t.min,i.max=t.max}function Yl(i,t){yw(i.x,t.x),yw(i.y,t.y)}function _w(i,t){i.translate=t.translate,i.scale=t.scale,i.originPoint=t.originPoint,i.origin=t.origin}function xw(i,t,e,n,a){return i-=t,i=n1(i,1/e,n),a!==void 0&&(i=n1(i,1/a,n)),i}function MG(i,t=0,e=1,n=.5,a,s=i,o=i){if(Fc.test(t)&&(t=parseFloat(t),t=da(o.min,o.max,t/100)-o.min),typeof t!="number")return;let c=da(s.min,s.max,n);i===s&&(c-=t),i.min=xw(i.min,t,e,c,a),i.max=xw(i.max,t,e,c,a)}function Sw(i,t,[e,n,a],s,o){MG(i,t[e],t[n],t[a],t.scale,s,o)}const TG=["x","scaleX","originX"],AG=["y","scaleY","originY"];function bw(i,t,e,n){Sw(i.x,t,TG,e?e.x:void 0,n?n.x:void 0),Sw(i.y,t,AG,e?e.y:void 0,n?n.y:void 0)}function Mw(i){return i.translate===0&&i.scale===1}function $L(i){return Mw(i.x)&&Mw(i.y)}function Tw(i,t){return i.min===t.min&&i.max===t.max}function EG(i,t){return Tw(i.x,t.x)&&Tw(i.y,t.y)}function Aw(i,t){return Math.round(i.min)===Math.round(t.min)&&Math.round(i.max)===Math.round(t.max)}function tO(i,t){return Aw(i.x,t.x)&&Aw(i.y,t.y)}function Ew(i){return kr(i.x)/kr(i.y)}function ww(i,t){return i.translate===t.translate&&i.scale===t.scale&&i.originPoint===t.originPoint}class wG{constructor(){this.members=[]}add(t){AM(this.members,t),t.scheduleRender()}remove(t){if(EM(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(a=>t===a);if(e===0)return!1;let n;for(let a=e;a>=0;a--){const s=this.members[a];if(s.isPresent!==!1){n=s;break}}return n?(this.promote(n),!0):!1}promote(t,e){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,e&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:n}=t;e.onExitComplete&&e.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function CG(i,t,e){let n="";const a=i.x.translate/t.x,s=i.y.translate/t.y,o=e?.z||0;if((a||s||o)&&(n=`translate3d(${a}px, ${s}px, ${o}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:d,rotate:g,rotateX:y,rotateY:x,skewX:b,skewY:T}=e;d&&(n=`perspective(${d}px) ${n}`),g&&(n+=`rotate(${g}deg) `),y&&(n+=`rotateX(${y}deg) `),x&&(n+=`rotateY(${x}deg) `),b&&(n+=`skewX(${b}deg) `),T&&(n+=`skewY(${T}deg) `)}const c=i.x.scale*t.x,f=i.y.scale*t.y;return(c!==1||f!==1)&&(n+=`scale(${c}, ${f})`),n||"none"}const db=["","X","Y","Z"],RG=1e3;let DG=0;function pb(i,t,e,n){const{latestValues:a}=t;a[i]&&(e[i]=a[i],t.setStaticValue(i,0),n&&(n[i]=0))}function eO(i){if(i.hasCheckedOptimisedAppear=!0,i.root===i)return;const{visualElement:t}=i.options;if(!t)return;const e=kL(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:a,layoutId:s}=i.options;window.MotionCancelOptimisedAnimation(e,"transform",na,!(a||s))}const{parent:n}=i;n&&!n.hasCheckedOptimisedAppear&&eO(n)}function nO({attachResizeListener:i,defaultParent:t,measureScroll:e,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(o={},c=t?.()){this.id=DG++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(NG),this.nodes.forEach(zG),this.nodes.forEach(BG),this.nodes.forEach(UG)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new vG)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new RM),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const f=this.eventHandlers.get(o);f&&f.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=vL(o)&&!b9(o),this.instance=o;const{layoutId:c,layout:f,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||c)&&(this.isLayoutDirty=!0),i){let g,y=0;const x=()=>this.root.updateBlockedByResize=!1;na.read(()=>{y=window.innerWidth}),i(o,()=>{const b=window.innerWidth;b!==y&&(y=b,this.root.updateBlockedByResize=!0,g&&g(),g=yG(x,250),e_.hasAnimatedSinceResize&&(e_.hasAnimatedSinceResize=!1,this.nodes.forEach(Dw)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||f)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeLayoutChanged:x,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const T=this.options.transition||d.getDefaultTransition()||GG,{onLayoutAnimationStart:R,onLayoutAnimationComplete:C}=d.getProps(),w=!this.targetLayout||!tO(this.targetLayout,b),N=!y&&x;if(this.options.layoutRoot||this.resumeFrom||N||y&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const I={...VM(T,"layout"),onPlay:R,onComplete:C};(d.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I),this.setAnimationOrigin(g,N)}else y||Dw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Hf(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(FG),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&eO(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const y=this.path[g];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:c,layout:f}=this.options;if(c===void 0&&!f)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Cw);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Rw);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(PG),this.nodes.forEach(LG),this.nodes.forEach(OG)):this.nodes.forEach(Rw),this.clearAllSnapshots();const c=so.now();Vs.delta=Iu(0,1e3/60,c-Vs.timestamp),Vs.timestamp=c,Vs.isProcessing=!0,nb.update.process(Vs),nb.preRender.process(Vs),nb.render.process(Vs),Vs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,GM.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(IG),this.sharedNodes.forEach(kG)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,na.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){na.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!kr(this.snapshot.measuredBox.x)&&!kr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=os(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const f=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:f,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!$L(this.projectionDelta),f=this.getTransformTemplate(),d=f?f(this.latestValues,""):void 0,g=d!==this.prevTransformTemplateValue;o&&this.instance&&(c||Wh(this.latestValues)||g)&&(a(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let f=this.removeElementScroll(c);return o&&(f=this.removeTransform(f)),jG(f),{animationId:this.root.animationId,measuredBox:c,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return os();const c=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(WG))){const{scroll:d}=this.root;d&&(Ip(c.x,d.offset.x),Ip(c.y,d.offset.y))}return c}removeElementScroll(o){const c=os();if(Yl(c,o),this.scroll?.wasRoot)return c;for(let f=0;f<this.path.length;f++){const d=this.path[f],{scroll:g,options:y}=d;d!==this.root&&g&&y.layoutScroll&&(g.wasRoot&&Yl(c,o),Ip(c.x,g.offset.x),Ip(c.y,g.offset.y))}return c}applyTransform(o,c=!1){const f=os();Yl(f,o);for(let d=0;d<this.path.length;d++){const g=this.path[d];!c&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Pp(f,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Wh(g.latestValues)&&Pp(f,g.latestValues)}return Wh(this.latestValues)&&Pp(f,this.latestValues),f}removeTransform(o){const c=os();Yl(c,o);for(let f=0;f<this.path.length;f++){const d=this.path[f];if(!d.instance||!Wh(d.latestValues))continue;f2(d.latestValues)&&d.updateSnapshot();const g=os(),y=d.measurePageBox();Yl(g,y),bw(c,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,g)}return Wh(this.latestValues)&&bw(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Vs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==c;if(!(o||f&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:y}=this.options;if(!this.layout||!(g||y))return;this.resolvedRelativeTargetAt=Vs.timestamp;const x=this.getClosestProjectingParent();x&&this.linkedParentVersion!==x.layoutVersion&&!x.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(x&&x.layout?this.createRelativeTarget(x,this.layout.layoutBox,x.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=os(),this.targetWithTransforms=os()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),$7(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Yl(this.target,this.layout.layoutBox),UL(this.target,this.targetDelta)):Yl(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?this.createRelativeTarget(x,this.target,x.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||f2(this.parent.latestValues)||NL(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,c,f){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=os(),this.relativeTargetOrigin=os(),i1(this.relativeTargetOrigin,c,f),Yl(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const o=this.getLead(),c=!!this.resumingFrom||this!==o;let f=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(f=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Vs.timestamp&&(f=!1),f)return;const{layout:d,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||g))return;Yl(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,x=this.treeScale.y;f7(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=os());const{target:b}=o;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(_w(this.prevProjectionDelta.x,this.projectionDelta.x),_w(this.prevProjectionDelta.y,this.projectionDelta.y)),Qg(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==x||!ww(this.projectionDelta.x,this.prevProjectionDelta.x)||!ww(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=zp(),this.projectionDelta=zp(),this.projectionDeltaWithTransform=zp()}setAnimationOrigin(o,c=!1){const f=this.snapshot,d=f?f.latestValues:{},g={...this.latestValues},y=zp();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const x=os(),b=f?f.source:void 0,T=this.layout?this.layout.source:void 0,R=b!==T,C=this.getStack(),w=!C||C.members.length<=1,N=!!(R&&!w&&this.options.crossfade===!0&&!this.path.some(HG));this.animationProgress=0;let I;this.mixTargetDelta=z=>{const F=z/1e3;Lw(y.x,o.x,F),Lw(y.y,o.y,F),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(i1(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),VG(this.relativeTarget,this.relativeTargetOrigin,x,F),I&&EG(this.relativeTarget,I)&&(this.isProjectionDirty=!1),I||(I=os()),Yl(I,this.relativeTarget)),R&&(this.animationValues=g,xG(g,d,this.latestValues,F,N,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=F},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Hf(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=na.update(()=>{e_.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Jp(0)),this.currentAnimation=mG(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(RG),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:f,layout:d,latestValues:g}=o;if(!(!c||!f||!d)){if(this!==o&&this.layout&&d&&iO(this.options.animationType,this.layout.layoutBox,d.layoutBox)){f=this.target||os();const y=kr(this.layout.layoutBox.x);f.x.min=o.target.x.min,f.x.max=f.x.min+y;const x=kr(this.layout.layoutBox.y);f.y.min=o.target.y.min,f.y.max=f.y.min+x}Yl(c,f),Pp(c,g),Qg(this.projectionDeltaWithTransform,this.layoutCorrected,c,g)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new wG),this.sharedNodes.get(o).add(c);const d=c.options.initialPromotionConfig;c.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:f}={}){const d=this.getStack();d&&d.promote(this,f),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:f}=o;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(c=!0),!c)return;const d={};f.z&&pb("z",o,d,this.animationValues);for(let g=0;g<db.length;g++)pb(`rotate${db[g]}`,o,d,this.animationValues),pb(`skew${db[g]}`,o,d,this.animationValues);o.render();for(const g in d)o.setStaticValue(g,d[g]),this.animationValues&&(this.animationValues[g]=d[g]);o.scheduleRender()}applyProjectionStyles(o,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=t_(c?.pointerEvents)||"",o.transform=f?f(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=t_(c?.pointerEvents)||""),this.hasProjected&&!Wh(this.latestValues)&&(o.transform=f?f({},""):"none",this.hasProjected=!1);return}o.visibility="";const g=d.animationValues||d.latestValues;this.applyTransformsToTarget();let y=CG(this.projectionDeltaWithTransform,this.treeScale,g);f&&(y=f(g,y)),o.transform=y;const{x,y:b}=this.projectionDelta;o.transformOrigin=`${x.origin*100}% ${b.origin*100}% 0`,d.animationValues?o.opacity=d===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:o.opacity=d===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const T in u2){if(g[T]===void 0)continue;const{correct:R,applyTo:C,isCSSVariable:w}=u2[T],N=y==="none"?g[T]:R(g[T],d);if(C){const I=C.length;for(let z=0;z<I;z++)o[C[z]]=N}else w?this.options.visualElement.renderState.vars[T]=N:o[T]=N}this.options.layoutId&&(o.pointerEvents=d===this?t_(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(Cw),this.root.sharedNodes.clear()}}}function LG(i){i.updateLayout()}function OG(i){const t=i.resumeFrom?.snapshot||i.snapshot;if(i.isLead()&&i.layout&&t&&i.hasListeners("didUpdate")){const{layoutBox:e,measuredBox:n}=i.layout,{animationType:a}=i.options,s=t.source!==i.layout.source;a==="size"?ll(g=>{const y=s?t.measuredBox[g]:t.layoutBox[g],x=kr(y);y.min=e[g].min,y.max=y.min+x}):iO(a,t.layoutBox,e)&&ll(g=>{const y=s?t.measuredBox[g]:t.layoutBox[g],x=kr(e[g]);y.max=y.min+x,i.relativeTarget&&!i.currentAnimation&&(i.isProjectionDirty=!0,i.relativeTarget[g].max=i.relativeTarget[g].min+x)});const o=zp();Qg(o,e,t.layoutBox);const c=zp();s?Qg(c,i.applyTransform(n,!0),t.measuredBox):Qg(c,e,t.layoutBox);const f=!$L(o);let d=!1;if(!i.resumeFrom){const g=i.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:y,layout:x}=g;if(y&&x){const b=os();i1(b,t.layoutBox,y.layoutBox);const T=os();i1(T,e,x.layoutBox),tO(b,T)||(d=!0),g.options.layoutRoot&&(i.relativeTarget=T,i.relativeTargetOrigin=b,i.relativeParent=g)}}}i.notifyListeners("didUpdate",{layout:e,snapshot:t,delta:c,layoutDelta:o,hasLayoutChanged:f,hasRelativeLayoutChanged:d})}else if(i.isLead()){const{onExitComplete:e}=i.options;e&&e()}i.options.transition=void 0}function NG(i){i.parent&&(i.isProjecting()||(i.isProjectionDirty=i.parent.isProjectionDirty),i.isSharedProjectionDirty||(i.isSharedProjectionDirty=!!(i.isProjectionDirty||i.parent.isProjectionDirty||i.parent.isSharedProjectionDirty)),i.isTransformDirty||(i.isTransformDirty=i.parent.isTransformDirty))}function UG(i){i.isProjectionDirty=i.isSharedProjectionDirty=i.isTransformDirty=!1}function IG(i){i.clearSnapshot()}function Cw(i){i.clearMeasurements()}function Rw(i){i.isLayoutDirty=!1}function PG(i){const{visualElement:t}=i.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),i.resetTransform()}function Dw(i){i.finishAnimation(),i.targetDelta=i.relativeTarget=i.target=void 0,i.isProjectionDirty=!0}function zG(i){i.resolveTargetDelta()}function BG(i){i.calcProjection()}function FG(i){i.resetSkewAndRotation()}function kG(i){i.removeLeadSnapshot()}function Lw(i,t,e){i.translate=da(t.translate,0,e),i.scale=da(t.scale,1,e),i.origin=t.origin,i.originPoint=t.originPoint}function Ow(i,t,e,n){i.min=da(t.min,e.min,n),i.max=da(t.max,e.max,n)}function VG(i,t,e,n){Ow(i.x,t.x,e.x,n),Ow(i.y,t.y,e.y,n)}function HG(i){return i.animationValues&&i.animationValues.opacityExit!==void 0}const GG={duration:.45,ease:[.4,0,.1,1]},Nw=i=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(i),Uw=Nw("applewebkit/")&&!Nw("chrome/")?Math.round:hl;function Iw(i){i.min=Uw(i.min),i.max=Uw(i.max)}function jG(i){Iw(i.x),Iw(i.y)}function iO(i,t,e){return i==="position"||i==="preserve-aspect"&&!J7(Ew(t),Ew(e),.2)}function WG(i){return i!==i.root&&i.scroll?.wasRoot}const qG=nO({attachResizeListener:(i,t)=>S0(i,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),mb={current:void 0},aO=nO({measureScroll:i=>({x:i.scrollLeft,y:i.scrollTop}),defaultParent:()=>{if(!mb.current){const i=new qG({});i.mount(window),i.setOptions({layoutScroll:!0}),mb.current=i}return mb.current},resetTransform:(i,t)=>{i.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:i=>window.getComputedStyle(i).position==="fixed"}),XG={pan:{Feature:dG},drag:{Feature:hG,ProjectionNode:aO,MeasureLayout:KL}};function Pw(i,t,e){const{props:n}=i;i.animationState&&n.whileHover&&i.animationState.setActive("whileHover",e==="Start");const a="onHover"+e,s=n[a];s&&na.postRender(()=>s(t,F0(t)))}class YG extends Xf{mount(){const{current:t}=this.node;t&&(this.unmount=v9(t,(e,n)=>(Pw(this.node,n,"Start"),a=>Pw(this.node,a,"End"))))}unmount(){}}class ZG extends Xf{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=P0(S0(this.node.current,"focus",()=>this.onFocus()),S0(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function zw(i,t,e){const{props:n}=i;if(i.current instanceof HTMLButtonElement&&i.current.disabled)return;i.animationState&&n.whileTap&&i.animationState.setActive("whileTap",e==="Start");const a="onTap"+(e==="End"?"":e),s=n[a];s&&na.postRender(()=>s(t,F0(t)))}class KG extends Xf{mount(){const{current:t}=this.node;t&&(this.unmount=S9(t,(e,n)=>(zw(this.node,n,"Start"),(a,{success:s})=>zw(this.node,a,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const y2=new WeakMap,gb=new WeakMap,QG=i=>{const t=y2.get(i.target);t&&t(i)},JG=i=>{i.forEach(QG)};function $G({root:i,...t}){const e=i||document;gb.has(e)||gb.set(e,{});const n=gb.get(e),a=JSON.stringify(t);return n[a]||(n[a]=new IntersectionObserver(JG,{root:i,...t})),n[a]}function tj(i,t,e){const n=$G(t);return y2.set(i,e),n.observe(i),()=>{y2.delete(i),n.unobserve(i)}}const ej={some:0,all:1};class nj extends Xf{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:n,amount:a="some",once:s}=t,o={root:e?e.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:ej[a]},c=f=>{const{isIntersecting:d}=f;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:g,onViewportLeave:y}=this.node.getProps(),x=d?g:y;x&&x(f)};return tj(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(ij(t,e))&&this.startObserver()}unmount(){}}function ij({viewport:i={}},{viewport:t={}}={}){return e=>i[e]!==t[e]}const aj={inView:{Feature:nj},tap:{Feature:KG},focus:{Feature:ZG},hover:{Feature:YG}},sj={layout:{ProjectionNode:aO,MeasureLayout:KL}},rj={...q7,...aj,...XG,...sj},Qe=l7(rj,S7);const oj=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),lj=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,n)=>n?n.toUpperCase():e.toLowerCase()),Bw=i=>{const t=lj(i);return t.charAt(0).toUpperCase()+t.slice(1)},sO=(...i)=>i.filter((t,e,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===e).join(" ").trim(),cj=i=>{for(const t in i)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var uj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const fj=ct.forwardRef(({color:i="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:n,className:a="",children:s,iconNode:o,...c},f)=>ct.createElement("svg",{ref:f,...uj,width:t,height:t,stroke:i,strokeWidth:n?Number(e)*24/Number(t):e,className:sO("lucide",a),...!s&&!cj(c)&&{"aria-hidden":"true"},...c},[...o.map(([d,g])=>ct.createElement(d,g)),...Array.isArray(s)?s:[s]]));const We=(i,t)=>{const e=ct.forwardRef(({className:n,...a},s)=>ct.createElement(fj,{ref:s,iconNode:t,className:sO(`lucide-${oj(Bw(i))}`,`lucide-${i}`,n),...a}));return e.displayName=Bw(i),e};const hj=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],dj=We("activity",hj);const pj=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],ex=We("arrow-down",pj);const mj=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],gj=We("arrow-right-left",mj);const vj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],yj=We("arrow-right",vj);const _j=[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]],xj=We("arrow-up-narrow-wide",_j);const Sj=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],nx=We("arrow-up",Sj);const bj=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],eT=We("bell",bj);const Mj=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Tj=We("book-open",Mj);const Aj=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Ej=We("brain",Aj);const wj=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Cj=We("building-2",wj);const Rj=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Fw=We("check",Rj);const Dj=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],k0=We("chevron-down",Dj);const Lj=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ix=We("chevron-up",Lj);const Oj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],rO=We("circle-alert",Oj);const Nj=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Uj=We("circle-check-big",Nj);const Ij=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Pj=We("circle-question-mark",Ij);const zj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Bj=We("circle-x",zj);const Fj=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],b0=We("clock",Fj);const kj=[["path",{d:"M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973",key:"1cez44"}],["path",{d:"m13 12-3 5h4l-3 5",key:"1t22er"}]],Vj=We("cloud-lightning",kj);const Hj=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M8 19h.01",key:"puxtts"}],["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M12 21h.01",key:"h35vbk"}],["path",{d:"M16 15h.01",key:"rnfrdf"}],["path",{d:"M16 19h.01",key:"1vcnzz"}]],Gj=We("cloud-snow",Hj);const jj=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],Wj=We("cloud-rain",jj);const qj=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],Ig=We("cloud",qj);const Xj=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Yj=We("compass",Xj);const Zj=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],Kj=We("cpu",Zj);const Qj=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Jj=We("database",Qj);const $j=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],tW=We("droplets",$j);const eW=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],nW=We("eye",eW);const iW=[["path",{d:"M12 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 12 18z",key:"b19h5q"}],["path",{d:"M2 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 2 18z",key:"h7h5ge"}]],aW=We("fast-forward",iW);const sW=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],oO=We("flame",sW);const rW=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],oW=We("funnel",rW);const lW=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],nT=We("gauge",lW);const cW=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],uW=We("globe",cW);const fW=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],lO=We("info",fW);const hW=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],dW=We("keyboard",hW);const pW=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],mW=We("map-pin",pW);const gW=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],vW=We("maximize",gW);const yW=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],cO=We("mic",yW);const _W=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],xW=We("minimize",_W);const SW=[["path",{d:"M5 12h14",key:"1ays0h"}]],uO=We("minus",SW);const bW=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],fO=We("monitor",bW);const MW=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],TW=We("mouse-pointer",MW);const AW=[["rect",{x:"5",y:"2",width:"14",height:"20",rx:"7",key:"11ol66"}],["path",{d:"M12 6v4",key:"16clxf"}]],EW=We("mouse",AW);const wW=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],_2=We("navigation",wW);const CW=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],RW=We("palette",CW);const DW=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],LW=We("pause",DW);const OW=[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]],hO=We("plane",OW);const NW=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Jg=We("play",NW);const UW=[["path",{d:"M19.07 4.93A10 10 0 0 0 6.99 3.34",key:"z3du51"}],["path",{d:"M4 6h.01",key:"oypzma"}],["path",{d:"M2.29 9.62A10 10 0 1 0 21.31 8.35",key:"qzzz0"}],["path",{d:"M16.24 7.76A6 6 0 1 0 8.23 16.67",key:"1yjesh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M17.99 11.66A6 6 0 0 1 15.77 16.67",key:"1u2y91"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"m13.41 10.59 5.66-5.66",key:"mhq4k0"}]],IW=We("radar",UW);const PW=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],vd=We("radio",PW);const zW=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],dO=We("rotate-ccw",zW);const BW=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],FW=We("route",BW);const kW=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],VW=We("search",kW);const HW=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],pO=We("send",HW);const GW=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],jW=We("server",GW);const WW=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],mO=We("settings",WW);const qW=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],gO=We("shield",qW);const XW=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]],YW=We("skip-back",XW);const ZW=[["path",{d:"M7 18v-6a5 5 0 1 1 10 0v6",key:"pcx96s"}],["path",{d:"M5 21a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-1a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2z",key:"1b4s83"}],["path",{d:"M21 12h1",key:"jtio3y"}],["path",{d:"M18.5 4.5 18 5",key:"g5sp9y"}],["path",{d:"M2 12h1",key:"1uaihz"}],["path",{d:"M12 2v1",key:"11qlp1"}],["path",{d:"m4.929 4.929.707.707",key:"1i51kw"}],["path",{d:"M12 12v6",key:"3ahymv"}]],KW=We("siren",ZW);const QW=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],JW=We("skip-forward",QW);const $W=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],tq=We("sun",$W);const eq=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],nq=We("target",eq);const iq=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],aq=We("terminal",iq);const sq=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],rq=We("trending-up",sq);const oq=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],um=We("triangle-alert",oq);const lq=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],vO=We("users",lq);const cq=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],tm=We("volume-2",cq);const uq=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],iT=We("volume-x",uq);const fq=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],hq=We("wifi-off",fq);const dq=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],pq=We("wifi",dq);const mq=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],gq=We("wind",mq);const vq=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],fm=We("x",vq);const yq=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],aT=We("zap",yq),_q={regional:"M24 8 L24 4 L23 4 L23 8 L16 8 L16 10 L10 14 L10 16 L16 14 L16 16 L23 16 L23 20 L16 24 L16 26 L24 22 L24 24 L25 24 L25 22 L33 26 L33 24 L26 20 L26 16 L33 16 L33 14 L39 16 L39 14 L33 10 L33 8 L26 8 L26 4 L25 4 L25 8 Z",narrow:"M24 6 L24 2 L23 2 L23 6 L18 6 L18 8 L8 14 L8 16 L18 12 L18 18 L23 18 L23 22 L18 26 L18 28 L24 24 L24 26 L25 26 L25 24 L31 28 L31 26 L26 22 L26 18 L31 18 L31 12 L41 16 L41 14 L31 8 L31 6 L26 6 L26 2 L25 2 L25 6 Z",wide:"M24 5 L24 1 L23 1 L23 5 L17 5 L17 7 L5 15 L5 17 L17 11 L17 19 L23 19 L23 24 L17 28 L17 30 L24 25 L24 28 L25 28 L25 25 L32 30 L32 28 L26 24 L26 19 L32 19 L32 11 L44 17 L44 15 L32 7 L32 5 L26 5 L26 1 L25 1 L25 5 Z",heavy:"M24 4 L24 0 L23 0 L23 4 L16 4 L16 6 L2 16 L2 18 L16 10 L16 20 L23 20 L23 26 L16 31 L16 33 L24 27 L24 30 L25 30 L25 27 L33 33 L33 31 L26 26 L26 20 L33 20 L33 10 L47 18 L47 16 L33 6 L33 4 L26 4 L26 0 L25 0 L25 4 Z",super:"M24 3 L24 0 L23 0 L23 3 L15 3 L15 5 L0 17 L0 19 L15 9 L15 21 L23 21 L23 28 L15 34 L15 36 L24 29 L24 33 L25 33 L25 29 L34 36 L34 34 L26 28 L26 21 L34 21 L34 9 L49 19 L49 17 L34 5 L34 3 L26 3 L26 0 L25 0 L25 3 Z"},xq="M24 6 L24 2 L23 2 L23 6 L20 6 L12 18 L12 20 L20 14 L20 22 L23 22 L23 24 L18 28 L18 30 L24 26 L24 28 L25 28 L25 26 L31 30 L31 28 L26 24 L26 22 L29 22 L29 14 L37 20 L37 18 L29 6 L26 6 L26 2 L25 2 L25 6 Z";function yO({size:i,color:t="#8b949e",width:e=24,className:n,isMilitary:a=!1}){const s=a?xq:_q[i],o=49,f=e*(i==="super"?1.2:i==="heavy"?1.1:1);return O.jsx("svg",{width:e,height:f,viewBox:`0 0 ${o} ${o}`,className:n,style:{transform:"rotate(90deg)"},children:O.jsx("path",{d:s,fill:t,opacity:.9})})}function _O(i){return{B737:{size:"narrow"},B738:{size:"narrow"},B739:{size:"narrow"},A320:{size:"narrow"},A321:{size:"narrow"},B787:{size:"wide"},B789:{size:"wide"},B777:{size:"wide"},A330:{size:"wide"},A350:{size:"wide"},B77W:{size:"heavy"},B747:{size:"heavy"},A380:{size:"super"},E175:{size:"regional"},CRJ9:{size:"regional"},SU35:{size:"regional"},SU57:{size:"regional"},F22:{size:"regional"},F15:{size:"regional"},F16:{size:"regional"}}[i]?.size||"narrow"}function Sq(i){return i>=18e3?`FL${Math.round(i/100).toString().padStart(3,"0")}`:`${Math.round(i/100)*100}`}function bq({rate:i}){return Math.abs(i)<100?O.jsx(uO,{size:12,className:"text-secondary"}):i>0?O.jsx(nx,{size:12,className:"text-phosphor"}):O.jsx(ex,{size:12,className:"text-amber"})}function Mq({track:i,flight:t,isSelected:e,onSelect:n,hasAlert:a=!1}){const s=o1(i.callsign),o=i.aircraftType?T2[i.aircraftType]:null,c=i.aircraftType?_O(i.aircraftType):"narrow",f=o?.category==="military",d=o?.typicalSeats?Math.round(o.typicalSeats*.85)+6:null;return O.jsxs(Qe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},whileHover:{scale:1.02,x:4},onClick:n,className:`flight-strip ${e?"selected":""} ${a?"has-alert":""}`,style:{background:e?"linear-gradient(90deg, rgba(0, 212, 255, 0.15), rgba(0, 212, 255, 0.05))":a?"linear-gradient(90deg, rgba(255, 51, 102, 0.15), rgba(255, 51, 102, 0.05))":"rgba(21, 27, 35, 0.8)",border:`1px solid ${e?"rgba(0, 212, 255, 0.5)":a?"rgba(255, 51, 102, 0.5)":"rgba(0, 255, 136, 0.15)"}`,borderRadius:6,padding:"8px 12px",marginBottom:4,cursor:"pointer",display:"grid",gridTemplateColumns:"1fr auto auto",alignItems:"center",gap:12,position:"relative",overflow:"hidden"},children:[a&&O.jsx(Qe.div,{animate:{opacity:[1,.5,1]},transition:{duration:.5,repeat:1/0},style:{position:"absolute",left:0,top:0,bottom:0,width:3,background:"#ff3366"}}),O.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:2},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[s&&O.jsx("span",{style:{fontSize:14,lineHeight:1},title:s.name,children:s.countryFlag}),O.jsx(yO,{size:c,color:e?"#00d4ff":s?.color||"#00ff88",width:18,isMilitary:f}),O.jsx("span",{style:{fontFamily:"'Orbitron', monospace",fontSize:13,fontWeight:600,color:e?"#00d4ff":"#e6edf3",letterSpacing:1},children:i.callsign}),a&&O.jsx(um,{size:12,style:{color:"#ff3366"}})]}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[t&&O.jsxs("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:10,color:"#8b949e"},children:[t.departureAirport,"  ",t.arrivalAirport]}),s&&O.jsx("span",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:9,fontWeight:600,color:s.color,background:`${s.color}20`,padding:"1px 4px",borderRadius:2,textTransform:"uppercase",letterSpacing:.5},children:s.name}),d&&O.jsxs("span",{style:{display:"flex",alignItems:"center",gap:2,fontFamily:"'JetBrains Mono', monospace",fontSize:9,color:"#6e7681"},title:"Souls on board",children:[O.jsx(vO,{size:9}),d]})]})]}),O.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",minWidth:50},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:2},children:[O.jsx(bq,{rate:i.verticalRateFpm}),O.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:14,fontWeight:600,color:"#00ff88"},children:Sq(i.altitudeFt)})]}),O.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:9,color:"#6e7681"},children:Math.abs(i.verticalRateFpm)>100?`${i.verticalRateFpm>0?"+":""}${i.verticalRateFpm}`:"LVL"})]}),O.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",minWidth:45},children:[O.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:14,fontWeight:600,color:"#00d4ff"},children:i.speedKt}),O.jsxs("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:9,color:"#6e7681"},children:[Math.round(i.headingDeg).toString().padStart(3,"0"),""]})]})]})}function Tq({tracks:i,flights:t=new Map,alerts:e=[],selectedTrackId:n,onSelectTrack:a}){const[s,o]=ct.useState(!0),[c,f]=ct.useState("callsign"),[d,g]=ct.useState("asc"),[y,x]=ct.useState(""),[b,T]=ct.useState(!1),R=ct.useMemo(()=>{const N=new Set;return e.forEach(I=>{I.involvedFlightIds.forEach(z=>N.add(z))}),N},[e]),C=ct.useMemo(()=>{let N=i;if(y){const I=y.toUpperCase();N=i.filter(z=>z.callsign.toUpperCase().includes(I))}return[...N].sort((I,z)=>{let F=0;switch(c){case"callsign":F=I.callsign.localeCompare(z.callsign);break;case"altitude":F=I.altitudeFt-z.altitudeFt;break;case"speed":F=I.speedKt-z.speedKt;break}return d==="asc"?F:-F})},[i,c,d,y]),w=N=>{c===N?g(I=>I==="asc"?"desc":"asc"):(f(N),g("asc"))};return O.jsxs("div",{className:"flight-strip-bay panel",style:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:[O.jsxs("div",{className:"panel-header",style:{flexShrink:0},children:[O.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8,flex:1},children:[O.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:"#00ff88",boxShadow:"0 0 8px #00ff88"}}),"FLIGHT STRIPS",O.jsxs("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:10,color:"#8b949e",marginLeft:4},children:["(",C.length,")"]})]}),O.jsx("button",{onClick:()=>T(!b),style:{background:"transparent",border:"none",color:b?"#00ff88":"#8b949e",cursor:"pointer",padding:4},children:O.jsx(oW,{size:14})}),O.jsx("button",{onClick:()=>o(!s),style:{background:"transparent",border:"none",color:"#8b949e",cursor:"pointer",padding:4},children:s?O.jsx(ix,{size:14}):O.jsx(k0,{size:14})})]}),O.jsx(ls,{children:b&&O.jsx(Qe.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},style:{borderBottom:"1px solid rgba(0, 255, 136, 0.1)",overflow:"hidden"},children:O.jsxs("div",{style:{padding:"8px 12px"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,background:"rgba(0, 0, 0, 0.3)",borderRadius:4,padding:"6px 10px",marginBottom:8},children:[O.jsx(VW,{size:12,style:{color:"#6e7681"}}),O.jsx("input",{type:"text",placeholder:"Search callsign...",value:y,onChange:N=>x(N.target.value),style:{background:"transparent",border:"none",outline:"none",color:"#e6edf3",fontFamily:"'JetBrains Mono', monospace",fontSize:11,width:"100%"}})]}),O.jsx("div",{style:{display:"flex",gap:4},children:["callsign","altitude","speed"].map(N=>O.jsxs("button",{onClick:()=>w(N),style:{flex:1,background:c===N?"rgba(0, 255, 136, 0.1)":"transparent",border:`1px solid ${c===N?"rgba(0, 255, 136, 0.3)":"rgba(0, 255, 136, 0.1)"}`,borderRadius:4,padding:"4px 8px",color:c===N?"#00ff88":"#8b949e",fontFamily:"'Rajdhani', sans-serif",fontSize:10,textTransform:"uppercase",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:4},children:[N.charAt(0).toUpperCase()+N.slice(1),c===N&&O.jsx(xj,{size:10,style:{transform:d==="desc"?"rotate(180deg)":"none"}})]},N))})]})})}),O.jsx(ls,{children:s&&O.jsx(Qe.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},style:{flex:1,overflowY:"auto",overflowX:"hidden",padding:8},children:O.jsx(ls,{mode:"popLayout",children:C.map(N=>O.jsx(Mq,{track:N,flight:t.get(N.callsign),isSelected:n===N.trackId,onSelect:()=>a(N.trackId),hasAlert:R.has(N.callsign)},N.trackId))})})})]})}class Aq{audioContext=null;muted=!1;volume=.5;getContext(){return this.audioContext||(this.audioContext=new(window.AudioContext||window.webkitAudioContext)),this.audioContext}createOscillator(t,e,n,a=1){if(this.muted)return;const s=this.getContext(),o=s.createOscillator(),c=s.createGain();o.type=e,o.frequency.setValueAtTime(t,s.currentTime),c.gain.setValueAtTime(a*this.volume,s.currentTime),c.gain.exponentialRampToValueAtTime(.001,s.currentTime+n),o.connect(c),c.connect(s.destination),o.start(),o.stop(s.currentTime+n)}play(t){if(!this.muted)try{switch(t){case"click":this.createOscillator(800,"sine",.05,.3);break;case"message":this.createOscillator(600,"sine",.1,.4),setTimeout(()=>this.createOscillator(800,"sine",.1,.4),100);break;case"alert":this.createOscillator(880,"sine",.15,.5),setTimeout(()=>this.createOscillator(880,"sine",.15,.5),200);break;case"warning":const e=this.getContext(),n=e.createOscillator(),a=e.createGain();n.type="sawtooth",n.frequency.setValueAtTime(400,e.currentTime),n.frequency.linearRampToValueAtTime(800,e.currentTime+.3),a.gain.setValueAtTime(.3*this.volume,e.currentTime),a.gain.exponentialRampToValueAtTime(.001,e.currentTime+.4),n.connect(a),a.connect(e.destination),n.start(),n.stop(e.currentTime+.4);break;case"critical":const s=x=>{setTimeout(()=>{this.createOscillator(1e3,"square",.15,.4),setTimeout(()=>this.createOscillator(800,"square",.15,.4),150)},x)};s(0),s(400),s(800);break;case"emergency":const o=this.getContext(),c=o.createOscillator(),f=o.createGain();c.type="sawtooth",c.frequency.setValueAtTime(600,o.currentTime),c.frequency.linearRampToValueAtTime(1200,o.currentTime+.5),c.frequency.linearRampToValueAtTime(600,o.currentTime+1),f.gain.setValueAtTime(.4*this.volume,o.currentTime),f.gain.exponentialRampToValueAtTime(.001,o.currentTime+1.2),c.connect(f),f.connect(o.destination),c.start(),c.stop(o.currentTime+1.2);break;case"sweep":const d=this.getContext(),g=d.createOscillator(),y=d.createGain();g.type="sine",g.frequency.setValueAtTime(200,d.currentTime),g.frequency.exponentialRampToValueAtTime(100,d.currentTime+.3),y.gain.setValueAtTime(.1*this.volume,d.currentTime),y.gain.exponentialRampToValueAtTime(.001,d.currentTime+.3),g.connect(y),y.connect(d.destination),g.start(),g.stop(d.currentTime+.3);break;case"radar":this.createOscillator(1200,"sine",.03,.2);break;case"militaryHorn":this.playMilitaryHorn();break;case"klaxon":this.playKlaxon();break;case"transponderLost":this.playTransponderLost();break;case"commandAck":this.createOscillator(600,"sine",.08,.4),setTimeout(()=>this.createOscillator(900,"sine",.08,.4),80);break;case"commandReject":this.createOscillator(400,"square",.15,.3),setTimeout(()=>this.createOscillator(250,"square",.2,.3),150);break;case"heroSuccess":this.playHeroSuccess();break;case"staticBurst":this.playStaticBurst();break}}catch{}}playMilitaryHorn(){const t=this.getContext(),e=2,n=t.createOscillator(),a=t.createGain();n.type="sawtooth",n.frequency.setValueAtTime(110,t.currentTime),n.frequency.linearRampToValueAtTime(98,t.currentTime+e),a.gain.setValueAtTime(.35*this.volume,t.currentTime),a.gain.exponentialRampToValueAtTime(.001,t.currentTime+e),n.connect(a),a.connect(t.destination),n.start(),n.stop(t.currentTime+e);const s=t.createOscillator(),o=t.createGain();s.type="sine",s.frequency.setValueAtTime(220,t.currentTime),s.frequency.linearRampToValueAtTime(196,t.currentTime+e),o.gain.setValueAtTime(.2*this.volume,t.currentTime),o.gain.exponentialRampToValueAtTime(.001,t.currentTime+e),s.connect(o),o.connect(t.destination),s.start(),s.stop(t.currentTime+e);const c=t.createOscillator(),f=t.createGain();c.type="triangle",c.frequency.setValueAtTime(330,t.currentTime),f.gain.setValueAtTime(.1*this.volume,t.currentTime),f.gain.exponentialRampToValueAtTime(.001,t.currentTime+e*.8),c.connect(f),f.connect(t.destination),c.start(),c.stop(t.currentTime+e)}playKlaxon(){const t=e=>{setTimeout(()=>{const n=this.getContext(),a=n.createOscillator(),s=n.createGain();a.type="square",a.frequency.setValueAtTime(800,n.currentTime),a.frequency.linearRampToValueAtTime(600,n.currentTime+.15),s.gain.setValueAtTime(.3*this.volume,n.currentTime),s.gain.exponentialRampToValueAtTime(.001,n.currentTime+.2),a.connect(s),s.connect(n.destination),a.start(),a.stop(n.currentTime+.2)},e)};t(0),t(250),t(500)}playTransponderLost(){const t=this.getContext(),e=1.5,n=t.createOscillator(),a=t.createGain();n.type="sine",n.frequency.setValueAtTime(1200,t.currentTime),n.frequency.exponentialRampToValueAtTime(100,t.currentTime+e),a.gain.setValueAtTime(.3*this.volume,t.currentTime),a.gain.exponentialRampToValueAtTime(.001,t.currentTime+e),n.connect(a),a.connect(t.destination),n.start(),n.stop(t.currentTime+e)}playHeroSuccess(){[523,659,784,1047].forEach((e,n)=>{setTimeout(()=>{this.createOscillator(e,"sine",.3,.5),this.createOscillator(e*1.5,"triangle",.25,.2)},n*150)})}playStaticBurst(){const t=this.getContext(),e=.3,n=t.sampleRate*e,a=t.createBuffer(1,n,t.sampleRate),s=a.getChannelData(0);for(let f=0;f<n;f++)s[f]=Math.random()*2-1;const o=t.createBufferSource(),c=t.createGain();o.buffer=a,c.gain.setValueAtTime(.15*this.volume,t.currentTime),c.gain.exponentialRampToValueAtTime(.001,t.currentTime+e),o.connect(c),c.connect(t.destination),o.start()}setMuted(t){this.muted=t}setVolume(t){this.volume=Math.max(0,Math.min(1,t))}isMuted(){return this.muted}getVolume(){return this.volume}}const Du=new Aq;class Eq{synth=null;enabled=!0;initialized=!1;voicesLoaded=!1;speakQueue=[];isSpeaking=!1;currentOnComplete=null;constructor(){typeof window<"u"&&"speechSynthesis"in window?(this.synth=window.speechSynthesis,this.loadVoices(),this.synth.onvoiceschanged!==void 0&&(this.synth.onvoiceschanged=()=>{this.loadVoices()}),setTimeout(()=>this.loadVoices(),100),setTimeout(()=>this.loadVoices(),500),setTimeout(()=>this.loadVoices(),1e3),console.log("[Voice] Speech synthesis available")):console.warn("[Voice] Speech synthesis NOT available in this browser")}loadVoices(){if(!this.synth)return;const t=this.synth.getVoices();if(this.voicesLoaded=t.length>0,this.voicesLoaded){console.log("[Voice] Loaded",t.length,"voices");const e=t.filter(n=>n.lang.startsWith("en"));console.log("[Voice] English voices:",e.slice(0,3).map(n=>`${n.name} (${n.lang})`))}}getBestVoice(){if(!this.synth)return null;const t=this.synth.getVoices();if(t.length===0)return null;const e=["Google US English","Google UK English Female","Google UK English Male","Microsoft David","Microsoft Zira","Microsoft Mark","Alex","Samantha","Daniel","en-US","en_US","en-GB","en_GB","en-","en_"];for(const n of e){const a=t.find(s=>s.name.includes(n)||s.lang.startsWith(n));if(a)return console.log("[Voice] Selected voice:",a.name,a.lang),a}return console.log("[Voice] Using fallback voice:",t[0]?.name),t[0]||null}speak(t,e="normal",n){if(!this.synth||!this.enabled){console.log("[Voice] Skipping - synth:",!!this.synth,"enabled:",this.enabled),n?.onComplete?.();return}e==="critical"?(this.speakQueue.unshift({text:t,priority:e,onComplete:n?.onComplete,voiceType:n?.voiceType}),this.synth.cancel(),this.isSpeaking=!1):this.speakQueue.push({text:t,priority:e,onComplete:n?.onComplete,voiceType:n?.voiceType}),this.processQueue()}processQueue(){if(this.isSpeaking||this.speakQueue.length===0||!this.synth)return;const t=this.speakQueue.shift();if(!t)return;this.isSpeaking=!0,this.currentOnComplete=t.onComplete||null;const e=new SpeechSynthesisUtterance(t.text);e.lang="en-US";const n=this.getBestVoice();switch(n&&(e.voice=n),t.voiceType){case"atc":e.rate=1.2,e.pitch=1.1;break;case"sarah":e.rate=.9,e.pitch=1.3;break;default:e.rate=t.priority==="critical"?1.1:1,e.pitch=1}e.volume=1,e.onstart=()=>{console.log("[Voice] Speaking:",t.text.substring(0,40)+"...")},e.onend=()=>{console.log("[Voice] Finished");const a=this.currentOnComplete;this.isSpeaking=!1,this.currentOnComplete=null,a&&setTimeout(()=>a(),100),setTimeout(()=>this.processQueue(),200)},e.onerror=a=>{console.error("[Voice] Error:",a.error);const s=this.currentOnComplete;this.isSpeaking=!1,this.currentOnComplete=null,s&&setTimeout(()=>s(),100),setTimeout(()=>this.processQueue(),100)},this.synth.cancel(),setTimeout(()=>{if(this.synth)try{this.synth.speak(e)}catch(a){console.error("[Voice] Speak error:",a),this.isSpeaking=!1}},50)}speakAlert(t,e){if(!this.enabled)return;let n="",a="normal";switch(t){case"CRITICAL":n="Critical Alert. ",a="critical";break;case"WARNING":n="Warning. ",a="high";break;default:n="",a="normal"}const s=this.cleanForSpeech(e);this.speak(n+s,a)}speakInstruction(t){this.speak(t,"normal")}speakATC(t,e){this.speak(this.cleanForSpeech(t),"high",{voiceType:"atc",onComplete:e})}speakSarah(t,e){this.speak(t,"normal",{voiceType:"sarah",onComplete:e})}speakNarrative(t,e){this.speak(this.cleanForSpeech(t),"normal",{voiceType:"narrator",onComplete:e})}cleanForSpeech(t){return t.replace(/FL(\d+)/g,"flight level $1").replace(/(\d+)kt/gi,"$1 knots").replace(/(\d+)nm/gi,"$1 nautical miles").replace(/(\d+)ft/gi,"$1 feet").replace(/(\d+)fpm/gi,"$1 feet per minute").replace(/TCAS/g,"T-CAS").replace(/\bRA\b/g,"resolution advisory").replace(/NMAC/g,"near mid-air collision").replace(/ADS-B/g,"ADS-B").replace(/ETA/g,"estimated time of arrival").replace(/NORAD/g,"NORAD").replace(/\bFBI\b/g,"F-B-I").replace(/\bTSA\b/g,"T-S-A").replace(/\bFAA\b/g,"F-A-A").replace(/SU-35/g,"S-U 35").replace(/F-22/g,"F-22").replace(/F-15/g,"F-15").replace(/EF-3/g,"E-F 3").replace(/Boeing 737/g,"Boeing 737").replace(/AAL(\d+)/g,"American $1").replace(/UAL(\d+)/g,"United $1").replace(/DAL(\d+)/g,"Delta $1").replace(/SWA(\d+)/g,"Southwest $1").replace(/BAW(\d+)/g,"British Airways $1").replace(/AFR(\d+)/g,"Air France $1").replace(/FDX(\d+)/g,"FedEx $1").replace(/JBU(\d+)/g,"JetBlue $1").replace(/NKS(\d+)/g,"Spirit $1").replace(/ASA(\d+)/g,"Alaska $1").replace(/AIC(\d+)/g,"Air India $1").replace(/QFA(\d+)/g,"Qantas $1").replace(/UAE(\d+)/g,"Emirates $1").replace(/[-]/g,", ").replace(/[!]+/g,".").replace(/\s+/g," ").trim()}setEnabled(t){this.enabled=t,!t&&this.synth&&(this.synth.cancel(),this.speakQueue=[],this.isSpeaking=!1),console.log("[Voice] Enabled:",t)}isEnabled(){return this.enabled}cancel(){this.synth?.cancel(),this.speakQueue=[],this.isSpeaking=!1}forceInit(){if(this.synth&&!this.initialized){this.initialized=!0;const t=new SpeechSynthesisUtterance("");t.volume=0,this.synth.speak(t),this.loadVoices(),console.log("[Voice] Force initialized on user interaction")}}test(){console.log("[Voice] Testing..."),this.speak("Voice notification system online. Testing one two three.","normal")}getStatus(){return{available:!!this.synth,enabled:this.enabled,initialized:this.initialized,voicesLoaded:this.voicesLoaded,voiceCount:this.synth?.getVoices().length||0,queueLength:this.speakQueue.length,isSpeaking:this.isSpeaking}}}const Pc=new Eq;if(typeof window<"u"){const i=()=>{Pc.forceInit(),window.removeEventListener("click",i),window.removeEventListener("keydown",i),window.removeEventListener("touchstart",i)};window.addEventListener("click",i,{once:!0}),window.addEventListener("keydown",i,{once:!0}),window.addEventListener("touchstart",i,{once:!0}),window.VoiceNotification=Pc}class wq{audioContext=null;masterGain=null;isPlaying=!1;scheduledNodes=[];notes={C3:130.81,D3:146.83,E3:164.81,F3:174.61,G3:196,A3:220,Bb3:233.08,B3:246.94,C4:261.63,D4:293.66,E4:329.63,F4:349.23,G4:392,A4:440,Bb4:466.16,B4:493.88,C5:523.25,D5:587.33,E5:659.26,F5:698.46,G5:783.99,A5:880};getContext(){return this.audioContext||(this.audioContext=new AudioContext),this.audioContext}createBrass(t,e,n,a,s=.3){const o=t.createOscillator(),c=t.createGain(),f=t.createBiquadFilter();return o.type="sawtooth",o.frequency.value=e,f.type="lowpass",f.frequency.value=2e3,f.Q.value=1,c.gain.setValueAtTime(0,n),c.gain.linearRampToValueAtTime(s,n+.05),c.gain.setValueAtTime(s*.8,n+.1),c.gain.linearRampToValueAtTime(0,n+a),o.connect(f),f.connect(c),c.connect(this.masterGain),o.start(n),o.stop(n+a),this.scheduledNodes.push(o),o}createStrings(t,e,n,a,s=.15){const o=[];return[-5,0,5,7].forEach(c=>{const f=t.createOscillator(),d=t.createGain();f.type="sawtooth",f.frequency.value=e,f.detune.value=c,d.gain.setValueAtTime(0,n),d.gain.linearRampToValueAtTime(s/4,n+.3),d.gain.setValueAtTime(s/4,n+a-.3),d.gain.linearRampToValueAtTime(0,n+a),f.connect(d),d.connect(this.masterGain),f.start(n),f.stop(n+a),this.scheduledNodes.push(f),o.push(f)}),o}createDrum(t,e,n){const a=t.createOscillator(),s=t.createGain();n==="snare"&&this.createNoise(t,e,.1),(n==="kick"||n==="timpani")&&(a.type="sine",a.frequency.setValueAtTime(n==="timpani"?80:150,e),a.frequency.exponentialRampToValueAtTime(n==="timpani"?60:50,e+.1),s.gain.setValueAtTime(.5,e),s.gain.exponentialRampToValueAtTime(.01,e+(n==="timpani"?.8:.3)),a.connect(s),s.connect(this.masterGain),a.start(e),a.stop(e+.8),this.scheduledNodes.push(a))}createNoise(t,e,n){const a=t.sampleRate*n,s=t.createBuffer(1,a,t.sampleRate),o=s.getChannelData(0);for(let g=0;g<a;g++)o[g]=Math.random()*2-1;const c=t.createBufferSource(),f=t.createGain(),d=t.createBiquadFilter();c.buffer=s,d.type="highpass",d.frequency.value=1e3,f.gain.setValueAtTime(.3,e),f.gain.exponentialRampToValueAtTime(.01,e+n),c.connect(d),d.connect(f),f.connect(this.masterGain),c.start(e),c.stop(e+n),this.scheduledNodes.push(c)}play(){if(this.isPlaying)return;const t=this.getContext();t.state==="suspended"&&t.resume(),this.isPlaying=!0,this.masterGain=t.createGain(),this.masterGain.gain.value=.6,this.masterGain.connect(t.destination);const e=t.currentTime,a=60/100,s=[{note:"G4",start:0,dur:a*2},{note:"C5",start:a*2,dur:a},{note:"Eb5",start:a*3,dur:a},{note:"G5",start:a*4,dur:a*2},{note:"F5",start:a*6,dur:a},{note:"Eb5",start:a*7,dur:a},{note:"C5",start:a*8,dur:a*1.5},{note:"D5",start:a*9.5,dur:a*.5},{note:"Eb5",start:a*10,dur:a*2},{note:"G5",start:a*12,dur:a*4},{note:"F5",start:a*16,dur:a},{note:"Eb5",start:a*17,dur:a},{note:"D5",start:a*18,dur:a},{note:"C5",start:a*19,dur:a*3}];this.notes.Eb4=311.13,this.notes.Eb5=622.25,s.forEach(({note:d,start:g,dur:y})=>{this.createBrass(t,this.notes[d],e+g,y,.25)}),[{notes:["C4","Eb4","G4"],start:0,dur:a*4},{notes:["Bb3","D4","F4"],start:a*4,dur:a*4},{notes:["C4","Eb4","G4"],start:a*8,dur:a*4},{notes:["C4","Eb4","G4"],start:a*12,dur:a*4},{notes:["Bb3","D4","F4"],start:a*16,dur:a*2},{notes:["C4","Eb4","G4"],start:a*18,dur:a*4}].forEach(({notes:d,start:g,dur:y})=>{d.forEach(x=>{this.createStrings(t,this.notes[x],e+g,y,.12)})}),[{type:"timpani",time:0},{type:"timpani",time:a*4},{type:"timpani",time:a*8},{type:"timpani",time:a*12},{type:"timpani",time:a*16},{type:"timpani",time:a*18},{type:"timpani",time:a*20}].forEach(({type:d,time:g})=>{this.createDrum(t,e+g,d)});const f=a*22;setTimeout(()=>{this.isPlaying=!1},f*1e3)}stop(){if(this.isPlaying){if(this.isPlaying=!1,this.masterGain){const t=this.getContext();this.masterGain.gain.linearRampToValueAtTime(0,t.currentTime+.5)}this.scheduledNodes=[]}}isActive(){return this.isPlaying}}const kw=new wq,Cq={narrator:{languageCode:"en-US",name:"en-US-Neural2-D",pitch:0,speakingRate:1},atc:{languageCode:"en-US",name:"en-US-Neural2-J",pitch:0,speakingRate:1.15},controller_e97:{languageCode:"en-US",name:"en-US-Neural2-A",pitch:1,speakingRate:1.1},captain_sharma:{languageCode:"en-IN",name:"en-IN-Neural2-B",pitch:-2,speakingRate:.95},fa_priya:{languageCode:"en-IN",name:"en-IN-Neural2-A",pitch:2,speakingRate:1},hijacker_norway:{languageCode:"nb-NO",name:"nb-NO-Wavenet-B",pitch:-1,speakingRate:.9},captain_williams:{languageCode:"en-AU",name:"en-AU-Neural2-B",pitch:-2,speakingRate:.95},sarah:{languageCode:"en-AU",name:"en-AU-Neural2-A",pitch:3,speakingRate:1.1},hijacker_sweden:{languageCode:"sv-SE",name:"sv-SE-Wavenet-A",pitch:0,speakingRate:.85},british_crew:{languageCode:"en-GB",name:"en-GB-Neural2-B",pitch:0,speakingRate:1},pilot_american:{languageCode:"en-US",name:"en-US-Neural2-I",pitch:-1,speakingRate:1.05},pilot_french:{languageCode:"fr-FR",name:"fr-FR-Neural2-B",pitch:0,speakingRate:.95},pilot_german:{languageCode:"de-DE",name:"de-DE-Neural2-B",pitch:-1,speakingRate:1},pilot_emirates:{languageCode:"ar-XA",name:"ar-XA-Wavenet-B",pitch:0,speakingRate:.9}},Rq={AAL:"pilot_american",UAL:"pilot_american",DAL:"pilot_american",SWA:"pilot_american",JBU:"pilot_american",ASA:"pilot_american",FDX:"pilot_american",AIC:"captain_sharma",QFA:"captain_williams",BAW:"british_crew",AFR:"pilot_french",DLH:"pilot_german",UAE:"pilot_emirates"},Dq={"Jeg krever at dette flyet lander i Wakanda umiddelbart!":"I demand that this plane lands in Wakanda immediately!","Ingen bevegelse! Jeg har kontroll over dette flyet n.":"No movement! I have control of this plane now.","Wakanda vil hre om dette. Dere vil alle betale.":"Wakanda will hear about this. You will all pay.","Still! Eller det blir konsekvenser.":"Quiet! Or there will be consequences."},Lq={"Nej... du kan inte...":"No... you cannot...","Vakanda fr alltid...":"Wakanda forever..."};class Oq{apiKey;audioQueue=[];isPlaying=!1;currentAudio=null;audioContext=null;enabled=!0;volume=1;audioCache=new Map;radioEffectEnabled=!0;useBrowserFallback=!1;constructor(){this.apiKey="AIzaSyDW-DG3v9N-bsUua0c93xM5Id9l2BvaaLo"}getAudioContext(){return this.audioContext||(this.audioContext=new AudioContext),this.audioContext}createRadioEffectChain(t,e){const n=t.createBiquadFilter();n.type="lowpass",n.frequency.value=3400,n.Q.value=1;const a=t.createBiquadFilter();a.type="highpass",a.frequency.value=300,a.Q.value=1;const s=t.createBiquadFilter();s.type="peaking",s.frequency.value=1500,s.gain.value=3,s.Q.value=.8;const o=t.createWaveShaper();o.curve=this.makeDistortionCurve(5),o.oversample="2x";const c=t.createGain();return c.gain.value=this.volume*1.2,e.connect(a),a.connect(n),n.connect(s),s.connect(o),o.connect(c),c}makeDistortionCurve(t){const n=new ArrayBuffer(1024),a=new Float32Array(n);for(let s=0;s<256;s++){const o=s*2/256-1;a[s]=(Math.PI+t)*o/(Math.PI+t*Math.abs(o))}return a}addRadioClick(t,e,n){const a=t.createOscillator(),s=t.createGain();a.frequency.value=1200,a.type="square",s.gain.setValueAtTime(0,n),s.gain.linearRampToValueAtTime(.1*this.volume,n+.005),s.gain.exponentialRampToValueAtTime(.001,n+.03),a.connect(s),s.connect(e),a.start(n),a.stop(n+.03)}async synthesize(t,e){const n=`${e}:${t}`;if(this.audioCache.has(n))return this.audioCache.get(n);const a=Cq[e],s=await fetch(`https://texttospeech.googleapis.com/v1/text:synthesize?key=${this.apiKey}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({input:{text:t},voice:{languageCode:a.languageCode,name:a.name},audioConfig:{audioEncoding:"MP3",pitch:a.pitch,speakingRate:a.speakingRate}})});if(!s.ok){const f=await s.text();throw console.error("[CloudTTS] API error:",f),new Error(`TTS API error: ${s.status}`)}const c=(await s.json()).audioContent;return this.audioCache.set(n,c),c}async playAudio(t,e=!1){const n=atob(t),a=new Uint8Array(n.length);for(let s=0;s<n.length;s++)a[s]=n.charCodeAt(s);return e&&this.radioEffectEnabled?this.playWithRadioEffect(a.buffer):this.playStandard(t)}async playStandard(t){return new Promise((e,n)=>{const a=new Audio(`data:audio/mp3;base64,${t}`);a.volume=this.volume,this.currentAudio=a,a.onended=()=>{this.currentAudio=null,e()},a.onerror=s=>{this.currentAudio=null,n(s)},a.play().catch(n)})}async speakWithBrowserFallback(t){return new Promise((e,n)=>{if(!("speechSynthesis"in window)){n(new Error("SpeechSynthesis not supported"));return}const a=new SpeechSynthesisUtterance(t);a.rate=1,a.pitch=1,a.volume=this.volume;const s=speechSynthesis.getVoices(),o=s.find(c=>c.lang.startsWith("en")&&c.name.includes("Google"))||s.find(c=>c.lang.startsWith("en-US"))||s.find(c=>c.lang.startsWith("en"));o&&(a.voice=o),a.onend=()=>e(),a.onerror=c=>n(c),speechSynthesis.speak(a)})}async playWithRadioEffect(t){return new Promise(async(e,n)=>{try{const a=this.getAudioContext();a.state==="suspended"&&await a.resume();const s=await a.decodeAudioData(t.slice(0)),o=a.createBufferSource();o.buffer=s,this.createRadioEffectChain(a,o).connect(a.destination),this.addRadioClick(a,a.destination,a.currentTime);const f=s.duration;this.addRadioClick(a,a.destination,a.currentTime+f-.02),o.onended=()=>{e()},o.start(0)}catch(a){console.error("[CloudTTS] Radio effect error, falling back to standard:",a),n(a)}})}async processQueue(){if(this.isPlaying||this.audioQueue.length===0)return;this.isPlaying=!0;const t=this.audioQueue.shift();try{if(!this.enabled){console.log("[CloudTTS] Disabled, skipping:",t.text.substring(0,50)),this.isPlaying=!1,this.processQueue();return}if(this.useBrowserFallback){console.log("[CloudTTS] Using browser fallback mode"),await this.speakWithBrowserFallback(t.text),t.onComplete?.(),this.isPlaying=!1,setTimeout(()=>this.processQueue(),100);return}const e=await this.synthesize(t.text,t.character);await this.playAudio(e,t.applyRadioEffect??!1),t.onComplete?.()}catch(e){console.error("[CloudTTS] Cloud TTS failed:",e)}this.isPlaying=!1,setTimeout(()=>this.processQueue(),100)}shouldApplyRadioEffect(t){return t!=="narrator"}speak(t,e,n){if(!this.apiKey){console.warn("[CloudTTS] No API key, skipping"),n?.();return}const a=this.shouldApplyRadioEffect(e);this.audioQueue.push({text:t,character:e,onComplete:n,applyRadioEffect:a}),this.processQueue()}speakNarrator(t,e){this.speak(t,"narrator",e)}speakATC(t,e){this.speak(t,"atc",e)}speakCaptainSharma(t,e){this.speak(t,"captain_sharma",e)}speakPriya(t,e){this.speak(t,"fa_priya",e)}speakHijackerNorway(t,e){this.speak(t,"hijacker_norway",e)}speakCaptainWilliams(t,e){this.speak(t,"captain_williams",e)}speakSarah(t,e){this.speak(t,"sarah",e)}speakHijackerSweden(t,e){this.speak(t,"hijacker_sweden",e)}speakBritishCrew(t,e){this.speak(t,"british_crew",e)}speakControllerE97(t,e){this.speak(t,"controller_e97",e)}speakPilot(t,e,n){const a=Rq[t]||"pilot_american",s=this.addPilotPersonality(e,t);this.speak(s,a,n)}addPilotPersonality(t,e){if(["AAL","UAL","DAL","SWA","JBU","ASA","FDX"].includes(e)){const n=[t,`Roger that, ${t}`,`Copy, ${t}`,`Wilco, ${t}`,`You got it, ${t}`],a=[""," Appreciate it."," Thanks for the vectors."," Have a good one.",""];return n[Math.floor(Math.random()*n.length)]+a[Math.floor(Math.random()*a.length)]}if(["QFA"].includes(e)){const n=[t,`Roger, ${t}`,`Copy that, ${t}`,`No worries, ${t}`,`Cheers, ${t}`],a=[""," She'll be right."," Good on ya, mate.","",""];return n[Math.floor(Math.random()*n.length)]+a[Math.floor(Math.random()*a.length)]}if(["BAW"].includes(e)){const n=["Lovely weather for flying, what?","I'd tell you a joke about turbulence, but it's too bumpy.","Why do pilots make good comedians? They always land their jokes.","Bit of a queue at Heathrow, I expect.","","",""],a=n[Math.floor(Math.random()*n.length)];return`Right-o, ${t}.${a?" "+a:" Cheers."}`}return["AFR"].includes(e)?`Affirm, ${t}`:["DLH"].includes(e)?`Jawohl, ${t}`:["AIC"].includes(e)?Math.random()>.5?`Roger, ${t}`:`Affirm, ${t}. Thank you.`:["UAE"].includes(e)?`Roger, ${t}`:`Roger, ${t}`}cancel(){this.audioQueue=[],this.currentAudio&&(this.currentAudio.pause(),this.currentAudio=null),this.isPlaying=!1}setEnabled(t){this.enabled=t,t||this.cancel()}setVolume(t){this.volume=Math.max(0,Math.min(1,t)),this.currentAudio&&(this.currentAudio.volume=this.volume)}isEnabled(){return this.enabled}getVolume(){return this.volume}getTranslation(t,e){return(e==="norwegian"?Dq:Lq)[t]||null}setBrowserFallback(t){this.useBrowserFallback=t,console.log("[CloudTTS] Browser fallback mode:",t?"ENABLED":"DISABLED")}isBrowserFallback(){return this.useBrowserFallback}}const zr=new Oq,Nq={id:"conflict-detection",title:"Conflict Detection & Resolution",description:"Watch the AI predict and help resolve a potential mid-air conflict",icon:"alert-triangle",duration:2,initialState:{tracks:[{trackId:"TRK-DEMO-001",callsign:"UAL123",latitudeDeg:42.2,longitudeDeg:-71.8,altitudeFt:35e3,headingDeg:90,speedKt:450,verticalRateFpm:0,confidence:.95,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-DEMO-002",callsign:"DAL456",latitudeDeg:42.2,longitudeDeg:-70.8,altitudeFt:35e3,headingDeg:270,speedKt:460,verticalRateFpm:0,confidence:.93,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-DEMO-003",callsign:"AAL789",latitudeDeg:41.5,longitudeDeg:-71.2,altitudeFt:28e3,headingDeg:45,speedKt:420,verticalRateFpm:1500,confidence:.97,sequence:1,updatedAt:new Date().toISOString()}],alerts:[],predictions:[]},steps:[{id:"intro",narrative:"Welcome to the Conflict Detection scenario. You'll see how ATCS-NG uses AI to predict potential conflicts between aircraft before they become dangerous.",spotlight:{type:"component",id:"radar"},autoAdvance:5e3},{id:"observe-aircraft",narrative:"Notice UAL123 and DAL456 on the radar. They're both at FL350, flying directly toward each other. The AI is continuously analyzing their trajectories.",spotlight:{type:"flight",callsign:"UAL123"},autoAdvance:5e3},{id:"prediction-appears",narrative:"The AI has detected a potential conflict! A prediction has appeared in the AI Predictions panel with an 87% probability of conflict in approximately 3 minutes.",spotlight:{type:"component",id:"predictions"},events:[{delay:500,type:"addPrediction",payload:{id:"PRED-DEMO-001",predictionType:"CONFLICT",involvedFlights:["UAL123","DAL456"],probability:.87,predictedTime:new Date(Date.now()+18e4).toISOString(),description:"High probability conflict at intersection - both aircraft at FL350 on converging headings"}}],autoAdvance:6e3},{id:"click-prediction",narrative:"Click on the prediction to see more details about the potential conflict.",spotlight:{type:"prediction",predictionId:"PRED-DEMO-001"},interaction:{type:"click",target:"PRED-DEMO-001",hint:"Click the prediction card to view details"}},{id:"resolution-advisory",narrative:"The system recommends having UAL123 climb to FL370. This vertical separation will safely resolve the conflict while minimizing route deviation.",spotlight:{type:"component",id:"predictions"},autoAdvance:5e3},{id:"aircraft-climbs",narrative:"UAL123 is now climbing to FL370. Watch the altitude change in the flight strip and on the radar data block.",spotlight:{type:"flight",callsign:"UAL123"},events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-DEMO-001",verticalRateFpm:2e3,altitudeFt:36e3}},{delay:2e3,type:"updateTrack",payload:{trackId:"TRK-DEMO-001",altitudeFt:37e3,verticalRateFpm:0}}],autoAdvance:5e3},{id:"conflict-resolved",narrative:"Excellent! With 2,000 feet of vertical separation now established, the conflict probability has dropped to zero. The prediction is cleared.",spotlight:{type:"component",id:"predictions"},events:[{delay:500,type:"updatePrediction",payload:{id:"PRED-DEMO-001",probability:.05,description:"Conflict resolved - vertical separation established at FL370/FL350"}},{delay:2e3,type:"removePrediction",payload:{id:"PRED-DEMO-001"}}],autoAdvance:5e3},{id:"summary",narrative:"This scenario demonstrated how ATCS-NG's AI continuously monitors traffic, predicts conflicts minutes in advance, and provides resolution advisories to keep aircraft safely separated.",spotlight:{type:"component",id:"radar"},autoAdvance:5e3}]},Uq={id:"weather-hazard",title:"Weather Hazard Avoidance",description:"See how the system integrates weather data and helps route traffic safely",icon:"cloud",duration:1.5,initialState:{tracks:[{trackId:"TRK-DEMO-W01",callsign:"SWA101",latitudeDeg:42,longitudeDeg:-72,altitudeFt:32e3,headingDeg:90,speedKt:430,verticalRateFpm:0,confidence:.96,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-DEMO-W02",callsign:"JBU202",latitudeDeg:41.8,longitudeDeg:-71.8,altitudeFt:28e3,headingDeg:75,speedKt:410,verticalRateFpm:0,confidence:.94,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-DEMO-W03",callsign:"AAL303",latitudeDeg:42.3,longitudeDeg:-71.5,altitudeFt:36e3,headingDeg:120,speedKt:450,verticalRateFpm:0,confidence:.98,sequence:1,updatedAt:new Date().toISOString()}],alerts:[],predictions:[]},steps:[{id:"intro",narrative:"This scenario shows how ATCS-NG integrates real-time weather data and helps controllers route traffic around hazardous conditions.",spotlight:{type:"component",id:"radar"},autoAdvance:4e3},{id:"weather-appears",narrative:"A severe thunderstorm cell has been detected! The weather service has identified an area of severe turbulence and icing. Watch the radar for the hazard overlay.",spotlight:{type:"component",id:"radar"},events:[{delay:1e3,type:"addAlert",payload:{alertId:"ALT-DEMO-W01",severity:"WARNING",alertType:"WEATHER_HAZARD",message:"Severe thunderstorm cell detected - FL280-FL380, 25nm radius centered 42.0N 71.0W. Severe turbulence and icing reported.",involvedFlightIds:["SWA101","JBU202","AAL303"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}],autoAdvance:5e3},{id:"alert-panel",narrative:"A weather hazard alert has appeared in the Alerts panel. The system has identified three aircraft that may be affected by this weather.",spotlight:{type:"component",id:"alerts"},autoAdvance:4e3},{id:"acknowledge-alert",narrative:"Acknowledge the alert to indicate you've seen the weather information and are taking action.",spotlight:{type:"alert",alertId:"ALT-DEMO-W01"},interaction:{type:"acknowledge",target:"ALT-DEMO-W01",hint:"Click ACK to acknowledge the weather alert"}},{id:"aircraft-deviating",narrative:"Aircraft are now being vectored around the weather cell. Watch SWA101 turn north to avoid the hazard area.",spotlight:{type:"flight",callsign:"SWA101"},events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-DEMO-W01",headingDeg:45}},{delay:1500,type:"updateTrack",payload:{trackId:"TRK-DEMO-W02",headingDeg:30}}],autoAdvance:5e3},{id:"summary",narrative:"Weather integration ensures controllers have real-time hazard information to keep flights safe. The system automatically tracks which aircraft may be affected and assists with routing decisions.",spotlight:{type:"component",id:"radar"},autoAdvance:4e3}]},Iq={id:"loss-of-separation",title:"Loss of Separation",description:"Experience how the system handles critical separation alerts",icon:"shield",duration:1,initialState:{tracks:[{trackId:"TRK-DEMO-L01",callsign:"FFT401",latitudeDeg:42.1,longitudeDeg:-71.3,altitudeFt:33e3,headingDeg:180,speedKt:440,verticalRateFpm:0,confidence:.94,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-DEMO-L02",callsign:"SKW502",latitudeDeg:42.05,longitudeDeg:-71.28,altitudeFt:33200,headingDeg:350,speedKt:435,verticalRateFpm:0,confidence:.92,sequence:1,updatedAt:new Date().toISOString()}],alerts:[],predictions:[]},steps:[{id:"intro",narrative:"This scenario demonstrates how ATCS-NG handles the most critical situation in air traffic control: loss of separation between aircraft.",spotlight:{type:"component",id:"radar"},autoAdvance:4e3},{id:"aircraft-close",narrative:"FFT401 and SKW502 are dangerously close - only 3.2nm lateral separation and 200ft vertical. This violates the required 5nm/1000ft minimum.",spotlight:{type:"flight",callsign:"FFT401"},autoAdvance:4e3},{id:"critical-alert",narrative:"CRITICAL ALERT! The system has detected loss of separation. This is the highest priority alert - notice the flashing red indicator and urgent styling.",spotlight:{type:"component",id:"alerts"},events:[{delay:500,type:"addAlert",payload:{alertId:"ALT-DEMO-L01",severity:"CRITICAL",alertType:"LOSS_OF_SEPARATION",message:"LOSS OF SEPARATION: FFT401 and SKW502 - 3.2nm lateral, 200ft vertical. Immediate action required!",involvedFlightIds:["FFT401","SKW502"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}],autoAdvance:4e3},{id:"acknowledge-critical",narrative:"Critical alerts require immediate acknowledgment to confirm the controller is aware and taking action.",spotlight:{type:"alert",alertId:"ALT-DEMO-L01"},interaction:{type:"acknowledge",target:"ALT-DEMO-L01",hint:"Acknowledge the critical alert immediately"}},{id:"separation-restored",narrative:"Emergency separation maneuvers are in progress. FFT401 is descending while SKW502 climbs to restore safe separation.",spotlight:{type:"component",id:"radar"},events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-DEMO-L01",verticalRateFpm:-2500,altitudeFt:31e3}},{delay:0,type:"updateTrack",payload:{trackId:"TRK-DEMO-L02",verticalRateFpm:2500,altitudeFt:35e3}}],autoAdvance:5e3},{id:"summary",narrative:"Loss of separation events are rare but critical. ATCS-NG ensures controllers are immediately alerted with clear, actionable information to restore safety.",spotlight:{type:"component",id:"radar"},autoAdvance:4e3}]},Pq={id:"route-deviation",title:"Route Deviation Detection",description:"See how the system monitors and alerts on aircraft deviating from assigned routes",icon:"navigation",duration:1,initialState:{tracks:[{trackId:"TRK-DEMO-R01",callsign:"ASA601",latitudeDeg:42.3,longitudeDeg:-71.6,altitudeFt:29e3,headingDeg:85,speedKt:420,verticalRateFpm:0,confidence:.96,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-DEMO-R02",callsign:"UAL702",latitudeDeg:41.9,longitudeDeg:-71.2,altitudeFt:34e3,headingDeg:270,speedKt:445,verticalRateFpm:0,confidence:.95,sequence:1,updatedAt:new Date().toISOString()}],alerts:[],predictions:[]},steps:[{id:"intro",narrative:"Aircraft must follow their assigned routes precisely. ATCS-NG continuously monitors for deviations and alerts controllers when aircraft stray from their flight paths.",spotlight:{type:"component",id:"radar"},autoAdvance:4e3},{id:"normal-operation",narrative:"ASA601 is currently on its assigned route heading 085 toward Boston. The system is tracking its position relative to the filed flight plan.",spotlight:{type:"flight",callsign:"ASA601"},autoAdvance:4e3},{id:"deviation-occurs",narrative:"ASA601 has started deviating from its assigned route! The aircraft is now 2.1nm off course and continuing to drift.",spotlight:{type:"flight",callsign:"ASA601"},events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-DEMO-R01",headingDeg:95,latitudeDeg:42.28}},{delay:1500,type:"addAlert",payload:{alertId:"ALT-DEMO-R01",severity:"INFO",alertType:"DEVIATION_DETECTED",message:"ASA601 deviating from assigned route - 2.1nm off course, heading 095 (assigned 085)",involvedFlightIds:["ASA601"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}],autoAdvance:5e3},{id:"view-alert",narrative:"A deviation alert has appeared. Note this is an INFO-level alert - not immediately dangerous, but requires controller awareness.",spotlight:{type:"alert",alertId:"ALT-DEMO-R01"},autoAdvance:4e3},{id:"acknowledge-deviation",narrative:"Acknowledge the deviation to indicate you've noticed and will follow up with the pilot.",spotlight:{type:"alert",alertId:"ALT-DEMO-R01"},interaction:{type:"acknowledge",target:"ALT-DEMO-R01",hint:"Acknowledge the deviation alert"}},{id:"correction",narrative:"After controller intervention, ASA601 is correcting back to its assigned route. The heading is returning to 085.",spotlight:{type:"flight",callsign:"ASA601"},events:[{delay:500,type:"updateTrack",payload:{trackId:"TRK-DEMO-R01",headingDeg:80}},{delay:2e3,type:"updateTrack",payload:{trackId:"TRK-DEMO-R01",headingDeg:85}}],autoAdvance:4e3},{id:"summary",narrative:"Route deviation detection helps maintain orderly traffic flow and prevents aircraft from entering restricted airspace or conflicting with other traffic.",spotlight:{type:"component",id:"radar"},autoAdvance:4e3}]},zq={id:"sector-handoff",title:"Sector Handoff",description:"Learn how aircraft are transferred between controller sectors",icon:"arrow-right-left",duration:1.5,initialState:{tracks:[{trackId:"TRK-DEMO-H01",callsign:"DAL801",latitudeDeg:42.4,longitudeDeg:-71.8,altitudeFt:35e3,headingDeg:90,speedKt:455,verticalRateFpm:0,confidence:.97,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-DEMO-H02",callsign:"AAL902",latitudeDeg:41.8,longitudeDeg:-71.5,altitudeFt:31e3,headingDeg:45,speedKt:430,verticalRateFpm:500,confidence:.94,sequence:1,updatedAt:new Date().toISOString()}],alerts:[],predictions:[]},steps:[{id:"intro",narrative:'Airspace is divided into sectors, each managed by a controller. When aircraft fly from one sector to another, they must be "handed off" to the next controller.',spotlight:{type:"component",id:"radar"},autoAdvance:5e3},{id:"approaching-boundary",narrative:"DAL801 is approaching the sector boundary (shown as a dashed line on the radar). It will soon enter the adjacent sector BOS_34.",spotlight:{type:"flight",callsign:"DAL801"},autoAdvance:4e3},{id:"handoff-pending",narrative:"The system has automatically initiated a handoff request. Notice the flight strip for DAL801 now shows a pending handoff indicator.",spotlight:{type:"component",id:"strips"},events:[{delay:500,type:"addAlert",payload:{alertId:"ALT-DEMO-H01",severity:"INFO",alertType:"DEVIATION_DETECTED",message:"Handoff pending: DAL801  Sector BOS_34. Aircraft 2nm from boundary.",involvedFlightIds:["DAL801"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}],autoAdvance:4e3},{id:"accept-handoff",narrative:"As the receiving controller, you would accept the handoff. Click to simulate accepting control of DAL801.",spotlight:{type:"alert",alertId:"ALT-DEMO-H01"},interaction:{type:"click",target:"ALT-DEMO-H01",hint:"Click to accept the handoff"}},{id:"handoff-complete",narrative:"Handoff complete! DAL801 is now under your control. The flight strip color has updated to indicate active control, and the previous sector has been notified.",spotlight:{type:"flight",callsign:"DAL801"},events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-DEMO-H01",longitudeDeg:-71.5}}],autoAdvance:4e3},{id:"summary",narrative:"Seamless handoffs ensure continuous monitoring of all aircraft. ATCS-NG automates the handoff process while giving controllers clear visibility and control.",spotlight:{type:"component",id:"radar"},autoAdvance:4e3}]},Bq={id:"emergency-declaration",title:"Emergency Declaration",description:"Experience how the system prioritizes and handles aircraft emergencies",icon:"siren",duration:1.5,initialState:{tracks:[{trackId:"TRK-DEMO-E01",callsign:"UAL999",latitudeDeg:42.2,longitudeDeg:-71.4,altitudeFt:28e3,headingDeg:180,speedKt:380,verticalRateFpm:-1500,confidence:.96,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-DEMO-E02",callsign:"SWA111",latitudeDeg:41.9,longitudeDeg:-71.2,altitudeFt:25e3,headingDeg:90,speedKt:420,verticalRateFpm:0,confidence:.95,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-DEMO-E03",callsign:"JBU222",latitudeDeg:42,longitudeDeg:-71.6,altitudeFt:3e4,headingDeg:45,speedKt:410,verticalRateFpm:0,confidence:.94,sequence:1,updatedAt:new Date().toISOString()}],alerts:[],predictions:[]},steps:[{id:"intro",narrative:"Aircraft emergencies require immediate attention and priority handling. This scenario shows how ATCS-NG helps controllers manage emergency situations.",spotlight:{type:"component",id:"radar"},autoAdvance:4e3},{id:"normal-traffic",narrative:"Three aircraft are in the sector operating normally. UAL999 is descending through FL280 toward Boston Logan.",spotlight:{type:"flight",callsign:"UAL999"},autoAdvance:4e3},{id:"emergency-declared",narrative:"EMERGENCY! UAL999 has squawked 7700 - the universal emergency code. The pilot reports an engine fire and requests immediate priority handling.",spotlight:{type:"component",id:"alerts"},events:[{delay:500,type:"addAlert",payload:{alertId:"ALT-DEMO-E01",severity:"CRITICAL",alertType:"LOSS_OF_SEPARATION",message:"EMERGENCY: UAL999 squawking 7700 - Engine fire declared. Requesting immediate vectors to BOS. Souls on board: 156.",involvedFlightIds:["UAL999"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}],autoAdvance:4e3},{id:"priority-visual",narrative:"The emergency aircraft is now highlighted with priority visual indicators. Notice the flight strip is emphasized and the radar track is enhanced.",spotlight:{type:"flight",callsign:"UAL999"},autoAdvance:4e3},{id:"acknowledge-emergency",narrative:"Acknowledge the emergency to confirm you're providing priority handling.",spotlight:{type:"alert",alertId:"ALT-DEMO-E01"},interaction:{type:"acknowledge",target:"ALT-DEMO-E01",hint:"Acknowledge the emergency alert"}},{id:"clear-path",narrative:"Other traffic is being vectored clear of the emergency aircraft's path. UAL999 has been given direct routing to Boston Logan runway 4R.",spotlight:{type:"component",id:"radar"},events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-DEMO-E02",headingDeg:120}},{delay:500,type:"updateTrack",payload:{trackId:"TRK-DEMO-E03",headingDeg:315}},{delay:1e3,type:"updateTrack",payload:{trackId:"TRK-DEMO-E01",headingDeg:160,verticalRateFpm:-2e3,altitudeFt:25e3}}],autoAdvance:5e3},{id:"summary",narrative:"Emergency handling in ATCS-NG ensures critical situations get immediate attention with clear visual priority, automatic traffic coordination, and streamlined communications.",spotlight:{type:"component",id:"radar"},autoAdvance:4e3}]},Fq={id:"quick-demo",title:"Quick Demo",description:"2-minute automatic showcase of all ATCS-NG capabilities with dramatic events",icon:"zap",duration:2,initialState:{tracks:[{trackId:"TRK-QD-001",callsign:"UAL123",latitudeDeg:42.4,longitudeDeg:-71.8,altitudeFt:35e3,headingDeg:90,speedKt:450,verticalRateFpm:0,confidence:.96,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-QD-002",callsign:"DAL456",latitudeDeg:42.4,longitudeDeg:-70.6,altitudeFt:35e3,headingDeg:270,speedKt:460,verticalRateFpm:0,confidence:.94,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-QD-003",callsign:"AAL777",latitudeDeg:42,longitudeDeg:-71.4,altitudeFt:28e3,headingDeg:180,speedKt:380,verticalRateFpm:-1e3,confidence:.97,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-QD-004",callsign:"SWA333",latitudeDeg:41.8,longitudeDeg:-71,altitudeFt:24e3,headingDeg:45,speedKt:410,verticalRateFpm:1500,confidence:.95,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-QD-005",callsign:"JBU888",latitudeDeg:42.6,longitudeDeg:-71.2,altitudeFt:32e3,headingDeg:135,speedKt:420,verticalRateFpm:0,confidence:.93,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-QD-006",callsign:"FFT999",latitudeDeg:41.6,longitudeDeg:-71.6,altitudeFt:38e3,headingDeg:0,speedKt:480,verticalRateFpm:0,confidence:.92,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-QD-007",callsign:"ASA601",latitudeDeg:42.2,longitudeDeg:-70.8,altitudeFt:29e3,headingDeg:225,speedKt:400,verticalRateFpm:0,confidence:.94,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-QD-008",callsign:"NKS444",latitudeDeg:41.9,longitudeDeg:-71.8,altitudeFt:31e3,headingDeg:90,speedKt:430,verticalRateFpm:0,confidence:.95,sequence:1,updatedAt:new Date().toISOString()}],alerts:[],predictions:[]},steps:[{id:"intro",narrative:"ATCS-NG Quick Demo  Watch as our AI-powered air traffic control system handles multiple dramatic events in real-time.",spotlight:{type:"component",id:"radar"},autoAdvance:4e3},{id:"traffic-overview",narrative:"8 aircraft currently in sector. Real-time surveillance with sub-second updates. Let's see what happens next...",spotlight:{type:"component",id:"radar"},autoAdvance:4e3},{id:"weather-spawns",narrative:"WEATHER ALERT  Severe thunderstorm cell detected! Three aircraft in the affected corridor.",spotlight:{type:"component",id:"alerts"},events:[{delay:500,type:"addAlert",payload:{alertId:"ALT-QD-WX01",severity:"WARNING",alertType:"WEATHER_HAZARD",message:"Severe thunderstorm cell moving NE at 45kt. Tops to FL450. Affected: JBU888, ASA601, NKS444",involvedFlightIds:["JBU888","ASA601","NKS444"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}],autoAdvance:5e3},{id:"weather-reroute",narrative:"AI recommends rerouting affected aircraft around the storm cell. Executing deviation...",spotlight:{type:"flight",callsign:"JBU888"},events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-QD-005",headingDeg:180}},{delay:500,type:"updateTrack",payload:{trackId:"TRK-QD-007",headingDeg:270}},{delay:1e3,type:"updateTrack",payload:{trackId:"TRK-QD-008",headingDeg:45}},{delay:2500,type:"removeAlert",payload:{alertId:"ALT-QD-WX01"}}],autoAdvance:5e3},{id:"conflict-detected",narrative:"CONFLICT ALERT  UAL123 and DAL456 on collision course! AI predicts 94% probability of conflict in 2 minutes.",spotlight:{type:"component",id:"predictions"},events:[{delay:300,type:"addPrediction",payload:{id:"PRED-QD-001",predictionType:"CONFLICT",involvedFlights:["UAL123","DAL456"],probability:.94,predictedTime:new Date(Date.now()+12e4).toISOString(),description:"IMMINENT CONFLICT: Head-on at FL350. Closure rate 910kt. Time to impact: 2:12"}},{delay:500,type:"addAlert",payload:{alertId:"ALT-QD-CF01",severity:"WARNING",alertType:"CONFLICT_PREDICTED",message:"Conflict predicted: UAL123 vs DAL456 at FL350. Recommend: UAL123 climb FL370 immediately.",involvedFlightIds:["UAL123","DAL456"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}],autoAdvance:5e3},{id:"conflict-resolution",narrative:"Resolution advisory: UAL123 climb to FL370. Executing... Aircraft climbing 2,000 ft/min.",spotlight:{type:"flight",callsign:"UAL123"},events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-QD-001",verticalRateFpm:2500,altitudeFt:36e3}},{delay:2e3,type:"updateTrack",payload:{trackId:"TRK-QD-001",altitudeFt:37e3,verticalRateFpm:0}},{delay:2500,type:"updatePrediction",payload:{id:"PRED-QD-001",probability:.02,description:"Conflict resolved - 2,000ft vertical separation established"}},{delay:3500,type:"removePrediction",payload:{id:"PRED-QD-001"}},{delay:3500,type:"removeAlert",payload:{alertId:"ALT-QD-CF01"}}],autoAdvance:6e3},{id:"conflict-resolved",narrative:"CONFLICT RESOLVED  2,000 feet vertical separation now established. Aircraft safely separated.",spotlight:{type:"component",id:"radar"},autoAdvance:3e3},{id:"emergency-declared",narrative:"MAYDAY MAYDAY  AAL777 squawking 7700! Engine fire declared! 156 souls on board!",spotlight:{type:"flight",callsign:"AAL777"},events:[{delay:0,type:"addAlert",payload:{alertId:"ALT-QD-EM01",severity:"CRITICAL",alertType:"LOSS_OF_SEPARATION",message:"EMERGENCY: AAL777 squawking 7700  ENGINE FIRE. Requesting immediate vectors to BOS. Souls: 156. Fuel: 2 hours.",involvedFlightIds:["AAL777"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}],autoAdvance:4e3},{id:"emergency-priority",narrative:"PRIORITY HANDLING  Vectoring all traffic clear of emergency aircraft. Direct routing to Boston Logan.",spotlight:{type:"component",id:"alerts"},events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-QD-004",headingDeg:135}},{delay:500,type:"updateTrack",payload:{trackId:"TRK-QD-006",headingDeg:45}},{delay:1e3,type:"updateTrack",payload:{trackId:"TRK-QD-003",headingDeg:160,verticalRateFpm:-2500}}],autoAdvance:5e3},{id:"emergency-routing",narrative:"AAL777 cleared direct BOS runway 4R. Emergency services alerted. All traffic clear.",spotlight:{type:"flight",callsign:"AAL777"},events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-QD-003",altitudeFt:22e3}},{delay:2e3,type:"updateTrack",payload:{trackId:"TRK-QD-003",altitudeFt:18e3}}],autoAdvance:5e3},{id:"handoff-initiate",narrative:"SECTOR HANDOFF  SWA333 approaching sector boundary. Initiating handoff to Boston Center.",spotlight:{type:"flight",callsign:"SWA333"},events:[{delay:0,type:"addAlert",payload:{alertId:"ALT-QD-HO01",severity:"INFO",alertType:"DEVIATION_DETECTED",message:"Handoff initiated: SWA333 transferring to Boston Center (BOS_34). Awaiting acceptance.",involvedFlightIds:["SWA333"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}],autoAdvance:4e3},{id:"handoff-complete",narrative:"Handoff accepted. SWA333 now under Boston Center control. Seamless transition complete.",spotlight:{type:"component",id:"strips"},events:[{delay:0,type:"removeAlert",payload:{alertId:"ALT-QD-HO01"}},{delay:1500,type:"removeAlert",payload:{alertId:"ALT-QD-EM01"}}],autoAdvance:4e3},{id:"ai-optimization",narrative:"AI OPTIMIZATION  Route optimization opportunity detected. Potential savings across multiple flights.",spotlight:{type:"component",id:"predictions"},events:[{delay:0,type:"addPrediction",payload:{id:"PRED-QD-OPT1",predictionType:"ROUTE_OPTIMIZATION",involvedFlights:["FFT999","NKS444","ASA601"],probability:.88,predictedTime:new Date(Date.now()+6e4).toISOString(),description:"Direct routing available. Total savings: 2,400 lbs fuel, 8 minutes flight time."}}],autoAdvance:5e3},{id:"optimization-applied",narrative:"Optimization applied  Three aircraft now on direct routing. Fuel saved: 2,400 lbs. Time saved: 8 minutes.",spotlight:{type:"component",id:"predictions"},events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-QD-006",headingDeg:15}},{delay:500,type:"updateTrack",payload:{trackId:"TRK-QD-007",headingDeg:200}},{delay:1e3,type:"updateTrack",payload:{trackId:"TRK-QD-008",headingDeg:75}},{delay:3e3,type:"removePrediction",payload:{id:"PRED-QD-OPT1"}}],autoAdvance:6e3},{id:"all-clear",narrative:"ALL EVENTS RESOLVED  Conflict avoided. Emergency handled. Handoffs complete. Routes optimized.",spotlight:{type:"component",id:"radar"},autoAdvance:5e3},{id:"summary",narrative:"ATCS-NG: AI-powered surveillance  Predictive conflict detection  Emergency prioritization  Seamless coordination  Continuous optimization",spotlight:{type:"component",id:"radar"},autoAdvance:5e3},{id:"end",narrative:"Quick Demo complete. Explore individual scenarios or start the Feature Guide for an in-depth walkthrough.",spotlight:{type:"component",id:"radar"},autoAdvance:5e3}]},kq={id:"feature-guide",title:"Feature Guide",description:"Interactive walkthrough of all ATCS-NG features. Self-paced with hands-on practice.",icon:"book-open",duration:15,initialState:{tracks:[{trackId:"TRK-FG-001",callsign:"UAL100",latitudeDeg:42.3,longitudeDeg:-71.5,altitudeFt:35e3,headingDeg:90,speedKt:450,verticalRateFpm:0,confidence:.96,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-FG-002",callsign:"DAL200",latitudeDeg:42.1,longitudeDeg:-71.2,altitudeFt:28e3,headingDeg:180,speedKt:420,verticalRateFpm:-500,confidence:.94,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-FG-003",callsign:"AAL300",latitudeDeg:41.9,longitudeDeg:-71.8,altitudeFt:32e3,headingDeg:45,speedKt:440,verticalRateFpm:1e3,confidence:.95,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-FG-004",callsign:"SWA400",latitudeDeg:42.5,longitudeDeg:-70.9,altitudeFt:24e3,headingDeg:270,speedKt:380,verticalRateFpm:0,confidence:.93,sequence:1,updatedAt:new Date().toISOString()}],alerts:[{alertId:"ALT-FG-001",severity:"INFO",alertType:"DEVIATION_DETECTED",message:"Advisory: DAL200 approaching sector boundary. Handoff recommended in 5 minutes.",involvedFlightIds:["DAL200"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}],predictions:[{id:"PRED-FG-001",predictionType:"ROUTE_OPTIMIZATION",involvedFlights:["AAL300"],probability:.72,predictedTime:new Date(Date.now()+3e5).toISOString(),description:"Direct routing available to destination. Potential savings: 340 lbs fuel."}]},steps:[{id:"welcome",narrative:"Welcome to the ATCS-NG Feature Guide. This interactive walkthrough will teach you every feature of the controller workstation. Take your time  each step waits for you.",spotlight:{type:"component",id:"radar"},autoAdvance:6e3},{id:"radar-overview",narrative:"RADAR SCOPE  This is your primary surveillance display. All aircraft in your sector appear here with real-time position updates. The scope uses WebGL for smooth 60fps rendering.",spotlight:{type:"component",id:"radar"},autoAdvance:6e3},{id:"track-symbols",narrative:"TRACK SYMBOLS  Each aircraft is represented by a symbol with a data block. The symbol shows position; the data block shows callsign and altitude. Green indicates normal operations.",spotlight:{type:"flight",callsign:"UAL100"},autoAdvance:6e3},{id:"track-select",narrative:"Try clicking on an aircraft to select it. Selected aircraft are highlighted with additional details.",spotlight:{type:"flight",callsign:"UAL100"},interaction:{type:"click",target:"TRK-FG-001",hint:"Click on UAL100 to select it"}},{id:"track-details",narrative:"Excellent! When selected, you can see extended information including heading, speed, and vertical rate. The flight strip on the right also highlights.",spotlight:{type:"flight",callsign:"UAL100"},autoAdvance:5e3},{id:"radar-controls",narrative:"RADAR CONTROLS  Use scroll wheel to zoom, click-and-drag to pan. The radar automatically scales data blocks to avoid overlap at different zoom levels.",spotlight:{type:"component",id:"radar"},autoAdvance:5e3},{id:"strips-intro",narrative:"FLIGHT STRIPS  The right panel displays electronic flight strips for all aircraft in your sector. These replace paper strips with a digital, real-time interface.",spotlight:{type:"component",id:"strips"},autoAdvance:5e3},{id:"strip-anatomy",narrative:"Each strip shows: callsign, aircraft type, origin/destination, altitude, speed, and route. Status indicators show handoff state and any active alerts.",spotlight:{type:"component",id:"strips"},autoAdvance:5e3},{id:"strip-select",narrative:"Click on a flight strip to select that aircraft. The radar will center on it and show extended details.",spotlight:{type:"component",id:"strips"},interaction:{type:"click",target:"TRK-FG-002",hint:"Click on the DAL200 flight strip"}},{id:"strip-actions",narrative:"Flight strips have quick action buttons: Amend (modify flight plan), Handoff (transfer to another sector), and Message (send CPDLC communication).",spotlight:{type:"component",id:"strips"},autoAdvance:5e3},{id:"strip-sorting",narrative:"Strips can be sorted by callsign, altitude, or ETA. Use the sort controls at the top of the panel to organize your traffic list.",spotlight:{type:"component",id:"strips"},autoAdvance:4e3},{id:"alerts-intro",narrative:"ALERTS PANEL  The system continuously monitors for safety-critical conditions. When detected, alerts appear in the alerts panel with severity-coded colors.",spotlight:{type:"component",id:"alerts"},autoAdvance:5e3},{id:"alert-severities",narrative:"SEVERITY LEVELS  CRITICAL (red): Immediate action required. WARNING (orange): Attention needed soon. INFO (blue): Awareness item, no immediate action.",spotlight:{type:"component",id:"alerts"},autoAdvance:5e3},{id:"alert-acknowledge",narrative:"Alerts require acknowledgment to confirm you've seen them. Click the acknowledge button on the current INFO alert.",spotlight:{type:"alert",alertId:"ALT-FG-001"},interaction:{type:"acknowledge",target:"ALT-FG-001",hint:"Click the acknowledge button on the alert"}},{id:"alert-acknowledged",narrative:"Acknowledged alerts remain visible but are marked as seen. This creates an audit trail showing when each controller acknowledged each alert.",spotlight:{type:"component",id:"alerts"},autoAdvance:4e3},{id:"alert-escalation",narrative:"Unacknowledged alerts escalate over time: visual intensity increases, and after 60 seconds, supervisor notification is triggered automatically.",spotlight:{type:"component",id:"alerts"},autoAdvance:4e3},{id:"alert-demo",narrative:"Watch as a new WARNING alert appears. Notice the distinct visual treatment compared to INFO alerts.",spotlight:{type:"component",id:"alerts"},events:[{delay:1e3,type:"addAlert",payload:{alertId:"ALT-FG-002",severity:"WARNING",alertType:"CONFLICT_PREDICTED",message:"Traffic advisory: AAL300 climbing through DAL200 altitude. Monitor separation.",involvedFlightIds:["AAL300","DAL200"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}],autoAdvance:5e3},{id:"predictions-intro",narrative:"AI PREDICTIONS  ATCS-NG uses machine learning to predict future events: conflicts, optimal routes, weather impacts, and traffic patterns.",spotlight:{type:"component",id:"predictions"},autoAdvance:5e3},{id:"prediction-types",narrative:"PREDICTION TYPES  Conflict predictions show probability and time-to-impact. Optimization predictions show fuel and time savings. All predictions include confidence scores.",spotlight:{type:"component",id:"predictions"},autoAdvance:5e3},{id:"prediction-click",narrative:"Click on the route optimization prediction to see detailed information and available actions.",spotlight:{type:"prediction",predictionId:"PRED-FG-001"},interaction:{type:"click",target:"PRED-FG-001",hint:"Click on the prediction card"}},{id:"prediction-actions",narrative:"Predictions offer actions: Accept (implement the recommendation), Dismiss (acknowledge but don't act), or View Details (see full analysis).",spotlight:{type:"component",id:"predictions"},autoAdvance:5e3},{id:"ai-advisory",narrative:"IMPORTANT: AI is always advisory. The controller retains full authority. All AI recommendations pass through safety validation before being offered.",spotlight:{type:"component",id:"predictions"},autoAdvance:5e3},{id:"comms-intro",narrative:"COMMUNICATIONS  ATCS-NG supports Controller-Pilot Data Link Communications (CPDLC). Messages are sent digitally and delivery is confirmed.",spotlight:{type:"component",id:"strips"},autoAdvance:5e3},{id:"comms-compose",narrative:"To send a message, select a flight and click the Message action. Common clearances are available as templates for quick composition.",spotlight:{type:"component",id:"strips"},autoAdvance:5e3},{id:"comms-status",narrative:"Message status is tracked: SENT (transmitted), DELIVERED (received by aircraft), ACKNOWLEDGED (pilot confirmed). Failed messages trigger retry.",spotlight:{type:"component",id:"strips"},autoAdvance:4e3},{id:"comms-audit",narrative:"All communications are logged for audit. The playback feature allows reviewing communications history for training or incident investigation.",spotlight:{type:"component",id:"strips"},autoAdvance:4e3},{id:"summary",narrative:"FEATURE GUIDE COMPLETE  You've learned the core features: Radar display, Flight strips, Alerts system, AI predictions, and Communications.",spotlight:{type:"component",id:"radar"},events:[{delay:0,type:"removeAlert",payload:{alertId:"ALT-FG-002"}}],autoAdvance:5e3},{id:"next-steps",narrative:"Explore the individual scenarios to see these features in action during realistic ATC situations. Or run the Quick Demo for a 2-minute showcase.",spotlight:{type:"component",id:"radar"},autoAdvance:5e3}]};function wg(i){const{triggerEmergency:t,updateEmergencyPhase:e,clearEmergency:n,triggerScreenShake:a,setVignetteColor:s}=aC.getState(),o=`emergency-${Date.now()}`;return t({id:o,type:i.type,involvedTrackIds:i.trackIds,location:i.location}),setTimeout(()=>{e(o,"active"),i.type==="crash"?(a(8,1e3),s("rgba(255, 51, 102, 0.3)")):i.type==="nmac"&&(a(4,500),s("rgba(255, 170, 0, 0.2)"))},2e3),setTimeout(()=>{e(o,"resolving"),s(null)},i.duration*.7),setTimeout(()=>{e(o,"resolved")},i.duration*.9),setTimeout(()=>{n(o)},i.duration),o}const xO={crash:(i,t)=>wg({type:"crash",trackIds:[i],location:t,duration:15e3}),nmac:(i,t)=>wg({type:"nmac",trackIds:[i,t],duration:1e4}),weatherReroute:i=>wg({type:"weather-reroute",trackIds:i,duration:2e4}),massEmergency:i=>wg({type:"mass-emergency",trackIds:i,duration:3e4}),incursion:(i,t)=>wg({type:"incursion",trackIds:[i],location:t,duration:12e3})},Vq={id:"aircraft-crash",title:"Aircraft Down",description:"Experience a dramatic aircraft crash emergency sequence",icon:"flame",duration:1,initialState:{tracks:[{trackId:"TRK-CRASH-01",callsign:"N12345",latitudeDeg:42.1,longitudeDeg:-71.3,altitudeFt:5e3,headingDeg:180,speedKt:200,verticalRateFpm:-6e3,confidence:.85,sequence:1,updatedAt:new Date().toISOString()}],alerts:[],predictions:[]},steps:[{id:"intro",narrative:"Aircraft N12345 is experiencing a rapid uncontrolled descent.",spotlight:{type:"flight",callsign:"N12345"},autoAdvance:3e3},{id:"emergency",narrative:"EMERGENCY - Aircraft is descending at over 6000 feet per minute!",spotlight:{type:"component",id:"radar"},events:[{delay:1e3,type:"custom",payload:()=>xO.crash("TRK-CRASH-01",{lat:42,lng:-71.3})}],autoAdvance:8e3},{id:"aftermath",narrative:"Search and rescue operations have been initiated at the crash site.",spotlight:{type:"component",id:"radar"},autoAdvance:4e3}]},Hq={id:"nmac-event",title:"Near Mid-Air Collision",description:"Two aircraft on collision course trigger TCAS alerts",icon:"alert-triangle",duration:.75,initialState:{tracks:[{trackId:"TRK-NMAC-01",callsign:"UAL456",latitudeDeg:42.2,longitudeDeg:-71.4,altitudeFt:35e3,headingDeg:90,speedKt:450,verticalRateFpm:0,confidence:.98,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-NMAC-02",callsign:"DAL789",latitudeDeg:42.2,longitudeDeg:-71.2,altitudeFt:35e3,headingDeg:270,speedKt:440,verticalRateFpm:0,confidence:.97,sequence:1,updatedAt:new Date().toISOString()}],alerts:[],predictions:[]},steps:[{id:"intro",narrative:"Two aircraft are on converging paths at FL350.",spotlight:{type:"component",id:"radar"},autoAdvance:3e3},{id:"alert",narrative:"TCAS ALERT - Aircraft are within 5nm and closing!",spotlight:{type:"component",id:"alerts"},events:[{delay:500,type:"custom",payload:()=>xO.nmac("TRK-NMAC-01","TRK-NMAC-02")}],autoAdvance:6e3},{id:"resolved",narrative:"Conflict resolved - aircraft have safely separated.",spotlight:{type:"component",id:"radar"},autoAdvance:3e3}]},Gq={id:"showcase-demo",title:"Crisis Showcase",description:"International crisis: Air India hijack, Qantas hero rescue, stealth, TCAS",icon:"flame",duration:5,initialState:{tracks:[{trackId:"TRK-SD-001",callsign:"AIC302",latitudeDeg:42.3,longitudeDeg:-71,altitudeFt:39e3,headingDeg:270,speedKt:510,verticalRateFpm:0,confidence:.98,sequence:1,updatedAt:new Date().toISOString(),airline:"AIC",aircraftType:"B777",countryCode:"IN",souls:350,autopilotStatus:"engaged",autopilotMode:"LNAV/VNAV"},{trackId:"TRK-SD-002",callsign:"QFA8",latitudeDeg:42.45,longitudeDeg:-71.6,altitudeFt:4e4,headingDeg:90,speedKt:520,verticalRateFpm:0,confidence:.97,sequence:1,updatedAt:new Date().toISOString(),airline:"QFA",aircraftType:"A380",countryCode:"AU",souls:489,autopilotStatus:"engaged",autopilotMode:"LNAV/VNAV"},{trackId:"TRK-SD-003",callsign:"BAW117",latitudeDeg:42.6,longitudeDeg:-70.5,altitudeFt:37e3,headingDeg:250,speedKt:490,verticalRateFpm:0,confidence:.97,sequence:1,updatedAt:new Date().toISOString(),airline:"BAW",aircraftType:"A350",countryCode:"GB",souls:325},{trackId:"TRK-SD-004",callsign:"DAL1892",latitudeDeg:42.35,longitudeDeg:-70.8,altitudeFt:35500,headingDeg:270,speedKt:460,verticalRateFpm:0,confidence:.96,sequence:1,updatedAt:new Date().toISOString(),airline:"DAL",aircraftType:"A330",countryCode:"US",souls:287},{trackId:"TRK-SD-005",callsign:"AAL445",latitudeDeg:42.1,longitudeDeg:-71.3,altitudeFt:28e3,headingDeg:180,speedKt:380,verticalRateFpm:-1500,confidence:.98,sequence:1,updatedAt:new Date().toISOString(),airline:"AAL",aircraftType:"B738",countryCode:"US",souls:156},{trackId:"TRK-SD-006",callsign:"UAL2547",latitudeDeg:42.55,longitudeDeg:-71.15,altitudeFt:31e3,headingDeg:135,speedKt:420,verticalRateFpm:0,confidence:.94,sequence:1,updatedAt:new Date().toISOString(),airline:"UAL",aircraftType:"B789",countryCode:"US",souls:274},{trackId:"TRK-SD-007",callsign:"SWA3021",latitudeDeg:41.85,longitudeDeg:-71.1,altitudeFt:24e3,headingDeg:45,speedKt:410,verticalRateFpm:1500,confidence:.95,sequence:1,updatedAt:new Date().toISOString(),airline:"SWA",aircraftType:"B737",countryCode:"US",souls:143},{trackId:"TRK-SD-008",callsign:"FDX892",latitudeDeg:41.7,longitudeDeg:-71.7,altitudeFt:38e3,headingDeg:0,speedKt:480,verticalRateFpm:0,confidence:.93,sequence:1,updatedAt:new Date().toISOString(),airline:"FDX",aircraftType:"B77W",countryCode:"US",souls:2},{trackId:"TRK-SD-009",callsign:"JBU1157",latitudeDeg:42.2,longitudeDeg:-70.9,altitudeFt:29e3,headingDeg:225,speedKt:400,verticalRateFpm:0,confidence:.95,sequence:1,updatedAt:new Date().toISOString(),airline:"JBU",aircraftType:"A321",countryCode:"US",souls:185},{trackId:"TRK-SD-010",callsign:"ASA1205",latitudeDeg:41.95,longitudeDeg:-71.85,altitudeFt:3e4,headingDeg:90,speedKt:430,verticalRateFpm:0,confidence:.96,sequence:1,updatedAt:new Date().toISOString(),airline:"ASA",aircraftType:"B739",countryCode:"US",souls:178},{trackId:"TRK-SD-011",callsign:"AFR023",latitudeDeg:42,longitudeDeg:-71.5,altitudeFt:36e3,headingDeg:60,speedKt:470,verticalRateFpm:0,confidence:.96,sequence:1,updatedAt:new Date().toISOString(),airline:"AFR",aircraftType:"A330",countryCode:"FR",souls:277},{trackId:"TRK-SD-012",callsign:"UAE231",latitudeDeg:41.8,longitudeDeg:-71.4,altitudeFt:41e3,headingDeg:45,speedKt:495,verticalRateFpm:0,confidence:.97,sequence:1,updatedAt:new Date().toISOString(),airline:"UAE",aircraftType:"A380",countryCode:"AE",souls:489}],alerts:[],predictions:[]},steps:[{id:"intro-1",narrative:"ATCS Next Gen online. Boston Sector 33. 12 aircraft under control. Heavy international traffic today.",spotlight:{type:"component",id:"radar"},autoAdvance:1e4},{id:"intro-2",narrative:"All sensors nominal. AI threat detection active. All aircraft on autopilot, maintaining assigned routes.",atcCommand:"All stations, Boston Center, radar contact. Maintain current altitudes and headings.",spotlight:{type:"component",id:"predictions"},autoAdvance:12e3},{id:"intro-3",narrative:"Air India 302 heavy and Qantas 8 super inbound from overseas. Both aircraft showing autopilot engaged, LNAV/VNAV mode.",spotlight:{type:"flight",callsign:"AIC302"},autoAdvance:1e4},{id:"hijack-begin",narrative:"MAYDAY MAYDAY MAYDAY received from Air India 302. Emergency transponder activating. Squawk 7500 - HIJACK CODE.",spotlight:{type:"flight",callsign:"AIC302"},autoAdvance:12e3,events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-SD-001",squawkCode:"7500",visualState:"hijacked",emergencyType:"hijack"}},{delay:500,type:"addAlert",payload:{alertId:"ALT-HIJACK-01",severity:"CRITICAL",alertType:"EMERGENCY_DECLARED",message:"HIJACKING: AIC302 Boeing 777. 350 souls. Armed suspect in cockpit.",involvedFlightIds:["AIC302"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}]},{id:"hijack-captain",narrative:"Captain Sharma: Boston, this is Air India 302 heavy. A man with a weapon has entered my cockpit. He is speaking Norwegian. He claims to be from Wakanda. Please advise.",atcCommand:"Air India 302 heavy, Boston Center copies all. Squawk confirmed 7500. Keep transmitting. NORAD has been notified. Help is coming.",spotlight:{type:"flight",callsign:"AIC302"},autoAdvance:16e3},{id:"hijack-atc-divert",narrative:"ATC attempting to assist with divert options. Identifying nearest suitable airports.",atcCommand:"Air India 302, if able, divert to Bradley International, runway 06, 40 miles southwest. Emergency services standing by.",spotlight:{type:"flight",callsign:"AIC302"},autoAdvance:14e3},{id:"hijack-demands",narrative:"Norwegian hijacker speaking: Jeg krever at dette flyet lander i Wakanda umiddelbart! No movement! I have control of this plane now.",spotlight:{type:"flight",callsign:"AIC302"},autoAdvance:14e3,events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-SD-001",headingDeg:180,dataCorruption:.2,autopilotStatus:"disengaged"}}]},{id:"hijack-autopilot-status",narrative:"ALERT: Air India 302 autopilot has been DISENGAGED. Aircraft now under manual control. Course deviation detected.",atcCommand:"Air India 302, we show your autopilot disengaged. If able, re-engage autopilot. Repeat, engage autopilot if safe to do so.",spotlight:{type:"flight",callsign:"AIC302"},autoAdvance:14e3,events:[{delay:500,type:"addAlert",payload:{alertId:"ALT-HIJACK-AP",severity:"WARNING",alertType:"DEVIATION_DETECTED",message:"AIC302: Autopilot DISENGAGED. Manual control detected. Course deviation 45.",involvedFlightIds:["AIC302"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}]},{id:"hijack-fa",narrative:"Flight Attendant Priya: Passengers are panicking. He has locked the cockpit door. Captain Sharma is trying to negotiate. We are descending rapidly.",spotlight:{type:"flight",callsign:"AIC302"},autoAdvance:14e3,events:[{delay:500,type:"addAlert",payload:{alertId:"ALT-HIJACK-02",severity:"CRITICAL",alertType:"LOSS_OF_SEPARATION",message:"AIR INDIA 302: Unauthorized descent in progress. Hijacker has control.",involvedFlightIds:["AIC302"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}]},{id:"hijack-atc-clearance",narrative:"ATC clearing airspace around Air India 302. Vectoring all traffic away from the hijacked aircraft.",atcCommand:"All aircraft, emergency traffic, Air India 302 descending through your altitude. Delta 1892, turn left heading 090 immediately. American 445, climb flight level 350.",spotlight:{type:"component",id:"radar"},autoAdvance:16e3,events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-SD-004",headingDeg:90}},{delay:200,type:"updateTrack",payload:{trackId:"TRK-SD-005",verticalRateFpm:2e3,altitudeFt:35e3}}]},{id:"hijack-descent",narrative:"Air India 302 in uncontrolled descent. Rate of descent 6000 feet per minute. NORAD F-22 Raptors scrambling from Langley.",spotlight:{type:"flight",callsign:"AIC302"},autoAdvance:12e3,events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-SD-001",verticalRateFpm:-6e3,altitudeFt:2e4,speedKt:400,dataCorruption:.5}},{delay:300,type:"removeAlert",payload:{id:"ALT-HIJACK-AP"}}]},{id:"hijack-final-attempt",narrative:"ATC making final attempt to reach the cockpit.",atcCommand:"Air India 302, Air India 302, Boston Center on guard. If you can hear this transmission, pull up. Repeat, PULL UP. Acknowledge!",spotlight:{type:"flight",callsign:"AIC302"},autoAdvance:14e3},{id:"hijack-crash",narrative:"Radar contact lost with Air India 302. 350 souls on board. Primary target fading. We could not save them.",spotlight:{type:"component",id:"radar"},autoAdvance:14e3,events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-SD-001",visualState:"crashed",altitudeFt:0,speedKt:0,confidence:0,transponderActive:!1}},{delay:500,type:"removeAlert",payload:{id:"ALT-HIJACK-01"}},{delay:600,type:"removeAlert",payload:{id:"ALT-HIJACK-02"}},{delay:800,type:"addAlert",payload:{alertId:"ALT-CRASH",severity:"CRITICAL",alertType:"EMERGENCY_DECLARED",message:"AIRCRAFT DOWN: AIC302. 350 fatalities. Search and rescue dispatched.",involvedFlightIds:["AIC302"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}]},{id:"crash-aftermath",narrative:"Some battles cannot be won. We mark their position and vector in search and rescue. But wait... Another crisis is developing. Qantas 8 is declaring emergency.",spotlight:{type:"component",id:"radar"},autoAdvance:14e3,events:[{delay:1e3,type:"removeAlert",payload:{id:"ALT-CRASH"}}]},{id:"hero-trigger",narrative:"Sarah: Mayday mayday! This is Qantas 8. There was a hijacker speaking Swedish! I knocked him out but... both pilots are unconscious. Oh god, I have 489 people on this plane. Please help us!",spotlight:{type:"flight",callsign:"QFA8"},autoAdvance:16e3,events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-SD-002",visualState:"hero",squawkCode:"7700",emergencyType:"incapacitated_crew",autopilotStatus:"engaged"}},{delay:500,type:"addAlert",payload:{alertId:"ALT-HERO",severity:"CRITICAL",alertType:"EMERGENCY_DECLARED",message:"EMERGENCY: QFA8 Airbus A380. 489 souls. Both pilots incapacitated. Passenger in cockpit.",involvedFlightIds:["QFA8"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}]},{id:"hero-initial-contact",narrative:"ATC establishing contact with Sarah, the brave passenger who fought off the hijacker.",atcCommand:"Qantas 8, Boston Center. Sarah, I need you to stay calm. I am going to help you. First, tell me, is the autopilot engaged? Look for a button that says A P with a light.",spotlight:{type:"flight",callsign:"QFA8"},autoAdvance:18e3},{id:"hero-autopilot-check",narrative:"Sarah: Yes! Yes there is a light! It says AUTOPILOT with green letters!",atcCommand:"Good, Sarah. The autopilot is flying the plane. The aircraft is stable. You are safe for now. Do not touch any controls. I repeat, do not touch anything.",spotlight:{type:"flight",callsign:"QFA8"},autoAdvance:16e3,events:[{delay:500,type:"addAlert",payload:{alertId:"ALT-HERO-AP",severity:"INFO",alertType:"DEVIATION_DETECTED",message:"QFA8: Autopilot ENGAGED. Aircraft stable. Remote guidance possible.",involvedFlightIds:["QFA8"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}]},{id:"hero-divert-plan",narrative:"ATC coordinating with JFK for emergency landing. Clearing all traffic from approach path.",atcCommand:"All aircraft, emergency in progress. JFK runway 31L is closed for emergency traffic. All arrivals hold present position or divert to Newark.",spotlight:{type:"component",id:"radar"},autoAdvance:16e3},{id:"hero-guide-heading",narrative:"Sarah: Okay, I am not touching anything. But the plane is turning! What do I do?",atcCommand:"Sarah, that is the autopilot following its programmed route. I am going to change your heading remotely. Stand by. Qantas 8, turn left heading 180 for vectors to JFK.",spotlight:{type:"flight",callsign:"QFA8"},autoAdvance:16e3,events:[{delay:500,type:"updateTrack",payload:{trackId:"TRK-SD-002",headingDeg:180,autopilotStatus:"remote_guided",autopilotMode:"HDG SEL"}}]},{id:"hero-active",narrative:"Remote guidance engaged. Sarah is following ATC instructions. The A380 is now on vectors to JFK. 489 souls depend on this guidance.",spotlight:{type:"component",id:"radar"},autoAdvance:2e4,events:[{delay:1500,type:"triggerHeroMode",payload:{active:!0}}]},{id:"hero-descent",narrative:"ATC initiating descent for approach.",atcCommand:"Qantas 8, Sarah, I am going to start bringing you down now. The aircraft will descend on its own. You will feel a slight pitch down. This is normal.",spotlight:{type:"flight",callsign:"QFA8"},autoAdvance:16e3,events:[{delay:500,type:"updateTrack",payload:{trackId:"TRK-SD-002",verticalRateFpm:-1500,altitudeFt:15e3}}]},{id:"hero-final-approach",narrative:"Sarah: I can see the runway! Oh my god, I can see the runway lights!",atcCommand:"Qantas 8, you are 10 miles from the runway. The autoland system is engaged. Keep your hands off the controls. The plane will land itself. Emergency services are standing by.",spotlight:{type:"flight",callsign:"QFA8"},autoAdvance:16e3,events:[{delay:500,type:"updateTrack",payload:{trackId:"TRK-SD-002",autopilotMode:"AUTOLAND",altitudeFt:3e3,speedKt:160}},{delay:600,type:"removeAlert",payload:{id:"ALT-HERO-AP"}}]},{id:"hero-complete",narrative:"Qantas 8 is on the ground at JFK. Sarah and 489 passengers are safe. Emergency services on scene. An Australian hero made aviation history today.",spotlight:{type:"component",id:"radar"},autoAdvance:16e3,events:[{delay:0,type:"triggerHeroMode",payload:{active:!1}},{delay:0,type:"removeAlert",payload:{id:"ALT-HERO"}},{delay:0,type:"updateTrack",payload:{trackId:"TRK-SD-002",visualState:"normal",squawkCode:"1200",autopilotStatus:"disengaged",altitudeFt:0,speedKt:0}}]},{id:"stealth-detect",narrative:"Anomaly detected. Intermittent radar return, no transponder. Bearing 045. AI analyzing threat profile.",spotlight:{type:"component",id:"radar"},autoAdvance:12e3,events:[{delay:200,type:"addAlert",payload:{alertId:"ALT-STEALTH-01",severity:"WARNING",alertType:"DEVIATION_DETECTED",message:"UNKNOWN CONTACT: Intermittent radar return. No transponder. Possible stealth aircraft.",involvedFlightIds:["UNKNOWN"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}]},{id:"stealth-id",narrative:"Contact confirmed. Speed Mach 1.8, altitude 45,000. AI identifies signature as Russian SU-57 Felon.",atcCommand:"All aircraft, UNKNOWN TRAFFIC bearing 045, flight level 450, supersonic. All aircraft stand by for emergency vectors.",spotlight:{type:"component",id:"alerts"},autoAdvance:14e3,events:[{delay:0,type:"addAlert",payload:{alertId:"ALT-STEALTH-02",severity:"CRITICAL",alertType:"LOSS_OF_SEPARATION",message:"HOSTILE AIRCRAFT: SU-57 Felon violating US airspace. NORAD scrambling interceptors.",involvedFlightIds:["UNKNOWN"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}]},{id:"stealth-response",narrative:"F-22 Raptors scrambling from Langley Air Force Base. Vectoring all civil traffic away from intercept zone.",atcCommand:"British Airways 117, turn left heading 180, descend and maintain flight level 330. Expect holding.",spotlight:{type:"component",id:"radar"},autoAdvance:14e3,events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-SD-003",headingDeg:180,verticalRateFpm:-1500}},{delay:300,type:"updateTrack",payload:{trackId:"TRK-SD-011",headingDeg:180}}]},{id:"stealth-resolved",narrative:"Russian aircraft has reversed course and is exiting US airspace. F-22s escorting out of ADIZ. Crisis averted.",atcCommand:"All aircraft, hostile traffic clear of sector. Resume normal operations. British Airways 117, resume own navigation.",spotlight:{type:"component",id:"radar"},autoAdvance:14e3,events:[{delay:200,type:"removeAlert",payload:{id:"ALT-STEALTH-01"}},{delay:400,type:"removeAlert",payload:{id:"ALT-STEALTH-02"}}]},{id:"tcas-alert",narrative:"TRAFFIC ALERT! Delta 1892 and American 445 on converging headings! AI predicts collision in 45 seconds!",spotlight:{type:"component",id:"predictions"},autoAdvance:12e3,events:[{delay:0,type:"addPrediction",payload:{id:"PRED-TCAS",predictionType:"CONFLICT",involvedFlights:["DAL1892","AAL445"],probability:.97,predictedTime:new Date(Date.now()+3e4).toISOString(),description:"COLLISION COURSE: 443 souls at risk! Immediate action required."}},{delay:200,type:"addAlert",payload:{alertId:"ALT-TCAS-01",severity:"CRITICAL",alertType:"CONFLICT_PREDICTED",message:"TCAS RESOLUTION ADVISORY IMMINENT. DAL1892 and AAL445 converging.",involvedFlightIds:["DAL1892","AAL445"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}]},{id:"tcas-execute",narrative:"TCAS Resolution Advisory triggered! Both aircraft receiving automated climb and descend commands.",atcCommand:"Delta 1892, CLIMB IMMEDIATELY flight level 390! American 445, DESCEND IMMEDIATELY flight level 240! Traffic alert!",spotlight:{type:"flight",callsign:"DAL1892"},autoAdvance:14e3,events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-SD-004",verticalRateFpm:4e3,altitudeFt:39e3}},{delay:0,type:"updateTrack",payload:{trackId:"TRK-SD-005",verticalRateFpm:-4e3,altitudeFt:24e3}}]},{id:"tcas-clear",narrative:"TCAS conflict resolved. 15,000 feet vertical separation achieved. 443 lives saved by automated safety systems.",atcCommand:"Delta 1892, American 445, traffic no longer a factor. Resume normal operations. Nice work up there.",spotlight:{type:"component",id:"radar"},autoAdvance:14e3,events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-SD-004",verticalRateFpm:0}},{delay:0,type:"updateTrack",payload:{trackId:"TRK-SD-005",verticalRateFpm:0}},{delay:300,type:"removePrediction",payload:{id:"PRED-TCAS"}},{delay:400,type:"removeAlert",payload:{id:"ALT-TCAS-01"}}]},{id:"tornado-warn",narrative:"SEVERE WEATHER ALERT from National Weather Service. EF-3 tornado confirmed, 25 miles southwest, tracking northeast at 40 knots.",spotlight:{type:"component",id:"alerts"},autoAdvance:12e3,events:[{delay:0,type:"addAlert",payload:{alertId:"ALT-TORNADO",severity:"CRITICAL",alertType:"WEATHER_HAZARD",message:"EF-3 TORNADO: FDX892, ASA1205, SWA3021 in threat zone. Immediate rerouting required!",involvedFlightIds:["FDX892","ASA1205","SWA3021"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}]},{id:"tornado-reroute",narrative:"AI weather avoidance system executing emergency reroutes. Three aircraft deviating from tornado path.",atcCommand:"FedEx 892, turn right heading 090, climb and maintain flight level 400. Weather deviation approved. Southwest 3021, turn left heading 135.",spotlight:{type:"flight",callsign:"FDX892"},autoAdvance:16e3,events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-SD-008",headingDeg:90,verticalRateFpm:2e3}},{delay:200,type:"updateTrack",payload:{trackId:"TRK-SD-010",headingDeg:0,verticalRateFpm:1500}},{delay:400,type:"updateTrack",payload:{trackId:"TRK-SD-007",headingDeg:135}}]},{id:"tornado-clear",narrative:"All aircraft have successfully deviated around the severe weather cell. Tornado passing east of our sector.",atcCommand:"All aircraft, severe weather has cleared our sector. Resume own navigation when ready. Good work everyone.",spotlight:{type:"component",id:"radar"},autoAdvance:14e3,events:[{delay:300,type:"removeAlert",payload:{id:"ALT-TORNADO"}}]},{id:"finale-1",narrative:"ATCS Next Generation. When everything goes wrong at once, we are the last line of defense. Every decision matters.",spotlight:{type:"component",id:"radar"},autoAdvance:12e3},{id:"finale-2",narrative:"AI-powered threat detection. Automated conflict resolution. Remote aircraft guidance. Autopilot integration. The future of air traffic control is here.",spotlight:{type:"component",id:"predictions"},autoAdvance:14e3},{id:"finale-3",narrative:"Demo complete. In live mode, click any aircraft to issue ATC commands. ATCS-NG: Protecting lives, every second of every flight.",atcCommand:"Boston Center signing off. Safe skies, everyone.",spotlight:{type:"component",id:"radar"},autoAdvance:16e3}]},jq=[Gq,Fq,kq],Wq=[Nq,Uq,Iq,Pq,zq,Bq,Vq,Hq],Uf=[...jq,...Wq],SO={isActive:!1,mode:"menu",presenterMode:!1,currentScenario:null,currentStepIndex:0,isTourMode:!1,tourScenarioIndex:0,tracks:[],alerts:[],predictions:[],pendingInteraction:null,interactionCompleted:!1};function qq(i,t){switch(t.type){case"OPEN_MENU":return{...i,isActive:!0,mode:"menu"};case"CLOSE_DEMO":return{...SO};case"START_SCENARIO":{const e=t.scenario,n=e.steps[0];return{...i,mode:"playing",currentScenario:e,currentStepIndex:0,isTourMode:!1,tracks:e.initialState.tracks,alerts:e.initialState.alerts,predictions:e.initialState.predictions,pendingInteraction:n?.interaction||null,interactionCompleted:!1}}case"START_TOUR":{const e=Uf[0],n=e.steps[0];return{...i,mode:"playing",currentScenario:e,currentStepIndex:0,isTourMode:!0,tourScenarioIndex:0,tracks:e.initialState.tracks,alerts:e.initialState.alerts,predictions:e.initialState.predictions,pendingInteraction:n?.interaction||null,interactionCompleted:!1}}case"NEXT_STEP":{if(!i.currentScenario)return i;const e=i.currentStepIndex+1,n=i.currentScenario.steps;if(e<n.length){const a=n[e];return{...i,currentStepIndex:e,pendingInteraction:a.interaction||null,interactionCompleted:!1}}if(i.isTourMode){const a=i.tourScenarioIndex+1;if(a<Uf.length){const s=Uf[a],o=s.steps[0];return{...i,currentScenario:s,currentStepIndex:0,tourScenarioIndex:a,tracks:s.initialState.tracks,alerts:s.initialState.alerts,predictions:s.initialState.predictions,pendingInteraction:o?.interaction||null,interactionCompleted:!1}}}return{...i,mode:"completed",pendingInteraction:null}}case"PREV_STEP":{if(!i.currentScenario||i.currentStepIndex===0)return i;const e=i.currentStepIndex-1,n=i.currentScenario.steps[e];return{...i,currentStepIndex:e,pendingInteraction:n.interaction||null,interactionCompleted:!1}}case"PAUSE":return{...i,mode:"paused"};case"RESUME":return{...i,mode:"playing"};case"TOGGLE_PRESENTER_MODE":return{...i,presenterMode:!i.presenterMode};case"SET_STATE":return{...i,tracks:t.state.tracks??i.tracks,alerts:t.state.alerts??i.alerts,predictions:t.state.predictions??i.predictions};case"UPDATE_TRACKS":return{...i,tracks:t.tracks};case"UPDATE_ALERTS":return{...i,alerts:t.alerts};case"UPDATE_PREDICTIONS":return{...i,predictions:t.predictions};case"COMPLETE_INTERACTION":return{...i,interactionCompleted:!0,pendingInteraction:null};case"SCENARIO_COMPLETE":return{...i,mode:"completed"};case"TOUR_NEXT_SCENARIO":{const e=i.tourScenarioIndex+1;if(e>=Uf.length)return{...i,mode:"completed"};const n=Uf[e],a=n.steps[0];return{...i,currentScenario:n,currentStepIndex:0,tourScenarioIndex:e,tracks:n.initialState.tracks,alerts:n.initialState.alerts,predictions:n.initialState.predictions,pendingInteraction:a?.interaction||null,interactionCompleted:!1}}default:return i}}function Xq(i){return i.currentScenario&&i.currentScenario.steps[i.currentStepIndex]||null}function bO(i){return i.currentScenario?i.currentScenario.steps.length:0}function Yq(i){const t=bO(i);return t===0?0:(i.currentStepIndex+1)/t*100}const MO=ct.createContext(null);function Zq({children:i}){const[t,e]=ct.useReducer(qq,SO),n=ct.useRef(null),a=ct.useRef([]),{setHeroModeActive:s}=Hs(),o=Xq(t),c=bO(t),f=Yq(t),d=ct.useCallback(()=>{n.current&&(clearTimeout(n.current),n.current=null),a.current.forEach(Z=>clearTimeout(Z)),a.current=[]},[]),g=ct.useCallback(Z=>{Z.events&&Z.events.forEach(B=>{const V=window.setTimeout(()=>{switch(B.type){case"updateTrack":{const Q=B.payload;e({type:"UPDATE_TRACKS",tracks:t.tracks.map(J=>J.trackId===Q.trackId?{...J,...Q}:J)});break}case"addAlert":{const Q=B.payload;e({type:"UPDATE_ALERTS",alerts:[Q,...t.alerts]});break}case"removeAlert":{const{id:Q}=B.payload;e({type:"UPDATE_ALERTS",alerts:t.alerts.filter(J=>J.alertId!==Q)});break}case"addPrediction":{const Q=B.payload;e({type:"UPDATE_PREDICTIONS",predictions:[Q,...t.predictions]});break}case"updatePrediction":{const Q=B.payload;e({type:"UPDATE_PREDICTIONS",predictions:t.predictions.map(J=>J.id===Q.id?{...J,...Q}:J)});break}case"removePrediction":{const{id:Q}=B.payload;e({type:"UPDATE_PREDICTIONS",predictions:t.predictions.filter(J=>J.id!==Q)});break}case"triggerHeroMode":{const{active:Q}=B.payload;s(Q);break}}},B.delay);a.current.push(V)})},[t.tracks,t.alerts,t.predictions,s]);ct.useEffect(()=>{t.mode==="playing"&&o&&(d(),g(o))},[t.mode,t.currentStepIndex,o,d,g]),ct.useEffect(()=>{const Z=new URLSearchParams(window.location.search),B=Z.get("demo");if(!Z.get("nodemo"))if(B==="tour")e({type:"START_TOUR"});else if(B){const Q=Uf.find(J=>J.id===B);Q&&e({type:"START_SCENARIO",scenario:Q})}else e({type:"OPEN_MENU"})},[]);const y=ct.useCallback(()=>e({type:"OPEN_MENU"}),[]),x=ct.useCallback(()=>{d(),e({type:"CLOSE_DEMO"})},[d]),b=ct.useCallback(Z=>{const B=Uf.find(V=>V.id===Z);B&&(d(),e({type:"START_SCENARIO",scenario:B}))},[d]),T=ct.useCallback(()=>{d(),e({type:"START_TOUR"})},[d]),R=ct.useCallback(()=>e({type:"NEXT_STEP"}),[]),C=ct.useCallback(()=>e({type:"PREV_STEP"}),[]),w=ct.useCallback(()=>e({type:"PAUSE"}),[]),N=ct.useCallback(()=>e({type:"RESUME"}),[]),I=ct.useCallback(()=>e({type:"TOGGLE_PRESENTER_MODE"}),[]),z=ct.useCallback(()=>e({type:"COMPLETE_INTERACTION"}),[]),F=ct.useCallback(Z=>{if(!o?.spotlight)return!1;const B=o.spotlight;if(B.type!==Z.type)return!1;switch(B.type){case"component":return B.id===Z.id;case"track":return B.trackId===Z.trackId;case"alert":return B.alertId===Z.alertId;case"prediction":return B.predictionId===Z.predictionId;case"flight":return B.callsign===Z.callsign;default:return!1}},[o]),H=ct.useCallback(Z=>!t.isActive||t.mode==="menu"?!0:t.pendingInteraction?t.pendingInteraction.target===Z:!1,[t.isActive,t.mode,t.pendingInteraction]),q={state:t,currentStep:o,totalSteps:c,progress:f,scenarios:Uf,openMenu:y,closeDemo:x,startScenario:b,startTour:T,nextStep:R,prevStep:C,pause:w,resume:N,togglePresenterMode:I,completeInteraction:z,isSpotlighted:F,canInteract:H};return O.jsx(MO.Provider,{value:q,children:i})}function Yf(){const i=ct.useContext(MO);if(!i)throw new Error("useDemoMode must be used within a DemoProvider");return i}const Kq={radar:'[data-demo-id="radar"]',alerts:'[data-demo-id="alerts"]',predictions:'[data-demo-id="predictions"]',strips:'[data-demo-id="strips"]',header:'[data-demo-id="header"]'};function Qq(){const{state:i,currentStep:t}=Yf(),[e,n]=ct.useState(null),a=ct.useRef(null);return ct.useEffect(()=>{if(!i.isActive||i.mode==="menu"||!t?.spotlight){n(null);return}const s=t.spotlight;let o=null;switch(s.type){case"component":o=Kq[s.id];break;case"track":o=`[data-track-id="${s.trackId}"]`;break;case"alert":o=`[data-alert-id="${s.alertId}"]`;break;case"prediction":o=`[data-prediction-id="${s.predictionId}"]`;break;case"flight":o=`[data-callsign="${s.callsign}"]`;break}if(!o){n(null);return}const c=()=>{const d=document.querySelector(o);if(d){const g=d.getBoundingClientRect(),y=8;n({x:g.x-y,y:g.y-y,width:g.width+y*2,height:g.height+y*2})}else n(null)};c();const f=document.querySelector(o);return f&&(a.current=new ResizeObserver(c),a.current.observe(f)),window.addEventListener("resize",c),window.addEventListener("scroll",c,!0),()=>{a.current?.disconnect(),window.removeEventListener("resize",c),window.removeEventListener("scroll",c,!0)}},[i.isActive,i.mode,t]),!i.isActive||i.mode==="menu"||!e?null:O.jsx(ls,{children:O.jsxs(Qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",inset:0,zIndex:9e3,pointerEvents:"none"},children:[O.jsxs("svg",{width:"100%",height:"100%",style:{position:"absolute",inset:0},children:[O.jsxs("defs",{children:[O.jsxs("filter",{id:"spotlight-glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[O.jsx("feGaussianBlur",{stdDeviation:"4",result:"blur"}),O.jsx("feFlood",{floodColor:"#00ff88",floodOpacity:"0.6",result:"color"}),O.jsx("feComposite",{in:"color",in2:"blur",operator:"in",result:"glow"}),O.jsxs("feMerge",{children:[O.jsx("feMergeNode",{in:"glow"}),O.jsx("feMergeNode",{in:"glow"}),O.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),O.jsxs("mask",{id:"spotlight-mask",children:[O.jsx("rect",{width:"100%",height:"100%",fill:"white"}),O.jsx(Qe.rect,{initial:{x:e.x,y:e.y,width:e.width,height:e.height},animate:{x:e.x,y:e.y,width:e.width,height:e.height},transition:{type:"spring",stiffness:300,damping:30},rx:"8",fill:"black"})]})]}),O.jsx("rect",{width:"100%",height:"100%",fill:"rgba(0, 0, 0, 0.75)",mask:"url(#spotlight-mask)"}),O.jsx(Qe.rect,{initial:{x:e.x,y:e.y,width:e.width,height:e.height},animate:{x:e.x,y:e.y,width:e.width,height:e.height},transition:{type:"spring",stiffness:300,damping:30},rx:"8",fill:"none",stroke:"#00ff88",strokeWidth:"2",filter:"url(#spotlight-glow)"})]}),O.jsx(Qe.div,{animate:{boxShadow:["0 0 0 0 rgba(0, 255, 136, 0.4)","0 0 0 8px rgba(0, 255, 136, 0)"]},transition:{duration:1.5,repeat:1/0,ease:"easeOut"},style:{position:"absolute",left:e.x,top:e.y,width:e.width,height:e.height,borderRadius:8,pointerEvents:"none"}})]})})}function Jq(i){return/Captain Sharma:|Air India 302.*Captain/i.test(i)?"captain_sharma":/Flight Attendant Priya:|Priya:/i.test(i)?"fa_priya":/Captain Williams:|Qantas.*Captain/i.test(i)?"captain_williams":/Sarah:/i.test(i)?"sarah":/hijacker.*Norwegian|Norwegian.*hijacker|Jeg krever|Wakanda/i.test(i)?"hijacker_norway":/hijacker.*Swedish|Swedish.*hijacker|Nej\.\.\.|Vakanda fr/i.test(i)?"hijacker_sweden":/British Airways.*crew|BAW.*crew/i.test(i)?"british_crew":/Boston Center|Tower|Approach|Departure|ATC:/i.test(i)?"atc":"narrator"}function $q(){const{state:i,currentStep:t,totalSteps:e,progress:n,closeDemo:a,nextStep:s,prevStep:o,pause:c,resume:f,togglePresenterMode:d}=Yf(),g=ct.useRef(null),y=ct.useRef(null),x=ct.useRef(null),b=ct.useRef(!1),{addCommandLog:T,narrationEnabled:R}=Hs(),[C,w]=ct.useState(!1),N=()=>{const F=!C;w(F),zr.setBrowserFallback(F),Pc.setEnabled(!1)};if(ct.useEffect(()=>{if(i.mode==="playing"&&t?.narrative&&t.id!==g.current){g.current=t.id,b.current=!1,y.current&&(clearTimeout(y.current),y.current=null),x.current&&(clearTimeout(x.current),x.current=null);const F=t.autoAdvance??8e3,H=()=>{b.current=!0,x.current&&(clearTimeout(x.current),x.current=null),y.current=window.setTimeout(()=>{i.mode==="playing"&&!i.pendingInteraction&&!i.presenterMode&&s()},1e3)};x.current=window.setTimeout(()=>{!b.current&&i.mode==="playing"&&!i.pendingInteraction&&!i.presenterMode&&(console.log("[Demo] TTS fallback timer fired for step:",t.id),s())},F);const q=Jq(t.narrative);R&&setTimeout(()=>{zr.speak(t.narrative,q,()=>{if(t.atcCommand){const Z=t.atcCommand.match(/^([A-Za-z\s]+\d+)/),B=Z?Z[1].toUpperCase():"ALL";let V="other";/heading|turn/i.test(t.atcCommand)?V="heading":/climb|descend|flight level|altitude/i.test(t.atcCommand)?V="altitude":/speed|reduce|increase/i.test(t.atcCommand)?V="speed":/squawk/i.test(t.atcCommand)?V="squawk":/contact|frequency/i.test(t.atcCommand)?V="frequency":/hold/i.test(t.atcCommand)&&(V="hold"),T({callsign:B.replace(/\s+/g,""),command:t.atcCommand,type:V}),zr.speakATC(t.atcCommand,H)}else H()})},300)}return()=>{y.current&&clearTimeout(y.current),x.current&&clearTimeout(x.current)}},[i.mode,i.presenterMode,t?.id,t?.narrative,t?.atcCommand,t?.autoAdvance,i.pendingInteraction,s,T,R]),ct.useEffect(()=>{(i.mode==="paused"||!i.isActive)&&(zr.cancel(),Pc.cancel())},[i.mode,i.isActive]),ct.useEffect(()=>(i.isActive&&i.mode==="playing"&&Pc.setEnabled(!1),()=>{Pc.setEnabled(!0),zr.setBrowserFallback(!1)}),[i.isActive,i.mode]),!i.isActive||i.mode==="menu")return null;const I=i.mode==="playing",z=i.mode==="completed";return O.jsx(ls,{children:O.jsxs(Qe.div,{initial:{x:340,opacity:0},animate:{x:0,opacity:1},exit:{x:340,opacity:0},transition:{type:"spring",stiffness:300,damping:30},style:{position:"fixed",top:70,right:8,width:320,background:"rgba(10, 14, 20, 0.98)",border:"1px solid rgba(0, 255, 136, 0.3)",borderRadius:12,overflow:"hidden",zIndex:9500,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5), 0 0 20px rgba(0, 255, 136, 0.1)",backdropFilter:"blur(10px)"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",borderBottom:"1px solid rgba(0, 255, 136, 0.2)",background:"linear-gradient(90deg, rgba(0, 255, 136, 0.1), transparent)"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[O.jsx(Qe.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},style:{width:8,height:8,borderRadius:"50%",background:"#00ff88",boxShadow:"0 0 8px #00ff88"}}),O.jsx("span",{style:{fontFamily:"'Orbitron', monospace",fontSize:11,fontWeight:600,letterSpacing:2,color:"#00ff88"},children:"DEMO MODE"})]}),O.jsx("button",{onClick:a,style:{display:"flex",alignItems:"center",justifyContent:"center",width:28,height:28,background:"transparent",border:"1px solid rgba(255, 51, 102, 0.3)",borderRadius:4,color:"#ff3366",cursor:"pointer"},children:O.jsx(fm,{size:14})})]}),i.isTourMode&&O.jsx("div",{style:{padding:"12px 16px 0"},children:O.jsxs("div",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:10,color:"#6e7681",textTransform:"uppercase",letterSpacing:1,marginBottom:6},children:["Scenario ",i.tourScenarioIndex+1," of ",6]})}),O.jsxs("div",{style:{padding:"12px 16px"},children:[O.jsx("h3",{style:{fontFamily:"'Orbitron', monospace",fontSize:14,fontWeight:600,color:"#00d4ff",margin:0,marginBottom:4,letterSpacing:1},children:i.currentScenario?.title||"Demo Complete"}),O.jsx("div",{style:{height:3,background:"rgba(0, 255, 136, 0.1)",borderRadius:2,marginTop:8,overflow:"hidden"},children:O.jsx(Qe.div,{initial:{width:0},animate:{width:`${n}%`},style:{height:"100%",background:"linear-gradient(90deg, #00ff88, #00d4ff)",borderRadius:2}})})]}),O.jsx("div",{style:{padding:"0 16px 16px",minHeight:120},children:z?O.jsxs("div",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:18,color:"#e6edf3",lineHeight:1.5,textAlign:"center",padding:"20px 0"},children:[O.jsx("div",{style:{fontSize:36,marginBottom:12},children:""}),"Demo complete! You've seen all the key features of ATCS-NG."]}):O.jsx(Qe.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},style:{fontFamily:"'Rajdhani', sans-serif",fontSize:17,fontWeight:500,color:"#e6edf3",lineHeight:1.7,margin:0,textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:t?.narrative||""},t?.id)}),O.jsx(ls,{children:i.pendingInteraction&&O.jsx(Qe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},style:{margin:"0 16px 16px",padding:12,background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",borderRadius:8},children:O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[O.jsx(Qe.div,{animate:{scale:[1,1.1,1]},transition:{duration:1,repeat:1/0},children:O.jsx(TW,{size:16,style:{color:"#00d4ff"}})}),O.jsx("span",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:13,fontWeight:600,color:"#00d4ff"},children:i.pendingInteraction.hint})]})})}),O.jsxs("div",{style:{padding:"12px 16px",borderTop:"1px solid rgba(0, 255, 136, 0.2)",background:"rgba(0, 0, 0, 0.3)"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:8,marginBottom:12},children:[O.jsx(vb,{icon:YW,label:"PREV",onClick:o,disabled:i.currentStepIndex===0,tooltip:"Previous step"}),O.jsx(vb,{icon:I?LW:Jg,label:I?"PAUSE":"PLAY",onClick:I?c:f,primary:!0,disabled:z,tooltip:I?"Pause":"Play"}),O.jsx(vb,{icon:JW,label:"SKIP",onClick:s,disabled:z,tooltip:"Next step"})]}),O.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[O.jsxs("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:10,color:"#6e7681"},children:["Step ",i.currentStepIndex+1," of ",e]}),O.jsxs("button",{onClick:d,style:{display:"flex",alignItems:"center",gap:6,padding:"4px 10px",background:i.presenterMode?"rgba(0, 255, 136, 0.15)":"transparent",border:`1px solid ${i.presenterMode?"rgba(0, 255, 136, 0.4)":"rgba(110, 118, 129, 0.3)"}`,borderRadius:4,color:i.presenterMode?"#00ff88":"#6e7681",cursor:"pointer",fontFamily:"'Rajdhani', sans-serif",fontSize:10,fontWeight:600,textTransform:"uppercase",letterSpacing:.5},children:[O.jsx(mO,{size:10}),"Presenter Mode"]})]}),O.jsx("div",{style:{marginTop:10,paddingTop:10,borderTop:"1px solid rgba(110, 118, 129, 0.2)"},children:O.jsx("button",{onClick:N,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:6,width:"100%",padding:"6px 10px",background:C?"rgba(255, 170, 0, 0.15)":"transparent",border:`1px solid ${C?"rgba(255, 170, 0, 0.4)":"rgba(110, 118, 129, 0.2)"}`,borderRadius:4,color:C?"#ffaa00":"#6e7681",cursor:"pointer",fontFamily:"'Rajdhani', sans-serif",fontSize:10,fontWeight:500},children:C?O.jsxs(O.Fragment,{children:[O.jsx(tm,{size:12}),"Using Browser Audio (Click to use AI Voices)"]}):O.jsxs(O.Fragment,{children:[O.jsx(iT,{size:12}),"Audio not working? Click here for fallback"]})})})]})]})})}function vb({icon:i,label:t,onClick:e,disabled:n,primary:a,tooltip:s}){return O.jsxs("button",{onClick:e,disabled:n,title:s,style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:2,padding:a?"8px 16px":"6px 12px",background:a?"rgba(0, 255, 136, 0.2)":"transparent",border:`1px solid ${a?"rgba(0, 255, 136, 0.5)":"rgba(0, 255, 136, 0.2)"}`,borderRadius:6,color:n?"#3d4450":a?"#00ff88":"#8b949e",cursor:n?"not-allowed":"pointer",transition:"all 0.2s ease"},children:[O.jsx(i,{size:a?18:14}),O.jsx("span",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:9,fontWeight:600,letterSpacing:.5},children:t})]})}const tX={"alert-triangle":um,cloud:Ig,shield:gO,navigation:_2,"arrow-right-left":gj,siren:KW,zap:aT,"book-open":Tj,flame:oO},eX=["showcase-demo"];function nX(){const{state:i,scenarios:t,closeDemo:e,startScenario:n,startTour:a}=Yf(),{setLiveOnly:s}=Hs();if(!i.isActive||i.mode!=="menu")return null;const o=()=>{s(!0),e()},c=t.filter(f=>!eX.includes(f.id));return O.jsx(ls,{children:O.jsx(Qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.85)",backdropFilter:"blur(8px)",zIndex:9900,display:"flex",alignItems:"center",justifyContent:"center",padding:20},onClick:e,children:O.jsxs(Qe.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:"spring",stiffness:300,damping:25},onClick:f=>f.stopPropagation(),style:{width:"100%",maxWidth:900,maxHeight:"90vh",overflowY:"auto",background:"rgba(13, 17, 23, 0.98)",border:"1px solid rgba(0, 255, 136, 0.3)",borderRadius:16,boxShadow:"0 24px 80px rgba(0, 0, 0, 0.5), 0 0 40px rgba(0, 255, 136, 0.1)"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"20px 24px",borderBottom:"1px solid rgba(0, 255, 136, 0.2)",background:"linear-gradient(90deg, rgba(0, 255, 136, 0.1), transparent)"},children:[O.jsxs("div",{children:[O.jsx("h2",{style:{fontFamily:"'Orbitron', monospace",fontSize:22,fontWeight:700,color:"#00ff88",margin:0,letterSpacing:2},children:"ATCS-NG DEMO CENTER"}),O.jsx("p",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:13,color:"#8b949e",margin:"4px 0 0"},children:"Experience ATCS-NG capabilities through guided demonstrations"})]}),O.jsx("button",{onClick:e,style:{display:"flex",alignItems:"center",justifyContent:"center",width:36,height:36,background:"transparent",border:"1px solid rgba(255, 51, 102, 0.3)",borderRadius:8,color:"#ff3366",cursor:"pointer"},children:O.jsx(fm,{size:18})})]}),O.jsx("div",{style:{display:"flex",gap:16,padding:"20px 24px 0"},children:O.jsxs(Qe.button,{whileHover:{scale:1.02,borderColor:"rgba(0, 212, 255, 0.6)"},whileTap:{scale:.98},onClick:o,style:{flex:1,display:"flex",alignItems:"center",gap:16,padding:20,background:"linear-gradient(135deg, rgba(0, 212, 255, 0.15), rgba(0, 136, 255, 0.15))",border:"2px solid rgba(0, 212, 255, 0.4)",borderRadius:12,cursor:"pointer",textAlign:"left"},children:[O.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:56,height:56,background:"rgba(0, 212, 255, 0.2)",borderRadius:12,flexShrink:0},children:O.jsx(vd,{size:28,style:{color:"#00d4ff"}})}),O.jsxs("div",{style:{flex:1},children:[O.jsx("div",{style:{fontFamily:"'Orbitron', monospace",fontSize:16,fontWeight:700,color:"#00d4ff",letterSpacing:1},children:"LIVE MODE"}),O.jsx("div",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:13,color:"#8b949e",marginTop:4},children:"Real-time data from live sensors"})]}),O.jsx(Jg,{size:24,style:{color:"#00d4ff"}})]})}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,padding:"20px 24px 12px"},children:[O.jsx("div",{style:{flex:1,height:1,background:"rgba(0, 255, 136, 0.15)"}}),O.jsx("span",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:11,color:"#6e7681",textTransform:"uppercase",letterSpacing:2},children:"Demo Mode"}),O.jsx("div",{style:{flex:1,height:1,background:"rgba(0, 255, 136, 0.15)"}})]}),O.jsx("div",{style:{padding:"0 24px"},children:O.jsxs(Qe.button,{whileHover:{scale:1.02,boxShadow:"0 0 40px rgba(255, 51, 102, 0.3)"},whileTap:{scale:.98},onClick:()=>n("showcase-demo"),style:{width:"100%",display:"flex",alignItems:"center",gap:24,padding:24,background:"linear-gradient(135deg, rgba(255, 51, 102, 0.2), rgba(255, 170, 0, 0.15))",border:"2px solid rgba(255, 51, 102, 0.5)",borderRadius:16,cursor:"pointer",textAlign:"left",position:"relative",overflow:"hidden"},children:[O.jsx(Qe.div,{animate:{x:[0,5,0],rotate:[0,2,0]},transition:{duration:2,repeat:1/0},style:{display:"flex",alignItems:"center",justifyContent:"center",width:72,height:72,background:"linear-gradient(135deg, rgba(255, 51, 102, 0.3), rgba(255, 170, 0, 0.3))",borderRadius:16,flexShrink:0},children:O.jsx(hO,{size:40,style:{color:"#ff3366"}})}),O.jsxs("div",{style:{flex:1},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[O.jsx("h3",{style:{fontFamily:"'Orbitron', monospace",fontSize:22,fontWeight:700,color:"#ff3366",margin:0,letterSpacing:2},children:"CRISIS SHOWCASE"}),O.jsx(Qe.span,{animate:{opacity:[1,.5,1]},transition:{duration:1,repeat:1/0},style:{padding:"4px 10px",background:"rgba(255, 51, 102, 0.3)",borderRadius:4,fontFamily:"'Orbitron', monospace",fontSize:10,color:"#ff3366",fontWeight:600,letterSpacing:1},children:"RECOMMENDED"})]}),O.jsx("p",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:15,color:"#c9d1d9",margin:"8px 0 0",lineHeight:1.5},children:"Experience dramatic aviation crises: Air India hijacking, Qantas hero rescue, stealth incursion, near mid-air collision, and severe weather. Multi-accent voices with radio effects."}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,marginTop:12},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[O.jsx(b0,{size:14,style:{color:"#ffaa00"}}),O.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:12,color:"#ffaa00",fontWeight:600},children:"~5 min"})]}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[O.jsx(oO,{size:14,style:{color:"#ff3366"}}),O.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:12,color:"#ff3366",fontWeight:600},children:"Hero Mode Interactive"})]})]})]}),O.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:56,height:56,background:"rgba(255, 51, 102, 0.3)",borderRadius:28,flexShrink:0},children:O.jsx(Jg,{size:28,style:{color:"#ff3366",marginLeft:4}})})]})}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,padding:"24px 24px 12px"},children:[O.jsx("div",{style:{flex:1,height:1,background:"rgba(0, 255, 136, 0.15)"}}),O.jsx("span",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:11,color:"#6e7681",textTransform:"uppercase",letterSpacing:2},children:"Scenario Library"}),O.jsx("div",{style:{flex:1,height:1,background:"rgba(0, 255, 136, 0.15)"}})]}),O.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12,padding:"0 24px 16px"},children:c.map(f=>O.jsx(iX,{scenario:f,onClick:()=>n(f.id)},f.id))}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,padding:"8px 24px 12px"},children:[O.jsx("div",{style:{flex:1,height:1,background:"rgba(0, 255, 136, 0.15)"}}),O.jsx("span",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:11,color:"#6e7681",textTransform:"uppercase",letterSpacing:2},children:"Complete Experience"}),O.jsx("div",{style:{flex:1,height:1,background:"rgba(0, 255, 136, 0.15)"}})]}),O.jsx("div",{style:{padding:"0 24px 24px"},children:O.jsxs(Qe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:a,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:12,padding:"16px 24px",background:"linear-gradient(135deg, rgba(0, 255, 136, 0.15), rgba(0, 212, 255, 0.15))",border:"1px solid rgba(0, 255, 136, 0.3)",borderRadius:12,cursor:"pointer"},children:[O.jsx(Jg,{size:22,style:{color:"#00ff88"}}),O.jsxs("div",{style:{textAlign:"left"},children:[O.jsx("div",{style:{fontFamily:"'Orbitron', monospace",fontSize:13,fontWeight:600,color:"#00ff88",letterSpacing:1},children:"FULL TOUR"}),O.jsx("div",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:11,color:"#8b949e",marginTop:2},children:"All 6 scenarios in sequence"})]}),O.jsx("div",{style:{flex:1}}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:"#6e7681"},children:[O.jsx(b0,{size:14}),O.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:"~10 min"})]})]})})]})})})}function iX({scenario:i,onClick:t}){const e=tX[i.icon]||um;return O.jsxs(Qe.button,{whileHover:{scale:1.02,borderColor:"rgba(0, 255, 136, 0.5)"},whileTap:{scale:.98},onClick:t,style:{display:"flex",alignItems:"flex-start",gap:10,padding:14,background:"rgba(21, 27, 35, 0.8)",border:"1px solid rgba(0, 255, 136, 0.15)",borderRadius:10,cursor:"pointer",textAlign:"left",transition:"border-color 0.2s ease"},children:[O.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:36,height:36,background:"rgba(0, 255, 136, 0.1)",borderRadius:8,flexShrink:0},children:O.jsx(e,{size:18,style:{color:"#00ff88"}})}),O.jsxs("div",{style:{flex:1,minWidth:0},children:[O.jsx("h4",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:13,fontWeight:600,color:"#e6edf3",margin:0,marginBottom:3},children:i.title}),O.jsx("p",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:11,color:"#6e7681",margin:0,lineHeight:1.3,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:i.description}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,marginTop:6,color:"#6e7681"},children:[O.jsx(b0,{size:10}),O.jsxs("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:9},children:["~",i.duration," min"]})]})]})]})}function aX({command:i,onComplete:t}){const[e,n]=ct.useState(""),[a,s]=ct.useState(!1),[o,c]=ct.useState(!1),f=ct.useRef(null),d=ct.useRef(null);return ct.useEffect(()=>{if(!i||i===f.current)return;f.current=i,n(""),s(!0),c(!1),d.current&&clearInterval(d.current);let g=0;const y=40;return d.current=window.setInterval(()=>{g<i.length?(n(i.substring(0,g+1)),g++):(d.current&&(clearInterval(d.current),d.current=null),s(!1),c(!0),zr.speakATC(i,()=>{c(!1),t?.()}))},y),()=>{d.current&&clearInterval(d.current)}},[i,t]),i?O.jsx(ls,{children:O.jsxs(Qe.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},transition:{type:"spring",stiffness:300,damping:25},style:{position:"fixed",bottom:80,left:"50%",transform:"translateX(-50%)",background:"linear-gradient(135deg, rgba(0, 100, 50, 0.95), rgba(0, 60, 30, 0.98))",border:"2px solid rgba(0, 255, 136, 0.6)",borderRadius:16,padding:"16px 24px",minWidth:400,maxWidth:700,zIndex:9600,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5), 0 0 40px rgba(0, 255, 136, 0.2), inset 0 1px 0 rgba(255,255,255,0.1)"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:12},children:[O.jsx(Qe.div,{animate:o?{scale:[1,1.2,1]}:{},transition:{duration:.5,repeat:o?1/0:0},style:{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,background:"rgba(0, 255, 136, 0.2)",borderRadius:"50%",border:"2px solid rgba(0, 255, 136, 0.5)"},children:o?O.jsx(cO,{size:16,style:{color:"#00ff88"}}):O.jsx(vd,{size:16,style:{color:"#00ff88"}})}),O.jsx("div",{style:{fontFamily:"'Orbitron', monospace",fontSize:14,fontWeight:700,color:"#00ff88",letterSpacing:3,textTransform:"uppercase",textShadow:"0 0 10px rgba(0, 255, 136, 0.5)"},children:"YOU (ATC)"}),O.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:6},children:[a&&O.jsx(Qe.div,{animate:{opacity:[.5,1,.5]},transition:{duration:.8,repeat:1/0},style:{fontFamily:"'JetBrains Mono', monospace",fontSize:10,color:"#ffaa00",textTransform:"uppercase"},children:"TYPING..."}),o&&O.jsx(Qe.div,{animate:{opacity:[.5,1,.5]},transition:{duration:.5,repeat:1/0},style:{fontFamily:"'JetBrains Mono', monospace",fontSize:10,color:"#00d4ff",textTransform:"uppercase"},children:"TRANSMITTING"})]})]}),O.jsxs("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:18,fontWeight:500,color:"#ffffff",lineHeight:1.5,letterSpacing:.5,textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:[e,a&&O.jsx(Qe.span,{animate:{opacity:[1,0,1]},transition:{duration:.5,repeat:1/0},style:{color:"#00ff88"},children:""})]}),o&&O.jsx(Qe.div,{animate:{opacity:[.02,.05,.02]},transition:{duration:.1,repeat:1/0},style:{position:"absolute",inset:0,background:`url("data:image/svg+xml,%3Csvg viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100' height='100' filter='url(%23noise)' opacity='0.5'/%3E%3C/svg%3E")`,pointerEvents:"none",borderRadius:16}})]})}):null}const sX={CRITICAL:{icon:um,color:"#ff3366",bgColor:"rgba(255, 51, 102, 0.15)",borderColor:"rgba(255, 51, 102, 0.5)",label:"CRIT"},WARNING:{icon:rO,color:"#ffaa00",bgColor:"rgba(255, 170, 0, 0.1)",borderColor:"rgba(255, 170, 0, 0.4)",label:"WARN"},INFO:{icon:lO,color:"#00d4ff",bgColor:"rgba(0, 212, 255, 0.1)",borderColor:"rgba(0, 212, 255, 0.3)",label:"INFO"}};function rX(i){const t=new Date(i),n=new Date().getTime()-t.getTime(),a=Math.floor(n/1e3);return a<60?`${a}s ago`:a<3600?`${Math.floor(a/60)}m ago`:t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}function oX({alert:i,onAcknowledge:t,onSelectFlight:e}){const n=sX[i.severity],a=n.icon;return O.jsxs(Qe.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1,...i.severity==="CRITICAL"&&!i.acknowledged?{boxShadow:["0 0 5px rgba(255, 51, 102, 0.3)","0 0 15px rgba(255, 51, 102, 0.5)","0 0 5px rgba(255, 51, 102, 0.3)"]}:{}},transition:{boxShadow:{repeat:1/0,duration:1}},exit:{opacity:0,scale:.9,x:100},layout:!0,style:{background:i.acknowledged?"rgba(21, 27, 35, 0.5)":n.bgColor,border:`1px solid ${i.acknowledged?"rgba(110, 118, 129, 0.2)":n.borderColor}`,borderRadius:6,padding:10,marginBottom:6,opacity:i.acknowledged?.6:1,position:"relative",overflow:"hidden"},children:[i.severity==="CRITICAL"&&!i.acknowledged&&O.jsx(Qe.div,{animate:{opacity:[.5,1,.5]},transition:{duration:.5,repeat:1/0},style:{position:"absolute",left:0,top:0,bottom:0,width:3,background:n.color}}),O.jsxs("div",{style:{display:"flex",gap:10},children:[O.jsx("div",{style:{flexShrink:0,display:"flex",alignItems:"flex-start",paddingTop:2},children:O.jsx(a,{size:16,style:{color:i.acknowledged?"#6e7681":n.color}})}),O.jsxs("div",{style:{flex:1,minWidth:0},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:4},children:[O.jsx("span",{style:{fontFamily:"'Orbitron', monospace",fontSize:9,fontWeight:600,padding:"2px 6px",borderRadius:3,background:i.acknowledged?"rgba(110, 118, 129, 0.2)":n.bgColor,color:i.acknowledged?"#6e7681":n.color,border:`1px solid ${i.acknowledged?"rgba(110, 118, 129, 0.3)":n.borderColor}`},children:n.label}),O.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:10,color:"#6e7681"},children:rX(i.timestamp)}),i.acknowledged&&O.jsx(Fw,{size:12,style:{color:"#00ff88",marginLeft:"auto"}})]}),O.jsx("p",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:12,color:i.acknowledged?"#8b949e":"#e6edf3",margin:0,lineHeight:1.4},children:i.message}),i.involvedFlightIds.length>0&&O.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:4,marginTop:6},children:i.involvedFlightIds.map(s=>O.jsx("button",{onClick:()=>e?.(s),style:{fontFamily:"'JetBrains Mono', monospace",fontSize:10,padding:"2px 6px",borderRadius:3,background:"rgba(0, 255, 136, 0.1)",border:"1px solid rgba(0, 255, 136, 0.3)",color:"#00ff88",cursor:"pointer"},children:s},s))})]}),!i.acknowledged&&O.jsxs("button",{onClick:t,style:{flexShrink:0,background:"transparent",border:`1px solid ${n.borderColor}`,borderRadius:4,padding:"4px 8px",color:n.color,cursor:"pointer",fontFamily:"'Rajdhani', sans-serif",fontSize:10,fontWeight:600,textTransform:"uppercase",display:"flex",alignItems:"center",gap:4},children:[O.jsx(Fw,{size:12}),"ACK"]})]})]})}function lX({alerts:i,onAcknowledge:t,onSelectFlight:e}){const[n,a]=ct.useState(!0),[s,o]=ct.useState(!1),[c,f]=ct.useState(!0),d=ct.useRef(new Set),{state:g}=Yf(),y=i.filter(T=>!T.acknowledged),x=i.filter(T=>T.severity==="CRITICAL"&&!T.acknowledged).length,b=c?i:y;return ct.useEffect(()=>{if(s)return;const T=new Set(i.map(C=>C.alertId)),R=i.filter(C=>!d.current.has(C.alertId));if(R.length>0&&d.current.size>0){const C=R.find(z=>z.severity==="CRITICAL"),w=R.find(z=>z.severity==="WARNING"),N=C||w||R[0];C?Du.play("critical"):w?Du.play("warning"):Du.play("alert");const I=g.isActive&&g.mode==="playing";N&&!I&&Pc.speakAlert(N.severity,N.message)}d.current=T},[i,s,g.isActive,g.mode]),ct.useEffect(()=>{Du.setMuted(s),Pc.setEnabled(!s)},[s]),O.jsxs("div",{className:"alert-panel panel",style:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:[O.jsxs("div",{className:"panel-header",style:{flexShrink:0,position:"relative"},children:[x>0&&O.jsx(Qe.div,{animate:{opacity:[0,.3,0]},transition:{duration:1,repeat:1/0},style:{position:"absolute",inset:0,background:"linear-gradient(90deg, rgba(255, 51, 102, 0.2), transparent)",pointerEvents:"none"}}),O.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8,flex:1},children:[O.jsx(eT,{size:14}),"ALERTS",y.length>0&&O.jsx(Qe.span,{initial:{scale:0},animate:{scale:1},style:{fontFamily:"'JetBrains Mono', monospace",fontSize:10,padding:"2px 6px",borderRadius:10,background:x>0?"#ff3366":"#ffaa00",color:x>0?"#fff":"#000",fontWeight:600},children:y.length})]}),O.jsx("button",{onClick:()=>f(!c),style:{background:"transparent",border:"none",color:c?"#00ff88":"#6e7681",cursor:"pointer",padding:4,fontSize:9,fontFamily:"'Rajdhani', sans-serif"},children:c?"ALL":"ACTIVE"}),O.jsx("button",{onClick:()=>o(!s),style:{background:"transparent",border:"none",color:s?"#ff3366":"#8b949e",cursor:"pointer",padding:4},children:s?O.jsx(iT,{size:14}):O.jsx(tm,{size:14})}),O.jsx("button",{onClick:()=>a(!n),style:{background:"transparent",border:"none",color:"#8b949e",cursor:"pointer",padding:4},children:n?O.jsx(ix,{size:14}):O.jsx(k0,{size:14})})]}),O.jsx(ls,{children:n&&O.jsxs(Qe.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},style:{flex:1,overflowY:"auto",overflowX:"hidden",padding:8},children:[O.jsx(ls,{mode:"popLayout",children:b.map(T=>O.jsx(oX,{alert:T,onAcknowledge:()=>t(T.alertId),onSelectFlight:e},T.alertId))}),b.length===0&&O.jsx("div",{style:{textAlign:"center",padding:20,color:"#6e7681",fontFamily:"'Rajdhani', sans-serif",fontSize:12},children:"No active alerts"})]})})]})}function cX(i){return i>=.8?"#ff3366":i>=.6?"#ffaa00":i>=.4?"#00d4ff":"#00ff88"}function uX(i){const t=new Date(i).getTime()-Date.now();if(t<0)return"NOW";const e=Math.floor(t/6e4),n=Math.floor(t%6e4/1e3);return e>0?`${e}:${n.toString().padStart(2,"0")}`:`${n}s`}function fX({prediction:i,onSelectFlight:t}){const e=cX(i.probability),n=Math.round(i.probability*100);return O.jsxs(Qe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},style:{background:"rgba(21, 27, 35, 0.8)",border:"1px solid rgba(0, 255, 136, 0.15)",borderRadius:6,padding:10,marginBottom:6,position:"relative",overflow:"hidden"},children:[O.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:3,background:e}}),O.jsxs("div",{style:{display:"flex",gap:10},children:[O.jsx("div",{style:{flexShrink:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:50},children:O.jsxs("div",{style:{position:"relative",width:44,height:44},children:[O.jsxs("svg",{width:"44",height:"44",style:{position:"absolute"},children:[O.jsx("circle",{cx:"22",cy:"22",r:"18",fill:"none",stroke:"rgba(0, 255, 136, 0.1)",strokeWidth:"4"}),O.jsx("circle",{cx:"22",cy:"22",r:"18",fill:"none",stroke:e,strokeWidth:"4",strokeDasharray:`${2*Math.PI*18*i.probability} ${2*Math.PI*18}`,strokeLinecap:"round",transform:"rotate(-90 22 22)",style:{filter:`drop-shadow(0 0 4px ${e})`}})]}),O.jsxs("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"'JetBrains Mono', monospace",fontSize:12,fontWeight:600,color:e},children:[n,"%"]})]})}),O.jsxs("div",{style:{flex:1,minWidth:0},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:4},children:[O.jsx(aT,{size:12,style:{color:e}}),O.jsx("span",{style:{fontFamily:"'Orbitron', monospace",fontSize:10,fontWeight:600,color:e,textTransform:"uppercase"},children:i.predictionType}),O.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:4},children:[O.jsx(b0,{size:10,style:{color:"#6e7681"}}),O.jsxs("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:10,color:i.probability>=.8?"#ff3366":"#8b949e",fontWeight:i.probability>=.8?600:400},children:["T-",uX(i.predictedTime)]})]})]}),O.jsx("p",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:11,color:"#e6edf3",margin:0,lineHeight:1.3},children:i.description}),i.involvedFlights.length>0&&O.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:4,marginTop:6},children:i.involvedFlights.map(a=>O.jsx("button",{onClick:()=>t?.(a),style:{fontFamily:"'JetBrains Mono', monospace",fontSize:9,padding:"2px 6px",borderRadius:3,background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",color:"#00d4ff",cursor:"pointer"},children:a},a))})]})]})]})}function hX({predictions:i,onSelectFlight:t}){const[e,n]=ct.useState(!0),a=[...i].sort((o,c)=>c.probability-o.probability),s=i.filter(o=>o.probability>=.7).length;return O.jsxs("div",{className:"prediction-panel panel",style:{display:"flex",flexDirection:"column",overflow:"hidden"},children:[O.jsxs("div",{className:"panel-header",style:{flexShrink:0},children:[O.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8,flex:1},children:[O.jsx(Ej,{size:14}),"AI PREDICTIONS",s>0&&O.jsx(Qe.span,{animate:{scale:[1,1.1,1]},transition:{duration:1,repeat:1/0},style:{fontFamily:"'JetBrains Mono', monospace",fontSize:10,padding:"2px 6px",borderRadius:10,background:"#ffaa00",color:"#000",fontWeight:600},children:s})]}),O.jsx(rq,{size:14,style:{color:"#8b949e"}}),O.jsx("button",{onClick:()=>n(!e),style:{background:"transparent",border:"none",color:"#8b949e",cursor:"pointer",padding:4},children:e?O.jsx(ix,{size:14}):O.jsx(k0,{size:14})})]}),O.jsx(ls,{children:e&&O.jsxs(Qe.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},style:{flex:1,overflowY:"auto",overflowX:"hidden",padding:8},children:[O.jsx(ls,{mode:"popLayout",children:a.map(o=>O.jsx(fX,{prediction:o,onSelectFlight:t},o.id))}),i.length===0&&O.jsx("div",{style:{textAlign:"center",padding:20,color:"#6e7681",fontFamily:"'Rajdhani', sans-serif",fontSize:12},children:"No active predictions"})]})})]})}function dX(i){return i>=18e3?`FL${Math.round(i/100).toString().padStart(3,"0")}`:`${Math.round(i/100)*100} ft`}function pX(i){return Math.abs(i)<100?{icon:uO,color:"#8b949e",text:"Level"}:i>0?{icon:nx,color:"#00ff88",text:`+${i} fpm`}:{icon:ex,color:"#ffaa00",text:`${i} fpm`}}function mX(i,t){const e=i>=0?"N":"S",n=t>=0?"E":"W",a=Math.abs(i).toFixed(4),s=Math.abs(t).toFixed(4);return`${a}${e} ${s}${n}`}function gX({track:i,flight:t,onClose:e,onSendMessage:n}){if(!i)return null;const a=pX(i.verticalRateFpm),s=a.icon,o=o1(i.callsign),c=i.aircraftType?T2[i.aircraftType]:null,f=i.aircraftType?_O(i.aircraftType):"narrow",d=c?.category==="military",g=c?.typicalSeats?Math.round(c.typicalSeats*.85)+6:null,{trackedFlightId:y,setTrackedFlightId:x}=Hs(),b=y===i.trackId;return O.jsx(ls,{children:i&&O.jsxs(Qe.div,{initial:{opacity:0,x:20,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:20,scale:.95},transition:{duration:.2},style:{position:"absolute",top:20,left:20,width:320,background:"rgba(13, 17, 23, 0.95)",border:"1px solid rgba(0, 212, 255, 0.5)",borderRadius:8,overflow:"hidden",zIndex:1e3,backdropFilter:"blur(10px)",boxShadow:"0 4px 24px rgba(0, 0, 0, 0.5), 0 0 20px rgba(0, 212, 255, 0.1)"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",background:o?`linear-gradient(90deg, ${o.color}30, transparent)`:"linear-gradient(90deg, rgba(0, 212, 255, 0.15), transparent)",borderBottom:`1px solid ${o?.color||"rgba(0, 212, 255, 0.3)"}50`},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[o&&O.jsx("span",{style:{fontSize:24,lineHeight:1},children:o.countryFlag}),O.jsx(yO,{size:f,color:o?.color||"#00d4ff",width:28,isMilitary:d}),O.jsxs("div",{children:[O.jsx("h3",{style:{fontFamily:"'Orbitron', monospace",fontSize:16,fontWeight:700,color:o?.color||"#00d4ff",margin:0,letterSpacing:2},children:i.callsign}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginTop:2},children:[o&&O.jsx("span",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:11,fontWeight:600,color:o.color},children:o.name}),c&&O.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:10,color:"#8b949e"},children:c.name})]})]})]}),O.jsx("button",{onClick:e,style:{display:"flex",alignItems:"center",justifyContent:"center",width:28,height:28,background:"transparent",border:"1px solid rgba(0, 212, 255, 0.3)",borderRadius:4,color:"#8b949e",cursor:"pointer"},children:O.jsx(fm,{size:14})})]}),(o||g)&&O.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 16px",background:"rgba(0, 0, 0, 0.3)",borderBottom:"1px solid rgba(0, 255, 136, 0.1)"},children:[o&&O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[O.jsx(Cj,{size:12,style:{color:"#6e7681"}}),O.jsx("span",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:11,color:"#8b949e"},children:o.country}),O.jsx("span",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:10,color:"#6e7681",background:"rgba(110, 118, 129, 0.2)",padding:"1px 6px",borderRadius:3},children:d?"MILITARY":c?.category?.toUpperCase()||"COMMERCIAL"})]}),g&&O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[O.jsx(vO,{size:12,style:{color:"#ffaa00"}}),O.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:12,fontWeight:600,color:"#ffaa00"},children:g}),O.jsx("span",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:10,color:"#6e7681"},children:"SOB"})]})]}),O.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:1,padding:1,background:"rgba(0, 255, 136, 0.1)"},children:[O.jsx(Fy,{icon:nT,label:"ALTITUDE",value:dX(i.altitudeFt),color:"#00ff88"}),O.jsx(Fy,{icon:_2,label:"SPEED",value:`${i.speedKt} KT`,color:"#00d4ff"}),O.jsx(Fy,{icon:_2,label:"HEADING",value:`${Math.round(i.headingDeg).toString().padStart(3,"0")}`,color:"#00d4ff"}),O.jsx(Fy,{icon:s,label:"V/S",value:a.text,color:a.color})]}),O.jsxs("div",{style:{padding:"12px 16px",borderTop:"1px solid rgba(0, 255, 136, 0.1)"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:6},children:[O.jsx(mW,{size:12,style:{color:"#6e7681"}}),O.jsx("span",{style:{fontFamily:"'Orbitron', monospace",fontSize:9,color:"#6e7681",letterSpacing:1},children:"POSITION"})]}),O.jsx("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:12,color:"#e6edf3"},children:mX(i.latitudeDeg,i.longitudeDeg)})]}),t&&O.jsxs("div",{style:{padding:"12px 16px",borderTop:"1px solid rgba(0, 255, 136, 0.1)"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[O.jsx(FW,{size:12,style:{color:"#6e7681"}}),O.jsx("span",{style:{fontFamily:"'Orbitron', monospace",fontSize:9,color:"#6e7681",letterSpacing:1},children:"ROUTE"})]}),O.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[O.jsx("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:14,fontWeight:600,color:"#00ff88"},children:t.departureAirport}),O.jsx("div",{style:{flex:1,height:2,margin:"0 12px",background:"linear-gradient(90deg, #00ff88, #00d4ff)",borderRadius:1}}),O.jsx("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:14,fontWeight:600,color:"#00d4ff"},children:t.arrivalAirport})]})]}),O.jsxs("div",{style:{display:"flex",gap:8,padding:"12px 16px",borderTop:"1px solid rgba(0, 255, 136, 0.1)"},children:[O.jsxs("button",{onClick:()=>n?.(i.callsign),style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:6,padding:"8px 12px",background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",borderRadius:4,color:"#00d4ff",fontFamily:"'Rajdhani', sans-serif",fontSize:11,fontWeight:600,textTransform:"uppercase",cursor:"pointer",letterSpacing:1},children:[O.jsx(pO,{size:12}),"MESSAGE"]}),O.jsxs("button",{onClick:()=>x(b?null:i.trackId),style:{display:"flex",alignItems:"center",justifyContent:"center",gap:6,padding:"8px 12px",background:b?"rgba(0, 255, 136, 0.2)":"transparent",border:`1px solid ${b?"rgba(0, 255, 136, 0.6)":"rgba(0, 255, 136, 0.3)"}`,borderRadius:4,color:"#00ff88",fontFamily:"'Rajdhani', sans-serif",fontSize:11,fontWeight:600,textTransform:"uppercase",cursor:"pointer",letterSpacing:1},children:[O.jsx(vd,{size:12}),b?"TRACKING":"TRACK"]})]}),O.jsxs("div",{style:{padding:"8px 16px",background:"rgba(0, 0, 0, 0.3)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[O.jsx("span",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:10,color:"#6e7681"},children:"TRACK CONFIDENCE"}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[O.jsx("div",{style:{width:60,height:4,background:"rgba(0, 255, 136, 0.2)",borderRadius:2,overflow:"hidden"},children:O.jsx("div",{style:{width:`${i.confidence*100}%`,height:"100%",background:i.confidence>.9?"#00ff88":i.confidence>.7?"#ffaa00":"#ff3366",borderRadius:2}})}),O.jsxs("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:10,color:i.confidence>.9?"#00ff88":i.confidence>.7?"#ffaa00":"#ff3366"},children:[Math.round(i.confidence*100),"%"]})]})]})]})})}function Fy({icon:i,label:t,value:e,color:n}){return O.jsxs("div",{style:{padding:"10px 14px",background:"rgba(13, 17, 23, 0.95)"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:4},children:[O.jsx(i,{size:10,style:{color:"#6e7681"}}),O.jsx("span",{style:{fontFamily:"'Orbitron', monospace",fontSize:8,color:"#6e7681",letterSpacing:1},children:t})]}),O.jsx("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:14,fontWeight:600,color:n,textShadow:`0 0 8px ${n}40`},children:e})]})}function vX({isOpen:i,onClose:t}){const[e,n]=ct.useState(Du.getVolume()*100),[a,s]=ct.useState(Du.isMuted()),[o,c]=ct.useState(!0),[f,d]=ct.useState("default"),[g,y]=ct.useState(!0),[x,b]=ct.useState(!1),T=w=>{n(w),Du.setVolume(w/100)},R=()=>{const w=!a;s(w),Du.setMuted(w)},C=()=>{Du.play("alert")};return i?O.jsx(ls,{children:O.jsx(Qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},children:O.jsxs(Qe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:w=>w.stopPropagation(),style:{width:480,maxHeight:"80vh",background:"rgba(13, 17, 23, 0.98)",border:"1px solid rgba(0, 255, 136, 0.3)",borderRadius:12,overflow:"hidden"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:16,borderBottom:"1px solid rgba(0, 255, 136, 0.2)",background:"linear-gradient(90deg, rgba(0, 255, 136, 0.1), transparent)"},children:[O.jsx("h2",{style:{fontFamily:"'Orbitron', monospace",fontSize:16,fontWeight:600,color:"#00ff88",margin:0,letterSpacing:2},children:"SETTINGS"}),O.jsx("button",{onClick:t,style:{background:"transparent",border:"1px solid rgba(255, 51, 102, 0.3)",borderRadius:4,padding:8,color:"#ff3366",cursor:"pointer",display:"flex"},children:O.jsx(fm,{size:16})})]}),O.jsxs("div",{style:{padding:20,overflowY:"auto"},children:[O.jsx(ky,{title:"Audio",icon:tm,children:O.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[O.jsx("button",{onClick:R,style:{background:a?"rgba(255, 51, 102, 0.2)":"rgba(0, 255, 136, 0.2)",border:`1px solid ${a?"rgba(255, 51, 102, 0.5)":"rgba(0, 255, 136, 0.5)"}`,borderRadius:4,padding:8,color:a?"#ff3366":"#00ff88",cursor:"pointer",display:"flex"},children:a?O.jsx(iT,{size:16}):O.jsx(tm,{size:16})}),O.jsx("div",{style:{flex:1},children:O.jsx("input",{type:"range",min:"0",max:"100",value:e,onChange:w=>T(Number(w.target.value)),disabled:a,style:{width:"100%",accentColor:"#00ff88"}})}),O.jsxs("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:12,color:a?"#6e7681":"#e6edf3",width:40,textAlign:"right"},children:[Math.round(e),"%"]})]}),O.jsx("button",{onClick:C,disabled:a,style:{background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",borderRadius:4,padding:"8px 16px",color:a?"#6e7681":"#00d4ff",cursor:a?"not-allowed":"pointer",fontFamily:"'Rajdhani', sans-serif",fontSize:12,fontWeight:600},children:"Test Alert Sound"})]})}),O.jsxs(ky,{title:"Display",icon:fO,children:[O.jsx(yb,{label:"Scanline Effect",description:"CRT-style scanline overlay",checked:o,onChange:c}),O.jsx(yb,{label:"Reduced Motion",description:"Minimize animations",checked:x,onChange:b})]}),O.jsx(ky,{title:"Alerts",icon:eT,children:O.jsx(yb,{label:"Alert Sounds",description:"Play sounds for new alerts",checked:g,onChange:y})}),O.jsx(ky,{title:"Theme",icon:RW,children:O.jsx("div",{style:{display:"flex",gap:8},children:["default","high-contrast","classic"].map(w=>O.jsx("button",{onClick:()=>d(w),style:{flex:1,padding:"10px 16px",background:f===w?"rgba(0, 255, 136, 0.2)":"rgba(30, 35, 42, 0.5)",border:`1px solid ${f===w?"rgba(0, 255, 136, 0.5)":"rgba(110, 118, 129, 0.3)"}`,borderRadius:4,color:f===w?"#00ff88":"#8b949e",cursor:"pointer",fontFamily:"'Rajdhani', sans-serif",fontSize:11,fontWeight:600,textTransform:"capitalize"},children:w.replace("-"," ")},w))})})]}),O.jsx("div",{style:{padding:16,borderTop:"1px solid rgba(0, 255, 136, 0.2)",display:"flex",justifyContent:"flex-end",gap:12},children:O.jsx("button",{onClick:t,style:{background:"rgba(0, 255, 136, 0.2)",border:"1px solid rgba(0, 255, 136, 0.5)",borderRadius:6,padding:"10px 24px",color:"#00ff88",cursor:"pointer",fontFamily:"'Orbitron', monospace",fontSize:11,fontWeight:600,letterSpacing:1},children:"DONE"})})]})})}):null}function ky({title:i,icon:t,children:e}){return O.jsxs("div",{style:{marginBottom:24},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[O.jsx(t,{size:14,style:{color:"#00d4ff"}}),O.jsx("h3",{style:{fontFamily:"'Orbitron', monospace",fontSize:11,fontWeight:600,color:"#00d4ff",margin:0,letterSpacing:1,textTransform:"uppercase"},children:i})]}),O.jsx("div",{style:{background:"rgba(30, 35, 42, 0.5)",border:"1px solid rgba(0, 255, 136, 0.1)",borderRadius:6,padding:16},children:e})]})}function yb({label:i,description:t,checked:e,onChange:n}){return O.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 0"},children:[O.jsxs("div",{children:[O.jsx("div",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:14,fontWeight:600,color:"#e6edf3"},children:i}),O.jsx("div",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:11,color:"#6e7681"},children:t})]}),O.jsx("button",{onClick:()=>n(!e),style:{width:44,height:24,borderRadius:12,border:"none",background:e?"#00ff88":"rgba(110, 118, 129, 0.4)",cursor:"pointer",position:"relative",transition:"background 0.2s ease"},children:O.jsx("div",{style:{position:"absolute",top:2,left:e?22:2,width:20,height:20,borderRadius:"50%",background:"#fff",transition:"left 0.2s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.3)"}})})]})}function yX({isOpen:i,onClose:t}){return i?O.jsx(ls,{children:O.jsx(Qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},children:O.jsxs(Qe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),style:{width:600,maxHeight:"85vh",background:"rgba(13, 17, 23, 0.98)",border:"1px solid rgba(0, 255, 136, 0.3)",borderRadius:12,overflow:"hidden"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:16,borderBottom:"1px solid rgba(0, 255, 136, 0.2)",background:"linear-gradient(90deg, rgba(0, 255, 136, 0.1), transparent)"},children:[O.jsx("h2",{style:{fontFamily:"'Orbitron', monospace",fontSize:16,fontWeight:600,color:"#00ff88",margin:0,letterSpacing:2},children:"HELP & CONTROLS"}),O.jsx("button",{onClick:t,style:{background:"transparent",border:"1px solid rgba(255, 51, 102, 0.3)",borderRadius:4,padding:8,color:"#ff3366",cursor:"pointer",display:"flex"},children:O.jsx(fm,{size:16})})]}),O.jsxs("div",{style:{padding:20,overflowY:"auto",maxHeight:"calc(85vh - 120px)"},children:[O.jsx(Rp,{title:"Quick Start",icon:aT,children:O.jsx("p",{style:{color:"#e6edf3",lineHeight:1.6,margin:0},children:"ATCS-NG is an AI-powered air traffic control system. Click on any aircraft to see details, acknowledge alerts in the right panel, and use the Demo button to explore system capabilities."})}),O.jsxs(Rp,{title:"Mouse Controls",icon:EW,children:[O.jsx(Nc,{shortcut:"Click aircraft",description:"Select and view flight details"}),O.jsx(Nc,{shortcut:"Click empty space",description:"Deselect current aircraft"}),O.jsx(Nc,{shortcut:"Scroll",description:"Zoom radar in/out"}),O.jsx(Nc,{shortcut:"Drag",description:"Pan radar view"}),O.jsx(Nc,{shortcut:"Click callsign tag",description:"Jump to flight on map"})]}),O.jsxs(Rp,{title:"Keyboard Shortcuts",icon:dW,children:[O.jsx(Nc,{shortcut:"D",description:"Toggle data blocks"}),O.jsx(Nc,{shortcut:"T",description:"Toggle track trails"}),O.jsx(Nc,{shortcut:"Esc",description:"Close modals / Deselect"}),O.jsx(Nc,{shortcut:"F11",description:"Toggle fullscreen"}),O.jsx(Nc,{shortcut:"M",description:"Mute/unmute sounds"})]}),O.jsx(Rp,{title:"Display Elements",icon:fO,children:O.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[O.jsx(Vy,{color:"#00ff88",label:"Aircraft Track",description:"Normal flight"}),O.jsx(Vy,{color:"#00d4ff",label:"Selected Track",description:"Currently selected aircraft"}),O.jsx(Vy,{color:"#ffaa00",label:"Warning",description:"Potential conflict or issue"}),O.jsx(Vy,{color:"#ff3366",label:"Critical",description:"Emergency or immediate action required"})]})}),O.jsxs(Rp,{title:"Alert Types",icon:rO,children:[O.jsx(_b,{severity:"CRITICAL",color:"#ff3366",description:"Immediate action required - emergency, loss of separation, TCAS RA"}),O.jsx(_b,{severity:"WARNING",color:"#ffaa00",description:"Attention needed - predicted conflict, weather hazard, deviation"}),O.jsx(_b,{severity:"INFO",color:"#00d4ff",description:"Informational - handoffs, status updates, advisories"})]}),O.jsxs(Rp,{title:"About ATCS-NG",icon:lO,children:[O.jsx("p",{style:{color:"#8b949e",lineHeight:1.6,margin:0,fontSize:13},children:"ATCS-NG (Next Generation Air Traffic Control System) is a demonstration of AI-powered air traffic management. This system showcases real-time surveillance, predictive conflict detection, and intelligent traffic optimization."}),O.jsx("div",{style:{marginTop:12,padding:12,background:"rgba(0, 255, 136, 0.05)",border:"1px solid rgba(0, 255, 136, 0.2)",borderRadius:6},children:O.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:11,color:"#6e7681"},children:"Version 2.0.0 | Sector: BOS_33"})})]})]}),O.jsx("div",{style:{padding:16,borderTop:"1px solid rgba(0, 255, 136, 0.2)",display:"flex",justifyContent:"flex-end"},children:O.jsx("button",{onClick:t,style:{background:"rgba(0, 255, 136, 0.2)",border:"1px solid rgba(0, 255, 136, 0.5)",borderRadius:6,padding:"10px 24px",color:"#00ff88",cursor:"pointer",fontFamily:"'Orbitron', monospace",fontSize:11,fontWeight:600,letterSpacing:1},children:"CLOSE"})})]})})}):null}function Rp({title:i,icon:t,children:e}){return O.jsxs("div",{style:{marginBottom:24},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[O.jsx(t,{size:14,style:{color:"#00d4ff"}}),O.jsx("h3",{style:{fontFamily:"'Orbitron', monospace",fontSize:11,fontWeight:600,color:"#00d4ff",margin:0,letterSpacing:1,textTransform:"uppercase"},children:i})]}),O.jsx("div",{style:{background:"rgba(30, 35, 42, 0.5)",border:"1px solid rgba(0, 255, 136, 0.1)",borderRadius:6,padding:16},children:e})]})}function Nc({shortcut:i,description:t}){return O.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 0",borderBottom:"1px solid rgba(110, 118, 129, 0.1)"},children:[O.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:11,padding:"4px 8px",background:"rgba(0, 255, 136, 0.1)",border:"1px solid rgba(0, 255, 136, 0.3)",borderRadius:4,color:"#00ff88"},children:i}),O.jsx("span",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:13,color:"#8b949e"},children:t})]})}function Vy({color:i,label:t,description:e}){return O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[O.jsx("div",{style:{width:12,height:12,borderRadius:"50%",background:i,boxShadow:`0 0 8px ${i}`}}),O.jsxs("div",{children:[O.jsx("span",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:13,fontWeight:600,color:"#e6edf3"},children:t}),O.jsxs("span",{style:{color:"#6e7681",fontSize:12},children:["  ",e]})]})]})}function _b({severity:i,color:t,description:e}){return O.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:12,padding:"8px 0",borderBottom:"1px solid rgba(110, 118, 129, 0.1)"},children:[O.jsx("span",{style:{fontFamily:"'Orbitron', monospace",fontSize:9,fontWeight:600,padding:"4px 8px",borderRadius:4,background:`${t}20`,border:`1px solid ${t}50`,color:t,flexShrink:0},children:i}),O.jsx("span",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:12,color:"#8b949e",lineHeight:1.5},children:e})]})}const _X=[{mode:"2d",label:"2D RADAR",icon:""},{mode:"3d",label:"3D VIEW",icon:""}];function xX(){const{viewMode:i,setViewMode:t}=Hs();return O.jsx("div",{style:{display:"flex",gap:4,padding:4,background:"rgba(13, 17, 23, 0.9)",borderRadius:6,border:"1px solid rgba(0, 255, 136, 0.2)"},children:_X.map(({mode:e,label:n,icon:a})=>O.jsxs(Qe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(e),style:{padding:"6px 12px",background:i===e?"rgba(0, 255, 136, 0.2)":"transparent",color:i===e?"#00ff88":"#6e7681",border:i===e?"1px solid #00ff88":"1px solid transparent",borderRadius:4,fontFamily:"'Rajdhani', sans-serif",fontSize:11,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:6},children:[O.jsx("span",{style:{fontSize:14},children:a}),n]},e))})}function SX(){const{timeOffsetMinutes:i,setTimeOffset:t,isPlaying:e,togglePlayback:n,playbackSpeed:a,setPlaybackSpeed:s}=Hs();return O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"8px 12px",background:"rgba(13, 17, 23, 0.9)",borderRadius:6,border:"1px solid rgba(0, 255, 136, 0.2)",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:[O.jsx("span",{style:{color:"#00d4ff"},children:"4D"}),O.jsx(Qe.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:n,style:{width:28,height:28,background:e?"#00ff88":"transparent",color:e?"#0a0e14":"#00ff88",border:"1px solid #00ff88",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:12},children:e?"":""}),O.jsx("input",{type:"range",min:0,max:60,value:i,onChange:o=>t(Number(o.target.value)),style:{width:120,accentColor:"#00ff88"}}),O.jsxs("span",{style:{color:"#e6edf3",minWidth:50},children:["+",i,"min"]}),O.jsxs("select",{value:a,onChange:o=>s(Number(o.target.value)),style:{padding:"4px 8px",background:"rgba(0, 0, 0, 0.3)",color:"#00ff88",border:"1px solid rgba(0, 255, 136, 0.3)",borderRadius:4,fontSize:10},children:[O.jsx("option",{value:1,children:"1x"}),O.jsx("option",{value:5,children:"5x"}),O.jsx("option",{value:10,children:"10x"})]})]})}const bX=[{mode:"cinematic",label:"CINEMATIC",description:"Full effects"},{mode:"professional",label:"PROFESSIONAL",description:"Clean alerts"},{mode:"silent",label:"SILENT",description:"Visual only"}];function MX(){const{presentationMode:i,setPresentationMode:t}=Hs();return O.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4,padding:8,background:"rgba(13, 17, 23, 0.9)",borderRadius:6,border:"1px solid rgba(0, 255, 136, 0.2)"},children:[O.jsx("div",{style:{fontSize:9,color:"#6e7681",fontFamily:"'Orbitron', monospace",letterSpacing:1,marginBottom:4},children:"PRESENTATION MODE"}),bX.map(({mode:e,label:n,description:a})=>O.jsxs(Qe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>t(e),style:{padding:"6px 12px",background:i===e?"rgba(0, 255, 136, 0.2)":"transparent",color:i===e?"#00ff88":"#8b949e",border:i===e?"1px solid #00ff88":"1px solid transparent",borderRadius:4,fontFamily:"'Rajdhani', sans-serif",fontSize:11,fontWeight:600,cursor:"pointer",textAlign:"left",display:"flex",justifyContent:"space-between"},children:[O.jsx("span",{children:n}),O.jsx("span",{style:{fontSize:9,opacity:.7},children:a})]},e))]})}const TX=[{value:1,label:"1x Real-time"},{value:2,label:"2x Fast"},{value:4,label:"4x Demo",default:!0},{value:8,label:"8x Rapid"},{value:16,label:"16x Ultra"}];function AX(){const{simulationSpeed:i,setSimulationSpeed:t}=Hs(),[e,n]=ct.useState(!1);return O.jsxs("div",{style:{position:"relative"},children:[O.jsxs(Qe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n(!e),style:{display:"flex",alignItems:"center",gap:6,padding:"6px 12px",background:i>1?"rgba(0, 212, 255, 0.15)":"rgba(0, 255, 136, 0.05)",border:`1px solid ${i>1?"rgba(0, 212, 255, 0.4)":"rgba(0, 255, 136, 0.2)"}`,borderRadius:4,cursor:"pointer",fontFamily:"'JetBrains Mono', monospace",fontSize:11,color:i>1?"#00d4ff":"#6e7681"},children:[O.jsx(Qe.div,{animate:i>1?{opacity:[.5,1,.5]}:{opacity:1},transition:{duration:1,repeat:1/0},children:O.jsx(aW,{size:12})}),O.jsxs("span",{style:{fontWeight:600},children:[i,"x"]}),O.jsx("span",{style:{fontSize:9,color:"#6e7681",textTransform:"uppercase",letterSpacing:.5},children:"SPEED"}),O.jsx(k0,{size:12,style:{opacity:.6}})]}),O.jsx(ls,{children:e&&O.jsxs(O.Fragment,{children:[O.jsx("div",{onClick:()=>n(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99}}),O.jsx(Qe.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.15},style:{position:"absolute",top:"100%",left:0,marginTop:4,minWidth:140,background:"rgba(13, 17, 23, 0.98)",border:"1px solid rgba(0, 255, 136, 0.3)",borderRadius:6,overflow:"hidden",zIndex:100,boxShadow:"0 8px 24px rgba(0, 0, 0, 0.5)"},children:TX.map(a=>O.jsxs("button",{onClick:()=>{t(a.value),n(!1)},style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"10px 12px",background:a.value===i?"rgba(0, 255, 136, 0.15)":"transparent",border:"none",borderBottom:"1px solid rgba(0, 255, 136, 0.1)",color:a.value===i?"#00ff88":"#8b949e",fontFamily:"'Rajdhani', sans-serif",fontSize:12,fontWeight:500,cursor:"pointer",textAlign:"left"},children:[O.jsx("span",{children:a.label}),a.default&&O.jsx("span",{style:{fontSize:9,padding:"2px 4px",background:"rgba(0, 212, 255, 0.2)",borderRadius:2,color:"#00d4ff"},children:"DEFAULT"})]},a.value))})]})})]})}function EX(){const{appMode:i,setAppMode:t}=Hs(),{openMenu:e,closeDemo:n,state:a}=Yf(),s=o=>{o!==i&&(t(o),o==="demo"?e():a.isActive&&n())};return O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:2,padding:2,background:"rgba(0, 0, 0, 0.3)",borderRadius:6,border:"1px solid rgba(0, 255, 136, 0.2)"},children:[O.jsx(Vw,{active:i==="demo",onClick:()=>s("demo"),icon:Jg,label:"DEMO",activeColor:"#00ff88"}),O.jsx(Vw,{active:i==="live",onClick:()=>s("live"),icon:vd,label:"LIVE",activeColor:"#00d4ff"})]})}function Vw({active:i,onClick:t,icon:e,label:n,activeColor:a}){return O.jsxs(Qe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:t,style:{display:"flex",alignItems:"center",gap:6,padding:"6px 14px",background:i?`linear-gradient(135deg, ${a}20, ${a}10)`:"transparent",border:"none",borderRadius:4,cursor:"pointer",fontFamily:"'Orbitron', monospace",fontSize:10,fontWeight:600,letterSpacing:1,color:i?a:"#6e7681",transition:"all 0.2s ease"},children:[O.jsx(Qe.div,{animate:i?{opacity:[.6,1,.6]}:{opacity:.6},transition:{duration:1.5,repeat:1/0},children:O.jsx(e,{size:12})}),n,i&&O.jsx(Qe.div,{initial:{scale:0},animate:{scale:1},style:{width:6,height:6,borderRadius:"50%",background:a,boxShadow:`0 0 8px ${a}`}})]})}function wX(){const{commandLog:i}=Hs(),[t,e]=ct.useState(!0);return i.length===0?null:O.jsxs(Qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{position:"fixed",bottom:60,left:20,width:320,background:"rgba(10, 14, 20, 0.95)",border:"1px solid rgba(0, 212, 255, 0.3)",borderRadius:8,overflow:"hidden",zIndex:1e3,backdropFilter:"blur(10px)",boxShadow:"0 4px 24px rgba(0, 0, 0, 0.5)"},children:[O.jsxs("button",{onClick:()=>e(!t),style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"10px 14px",background:"linear-gradient(90deg, rgba(0, 212, 255, 0.15), transparent)",border:"none",borderBottom:t?"1px solid rgba(0, 212, 255, 0.2)":"none",cursor:"pointer"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[O.jsx(aq,{size:14,style:{color:"#00d4ff"}}),O.jsx("span",{style:{fontFamily:"'Orbitron', monospace",fontSize:10,fontWeight:600,letterSpacing:1,color:"#00d4ff"},children:"ATC COMMAND LOG"}),O.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:9,color:"#6e7681",padding:"2px 6px",background:"rgba(0, 212, 255, 0.1)",borderRadius:4},children:i.length})]}),t?O.jsx(k0,{size:14,style:{color:"#6e7681"}}):O.jsx(ix,{size:14,style:{color:"#6e7681"}})]}),O.jsx(ls,{children:t&&O.jsx(Qe.div,{initial:{height:0},animate:{height:"auto"},exit:{height:0},style:{maxHeight:200,overflow:"auto"},children:i.slice(0,10).map((n,a)=>O.jsx(CX,{entry:n,isLatest:a===0},n.id))})})]})}function CX({entry:i,isLatest:t}){const e=a=>a.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),n=a=>{switch(a){case"heading":return"#00d4ff";case"altitude":return"#00ff88";case"speed":return"#ffaa00";case"squawk":return"#ff3366";case"frequency":return"#aa88ff";case"hold":return"#ff6600";default:return"#8b949e"}};return O.jsxs(Qe.div,{initial:t?{opacity:0,x:-20}:{},animate:{opacity:1,x:0},style:{display:"flex",alignItems:"flex-start",gap:10,padding:"8px 14px",borderBottom:"1px solid rgba(0, 212, 255, 0.1)",background:t?"rgba(0, 212, 255, 0.05)":"transparent"},children:[O.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:9,color:"#6e7681",whiteSpace:"nowrap"},children:e(i.timestamp)}),O.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:10,fontWeight:600,color:n(i.type),minWidth:60},children:i.callsign}),O.jsx("span",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:11,color:"#e6edf3",flex:1},children:i.command})]})}function Hy({icon:i,label:t,enabled:e,onToggle:n}){return O.jsxs("button",{onClick:n,style:{display:"flex",alignItems:"center",gap:6,padding:"4px 10px",background:e?"rgba(0, 255, 136, 0.15)":"rgba(100, 100, 100, 0.2)",border:`1px solid ${e?"#00ff88":"#444"}`,borderRadius:4,color:e?"#00ff88":"#666",cursor:"pointer",fontFamily:"'Rajdhani', sans-serif",fontSize:11,fontWeight:600,transition:"all 0.2s"},children:[i,O.jsx("span",{children:t}),O.jsx("span",{style:{padding:"1px 6px",background:e?"#00ff88":"#444",color:e?"#000":"#888",borderRadius:3,fontSize:9,fontWeight:700},children:e?"ON":"OFF"})]})}function RX(){const{narrationEnabled:i,atcAudioEnabled:t,alertSoundsEnabled:e,autoTranslate:n,audioVolume:a,setNarrationEnabled:s,setAtcAudioEnabled:o,setAlertSoundsEnabled:c,setAutoTranslate:f,setAudioVolume:d}=Hs();return O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"4px 12px",background:"rgba(13, 17, 23, 0.9)",borderRadius:6,border:"1px solid rgba(0, 255, 136, 0.15)"},children:[O.jsx(Hy,{icon:O.jsx(tm,{size:14}),label:"Narration",enabled:i,onToggle:()=>s(!i)}),O.jsx(Hy,{icon:O.jsx(cO,{size:14}),label:"ATC",enabled:t,onToggle:()=>o(!t)}),O.jsx(Hy,{icon:O.jsx(eT,{size:14}),label:"Alerts",enabled:e,onToggle:()=>c(!e)}),O.jsx(Hy,{icon:O.jsx(uW,{size:14}),label:"Auto-Translate",enabled:n,onToggle:()=>f(!n)}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginLeft:8,paddingLeft:8,borderLeft:"1px solid rgba(0, 255, 136, 0.2)"},children:[O.jsx(tm,{size:14,color:"#00ff88"}),O.jsx("input",{type:"range",min:0,max:100,value:a*100,onChange:g=>d(Number(g.target.value)/100),style:{width:60,accentColor:"#00ff88",cursor:"pointer"}}),O.jsxs("span",{style:{color:"#00ff88",fontSize:10,fontFamily:"'Rajdhani', sans-serif",fontWeight:600,minWidth:28},children:[Math.round(a*100),"%"]})]})]})}function DX({onToggleDataBlocks:i,onToggleTrails:t,showDataBlocks:e,showTrails:n}){const[a,s]=ct.useState(!1),[o,c]=ct.useState(!1),[f,d]=ct.useState(!1),g=ct.useCallback(()=>{window.dispatchEvent(new CustomEvent("resetMapView"))},[]),y=ct.useCallback(()=>{document.fullscreenElement?document.exitFullscreen().then(()=>{d(!1)}):document.documentElement.requestFullscreen().then(()=>{d(!0)}).catch(()=>{})},[]);return O.jsxs(O.Fragment,{children:[O.jsxs("header",{style:{display:"flex",alignItems:"center",gap:16,padding:"12px 20px",background:"linear-gradient(180deg, rgba(13, 17, 23, 0.98), rgba(10, 14, 20, 0.95))",borderBottom:"1px solid rgba(0, 255, 136, 0.2)"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[O.jsx(Qe.div,{animate:{rotate:360},transition:{duration:4,repeat:1/0,ease:"linear"},style:{display:"flex",alignItems:"center",justifyContent:"center"},children:O.jsx(IW,{size:28,style:{color:"#00ff88"}})}),O.jsxs("div",{children:[O.jsx("h1",{style:{fontFamily:"'Orbitron', monospace",fontSize:18,fontWeight:700,letterSpacing:3,color:"#00ff88",textShadow:"0 0 20px rgba(0, 255, 136, 0.5)",margin:0},children:"ATCS-NG"}),O.jsx("div",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:9,letterSpacing:2,color:"#6e7681",textTransform:"uppercase"},children:"Command Center"})]})]}),O.jsx("div",{style:{padding:"4px 8px",background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",borderRadius:4},children:O.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:9,color:"#00d4ff",letterSpacing:.5},children:"v2.4.0"})}),O.jsx(EX,{}),O.jsx(AX,{}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"6px 14px",background:"rgba(0, 255, 136, 0.05)",border:"1px solid rgba(0, 255, 136, 0.2)",borderRadius:4},children:[O.jsx("span",{style:{fontFamily:"'Orbitron', monospace",fontSize:10,color:"#6e7681",letterSpacing:1},children:"SECTOR"}),O.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:13,fontWeight:600,color:"#00d4ff"},children:"BOS_33"})]}),O.jsx(RX,{}),O.jsx("div",{style:{flex:1}}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[O.jsx(Hw,{active:e,onClick:i,label:" Data Blocks",tooltip:"Toggle data blocks (D)"}),O.jsx(Hw,{active:n,onClick:t,label:" Trails",tooltip:"Toggle track trails (T)"})]}),O.jsx("div",{style:{width:1,height:24,background:"rgba(0, 255, 136, 0.2)"}}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[O.jsx(Gy,{icon:dO,tooltip:"Reset view",onClick:g}),O.jsx(Gy,{icon:f?xW:vW,tooltip:f?"Exit fullscreen (F11)":"Fullscreen (F11)",onClick:y}),O.jsx(Gy,{icon:mO,tooltip:"Settings",onClick:()=>s(!0)}),O.jsx(Gy,{icon:Pj,tooltip:"Help (?)",onClick:()=>c(!0)})]})]}),O.jsx(vX,{isOpen:a,onClose:()=>s(!1)}),O.jsx(yX,{isOpen:o,onClose:()=>c(!1)})]})}function Hw({active:i,onClick:t,label:e,tooltip:n}){return O.jsx("button",{onClick:t,title:n,style:{fontFamily:"'Orbitron', monospace",fontSize:9,fontWeight:600,letterSpacing:1,padding:"6px 12px",background:i?"rgba(0, 255, 136, 0.15)":"transparent",border:`1px solid ${i?"rgba(0, 255, 136, 0.5)":"rgba(0, 255, 136, 0.2)"}`,borderRadius:4,color:i?"#00ff88":"#6e7681",cursor:"pointer",transition:"all 0.2s ease"},children:e})}function Gy({icon:i,tooltip:t,onClick:e}){return O.jsx(Qe.button,{whileHover:{scale:1.1,borderColor:"rgba(0, 255, 136, 0.5)"},whileTap:{scale:.95},onClick:e,title:t,style:{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,background:"transparent",border:"1px solid rgba(0, 255, 136, 0.2)",borderRadius:4,color:"#6e7681",cursor:"pointer",transition:"all 0.2s ease"},children:O.jsx(i,{size:16})})}function LX(){const[i,t]=ct.useState(new Date);return ct.useEffect(()=>{const e=setInterval(()=>t(new Date),1e3);return()=>clearInterval(e)},[]),i}function OX(i){return i.toISOString().slice(11,19)+"Z"}function NX(i){return i.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}function UX({connected:i,trackCount:t,alertCount:e,sectorId:n="BOS_33"}){const a=LX();return O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,padding:"8px 16px",background:"rgba(13, 17, 23, 0.95)",borderTop:"1px solid rgba(0, 255, 136, 0.2)",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:[O.jsx("div",{style:{display:"flex",alignItems:"center",gap:6},children:i?O.jsxs(O.Fragment,{children:[O.jsx(Qe.div,{animate:{opacity:[1,.5,1]},transition:{duration:2,repeat:1/0},children:O.jsx(pq,{size:14,style:{color:"#00ff88"}})}),O.jsx("span",{style:{color:"#00ff88"},children:"CONNECTED"})]}):O.jsxs(O.Fragment,{children:[O.jsx(hq,{size:14,style:{color:"#ff3366"}}),O.jsx("span",{style:{color:"#ff3366"},children:"DISCONNECTED"})]})}),O.jsx("div",{style:{width:1,height:16,background:"rgba(0, 255, 136, 0.2)"}}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,color:"#00d4ff"},children:[O.jsx(vd,{size:12}),O.jsx("span",{style:{fontWeight:600},children:n})]}),O.jsx("div",{style:{width:1,height:16,background:"rgba(0, 255, 136, 0.2)"}}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,color:"#8b949e"},children:[O.jsx(dj,{size:12}),O.jsxs("span",{children:[O.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:t})," TRK"]})]}),O.jsx("div",{style:{display:"flex",alignItems:"center",gap:6,color:"#8b949e"},children:O.jsxs("span",{children:[O.jsx("span",{style:{color:e>0?"#ffaa00":"#00ff88",fontWeight:600},children:e})," ALT"]})}),O.jsx("div",{style:{flex:1}}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:"#6e7681"},children:[O.jsx(Kj,{size:12}),O.jsx("span",{style:{color:"#00ff88"},children:"12%"})]}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:"#6e7681"},children:[O.jsx(Jj,{size:12}),O.jsx("span",{style:{color:"#00ff88"},children:"2.4GB"})]}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[O.jsx(jW,{size:12,style:{color:"#00ff88"}}),O.jsx("span",{style:{color:"#6e7681"},children:"7/7"})]})]}),O.jsx("div",{style:{width:1,height:16,background:"rgba(0, 255, 136, 0.2)"}}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[O.jsx(b0,{size:12,style:{color:"#6e7681"}}),O.jsx("span",{style:{color:"#8b949e"},children:"LCL"}),O.jsx("span",{style:{color:"#e6edf3",fontWeight:500},children:NX(a)})]}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[O.jsx("span",{style:{color:"#00d4ff"},children:"UTC"}),O.jsx("span",{style:{color:"#00d4ff",fontWeight:600,textShadow:"0 0 8px rgba(0, 212, 255, 0.5)"},children:OX(a)})]})]}),O.jsx("div",{style:{width:1,height:16,background:"rgba(0, 255, 136, 0.2)"}}),O.jsx("div",{style:{display:"flex",alignItems:"center",gap:4,color:"#6e7681",fontSize:10},children:O.jsx("span",{children:"v2.5.0"})})]})}function IX(){const{screenShake:i,clearScreenShake:t,vignetteColor:e}=aC(),[n,a]=ct.useState({x:0,y:0});return ct.useEffect(()=>{if(!i){a({x:0,y:0});return}const s=Date.now(),o=()=>{const c=Date.now()-s;if(c>=i.duration){a({x:0,y:0}),t();return}const f=1-c/i.duration,d=Z4(i.intensity*f);a(d),requestAnimationFrame(o)};requestAnimationFrame(o)},[i,t]),O.jsxs(O.Fragment,{children:[O.jsx("div",{style:{position:"fixed",inset:0,transform:`translate(${n.x}px, ${n.y}px)`,pointerEvents:"none",zIndex:9990}}),e&&O.jsx(Qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",inset:0,background:`radial-gradient(ellipse at center, transparent 30%, ${e} 100%)`,pointerEvents:"none",zIndex:9991}})]})}function PX({tracks:i}){const t=i.length,e=i.filter(d=>d.verticalRateFpm>500).length,n=i.filter(d=>d.verticalRateFpm<-500).length,a=i.filter(d=>Math.abs(d.verticalRateFpm)<=500).length,s=i.length>0?Math.round(i.reduce((d,g)=>d+g.altitudeFt,0)/i.length):0,o=i.length>0?Math.round(i.reduce((d,g)=>d+g.speedKt,0)/i.length):0,f=Math.round(t/15*100);return O.jsxs("div",{className:"panel",style:{display:"flex",flexDirection:"column",gap:0},children:[O.jsxs("div",{className:"panel-header",style:{flexShrink:0},children:[O.jsx(nT,{size:14}),O.jsx("span",{children:"SECTOR STATS"})]}),O.jsxs("div",{style:{padding:12,display:"flex",flexDirection:"column",gap:12},children:[O.jsxs("div",{children:[O.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[O.jsx("span",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:11,color:"#8b949e"},children:"Sector Capacity"}),O.jsxs("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:11,color:f>80?"#ff3366":f>60?"#ffaa00":"#00ff88"},children:[f,"%"]})]}),O.jsx("div",{style:{height:4,background:"rgba(0, 255, 136, 0.1)",borderRadius:2,overflow:"hidden"},children:O.jsx(Qe.div,{initial:{width:0},animate:{width:`${f}%`},transition:{duration:.5},style:{height:"100%",background:f>80?"#ff3366":f>60?"#ffaa00":"#00ff88",borderRadius:2}})})]}),O.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:[O.jsx(xb,{icon:nx,value:e,label:"CLIMB",color:"#00d4ff"}),O.jsx(xb,{icon:yj,value:a,label:"LEVEL",color:"#00ff88"}),O.jsx(xb,{icon:ex,value:n,label:"DESC",color:"#ffaa00"})]}),O.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[O.jsxs("div",{style:{background:"rgba(0, 255, 136, 0.05)",border:"1px solid rgba(0, 255, 136, 0.1)",borderRadius:6,padding:10,textAlign:"center"},children:[O.jsxs("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:16,fontWeight:600,color:"#00d4ff"},children:["FL",Math.round(s/100)]}),O.jsx("div",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:9,color:"#6e7681",textTransform:"uppercase",letterSpacing:1},children:"Avg Alt"})]}),O.jsxs("div",{style:{background:"rgba(0, 255, 136, 0.05)",border:"1px solid rgba(0, 255, 136, 0.1)",borderRadius:6,padding:10,textAlign:"center"},children:[O.jsx("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:16,fontWeight:600,color:"#00d4ff"},children:o}),O.jsx("div",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:9,color:"#6e7681",textTransform:"uppercase",letterSpacing:1},children:"Avg GS (kt)"})]})]})]})]})}function xb({icon:i,value:t,label:e,color:n}){return O.jsxs("div",{style:{background:`${n}10`,border:`1px solid ${n}30`,borderRadius:6,padding:8,textAlign:"center"},children:[O.jsx(i,{size:14,style:{color:n,marginBottom:4}}),O.jsx("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:16,fontWeight:600,color:n},children:t}),O.jsx("div",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:9,color:"#6e7681",letterSpacing:.5},children:e})]})}function zX(){const[i,t]=ct.useState({condition:"cloudy",temperature:45,windSpeed:12,windDirection:270,visibility:10,ceiling:25e3,altimeter:30.12});return ct.useEffect(()=>{const e=setInterval(()=>{t(n=>({...n,windSpeed:Math.max(5,n.windSpeed+(Math.random()-.5)*3),windDirection:(n.windDirection+(Math.random()-.5)*10+360)%360,temperature:n.temperature+(Math.random()-.5)*2}))},1e4);return()=>clearInterval(e)},[]),i}function BX(){const i=zX(),e=(()=>{switch(i.condition){case"clear":return tq;case"cloudy":return Ig;case"rain":return Wj;case"snow":return Gj;case"thunderstorm":return Vj;default:return Ig}})(),n=i.visibility<5||i.ceiling<3e3,a=i.visibility<3||i.ceiling<1e3,s=a?"IFR":n?"MVFR":"VFR",o=a?"#ff3366":n?"#00d4ff":"#00ff88";return O.jsxs("div",{className:"panel",style:{display:"flex",flexDirection:"column"},children:[O.jsxs("div",{className:"panel-header",style:{flexShrink:0},children:[O.jsx(Ig,{size:14}),O.jsx("span",{children:"WEATHER"}),O.jsx("span",{style:{marginLeft:"auto",fontFamily:"'Orbitron', monospace",fontSize:9,padding:"2px 8px",borderRadius:3,background:`${o}20`,border:`1px solid ${o}50`,color:o},children:s})]}),O.jsxs("div",{style:{padding:12},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:12},children:[O.jsx(Qe.div,{animate:{y:[0,-3,0]},transition:{duration:3,repeat:1/0},children:O.jsx(e,{size:32,style:{color:"#00d4ff"}})}),O.jsxs("div",{children:[O.jsxs("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:24,fontWeight:600,color:"#e6edf3"},children:[Math.round(i.temperature),"F"]}),O.jsx("div",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:11,color:"#6e7681",textTransform:"capitalize"},children:i.condition})]})]}),O.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[O.jsx(jy,{icon:gq,label:"Wind",value:`${String(Math.round(i.windDirection)).padStart(3,"0")} @ ${Math.round(i.windSpeed)}kt`}),O.jsx(jy,{icon:nW,label:"Visibility",value:`${i.visibility}+ SM`}),O.jsx(jy,{icon:Ig,label:"Ceiling",value:`FL${Math.round(i.ceiling/100)}`}),O.jsx(jy,{icon:tW,label:"Altimeter",value:i.altimeter.toFixed(2)})]}),O.jsx("div",{style:{marginTop:12,padding:8,background:"rgba(0, 212, 255, 0.05)",border:"1px solid rgba(0, 212, 255, 0.2)",borderRadius:4},children:O.jsxs("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:9,color:"#00d4ff",wordBreak:"break-all"},children:["KBOS ",new Date().toISOString().slice(5,16).replace("-","").replace(":","").replace("T",""),"Z ",String(Math.round(i.windDirection)).padStart(3,"0"),String(Math.round(i.windSpeed)).padStart(2,"0"),"KT ",i.visibility,"SM SCT",Math.round(i.ceiling/100).toString().padStart(3,"0")," A",i.altimeter.toFixed(2).replace(".","")]})})]})]})}function jy({icon:i,label:t,value:e}){return O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,padding:6,background:"rgba(0, 255, 136, 0.03)",borderRadius:4},children:[O.jsx(i,{size:12,style:{color:"#6e7681",flexShrink:0}}),O.jsxs("div",{children:[O.jsx("div",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:9,color:"#6e7681"},children:t}),O.jsx("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:10,color:"#e6edf3"},children:e})]})]})}function FX({callsign:i,isOpen:t,onClose:e,onCommandSent:n}){const[a,s]=ct.useState(""),{addCommandLog:o}=Hs(),{state:c}=Yf(),f=ct.useCallback((y,x)=>{const b=`${i}, ${y}`;o({callsign:i,command:b,type:x}),c.isActive&&c.mode==="playing"?zr.speakATC(b):Pc.speakATC(b),n?.(b),e()},[i,o,n,e,c.isActive,c.mode]),d=[{label:"Turn Left 30",command:"turn left heading 030",type:"heading",icon:dO},{label:"Turn Right 30",command:"turn right heading 330",type:"heading",icon:Yj},{label:"Climb FL350",command:"climb and maintain flight level 350",type:"altitude",icon:nx},{label:"Descend FL250",command:"descend and maintain flight level 250",type:"altitude",icon:ex},{label:"Reduce Speed",command:"reduce speed to 250 knots",type:"speed",icon:nT},{label:"Hold Position",command:"hold present position, expect further clearance",type:"hold",icon:vd},{label:"Squawk 7700",command:"squawk 7700, declaring emergency",type:"squawk",icon:um}],g=()=>{a.trim()&&(f(a.trim(),"other"),s(""))};return O.jsx(ls,{children:t&&O.jsxs(O.Fragment,{children:[O.jsx(Qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.7)",zIndex:9998}}),O.jsxs(Qe.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,background:"rgba(13, 17, 23, 0.98)",border:"1px solid rgba(0, 212, 255, 0.5)",borderRadius:12,overflow:"hidden",zIndex:9999,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.6), 0 0 30px rgba(0, 212, 255, 0.2)"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",background:"linear-gradient(90deg, rgba(0, 212, 255, 0.2), transparent)",borderBottom:"1px solid rgba(0, 212, 255, 0.3)"},children:[O.jsxs("div",{children:[O.jsx("h2",{style:{fontFamily:"'Orbitron', monospace",fontSize:14,fontWeight:600,color:"#00d4ff",margin:0,letterSpacing:2},children:"SEND COMMAND"}),O.jsxs("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:12,color:"#8b949e",marginTop:4},children:["To: ",O.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:i})]})]}),O.jsx("button",{onClick:e,style:{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,background:"transparent",border:"1px solid rgba(255, 51, 102, 0.3)",borderRadius:4,color:"#ff3366",cursor:"pointer"},children:O.jsx(fm,{size:16})})]}),O.jsxs("div",{style:{padding:"16px 20px"},children:[O.jsx("div",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:11,fontWeight:600,color:"#6e7681",textTransform:"uppercase",letterSpacing:1,marginBottom:12},children:"Quick Commands"}),O.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:8},children:d.map(y=>O.jsxs("button",{onClick:()=>f(y.command,y.type),style:{display:"flex",alignItems:"center",gap:8,padding:"10px 12px",background:"rgba(0, 255, 136, 0.05)",border:"1px solid rgba(0, 255, 136, 0.2)",borderRadius:6,color:"#e6edf3",fontFamily:"'Rajdhani', sans-serif",fontSize:12,fontWeight:600,cursor:"pointer",transition:"all 0.15s ease"},onMouseEnter:x=>{x.currentTarget.style.background="rgba(0, 255, 136, 0.15)",x.currentTarget.style.borderColor="rgba(0, 255, 136, 0.5)"},onMouseLeave:x=>{x.currentTarget.style.background="rgba(0, 255, 136, 0.05)",x.currentTarget.style.borderColor="rgba(0, 255, 136, 0.2)"},children:[O.jsx(y.icon,{size:14,style:{color:"#00ff88"}}),y.label]},y.label))})]}),O.jsxs("div",{style:{padding:"0 20px 20px"},children:[O.jsx("div",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:11,fontWeight:600,color:"#6e7681",textTransform:"uppercase",letterSpacing:1,marginBottom:8},children:"Custom Command"}),O.jsxs("div",{style:{display:"flex",gap:8},children:[O.jsx("input",{type:"text",value:a,onChange:y=>s(y.target.value),onKeyDown:y=>y.key==="Enter"&&g(),placeholder:"Enter ATC instruction...",style:{flex:1,padding:"10px 14px",background:"rgba(0, 0, 0, 0.4)",border:"1px solid rgba(0, 212, 255, 0.2)",borderRadius:6,color:"#e6edf3",fontFamily:"'JetBrains Mono', monospace",fontSize:12,outline:"none"}}),O.jsx("button",{onClick:g,disabled:!a.trim(),style:{display:"flex",alignItems:"center",justifyContent:"center",width:44,height:44,background:a.trim()?"rgba(0, 212, 255, 0.2)":"rgba(0, 0, 0, 0.3)",border:`1px solid ${a.trim()?"rgba(0, 212, 255, 0.5)":"rgba(110, 118, 129, 0.3)"}`,borderRadius:6,color:a.trim()?"#00d4ff":"#6e7681",cursor:a.trim()?"pointer":"not-allowed"},children:O.jsx(pO,{size:18})})]})]}),O.jsx("div",{style:{padding:"12px 20px",background:"rgba(0, 0, 0, 0.3)",borderTop:"1px solid rgba(0, 255, 136, 0.1)"},children:O.jsx("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:10,color:"#6e7681",textAlign:"center"},children:"Commands will be spoken and logged to the command panel"})})]})]})})}function kX({hijackedFlightId:i,onComplete:t}){const[e,n]=ct.useState("intro"),[a,s]=ct.useState(35e3),[o,c]=ct.useState(180),[f,d]=ct.useState(300),[g,y]=ct.useState(45),[x,b]=ct.useState(null),{heroModeActive:T,setHeroModeActive:R,addCommandLog:C}=Hs();ct.useEffect(()=>(T&&kw.play(),()=>{kw.stop()}),[T]),ct.useEffect(()=>{e==="intro"&&setTimeout(()=>{b("Mayday mayday! This is Qantas 8. We've... we've regained control. I fought him off! I'm Sarah, a passenger. The pilots are unconscious. I have 489 people on this A380. Please, you have to help us!"),zr.speakSarah("Mayday mayday! This is Qantas 8. We've regained control. I fought him off! I'm Sarah, a passenger. The pilots are unconscious. I have 489 people on this A380. Please, you have to help us!",()=>{n("contact")})},1e3)},[e]),ct.useEffect(()=>{if(e!=="intro"&&e!=="success"&&e!=="failure"){const I=setInterval(()=>{d(z=>z<=0?(n("failure"),0):z-1),y(z=>Math.max(0,z-.05)),c(z=>Math.max(0,z-.3))},1e3);return()=>clearInterval(I)}},[e]),ct.useEffect(()=>{o<=5&&a<=3e3&&e==="landing"&&(n("success"),zr.speakSarah("We made it! We're on the ground! Thank you! Oh god, thank you so much!",()=>t(!0)))},[o,a,e,t]),ct.useEffect(()=>{(g<=0||f<=0)&&e!=="success"&&e!=="failure"&&(n("failure"),t(!1))},[g,f,e,t]);const w=ct.useCallback(I=>{if(C({callsign:"QFA8",command:`QFA8, ${I.command}`,type:"other"}),zr.speakATC(`Qantas 8, ${I.command}`),I.correct)switch(I.phase){case"contact":setTimeout(()=>{b("Copy that! I'm looking at the instruments... there's so many buttons..."),zr.speakSarah("Copy that! I'm looking at the instruments... there's so many buttons...",()=>{n("vectors")})},2e3);break;case"vectors":setTimeout(()=>{b("Turning now. I found the autopilot heading dial. Is this right?"),zr.speakSarah("Turning now. I found the autopilot heading dial. Is this right?",()=>{n("approach")})},2e3);break;case"approach":s(z=>Math.max(3e3,z-5e3)),setTimeout(()=>{b("Descending... the runway lights! I can see them! Oh my god, I can see JFK!"),zr.speakSarah("Descending... the runway lights! I can see them! I can see JFK!",()=>{n("landing")})},2e3);break;case"landing":s(z=>Math.max(0,z-3e3)),setTimeout(()=>{n("success")},3e3);break}else b("Wait, what? I don't understand! Please, you have to be more clear!"),zr.speakSarah("Wait, what? I don't understand! Please, you have to be more clear!")},[C]),N=ct.useMemo(()=>{switch(e){case"contact":return[{id:"c1",label:"Stay Calm",command:"remain calm, help is on the way",correct:!0,phase:"contact"},{id:"c2",label:"Squawk 7500",command:"squawk 7500",correct:!1,phase:"contact"},{id:"c3",label:"Identify Location",command:"say position and altitude",correct:!1,phase:"contact"}];case"vectors":return[{id:"v1",label:"Turn to JFK",command:"turn left heading 250, direct JFK",correct:!0,phase:"vectors"},{id:"v2",label:"Hold Position",command:"maintain present heading",correct:!1,phase:"vectors"},{id:"v3",label:"Turn Away",command:"turn right heading 090",correct:!1,phase:"vectors"}];case"approach":return[{id:"a1",label:"Begin Descent",command:"descend to 10,000, expect ILS approach runway 31L",correct:!0,phase:"approach"},{id:"a2",label:"Maintain Altitude",command:"maintain flight level 350",correct:!1,phase:"approach"},{id:"a3",label:"Speed Up",command:"increase speed to 400 knots",correct:!1,phase:"approach"}];case"landing":return[{id:"l1",label:"Final Approach",command:"cleared ILS runway 31L, gear down, flaps full",correct:!0,phase:"landing"},{id:"l2",label:"Go Around",command:"go around, climb to 3000",correct:!1,phase:"landing"},{id:"l3",label:"Hold Short",command:"hold short of runway",correct:!1,phase:"landing"}];default:return[]}},[e]);return ct.useEffect(()=>{if(!T||e==="intro"||e==="success"||e==="failure")return;const z=setTimeout(()=>{const F=N.find(H=>H.correct);F&&zr.speakControllerE97(`Boston Center, Controller Echo-Niner-Seven. Qantas 8 heavy, ${F.command}`,()=>{w(F)})},4e3);return()=>clearTimeout(z)},[e,T,N,w]),T?O.jsx(ls,{children:O.jsxs(Qe.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},style:{position:"fixed",bottom:20,left:"50%",transform:"translateX(-50%)",width:600,background:"rgba(13, 17, 23, 0.98)",border:"2px solid #ff3366",borderRadius:12,overflow:"hidden",zIndex:1e4,boxShadow:"0 0 50px rgba(255, 51, 102, 0.3)"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",background:"linear-gradient(90deg, rgba(255, 51, 102, 0.3), transparent)",borderBottom:"1px solid rgba(255, 51, 102, 0.5)"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[O.jsx(Qe.div,{animate:{scale:[1,1.2,1]},transition:{duration:.5,repeat:1/0},children:O.jsx(gO,{size:24,style:{color:"#ff3366"}})}),O.jsxs("div",{children:[O.jsx("h2",{style:{fontFamily:"'Orbitron', monospace",fontSize:16,fontWeight:700,color:"#ff3366",margin:0,letterSpacing:2},children:"HERO MODE - RESCUE QFA8"}),O.jsx("div",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:12,color:"#ffaa00",marginTop:2},children:"312 SOULS ON BOARD | PILOTS INCAPACITATED"})]})]}),O.jsxs("div",{style:{display:"flex",gap:16},children:[O.jsx(Sb,{icon:hO,label:"ALT",value:`${Math.round(a/100)}00 ft`,color:a>1e4?"#ffaa00":"#00ff88"}),O.jsx(Sb,{icon:nq,label:"DIST",value:`${Math.round(o)} nm`,color:o<50?"#00ff88":"#00d4ff"}),O.jsx(Sb,{icon:um,label:"FUEL",value:`${Math.round(g)} min`,color:g<15?"#ff3366":g<30?"#ffaa00":"#00ff88"})]})]}),x&&O.jsx(Qe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},style:{padding:"16px 20px",background:"rgba(255, 170, 0, 0.1)",borderBottom:"1px solid rgba(255, 170, 0, 0.3)"},children:O.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:12},children:[O.jsx(vd,{size:16,style:{color:"#ffaa00",marginTop:2}}),O.jsxs("div",{children:[O.jsx("div",{style:{fontFamily:"'Orbitron', monospace",fontSize:10,color:"#ffaa00",marginBottom:4},children:"SARAH - QANTAS A380"}),O.jsxs("div",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:15,color:"#e6edf3",lineHeight:1.5,fontStyle:"italic"},children:['"',x,'"']})]})]})},x),e==="success"||e==="failure"?O.jsxs("div",{style:{padding:"40px 20px",textAlign:"center"},children:[e==="success"?O.jsxs(O.Fragment,{children:[O.jsx(Uj,{size:64,style:{color:"#00ff88",marginBottom:16}}),O.jsx("h3",{style:{fontFamily:"'Orbitron', monospace",fontSize:24,color:"#00ff88",marginBottom:8},children:"MISSION SUCCESS"}),O.jsx("p",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:16,color:"#8b949e"},children:"You saved 312 lives. United 787 landed safely at JFK."})]}):O.jsxs(O.Fragment,{children:[O.jsx(Bj,{size:64,style:{color:"#ff3366",marginBottom:16}}),O.jsx("h3",{style:{fontFamily:"'Orbitron', monospace",fontSize:24,color:"#ff3366",marginBottom:8},children:"MISSION FAILED"}),O.jsx("p",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:16,color:"#8b949e"},children:"The aircraft ran out of fuel or time."})]}),O.jsx("button",{onClick:()=>{R(!1),t(e==="success")},style:{marginTop:24,padding:"12px 32px",background:"rgba(0, 212, 255, 0.2)",border:"1px solid rgba(0, 212, 255, 0.5)",borderRadius:6,color:"#00d4ff",fontFamily:"'Rajdhani', sans-serif",fontSize:14,fontWeight:600,cursor:"pointer"},children:"RETURN TO CONTROL"})]}):O.jsxs("div",{style:{padding:"16px 20px"},children:[O.jsx("div",{style:{fontFamily:"'Orbitron', monospace",fontSize:11,color:"#6e7681",marginBottom:12,letterSpacing:1},children:"SELECT COMMAND"}),O.jsx("div",{style:{display:"flex",gap:12},children:N.map(I=>O.jsx("button",{onClick:()=>w(I),style:{flex:1,padding:"14px 16px",background:"rgba(0, 255, 136, 0.05)",border:"1px solid rgba(0, 255, 136, 0.3)",borderRadius:8,color:"#e6edf3",fontFamily:"'Rajdhani', sans-serif",fontSize:14,fontWeight:600,cursor:"pointer",transition:"all 0.15s ease"},onMouseEnter:z=>{z.currentTarget.style.background="rgba(0, 255, 136, 0.15)",z.currentTarget.style.borderColor="rgba(0, 255, 136, 0.6)"},onMouseLeave:z=>{z.currentTarget.style.background="rgba(0, 255, 136, 0.05)",z.currentTarget.style.borderColor="rgba(0, 255, 136, 0.3)"},children:I.label},I.id))})]}),e!=="success"&&e!=="failure"&&e!=="intro"&&O.jsx("div",{style:{height:4,background:"rgba(255, 51, 102, 0.2)"},children:O.jsx(Qe.div,{initial:{width:"100%"},animate:{width:`${f/300*100}%`},style:{height:"100%",background:f<60?"#ff3366":f<120?"#ffaa00":"#00ff88"}})})]})}):null}function Sb({icon:i,label:t,value:e,color:n}){return O.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[O.jsx(i,{size:14,style:{color:n}}),O.jsx("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:11,fontWeight:600,color:n},children:e}),O.jsx("div",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:9,color:"#6e7681",textTransform:"uppercase"},children:t})]})}function VX(i){const{state:t}=Yf(),{liveOnly:e}=Hs(),n=!e&&t.isActive&&t.mode!=="menu",a=ct.useMemo(()=>n&&t.tracks.length>0?t.tracks:i.tracks,[n,t.tracks,i.tracks]),s=ct.useMemo(()=>n&&t.alerts.length>0?t.alerts:i.alerts,[n,t.alerts,i.alerts]),o=ct.useMemo(()=>n&&t.predictions.length>0?t.predictions:i.predictions,[n,t.predictions,i.predictions]);return{tracks:a,alerts:s,predictions:o,isDemoActive:n}}function HX(){const i=["UAL","DAL","AAL","SWA","JBU","SKW","ASA","FFT"],t=[];for(let e=0;e<24;e++){const n=i[Math.floor(Math.random()*i.length)],a=Math.floor(Math.random()*9e3)+100,s=41.5+(Math.random()-.5)*3,o=-71.5+(Math.random()-.5)*4;t.push({trackId:`TRK-${e.toString().padStart(4,"0")}`,callsign:`${n}${a}`,latitudeDeg:s,longitudeDeg:o,altitudeFt:Math.floor(Math.random()*35e3)+5e3,headingDeg:Math.floor(Math.random()*360),speedKt:Math.floor(Math.random()*200)+250,verticalRateFpm:(Math.random()-.5)*2e3,confidence:.85+Math.random()*.15,sequence:e,updatedAt:new Date().toISOString()})}return t}function GX(i){const[t,e]=ct.useState(new Map),[n,a]=ct.useState(!1),s=ct.useRef(null);return ct.useEffect(()=>{const c=HX(),f=new Map;return c.forEach(d=>f.set(d.trackId,d)),e(f),a(!0),s.current=window.setInterval(()=>{e(d=>{const g=new Map(d);return g.forEach((y,x)=>{const b=y.speedKt/3600,T=y.headingDeg*Math.PI/180,R=b*Math.cos(T)/60,C=b*Math.sin(T)/(60*Math.cos(y.latitudeDeg*Math.PI/180));let w=y.altitudeFt+y.verticalRateFpm/60;w>45e3&&(w=45e3),w<1e3&&(w=1e3);let N=y.headingDeg;Math.random()<.05&&(N=(N+(Math.random()-.5)*10+360)%360);let I=y.verticalRateFpm;Math.random()<.1&&(I=(Math.random()-.5)*2e3),g.set(x,{...y,latitudeDeg:y.latitudeDeg+R,longitudeDeg:y.longitudeDeg+C,altitudeFt:Math.round(w),headingDeg:Math.round(N),verticalRateFpm:Math.round(I),sequence:y.sequence+1,updatedAt:new Date().toISOString()})}),g})},1e3),()=>{s.current&&clearInterval(s.current)}},[i]),{tracks:ct.useCallback(()=>Array.from(t.values()),[t])(),connected:n,trackCount:t.size}}function jX(){return[{alertId:"ALT-001",severity:"CRITICAL",alertType:"LOSS_OF_SEPARATION",message:"Loss of separation between UAL123 and DAL456 - 3.2nm lateral, 400ft vertical",involvedFlightIds:["UAL123","DAL456"],sectorId:"BOS_33",timestamp:new Date(Date.now()-3e4).toISOString(),acknowledged:!1},{alertId:"ALT-002",severity:"WARNING",alertType:"CONFLICT_PREDICTED",message:"Conflict predicted in 4:30 - AAL789 and SWA101 converging at FL350",involvedFlightIds:["AAL789","SWA101"],sectorId:"BOS_33",timestamp:new Date(Date.now()-6e4).toISOString(),acknowledged:!1},{alertId:"ALT-003",severity:"WARNING",alertType:"WEATHER_HAZARD",message:"Severe turbulence reported - FL300-FL380, 20nm radius centered 42.1N 71.5W",involvedFlightIds:[],sectorId:"BOS_33",timestamp:new Date(Date.now()-12e4).toISOString(),acknowledged:!1},{alertId:"ALT-004",severity:"INFO",alertType:"DEVIATION_DETECTED",message:"JBU202 deviating from assigned route - 2.1nm off course",involvedFlightIds:["JBU202"],sectorId:"BOS_34",timestamp:new Date(Date.now()-18e4).toISOString(),acknowledged:!0}]}function WX(){const[i,t]=ct.useState([]);ct.useEffect(()=>{t(jX());const s=setInterval(()=>{if(Math.random()<.1){const o={alertId:`ALT-${Date.now()}`,severity:Math.random()<.3?"CRITICAL":Math.random()<.6?"WARNING":"INFO",alertType:"CONFLICT_PREDICTED",message:"New conflict predicted - check radar display",involvedFlightIds:[],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1};t(c=>[o,...c].slice(0,10))}},5e3);return()=>clearInterval(s)},[]);const e=ct.useCallback(s=>{t(o=>o.map(c=>c.alertId===s?{...c,acknowledged:!0}:c))},[]),n=i.filter(s=>!s.acknowledged).length,a=i.filter(s=>s.severity==="CRITICAL"&&!s.acknowledged).length;return{alerts:i,acknowledgeAlert:e,unacknowledgedCount:n,criticalCount:a}}function qX(){const[i,t]=ct.useState([]);return ct.useEffect(()=>{const e=[{id:"PRED-001",predictionType:"CONFLICT",involvedFlights:["UAL123","DAL456"],probability:.87,predictedTime:new Date(Date.now()+18e4).toISOString(),description:"High probability conflict in 3 minutes at intersection BOSSS"},{id:"PRED-002",predictionType:"CONFLICT",involvedFlights:["AAL789","SWA101"],probability:.65,predictedTime:new Date(Date.now()+27e4).toISOString(),description:"Moderate probability conflict at FL350"}];t(e)},[]),{predictions:i}}function XX(){const[i,t]=ct.useState(null),[e,n]=ct.useState(!0),[a,s]=ct.useState(!0),[o,c]=ct.useState(null),f=ct.useRef(!1),{openMenu:d,completeInteraction:g,state:y,currentStep:x}=Yf(),b=ct.useRef(!1),{heroModeActive:T,setHeroModeActive:R,viewMode:C,liveOnly:w}=Hs();ct.useEffect(()=>{const j=()=>{f.current||(f.current=!0,Pc.forceInit(),console.log("[Voice] Initialized on user interaction"),b.current||(b.current=!0,setTimeout(()=>{d()},500)))};return document.addEventListener("click",j,{once:!0}),document.addEventListener("keydown",j,{once:!0}),()=>{document.removeEventListener("click",j),document.removeEventListener("keydown",j)}},[d]);const{tracks:N,connected:I,trackCount:z}=GX("BOS_33"),{alerts:F,acknowledgeAlert:H}=WX(),{predictions:q}=qX(),{tracks:Z,alerts:B,predictions:V,isDemoActive:Q}=VX({tracks:N,alerts:F,predictions:q}),J=ct.useCallback(j=>{t(j)},[]),rt=ct.useCallback(j=>{const K=Z.find(et=>et.callsign===j);K&&t(K.trackId)},[Z]),ut=ct.useCallback(j=>{Q&&y.pendingInteraction?.target===j&&g(),H(j)},[Q,y.pendingInteraction,g,H]),vt=ct.useMemo(()=>i&&Z.find(j=>j.trackId===i)||null,[i,Z]);return O.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100vh",width:"100vw",overflow:"hidden",background:"var(--color-bg-primary)"},children:[O.jsxs("div",{"data-demo-id":"header",children:[O.jsx(DX,{showDataBlocks:e,showTrails:a,onToggleDataBlocks:()=>n(j=>!j),onToggleTrails:()=>s(j=>!j)}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,padding:"8px 20px",background:"rgba(13, 17, 23, 0.95)",borderBottom:"1px solid rgba(0, 255, 136, 0.1)"},children:[O.jsx(xX,{}),O.jsx(SX,{}),O.jsx("div",{style:{flex:1}}),O.jsx(MX,{})]})]}),O.jsxs("div",{style:{flex:1,display:"grid",gridTemplateColumns:"320px 1fr 360px",gap:8,padding:8,overflow:"hidden"},children:[O.jsxs("div",{"data-demo-id":"strips",style:{display:"flex",flexDirection:"column",gap:8,overflow:"hidden"},children:[O.jsx("div",{style:{flex:1,overflow:"hidden"},children:O.jsx(Tq,{tracks:Z,alerts:B,selectedTrackId:i,onSelectTrack:J})}),O.jsx("div",{style:{flexShrink:0},children:O.jsx(PX,{tracks:Z})})]}),O.jsxs("div",{"data-demo-id":"radar",style:{borderRadius:8,overflow:"hidden",border:"1px solid rgba(0, 255, 136, 0.2)",position:"relative"},children:[C==="2d"?O.jsx(o5,{tracks:Z,selectedTrackId:i,onSelectTrack:J,showDataBlocks:e,showTrails:a}):O.jsx(CV,{tracks:Z,selectedTrackId:i,onSelectTrack:J,mapCenter:[42.3601,-71.0589]}),O.jsx(gX,{track:vt,onClose:()=>t(null),onSendMessage:j=>c(j)})]}),O.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8,overflow:"hidden"},children:[O.jsx("div",{"data-demo-id":"alerts",style:{flex:1,overflow:"hidden"},children:O.jsx(lX,{alerts:B,onAcknowledge:ut,onSelectFlight:rt})}),O.jsx("div",{"data-demo-id":"predictions",style:{flex:0,maxHeight:"30%",overflow:"hidden"},children:O.jsx(hX,{predictions:V,onSelectFlight:rt})}),O.jsx("div",{style:{flexShrink:0},children:O.jsx(BX,{})})]})]}),O.jsx(UX,{connected:I,trackCount:Q?Z.length:z,alertCount:B.filter(j=>!j.acknowledged).length,sectorId:"BOS_33"}),O.jsx("div",{className:"scanline-overlay"}),O.jsx("div",{className:"vignette-overlay"}),!w&&O.jsxs(O.Fragment,{children:[O.jsx(Qq,{}),O.jsx($q,{}),y.mode==="playing"&&x?.atcCommand&&O.jsx(aX,{command:x.atcCommand})]}),O.jsx(nX,{}),O.jsx(wX,{}),O.jsx(FX,{callsign:o||"",isOpen:o!==null,onClose:()=>c(null)}),T&&O.jsx(kX,{hijackedFlightId:"TRK-SD-002",onComplete:j=>{R(!1),console.log("[Hero Mode]",j?"Success!":"Failed")}}),O.jsx(IX,{})]})}function YX(){return O.jsx(Zq,{children:O.jsx(XX,{})})}b4.createRoot(document.getElementById("root")).render(O.jsx(Lu.StrictMode,{children:O.jsx(YX,{})}));
