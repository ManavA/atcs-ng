(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=t(a);fetch(a.href,s)}})();function A0(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var kx={exports:{}},hg={};var eA;function y4(){if(eA)return hg;eA=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,a,s){var o=null;if(s!==void 0&&(o=""+s),a.key!==void 0&&(o=""+a.key),"key"in a){s={};for(var c in a)c!=="key"&&(s[c]=a[c])}else s=a;return a=s.ref,{$$typeof:i,type:n,key:o,ref:a!==void 0?a:null,props:s}}return hg.Fragment=e,hg.jsx=t,hg.jsxs=t,hg}var tA;function _4(){return tA||(tA=1,kx.exports=y4()),kx.exports}var O=_4(),Vx={exports:{}},An={};var nA;function x4(){if(nA)return An;nA=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),x=Symbol.iterator;function b(G){return G===null||typeof G!="object"?null:(G=x&&G[x]||G["@@iterator"],typeof G=="function"?G:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,C={};function E(G,ne,fe){this.props=G,this.context=ne,this.refs=C,this.updater=fe||M}E.prototype.isReactComponent={},E.prototype.setState=function(G,ne){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,ne,"setState")},E.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function N(){}N.prototype=E.prototype;function I(G,ne,fe){this.props=G,this.context=ne,this.refs=C,this.updater=fe||M}var z=I.prototype=new N;z.constructor=I,R(z,E.prototype),z.isPureReactComponent=!0;var F=Array.isArray;function V(){}var W={H:null,A:null,T:null,S:null},Z=Object.prototype.hasOwnProperty;function B(G,ne,fe){var me=fe.ref;return{$$typeof:i,type:G,key:ne,ref:me!==void 0?me:null,props:fe}}function H(G,ne){return B(G.type,ne,G.props)}function Q(G){return typeof G=="object"&&G!==null&&G.$$typeof===i}function J(G){var ne={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(fe){return ne[fe]})}var oe=/\/+/g;function re(G,ne){return typeof G=="object"&&G!==null&&G.key!=null?J(""+G.key):ne.toString(36)}function ve(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(V,V):(G.status="pending",G.then(function(ne){G.status==="pending"&&(G.status="fulfilled",G.value=ne)},function(ne){G.status==="pending"&&(G.status="rejected",G.reason=ne)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function q(G,ne,fe,me,xe){var he=typeof G;(he==="undefined"||he==="boolean")&&(G=null);var _e=!1;if(G===null)_e=!0;else switch(he){case"bigint":case"string":case"number":_e=!0;break;case"object":switch(G.$$typeof){case i:case e:_e=!0;break;case g:return _e=G._init,q(_e(G._payload),ne,fe,me,xe)}}if(_e)return xe=xe(G),_e=me===""?"."+re(G,0):me,F(xe)?(fe="",_e!=null&&(fe=_e.replace(oe,"$&/")+"/"),q(xe,ne,fe,"",function(et){return et})):xe!=null&&(Q(xe)&&(xe=H(xe,fe+(xe.key==null||G&&G.key===xe.key?"":(""+xe.key).replace(oe,"$&/")+"/")+_e)),ne.push(xe)),1;_e=0;var Ae=me===""?".":me+":";if(F(G))for(var $e=0;$e<G.length;$e++)me=G[$e],he=Ae+re(me,$e),_e+=q(me,ne,fe,he,xe);else if($e=b(G),typeof $e=="function")for(G=$e.call(G),$e=0;!(me=G.next()).done;)me=me.value,he=Ae+re(me,$e++),_e+=q(me,ne,fe,he,xe);else if(he==="object"){if(typeof G.then=="function")return q(ve(G),ne,fe,me,xe);throw ne=String(G),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return _e}function K(G,ne,fe){if(G==null)return G;var me=[],xe=0;return q(G,me,"","",function(he){return ne.call(fe,he,xe++)}),me}function te(G){if(G._status===-1){var ne=G._result;ne=ne(),ne.then(function(fe){(G._status===0||G._status===-1)&&(G._status=1,G._result=fe)},function(fe){(G._status===0||G._status===-1)&&(G._status=2,G._result=fe)}),G._status===-1&&(G._status=0,G._result=ne)}if(G._status===1)return G._result.default;throw G._result}var de=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)},ce={map:K,forEach:function(G,ne,fe){K(G,function(){ne.apply(this,arguments)},fe)},count:function(G){var ne=0;return K(G,function(){ne++}),ne},toArray:function(G){return K(G,function(ne){return ne})||[]},only:function(G){if(!Q(G))throw Error("React.Children.only expected to receive a single React element child.");return G}};return An.Activity=y,An.Children=ce,An.Component=E,An.Fragment=t,An.Profiler=a,An.PureComponent=I,An.StrictMode=n,An.Suspense=f,An.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,An.__COMPILER_RUNTIME={__proto__:null,c:function(G){return W.H.useMemoCache(G)}},An.cache=function(G){return function(){return G.apply(null,arguments)}},An.cacheSignal=function(){return null},An.cloneElement=function(G,ne,fe){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var me=R({},G.props),xe=G.key;if(ne!=null)for(he in ne.key!==void 0&&(xe=""+ne.key),ne)!Z.call(ne,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&ne.ref===void 0||(me[he]=ne[he]);var he=arguments.length-2;if(he===1)me.children=fe;else if(1<he){for(var _e=Array(he),Ae=0;Ae<he;Ae++)_e[Ae]=arguments[Ae+2];me.children=_e}return B(G.type,xe,me)},An.createContext=function(G){return G={$$typeof:o,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:s,_context:G},G},An.createElement=function(G,ne,fe){var me,xe={},he=null;if(ne!=null)for(me in ne.key!==void 0&&(he=""+ne.key),ne)Z.call(ne,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(xe[me]=ne[me]);var _e=arguments.length-2;if(_e===1)xe.children=fe;else if(1<_e){for(var Ae=Array(_e),$e=0;$e<_e;$e++)Ae[$e]=arguments[$e+2];xe.children=Ae}if(G&&G.defaultProps)for(me in _e=G.defaultProps,_e)xe[me]===void 0&&(xe[me]=_e[me]);return B(G,he,xe)},An.createRef=function(){return{current:null}},An.forwardRef=function(G){return{$$typeof:c,render:G}},An.isValidElement=Q,An.lazy=function(G){return{$$typeof:g,_payload:{_status:-1,_result:G},_init:te}},An.memo=function(G,ne){return{$$typeof:d,type:G,compare:ne===void 0?null:ne}},An.startTransition=function(G){var ne=W.T,fe={};W.T=fe;try{var me=G(),xe=W.S;xe!==null&&xe(fe,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(V,de)}catch(he){de(he)}finally{ne!==null&&fe.types!==null&&(ne.types=fe.types),W.T=ne}},An.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},An.use=function(G){return W.H.use(G)},An.useActionState=function(G,ne,fe){return W.H.useActionState(G,ne,fe)},An.useCallback=function(G,ne){return W.H.useCallback(G,ne)},An.useContext=function(G){return W.H.useContext(G)},An.useDebugValue=function(){},An.useDeferredValue=function(G,ne){return W.H.useDeferredValue(G,ne)},An.useEffect=function(G,ne){return W.H.useEffect(G,ne)},An.useEffectEvent=function(G){return W.H.useEffectEvent(G)},An.useId=function(){return W.H.useId()},An.useImperativeHandle=function(G,ne,fe){return W.H.useImperativeHandle(G,ne,fe)},An.useInsertionEffect=function(G,ne){return W.H.useInsertionEffect(G,ne)},An.useLayoutEffect=function(G,ne){return W.H.useLayoutEffect(G,ne)},An.useMemo=function(G,ne){return W.H.useMemo(G,ne)},An.useOptimistic=function(G,ne){return W.H.useOptimistic(G,ne)},An.useReducer=function(G,ne,fe){return W.H.useReducer(G,ne,fe)},An.useRef=function(G){return W.H.useRef(G)},An.useState=function(G){return W.H.useState(G)},An.useSyncExternalStore=function(G,ne,fe){return W.H.useSyncExternalStore(G,ne,fe)},An.useTransition=function(){return W.H.useTransition()},An.version="19.2.3",An}var iA;function im(){return iA||(iA=1,Vx.exports=x4()),Vx.exports}var ue=im();const Nu=A0(ue);var Hx={exports:{}},dg={},Gx={exports:{}},jx={};var aA;function S4(){return aA||(aA=1,(function(i){function e(q,K){var te=q.length;q.push(K);e:for(;0<te;){var de=te-1>>>1,ce=q[de];if(0<a(ce,K))q[de]=K,q[te]=ce,te=de;else break e}}function t(q){return q.length===0?null:q[0]}function n(q){if(q.length===0)return null;var K=q[0],te=q.pop();if(te!==K){q[0]=te;e:for(var de=0,ce=q.length,G=ce>>>1;de<G;){var ne=2*(de+1)-1,fe=q[ne],me=ne+1,xe=q[me];if(0>a(fe,te))me<ce&&0>a(xe,fe)?(q[de]=xe,q[me]=te,de=me):(q[de]=fe,q[ne]=te,de=ne);else if(me<ce&&0>a(xe,te))q[de]=xe,q[me]=te,de=me;else break e}}return K}function a(q,K){var te=q.sortIndex-K.sortIndex;return te!==0?te:q.id-K.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();i.unstable_now=function(){return o.now()-c}}var f=[],d=[],g=1,y=null,x=3,b=!1,M=!1,R=!1,C=!1,E=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function z(q){for(var K=t(d);K!==null;){if(K.callback===null)n(d);else if(K.startTime<=q)n(d),K.sortIndex=K.expirationTime,e(f,K);else break;K=t(d)}}function F(q){if(R=!1,z(q),!M)if(t(f)!==null)M=!0,V||(V=!0,J());else{var K=t(d);K!==null&&ve(F,K.startTime-q)}}var V=!1,W=-1,Z=5,B=-1;function H(){return C?!0:!(i.unstable_now()-B<Z)}function Q(){if(C=!1,V){var q=i.unstable_now();B=q;var K=!0;try{e:{M=!1,R&&(R=!1,N(W),W=-1),b=!0;var te=x;try{t:{for(z(q),y=t(f);y!==null&&!(y.expirationTime>q&&H());){var de=y.callback;if(typeof de=="function"){y.callback=null,x=y.priorityLevel;var ce=de(y.expirationTime<=q);if(q=i.unstable_now(),typeof ce=="function"){y.callback=ce,z(q),K=!0;break t}y===t(f)&&n(f),z(q)}else n(f);y=t(f)}if(y!==null)K=!0;else{var G=t(d);G!==null&&ve(F,G.startTime-q),K=!1}}break e}finally{y=null,x=te,b=!1}K=void 0}}finally{K?J():V=!1}}}var J;if(typeof I=="function")J=function(){I(Q)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,re=oe.port2;oe.port1.onmessage=Q,J=function(){re.postMessage(null)}}else J=function(){E(Q,0)};function ve(q,K){W=E(function(){q(i.unstable_now())},K)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(q){q.callback=null},i.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<q?Math.floor(1e3/q):5},i.unstable_getCurrentPriorityLevel=function(){return x},i.unstable_next=function(q){switch(x){case 1:case 2:case 3:var K=3;break;default:K=x}var te=x;x=K;try{return q()}finally{x=te}},i.unstable_requestPaint=function(){C=!0},i.unstable_runWithPriority=function(q,K){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var te=x;x=q;try{return K()}finally{x=te}},i.unstable_scheduleCallback=function(q,K,te){var de=i.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?de+te:de):te=de,q){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=te+ce,q={id:g++,callback:K,priorityLevel:q,startTime:te,expirationTime:ce,sortIndex:-1},te>de?(q.sortIndex=te,e(d,q),t(f)===null&&q===t(d)&&(R?(N(W),W=-1):R=!0,ve(F,te-de))):(q.sortIndex=ce,e(f,q),M||b||(M=!0,V||(V=!0,J()))),q},i.unstable_shouldYield=H,i.unstable_wrapCallback=function(q){var K=x;return function(){var te=x;x=K;try{return q.apply(this,arguments)}finally{x=te}}}})(jx)),jx}var sA;function b4(){return sA||(sA=1,Gx.exports=S4()),Gx.exports}var Wx={exports:{}},$s={};var rA;function T4(){if(rA)return $s;rA=1;var i=im();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)d+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(f,d,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:f,containerInfo:d,implementation:g}}var o=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return $s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,$s.createPortal=function(f,d){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return s(f,d,null,g)},$s.flushSync=function(f){var d=o.T,g=n.p;try{if(o.T=null,n.p=2,f)return f()}finally{o.T=d,n.p=g,n.d.f()}},$s.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,n.d.C(f,d))},$s.prefetchDNS=function(f){typeof f=="string"&&n.d.D(f)},$s.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var g=d.as,y=c(g,d.crossOrigin),x=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;g==="style"?n.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:y,integrity:x,fetchPriority:b}):g==="script"&&n.d.X(f,{crossOrigin:y,integrity:x,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},$s.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var g=c(d.as,d.crossOrigin);n.d.M(f,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&n.d.M(f)},$s.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var g=d.as,y=c(g,d.crossOrigin);n.d.L(f,g,{crossOrigin:y,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},$s.preloadModule=function(f,d){if(typeof f=="string")if(d){var g=c(d.as,d.crossOrigin);n.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else n.d.m(f)},$s.requestFormReset=function(f){n.d.r(f)},$s.unstable_batchedUpdates=function(f,d){return f(d)},$s.useFormState=function(f,d,g){return o.H.useFormState(f,d,g)},$s.useFormStatus=function(){return o.H.useHostTransitionStatus()},$s.version="19.2.3",$s}var oA;function qw(){if(oA)return Wx.exports;oA=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Wx.exports=T4(),Wx.exports}var lA;function M4(){if(lA)return dg;lA=1;var i=b4(),e=im(),t=qw();function n(r){var l="https://react.dev/errors/"+r;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)l+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+r+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function s(r){var l=r,m=r;if(r.alternate)for(;l.return;)l=l.return;else{r=l;do l=r,(l.flags&4098)!==0&&(m=l.return),r=l.return;while(r)}return l.tag===3?m:null}function o(r){if(r.tag===13){var l=r.memoizedState;if(l===null&&(r=r.alternate,r!==null&&(l=r.memoizedState)),l!==null)return l.dehydrated}return null}function c(r){if(r.tag===31){var l=r.memoizedState;if(l===null&&(r=r.alternate,r!==null&&(l=r.memoizedState)),l!==null)return l.dehydrated}return null}function f(r){if(s(r)!==r)throw Error(n(188))}function d(r){var l=r.alternate;if(!l){if(l=s(r),l===null)throw Error(n(188));return l!==r?null:r}for(var m=r,_=l;;){var A=m.return;if(A===null)break;var D=A.alternate;if(D===null){if(_=A.return,_!==null){m=_;continue}break}if(A.child===D.child){for(D=A.child;D;){if(D===m)return f(A),r;if(D===_)return f(A),l;D=D.sibling}throw Error(n(188))}if(m.return!==_.return)m=A,_=D;else{for(var X=!1,se=A.child;se;){if(se===m){X=!0,m=A,_=D;break}if(se===_){X=!0,_=A,m=D;break}se=se.sibling}if(!X){for(se=D.child;se;){if(se===m){X=!0,m=D,_=A;break}if(se===_){X=!0,_=D,m=A;break}se=se.sibling}if(!X)throw Error(n(189))}}if(m.alternate!==_)throw Error(n(190))}if(m.tag!==3)throw Error(n(188));return m.stateNode.current===m?r:l}function g(r){var l=r.tag;if(l===5||l===26||l===27||l===6)return r;for(r=r.child;r!==null;){if(l=g(r),l!==null)return l;r=r.sibling}return null}var y=Object.assign,x=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),I=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),H=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function J(r){return r===null||typeof r!="object"?null:(r=Q&&r[Q]||r["@@iterator"],typeof r=="function"?r:null)}var oe=Symbol.for("react.client.reference");function re(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===oe?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case R:return"Fragment";case E:return"Profiler";case C:return"StrictMode";case F:return"Suspense";case V:return"SuspenseList";case B:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case M:return"Portal";case I:return r.displayName||"Context";case N:return(r._context.displayName||"Context")+".Consumer";case z:var l=r.render;return r=r.displayName,r||(r=l.displayName||l.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case W:return l=r.displayName||null,l!==null?l:re(r.type)||"Memo";case Z:l=r._payload,r=r._init;try{return re(r(l))}catch{}}return null}var ve=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},de=[],ce=-1;function G(r){return{current:r}}function ne(r){0>ce||(r.current=de[ce],de[ce]=null,ce--)}function fe(r,l){ce++,de[ce]=r.current,r.current=l}var me=G(null),xe=G(null),he=G(null),_e=G(null);function Ae(r,l){switch(fe(he,l),fe(xe,r),fe(me,null),l.nodeType){case 9:case 11:r=(r=l.documentElement)&&(r=r.namespaceURI)?TM(r):0;break;default:if(r=l.tagName,l=l.namespaceURI)l=TM(l),r=MM(l,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ne(me),fe(me,r)}function $e(){ne(me),ne(xe),ne(he)}function et(r){r.memoizedState!==null&&fe(_e,r);var l=me.current,m=MM(l,r.type);l!==m&&(fe(xe,r),fe(me,m))}function qe(r){xe.current===r&&(ne(me),ne(xe)),_e.current===r&&(ne(_e),lg._currentValue=te)}var nt,St;function Ne(r){if(nt===void 0)try{throw Error()}catch(m){var l=m.stack.trim().match(/\n( *(at )?)/);nt=l&&l[1]||"",St=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+nt+r+St}var Ve=!1;function Fe(r,l){if(!r||Ve)return"";Ve=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var _={DetermineComponentFrameRoot:function(){try{if(l){var _t=function(){throw Error()};if(Object.defineProperty(_t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_t,[])}catch(ot){var Je=ot}Reflect.construct(r,[],_t)}else{try{_t.call()}catch(ot){Je=ot}r.call(_t.prototype)}}else{try{throw Error()}catch(ot){Je=ot}(_t=r())&&typeof _t.catch=="function"&&_t.catch(function(){})}}catch(ot){if(ot&&Je&&typeof ot.stack=="string")return[ot.stack,Je.stack]}return[null,null]}};_.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(_.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(_.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var D=_.DetermineComponentFrameRoot(),X=D[0],se=D[1];if(X&&se){var Me=X.split(`
`),We=se.split(`
`);for(A=_=0;_<Me.length&&!Me[_].includes("DetermineComponentFrameRoot");)_++;for(;A<We.length&&!We[A].includes("DetermineComponentFrameRoot");)A++;if(_===Me.length||A===We.length)for(_=Me.length-1,A=We.length-1;1<=_&&0<=A&&Me[_]!==We[A];)A--;for(;1<=_&&0<=A;_--,A--)if(Me[_]!==We[A]){if(_!==1||A!==1)do if(_--,A--,0>A||Me[_]!==We[A]){var ft=`
`+Me[_].replace(" at new "," at ");return r.displayName&&ft.includes("<anonymous>")&&(ft=ft.replace("<anonymous>",r.displayName)),ft}while(1<=_&&0<=A);break}}}finally{Ve=!1,Error.prepareStackTrace=m}return(m=r?r.displayName||r.name:"")?Ne(m):""}function rt(r,l){switch(r.tag){case 26:case 27:case 5:return Ne(r.type);case 16:return Ne("Lazy");case 13:return r.child!==l&&l!==null?Ne("Suspense Fallback"):Ne("Suspense");case 19:return Ne("SuspenseList");case 0:case 15:return Fe(r.type,!1);case 11:return Fe(r.type.render,!1);case 1:return Fe(r.type,!0);case 31:return Ne("Activity");default:return""}}function ae(r){try{var l="",m=null;do l+=rt(r,m),m=r,r=r.return;while(r);return l}catch(_){return`
Error generating stack: `+_.message+`
`+_.stack}}var ut=Object.prototype.hasOwnProperty,Ze=i.unstable_scheduleCallback,Le=i.unstable_cancelCallback,tt=i.unstable_shouldYield,$=i.unstable_requestPaint,Y=i.unstable_now,ye=i.unstable_getCurrentPriorityLevel,Be=i.unstable_ImmediatePriority,De=i.unstable_UserBlockingPriority,Ce=i.unstable_NormalPriority,vt=i.unstable_LowPriority,ht=i.unstable_IdlePriority,bt=i.log,Ct=i.unstable_setDisableYieldValue,Ge=null,Qe=null;function st(r){if(typeof bt=="function"&&Ct(r),Qe&&typeof Qe.setStrictMode=="function")try{Qe.setStrictMode(Ge,r)}catch{}}var ge=Math.clz32?Math.clz32:Se,we=Math.log,xt=Math.LN2;function Se(r){return r>>>=0,r===0?32:31-(we(r)/xt|0)|0}var it=256,lt=262144,At=4194304;function ct(r){var l=r&42;if(l!==0)return l;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function je(r,l,m){var _=r.pendingLanes;if(_===0)return 0;var A=0,D=r.suspendedLanes,X=r.pingedLanes;r=r.warmLanes;var se=_&134217727;return se!==0?(_=se&~D,_!==0?A=ct(_):(X&=se,X!==0?A=ct(X):m||(m=se&~r,m!==0&&(A=ct(m))))):(se=_&~D,se!==0?A=ct(se):X!==0?A=ct(X):m||(m=_&~r,m!==0&&(A=ct(m)))),A===0?0:l!==0&&l!==A&&(l&D)===0&&(D=A&-A,m=l&-l,D>=m||D===32&&(m&4194048)!==0)?l:A}function mt(r,l){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&l)===0}function Rt(r,l){switch(r){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lt(){var r=At;return At<<=1,(At&62914560)===0&&(At=4194304),r}function qt(r){for(var l=[],m=0;31>m;m++)l.push(r);return l}function bn(r,l){r.pendingLanes|=l,l!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Bn(r,l,m,_,A,D){var X=r.pendingLanes;r.pendingLanes=m,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=m,r.entangledLanes&=m,r.errorRecoveryDisabledLanes&=m,r.shellSuspendCounter=0;var se=r.entanglements,Me=r.expirationTimes,We=r.hiddenUpdates;for(m=X&~m;0<m;){var ft=31-ge(m),_t=1<<ft;se[ft]=0,Me[ft]=-1;var Je=We[ft];if(Je!==null)for(We[ft]=null,ft=0;ft<Je.length;ft++){var ot=Je[ft];ot!==null&&(ot.lane&=-536870913)}m&=~_t}_!==0&&Ai(r,_,0),D!==0&&A===0&&r.tag!==0&&(r.suspendedLanes|=D&~(X&~l))}function Ai(r,l,m){r.pendingLanes|=l,r.suspendedLanes&=~l;var _=31-ge(l);r.entangledLanes|=l,r.entanglements[_]=r.entanglements[_]|1073741824|m&261930}function ia(r,l){var m=r.entangledLanes|=l;for(r=r.entanglements;m;){var _=31-ge(m),A=1<<_;A&l|r[_]&l&&(r[_]|=l),m&=~A}}function Ca(r,l){var m=l&-l;return m=(m&42)!==0?1:Yn(m),(m&(r.suspendedLanes|l))!==0?0:m}function Yn(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function kt(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Fi(){var r=K.p;return r!==0?r:(r=window.event,r===void 0?32:XM(r.type))}function si(r,l){var m=K.p;try{return K.p=r,l()}finally{K.p=m}}var Hn=Math.random().toString(36).slice(2),cn="__reactFiber$"+Hn,Li="__reactProps$"+Hn,ga="__reactContainer$"+Hn,fs="__reactEvents$"+Hn,cr="__reactListeners$"+Hn,lo="__reactHandles$"+Hn,ur="__reactResources$"+Hn,fr="__reactMarker$"+Hn;function Gr(r){delete r[cn],delete r[Li],delete r[fs],delete r[cr],delete r[lo]}function yi(r){var l=r[cn];if(l)return l;for(var m=r.parentNode;m;){if(l=m[ga]||m[cn]){if(m=l.alternate,l.child!==null||m!==null&&m.child!==null)for(r=LM(r);r!==null;){if(m=r[cn])return m;r=LM(r)}return l}r=m,m=r.parentNode}return null}function Zn(r){if(r=r[cn]||r[ga]){var l=r.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return r}return null}function va(r){var l=r.tag;if(l===5||l===26||l===27||l===6)return r.stateNode;throw Error(n(33))}function Xt(r){var l=r[ur];return l||(l=r[ur]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function ie(r){r[fr]=!0}var Re=new Set,Xe={};function ke(r,l){Ue(r,l),Ue(r+"Capture",l)}function Ue(r,l){for(Xe[r]=l,r=0;r<l.length;r++)Re.add(l[r])}var Et=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ut={},Dt={};function Pt(r){return ut.call(Dt,r)?!0:ut.call(Ut,r)?!1:Et.test(r)?Dt[r]=!0:(Ut[r]=!0,!1)}function Tt(r,l,m){if(Pt(l))if(m===null)r.removeAttribute(l);else{switch(typeof m){case"undefined":case"function":case"symbol":r.removeAttribute(l);return;case"boolean":var _=l.toLowerCase().slice(0,5);if(_!=="data-"&&_!=="aria-"){r.removeAttribute(l);return}}r.setAttribute(l,""+m)}}function Ot(r,l,m){if(m===null)r.removeAttribute(l);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttribute(l,""+m)}}function Vt(r,l,m,_){if(_===null)r.removeAttribute(m);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(m);return}r.setAttributeNS(l,m,""+_)}}function Jt(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function xn(r){var l=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Kn(r,l,m){var _=Object.getOwnPropertyDescriptor(r.constructor.prototype,l);if(!r.hasOwnProperty(l)&&typeof _<"u"&&typeof _.get=="function"&&typeof _.set=="function"){var A=_.get,D=_.set;return Object.defineProperty(r,l,{configurable:!0,get:function(){return A.call(this)},set:function(X){m=""+X,D.call(this,X)}}),Object.defineProperty(r,l,{enumerable:_.enumerable}),{getValue:function(){return m},setValue:function(X){m=""+X},stopTracking:function(){r._valueTracker=null,delete r[l]}}}}function zt(r){if(!r._valueTracker){var l=xn(r)?"checked":"value";r._valueTracker=Kn(r,l,""+r[l])}}function nn(r){if(!r)return!1;var l=r._valueTracker;if(!l)return!0;var m=l.getValue(),_="";return r&&(_=xn(r)?r.checked?"true":"false":r.value),r=_,r!==m?(l.setValue(r),!0):!1}function Yt(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Cn=/[\n"\\]/g;function jt(r){return r.replace(Cn,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function qi(r,l,m,_,A,D,X,se){r.name="",X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"?r.type=X:r.removeAttribute("type"),l!=null?X==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+Jt(l)):r.value!==""+Jt(l)&&(r.value=""+Jt(l)):X!=="submit"&&X!=="reset"||r.removeAttribute("value"),l!=null?ai(r,X,Jt(l)):m!=null?ai(r,X,Jt(m)):_!=null&&r.removeAttribute("value"),A==null&&D!=null&&(r.defaultChecked=!!D),A!=null&&(r.checked=A&&typeof A!="function"&&typeof A!="symbol"),se!=null&&typeof se!="function"&&typeof se!="symbol"&&typeof se!="boolean"?r.name=""+Jt(se):r.removeAttribute("name")}function ya(r,l,m,_,A,D,X,se){if(D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(r.type=D),l!=null||m!=null){if(!(D!=="submit"&&D!=="reset"||l!=null)){zt(r);return}m=m!=null?""+Jt(m):"",l=l!=null?""+Jt(l):m,se||l===r.value||(r.value=l),r.defaultValue=l}_=_??A,_=typeof _!="function"&&typeof _!="symbol"&&!!_,r.checked=se?r.checked:!!_,r.defaultChecked=!!_,X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"&&(r.name=X),zt(r)}function ai(r,l,m){l==="number"&&Yt(r.ownerDocument)===r||r.defaultValue===""+m||(r.defaultValue=""+m)}function Fn(r,l,m,_){if(r=r.options,l){l={};for(var A=0;A<m.length;A++)l["$"+m[A]]=!0;for(m=0;m<r.length;m++)A=l.hasOwnProperty("$"+r[m].value),r[m].selected!==A&&(r[m].selected=A),A&&_&&(r[m].defaultSelected=!0)}else{for(m=""+Jt(m),l=null,A=0;A<r.length;A++){if(r[A].value===m){r[A].selected=!0,_&&(r[A].defaultSelected=!0);return}l!==null||r[A].disabled||(l=r[A])}l!==null&&(l.selected=!0)}}function Tn(r,l,m){if(l!=null&&(l=""+Jt(l),l!==r.value&&(r.value=l),m==null)){r.defaultValue!==l&&(r.defaultValue=l);return}r.defaultValue=m!=null?""+Jt(m):""}function Qn(r,l,m,_){if(l==null){if(_!=null){if(m!=null)throw Error(n(92));if(ve(_)){if(1<_.length)throw Error(n(93));_=_[0]}m=_}m==null&&(m=""),l=m}m=Jt(l),r.defaultValue=m,_=r.textContent,_===m&&_!==""&&_!==null&&(r.value=_),zt(r)}function ci(r,l){if(l){var m=r.firstChild;if(m&&m===r.lastChild&&m.nodeType===3){m.nodeValue=l;return}}r.textContent=l}var Ei=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _i(r,l,m){var _=l.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?_?r.setProperty(l,""):l==="float"?r.cssFloat="":r[l]="":_?r.setProperty(l,m):typeof m!="number"||m===0||Ei.has(l)?l==="float"?r.cssFloat=m:r[l]=(""+m).trim():r[l]=m+"px"}function Es(r,l,m){if(l!=null&&typeof l!="object")throw Error(n(62));if(r=r.style,m!=null){for(var _ in m)!m.hasOwnProperty(_)||l!=null&&l.hasOwnProperty(_)||(_.indexOf("--")===0?r.setProperty(_,""):_==="float"?r.cssFloat="":r[_]="");for(var A in l)_=l[A],l.hasOwnProperty(A)&&m[A]!==_&&_i(r,A,_)}else for(var D in l)l.hasOwnProperty(D)&&_i(r,D,l[D])}function ki(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ho=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),co=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function hs(r){return co.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Xi(){}var Gs=null;function uo(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ws=null,on=null;function Fa(r){var l=Zn(r);if(l&&(r=l.stateNode)){var m=r[Li]||null;e:switch(r=l.stateNode,l.type){case"input":if(qi(r,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),l=m.name,m.type==="radio"&&l!=null){for(m=r;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+jt(""+l)+'"][type="radio"]'),l=0;l<m.length;l++){var _=m[l];if(_!==r&&_.form===r.form){var A=_[Li]||null;if(!A)throw Error(n(90));qi(_,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(l=0;l<m.length;l++)_=m[l],_.form===r.form&&nn(_)}break e;case"textarea":Tn(r,m.value,m.defaultValue);break e;case"select":l=m.value,l!=null&&Fn(r,!!m.multiple,l,!1)}}}var Gn=!1;function fo(r,l,m){if(Gn)return r(l,m);Gn=!0;try{var _=r(l);return _}finally{if(Gn=!1,(ws!==null||on!==null)&&(le(),ws&&(l=ws,r=on,on=ws=null,Fa(l),r)))for(l=0;l<r.length;l++)Fa(r[l])}}function Cs(r,l){var m=r.stateNode;if(m===null)return null;var _=m[Li]||null;if(_===null)return null;m=_[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(r=r.type,_=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!_;break e;default:r=!1}if(r)return null;if(m&&typeof m!="function")throw Error(n(231,l,typeof m));return m}var Qa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_a=!1;if(Qa)try{var Ja={};Object.defineProperty(Ja,"passive",{get:function(){_a=!0}}),window.addEventListener("test",Ja,Ja),window.removeEventListener("test",Ja,Ja)}catch{_a=!1}var Rs=null,hr=null,ui=null;function Ds(){if(ui)return ui;var r,l=hr,m=l.length,_,A="value"in Rs?Rs.value:Rs.textContent,D=A.length;for(r=0;r<m&&l[r]===A[r];r++);var X=m-r;for(_=1;_<=X&&l[m-_]===A[D-_];_++);return ui=A.slice(r,1<_?1-_:void 0)}function dr(r){var l=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&l===13&&(r=13)):r=l,r===10&&(r=13),32<=r||r===13?r:0}function js(){return!0}function ho(){return!1}function Si(r){function l(m,_,A,D,X){this._reactName=m,this._targetInst=A,this.type=_,this.nativeEvent=D,this.target=X,this.currentTarget=null;for(var se in r)r.hasOwnProperty(se)&&(m=r[se],this[se]=m?m(D):D[se]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?js:ho,this.isPropagationStopped=ho,this}return y(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=js)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=js)},persist:function(){},isPersistent:js}),l}var Ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},po=Si(Ls),ka=y({},Ls,{view:0,detail:0}),yn=Si(ka),gl,Vi,ds,Yi=y({},ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qc,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ds&&(ds&&r.type==="mousemove"?(gl=r.screenX-ds.screenX,Vi=r.screenY-ds.screenY):Vi=gl=0,ds=r),gl)},movementY:function(r){return"movementY"in r?r.movementY:Vi}}),Vu=Si(Yi),Oi=y({},Yi,{dataTransfer:0}),vl=Si(Oi),ic=y({},ka,{relatedTarget:0}),ac=Si(ic),Ra=y({},Ls,{animationName:0,elapsedTime:0,pseudoElement:0}),Va=Si(Ra),Zi=y({},Ls,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Hi=Si(Zi),Wc=y({},Ls,{data:0}),Hu=Si(Wc),mo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ju={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wu(r){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(r):(r=ju[r])?!!l[r]:!1}function qc(){return Wu}var qu=y({},ka,{key:function(r){if(r.key){var l=mo[r.key]||r.key;if(l!=="Unidentified")return l}return r.type==="keypress"?(r=dr(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Gu[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qc,charCode:function(r){return r.type==="keypress"?dr(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?dr(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Xu=Si(qu),xd=y({},Yi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yu=Si(xd),Zu=y({},ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qc}),go=Si(Zu),Ku=y({},Ls,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sd=Si(Ku),Xc=y({},Yi,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),ps=Si(Xc),vo=y({},Ls,{newState:0,oldState:0}),yl=Si(vo),ms=[9,13,27,32],Go=Qa&&"CompositionEvent"in window,yo=null;Qa&&"documentMode"in document&&(yo=document.documentMode);var _l=Qa&&"TextEvent"in window&&!yo,aa=Qa&&(!Go||yo&&8<yo&&11>=yo),xl=" ",Qf=!1;function Qu(r,l){switch(r){case"keyup":return ms.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sl(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var jo=!1;function gs(r,l){switch(r){case"compositionend":return Sl(l);case"keypress":return l.which!==32?null:(Qf=!0,xl);case"textInput":return r=l.data,r===xl&&Qf?null:r;default:return null}}function bl(r,l){if(jo)return r==="compositionend"||!Go&&Qu(r,l)?(r=Ds(),ui=hr=Rs=null,jo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return aa&&l.locale!=="ko"?null:l.data;default:return null}}var Os={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pr(r){var l=r&&r.nodeName&&r.nodeName.toLowerCase();return l==="input"?!!Os[r.type]:l==="textarea"}function Ju(r,l,m,_){ws?on?on.push(_):on=[_]:ws=_,l=Av(l,"onChange"),0<l.length&&(m=new po("onChange","change",null,m,_),r.push({event:m,listeners:l}))}var mr=null,sc=null;function Tl(r){vM(r,0)}function Ml(r){var l=va(r);if(nn(l))return r}function rc(r,l){if(r==="change")return l}var Yc=!1;if(Qa){var vs;if(Qa){var fi="oninput"in document;if(!fi){var bd=document.createElement("div");bd.setAttribute("oninput","return;"),fi=typeof bd.oninput=="function"}vs=fi}else vs=!1;Yc=vs&&(!document.documentMode||9<document.documentMode)}function $u(){mr&&(mr.detachEvent("onpropertychange",Jf),sc=mr=null)}function Jf(r){if(r.propertyName==="value"&&Ml(sc)){var l=[];Ju(l,sc,r,uo(r)),fo(Tl,l)}}function Ns(r,l,m){r==="focusin"?($u(),mr=l,sc=m,mr.attachEvent("onpropertychange",Jf)):r==="focusout"&&$u()}function Wo(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Ml(sc)}function Al(r,l){if(r==="click")return Ml(l)}function Td(r,l){if(r==="input"||r==="change")return Ml(l)}function $a(r,l){return r===l&&(r!==0||1/r===1/l)||r!==r&&l!==l}var hi=typeof Object.is=="function"?Object.is:$a;function El(r,l){if(hi(r,l))return!0;if(typeof r!="object"||r===null||typeof l!="object"||l===null)return!1;var m=Object.keys(r),_=Object.keys(l);if(m.length!==_.length)return!1;for(_=0;_<m.length;_++){var A=m[_];if(!ut.call(l,A)||!hi(r[A],l[A]))return!1}return!0}function Zc(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function oc(r,l){var m=Zc(r);r=0;for(var _;m;){if(m.nodeType===3){if(_=r+m.textContent.length,r<=l&&_>=l)return{node:m,offset:l-r};r=_}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Zc(m)}}function lc(r,l){return r&&l?r===l?!0:r&&r.nodeType===3?!1:l&&l.nodeType===3?lc(r,l.parentNode):"contains"in r?r.contains(l):r.compareDocumentPosition?!!(r.compareDocumentPosition(l)&16):!1:!1}function wl(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var l=Yt(r.document);l instanceof r.HTMLIFrameElement;){try{var m=typeof l.contentWindow.location.href=="string"}catch{m=!1}if(m)r=l.contentWindow;else break;l=Yt(r.document)}return l}function gr(r){var l=r&&r.nodeName&&r.nodeName.toLowerCase();return l&&(l==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||l==="textarea"||r.contentEditable==="true")}var Kc=Qa&&"documentMode"in document&&11>=document.documentMode,qo=null,Qc=null,cc=null,Ha=!1;function ef(r,l,m){var _=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;Ha||qo==null||qo!==Yt(_)||(_=qo,"selectionStart"in _&&gr(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),cc&&El(cc,_)||(cc=_,_=Av(Qc,"onSelect"),0<_.length&&(l=new po("onSelect","select",null,l,m),r.push({event:l,listeners:_}),l.target=qo)))}function _o(r,l){var m={};return m[r.toLowerCase()]=l.toLowerCase(),m["Webkit"+r]="webkit"+l,m["Moz"+r]="moz"+l,m}var uc={animationend:_o("Animation","AnimationEnd"),animationiteration:_o("Animation","AnimationIteration"),animationstart:_o("Animation","AnimationStart"),transitionrun:_o("Transition","TransitionRun"),transitionstart:_o("Transition","TransitionStart"),transitioncancel:_o("Transition","TransitionCancel"),transitionend:_o("Transition","TransitionEnd")},fc={},es={};Qa&&(es=document.createElement("div").style,"AnimationEvent"in window||(delete uc.animationend.animation,delete uc.animationiteration.animation,delete uc.animationstart.animation),"TransitionEvent"in window||delete uc.transitionend.transition);function Da(r){if(fc[r])return fc[r];if(!uc[r])return r;var l=uc[r],m;for(m in l)if(l.hasOwnProperty(m)&&m in es)return fc[r]=l[m];return r}var La=Da("animationend"),$f=Da("animationiteration"),Us=Da("animationstart"),hc=Da("transitionrun"),xo=Da("transitionstart"),eh=Da("transitioncancel"),Xo=Da("transitionend"),So=new Map,bo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bo.push("scrollEnd");function Oa(r,l){So.set(r,l),ke(l,[r])}var To=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},xa=[],ts=0,Jc=0;function Mo(){for(var r=ts,l=Jc=ts=0;l<r;){var m=xa[l];xa[l++]=null;var _=xa[l];xa[l++]=null;var A=xa[l];xa[l++]=null;var D=xa[l];if(xa[l++]=null,_!==null&&A!==null){var X=_.pending;X===null?A.next=A:(A.next=X.next,X.next=A),_.pending=A}D!==0&&Yo(m,A,D)}}function Ao(r,l,m,_){xa[ts++]=r,xa[ts++]=l,xa[ts++]=m,xa[ts++]=_,Jc|=_,r.lanes|=_,r=r.alternate,r!==null&&(r.lanes|=_)}function dc(r,l,m,_){return Ao(r,l,m,_),Cl(r)}function vr(r,l){return Ao(r,null,null,l),Cl(r)}function Yo(r,l,m){r.lanes|=m;var _=r.alternate;_!==null&&(_.lanes|=m);for(var A=!1,D=r.return;D!==null;)D.childLanes|=m,_=D.alternate,_!==null&&(_.childLanes|=m),D.tag===22&&(r=D.stateNode,r===null||r._visibility&1||(A=!0)),r=D,D=D.return;return r.tag===3?(D=r.stateNode,A&&l!==null&&(A=31-ge(m),r=D.hiddenUpdates,_=r[A],_===null?r[A]=[l]:_.push(l),l.lane=m|536870912),D):null}function Cl(r){if(50<vu)throw vu=0,yu=null,Error(n(185));for(var l=r.return;l!==null;)r=l,l=r.return;return r.tag===3?r.stateNode:null}var Eo={};function Md(r,l,m,_){this.tag=r,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ga(r,l,m,_){return new Md(r,l,m,_)}function ja(r){return r=r.prototype,!(!r||!r.isReactComponent)}function yr(r,l){var m=r.alternate;return m===null?(m=Ga(r.tag,l,r.key,r.mode),m.elementType=r.elementType,m.type=r.type,m.stateNode=r.stateNode,m.alternate=r,r.alternate=m):(m.pendingProps=l,m.type=r.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=r.flags&65011712,m.childLanes=r.childLanes,m.lanes=r.lanes,m.child=r.child,m.memoizedProps=r.memoizedProps,m.memoizedState=r.memoizedState,m.updateQueue=r.updateQueue,l=r.dependencies,m.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},m.sibling=r.sibling,m.index=r.index,m.ref=r.ref,m.refCleanup=r.refCleanup,m}function Na(r,l){r.flags&=65011714;var m=r.alternate;return m===null?(r.childLanes=0,r.lanes=l,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=m.childLanes,r.lanes=m.lanes,r.child=m.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=m.memoizedProps,r.memoizedState=m.memoizedState,r.updateQueue=m.updateQueue,r.type=m.type,l=m.dependencies,r.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),r}function pc(r,l,m,_,A,D){var X=0;if(_=r,typeof r=="function")ja(r)&&(X=1);else if(typeof r=="string")X=r4(r,m,me.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case B:return r=Ga(31,m,l,A),r.elementType=B,r.lanes=D,r;case R:return wo(m.children,A,D,l);case C:X=8,A|=24;break;case E:return r=Ga(12,m,l,A|2),r.elementType=E,r.lanes=D,r;case F:return r=Ga(13,m,l,A),r.elementType=F,r.lanes=D,r;case V:return r=Ga(19,m,l,A),r.elementType=V,r.lanes=D,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case I:X=10;break e;case N:X=9;break e;case z:X=11;break e;case W:X=14;break e;case Z:X=16,_=null;break e}X=29,m=Error(n(130,r===null?"null":typeof r,"")),_=null}return l=Ga(X,m,l,A),l.elementType=r,l.type=_,l.lanes=D,l}function wo(r,l,m,_){return r=Ga(7,r,_,l),r.lanes=m,r}function $c(r,l,m){return r=Ga(6,r,null,l),r.lanes=m,r}function th(r){var l=Ga(18,null,null,0);return l.stateNode=r,l}function _r(r,l,m){return l=Ga(4,r.children!==null?r.children:[],r.key,l),l.lanes=m,l.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},l}var u=new WeakMap;function v(r,l){if(typeof r=="object"&&r!==null){var m=u.get(r);return m!==void 0?m:(l={value:r,source:l,stack:ae(l)},u.set(r,l),l)}return{value:r,source:l,stack:ae(l)}}var T=[],P=0,j=null,ee=0,be=[],Oe=0,Ye=null,yt=1,Nt="";function $t(r,l){T[P++]=ee,T[P++]=j,j=r,ee=l}function Mn(r,l,m){be[Oe++]=yt,be[Oe++]=Nt,be[Oe++]=Ye,Ye=r;var _=yt;r=Nt;var A=32-ge(_)-1;_&=~(1<<A),m+=1;var D=32-ge(l)+A;if(30<D){var X=A-A%5;D=(_&(1<<X)-1).toString(32),_>>=X,A-=X,yt=1<<32-ge(l)+A|m<<A|_,Nt=D+r}else yt=1<<D|m<<A|_,Nt=r}function Sa(r){r.return!==null&&($t(r,1),Mn(r,1,0))}function wi(r){for(;r===j;)j=T[--P],T[P]=null,ee=T[--P],T[P]=null;for(;r===Ye;)Ye=be[--Oe],be[Oe]=null,Nt=be[--Oe],be[Oe]=null,yt=be[--Oe],be[Oe]=null}function Wa(r,l){be[Oe++]=yt,be[Oe++]=Nt,be[Oe++]=Ye,yt=l.id,Nt=l.overflow,Ye=r}var Jn=null,$n=null,zn=!1,Co=null,ba=!1,eu=Error(n(519));function In(r){var l=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw nu(v(l,r)),eu}function tu(r){var l=r.stateNode,m=r.type,_=r.memoizedProps;switch(l[cn]=r,l[Li]=_,m){case"dialog":Vn("cancel",l),Vn("close",l);break;case"iframe":case"object":case"embed":Vn("load",l);break;case"video":case"audio":for(m=0;m<ig.length;m++)Vn(ig[m],l);break;case"source":Vn("error",l);break;case"img":case"image":case"link":Vn("error",l),Vn("load",l);break;case"details":Vn("toggle",l);break;case"input":Vn("invalid",l),ya(l,_.value,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name,!0);break;case"select":Vn("invalid",l);break;case"textarea":Vn("invalid",l),Qn(l,_.value,_.defaultValue,_.children)}m=_.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||l.textContent===""+m||_.suppressHydrationWarning===!0||SM(l.textContent,m)?(_.popover!=null&&(Vn("beforetoggle",l),Vn("toggle",l)),_.onScroll!=null&&Vn("scroll",l),_.onScrollEnd!=null&&Vn("scrollend",l),_.onClick!=null&&(l.onclick=Xi),l=!0):l=!1,l||In(r,!0)}function Gi(r){for(Jn=r.return;Jn;)switch(Jn.tag){case 5:case 31:case 13:ba=!1;return;case 27:case 3:ba=!0;return;default:Jn=Jn.return}}function jr(r){if(r!==Jn)return!1;if(!zn)return Gi(r),zn=!0,!1;var l=r.tag,m;if((m=l!==3&&l!==27)&&((m=l===5)&&(m=r.type,m=!(m!=="form"&&m!=="button")||Ax(r.type,r.memoizedProps)),m=!m),m&&$n&&In(r),Gi(r),l===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));$n=DM(r)}else if(l===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));$n=DM(r)}else l===27?(l=$n,xf(r.type)?(r=Dx,Dx=null,$n=r):$n=l):$n=Jn?sl(r.stateNode.nextSibling):null;return!0}function Rl(){$n=Jn=null,zn=!1}function nh(){var r=Co;return r!==null&&(bs===null?bs=r:bs.push.apply(bs,r),Co=null),r}function nu(r){Co===null?Co=[r]:Co.push(r)}var iu=G(null),Wr=null,qa=null;function Dl(r,l,m){fe(iu,l._currentValue),l._currentValue=m}function qr(r){r._currentValue=iu.current,ne(iu)}function Ll(r,l,m){for(;r!==null;){var _=r.alternate;if((r.childLanes&l)!==l?(r.childLanes|=l,_!==null&&(_.childLanes|=l)):_!==null&&(_.childLanes&l)!==l&&(_.childLanes|=l),r===m)break;r=r.return}}function Ad(r,l,m,_){var A=r.child;for(A!==null&&(A.return=r);A!==null;){var D=A.dependencies;if(D!==null){var X=A.child;D=D.firstContext;e:for(;D!==null;){var se=D;D=A;for(var Me=0;Me<l.length;Me++)if(se.context===l[Me]){D.lanes|=m,se=D.alternate,se!==null&&(se.lanes|=m),Ll(D.return,m,r),_||(X=null);break e}D=se.next}}else if(A.tag===18){if(X=A.return,X===null)throw Error(n(341));X.lanes|=m,D=X.alternate,D!==null&&(D.lanes|=m),Ll(X,m,r),X=null}else X=A.child;if(X!==null)X.return=A;else for(X=A;X!==null;){if(X===r){X=null;break}if(A=X.sibling,A!==null){A.return=X.return,X=A;break}X=X.return}A=X}}function mc(r,l,m,_){r=null;for(var A=l,D=!1;A!==null;){if(!D){if((A.flags&524288)!==0)D=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var X=A.alternate;if(X===null)throw Error(n(387));if(X=X.memoizedProps,X!==null){var se=A.type;hi(A.pendingProps.value,X.value)||(r!==null?r.push(se):r=[se])}}else if(A===_e.current){if(X=A.alternate,X===null)throw Error(n(387));X.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(r!==null?r.push(lg):r=[lg])}A=A.return}r!==null&&Ad(l,r,m,_),l.flags|=262144}function tf(r){for(r=r.firstContext;r!==null;){if(!hi(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function au(r){Wr=r,qa=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Xa(r){return pm(Wr,r)}function ih(r,l){return Wr===null&&au(r),pm(r,l)}function pm(r,l){var m=l._currentValue;if(l={context:l,memoizedValue:m,next:null},qa===null){if(r===null)throw Error(n(308));qa=l,r.dependencies={lanes:0,firstContext:l},r.flags|=524288}else qa=qa.next=l;return m}var G0=typeof AbortController<"u"?AbortController:function(){var r=[],l=this.signal={aborted:!1,addEventListener:function(m,_){r.push(_)}};this.abort=function(){l.aborted=!0,r.forEach(function(m){return m()})}},j0=i.unstable_scheduleCallback,mm=i.unstable_NormalPriority,an={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gm(){return{controller:new G0,data:new Map,refCount:0}}function ns(r){r.refCount--,r.refCount===0&&j0(mm,function(){r.controller.abort()})}var su=null,vm=0,Ol=0,Ro=null;function nf(r,l){if(su===null){var m=su=[];vm=0,Ol=gx(),Ro={status:"pending",value:void 0,then:function(_){m.push(_)}}}return vm++,l.then(ym,ym),l}function ym(){if(--vm===0&&su!==null){Ro!==null&&(Ro.status="fulfilled");var r=su;su=null,Ol=0,Ro=null;for(var l=0;l<r.length;l++)(0,r[l])()}}function _m(r,l){var m=[],_={status:"pending",value:null,reason:null,then:function(A){m.push(A)}};return r.then(function(){_.status="fulfilled",_.value=l;for(var A=0;A<m.length;A++)(0,m[A])(l)},function(A){for(_.status="rejected",_.reason=A,A=0;A<m.length;A++)(0,m[A])(void 0)}),_}var W0=q.S;q.S=function(r,l){vf=Y(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&nf(r,l),W0!==null&&W0(r,l)};var gc=G(null);function Zo(){var r=gc.current;return r!==null?r:pi.pooledCache}function af(r,l){l===null?fe(gc,gc.current):fe(gc,l.pool)}function Ed(){var r=Zo();return r===null?null:{parent:an._currentValue,pool:r}}var vc=Error(n(460)),ah=Error(n(474)),Do=Error(n(542)),sh={then:function(){}};function q0(r){return r=r.status,r==="fulfilled"||r==="rejected"}function xm(r,l,m){switch(m=r[m],m===void 0?r.push(l):m!==l&&(l.then(Xi,Xi),l=m),l.status){case"fulfilled":return l.value;case"rejected":throw r=l.reason,Sm(r),r;default:if(typeof l.status=="string")l.then(Xi,Xi);else{if(r=pi,r!==null&&100<r.shellSuspendCounter)throw Error(n(482));r=l,r.status="pending",r.then(function(_){if(l.status==="pending"){var A=l;A.status="fulfilled",A.value=_}},function(_){if(l.status==="pending"){var A=l;A.status="rejected",A.reason=_}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw r=l.reason,Sm(r),r}throw un=l,vc}}function ru(r){try{var l=r._init;return l(r._payload)}catch(m){throw m!==null&&typeof m=="object"&&typeof m.then=="function"?(un=m,vc):m}}var un=null;function wd(){if(un===null)throw Error(n(459));var r=un;return un=null,r}function Sm(r){if(r===vc||r===Do)throw Error(n(483))}var yc=null,_c=0;function Cd(r){var l=_c;return _c+=1,yc===null&&(yc=[]),xm(yc,r,l)}function rh(r,l){l=l.props.ref,r.ref=l!==void 0?l:null}function oh(r,l){throw l.$$typeof===x?Error(n(525)):(r=Object.prototype.toString.call(l),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":r)))}function sf(r){function l(Pe,Ee){if(r){var He=Pe.deletions;He===null?(Pe.deletions=[Ee],Pe.flags|=16):He.push(Ee)}}function m(Pe,Ee){if(!r)return null;for(;Ee!==null;)l(Pe,Ee),Ee=Ee.sibling;return null}function _(Pe){for(var Ee=new Map;Pe!==null;)Pe.key!==null?Ee.set(Pe.key,Pe):Ee.set(Pe.index,Pe),Pe=Pe.sibling;return Ee}function A(Pe,Ee){return Pe=yr(Pe,Ee),Pe.index=0,Pe.sibling=null,Pe}function D(Pe,Ee,He){return Pe.index=He,r?(He=Pe.alternate,He!==null?(He=He.index,He<Ee?(Pe.flags|=67108866,Ee):He):(Pe.flags|=67108866,Ee)):(Pe.flags|=1048576,Ee)}function X(Pe){return r&&Pe.alternate===null&&(Pe.flags|=67108866),Pe}function se(Pe,Ee,He,gt){return Ee===null||Ee.tag!==6?(Ee=$c(He,Pe.mode,gt),Ee.return=Pe,Ee):(Ee=A(Ee,He),Ee.return=Pe,Ee)}function Me(Pe,Ee,He,gt){var ln=He.type;return ln===R?ft(Pe,Ee,He.props.children,gt,He.key):Ee!==null&&(Ee.elementType===ln||typeof ln=="object"&&ln!==null&&ln.$$typeof===Z&&ru(ln)===Ee.type)?(Ee=A(Ee,He.props),rh(Ee,He),Ee.return=Pe,Ee):(Ee=pc(He.type,He.key,He.props,null,Pe.mode,gt),rh(Ee,He),Ee.return=Pe,Ee)}function We(Pe,Ee,He,gt){return Ee===null||Ee.tag!==4||Ee.stateNode.containerInfo!==He.containerInfo||Ee.stateNode.implementation!==He.implementation?(Ee=_r(He,Pe.mode,gt),Ee.return=Pe,Ee):(Ee=A(Ee,He.children||[]),Ee.return=Pe,Ee)}function ft(Pe,Ee,He,gt,ln){return Ee===null||Ee.tag!==7?(Ee=wo(He,Pe.mode,gt,ln),Ee.return=Pe,Ee):(Ee=A(Ee,He),Ee.return=Pe,Ee)}function _t(Pe,Ee,He){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return Ee=$c(""+Ee,Pe.mode,He),Ee.return=Pe,Ee;if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case b:return He=pc(Ee.type,Ee.key,Ee.props,null,Pe.mode,He),rh(He,Ee),He.return=Pe,He;case M:return Ee=_r(Ee,Pe.mode,He),Ee.return=Pe,Ee;case Z:return Ee=ru(Ee),_t(Pe,Ee,He)}if(ve(Ee)||J(Ee))return Ee=wo(Ee,Pe.mode,He,null),Ee.return=Pe,Ee;if(typeof Ee.then=="function")return _t(Pe,Cd(Ee),He);if(Ee.$$typeof===I)return _t(Pe,ih(Pe,Ee),He);oh(Pe,Ee)}return null}function Je(Pe,Ee,He,gt){var ln=Ee!==null?Ee.key:null;if(typeof He=="string"&&He!==""||typeof He=="number"||typeof He=="bigint")return ln!==null?null:se(Pe,Ee,""+He,gt);if(typeof He=="object"&&He!==null){switch(He.$$typeof){case b:return He.key===ln?Me(Pe,Ee,He,gt):null;case M:return He.key===ln?We(Pe,Ee,He,gt):null;case Z:return He=ru(He),Je(Pe,Ee,He,gt)}if(ve(He)||J(He))return ln!==null?null:ft(Pe,Ee,He,gt,null);if(typeof He.then=="function")return Je(Pe,Ee,Cd(He),gt);if(He.$$typeof===I)return Je(Pe,Ee,ih(Pe,He),gt);oh(Pe,He)}return null}function ot(Pe,Ee,He,gt,ln){if(typeof gt=="string"&&gt!==""||typeof gt=="number"||typeof gt=="bigint")return Pe=Pe.get(He)||null,se(Ee,Pe,""+gt,ln);if(typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case b:return Pe=Pe.get(gt.key===null?He:gt.key)||null,Me(Ee,Pe,gt,ln);case M:return Pe=Pe.get(gt.key===null?He:gt.key)||null,We(Ee,Pe,gt,ln);case Z:return gt=ru(gt),ot(Pe,Ee,He,gt,ln)}if(ve(gt)||J(gt))return Pe=Pe.get(He)||null,ft(Ee,Pe,gt,ln,null);if(typeof gt.then=="function")return ot(Pe,Ee,He,Cd(gt),ln);if(gt.$$typeof===I)return ot(Pe,Ee,He,ih(Ee,gt),ln);oh(Ee,gt)}return null}function Kt(Pe,Ee,He,gt){for(var ln=null,gi=null,en=Ee,Un=Ee=0,qn=null;en!==null&&Un<He.length;Un++){en.index>Un?(qn=en,en=null):qn=en.sibling;var vi=Je(Pe,en,He[Un],gt);if(vi===null){en===null&&(en=qn);break}r&&en&&vi.alternate===null&&l(Pe,en),Ee=D(vi,Ee,Un),gi===null?ln=vi:gi.sibling=vi,gi=vi,en=qn}if(Un===He.length)return m(Pe,en),zn&&$t(Pe,Un),ln;if(en===null){for(;Un<He.length;Un++)en=_t(Pe,He[Un],gt),en!==null&&(Ee=D(en,Ee,Un),gi===null?ln=en:gi.sibling=en,gi=en);return zn&&$t(Pe,Un),ln}for(en=_(en);Un<He.length;Un++)qn=ot(en,Pe,Un,He[Un],gt),qn!==null&&(r&&qn.alternate!==null&&en.delete(qn.key===null?Un:qn.key),Ee=D(qn,Ee,Un),gi===null?ln=qn:gi.sibling=qn,gi=qn);return r&&en.forEach(function(Af){return l(Pe,Af)}),zn&&$t(Pe,Un),ln}function hn(Pe,Ee,He,gt){if(He==null)throw Error(n(151));for(var ln=null,gi=null,en=Ee,Un=Ee=0,qn=null,vi=He.next();en!==null&&!vi.done;Un++,vi=He.next()){en.index>Un?(qn=en,en=null):qn=en.sibling;var Af=Je(Pe,en,vi.value,gt);if(Af===null){en===null&&(en=qn);break}r&&en&&Af.alternate===null&&l(Pe,en),Ee=D(Af,Ee,Un),gi===null?ln=Af:gi.sibling=Af,gi=Af,en=qn}if(vi.done)return m(Pe,en),zn&&$t(Pe,Un),ln;if(en===null){for(;!vi.done;Un++,vi=He.next())vi=_t(Pe,vi.value,gt),vi!==null&&(Ee=D(vi,Ee,Un),gi===null?ln=vi:gi.sibling=vi,gi=vi);return zn&&$t(Pe,Un),ln}for(en=_(en);!vi.done;Un++,vi=He.next())vi=ot(en,Pe,Un,vi.value,gt),vi!==null&&(r&&vi.alternate!==null&&en.delete(vi.key===null?Un:vi.key),Ee=D(vi,Ee,Un),gi===null?ln=vi:gi.sibling=vi,gi=vi);return r&&en.forEach(function(v4){return l(Pe,v4)}),zn&&$t(Pe,Un),ln}function Ii(Pe,Ee,He,gt){if(typeof He=="object"&&He!==null&&He.type===R&&He.key===null&&(He=He.props.children),typeof He=="object"&&He!==null){switch(He.$$typeof){case b:e:{for(var ln=He.key;Ee!==null;){if(Ee.key===ln){if(ln=He.type,ln===R){if(Ee.tag===7){m(Pe,Ee.sibling),gt=A(Ee,He.props.children),gt.return=Pe,Pe=gt;break e}}else if(Ee.elementType===ln||typeof ln=="object"&&ln!==null&&ln.$$typeof===Z&&ru(ln)===Ee.type){m(Pe,Ee.sibling),gt=A(Ee,He.props),rh(gt,He),gt.return=Pe,Pe=gt;break e}m(Pe,Ee);break}else l(Pe,Ee);Ee=Ee.sibling}He.type===R?(gt=wo(He.props.children,Pe.mode,gt,He.key),gt.return=Pe,Pe=gt):(gt=pc(He.type,He.key,He.props,null,Pe.mode,gt),rh(gt,He),gt.return=Pe,Pe=gt)}return X(Pe);case M:e:{for(ln=He.key;Ee!==null;){if(Ee.key===ln)if(Ee.tag===4&&Ee.stateNode.containerInfo===He.containerInfo&&Ee.stateNode.implementation===He.implementation){m(Pe,Ee.sibling),gt=A(Ee,He.children||[]),gt.return=Pe,Pe=gt;break e}else{m(Pe,Ee);break}else l(Pe,Ee);Ee=Ee.sibling}gt=_r(He,Pe.mode,gt),gt.return=Pe,Pe=gt}return X(Pe);case Z:return He=ru(He),Ii(Pe,Ee,He,gt)}if(ve(He))return Kt(Pe,Ee,He,gt);if(J(He)){if(ln=J(He),typeof ln!="function")throw Error(n(150));return He=ln.call(He),hn(Pe,Ee,He,gt)}if(typeof He.then=="function")return Ii(Pe,Ee,Cd(He),gt);if(He.$$typeof===I)return Ii(Pe,Ee,ih(Pe,He),gt);oh(Pe,He)}return typeof He=="string"&&He!==""||typeof He=="number"||typeof He=="bigint"?(He=""+He,Ee!==null&&Ee.tag===6?(m(Pe,Ee.sibling),gt=A(Ee,He),gt.return=Pe,Pe=gt):(m(Pe,Ee),gt=$c(He,Pe.mode,gt),gt.return=Pe,Pe=gt),X(Pe)):m(Pe,Ee)}return function(Pe,Ee,He,gt){try{_c=0;var ln=Ii(Pe,Ee,He,gt);return yc=null,ln}catch(en){if(en===vc||en===Do)throw en;var gi=Ga(29,en,null,Pe.mode);return gi.lanes=gt,gi.return=Pe,gi}}}var ou=sf(!0),X0=sf(!1),xc=!1;function bm(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Tm(r,l){r=r.updateQueue,l.updateQueue===r&&(l.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ko(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Nl(r,l,m){var _=r.updateQueue;if(_===null)return null;if(_=_.shared,(jn&2)!==0){var A=_.pending;return A===null?l.next=l:(l.next=A.next,A.next=l),_.pending=l,l=Cl(r),Yo(r,null,m),l}return Ao(r,_,l,m),Cl(r)}function Sc(r,l,m){if(l=l.updateQueue,l!==null&&(l=l.shared,(m&4194048)!==0)){var _=l.lanes;_&=r.pendingLanes,m|=_,l.lanes=m,ia(r,m)}}function Rd(r,l){var m=r.updateQueue,_=r.alternate;if(_!==null&&(_=_.updateQueue,m===_)){var A=null,D=null;if(m=m.firstBaseUpdate,m!==null){do{var X={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};D===null?A=D=X:D=D.next=X,m=m.next}while(m!==null);D===null?A=D=l:D=D.next=l}else A=D=l;m={baseState:_.baseState,firstBaseUpdate:A,lastBaseUpdate:D,shared:_.shared,callbacks:_.callbacks},r.updateQueue=m;return}r=m.lastBaseUpdate,r===null?m.firstBaseUpdate=l:r.next=l,m.lastBaseUpdate=l}var Mm=!1;function lh(){if(Mm){var r=Ro;if(r!==null)throw r}}function lu(r,l,m,_){Mm=!1;var A=r.updateQueue;xc=!1;var D=A.firstBaseUpdate,X=A.lastBaseUpdate,se=A.shared.pending;if(se!==null){A.shared.pending=null;var Me=se,We=Me.next;Me.next=null,X===null?D=We:X.next=We,X=Me;var ft=r.alternate;ft!==null&&(ft=ft.updateQueue,se=ft.lastBaseUpdate,se!==X&&(se===null?ft.firstBaseUpdate=We:se.next=We,ft.lastBaseUpdate=Me))}if(D!==null){var _t=A.baseState;X=0,ft=We=Me=null,se=D;do{var Je=se.lane&-536870913,ot=Je!==se.lane;if(ot?(kn&Je)===Je:(_&Je)===Je){Je!==0&&Je===Ol&&(Mm=!0),ft!==null&&(ft=ft.next={lane:0,tag:se.tag,payload:se.payload,callback:null,next:null});e:{var Kt=r,hn=se;Je=l;var Ii=m;switch(hn.tag){case 1:if(Kt=hn.payload,typeof Kt=="function"){_t=Kt.call(Ii,_t,Je);break e}_t=Kt;break e;case 3:Kt.flags=Kt.flags&-65537|128;case 0:if(Kt=hn.payload,Je=typeof Kt=="function"?Kt.call(Ii,_t,Je):Kt,Je==null)break e;_t=y({},_t,Je);break e;case 2:xc=!0}}Je=se.callback,Je!==null&&(r.flags|=64,ot&&(r.flags|=8192),ot=A.callbacks,ot===null?A.callbacks=[Je]:ot.push(Je))}else ot={lane:Je,tag:se.tag,payload:se.payload,callback:se.callback,next:null},ft===null?(We=ft=ot,Me=_t):ft=ft.next=ot,X|=Je;if(se=se.next,se===null){if(se=A.shared.pending,se===null)break;ot=se,se=ot.next,ot.next=null,A.lastBaseUpdate=ot,A.shared.pending=null}}while(!0);ft===null&&(Me=_t),A.baseState=Me,A.firstBaseUpdate=We,A.lastBaseUpdate=ft,D===null&&(A.shared.lanes=0),Dr|=X,r.lanes=X,r.memoizedState=_t}}function Qo(r,l){if(typeof r!="function")throw Error(n(191,r));r.call(l)}function is(r,l){var m=r.callbacks;if(m!==null)for(r.callbacks=null,r=0;r<m.length;r++)Qo(m[r],l)}var xr=G(null),Is=G(0);function Am(r,l){r=ca,fe(Is,r),fe(xr,l),ca=r|l.baseLanes}function Em(){fe(Is,ca),fe(xr,xr.current)}function ys(){ca=Is.current,ne(xr),ne(Is)}var Ua=G(null),Xr=null;function bc(r){var l=r.alternate;fe(Ki,Ki.current&1),fe(Ua,r),Xr===null&&(l===null||xr.current!==null||l.memoizedState!==null)&&(Xr=r)}function wm(r){fe(Ki,Ki.current),fe(Ua,r),Xr===null&&(Xr=r)}function Y0(r){r.tag===22?(fe(Ki,Ki.current),fe(Ua,r),Xr===null&&(Xr=r)):Ul()}function Ul(){fe(Ki,Ki.current),fe(Ua,Ua.current)}function Sr(r){ne(Ua),Xr===r&&(Xr=null),ne(Ki)}var Ki=G(0);function Dd(r){for(var l=r;l!==null;){if(l.tag===13){var m=l.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||Cx(m)||Rx(m)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Ws=0,dn=null,bi=null,Ta=null,Ld=!1,Jo=!1,cu=!1,Od=0,ch=0,$o=null,rx=0;function Qi(){throw Error(n(321))}function Cm(r,l){if(l===null)return!1;for(var m=0;m<l.length&&m<r.length;m++)if(!hi(r[m],l[m]))return!1;return!0}function Rm(r,l,m,_,A,D){return Ws=D,dn=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,q.H=r===null||r.memoizedState===null?pv:lf,cu=!1,D=m(_,A),cu=!1,Jo&&(D=K0(l,m,_,A)),Z0(r),D}function Z0(r){q.H=ph;var l=bi!==null&&bi.next!==null;if(Ws=0,Ta=bi=dn=null,Ld=!1,ch=0,$o=null,l)throw Error(n(300));r===null||zi||(r=r.dependencies,r!==null&&tf(r)&&(zi=!0))}function K0(r,l,m,_){dn=r;var A=0;do{if(Jo&&($o=null),ch=0,Jo=!1,25<=A)throw Error(n(301));if(A+=1,Ta=bi=null,r.updateQueue!=null){var D=r.updateQueue;D.lastEffect=null,D.events=null,D.stores=null,D.memoCache!=null&&(D.memoCache.index=0)}q.H=mh,D=l(m,_)}while(Jo);return D}function ox(){var r=q.H,l=r.useState()[0];return l=typeof l.then=="function"?fh(l):l,r=r.useState()[0],(bi!==null?bi.memoizedState:null)!==r&&(dn.flags|=1024),l}function Dm(){var r=Od!==0;return Od=0,r}function Lm(r,l,m){l.updateQueue=r.updateQueue,l.flags&=-2053,r.lanes&=~m}function Om(r){if(Ld){for(r=r.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}Ld=!1}Ws=0,Ta=bi=dn=null,Jo=!1,ch=Od=0,$o=null}function Ps(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ta===null?dn.memoizedState=Ta=r:Ta=Ta.next=r,Ta}function sa(){if(bi===null){var r=dn.alternate;r=r!==null?r.memoizedState:null}else r=bi.next;var l=Ta===null?dn.memoizedState:Ta.next;if(l!==null)Ta=l,bi=r;else{if(r===null)throw dn.alternate===null?Error(n(467)):Error(n(310));bi=r,r={memoizedState:bi.memoizedState,baseState:bi.baseState,baseQueue:bi.baseQueue,queue:bi.queue,next:null},Ta===null?dn.memoizedState=Ta=r:Ta=Ta.next=r}return Ta}function uh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fh(r){var l=ch;return ch+=1,$o===null&&($o=[]),r=xm($o,r,l),l=dn,(Ta===null?l.memoizedState:Ta.next)===null&&(l=l.alternate,q.H=l===null||l.memoizedState===null?pv:lf),r}function Nd(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return fh(r);if(r.$$typeof===I)return Xa(r)}throw Error(n(438,String(r)))}function Nm(r){var l=null,m=dn.updateQueue;if(m!==null&&(l=m.memoCache),l==null){var _=dn.alternate;_!==null&&(_=_.updateQueue,_!==null&&(_=_.memoCache,_!=null&&(l={data:_.data.map(function(A){return A.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),m===null&&(m=uh(),dn.updateQueue=m),m.memoCache=l,m=l.data[l.index],m===void 0)for(m=l.data[l.index]=Array(r),_=0;_<r;_++)m[_]=H;return l.index++,m}function Il(r,l){return typeof l=="function"?l(r):l}function Ud(r){var l=sa();return Um(l,bi,r)}function Um(r,l,m){var _=r.queue;if(_===null)throw Error(n(311));_.lastRenderedReducer=m;var A=r.baseQueue,D=_.pending;if(D!==null){if(A!==null){var X=A.next;A.next=D.next,D.next=X}l.baseQueue=A=D,_.pending=null}if(D=r.baseState,A===null)r.memoizedState=D;else{l=A.next;var se=X=null,Me=null,We=l,ft=!1;do{var _t=We.lane&-536870913;if(_t!==We.lane?(kn&_t)===_t:(Ws&_t)===_t){var Je=We.revertLane;if(Je===0)Me!==null&&(Me=Me.next={lane:0,revertLane:0,gesture:null,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null}),_t===Ol&&(ft=!0);else if((Ws&Je)===Je){We=We.next,Je===Ol&&(ft=!0);continue}else _t={lane:0,revertLane:We.revertLane,gesture:null,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null},Me===null?(se=Me=_t,X=D):Me=Me.next=_t,dn.lanes|=Je,Dr|=Je;_t=We.action,cu&&m(D,_t),D=We.hasEagerState?We.eagerState:m(D,_t)}else Je={lane:_t,revertLane:We.revertLane,gesture:We.gesture,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null},Me===null?(se=Me=Je,X=D):Me=Me.next=Je,dn.lanes|=_t,Dr|=_t;We=We.next}while(We!==null&&We!==l);if(Me===null?X=D:Me.next=se,!hi(D,r.memoizedState)&&(zi=!0,ft&&(m=Ro,m!==null)))throw m;r.memoizedState=D,r.baseState=X,r.baseQueue=Me,_.lastRenderedState=D}return A===null&&(_.lanes=0),[r.memoizedState,_.dispatch]}function Id(r){var l=sa(),m=l.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=r;var _=m.dispatch,A=m.pending,D=l.memoizedState;if(A!==null){m.pending=null;var X=A=A.next;do D=r(D,X.action),X=X.next;while(X!==A);hi(D,l.memoizedState)||(zi=!0),l.memoizedState=D,l.baseQueue===null&&(l.baseState=D),m.lastRenderedState=D}return[D,_]}function Im(r,l,m){var _=dn,A=sa(),D=zn;if(D){if(m===void 0)throw Error(n(407));m=m()}else m=l();var X=!hi((bi||A).memoizedState,m);if(X&&(A.memoizedState=m,zi=!0),A=A.queue,km(zm.bind(null,_,A,r),[r]),A.getSnapshot!==l||X||Ta!==null&&Ta.memoizedState.tag&1){if(_.flags|=2048,rf(9,{destroy:void 0},Pm.bind(null,_,A,m,l),null),pi===null)throw Error(n(349));D||(Ws&127)!==0||Q0(_,l,m)}return m}function Q0(r,l,m){r.flags|=16384,r={getSnapshot:l,value:m},l=dn.updateQueue,l===null?(l=uh(),dn.updateQueue=l,l.stores=[r]):(m=l.stores,m===null?l.stores=[r]:m.push(r))}function Pm(r,l,m,_){l.value=m,l.getSnapshot=_,Bm(l)&&Pd(r)}function zm(r,l,m){return m(function(){Bm(l)&&Pd(r)})}function Bm(r){var l=r.getSnapshot;r=r.value;try{var m=l();return!hi(r,m)}catch{return!0}}function Pd(r){var l=vr(r,2);l!==null&&p(l,r,2)}function hh(r){var l=Ps();if(typeof r=="function"){var m=r;if(r=m(),cu){st(!0);try{m()}finally{st(!1)}}}return l.memoizedState=l.baseState=r,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Il,lastRenderedState:r},l}function J0(r,l,m,_){return r.baseState=m,Um(r,bi,typeof _=="function"?_:Il)}function lx(r,l,m,_,A){if(Pl(r))throw Error(n(485));if(r=l.action,r!==null){var D={payload:A,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(X){D.listeners.push(X)}};q.T!==null?m(!0):D.isTransition=!1,_(D),m=l.pending,m===null?(D.next=l.pending=D,$0(l,D)):(D.next=m.next,l.pending=m.next=D)}}function $0(r,l){var m=l.action,_=l.payload,A=r.state;if(l.isTransition){var D=q.T,X={};q.T=X;try{var se=m(A,_),Me=q.S;Me!==null&&Me(X,se),ev(r,l,se)}catch(We){zd(r,l,We)}finally{D!==null&&X.types!==null&&(D.types=X.types),q.T=D}}else try{D=m(A,_),ev(r,l,D)}catch(We){zd(r,l,We)}}function ev(r,l,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(_){Fm(r,l,_)},function(_){return zd(r,l,_)}):Fm(r,l,m)}function Fm(r,l,m){l.status="fulfilled",l.value=m,tv(l),r.state=m,l=r.pending,l!==null&&(m=l.next,m===l?r.pending=null:(m=m.next,l.next=m,$0(r,m)))}function zd(r,l,m){var _=r.pending;if(r.pending=null,_!==null){_=_.next;do l.status="rejected",l.reason=m,tv(l),l=l.next;while(l!==_)}r.action=null}function tv(r){r=r.listeners;for(var l=0;l<r.length;l++)(0,r[l])()}function nv(r,l){return l}function iv(r,l){if(zn){var m=pi.formState;if(m!==null){e:{var _=dn;if(zn){if($n){t:{for(var A=$n,D=ba;A.nodeType!==8;){if(!D){A=null;break t}if(A=sl(A.nextSibling),A===null){A=null;break t}}D=A.data,A=D==="F!"||D==="F"?A:null}if(A){$n=sl(A.nextSibling),_=A.data==="F!";break e}}In(_)}_=!1}_&&(l=m[0])}}return m=Ps(),m.memoizedState=m.baseState=l,_={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nv,lastRenderedState:l},m.queue=_,m=dv.bind(null,dn,_),_.dispatch=m,_=hh(!1),D=dh.bind(null,dn,!1,_.queue),_=Ps(),A={state:l,dispatch:null,action:r,pending:null},_.queue=A,m=lx.bind(null,dn,A,D,m),A.dispatch=m,_.memoizedState=r,[l,m,!1]}function av(r){var l=sa();return sv(l,bi,r)}function sv(r,l,m){if(l=Um(r,l,nv)[0],r=Ud(Il)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var _=fh(l)}catch(X){throw X===vc?Do:X}else _=l;l=sa();var A=l.queue,D=A.dispatch;return m!==l.memoizedState&&(dn.flags|=2048,rf(9,{destroy:void 0},cx.bind(null,A,m),null)),[_,D,r]}function cx(r,l){r.action=l}function rv(r){var l=sa(),m=bi;if(m!==null)return sv(l,m,r);sa(),l=l.memoizedState,m=sa();var _=m.queue.dispatch;return m.memoizedState=r,[l,_,!1]}function rf(r,l,m,_){return r={tag:r,create:m,deps:_,inst:l,next:null},l=dn.updateQueue,l===null&&(l=uh(),dn.updateQueue=l),m=l.lastEffect,m===null?l.lastEffect=r.next=r:(_=m.next,m.next=r,r.next=_,l.lastEffect=r),r}function ov(){return sa().memoizedState}function Bd(r,l,m,_){var A=Ps();dn.flags|=r,A.memoizedState=rf(1|l,{destroy:void 0},m,_===void 0?null:_)}function Fd(r,l,m,_){var A=sa();_=_===void 0?null:_;var D=A.memoizedState.inst;bi!==null&&_!==null&&Cm(_,bi.memoizedState.deps)?A.memoizedState=rf(l,D,m,_):(dn.flags|=r,A.memoizedState=rf(1|l,D,m,_))}function lv(r,l){Bd(8390656,8,r,l)}function km(r,l){Fd(2048,8,r,l)}function cv(r){dn.flags|=4;var l=dn.updateQueue;if(l===null)l=uh(),dn.updateQueue=l,l.events=[r];else{var m=l.events;m===null?l.events=[r]:m.push(r)}}function uv(r){var l=sa().memoizedState;return cv({ref:l,nextImpl:r}),function(){if((jn&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}function fv(r,l){return Fd(4,2,r,l)}function br(r,l){return Fd(4,4,r,l)}function Vm(r,l){if(typeof l=="function"){r=r();var m=l(r);return function(){typeof m=="function"?m():l(null)}}if(l!=null)return r=r(),l.current=r,function(){l.current=null}}function kd(r,l,m){m=m!=null?m.concat([r]):null,Fd(4,4,Vm.bind(null,l,r),m)}function Vd(){}function Hm(r,l){var m=sa();l=l===void 0?null:l;var _=m.memoizedState;return l!==null&&Cm(l,_[1])?_[0]:(m.memoizedState=[r,l],r)}function Gm(r,l){var m=sa();l=l===void 0?null:l;var _=m.memoizedState;if(l!==null&&Cm(l,_[1]))return _[0];if(_=r(),cu){st(!0);try{r()}finally{st(!1)}}return m.memoizedState=[_,l],_}function jm(r,l,m){return m===void 0||(Ws&1073741824)!==0&&(kn&261930)===0?r.memoizedState=l:(r.memoizedState=m,r=h(),dn.lanes|=r,Dr|=r,m)}function Wm(r,l,m,_){return hi(m,l)?m:xr.current!==null?(r=jm(r,m,_),hi(r,l)||(zi=!0),r):(Ws&42)===0||(Ws&1073741824)!==0&&(kn&261930)===0?(zi=!0,r.memoizedState=m):(r=h(),dn.lanes|=r,Dr|=r,l)}function qm(r,l,m,_,A){var D=K.p;K.p=D!==0&&8>D?D:8;var X=q.T,se={};q.T=se,dh(r,!1,l,m);try{var Me=A(),We=q.S;if(We!==null&&We(se,Me),Me!==null&&typeof Me=="object"&&typeof Me.then=="function"){var ft=_m(Me,_);of(r,l,ft,Bs(r))}else of(r,l,_,Bs(r))}catch(_t){of(r,l,{then:function(){},status:"rejected",reason:_t},Bs())}finally{K.p=D,X!==null&&se.types!==null&&(X.types=se.types),q.T=X}}function ux(){}function Xm(r,l,m,_){if(r.tag!==5)throw Error(n(476));var A=hv(r).queue;qm(r,A,l,te,m===null?ux:function(){return Ym(r),m(_)})}function hv(r){var l=r.memoizedState;if(l!==null)return l;l={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Il,lastRenderedState:te},next:null};var m={};return l.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Il,lastRenderedState:m},next:null},r.memoizedState=l,r=r.alternate,r!==null&&(r.memoizedState=l),l}function Ym(r){var l=hv(r);l.next===null&&(l=r.alternate.memoizedState),of(r,l.next.queue,{},Bs())}function Zm(){return Xa(lg)}function as(){return sa().memoizedState}function Km(){return sa().memoizedState}function fx(r){for(var l=r.return;l!==null;){switch(l.tag){case 24:case 3:var m=Bs();r=Ko(m);var _=Nl(l,r,m);_!==null&&(p(_,l,m),Sc(_,l,m)),l={cache:gm()},r.payload=l;return}l=l.return}}function hx(r,l,m){var _=Bs();m={lane:_,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Pl(r)?uu(l,m):(m=dc(r,l,m,_),m!==null&&(p(m,r,_),qs(m,l,_)))}function dv(r,l,m){var _=Bs();of(r,l,m,_)}function of(r,l,m,_){var A={lane:_,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null};if(Pl(r))uu(l,A);else{var D=r.alternate;if(r.lanes===0&&(D===null||D.lanes===0)&&(D=l.lastRenderedReducer,D!==null))try{var X=l.lastRenderedState,se=D(X,m);if(A.hasEagerState=!0,A.eagerState=se,hi(se,X))return Ao(r,l,A,0),pi===null&&Mo(),!1}catch{}if(m=dc(r,l,A,_),m!==null)return p(m,r,_),qs(m,l,_),!0}return!1}function dh(r,l,m,_){if(_={lane:2,revertLane:gx(),gesture:null,action:_,hasEagerState:!1,eagerState:null,next:null},Pl(r)){if(l)throw Error(n(479))}else l=dc(r,m,_,2),l!==null&&p(l,r,2)}function Pl(r){var l=r.alternate;return r===dn||l!==null&&l===dn}function uu(r,l){Jo=Ld=!0;var m=r.pending;m===null?l.next=l:(l.next=m.next,m.next=l),r.pending=l}function qs(r,l,m){if((m&4194048)!==0){var _=l.lanes;_&=r.pendingLanes,m|=_,l.lanes=m,ia(r,m)}}var ph={readContext:Xa,use:Nd,useCallback:Qi,useContext:Qi,useEffect:Qi,useImperativeHandle:Qi,useLayoutEffect:Qi,useInsertionEffect:Qi,useMemo:Qi,useReducer:Qi,useRef:Qi,useState:Qi,useDebugValue:Qi,useDeferredValue:Qi,useTransition:Qi,useSyncExternalStore:Qi,useId:Qi,useHostTransitionStatus:Qi,useFormState:Qi,useActionState:Qi,useOptimistic:Qi,useMemoCache:Qi,useCacheRefresh:Qi};ph.useEffectEvent=Qi;var pv={readContext:Xa,use:Nd,useCallback:function(r,l){return Ps().memoizedState=[r,l===void 0?null:l],r},useContext:Xa,useEffect:lv,useImperativeHandle:function(r,l,m){m=m!=null?m.concat([r]):null,Bd(4194308,4,Vm.bind(null,l,r),m)},useLayoutEffect:function(r,l){return Bd(4194308,4,r,l)},useInsertionEffect:function(r,l){Bd(4,2,r,l)},useMemo:function(r,l){var m=Ps();l=l===void 0?null:l;var _=r();if(cu){st(!0);try{r()}finally{st(!1)}}return m.memoizedState=[_,l],_},useReducer:function(r,l,m){var _=Ps();if(m!==void 0){var A=m(l);if(cu){st(!0);try{m(l)}finally{st(!1)}}}else A=l;return _.memoizedState=_.baseState=A,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:A},_.queue=r,r=r.dispatch=hx.bind(null,dn,r),[_.memoizedState,r]},useRef:function(r){var l=Ps();return r={current:r},l.memoizedState=r},useState:function(r){r=hh(r);var l=r.queue,m=dv.bind(null,dn,l);return l.dispatch=m,[r.memoizedState,m]},useDebugValue:Vd,useDeferredValue:function(r,l){var m=Ps();return jm(m,r,l)},useTransition:function(){var r=hh(!1);return r=qm.bind(null,dn,r.queue,!0,!1),Ps().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,l,m){var _=dn,A=Ps();if(zn){if(m===void 0)throw Error(n(407));m=m()}else{if(m=l(),pi===null)throw Error(n(349));(kn&127)!==0||Q0(_,l,m)}A.memoizedState=m;var D={value:m,getSnapshot:l};return A.queue=D,lv(zm.bind(null,_,D,r),[r]),_.flags|=2048,rf(9,{destroy:void 0},Pm.bind(null,_,D,m,l),null),m},useId:function(){var r=Ps(),l=pi.identifierPrefix;if(zn){var m=Nt,_=yt;m=(_&~(1<<32-ge(_)-1)).toString(32)+m,l="_"+l+"R_"+m,m=Od++,0<m&&(l+="H"+m.toString(32)),l+="_"}else m=rx++,l="_"+l+"r_"+m.toString(32)+"_";return r.memoizedState=l},useHostTransitionStatus:Zm,useFormState:iv,useActionState:iv,useOptimistic:function(r){var l=Ps();l.memoizedState=l.baseState=r;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=m,l=dh.bind(null,dn,!0,m),m.dispatch=l,[r,l]},useMemoCache:Nm,useCacheRefresh:function(){return Ps().memoizedState=fx.bind(null,dn)},useEffectEvent:function(r){var l=Ps(),m={impl:r};return l.memoizedState=m,function(){if((jn&2)!==0)throw Error(n(440));return m.impl.apply(void 0,arguments)}}},lf={readContext:Xa,use:Nd,useCallback:Hm,useContext:Xa,useEffect:km,useImperativeHandle:kd,useInsertionEffect:fv,useLayoutEffect:br,useMemo:Gm,useReducer:Ud,useRef:ov,useState:function(){return Ud(Il)},useDebugValue:Vd,useDeferredValue:function(r,l){var m=sa();return Wm(m,bi.memoizedState,r,l)},useTransition:function(){var r=Ud(Il)[0],l=sa().memoizedState;return[typeof r=="boolean"?r:fh(r),l]},useSyncExternalStore:Im,useId:as,useHostTransitionStatus:Zm,useFormState:av,useActionState:av,useOptimistic:function(r,l){var m=sa();return J0(m,bi,r,l)},useMemoCache:Nm,useCacheRefresh:Km};lf.useEffectEvent=uv;var mh={readContext:Xa,use:Nd,useCallback:Hm,useContext:Xa,useEffect:km,useImperativeHandle:kd,useInsertionEffect:fv,useLayoutEffect:br,useMemo:Gm,useReducer:Id,useRef:ov,useState:function(){return Id(Il)},useDebugValue:Vd,useDeferredValue:function(r,l){var m=sa();return bi===null?jm(m,r,l):Wm(m,bi.memoizedState,r,l)},useTransition:function(){var r=Id(Il)[0],l=sa().memoizedState;return[typeof r=="boolean"?r:fh(r),l]},useSyncExternalStore:Im,useId:as,useHostTransitionStatus:Zm,useFormState:rv,useActionState:rv,useOptimistic:function(r,l){var m=sa();return bi!==null?J0(m,bi,r,l):(m.baseState=r,[r,m.queue.dispatch])},useMemoCache:Nm,useCacheRefresh:Km};mh.useEffectEvent=uv;function cf(r,l,m,_){l=r.memoizedState,m=m(_,l),m=m==null?l:y({},l,m),r.memoizedState=m,r.lanes===0&&(r.updateQueue.baseState=m)}var gh={enqueueSetState:function(r,l,m){r=r._reactInternals;var _=Bs(),A=Ko(_);A.payload=l,m!=null&&(A.callback=m),l=Nl(r,A,_),l!==null&&(p(l,r,_),Sc(l,r,_))},enqueueReplaceState:function(r,l,m){r=r._reactInternals;var _=Bs(),A=Ko(_);A.tag=1,A.payload=l,m!=null&&(A.callback=m),l=Nl(r,A,_),l!==null&&(p(l,r,_),Sc(l,r,_))},enqueueForceUpdate:function(r,l){r=r._reactInternals;var m=Bs(),_=Ko(m);_.tag=2,l!=null&&(_.callback=l),l=Nl(r,_,m),l!==null&&(p(l,r,m),Sc(l,r,m))}};function mv(r,l,m,_,A,D,X){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(_,D,X):l.prototype&&l.prototype.isPureReactComponent?!El(m,_)||!El(A,D):!0}function gv(r,l,m,_){r=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(m,_),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(m,_),l.state!==r&&gh.enqueueReplaceState(l,l.state,null)}function ss(r,l){var m=l;if("ref"in l){m={};for(var _ in l)_!=="ref"&&(m[_]=l[_])}if(r=r.defaultProps){m===l&&(m=y({},m));for(var A in r)m[A]===void 0&&(m[A]=r[A])}return m}function Qm(r){To(r)}function vv(r){console.error(r)}function Hd(r){To(r)}function Gd(r,l){try{var m=r.onUncaughtError;m(l.value,{componentStack:l.stack})}catch(_){setTimeout(function(){throw _})}}function yv(r,l,m){try{var _=r.onCaughtError;_(m.value,{componentStack:m.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function Jm(r,l,m){return m=Ko(m),m.tag=3,m.payload={element:null},m.callback=function(){Gd(r,l)},m}function uf(r){return r=Ko(r),r.tag=3,r}function Xs(r,l,m,_){var A=m.type.getDerivedStateFromError;if(typeof A=="function"){var D=_.value;r.payload=function(){return A(D)},r.callback=function(){yv(l,m,_)}}var X=m.stateNode;X!==null&&typeof X.componentDidCatch=="function"&&(r.callback=function(){yv(l,m,_),typeof A!="function"&&(al===null?al=new Set([this]):al.add(this));var se=_.stack;this.componentDidCatch(_.value,{componentStack:se!==null?se:""})})}function Tr(r,l,m,_,A){if(m.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){if(l=m.alternate,l!==null&&mc(l,m,A,!0),m=Ua.current,m!==null){switch(m.tag){case 31:case 13:return Xr===null?_n():m.alternate===null&&mi===0&&(mi=3),m.flags&=-257,m.flags|=65536,m.lanes=A,_===sh?m.flags|=16384:(l=m.updateQueue,l===null?m.updateQueue=new Set([_]):l.add(_),dx(r,_,A)),!1;case 22:return m.flags|=65536,_===sh?m.flags|=16384:(l=m.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([_])},m.updateQueue=l):(m=l.retryQueue,m===null?l.retryQueue=new Set([_]):m.add(_)),dx(r,_,A)),!1}throw Error(n(435,m.tag))}return dx(r,_,A),_n(),!1}if(zn)return l=Ua.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=A,_!==eu&&(r=Error(n(422),{cause:_}),nu(v(r,m)))):(_!==eu&&(l=Error(n(423),{cause:_}),nu(v(l,m))),r=r.current.alternate,r.flags|=65536,A&=-A,r.lanes|=A,_=v(_,m),A=Jm(r.stateNode,_,A),Rd(r,A),mi!==4&&(mi=2)),!1;var D=Error(n(520),{cause:_});if(D=v(D,m),Io===null?Io=[D]:Io.push(D),mi!==4&&(mi=2),l===null)return!0;_=v(_,m),m=l;do{switch(m.tag){case 3:return m.flags|=65536,r=A&-A,m.lanes|=r,r=Jm(m.stateNode,_,r),Rd(m,r),!1;case 1:if(l=m.type,D=m.stateNode,(m.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(al===null||!al.has(D))))return m.flags|=65536,A&=-A,m.lanes|=A,A=uf(A),Xs(A,r,m,_),Rd(m,A),!1}m=m.return}while(m!==null);return!1}var jd=Error(n(461)),zi=!1;function Ji(r,l,m,_){l.child=r===null?X0(l,null,m,_):ou(l,r.child,m,_)}function vh(r,l,m,_,A){m=m.render;var D=l.ref;if("ref"in _){var X={};for(var se in _)se!=="ref"&&(X[se]=_[se])}else X=_;return au(l),_=Rm(r,l,m,X,D,A),se=Dm(),r!==null&&!zi?(Lm(r,l,A),No(r,l,A)):(zn&&se&&Sa(l),l.flags|=1,Ji(r,l,_,A),l.child)}function yh(r,l,m,_,A){if(r===null){var D=m.type;return typeof D=="function"&&!ja(D)&&D.defaultProps===void 0&&m.compare===null?(l.tag=15,l.type=D,Mr(r,l,D,_,A)):(r=pc(m.type,null,_,l,l.mode,A),r.ref=l.ref,r.return=l,l.child=r)}if(D=r.child,!Mc(r,A)){var X=D.memoizedProps;if(m=m.compare,m=m!==null?m:El,m(X,_)&&r.ref===l.ref)return No(r,l,A)}return l.flags|=1,r=yr(D,_),r.ref=l.ref,r.return=l,l.child=r}function Mr(r,l,m,_,A){if(r!==null){var D=r.memoizedProps;if(El(D,_)&&r.ref===l.ref)if(zi=!1,l.pendingProps=_=D,Mc(r,A))(r.flags&131072)!==0&&(zi=!0);else return l.lanes=r.lanes,No(r,l,A)}return ff(r,l,m,_,A)}function Ar(r,l,m,_){var A=_.children,D=r!==null?r.memoizedState:null;if(r===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),_.mode==="hidden"){if((l.flags&128)!==0){if(D=D!==null?D.baseLanes|m:m,r!==null){for(_=l.child=r.child,A=0;_!==null;)A=A|_.lanes|_.childLanes,_=_.sibling;_=A&~D}else _=0,l.child=null;return el(r,l,D,m,_)}if((m&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},r!==null&&af(l,D!==null?D.cachePool:null),D!==null?Am(l,D):Em(),Y0(l);else return _=l.lanes=536870912,el(r,l,D!==null?D.baseLanes|m:m,m,_)}else D!==null?(af(l,D.cachePool),Am(l,D),Ul(),l.memoizedState=null):(r!==null&&af(l,null),Em(),Ul());return Ji(r,l,A,m),l.child}function Lo(r,l){return r!==null&&r.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function el(r,l,m,_,A){var D=Zo();return D=D===null?null:{parent:an._currentValue,pool:D},l.memoizedState={baseLanes:m,cachePool:D},r!==null&&af(l,null),Em(),Y0(l),r!==null&&mc(r,l,_,!0),l.childLanes=A,null}function Yr(r,l){return l=hf({mode:l.mode,children:l.children},r.mode),l.ref=r.ref,r.child=l,l.return=r,l}function Ya(r,l,m){return ou(l,r.child,null,m),r=Yr(l,l.pendingProps),r.flags|=2,Sr(l),l.memoizedState=null,r}function _h(r,l,m){var _=l.pendingProps,A=(l.flags&128)!==0;if(l.flags&=-129,r===null){if(zn){if(_.mode==="hidden")return r=Yr(l,_),l.lanes=536870912,Lo(null,r);if(wm(l),(r=$n)?(r=RM(r,ba),r=r!==null&&r.data==="&"?r:null,r!==null&&(l.memoizedState={dehydrated:r,treeContext:Ye!==null?{id:yt,overflow:Nt}:null,retryLane:536870912,hydrationErrors:null},m=th(r),m.return=l,l.child=m,Jn=l,$n=null)):r=null,r===null)throw In(l);return l.lanes=536870912,null}return Yr(l,_)}var D=r.memoizedState;if(D!==null){var X=D.dehydrated;if(wm(l),A)if(l.flags&256)l.flags&=-257,l=Ya(r,l,m);else if(l.memoizedState!==null)l.child=r.child,l.flags|=128,l=null;else throw Error(n(558));else if(zi||mc(r,l,m,!1),A=(m&r.childLanes)!==0,zi||A){if(_=pi,_!==null&&(X=Ca(_,m),X!==0&&X!==D.retryLane))throw D.retryLane=X,vr(r,X),p(_,r,X),jd;_n(),l=Ya(r,l,m)}else r=D.treeContext,$n=sl(X.nextSibling),Jn=l,zn=!0,Co=null,ba=!1,r!==null&&Wa(l,r),l=Yr(l,_),l.flags|=4096;return l}return r=yr(r.child,{mode:_.mode,children:_.children}),r.ref=l.ref,l.child=r,r.return=l,r}function Oo(r,l){var m=l.ref;if(m===null)r!==null&&r.ref!==null&&(l.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(n(284));(r===null||r.ref!==m)&&(l.flags|=4194816)}}function ff(r,l,m,_,A){return au(l),m=Rm(r,l,m,_,void 0,A),_=Dm(),r!==null&&!zi?(Lm(r,l,A),No(r,l,A)):(zn&&_&&Sa(l),l.flags|=1,Ji(r,l,m,A),l.child)}function _s(r,l,m,_,A,D){return au(l),l.updateQueue=null,m=K0(l,_,m,A),Z0(r),_=Dm(),r!==null&&!zi?(Lm(r,l,D),No(r,l,D)):(zn&&_&&Sa(l),l.flags|=1,Ji(r,l,m,D),l.child)}function rs(r,l,m,_,A){if(au(l),l.stateNode===null){var D=Eo,X=m.contextType;typeof X=="object"&&X!==null&&(D=Xa(X)),D=new m(_,D),l.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,D.updater=gh,l.stateNode=D,D._reactInternals=l,D=l.stateNode,D.props=_,D.state=l.memoizedState,D.refs={},bm(l),X=m.contextType,D.context=typeof X=="object"&&X!==null?Xa(X):Eo,D.state=l.memoizedState,X=m.getDerivedStateFromProps,typeof X=="function"&&(cf(l,m,X,_),D.state=l.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(X=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),X!==D.state&&gh.enqueueReplaceState(D,D.state,null),lu(l,_,D,A),lh(),D.state=l.memoizedState),typeof D.componentDidMount=="function"&&(l.flags|=4194308),_=!0}else if(r===null){D=l.stateNode;var se=l.memoizedProps,Me=ss(m,se);D.props=Me;var We=D.context,ft=m.contextType;X=Eo,typeof ft=="object"&&ft!==null&&(X=Xa(ft));var _t=m.getDerivedStateFromProps;ft=typeof _t=="function"||typeof D.getSnapshotBeforeUpdate=="function",se=l.pendingProps!==se,ft||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(se||We!==X)&&gv(l,D,_,X),xc=!1;var Je=l.memoizedState;D.state=Je,lu(l,_,D,A),lh(),We=l.memoizedState,se||Je!==We||xc?(typeof _t=="function"&&(cf(l,m,_t,_),We=l.memoizedState),(Me=xc||mv(l,m,Me,_,Je,We,X))?(ft||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(l.flags|=4194308)):(typeof D.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=_,l.memoizedState=We),D.props=_,D.state=We,D.context=X,_=Me):(typeof D.componentDidMount=="function"&&(l.flags|=4194308),_=!1)}else{D=l.stateNode,Tm(r,l),X=l.memoizedProps,ft=ss(m,X),D.props=ft,_t=l.pendingProps,Je=D.context,We=m.contextType,Me=Eo,typeof We=="object"&&We!==null&&(Me=Xa(We)),se=m.getDerivedStateFromProps,(We=typeof se=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(X!==_t||Je!==Me)&&gv(l,D,_,Me),xc=!1,Je=l.memoizedState,D.state=Je,lu(l,_,D,A),lh();var ot=l.memoizedState;X!==_t||Je!==ot||xc||r!==null&&r.dependencies!==null&&tf(r.dependencies)?(typeof se=="function"&&(cf(l,m,se,_),ot=l.memoizedState),(ft=xc||mv(l,m,ft,_,Je,ot,Me)||r!==null&&r.dependencies!==null&&tf(r.dependencies))?(We||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(_,ot,Me),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(_,ot,Me)),typeof D.componentDidUpdate=="function"&&(l.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof D.componentDidUpdate!="function"||X===r.memoizedProps&&Je===r.memoizedState||(l.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||X===r.memoizedProps&&Je===r.memoizedState||(l.flags|=1024),l.memoizedProps=_,l.memoizedState=ot),D.props=_,D.state=ot,D.context=Me,_=ft):(typeof D.componentDidUpdate!="function"||X===r.memoizedProps&&Je===r.memoizedState||(l.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||X===r.memoizedProps&&Je===r.memoizedState||(l.flags|=1024),_=!1)}return D=_,Oo(r,l),_=(l.flags&128)!==0,D||_?(D=l.stateNode,m=_&&typeof m.getDerivedStateFromError!="function"?null:D.render(),l.flags|=1,r!==null&&_?(l.child=ou(l,r.child,null,A),l.child=ou(l,null,m,A)):Ji(r,l,m,A),l.memoizedState=D.state,r=l.child):r=No(r,l,A),r}function ei(r,l,m,_){return Rl(),l.flags|=256,Ji(r,l,m,_),l.child}var Er={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zr(r){return{baseLanes:r,cachePool:Ed()}}function xh(r,l,m){return r=r!==null?r.childLanes&~m:0,l&&(r|=Wn),r}function wr(r,l,m){var _=l.pendingProps,A=!1,D=(l.flags&128)!==0,X;if((X=D)||(X=r!==null&&r.memoizedState===null?!1:(Ki.current&2)!==0),X&&(A=!0,l.flags&=-129),X=(l.flags&32)!==0,l.flags&=-33,r===null){if(zn){if(A?bc(l):Ul(),(r=$n)?(r=RM(r,ba),r=r!==null&&r.data!=="&"?r:null,r!==null&&(l.memoizedState={dehydrated:r,treeContext:Ye!==null?{id:yt,overflow:Nt}:null,retryLane:536870912,hydrationErrors:null},m=th(r),m.return=l,l.child=m,Jn=l,$n=null)):r=null,r===null)throw In(l);return Rx(r)?l.lanes=32:l.lanes=536870912,null}var se=_.children;return _=_.fallback,A?(Ul(),A=l.mode,se=hf({mode:"hidden",children:se},A),_=wo(_,A,m,null),se.return=l,_.return=l,se.sibling=_,l.child=se,_=l.child,_.memoizedState=Zr(m),_.childLanes=xh(r,X,m),l.memoizedState=Er,Lo(null,_)):(bc(l),Tc(l,se))}var Me=r.memoizedState;if(Me!==null&&(se=Me.dehydrated,se!==null)){if(D)l.flags&256?(bc(l),l.flags&=-257,l=df(r,l,m)):l.memoizedState!==null?(Ul(),l.child=r.child,l.flags|=128,l=null):(Ul(),se=_.fallback,A=l.mode,_=hf({mode:"visible",children:_.children},A),se=wo(se,A,m,null),se.flags|=2,_.return=l,se.return=l,_.sibling=se,l.child=_,ou(l,r.child,null,m),_=l.child,_.memoizedState=Zr(m),_.childLanes=xh(r,X,m),l.memoizedState=Er,l=Lo(null,_));else if(bc(l),Rx(se)){if(X=se.nextSibling&&se.nextSibling.dataset,X)var We=X.dgst;X=We,_=Error(n(419)),_.stack="",_.digest=X,nu({value:_,source:null,stack:null}),l=df(r,l,m)}else if(zi||mc(r,l,m,!1),X=(m&r.childLanes)!==0,zi||X){if(X=pi,X!==null&&(_=Ca(X,m),_!==0&&_!==Me.retryLane))throw Me.retryLane=_,vr(r,_),p(X,r,_),jd;Cx(se)||_n(),l=df(r,l,m)}else Cx(se)?(l.flags|=192,l.child=r.child,l=null):(r=Me.treeContext,$n=sl(se.nextSibling),Jn=l,zn=!0,Co=null,ba=!1,r!==null&&Wa(l,r),l=Tc(l,_.children),l.flags|=4096);return l}return A?(Ul(),se=_.fallback,A=l.mode,Me=r.child,We=Me.sibling,_=yr(Me,{mode:"hidden",children:_.children}),_.subtreeFlags=Me.subtreeFlags&65011712,We!==null?se=yr(We,se):(se=wo(se,A,m,null),se.flags|=2),se.return=l,_.return=l,_.sibling=se,l.child=_,Lo(null,_),_=l.child,se=r.child.memoizedState,se===null?se=Zr(m):(A=se.cachePool,A!==null?(Me=an._currentValue,A=A.parent!==Me?{parent:Me,pool:Me}:A):A=Ed(),se={baseLanes:se.baseLanes|m,cachePool:A}),_.memoizedState=se,_.childLanes=xh(r,X,m),l.memoizedState=Er,Lo(r.child,_)):(bc(l),m=r.child,r=m.sibling,m=yr(m,{mode:"visible",children:_.children}),m.return=l,m.sibling=null,r!==null&&(X=l.deletions,X===null?(l.deletions=[r],l.flags|=16):X.push(r)),l.child=m,l.memoizedState=null,m)}function Tc(r,l){return l=hf({mode:"visible",children:l},r.mode),l.return=r,r.child=l}function hf(r,l){return r=Ga(22,r,null,l),r.lanes=0,r}function df(r,l,m){return ou(l,r.child,null,m),r=Tc(l,l.pendingProps.children),r.flags|=2,l.memoizedState=null,r}function fu(r,l,m){r.lanes|=l;var _=r.alternate;_!==null&&(_.lanes|=l),Ll(r.return,l,m)}function Sh(r,l,m,_,A,D){var X=r.memoizedState;X===null?r.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:_,tail:m,tailMode:A,treeForkCount:D}:(X.isBackwards=l,X.rendering=null,X.renderingStartTime=0,X.last=_,X.tail=m,X.tailMode=A,X.treeForkCount=D)}function bh(r,l,m){var _=l.pendingProps,A=_.revealOrder,D=_.tail;_=_.children;var X=Ki.current,se=(X&2)!==0;if(se?(X=X&1|2,l.flags|=128):X&=1,fe(Ki,X),Ji(r,l,_,m),_=zn?ee:0,!se&&r!==null&&(r.flags&128)!==0)e:for(r=l.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&fu(r,m,l);else if(r.tag===19)fu(r,m,l);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===l)break e;for(;r.sibling===null;){if(r.return===null||r.return===l)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(A){case"forwards":for(m=l.child,A=null;m!==null;)r=m.alternate,r!==null&&Dd(r)===null&&(A=m),m=m.sibling;m=A,m===null?(A=l.child,l.child=null):(A=m.sibling,m.sibling=null),Sh(l,!1,A,m,D,_);break;case"backwards":case"unstable_legacy-backwards":for(m=null,A=l.child,l.child=null;A!==null;){if(r=A.alternate,r!==null&&Dd(r)===null){l.child=A;break}r=A.sibling,A.sibling=m,m=A,A=r}Sh(l,!0,m,null,D,_);break;case"together":Sh(l,!1,null,null,void 0,_);break;default:l.memoizedState=null}return l.child}function No(r,l,m){if(r!==null&&(l.dependencies=r.dependencies),Dr|=l.lanes,(m&l.childLanes)===0)if(r!==null){if(mc(r,l,m,!1),(m&l.childLanes)===0)return null}else return null;if(r!==null&&l.child!==r.child)throw Error(n(153));if(l.child!==null){for(r=l.child,m=yr(r,r.pendingProps),l.child=m,m.return=l;r.sibling!==null;)r=r.sibling,m=m.sibling=yr(r,r.pendingProps),m.return=l;m.sibling=null}return l.child}function Mc(r,l){return(r.lanes&l)!==0?!0:(r=r.dependencies,!!(r!==null&&tf(r)))}function Th(r,l,m){switch(l.tag){case 3:Ae(l,l.stateNode.containerInfo),Dl(l,an,r.memoizedState.cache),Rl();break;case 27:case 5:et(l);break;case 4:Ae(l,l.stateNode.containerInfo);break;case 10:Dl(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,wm(l),null;break;case 13:var _=l.memoizedState;if(_!==null)return _.dehydrated!==null?(bc(l),l.flags|=128,null):(m&l.child.childLanes)!==0?wr(r,l,m):(bc(l),r=No(r,l,m),r!==null?r.sibling:null);bc(l);break;case 19:var A=(r.flags&128)!==0;if(_=(m&l.childLanes)!==0,_||(mc(r,l,m,!1),_=(m&l.childLanes)!==0),A){if(_)return bh(r,l,m);l.flags|=128}if(A=l.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),fe(Ki,Ki.current),_)break;return null;case 22:return l.lanes=0,Ar(r,l,m,l.pendingProps);case 24:Dl(l,an,r.memoizedState.cache)}return No(r,l,m)}function Wd(r,l,m){if(r!==null)if(r.memoizedProps!==l.pendingProps)zi=!0;else{if(!Mc(r,m)&&(l.flags&128)===0)return zi=!1,Th(r,l,m);zi=(r.flags&131072)!==0}else zi=!1,zn&&(l.flags&1048576)!==0&&Mn(l,ee,l.index);switch(l.lanes=0,l.tag){case 16:e:{var _=l.pendingProps;if(r=ru(l.elementType),l.type=r,typeof r=="function")ja(r)?(_=ss(r,_),l.tag=1,l=rs(null,l,r,_,m)):(l.tag=0,l=ff(null,l,r,_,m));else{if(r!=null){var A=r.$$typeof;if(A===z){l.tag=11,l=vh(null,l,r,_,m);break e}else if(A===W){l.tag=14,l=yh(null,l,r,_,m);break e}}throw l=re(r)||r,Error(n(306,l,""))}}return l;case 0:return ff(r,l,l.type,l.pendingProps,m);case 1:return _=l.type,A=ss(_,l.pendingProps),rs(r,l,_,A,m);case 3:e:{if(Ae(l,l.stateNode.containerInfo),r===null)throw Error(n(387));_=l.pendingProps;var D=l.memoizedState;A=D.element,Tm(r,l),lu(l,_,null,m);var X=l.memoizedState;if(_=X.cache,Dl(l,an,_),_!==D.cache&&Ad(l,[an],m,!0),lh(),_=X.element,D.isDehydrated)if(D={element:_,isDehydrated:!1,cache:X.cache},l.updateQueue.baseState=D,l.memoizedState=D,l.flags&256){l=ei(r,l,_,m);break e}else if(_!==A){A=v(Error(n(424)),l),nu(A),l=ei(r,l,_,m);break e}else for(r=l.stateNode.containerInfo,r.nodeType===9?r=r.body:r=r.nodeName==="HTML"?r.ownerDocument.body:r,$n=sl(r.firstChild),Jn=l,zn=!0,Co=null,ba=!0,m=X0(l,null,_,m),l.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(Rl(),_===A){l=No(r,l,m);break e}Ji(r,l,_,m)}l=l.child}return l;case 26:return Oo(r,l),r===null?(m=IM(l.type,null,l.pendingProps,null))?l.memoizedState=m:zn||(m=l.type,r=l.pendingProps,_=Ev(he.current).createElement(m),_[cn]=l,_[Li]=r,Fs(_,m,r),ie(_),l.stateNode=_):l.memoizedState=IM(l.type,r.memoizedProps,l.pendingProps,r.memoizedState),null;case 27:return et(l),r===null&&zn&&(_=l.stateNode=OM(l.type,l.pendingProps,he.current),Jn=l,ba=!0,A=$n,xf(l.type)?(Dx=A,$n=sl(_.firstChild)):$n=A),Ji(r,l,l.pendingProps.children,m),Oo(r,l),r===null&&(l.flags|=4194304),l.child;case 5:return r===null&&zn&&((A=_=$n)&&(_=XO(_,l.type,l.pendingProps,ba),_!==null?(l.stateNode=_,Jn=l,$n=sl(_.firstChild),ba=!1,A=!0):A=!1),A||In(l)),et(l),A=l.type,D=l.pendingProps,X=r!==null?r.memoizedProps:null,_=D.children,Ax(A,D)?_=null:X!==null&&Ax(A,X)&&(l.flags|=32),l.memoizedState!==null&&(A=Rm(r,l,ox,null,null,m),lg._currentValue=A),Oo(r,l),Ji(r,l,_,m),l.child;case 6:return r===null&&zn&&((r=m=$n)&&(m=YO(m,l.pendingProps,ba),m!==null?(l.stateNode=m,Jn=l,$n=null,r=!0):r=!1),r||In(l)),null;case 13:return wr(r,l,m);case 4:return Ae(l,l.stateNode.containerInfo),_=l.pendingProps,r===null?l.child=ou(l,null,_,m):Ji(r,l,_,m),l.child;case 11:return vh(r,l,l.type,l.pendingProps,m);case 7:return Ji(r,l,l.pendingProps,m),l.child;case 8:return Ji(r,l,l.pendingProps.children,m),l.child;case 12:return Ji(r,l,l.pendingProps.children,m),l.child;case 10:return _=l.pendingProps,Dl(l,l.type,_.value),Ji(r,l,_.children,m),l.child;case 9:return A=l.type._context,_=l.pendingProps.children,au(l),A=Xa(A),_=_(A),l.flags|=1,Ji(r,l,_,m),l.child;case 14:return yh(r,l,l.type,l.pendingProps,m);case 15:return Mr(r,l,l.type,l.pendingProps,m);case 19:return bh(r,l,m);case 31:return _h(r,l,m);case 22:return Ar(r,l,m,l.pendingProps);case 24:return au(l),_=Xa(an),r===null?(A=Zo(),A===null&&(A=pi,D=gm(),A.pooledCache=D,D.refCount++,D!==null&&(A.pooledCacheLanes|=m),A=D),l.memoizedState={parent:_,cache:A},bm(l),Dl(l,an,A)):((r.lanes&m)!==0&&(Tm(r,l),lu(l,null,null,m),lh()),A=r.memoizedState,D=l.memoizedState,A.parent!==_?(A={parent:_,cache:_},l.memoizedState=A,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=A),Dl(l,an,_)):(_=D.cache,Dl(l,an,_),_!==A.cache&&Ad(l,[an],m,!0))),Ji(r,l,l.pendingProps.children,m),l.child;case 29:throw l.pendingProps}throw Error(n(156,l.tag))}function Ys(r){r.flags|=4}function Ac(r,l,m,_,A){if((l=(r.mode&32)!==0)&&(l=!1),l){if(r.flags|=16777216,(A&335544128)===A)if(r.stateNode.complete)r.flags|=8192;else if(wt())r.flags|=8192;else throw un=sh,ah}else r.flags&=-16777217}function zl(r,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!kM(l))if(wt())r.flags|=8192;else throw un=sh,ah}function pf(r,l){l!==null&&(r.flags|=4),r.flags&16384&&(l=r.tag!==22?Lt():536870912,r.lanes|=l,Lr|=l)}function Mh(r,l){if(!zn)switch(r.tailMode){case"hidden":l=r.tail;for(var m=null;l!==null;)l.alternate!==null&&(m=l),l=l.sibling;m===null?r.tail=null:m.sibling=null;break;case"collapsed":m=r.tail;for(var _=null;m!==null;)m.alternate!==null&&(_=m),m=m.sibling;_===null?l||r.tail===null?r.tail=null:r.tail.sibling=null:_.sibling=null}}function xi(r){var l=r.alternate!==null&&r.alternate.child===r.child,m=0,_=0;if(l)for(var A=r.child;A!==null;)m|=A.lanes|A.childLanes,_|=A.subtreeFlags&65011712,_|=A.flags&65011712,A.return=r,A=A.sibling;else for(A=r.child;A!==null;)m|=A.lanes|A.childLanes,_|=A.subtreeFlags,_|=A.flags,A.return=r,A=A.sibling;return r.subtreeFlags|=_,r.childLanes=m,l}function $m(r,l,m){var _=l.pendingProps;switch(wi(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xi(l),null;case 1:return xi(l),null;case 3:return m=l.stateNode,_=null,r!==null&&(_=r.memoizedState.cache),l.memoizedState.cache!==_&&(l.flags|=2048),qr(an),$e(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(r===null||r.child===null)&&(jr(l)?Ys(l):r===null||r.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,nh())),xi(l),null;case 26:var A=l.type,D=l.memoizedState;return r===null?(Ys(l),D!==null?(xi(l),zl(l,D)):(xi(l),Ac(l,A,null,_,m))):D?D!==r.memoizedState?(Ys(l),xi(l),zl(l,D)):(xi(l),l.flags&=-16777217):(r=r.memoizedProps,r!==_&&Ys(l),xi(l),Ac(l,A,r,_,m)),null;case 27:if(qe(l),m=he.current,A=l.type,r!==null&&l.stateNode!=null)r.memoizedProps!==_&&Ys(l);else{if(!_){if(l.stateNode===null)throw Error(n(166));return xi(l),null}r=me.current,jr(l)?tu(l):(r=OM(A,_,m),l.stateNode=r,Ys(l))}return xi(l),null;case 5:if(qe(l),A=l.type,r!==null&&l.stateNode!=null)r.memoizedProps!==_&&Ys(l);else{if(!_){if(l.stateNode===null)throw Error(n(166));return xi(l),null}if(D=me.current,jr(l))tu(l);else{var X=Ev(he.current);switch(D){case 1:D=X.createElementNS("http://www.w3.org/2000/svg",A);break;case 2:D=X.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;default:switch(A){case"svg":D=X.createElementNS("http://www.w3.org/2000/svg",A);break;case"math":D=X.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;case"script":D=X.createElement("div"),D.innerHTML="<script><\/script>",D=D.removeChild(D.firstChild);break;case"select":D=typeof _.is=="string"?X.createElement("select",{is:_.is}):X.createElement("select"),_.multiple?D.multiple=!0:_.size&&(D.size=_.size);break;default:D=typeof _.is=="string"?X.createElement(A,{is:_.is}):X.createElement(A)}}D[cn]=l,D[Li]=_;e:for(X=l.child;X!==null;){if(X.tag===5||X.tag===6)D.appendChild(X.stateNode);else if(X.tag!==4&&X.tag!==27&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===l)break e;for(;X.sibling===null;){if(X.return===null||X.return===l)break e;X=X.return}X.sibling.return=X.return,X=X.sibling}l.stateNode=D;e:switch(Fs(D,A,_),A){case"button":case"input":case"select":case"textarea":_=!!_.autoFocus;break e;case"img":_=!0;break e;default:_=!1}_&&Ys(l)}}return xi(l),Ac(l,l.type,r===null?null:r.memoizedProps,l.pendingProps,m),null;case 6:if(r&&l.stateNode!=null)r.memoizedProps!==_&&Ys(l);else{if(typeof _!="string"&&l.stateNode===null)throw Error(n(166));if(r=he.current,jr(l)){if(r=l.stateNode,m=l.memoizedProps,_=null,A=Jn,A!==null)switch(A.tag){case 27:case 5:_=A.memoizedProps}r[cn]=l,r=!!(r.nodeValue===m||_!==null&&_.suppressHydrationWarning===!0||SM(r.nodeValue,m)),r||In(l,!0)}else r=Ev(r).createTextNode(_),r[cn]=l,l.stateNode=r}return xi(l),null;case 31:if(m=l.memoizedState,r===null||r.memoizedState!==null){if(_=jr(l),m!==null){if(r===null){if(!_)throw Error(n(318));if(r=l.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(557));r[cn]=l}else Rl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;xi(l),r=!1}else m=nh(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=m),r=!0;if(!r)return l.flags&256?(Sr(l),l):(Sr(l),null);if((l.flags&128)!==0)throw Error(n(558))}return xi(l),null;case 13:if(_=l.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(A=jr(l),_!==null&&_.dehydrated!==null){if(r===null){if(!A)throw Error(n(318));if(A=l.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));A[cn]=l}else Rl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;xi(l),A=!1}else A=nh(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=A),A=!0;if(!A)return l.flags&256?(Sr(l),l):(Sr(l),null)}return Sr(l),(l.flags&128)!==0?(l.lanes=m,l):(m=_!==null,r=r!==null&&r.memoizedState!==null,m&&(_=l.child,A=null,_.alternate!==null&&_.alternate.memoizedState!==null&&_.alternate.memoizedState.cachePool!==null&&(A=_.alternate.memoizedState.cachePool.pool),D=null,_.memoizedState!==null&&_.memoizedState.cachePool!==null&&(D=_.memoizedState.cachePool.pool),D!==A&&(_.flags|=2048)),m!==r&&m&&(l.child.flags|=8192),pf(l,l.updateQueue),xi(l),null);case 4:return $e(),r===null&&xx(l.stateNode.containerInfo),xi(l),null;case 10:return qr(l.type),xi(l),null;case 19:if(ne(Ki),_=l.memoizedState,_===null)return xi(l),null;if(A=(l.flags&128)!==0,D=_.rendering,D===null)if(A)Mh(_,!1);else{if(mi!==0||r!==null&&(r.flags&128)!==0)for(r=l.child;r!==null;){if(D=Dd(r),D!==null){for(l.flags|=128,Mh(_,!1),r=D.updateQueue,l.updateQueue=r,pf(l,r),l.subtreeFlags=0,r=m,m=l.child;m!==null;)Na(m,r),m=m.sibling;return fe(Ki,Ki.current&1|2),zn&&$t(l,_.treeForkCount),l.child}r=r.sibling}_.tail!==null&&Y()>Or&&(l.flags|=128,A=!0,Mh(_,!1),l.lanes=4194304)}else{if(!A)if(r=Dd(D),r!==null){if(l.flags|=128,A=!0,r=r.updateQueue,l.updateQueue=r,pf(l,r),Mh(_,!0),_.tail===null&&_.tailMode==="hidden"&&!D.alternate&&!zn)return xi(l),null}else 2*Y()-_.renderingStartTime>Or&&m!==536870912&&(l.flags|=128,A=!0,Mh(_,!1),l.lanes=4194304);_.isBackwards?(D.sibling=l.child,l.child=D):(r=_.last,r!==null?r.sibling=D:l.child=D,_.last=D)}return _.tail!==null?(r=_.tail,_.rendering=r,_.tail=r.sibling,_.renderingStartTime=Y(),r.sibling=null,m=Ki.current,fe(Ki,A?m&1|2:m&1),zn&&$t(l,_.treeForkCount),r):(xi(l),null);case 22:case 23:return Sr(l),ys(),_=l.memoizedState!==null,r!==null?r.memoizedState!==null!==_&&(l.flags|=8192):_&&(l.flags|=8192),_?(m&536870912)!==0&&(l.flags&128)===0&&(xi(l),l.subtreeFlags&6&&(l.flags|=8192)):xi(l),m=l.updateQueue,m!==null&&pf(l,m.retryQueue),m=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(m=r.memoizedState.cachePool.pool),_=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(_=l.memoizedState.cachePool.pool),_!==m&&(l.flags|=2048),r!==null&&ne(gc),null;case 24:return m=null,r!==null&&(m=r.memoizedState.cache),l.memoizedState.cache!==m&&(l.flags|=2048),qr(an),xi(l),null;case 25:return null;case 30:return null}throw Error(n(156,l.tag))}function qd(r,l){switch(wi(l),l.tag){case 1:return r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 3:return qr(an),$e(),r=l.flags,(r&65536)!==0&&(r&128)===0?(l.flags=r&-65537|128,l):null;case 26:case 27:case 5:return qe(l),null;case 31:if(l.memoizedState!==null){if(Sr(l),l.alternate===null)throw Error(n(340));Rl()}return r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 13:if(Sr(l),r=l.memoizedState,r!==null&&r.dehydrated!==null){if(l.alternate===null)throw Error(n(340));Rl()}return r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 19:return ne(Ki),null;case 4:return $e(),null;case 10:return qr(l.type),null;case 22:case 23:return Sr(l),ys(),r!==null&&ne(gc),r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 24:return qr(an),null;case 25:return null;default:return null}}function hu(r,l){switch(wi(l),l.tag){case 3:qr(an),$e();break;case 26:case 27:case 5:qe(l);break;case 4:$e();break;case 31:l.memoizedState!==null&&Sr(l);break;case 13:Sr(l);break;case 19:ne(Ki);break;case 10:qr(l.type);break;case 22:case 23:Sr(l),ys(),r!==null&&ne(gc);break;case 24:qr(an)}}function tl(r,l){try{var m=l.updateQueue,_=m!==null?m.lastEffect:null;if(_!==null){var A=_.next;m=A;do{if((m.tag&r)===r){_=void 0;var D=m.create,X=m.inst;_=D(),X.destroy=_}m=m.next}while(m!==A)}}catch(se){Ci(l,l.return,se)}}function Kr(r,l,m){try{var _=l.updateQueue,A=_!==null?_.lastEffect:null;if(A!==null){var D=A.next;_=D;do{if((_.tag&r)===r){var X=_.inst,se=X.destroy;if(se!==void 0){X.destroy=void 0,A=l;var Me=m,We=se;try{We()}catch(ft){Ci(A,Me,ft)}}}_=_.next}while(_!==D)}}catch(ft){Ci(l,l.return,ft)}}function Ec(r){var l=r.updateQueue;if(l!==null){var m=r.stateNode;try{is(l,m)}catch(_){Ci(r,r.return,_)}}}function eg(r,l,m){m.props=ss(r.type,r.memoizedProps),m.state=r.memoizedState;try{m.componentWillUnmount()}catch(_){Ci(r,l,_)}}function nl(r,l){try{var m=r.ref;if(m!==null){switch(r.tag){case 26:case 27:case 5:var _=r.stateNode;break;case 30:_=r.stateNode;break;default:_=r.stateNode}typeof m=="function"?r.refCleanup=m(_):m.current=_}}catch(A){Ci(r,l,A)}}function Cr(r,l){var m=r.ref,_=r.refCleanup;if(m!==null)if(typeof _=="function")try{_()}catch(A){Ci(r,l,A)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(A){Ci(r,l,A)}else m.current=null}function Rr(r){var l=r.type,m=r.memoizedProps,_=r.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":m.autoFocus&&_.focus();break e;case"img":m.src?_.src=m.src:m.srcSet&&(_.srcset=m.srcSet)}}catch(A){Ci(r,r.return,A)}}function Qr(r,l,m){try{var _=r.stateNode;VO(_,r.type,m,l),_[Li]=l}catch(A){Ci(r,r.return,A)}}function Ma(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&xf(r.type)||r.tag===4}function il(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Ma(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&xf(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Rn(r,l,m){var _=r.tag;if(_===5||_===6)r=r.stateNode,l?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(r,l):(l=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,l.appendChild(r),m=m._reactRootContainer,m!=null||l.onclick!==null||(l.onclick=Xi));else if(_!==4&&(_===27&&xf(r.type)&&(m=r.stateNode,l=null),r=r.child,r!==null))for(Rn(r,l,m),r=r.sibling;r!==null;)Rn(r,l,m),r=r.sibling}function ri(r,l,m){var _=r.tag;if(_===5||_===6)r=r.stateNode,l?m.insertBefore(r,l):m.appendChild(r);else if(_!==4&&(_===27&&xf(r.type)&&(m=r.stateNode),r=r.child,r!==null))for(ri(r,l,m),r=r.sibling;r!==null;)ri(r,l,m),r=r.sibling}function ra(r){var l=r.stateNode,m=r.memoizedProps;try{for(var _=r.type,A=l.attributes;A.length;)l.removeAttributeNode(A[0]);Fs(l,_,m),l[cn]=r,l[Li]=m}catch(D){Ci(r,r.return,D)}}var Jr=!1,Bi=!1,Bl=!1,Ah=typeof WeakSet=="function"?WeakSet:Set,$i=null;function mf(r,l){if(r=r.containerInfo,Tx=Nv,r=wl(r),gr(r)){if("selectionStart"in r)var m={start:r.selectionStart,end:r.selectionEnd};else e:{m=(m=r.ownerDocument)&&m.defaultView||window;var _=m.getSelection&&m.getSelection();if(_&&_.rangeCount!==0){m=_.anchorNode;var A=_.anchorOffset,D=_.focusNode;_=_.focusOffset;try{m.nodeType,D.nodeType}catch{m=null;break e}var X=0,se=-1,Me=-1,We=0,ft=0,_t=r,Je=null;t:for(;;){for(var ot;_t!==m||A!==0&&_t.nodeType!==3||(se=X+A),_t!==D||_!==0&&_t.nodeType!==3||(Me=X+_),_t.nodeType===3&&(X+=_t.nodeValue.length),(ot=_t.firstChild)!==null;)Je=_t,_t=ot;for(;;){if(_t===r)break t;if(Je===m&&++We===A&&(se=X),Je===D&&++ft===_&&(Me=X),(ot=_t.nextSibling)!==null)break;_t=Je,Je=_t.parentNode}_t=ot}m=se===-1||Me===-1?null:{start:se,end:Me}}else m=null}m=m||{start:0,end:0}}else m=null;for(Mx={focusedElem:r,selectionRange:m},Nv=!1,$i=l;$i!==null;)if(l=$i,r=l.child,(l.subtreeFlags&1028)!==0&&r!==null)r.return=l,$i=r;else for(;$i!==null;){switch(l=$i,D=l.alternate,r=l.flags,l.tag){case 0:if((r&4)!==0&&(r=l.updateQueue,r=r!==null?r.events:null,r!==null))for(m=0;m<r.length;m++)A=r[m],A.ref.impl=A.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&D!==null){r=void 0,m=l,A=D.memoizedProps,D=D.memoizedState,_=m.stateNode;try{var Kt=ss(m.type,A);r=_.getSnapshotBeforeUpdate(Kt,D),_.__reactInternalSnapshotBeforeUpdate=r}catch(hn){Ci(m,m.return,hn)}}break;case 3:if((r&1024)!==0){if(r=l.stateNode.containerInfo,m=r.nodeType,m===9)wx(r);else if(m===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":wx(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(n(163))}if(r=l.sibling,r!==null){r.return=l.return,$i=r;break}$i=l.return}}function _v(r,l,m){var _=m.flags;switch(m.tag){case 0:case 11:case 15:Fl(r,m),_&4&&tl(5,m);break;case 1:if(Fl(r,m),_&4)if(r=m.stateNode,l===null)try{r.componentDidMount()}catch(X){Ci(m,m.return,X)}else{var A=ss(m.type,l.memoizedProps);l=l.memoizedState;try{r.componentDidUpdate(A,l,r.__reactInternalSnapshotBeforeUpdate)}catch(X){Ci(m,m.return,X)}}_&64&&Ec(m),_&512&&nl(m,m.return);break;case 3:if(Fl(r,m),_&64&&(r=m.updateQueue,r!==null)){if(l=null,m.child!==null)switch(m.child.tag){case 27:case 5:l=m.child.stateNode;break;case 1:l=m.child.stateNode}try{is(r,l)}catch(X){Ci(m,m.return,X)}}break;case 27:l===null&&_&4&&ra(m);case 26:case 5:Fl(r,m),l===null&&_&4&&Rr(m),_&512&&nl(m,m.return);break;case 12:Fl(r,m);break;case 31:Fl(r,m),_&4&&Yd(r,m);break;case 13:Fl(r,m),_&4&&tg(r,m),_&64&&(r=m.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(m=RO.bind(null,m),ZO(r,m))));break;case 22:if(_=m.memoizedState!==null||Jr,!_){l=l!==null&&l.memoizedState!==null||Bi,A=Jr;var D=Bi;Jr=_,(Bi=l)&&!D?di(r,m,(m.subtreeFlags&8772)!==0):Fl(r,m),Jr=A,Bi=D}break;case 30:break;default:Fl(r,m)}}function Xd(r){var l=r.alternate;l!==null&&(r.alternate=null,Xd(l)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(l=r.stateNode,l!==null&&Gr(l)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var ti=null,Aa=!1;function xs(r,l,m){for(m=m.child;m!==null;)wc(r,l,m),m=m.sibling}function wc(r,l,m){if(Qe&&typeof Qe.onCommitFiberUnmount=="function")try{Qe.onCommitFiberUnmount(Ge,m)}catch{}switch(m.tag){case 26:Bi||Cr(m,l),xs(r,l,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:Bi||Cr(m,l);var _=ti,A=Aa;xf(m.type)&&(ti=m.stateNode,Aa=!1),xs(r,l,m),sg(m.stateNode),ti=_,Aa=A;break;case 5:Bi||Cr(m,l);case 6:if(_=ti,A=Aa,ti=null,xs(r,l,m),ti=_,Aa=A,ti!==null)if(Aa)try{(ti.nodeType===9?ti.body:ti.nodeName==="HTML"?ti.ownerDocument.body:ti).removeChild(m.stateNode)}catch(D){Ci(m,l,D)}else try{ti.removeChild(m.stateNode)}catch(D){Ci(m,l,D)}break;case 18:ti!==null&&(Aa?(r=ti,wM(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,m.stateNode),sp(r)):wM(ti,m.stateNode));break;case 4:_=ti,A=Aa,ti=m.stateNode.containerInfo,Aa=!0,xs(r,l,m),ti=_,Aa=A;break;case 0:case 11:case 14:case 15:Kr(2,m,l),Bi||Kr(4,m,l),xs(r,l,m);break;case 1:Bi||(Cr(m,l),_=m.stateNode,typeof _.componentWillUnmount=="function"&&eg(m,l,_)),xs(r,l,m);break;case 21:xs(r,l,m);break;case 22:Bi=(_=Bi)||m.memoizedState!==null,xs(r,l,m),Bi=_;break;default:xs(r,l,m)}}function Yd(r,l){if(l.memoizedState===null&&(r=l.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{sp(r)}catch(m){Ci(l,l.return,m)}}}function tg(r,l){if(l.memoizedState===null&&(r=l.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{sp(r)}catch(m){Ci(l,l.return,m)}}function xv(r){switch(r.tag){case 31:case 13:case 19:var l=r.stateNode;return l===null&&(l=r.stateNode=new Ah),l;case 22:return r=r.stateNode,l=r._retryCache,l===null&&(l=r._retryCache=new Ah),l;default:throw Error(n(435,r.tag))}}function oa(r,l){var m=xv(r);l.forEach(function(_){if(!m.has(_)){m.add(_);var A=DO.bind(null,r,_);_.then(A,A)}})}function Ss(r,l){var m=l.deletions;if(m!==null)for(var _=0;_<m.length;_++){var A=m[_],D=r,X=l,se=X;e:for(;se!==null;){switch(se.tag){case 27:if(xf(se.type)){ti=se.stateNode,Aa=!1;break e}break;case 5:ti=se.stateNode,Aa=!1;break e;case 3:case 4:ti=se.stateNode.containerInfo,Aa=!0;break e}se=se.return}if(ti===null)throw Error(n(160));wc(D,X,A),ti=null,Aa=!1,D=A.alternate,D!==null&&(D.return=null),A.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)Cc(l,r),l=l.sibling}var Zs=null;function Cc(r,l){var m=r.alternate,_=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Ss(l,r),ea(r),_&4&&(Kr(3,r,r.return),tl(3,r),Kr(5,r,r.return));break;case 1:Ss(l,r),ea(r),_&512&&(Bi||m===null||Cr(m,m.return)),_&64&&Jr&&(r=r.updateQueue,r!==null&&(_=r.callbacks,_!==null&&(m=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=m===null?_:m.concat(_))));break;case 26:var A=Zs;if(Ss(l,r),ea(r),_&512&&(Bi||m===null||Cr(m,m.return)),_&4){var D=m!==null?m.memoizedState:null;if(_=r.memoizedState,m===null)if(_===null)if(r.stateNode===null){e:{_=r.type,m=r.memoizedProps,A=A.ownerDocument||A;t:switch(_){case"title":D=A.getElementsByTagName("title")[0],(!D||D[fr]||D[cn]||D.namespaceURI==="http://www.w3.org/2000/svg"||D.hasAttribute("itemprop"))&&(D=A.createElement(_),A.head.insertBefore(D,A.querySelector("head > title"))),Fs(D,_,m),D[cn]=r,ie(D),_=D;break e;case"link":var X=BM("link","href",A).get(_+(m.href||""));if(X){for(var se=0;se<X.length;se++)if(D=X[se],D.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&D.getAttribute("rel")===(m.rel==null?null:m.rel)&&D.getAttribute("title")===(m.title==null?null:m.title)&&D.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){X.splice(se,1);break t}}D=A.createElement(_),Fs(D,_,m),A.head.appendChild(D);break;case"meta":if(X=BM("meta","content",A).get(_+(m.content||""))){for(se=0;se<X.length;se++)if(D=X[se],D.getAttribute("content")===(m.content==null?null:""+m.content)&&D.getAttribute("name")===(m.name==null?null:m.name)&&D.getAttribute("property")===(m.property==null?null:m.property)&&D.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&D.getAttribute("charset")===(m.charSet==null?null:m.charSet)){X.splice(se,1);break t}}D=A.createElement(_),Fs(D,_,m),A.head.appendChild(D);break;default:throw Error(n(468,_))}D[cn]=r,ie(D),_=D}r.stateNode=_}else FM(A,r.type,r.stateNode);else r.stateNode=zM(A,_,r.memoizedProps);else D!==_?(D===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):D.count--,_===null?FM(A,r.type,r.stateNode):zM(A,_,r.memoizedProps)):_===null&&r.stateNode!==null&&Qr(r,r.memoizedProps,m.memoizedProps)}break;case 27:Ss(l,r),ea(r),_&512&&(Bi||m===null||Cr(m,m.return)),m!==null&&_&4&&Qr(r,r.memoizedProps,m.memoizedProps);break;case 5:if(Ss(l,r),ea(r),_&512&&(Bi||m===null||Cr(m,m.return)),r.flags&32){A=r.stateNode;try{ci(A,"")}catch(Kt){Ci(r,r.return,Kt)}}_&4&&r.stateNode!=null&&(A=r.memoizedProps,Qr(r,A,m!==null?m.memoizedProps:A)),_&1024&&(Bl=!0);break;case 6:if(Ss(l,r),ea(r),_&4){if(r.stateNode===null)throw Error(n(162));_=r.memoizedProps,m=r.stateNode;try{m.nodeValue=_}catch(Kt){Ci(r,r.return,Kt)}}break;case 3:if(Rv=null,A=Zs,Zs=wv(l.containerInfo),Ss(l,r),Zs=A,ea(r),_&4&&m!==null&&m.memoizedState.isDehydrated)try{sp(l.containerInfo)}catch(Kt){Ci(r,r.return,Kt)}Bl&&(Bl=!1,Sv(r));break;case 4:_=Zs,Zs=wv(r.stateNode.containerInfo),Ss(l,r),ea(r),Zs=_;break;case 12:Ss(l,r),ea(r);break;case 31:Ss(l,r),ea(r),_&4&&(_=r.updateQueue,_!==null&&(r.updateQueue=null,oa(r,_)));break;case 13:Ss(l,r),ea(r),r.child.flags&8192&&r.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(Hl=Y()),_&4&&(_=r.updateQueue,_!==null&&(r.updateQueue=null,oa(r,_)));break;case 22:A=r.memoizedState!==null;var Me=m!==null&&m.memoizedState!==null,We=Jr,ft=Bi;if(Jr=We||A,Bi=ft||Me,Ss(l,r),Bi=ft,Jr=We,ea(r),_&8192)e:for(l=r.stateNode,l._visibility=A?l._visibility&-2:l._visibility|1,A&&(m===null||Me||Jr||Bi||du(r)),m=null,l=r;;){if(l.tag===5||l.tag===26){if(m===null){Me=m=l;try{if(D=Me.stateNode,A)X=D.style,typeof X.setProperty=="function"?X.setProperty("display","none","important"):X.display="none";else{se=Me.stateNode;var _t=Me.memoizedProps.style,Je=_t!=null&&_t.hasOwnProperty("display")?_t.display:null;se.style.display=Je==null||typeof Je=="boolean"?"":(""+Je).trim()}}catch(Kt){Ci(Me,Me.return,Kt)}}}else if(l.tag===6){if(m===null){Me=l;try{Me.stateNode.nodeValue=A?"":Me.memoizedProps}catch(Kt){Ci(Me,Me.return,Kt)}}}else if(l.tag===18){if(m===null){Me=l;try{var ot=Me.stateNode;A?CM(ot,!0):CM(Me.stateNode,!1)}catch(Kt){Ci(Me,Me.return,Kt)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===r)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break e;for(;l.sibling===null;){if(l.return===null||l.return===r)break e;m===l&&(m=null),l=l.return}m===l&&(m=null),l.sibling.return=l.return,l=l.sibling}_&4&&(_=r.updateQueue,_!==null&&(m=_.retryQueue,m!==null&&(_.retryQueue=null,oa(r,m))));break;case 19:Ss(l,r),ea(r),_&4&&(_=r.updateQueue,_!==null&&(r.updateQueue=null,oa(r,_)));break;case 30:break;case 21:break;default:Ss(l,r),ea(r)}}function ea(r){var l=r.flags;if(l&2){try{for(var m,_=r.return;_!==null;){if(Ma(_)){m=_;break}_=_.return}if(m==null)throw Error(n(160));switch(m.tag){case 27:var A=m.stateNode,D=il(r);ri(r,D,A);break;case 5:var X=m.stateNode;m.flags&32&&(ci(X,""),m.flags&=-33);var se=il(r);ri(r,se,X);break;case 3:case 4:var Me=m.stateNode.containerInfo,We=il(r);Rn(r,We,Me);break;default:throw Error(n(161))}}catch(ft){Ci(r,r.return,ft)}r.flags&=-3}l&4096&&(r.flags&=-4097)}function Sv(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var l=r;Sv(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),r=r.sibling}}function Fl(r,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)_v(r,l.alternate,l),l=l.sibling}function du(r){for(r=r.child;r!==null;){var l=r;switch(l.tag){case 0:case 11:case 14:case 15:Kr(4,l,l.return),du(l);break;case 1:Cr(l,l.return);var m=l.stateNode;typeof m.componentWillUnmount=="function"&&eg(l,l.return,m),du(l);break;case 27:sg(l.stateNode);case 26:case 5:Cr(l,l.return),du(l);break;case 22:l.memoizedState===null&&du(l);break;case 30:du(l);break;default:du(l)}r=r.sibling}}function di(r,l,m){for(m=m&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var _=l.alternate,A=r,D=l,X=D.flags;switch(D.tag){case 0:case 11:case 15:di(A,D,m),tl(4,D);break;case 1:if(di(A,D,m),_=D,A=_.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(We){Ci(_,_.return,We)}if(_=D,A=_.updateQueue,A!==null){var se=_.stateNode;try{var Me=A.shared.hiddenCallbacks;if(Me!==null)for(A.shared.hiddenCallbacks=null,A=0;A<Me.length;A++)Qo(Me[A],se)}catch(We){Ci(_,_.return,We)}}m&&X&64&&Ec(D),nl(D,D.return);break;case 27:ra(D);case 26:case 5:di(A,D,m),m&&_===null&&X&4&&Rr(D),nl(D,D.return);break;case 12:di(A,D,m);break;case 31:di(A,D,m),m&&X&4&&Yd(A,D);break;case 13:di(A,D,m),m&&X&4&&tg(A,D);break;case 22:D.memoizedState===null&&di(A,D,m),nl(D,D.return);break;case 30:break;default:di(A,D,m)}l=l.sibling}}function Zd(r,l){var m=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(m=r.memoizedState.cachePool.pool),r=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(r=l.memoizedState.cachePool.pool),r!==m&&(r!=null&&r.refCount++,m!=null&&ns(m))}function kl(r,l){r=null,l.alternate!==null&&(r=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==r&&(l.refCount++,r!=null&&ns(r))}function Ia(r,l,m,_){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)ji(r,l,m,_),l=l.sibling}function ji(r,l,m,_){var A=l.flags;switch(l.tag){case 0:case 11:case 15:Ia(r,l,m,_),A&2048&&tl(9,l);break;case 1:Ia(r,l,m,_);break;case 3:Ia(r,l,m,_),A&2048&&(r=null,l.alternate!==null&&(r=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==r&&(l.refCount++,r!=null&&ns(r)));break;case 12:if(A&2048){Ia(r,l,m,_),r=l.stateNode;try{var D=l.memoizedProps,X=D.id,se=D.onPostCommit;typeof se=="function"&&se(X,l.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(Me){Ci(l,l.return,Me)}}else Ia(r,l,m,_);break;case 31:Ia(r,l,m,_);break;case 13:Ia(r,l,m,_);break;case 23:break;case 22:D=l.stateNode,X=l.alternate,l.memoizedState!==null?D._visibility&2?Ia(r,l,m,_):gf(r,l):D._visibility&2?Ia(r,l,m,_):(D._visibility|=2,Rc(r,l,m,_,(l.subtreeFlags&10256)!==0||!1)),A&2048&&Zd(X,l);break;case 24:Ia(r,l,m,_),A&2048&&kl(l.alternate,l);break;default:Ia(r,l,m,_)}}function Rc(r,l,m,_,A){for(A=A&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var D=r,X=l,se=m,Me=_,We=X.flags;switch(X.tag){case 0:case 11:case 15:Rc(D,X,se,Me,A),tl(8,X);break;case 23:break;case 22:var ft=X.stateNode;X.memoizedState!==null?ft._visibility&2?Rc(D,X,se,Me,A):gf(D,X):(ft._visibility|=2,Rc(D,X,se,Me,A)),A&&We&2048&&Zd(X.alternate,X);break;case 24:Rc(D,X,se,Me,A),A&&We&2048&&kl(X.alternate,X);break;default:Rc(D,X,se,Me,A)}l=l.sibling}}function gf(r,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var m=r,_=l,A=_.flags;switch(_.tag){case 22:gf(m,_),A&2048&&Zd(_.alternate,_);break;case 24:gf(m,_),A&2048&&kl(_.alternate,_);break;default:gf(m,_)}l=l.sibling}}var ta=8192;function pu(r,l,m){if(r.subtreeFlags&ta)for(r=r.child;r!==null;)la(r,l,m),r=r.sibling}function la(r,l,m){switch(r.tag){case 26:pu(r,l,m),r.flags&ta&&r.memoizedState!==null&&o4(m,Zs,r.memoizedState,r.memoizedProps);break;case 5:pu(r,l,m);break;case 3:case 4:var _=Zs;Zs=wv(r.stateNode.containerInfo),pu(r,l,m),Zs=_;break;case 22:r.memoizedState===null&&(_=r.alternate,_!==null&&_.memoizedState!==null?(_=ta,ta=16777216,pu(r,l,m),ta=_):pu(r,l,m));break;default:pu(r,l,m)}}function Ks(r){var l=r.alternate;if(l!==null&&(r=l.child,r!==null)){l.child=null;do l=r.sibling,r.sibling=null,r=l;while(r!==null)}}function zs(r){var l=r.deletions;if((r.flags&16)!==0){if(l!==null)for(var m=0;m<l.length;m++){var _=l[m];$i=_,Eh(_,r)}Ks(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)mu(r),r=r.sibling}function mu(r){switch(r.tag){case 0:case 11:case 15:zs(r),r.flags&2048&&Kr(9,r,r.return);break;case 3:zs(r);break;case 12:zs(r);break;case 22:var l=r.stateNode;r.memoizedState!==null&&l._visibility&2&&(r.return===null||r.return.tag!==13)?(l._visibility&=-3,Kd(r)):zs(r);break;default:zs(r)}}function Kd(r){var l=r.deletions;if((r.flags&16)!==0){if(l!==null)for(var m=0;m<l.length;m++){var _=l[m];$i=_,Eh(_,r)}Ks(r)}for(r=r.child;r!==null;){switch(l=r,l.tag){case 0:case 11:case 15:Kr(8,l,l.return),Kd(l);break;case 22:m=l.stateNode,m._visibility&2&&(m._visibility&=-3,Kd(l));break;default:Kd(l)}r=r.sibling}}function Eh(r,l){for(;$i!==null;){var m=$i;switch(m.tag){case 0:case 11:case 15:Kr(8,m,l);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var _=m.memoizedState.cachePool.pool;_!=null&&_.refCount++}break;case 24:ns(m.memoizedState.cache)}if(_=m.child,_!==null)_.return=m,$i=_;else e:for(m=r;$i!==null;){_=$i;var A=_.sibling,D=_.return;if(Xd(_),_===m){$i=null;break e}if(A!==null){A.return=D,$i=A;break e}$i=D}}}var Qd={getCacheForType:function(r){var l=Xa(an),m=l.data.get(r);return m===void 0&&(m=r(),l.data.set(r,m)),m},cacheSignal:function(){return Xa(an).controller.signal}},Jd=typeof WeakMap=="function"?WeakMap:Map,jn=0,pi=null,Dn=null,kn=0,sn=0,Pn=null,Sn=!1,Nn=!1,Ti=!1,ca=0,mi=0,Dr=0,Vl=0,Uo=0,Wn=0,Lr=0,Io=null,bs=null,Qs=!1,Hl=0,vf=0,Or=1/0,yf=null,al=null,Wi=0,Po=null,Nr=null,$r=0,Gl=0,gu=null,$d=null,vu=0,yu=null;function Bs(){return(jn&2)!==0&&kn!==0?kn&-kn:q.T!==null?gx():Fi()}function h(){if(Wn===0)if((kn&536870912)===0||zn){var r=lt;lt<<=1,(lt&3932160)===0&&(lt=262144),Wn=r}else Wn=536870912;return r=Ua.current,r!==null&&(r.flags|=32),Wn}function p(r,l,m){(r===pi&&(sn===2||sn===9)||r.cancelPendingCommit!==null)&&(ze(r,0),k(r,kn,Wn,!1)),bn(r,m),((jn&2)===0||r!==pi)&&(r===pi&&((jn&2)===0&&(Vl|=m),mi===4&&k(r,kn,Wn,!1)),Dc(r))}function S(r,l,m){if((jn&6)!==0)throw Error(n(327));var _=!m&&(l&127)===0&&(l&r.expiredLanes)===0||mt(r,l),A=_?_u(r,l):Js(r,l,!0),D=_;do{if(A===0){Nn&&!_&&k(r,l,0,!1);break}else{if(m=r.current.alternate,D&&!U(m)){A=Js(r,l,!1),D=!1;continue}if(A===2){if(D=l,r.errorRecoveryDisabledLanes&D)var X=0;else X=r.pendingLanes&-536870913,X=X!==0?X:X&536870912?536870912:0;if(X!==0){l=X;e:{var se=r;A=Io;var Me=se.current.memoizedState.isDehydrated;if(Me&&(ze(se,X).flags|=256),X=Js(se,X,!1),X!==2){if(Ti&&!Me){se.errorRecoveryDisabledLanes|=D,Vl|=D,A=4;break e}D=bs,bs=A,D!==null&&(bs===null?bs=D:bs.push.apply(bs,D))}A=X}if(D=!1,A!==2)continue}}if(A===1){ze(r,0),k(r,l,0,!0);break}e:{switch(_=r,D=A,D){case 0:case 1:throw Error(n(345));case 4:if((l&4194048)!==l)break;case 6:k(_,l,Wn,!Sn);break e;case 2:bs=null;break;case 3:case 5:break;default:throw Error(n(329))}if((l&62914560)===l&&(A=Hl+300-Y(),10<A)){if(k(_,l,Wn,!Sn),je(_,0,!0)!==0)break e;$r=l,_.timeoutHandle=AM(w.bind(null,_,m,bs,yf,Qs,l,Wn,Vl,Lr,Sn,D,"Throttled",-0,0),A);break e}w(_,m,bs,yf,Qs,l,Wn,Vl,Lr,Sn,D,null,-0,0)}}break}while(!0);Dc(r)}function w(r,l,m,_,A,D,X,se,Me,We,ft,_t,Je,ot){if(r.timeoutHandle=-1,_t=l.subtreeFlags,_t&8192||(_t&16785408)===16785408){_t={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xi},la(l,D,_t);var Kt=(D&62914560)===D?Hl-Y():(D&4194048)===D?vf-Y():0;if(Kt=l4(_t,Kt),Kt!==null){$r=D,r.cancelPendingCommit=Kt(pn.bind(null,r,l,D,m,_,A,X,se,Me,ft,_t,null,Je,ot)),k(r,D,X,!We);return}}pn(r,l,D,m,_,A,X,se,Me)}function U(r){for(var l=r;;){var m=l.tag;if((m===0||m===11||m===15)&&l.flags&16384&&(m=l.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var _=0;_<m.length;_++){var A=m[_],D=A.getSnapshot;A=A.value;try{if(!hi(D(),A))return!1}catch{return!1}}if(m=l.child,l.subtreeFlags&16384&&m!==null)m.return=l,l=m;else{if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function k(r,l,m,_){l&=~Uo,l&=~Vl,r.suspendedLanes|=l,r.pingedLanes&=~l,_&&(r.warmLanes|=l),_=r.expirationTimes;for(var A=l;0<A;){var D=31-ge(A),X=1<<D;_[D]=-1,A&=~X}m!==0&&Ai(r,m,l)}function le(){return(jn&6)===0?(ng(0),!1):!0}function Te(){if(Dn!==null){if(sn===0)var r=Dn.return;else r=Dn,qa=Wr=null,Om(r),yc=null,_c=0,r=Dn;for(;r!==null;)hu(r.alternate,r),r=r.return;Dn=null}}function ze(r,l){var m=r.timeoutHandle;m!==-1&&(r.timeoutHandle=-1,jO(m)),m=r.cancelPendingCommit,m!==null&&(r.cancelPendingCommit=null,m()),$r=0,Te(),pi=r,Dn=m=yr(r.current,null),kn=l,sn=0,Pn=null,Sn=!1,Nn=mt(r,l),Ti=!1,Lr=Wn=Uo=Vl=Dr=mi=0,bs=Io=null,Qs=!1,(l&8)!==0&&(l|=l&32);var _=r.entangledLanes;if(_!==0)for(r=r.entanglements,_&=l;0<_;){var A=31-ge(_),D=1<<A;l|=r[A],_&=~D}return ca=l,Mo(),m}function pt(r,l){dn=null,q.H=ph,l===vc||l===Do?(l=wd(),sn=3):l===ah?(l=wd(),sn=4):sn=l===jd?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Pn=l,Dn===null&&(mi=1,Gd(r,v(l,r.current)))}function wt(){var r=Ua.current;return r===null?!0:(kn&4194048)===kn?Xr===null:(kn&62914560)===kn||(kn&536870912)!==0?r===Xr:!1}function Bt(){var r=q.H;return q.H=ph,r===null?ph:r}function Gt(){var r=q.A;return q.A=Qd,r}function _n(){mi=4,Sn||(kn&4194048)!==kn&&Ua.current!==null||(Nn=!0),(Dr&134217727)===0&&(Vl&134217727)===0||pi===null||k(pi,kn,Wn,!1)}function Js(r,l,m){var _=jn;jn|=2;var A=Bt(),D=Gt();(pi!==r||kn!==l)&&(yf=null,ze(r,l)),l=!1;var X=mi;e:do try{if(sn!==0&&Dn!==null){var se=Dn,Me=Pn;switch(sn){case 8:Te(),X=6;break e;case 3:case 2:case 9:case 6:Ua.current===null&&(l=!0);var We=sn;if(sn=0,Pn=null,Mt(r,se,Me,We),m&&Nn){X=0;break e}break;default:We=sn,sn=0,Pn=null,Mt(r,se,Me,We)}}wh(),X=mi;break}catch(ft){pt(r,ft)}while(!0);return l&&r.shellSuspendCounter++,qa=Wr=null,jn=_,q.H=A,q.A=D,Dn===null&&(pi=null,kn=0,Mo()),X}function wh(){for(;Dn!==null;)Ie(Dn)}function _u(r,l){var m=jn;jn|=2;var _=Bt(),A=Gt();pi!==r||kn!==l?(yf=null,Or=Y()+500,ze(r,l)):Nn=mt(r,l);e:do try{if(sn!==0&&Dn!==null){l=Dn;var D=Pn;t:switch(sn){case 1:sn=0,Pn=null,Mt(r,l,D,1);break;case 2:case 9:if(q0(D)){sn=0,Pn=null,at(l);break}l=function(){sn!==2&&sn!==9||pi!==r||(sn=7),Dc(r)},D.then(l,l);break e;case 3:sn=7;break e;case 4:sn=5;break e;case 7:q0(D)?(sn=0,Pn=null,at(l)):(sn=0,Pn=null,Mt(r,l,D,7));break;case 5:var X=null;switch(Dn.tag){case 26:X=Dn.memoizedState;case 5:case 27:var se=Dn;if(X?kM(X):se.stateNode.complete){sn=0,Pn=null;var Me=se.sibling;if(Me!==null)Dn=Me;else{var We=se.return;We!==null?(Dn=We,tn(We)):Dn=null}break t}}sn=0,Pn=null,Mt(r,l,D,5);break;case 6:sn=0,Pn=null,Mt(r,l,D,6);break;case 8:Te(),mi=6;break e;default:throw Error(n(462))}}Ke();break}catch(ft){pt(r,ft)}while(!0);return qa=Wr=null,q.H=_,q.A=A,jn=m,Dn!==null?0:(pi=null,kn=0,Mo(),mi)}function Ke(){for(;Dn!==null&&!tt();)Ie(Dn)}function Ie(r){var l=Wd(r.alternate,r,ca);r.memoizedProps=r.pendingProps,l===null?tn(r):Dn=l}function at(r){var l=r,m=l.alternate;switch(l.tag){case 15:case 0:l=_s(m,l,l.pendingProps,l.type,void 0,kn);break;case 11:l=_s(m,l,l.pendingProps,l.type.render,l.ref,kn);break;case 5:Om(l);default:hu(m,l),l=Dn=Na(l,ca),l=Wd(m,l,ca)}r.memoizedProps=r.pendingProps,l===null?tn(r):Dn=l}function Mt(r,l,m,_){qa=Wr=null,Om(l),yc=null,_c=0;var A=l.return;try{if(Tr(r,A,l,m,kn)){mi=1,Gd(r,v(m,r.current)),Dn=null;return}}catch(D){if(A!==null)throw Dn=A,D;mi=1,Gd(r,v(m,r.current)),Dn=null;return}l.flags&32768?(zn||_===1?r=!0:Nn||(kn&536870912)!==0?r=!1:(Sn=r=!0,(_===2||_===9||_===3||_===6)&&(_=Ua.current,_!==null&&_.tag===13&&(_.flags|=16384))),Ni(l,r)):tn(l)}function tn(r){var l=r;do{if((l.flags&32768)!==0){Ni(l,Sn);return}r=l.return;var m=$m(l.alternate,l,ca);if(m!==null){Dn=m;return}if(l=l.sibling,l!==null){Dn=l;return}Dn=l=r}while(l!==null);mi===0&&(mi=5)}function Ni(r,l){do{var m=qd(r.alternate,r);if(m!==null){m.flags&=32767,Dn=m;return}if(m=r.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!l&&(r=r.sibling,r!==null)){Dn=r;return}Dn=r=m}while(r!==null);mi=6,Dn=null}function pn(r,l,m,_,A,D,X,se,Me){r.cancelPendingCommit=null;do ep();while(Wi!==0);if((jn&6)!==0)throw Error(n(327));if(l!==null){if(l===r.current)throw Error(n(177));if(D=l.lanes|l.childLanes,D|=Jc,Bn(r,m,D,X,se,Me),r===pi&&(Dn=pi=null,kn=0),Nr=l,Po=r,$r=m,Gl=D,gu=A,$d=_,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,LO(Ce,function(){return lM(),null})):(r.callbackNode=null,r.callbackPriority=0),_=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||_){_=q.T,q.T=null,A=K.p,K.p=2,X=jn,jn|=4;try{mf(r,l,m)}finally{jn=X,K.p=A,q.T=_}}Wi=1,ni(),Pa(),ii()}}function ni(){if(Wi===1){Wi=0;var r=Po,l=Nr,m=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||m){m=q.T,q.T=null;var _=K.p;K.p=2;var A=jn;jn|=4;try{Cc(l,r);var D=Mx,X=wl(r.containerInfo),se=D.focusedElem,Me=D.selectionRange;if(X!==se&&se&&se.ownerDocument&&lc(se.ownerDocument.documentElement,se)){if(Me!==null&&gr(se)){var We=Me.start,ft=Me.end;if(ft===void 0&&(ft=We),"selectionStart"in se)se.selectionStart=We,se.selectionEnd=Math.min(ft,se.value.length);else{var _t=se.ownerDocument||document,Je=_t&&_t.defaultView||window;if(Je.getSelection){var ot=Je.getSelection(),Kt=se.textContent.length,hn=Math.min(Me.start,Kt),Ii=Me.end===void 0?hn:Math.min(Me.end,Kt);!ot.extend&&hn>Ii&&(X=Ii,Ii=hn,hn=X);var Pe=oc(se,hn),Ee=oc(se,Ii);if(Pe&&Ee&&(ot.rangeCount!==1||ot.anchorNode!==Pe.node||ot.anchorOffset!==Pe.offset||ot.focusNode!==Ee.node||ot.focusOffset!==Ee.offset)){var He=_t.createRange();He.setStart(Pe.node,Pe.offset),ot.removeAllRanges(),hn>Ii?(ot.addRange(He),ot.extend(Ee.node,Ee.offset)):(He.setEnd(Ee.node,Ee.offset),ot.addRange(He))}}}}for(_t=[],ot=se;ot=ot.parentNode;)ot.nodeType===1&&_t.push({element:ot,left:ot.scrollLeft,top:ot.scrollTop});for(typeof se.focus=="function"&&se.focus(),se=0;se<_t.length;se++){var gt=_t[se];gt.element.scrollLeft=gt.left,gt.element.scrollTop=gt.top}}Nv=!!Tx,Mx=Tx=null}finally{jn=A,K.p=_,q.T=m}}r.current=l,Wi=2}}function Pa(){if(Wi===2){Wi=0;var r=Po,l=Nr,m=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||m){m=q.T,q.T=null;var _=K.p;K.p=2;var A=jn;jn|=4;try{_v(r,l.alternate,l)}finally{jn=A,K.p=_,q.T=m}}Wi=3}}function ii(){if(Wi===4||Wi===3){Wi=0,$();var r=Po,l=Nr,m=$r,_=$d;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Wi=5:(Wi=0,Nr=Po=null,jl(r,r.pendingLanes));var A=r.pendingLanes;if(A===0&&(al=null),kt(m),l=l.stateNode,Qe&&typeof Qe.onCommitFiberRoot=="function")try{Qe.onCommitFiberRoot(Ge,l,void 0,(l.current.flags&128)===128)}catch{}if(_!==null){l=q.T,A=K.p,K.p=2,q.T=null;try{for(var D=r.onRecoverableError,X=0;X<_.length;X++){var se=_[X];D(se.value,{componentStack:se.stack})}}finally{q.T=l,K.p=A}}($r&3)!==0&&ep(),Dc(r),A=r.pendingLanes,(m&261930)!==0&&(A&42)!==0?r===yu?vu++:(vu=0,yu=r):vu=0,ng(0)}}function jl(r,l){(r.pooledCacheLanes&=l)===0&&(l=r.pooledCache,l!=null&&(r.pooledCache=null,ns(l)))}function ep(){return ni(),Pa(),ii(),lM()}function lM(){if(Wi!==5)return!1;var r=Po,l=Gl;Gl=0;var m=kt($r),_=q.T,A=K.p;try{K.p=32>m?32:m,q.T=null,m=gu,gu=null;var D=Po,X=$r;if(Wi=0,Nr=Po=null,$r=0,(jn&6)!==0)throw Error(n(331));var se=jn;if(jn|=4,mu(D.current),ji(D,D.current,X,m),jn=se,ng(0,!1),Qe&&typeof Qe.onPostCommitFiberRoot=="function")try{Qe.onPostCommitFiberRoot(Ge,D)}catch{}return!0}finally{K.p=A,q.T=_,jl(r,l)}}function cM(r,l,m){l=v(m,l),l=Jm(r.stateNode,l,2),r=Nl(r,l,2),r!==null&&(bn(r,2),Dc(r))}function Ci(r,l,m){if(r.tag===3)cM(r,r,m);else for(;l!==null;){if(l.tag===3){cM(l,r,m);break}else if(l.tag===1){var _=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(al===null||!al.has(_))){r=v(m,r),m=uf(2),_=Nl(l,m,2),_!==null&&(Xs(m,_,l,r),bn(_,2),Dc(_));break}}l=l.return}}function dx(r,l,m){var _=r.pingCache;if(_===null){_=r.pingCache=new Jd;var A=new Set;_.set(l,A)}else A=_.get(l),A===void 0&&(A=new Set,_.set(l,A));A.has(m)||(Ti=!0,A.add(m),r=CO.bind(null,r,l,m),l.then(r,r))}function CO(r,l,m){var _=r.pingCache;_!==null&&_.delete(l),r.pingedLanes|=r.suspendedLanes&m,r.warmLanes&=~m,pi===r&&(kn&m)===m&&(mi===4||mi===3&&(kn&62914560)===kn&&300>Y()-Hl?(jn&2)===0&&ze(r,0):Uo|=m,Lr===kn&&(Lr=0)),Dc(r)}function uM(r,l){l===0&&(l=Lt()),r=vr(r,l),r!==null&&(bn(r,l),Dc(r))}function RO(r){var l=r.memoizedState,m=0;l!==null&&(m=l.retryLane),uM(r,m)}function DO(r,l){var m=0;switch(r.tag){case 31:case 13:var _=r.stateNode,A=r.memoizedState;A!==null&&(m=A.retryLane);break;case 19:_=r.stateNode;break;case 22:_=r.stateNode._retryCache;break;default:throw Error(n(314))}_!==null&&_.delete(l),uM(r,m)}function LO(r,l){return Ze(r,l)}var bv=null,tp=null,px=!1,Tv=!1,mx=!1,_f=0;function Dc(r){r!==tp&&r.next===null&&(tp===null?bv=tp=r:tp=tp.next=r),Tv=!0,px||(px=!0,NO())}function ng(r,l){if(!mx&&Tv){mx=!0;do for(var m=!1,_=bv;_!==null;){if(r!==0){var A=_.pendingLanes;if(A===0)var D=0;else{var X=_.suspendedLanes,se=_.pingedLanes;D=(1<<31-ge(42|r)+1)-1,D&=A&~(X&~se),D=D&201326741?D&201326741|1:D?D|2:0}D!==0&&(m=!0,pM(_,D))}else D=kn,D=je(_,_===pi?D:0,_.cancelPendingCommit!==null||_.timeoutHandle!==-1),(D&3)===0||mt(_,D)||(m=!0,pM(_,D));_=_.next}while(m);mx=!1}}function OO(){fM()}function fM(){Tv=px=!1;var r=0;_f!==0&&GO()&&(r=_f);for(var l=Y(),m=null,_=bv;_!==null;){var A=_.next,D=hM(_,l);D===0?(_.next=null,m===null?bv=A:m.next=A,A===null&&(tp=m)):(m=_,(r!==0||(D&3)!==0)&&(Tv=!0)),_=A}Wi!==0&&Wi!==5||ng(r),_f!==0&&(_f=0)}function hM(r,l){for(var m=r.suspendedLanes,_=r.pingedLanes,A=r.expirationTimes,D=r.pendingLanes&-62914561;0<D;){var X=31-ge(D),se=1<<X,Me=A[X];Me===-1?((se&m)===0||(se&_)!==0)&&(A[X]=Rt(se,l)):Me<=l&&(r.expiredLanes|=se),D&=~se}if(l=pi,m=kn,m=je(r,r===l?m:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),_=r.callbackNode,m===0||r===l&&(sn===2||sn===9)||r.cancelPendingCommit!==null)return _!==null&&_!==null&&Le(_),r.callbackNode=null,r.callbackPriority=0;if((m&3)===0||mt(r,m)){if(l=m&-m,l===r.callbackPriority)return l;switch(_!==null&&Le(_),kt(m)){case 2:case 8:m=De;break;case 32:m=Ce;break;case 268435456:m=ht;break;default:m=Ce}return _=dM.bind(null,r),m=Ze(m,_),r.callbackPriority=l,r.callbackNode=m,l}return _!==null&&_!==null&&Le(_),r.callbackPriority=2,r.callbackNode=null,2}function dM(r,l){if(Wi!==0&&Wi!==5)return r.callbackNode=null,r.callbackPriority=0,null;var m=r.callbackNode;if(ep()&&r.callbackNode!==m)return null;var _=kn;return _=je(r,r===pi?_:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),_===0?null:(S(r,_,l),hM(r,Y()),r.callbackNode!=null&&r.callbackNode===m?dM.bind(null,r):null)}function pM(r,l){if(ep())return null;S(r,l,!0)}function NO(){WO(function(){(jn&6)!==0?Ze(Be,OO):fM()})}function gx(){if(_f===0){var r=Ol;r===0&&(r=it,it<<=1,(it&261888)===0&&(it=256)),_f=r}return _f}function mM(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:hs(""+r)}function gM(r,l){var m=l.ownerDocument.createElement("input");return m.name=l.name,m.value=l.value,r.id&&m.setAttribute("form",r.id),l.parentNode.insertBefore(m,l),r=new FormData(r),m.parentNode.removeChild(m),r}function UO(r,l,m,_,A){if(l==="submit"&&m&&m.stateNode===A){var D=mM((A[Li]||null).action),X=_.submitter;X&&(l=(l=X[Li]||null)?mM(l.formAction):X.getAttribute("formAction"),l!==null&&(D=l,X=null));var se=new po("action","action",null,_,A);r.push({event:se,listeners:[{instance:null,listener:function(){if(_.defaultPrevented){if(_f!==0){var Me=X?gM(A,X):new FormData(A);Xm(m,{pending:!0,data:Me,method:A.method,action:D},null,Me)}}else typeof D=="function"&&(se.preventDefault(),Me=X?gM(A,X):new FormData(A),Xm(m,{pending:!0,data:Me,method:A.method,action:D},D,Me))},currentTarget:A}]})}}for(var vx=0;vx<bo.length;vx++){var yx=bo[vx],IO=yx.toLowerCase(),PO=yx[0].toUpperCase()+yx.slice(1);Oa(IO,"on"+PO)}Oa(La,"onAnimationEnd"),Oa($f,"onAnimationIteration"),Oa(Us,"onAnimationStart"),Oa("dblclick","onDoubleClick"),Oa("focusin","onFocus"),Oa("focusout","onBlur"),Oa(hc,"onTransitionRun"),Oa(xo,"onTransitionStart"),Oa(eh,"onTransitionCancel"),Oa(Xo,"onTransitionEnd"),Ue("onMouseEnter",["mouseout","mouseover"]),Ue("onMouseLeave",["mouseout","mouseover"]),Ue("onPointerEnter",["pointerout","pointerover"]),Ue("onPointerLeave",["pointerout","pointerover"]),ke("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ke("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ke("onBeforeInput",["compositionend","keypress","textInput","paste"]),ke("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ke("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ke("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ig="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zO=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ig));function vM(r,l){l=(l&4)!==0;for(var m=0;m<r.length;m++){var _=r[m],A=_.event;_=_.listeners;e:{var D=void 0;if(l)for(var X=_.length-1;0<=X;X--){var se=_[X],Me=se.instance,We=se.currentTarget;if(se=se.listener,Me!==D&&A.isPropagationStopped())break e;D=se,A.currentTarget=We;try{D(A)}catch(ft){To(ft)}A.currentTarget=null,D=Me}else for(X=0;X<_.length;X++){if(se=_[X],Me=se.instance,We=se.currentTarget,se=se.listener,Me!==D&&A.isPropagationStopped())break e;D=se,A.currentTarget=We;try{D(A)}catch(ft){To(ft)}A.currentTarget=null,D=Me}}}}function Vn(r,l){var m=l[fs];m===void 0&&(m=l[fs]=new Set);var _=r+"__bubble";m.has(_)||(yM(l,r,2,!1),m.add(_))}function _x(r,l,m){var _=0;l&&(_|=4),yM(m,r,_,l)}var Mv="_reactListening"+Math.random().toString(36).slice(2);function xx(r){if(!r[Mv]){r[Mv]=!0,Re.forEach(function(m){m!=="selectionchange"&&(zO.has(m)||_x(m,!1,r),_x(m,!0,r))});var l=r.nodeType===9?r:r.ownerDocument;l===null||l[Mv]||(l[Mv]=!0,_x("selectionchange",!1,l))}}function yM(r,l,m,_){switch(XM(l)){case 2:var A=f4;break;case 8:A=h4;break;default:A=Ix}m=A.bind(null,l,m,r),A=void 0,!_a||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(A=!0),_?A!==void 0?r.addEventListener(l,m,{capture:!0,passive:A}):r.addEventListener(l,m,!0):A!==void 0?r.addEventListener(l,m,{passive:A}):r.addEventListener(l,m,!1)}function Sx(r,l,m,_,A){var D=_;if((l&1)===0&&(l&2)===0&&_!==null)e:for(;;){if(_===null)return;var X=_.tag;if(X===3||X===4){var se=_.stateNode.containerInfo;if(se===A)break;if(X===4)for(X=_.return;X!==null;){var Me=X.tag;if((Me===3||Me===4)&&X.stateNode.containerInfo===A)return;X=X.return}for(;se!==null;){if(X=yi(se),X===null)return;if(Me=X.tag,Me===5||Me===6||Me===26||Me===27){_=D=X;continue e}se=se.parentNode}}_=_.return}fo(function(){var We=D,ft=uo(m),_t=[];e:{var Je=So.get(r);if(Je!==void 0){var ot=po,Kt=r;switch(r){case"keypress":if(dr(m)===0)break e;case"keydown":case"keyup":ot=Xu;break;case"focusin":Kt="focus",ot=ac;break;case"focusout":Kt="blur",ot=ac;break;case"beforeblur":case"afterblur":ot=ac;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ot=Vu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ot=vl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ot=go;break;case La:case $f:case Us:ot=Va;break;case Xo:ot=Sd;break;case"scroll":case"scrollend":ot=yn;break;case"wheel":ot=ps;break;case"copy":case"cut":case"paste":ot=Hi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ot=Yu;break;case"toggle":case"beforetoggle":ot=yl}var hn=(l&4)!==0,Ii=!hn&&(r==="scroll"||r==="scrollend"),Pe=hn?Je!==null?Je+"Capture":null:Je;hn=[];for(var Ee=We,He;Ee!==null;){var gt=Ee;if(He=gt.stateNode,gt=gt.tag,gt!==5&&gt!==26&&gt!==27||He===null||Pe===null||(gt=Cs(Ee,Pe),gt!=null&&hn.push(ag(Ee,gt,He))),Ii)break;Ee=Ee.return}0<hn.length&&(Je=new ot(Je,Kt,null,m,ft),_t.push({event:Je,listeners:hn}))}}if((l&7)===0){e:{if(Je=r==="mouseover"||r==="pointerover",ot=r==="mouseout"||r==="pointerout",Je&&m!==Gs&&(Kt=m.relatedTarget||m.fromElement)&&(yi(Kt)||Kt[ga]))break e;if((ot||Je)&&(Je=ft.window===ft?ft:(Je=ft.ownerDocument)?Je.defaultView||Je.parentWindow:window,ot?(Kt=m.relatedTarget||m.toElement,ot=We,Kt=Kt?yi(Kt):null,Kt!==null&&(Ii=s(Kt),hn=Kt.tag,Kt!==Ii||hn!==5&&hn!==27&&hn!==6)&&(Kt=null)):(ot=null,Kt=We),ot!==Kt)){if(hn=Vu,gt="onMouseLeave",Pe="onMouseEnter",Ee="mouse",(r==="pointerout"||r==="pointerover")&&(hn=Yu,gt="onPointerLeave",Pe="onPointerEnter",Ee="pointer"),Ii=ot==null?Je:va(ot),He=Kt==null?Je:va(Kt),Je=new hn(gt,Ee+"leave",ot,m,ft),Je.target=Ii,Je.relatedTarget=He,gt=null,yi(ft)===We&&(hn=new hn(Pe,Ee+"enter",Kt,m,ft),hn.target=He,hn.relatedTarget=Ii,gt=hn),Ii=gt,ot&&Kt)t:{for(hn=BO,Pe=ot,Ee=Kt,He=0,gt=Pe;gt;gt=hn(gt))He++;gt=0;for(var ln=Ee;ln;ln=hn(ln))gt++;for(;0<He-gt;)Pe=hn(Pe),He--;for(;0<gt-He;)Ee=hn(Ee),gt--;for(;He--;){if(Pe===Ee||Ee!==null&&Pe===Ee.alternate){hn=Pe;break t}Pe=hn(Pe),Ee=hn(Ee)}hn=null}else hn=null;ot!==null&&_M(_t,Je,ot,hn,!1),Kt!==null&&Ii!==null&&_M(_t,Ii,Kt,hn,!0)}}e:{if(Je=We?va(We):window,ot=Je.nodeName&&Je.nodeName.toLowerCase(),ot==="select"||ot==="input"&&Je.type==="file")var gi=rc;else if(pr(Je))if(Yc)gi=Td;else{gi=Wo;var en=Ns}else ot=Je.nodeName,!ot||ot.toLowerCase()!=="input"||Je.type!=="checkbox"&&Je.type!=="radio"?We&&ki(We.elementType)&&(gi=rc):gi=Al;if(gi&&(gi=gi(r,We))){Ju(_t,gi,m,ft);break e}en&&en(r,Je,We),r==="focusout"&&We&&Je.type==="number"&&We.memoizedProps.value!=null&&ai(Je,"number",Je.value)}switch(en=We?va(We):window,r){case"focusin":(pr(en)||en.contentEditable==="true")&&(qo=en,Qc=We,cc=null);break;case"focusout":cc=Qc=qo=null;break;case"mousedown":Ha=!0;break;case"contextmenu":case"mouseup":case"dragend":Ha=!1,ef(_t,m,ft);break;case"selectionchange":if(Kc)break;case"keydown":case"keyup":ef(_t,m,ft)}var Un;if(Go)e:{switch(r){case"compositionstart":var qn="onCompositionStart";break e;case"compositionend":qn="onCompositionEnd";break e;case"compositionupdate":qn="onCompositionUpdate";break e}qn=void 0}else jo?Qu(r,m)&&(qn="onCompositionEnd"):r==="keydown"&&m.keyCode===229&&(qn="onCompositionStart");qn&&(aa&&m.locale!=="ko"&&(jo||qn!=="onCompositionStart"?qn==="onCompositionEnd"&&jo&&(Un=Ds()):(Rs=ft,hr="value"in Rs?Rs.value:Rs.textContent,jo=!0)),en=Av(We,qn),0<en.length&&(qn=new Hu(qn,r,null,m,ft),_t.push({event:qn,listeners:en}),Un?qn.data=Un:(Un=Sl(m),Un!==null&&(qn.data=Un)))),(Un=_l?gs(r,m):bl(r,m))&&(qn=Av(We,"onBeforeInput"),0<qn.length&&(en=new Hu("onBeforeInput","beforeinput",null,m,ft),_t.push({event:en,listeners:qn}),en.data=Un)),UO(_t,r,We,m,ft)}vM(_t,l)})}function ag(r,l,m){return{instance:r,listener:l,currentTarget:m}}function Av(r,l){for(var m=l+"Capture",_=[];r!==null;){var A=r,D=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||D===null||(A=Cs(r,m),A!=null&&_.unshift(ag(r,A,D)),A=Cs(r,l),A!=null&&_.push(ag(r,A,D))),r.tag===3)return _;r=r.return}return[]}function BO(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function _M(r,l,m,_,A){for(var D=l._reactName,X=[];m!==null&&m!==_;){var se=m,Me=se.alternate,We=se.stateNode;if(se=se.tag,Me!==null&&Me===_)break;se!==5&&se!==26&&se!==27||We===null||(Me=We,A?(We=Cs(m,D),We!=null&&X.unshift(ag(m,We,Me))):A||(We=Cs(m,D),We!=null&&X.push(ag(m,We,Me)))),m=m.return}X.length!==0&&r.push({event:l,listeners:X})}var FO=/\r\n?/g,kO=/\u0000|\uFFFD/g;function xM(r){return(typeof r=="string"?r:""+r).replace(FO,`
`).replace(kO,"")}function SM(r,l){return l=xM(l),xM(r)===l}function Ui(r,l,m,_,A,D){switch(m){case"children":typeof _=="string"?l==="body"||l==="textarea"&&_===""||ci(r,_):(typeof _=="number"||typeof _=="bigint")&&l!=="body"&&ci(r,""+_);break;case"className":Ot(r,"class",_);break;case"tabIndex":Ot(r,"tabindex",_);break;case"dir":case"role":case"viewBox":case"width":case"height":Ot(r,m,_);break;case"style":Es(r,_,D);break;case"data":if(l!=="object"){Ot(r,"data",_);break}case"src":case"href":if(_===""&&(l!=="a"||m!=="href")){r.removeAttribute(m);break}if(_==null||typeof _=="function"||typeof _=="symbol"||typeof _=="boolean"){r.removeAttribute(m);break}_=hs(""+_),r.setAttribute(m,_);break;case"action":case"formAction":if(typeof _=="function"){r.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof D=="function"&&(m==="formAction"?(l!=="input"&&Ui(r,l,"name",A.name,A,null),Ui(r,l,"formEncType",A.formEncType,A,null),Ui(r,l,"formMethod",A.formMethod,A,null),Ui(r,l,"formTarget",A.formTarget,A,null)):(Ui(r,l,"encType",A.encType,A,null),Ui(r,l,"method",A.method,A,null),Ui(r,l,"target",A.target,A,null)));if(_==null||typeof _=="symbol"||typeof _=="boolean"){r.removeAttribute(m);break}_=hs(""+_),r.setAttribute(m,_);break;case"onClick":_!=null&&(r.onclick=Xi);break;case"onScroll":_!=null&&Vn("scroll",r);break;case"onScrollEnd":_!=null&&Vn("scrollend",r);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(n(61));if(m=_.__html,m!=null){if(A.children!=null)throw Error(n(60));r.innerHTML=m}}break;case"multiple":r.multiple=_&&typeof _!="function"&&typeof _!="symbol";break;case"muted":r.muted=_&&typeof _!="function"&&typeof _!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(_==null||typeof _=="function"||typeof _=="boolean"||typeof _=="symbol"){r.removeAttribute("xlink:href");break}m=hs(""+_),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":_!=null&&typeof _!="function"&&typeof _!="symbol"?r.setAttribute(m,""+_):r.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":_&&typeof _!="function"&&typeof _!="symbol"?r.setAttribute(m,""):r.removeAttribute(m);break;case"capture":case"download":_===!0?r.setAttribute(m,""):_!==!1&&_!=null&&typeof _!="function"&&typeof _!="symbol"?r.setAttribute(m,_):r.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":_!=null&&typeof _!="function"&&typeof _!="symbol"&&!isNaN(_)&&1<=_?r.setAttribute(m,_):r.removeAttribute(m);break;case"rowSpan":case"start":_==null||typeof _=="function"||typeof _=="symbol"||isNaN(_)?r.removeAttribute(m):r.setAttribute(m,_);break;case"popover":Vn("beforetoggle",r),Vn("toggle",r),Tt(r,"popover",_);break;case"xlinkActuate":Vt(r,"http://www.w3.org/1999/xlink","xlink:actuate",_);break;case"xlinkArcrole":Vt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",_);break;case"xlinkRole":Vt(r,"http://www.w3.org/1999/xlink","xlink:role",_);break;case"xlinkShow":Vt(r,"http://www.w3.org/1999/xlink","xlink:show",_);break;case"xlinkTitle":Vt(r,"http://www.w3.org/1999/xlink","xlink:title",_);break;case"xlinkType":Vt(r,"http://www.w3.org/1999/xlink","xlink:type",_);break;case"xmlBase":Vt(r,"http://www.w3.org/XML/1998/namespace","xml:base",_);break;case"xmlLang":Vt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",_);break;case"xmlSpace":Vt(r,"http://www.w3.org/XML/1998/namespace","xml:space",_);break;case"is":Tt(r,"is",_);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=Ho.get(m)||m,Tt(r,m,_))}}function bx(r,l,m,_,A,D){switch(m){case"style":Es(r,_,D);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(n(61));if(m=_.__html,m!=null){if(A.children!=null)throw Error(n(60));r.innerHTML=m}}break;case"children":typeof _=="string"?ci(r,_):(typeof _=="number"||typeof _=="bigint")&&ci(r,""+_);break;case"onScroll":_!=null&&Vn("scroll",r);break;case"onScrollEnd":_!=null&&Vn("scrollend",r);break;case"onClick":_!=null&&(r.onclick=Xi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xe.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(A=m.endsWith("Capture"),l=m.slice(2,A?m.length-7:void 0),D=r[Li]||null,D=D!=null?D[m]:null,typeof D=="function"&&r.removeEventListener(l,D,A),typeof _=="function")){typeof D!="function"&&D!==null&&(m in r?r[m]=null:r.hasAttribute(m)&&r.removeAttribute(m)),r.addEventListener(l,_,A);break e}m in r?r[m]=_:_===!0?r.setAttribute(m,""):Tt(r,m,_)}}}function Fs(r,l,m){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Vn("error",r),Vn("load",r);var _=!1,A=!1,D;for(D in m)if(m.hasOwnProperty(D)){var X=m[D];if(X!=null)switch(D){case"src":_=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:Ui(r,l,D,X,m,null)}}A&&Ui(r,l,"srcSet",m.srcSet,m,null),_&&Ui(r,l,"src",m.src,m,null);return;case"input":Vn("invalid",r);var se=D=X=A=null,Me=null,We=null;for(_ in m)if(m.hasOwnProperty(_)){var ft=m[_];if(ft!=null)switch(_){case"name":A=ft;break;case"type":X=ft;break;case"checked":Me=ft;break;case"defaultChecked":We=ft;break;case"value":D=ft;break;case"defaultValue":se=ft;break;case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(n(137,l));break;default:Ui(r,l,_,ft,m,null)}}ya(r,D,se,Me,We,X,A,!1);return;case"select":Vn("invalid",r),_=X=D=null;for(A in m)if(m.hasOwnProperty(A)&&(se=m[A],se!=null))switch(A){case"value":D=se;break;case"defaultValue":X=se;break;case"multiple":_=se;default:Ui(r,l,A,se,m,null)}l=D,m=X,r.multiple=!!_,l!=null?Fn(r,!!_,l,!1):m!=null&&Fn(r,!!_,m,!0);return;case"textarea":Vn("invalid",r),D=A=_=null;for(X in m)if(m.hasOwnProperty(X)&&(se=m[X],se!=null))switch(X){case"value":_=se;break;case"defaultValue":A=se;break;case"children":D=se;break;case"dangerouslySetInnerHTML":if(se!=null)throw Error(n(91));break;default:Ui(r,l,X,se,m,null)}Qn(r,_,A,D);return;case"option":for(Me in m)m.hasOwnProperty(Me)&&(_=m[Me],_!=null)&&(Me==="selected"?r.selected=_&&typeof _!="function"&&typeof _!="symbol":Ui(r,l,Me,_,m,null));return;case"dialog":Vn("beforetoggle",r),Vn("toggle",r),Vn("cancel",r),Vn("close",r);break;case"iframe":case"object":Vn("load",r);break;case"video":case"audio":for(_=0;_<ig.length;_++)Vn(ig[_],r);break;case"image":Vn("error",r),Vn("load",r);break;case"details":Vn("toggle",r);break;case"embed":case"source":case"link":Vn("error",r),Vn("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(We in m)if(m.hasOwnProperty(We)&&(_=m[We],_!=null))switch(We){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:Ui(r,l,We,_,m,null)}return;default:if(ki(l)){for(ft in m)m.hasOwnProperty(ft)&&(_=m[ft],_!==void 0&&bx(r,l,ft,_,m,void 0));return}}for(se in m)m.hasOwnProperty(se)&&(_=m[se],_!=null&&Ui(r,l,se,_,m,null))}function VO(r,l,m,_){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,D=null,X=null,se=null,Me=null,We=null,ft=null;for(ot in m){var _t=m[ot];if(m.hasOwnProperty(ot)&&_t!=null)switch(ot){case"checked":break;case"value":break;case"defaultValue":Me=_t;default:_.hasOwnProperty(ot)||Ui(r,l,ot,null,_,_t)}}for(var Je in _){var ot=_[Je];if(_t=m[Je],_.hasOwnProperty(Je)&&(ot!=null||_t!=null))switch(Je){case"type":D=ot;break;case"name":A=ot;break;case"checked":We=ot;break;case"defaultChecked":ft=ot;break;case"value":X=ot;break;case"defaultValue":se=ot;break;case"children":case"dangerouslySetInnerHTML":if(ot!=null)throw Error(n(137,l));break;default:ot!==_t&&Ui(r,l,Je,ot,_,_t)}}qi(r,X,se,Me,We,ft,D,A);return;case"select":ot=X=se=Je=null;for(D in m)if(Me=m[D],m.hasOwnProperty(D)&&Me!=null)switch(D){case"value":break;case"multiple":ot=Me;default:_.hasOwnProperty(D)||Ui(r,l,D,null,_,Me)}for(A in _)if(D=_[A],Me=m[A],_.hasOwnProperty(A)&&(D!=null||Me!=null))switch(A){case"value":Je=D;break;case"defaultValue":se=D;break;case"multiple":X=D;default:D!==Me&&Ui(r,l,A,D,_,Me)}l=se,m=X,_=ot,Je!=null?Fn(r,!!m,Je,!1):!!_!=!!m&&(l!=null?Fn(r,!!m,l,!0):Fn(r,!!m,m?[]:"",!1));return;case"textarea":ot=Je=null;for(se in m)if(A=m[se],m.hasOwnProperty(se)&&A!=null&&!_.hasOwnProperty(se))switch(se){case"value":break;case"children":break;default:Ui(r,l,se,null,_,A)}for(X in _)if(A=_[X],D=m[X],_.hasOwnProperty(X)&&(A!=null||D!=null))switch(X){case"value":Je=A;break;case"defaultValue":ot=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(n(91));break;default:A!==D&&Ui(r,l,X,A,_,D)}Tn(r,Je,ot);return;case"option":for(var Kt in m)Je=m[Kt],m.hasOwnProperty(Kt)&&Je!=null&&!_.hasOwnProperty(Kt)&&(Kt==="selected"?r.selected=!1:Ui(r,l,Kt,null,_,Je));for(Me in _)Je=_[Me],ot=m[Me],_.hasOwnProperty(Me)&&Je!==ot&&(Je!=null||ot!=null)&&(Me==="selected"?r.selected=Je&&typeof Je!="function"&&typeof Je!="symbol":Ui(r,l,Me,Je,_,ot));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var hn in m)Je=m[hn],m.hasOwnProperty(hn)&&Je!=null&&!_.hasOwnProperty(hn)&&Ui(r,l,hn,null,_,Je);for(We in _)if(Je=_[We],ot=m[We],_.hasOwnProperty(We)&&Je!==ot&&(Je!=null||ot!=null))switch(We){case"children":case"dangerouslySetInnerHTML":if(Je!=null)throw Error(n(137,l));break;default:Ui(r,l,We,Je,_,ot)}return;default:if(ki(l)){for(var Ii in m)Je=m[Ii],m.hasOwnProperty(Ii)&&Je!==void 0&&!_.hasOwnProperty(Ii)&&bx(r,l,Ii,void 0,_,Je);for(ft in _)Je=_[ft],ot=m[ft],!_.hasOwnProperty(ft)||Je===ot||Je===void 0&&ot===void 0||bx(r,l,ft,Je,_,ot);return}}for(var Pe in m)Je=m[Pe],m.hasOwnProperty(Pe)&&Je!=null&&!_.hasOwnProperty(Pe)&&Ui(r,l,Pe,null,_,Je);for(_t in _)Je=_[_t],ot=m[_t],!_.hasOwnProperty(_t)||Je===ot||Je==null&&ot==null||Ui(r,l,_t,Je,_,ot)}function bM(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function HO(){if(typeof performance.getEntriesByType=="function"){for(var r=0,l=0,m=performance.getEntriesByType("resource"),_=0;_<m.length;_++){var A=m[_],D=A.transferSize,X=A.initiatorType,se=A.duration;if(D&&se&&bM(X)){for(X=0,se=A.responseEnd,_+=1;_<m.length;_++){var Me=m[_],We=Me.startTime;if(We>se)break;var ft=Me.transferSize,_t=Me.initiatorType;ft&&bM(_t)&&(Me=Me.responseEnd,X+=ft*(Me<se?1:(se-We)/(Me-We)))}if(--_,l+=8*(D+X)/(A.duration/1e3),r++,10<r)break}}if(0<r)return l/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Tx=null,Mx=null;function Ev(r){return r.nodeType===9?r:r.ownerDocument}function TM(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function MM(r,l){if(r===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&l==="foreignObject"?0:r}function Ax(r,l){return r==="textarea"||r==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Ex=null;function GO(){var r=window.event;return r&&r.type==="popstate"?r===Ex?!1:(Ex=r,!0):(Ex=null,!1)}var AM=typeof setTimeout=="function"?setTimeout:void 0,jO=typeof clearTimeout=="function"?clearTimeout:void 0,EM=typeof Promise=="function"?Promise:void 0,WO=typeof queueMicrotask=="function"?queueMicrotask:typeof EM<"u"?function(r){return EM.resolve(null).then(r).catch(qO)}:AM;function qO(r){setTimeout(function(){throw r})}function xf(r){return r==="head"}function wM(r,l){var m=l,_=0;do{var A=m.nextSibling;if(r.removeChild(m),A&&A.nodeType===8)if(m=A.data,m==="/$"||m==="/&"){if(_===0){r.removeChild(A),sp(l);return}_--}else if(m==="$"||m==="$?"||m==="$~"||m==="$!"||m==="&")_++;else if(m==="html")sg(r.ownerDocument.documentElement);else if(m==="head"){m=r.ownerDocument.head,sg(m);for(var D=m.firstChild;D;){var X=D.nextSibling,se=D.nodeName;D[fr]||se==="SCRIPT"||se==="STYLE"||se==="LINK"&&D.rel.toLowerCase()==="stylesheet"||m.removeChild(D),D=X}}else m==="body"&&sg(r.ownerDocument.body);m=A}while(m);sp(l)}function CM(r,l){var m=r;r=0;do{var _=m.nextSibling;if(m.nodeType===1?l?(m._stashedDisplay=m.style.display,m.style.display="none"):(m.style.display=m._stashedDisplay||"",m.getAttribute("style")===""&&m.removeAttribute("style")):m.nodeType===3&&(l?(m._stashedText=m.nodeValue,m.nodeValue=""):m.nodeValue=m._stashedText||""),_&&_.nodeType===8)if(m=_.data,m==="/$"){if(r===0)break;r--}else m!=="$"&&m!=="$?"&&m!=="$~"&&m!=="$!"||r++;m=_}while(m)}function wx(r){var l=r.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var m=l;switch(l=l.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":wx(m),Gr(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}r.removeChild(m)}}function XO(r,l,m,_){for(;r.nodeType===1;){var A=m;if(r.nodeName.toLowerCase()!==l.toLowerCase()){if(!_&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(_){if(!r[fr])switch(l){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(D=r.getAttribute("rel"),D==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(D!==A.rel||r.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||r.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||r.getAttribute("title")!==(A.title==null?null:A.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(D=r.getAttribute("src"),(D!==(A.src==null?null:A.src)||r.getAttribute("type")!==(A.type==null?null:A.type)||r.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&D&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(l==="input"&&r.type==="hidden"){var D=A.name==null?null:""+A.name;if(A.type==="hidden"&&r.getAttribute("name")===D)return r}else return r;if(r=sl(r.nextSibling),r===null)break}return null}function YO(r,l,m){if(l==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!m||(r=sl(r.nextSibling),r===null))return null;return r}function RM(r,l){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=sl(r.nextSibling),r===null))return null;return r}function Cx(r){return r.data==="$?"||r.data==="$~"}function Rx(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function ZO(r,l){var m=r.ownerDocument;if(r.data==="$~")r._reactRetry=l;else if(r.data!=="$?"||m.readyState!=="loading")l();else{var _=function(){l(),m.removeEventListener("DOMContentLoaded",_)};m.addEventListener("DOMContentLoaded",_),r._reactRetry=_}}function sl(r){for(;r!=null;r=r.nextSibling){var l=r.nodeType;if(l===1||l===3)break;if(l===8){if(l=r.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return r}var Dx=null;function DM(r){r=r.nextSibling;for(var l=0;r;){if(r.nodeType===8){var m=r.data;if(m==="/$"||m==="/&"){if(l===0)return sl(r.nextSibling);l--}else m!=="$"&&m!=="$!"&&m!=="$?"&&m!=="$~"&&m!=="&"||l++}r=r.nextSibling}return null}function LM(r){r=r.previousSibling;for(var l=0;r;){if(r.nodeType===8){var m=r.data;if(m==="$"||m==="$!"||m==="$?"||m==="$~"||m==="&"){if(l===0)return r;l--}else m!=="/$"&&m!=="/&"||l++}r=r.previousSibling}return null}function OM(r,l,m){switch(l=Ev(m),r){case"html":if(r=l.documentElement,!r)throw Error(n(452));return r;case"head":if(r=l.head,!r)throw Error(n(453));return r;case"body":if(r=l.body,!r)throw Error(n(454));return r;default:throw Error(n(451))}}function sg(r){for(var l=r.attributes;l.length;)r.removeAttributeNode(l[0]);Gr(r)}var rl=new Map,NM=new Set;function wv(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var xu=K.d;K.d={f:KO,r:QO,D:JO,C:$O,L:e4,m:t4,X:i4,S:n4,M:a4};function KO(){var r=xu.f(),l=le();return r||l}function QO(r){var l=Zn(r);l!==null&&l.tag===5&&l.type==="form"?Ym(l):xu.r(r)}var np=typeof document>"u"?null:document;function UM(r,l,m){var _=np;if(_&&typeof l=="string"&&l){var A=jt(l);A='link[rel="'+r+'"][href="'+A+'"]',typeof m=="string"&&(A+='[crossorigin="'+m+'"]'),NM.has(A)||(NM.add(A),r={rel:r,crossOrigin:m,href:l},_.querySelector(A)===null&&(l=_.createElement("link"),Fs(l,"link",r),ie(l),_.head.appendChild(l)))}}function JO(r){xu.D(r),UM("dns-prefetch",r,null)}function $O(r,l){xu.C(r,l),UM("preconnect",r,l)}function e4(r,l,m){xu.L(r,l,m);var _=np;if(_&&r&&l){var A='link[rel="preload"][as="'+jt(l)+'"]';l==="image"&&m&&m.imageSrcSet?(A+='[imagesrcset="'+jt(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(A+='[imagesizes="'+jt(m.imageSizes)+'"]')):A+='[href="'+jt(r)+'"]';var D=A;switch(l){case"style":D=ip(r);break;case"script":D=ap(r)}rl.has(D)||(r=y({rel:"preload",href:l==="image"&&m&&m.imageSrcSet?void 0:r,as:l},m),rl.set(D,r),_.querySelector(A)!==null||l==="style"&&_.querySelector(rg(D))||l==="script"&&_.querySelector(og(D))||(l=_.createElement("link"),Fs(l,"link",r),ie(l),_.head.appendChild(l)))}}function t4(r,l){xu.m(r,l);var m=np;if(m&&r){var _=l&&typeof l.as=="string"?l.as:"script",A='link[rel="modulepreload"][as="'+jt(_)+'"][href="'+jt(r)+'"]',D=A;switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":D=ap(r)}if(!rl.has(D)&&(r=y({rel:"modulepreload",href:r},l),rl.set(D,r),m.querySelector(A)===null)){switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(og(D)))return}_=m.createElement("link"),Fs(_,"link",r),ie(_),m.head.appendChild(_)}}}function n4(r,l,m){xu.S(r,l,m);var _=np;if(_&&r){var A=Xt(_).hoistableStyles,D=ip(r);l=l||"default";var X=A.get(D);if(!X){var se={loading:0,preload:null};if(X=_.querySelector(rg(D)))se.loading=5;else{r=y({rel:"stylesheet",href:r,"data-precedence":l},m),(m=rl.get(D))&&Lx(r,m);var Me=X=_.createElement("link");ie(Me),Fs(Me,"link",r),Me._p=new Promise(function(We,ft){Me.onload=We,Me.onerror=ft}),Me.addEventListener("load",function(){se.loading|=1}),Me.addEventListener("error",function(){se.loading|=2}),se.loading|=4,Cv(X,l,_)}X={type:"stylesheet",instance:X,count:1,state:se},A.set(D,X)}}}function i4(r,l){xu.X(r,l);var m=np;if(m&&r){var _=Xt(m).hoistableScripts,A=ap(r),D=_.get(A);D||(D=m.querySelector(og(A)),D||(r=y({src:r,async:!0},l),(l=rl.get(A))&&Ox(r,l),D=m.createElement("script"),ie(D),Fs(D,"link",r),m.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},_.set(A,D))}}function a4(r,l){xu.M(r,l);var m=np;if(m&&r){var _=Xt(m).hoistableScripts,A=ap(r),D=_.get(A);D||(D=m.querySelector(og(A)),D||(r=y({src:r,async:!0,type:"module"},l),(l=rl.get(A))&&Ox(r,l),D=m.createElement("script"),ie(D),Fs(D,"link",r),m.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},_.set(A,D))}}function IM(r,l,m,_){var A=(A=he.current)?wv(A):null;if(!A)throw Error(n(446));switch(r){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(l=ip(m.href),m=Xt(A).hoistableStyles,_=m.get(l),_||(_={type:"style",instance:null,count:0,state:null},m.set(l,_)),_):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){r=ip(m.href);var D=Xt(A).hoistableStyles,X=D.get(r);if(X||(A=A.ownerDocument||A,X={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},D.set(r,X),(D=A.querySelector(rg(r)))&&!D._p&&(X.instance=D,X.state.loading=5),rl.has(r)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},rl.set(r,m),D||s4(A,r,m,X.state))),l&&_===null)throw Error(n(528,""));return X}if(l&&_!==null)throw Error(n(529,""));return null;case"script":return l=m.async,m=m.src,typeof m=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=ap(m),m=Xt(A).hoistableScripts,_=m.get(l),_||(_={type:"script",instance:null,count:0,state:null},m.set(l,_)),_):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,r))}}function ip(r){return'href="'+jt(r)+'"'}function rg(r){return'link[rel="stylesheet"]['+r+"]"}function PM(r){return y({},r,{"data-precedence":r.precedence,precedence:null})}function s4(r,l,m,_){r.querySelector('link[rel="preload"][as="style"]['+l+"]")?_.loading=1:(l=r.createElement("link"),_.preload=l,l.addEventListener("load",function(){return _.loading|=1}),l.addEventListener("error",function(){return _.loading|=2}),Fs(l,"link",m),ie(l),r.head.appendChild(l))}function ap(r){return'[src="'+jt(r)+'"]'}function og(r){return"script[async]"+r}function zM(r,l,m){if(l.count++,l.instance===null)switch(l.type){case"style":var _=r.querySelector('style[data-href~="'+jt(m.href)+'"]');if(_)return l.instance=_,ie(_),_;var A=y({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return _=(r.ownerDocument||r).createElement("style"),ie(_),Fs(_,"style",A),Cv(_,m.precedence,r),l.instance=_;case"stylesheet":A=ip(m.href);var D=r.querySelector(rg(A));if(D)return l.state.loading|=4,l.instance=D,ie(D),D;_=PM(m),(A=rl.get(A))&&Lx(_,A),D=(r.ownerDocument||r).createElement("link"),ie(D);var X=D;return X._p=new Promise(function(se,Me){X.onload=se,X.onerror=Me}),Fs(D,"link",_),l.state.loading|=4,Cv(D,m.precedence,r),l.instance=D;case"script":return D=ap(m.src),(A=r.querySelector(og(D)))?(l.instance=A,ie(A),A):(_=m,(A=rl.get(D))&&(_=y({},m),Ox(_,A)),r=r.ownerDocument||r,A=r.createElement("script"),ie(A),Fs(A,"link",_),r.head.appendChild(A),l.instance=A);case"void":return null;default:throw Error(n(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(_=l.instance,l.state.loading|=4,Cv(_,m.precedence,r));return l.instance}function Cv(r,l,m){for(var _=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=_.length?_[_.length-1]:null,D=A,X=0;X<_.length;X++){var se=_[X];if(se.dataset.precedence===l)D=se;else if(D!==A)break}D?D.parentNode.insertBefore(r,D.nextSibling):(l=m.nodeType===9?m.head:m,l.insertBefore(r,l.firstChild))}function Lx(r,l){r.crossOrigin==null&&(r.crossOrigin=l.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=l.referrerPolicy),r.title==null&&(r.title=l.title)}function Ox(r,l){r.crossOrigin==null&&(r.crossOrigin=l.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=l.referrerPolicy),r.integrity==null&&(r.integrity=l.integrity)}var Rv=null;function BM(r,l,m){if(Rv===null){var _=new Map,A=Rv=new Map;A.set(m,_)}else A=Rv,_=A.get(m),_||(_=new Map,A.set(m,_));if(_.has(r))return _;for(_.set(r,null),m=m.getElementsByTagName(r),A=0;A<m.length;A++){var D=m[A];if(!(D[fr]||D[cn]||r==="link"&&D.getAttribute("rel")==="stylesheet")&&D.namespaceURI!=="http://www.w3.org/2000/svg"){var X=D.getAttribute(l)||"";X=r+X;var se=_.get(X);se?se.push(D):_.set(X,[D])}}return _}function FM(r,l,m){r=r.ownerDocument||r,r.head.insertBefore(m,l==="title"?r.querySelector("head > title"):null)}function r4(r,l,m){if(m===1||l.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;return l.rel==="stylesheet"?(r=l.disabled,typeof l.precedence=="string"&&r==null):!0;case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function kM(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function o4(r,l,m,_){if(m.type==="stylesheet"&&(typeof _.media!="string"||matchMedia(_.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var A=ip(_.href),D=l.querySelector(rg(A));if(D){l=D._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(r.count++,r=Dv.bind(r),l.then(r,r)),m.state.loading|=4,m.instance=D,ie(D);return}D=l.ownerDocument||l,_=PM(_),(A=rl.get(A))&&Lx(_,A),D=D.createElement("link"),ie(D);var X=D;X._p=new Promise(function(se,Me){X.onload=se,X.onerror=Me}),Fs(D,"link",_),m.instance=D}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(m,l),(l=m.state.preload)&&(m.state.loading&3)===0&&(r.count++,m=Dv.bind(r),l.addEventListener("load",m),l.addEventListener("error",m))}}var Nx=0;function l4(r,l){return r.stylesheets&&r.count===0&&Ov(r,r.stylesheets),0<r.count||0<r.imgCount?function(m){var _=setTimeout(function(){if(r.stylesheets&&Ov(r,r.stylesheets),r.unsuspend){var D=r.unsuspend;r.unsuspend=null,D()}},6e4+l);0<r.imgBytes&&Nx===0&&(Nx=62500*HO());var A=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Ov(r,r.stylesheets),r.unsuspend)){var D=r.unsuspend;r.unsuspend=null,D()}},(r.imgBytes>Nx?50:800)+l);return r.unsuspend=m,function(){r.unsuspend=null,clearTimeout(_),clearTimeout(A)}}:null}function Dv(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ov(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Lv=null;function Ov(r,l){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Lv=new Map,l.forEach(c4,r),Lv=null,Dv.call(r))}function c4(r,l){if(!(l.state.loading&4)){var m=Lv.get(r);if(m)var _=m.get(null);else{m=new Map,Lv.set(r,m);for(var A=r.querySelectorAll("link[data-precedence],style[data-precedence]"),D=0;D<A.length;D++){var X=A[D];(X.nodeName==="LINK"||X.getAttribute("media")!=="not all")&&(m.set(X.dataset.precedence,X),_=X)}_&&m.set(null,_)}A=l.instance,X=A.getAttribute("data-precedence"),D=m.get(X)||_,D===_&&m.set(null,A),m.set(X,A),this.count++,_=Dv.bind(this),A.addEventListener("load",_),A.addEventListener("error",_),D?D.parentNode.insertBefore(A,D.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(A,r.firstChild)),l.state.loading|=4}}var lg={$$typeof:I,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function u4(r,l,m,_,A,D,X,se,Me){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qt(0),this.hiddenUpdates=qt(null),this.identifierPrefix=_,this.onUncaughtError=A,this.onCaughtError=D,this.onRecoverableError=X,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Me,this.incompleteTransitions=new Map}function VM(r,l,m,_,A,D,X,se,Me,We,ft,_t){return r=new u4(r,l,m,X,Me,We,ft,_t,se),l=1,D===!0&&(l|=24),D=Ga(3,null,null,l),r.current=D,D.stateNode=r,l=gm(),l.refCount++,r.pooledCache=l,l.refCount++,D.memoizedState={element:_,isDehydrated:m,cache:l},bm(D),r}function HM(r){return r?(r=Eo,r):Eo}function GM(r,l,m,_,A,D){A=HM(A),_.context===null?_.context=A:_.pendingContext=A,_=Ko(l),_.payload={element:m},D=D===void 0?null:D,D!==null&&(_.callback=D),m=Nl(r,_,l),m!==null&&(p(m,r,l),Sc(m,r,l))}function jM(r,l){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var m=r.retryLane;r.retryLane=m!==0&&m<l?m:l}}function Ux(r,l){jM(r,l),(r=r.alternate)&&jM(r,l)}function WM(r){if(r.tag===13||r.tag===31){var l=vr(r,67108864);l!==null&&p(l,r,67108864),Ux(r,67108864)}}function qM(r){if(r.tag===13||r.tag===31){var l=Bs();l=Yn(l);var m=vr(r,l);m!==null&&p(m,r,l),Ux(r,l)}}var Nv=!0;function f4(r,l,m,_){var A=q.T;q.T=null;var D=K.p;try{K.p=2,Ix(r,l,m,_)}finally{K.p=D,q.T=A}}function h4(r,l,m,_){var A=q.T;q.T=null;var D=K.p;try{K.p=8,Ix(r,l,m,_)}finally{K.p=D,q.T=A}}function Ix(r,l,m,_){if(Nv){var A=Px(_);if(A===null)Sx(r,l,_,Uv,m),YM(r,_);else if(p4(A,r,l,m,_))_.stopPropagation();else if(YM(r,_),l&4&&-1<d4.indexOf(r)){for(;A!==null;){var D=Zn(A);if(D!==null)switch(D.tag){case 3:if(D=D.stateNode,D.current.memoizedState.isDehydrated){var X=ct(D.pendingLanes);if(X!==0){var se=D;for(se.pendingLanes|=2,se.entangledLanes|=2;X;){var Me=1<<31-ge(X);se.entanglements[1]|=Me,X&=~Me}Dc(D),(jn&6)===0&&(Or=Y()+500,ng(0))}}break;case 31:case 13:se=vr(D,2),se!==null&&p(se,D,2),le(),Ux(D,2)}if(D=Px(_),D===null&&Sx(r,l,_,Uv,m),D===A)break;A=D}A!==null&&_.stopPropagation()}else Sx(r,l,_,null,m)}}function Px(r){return r=uo(r),zx(r)}var Uv=null;function zx(r){if(Uv=null,r=yi(r),r!==null){var l=s(r);if(l===null)r=null;else{var m=l.tag;if(m===13){if(r=o(l),r!==null)return r;r=null}else if(m===31){if(r=c(l),r!==null)return r;r=null}else if(m===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;r=null}else l!==r&&(r=null)}}return Uv=r,null}function XM(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ye()){case Be:return 2;case De:return 8;case Ce:case vt:return 32;case ht:return 268435456;default:return 32}default:return 32}}var Bx=!1,Sf=null,bf=null,Tf=null,cg=new Map,ug=new Map,Mf=[],d4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function YM(r,l){switch(r){case"focusin":case"focusout":Sf=null;break;case"dragenter":case"dragleave":bf=null;break;case"mouseover":case"mouseout":Tf=null;break;case"pointerover":case"pointerout":cg.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":ug.delete(l.pointerId)}}function fg(r,l,m,_,A,D){return r===null||r.nativeEvent!==D?(r={blockedOn:l,domEventName:m,eventSystemFlags:_,nativeEvent:D,targetContainers:[A]},l!==null&&(l=Zn(l),l!==null&&WM(l)),r):(r.eventSystemFlags|=_,l=r.targetContainers,A!==null&&l.indexOf(A)===-1&&l.push(A),r)}function p4(r,l,m,_,A){switch(l){case"focusin":return Sf=fg(Sf,r,l,m,_,A),!0;case"dragenter":return bf=fg(bf,r,l,m,_,A),!0;case"mouseover":return Tf=fg(Tf,r,l,m,_,A),!0;case"pointerover":var D=A.pointerId;return cg.set(D,fg(cg.get(D)||null,r,l,m,_,A)),!0;case"gotpointercapture":return D=A.pointerId,ug.set(D,fg(ug.get(D)||null,r,l,m,_,A)),!0}return!1}function ZM(r){var l=yi(r.target);if(l!==null){var m=s(l);if(m!==null){if(l=m.tag,l===13){if(l=o(m),l!==null){r.blockedOn=l,si(r.priority,function(){qM(m)});return}}else if(l===31){if(l=c(m),l!==null){r.blockedOn=l,si(r.priority,function(){qM(m)});return}}else if(l===3&&m.stateNode.current.memoizedState.isDehydrated){r.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Iv(r){if(r.blockedOn!==null)return!1;for(var l=r.targetContainers;0<l.length;){var m=Px(r.nativeEvent);if(m===null){m=r.nativeEvent;var _=new m.constructor(m.type,m);Gs=_,m.target.dispatchEvent(_),Gs=null}else return l=Zn(m),l!==null&&WM(l),r.blockedOn=m,!1;l.shift()}return!0}function KM(r,l,m){Iv(r)&&m.delete(l)}function m4(){Bx=!1,Sf!==null&&Iv(Sf)&&(Sf=null),bf!==null&&Iv(bf)&&(bf=null),Tf!==null&&Iv(Tf)&&(Tf=null),cg.forEach(KM),ug.forEach(KM)}function Pv(r,l){r.blockedOn===l&&(r.blockedOn=null,Bx||(Bx=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,m4)))}var zv=null;function QM(r){zv!==r&&(zv=r,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){zv===r&&(zv=null);for(var l=0;l<r.length;l+=3){var m=r[l],_=r[l+1],A=r[l+2];if(typeof _!="function"){if(zx(_||m)===null)continue;break}var D=Zn(m);D!==null&&(r.splice(l,3),l-=3,Xm(D,{pending:!0,data:A,method:m.method,action:_},_,A))}}))}function sp(r){function l(Me){return Pv(Me,r)}Sf!==null&&Pv(Sf,r),bf!==null&&Pv(bf,r),Tf!==null&&Pv(Tf,r),cg.forEach(l),ug.forEach(l);for(var m=0;m<Mf.length;m++){var _=Mf[m];_.blockedOn===r&&(_.blockedOn=null)}for(;0<Mf.length&&(m=Mf[0],m.blockedOn===null);)ZM(m),m.blockedOn===null&&Mf.shift();if(m=(r.ownerDocument||r).$$reactFormReplay,m!=null)for(_=0;_<m.length;_+=3){var A=m[_],D=m[_+1],X=A[Li]||null;if(typeof D=="function")X||QM(m);else if(X){var se=null;if(D&&D.hasAttribute("formAction")){if(A=D,X=D[Li]||null)se=X.formAction;else if(zx(A)!==null)continue}else se=X.action;typeof se=="function"?m[_+1]=se:(m.splice(_,3),_-=3),QM(m)}}}function JM(){function r(D){D.canIntercept&&D.info==="react-transition"&&D.intercept({handler:function(){return new Promise(function(X){return A=X})},focusReset:"manual",scroll:"manual"})}function l(){A!==null&&(A(),A=null),_||setTimeout(m,20)}function m(){if(!_&&!navigation.transition){var D=navigation.currentEntry;D&&D.url!=null&&navigation.navigate(D.url,{state:D.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var _=!1,A=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(m,100),function(){_=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),A!==null&&(A(),A=null)}}}function Fx(r){this._internalRoot=r}Bv.prototype.render=Fx.prototype.render=function(r){var l=this._internalRoot;if(l===null)throw Error(n(409));var m=l.current,_=Bs();GM(m,_,r,l,null,null)},Bv.prototype.unmount=Fx.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var l=r.containerInfo;GM(r.current,2,null,r,null,null),le(),l[ga]=null}};function Bv(r){this._internalRoot=r}Bv.prototype.unstable_scheduleHydration=function(r){if(r){var l=Fi();r={blockedOn:null,target:r,priority:l};for(var m=0;m<Mf.length&&l!==0&&l<Mf[m].priority;m++);Mf.splice(m,0,r),m===0&&ZM(r)}};var $M=e.version;if($M!=="19.2.3")throw Error(n(527,$M,"19.2.3"));K.findDOMNode=function(r){var l=r._reactInternals;if(l===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=d(l),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var g4={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fv.isDisabled&&Fv.supportsFiber)try{Ge=Fv.inject(g4),Qe=Fv}catch{}}return dg.createRoot=function(r,l){if(!a(r))throw Error(n(299));var m=!1,_="",A=Qm,D=vv,X=Hd;return l!=null&&(l.unstable_strictMode===!0&&(m=!0),l.identifierPrefix!==void 0&&(_=l.identifierPrefix),l.onUncaughtError!==void 0&&(A=l.onUncaughtError),l.onCaughtError!==void 0&&(D=l.onCaughtError),l.onRecoverableError!==void 0&&(X=l.onRecoverableError)),l=VM(r,1,!1,null,null,m,_,null,A,D,X,JM),r[ga]=l.current,xx(r),new Fx(l)},dg.hydrateRoot=function(r,l,m){if(!a(r))throw Error(n(299));var _=!1,A="",D=Qm,X=vv,se=Hd,Me=null;return m!=null&&(m.unstable_strictMode===!0&&(_=!0),m.identifierPrefix!==void 0&&(A=m.identifierPrefix),m.onUncaughtError!==void 0&&(D=m.onUncaughtError),m.onCaughtError!==void 0&&(X=m.onCaughtError),m.onRecoverableError!==void 0&&(se=m.onRecoverableError),m.formState!==void 0&&(Me=m.formState)),l=VM(r,1,!0,l,m??null,_,A,Me,D,X,se,JM),l.context=HM(null),m=l.current,_=Bs(),_=Yn(_),A=Ko(_),A.callback=null,Nl(m,A,_),m=_,l.current.lanes=m,bn(l,m),Dc(l),r[ga]=l.current,xx(r),new Bv(l)},dg.version="19.2.3",dg}var cA;function A4(){if(cA)return Hx.exports;cA=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Hx.exports=M4(),Hx.exports}var Xw=A4();const E4=A0(Xw);function Yw(i,e){const t=ue.useRef(e);ue.useEffect(function(){e!==t.current&&i.attributionControl!=null&&(t.current!=null&&i.attributionControl.removeAttribution(t.current),e!=null&&i.attributionControl.addAttribution(e)),t.current=e},[i,e])}function w4(i,e,t){e.center!==t.center&&i.setLatLng(e.center),e.radius!=null&&e.radius!==t.radius&&i.setRadius(e.radius)}var C4=qw();const R4=1;function D4(i){return Object.freeze({__version:R4,map:i})}function T2(i,e){return Object.freeze({...i,...e})}const M2=ue.createContext(null);function r1(){const i=ue.use(M2);if(i==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return i}function Zw(i){function e(t,n){const{instance:a,context:s}=i(t).current;ue.useImperativeHandle(n,()=>a);const{children:o}=t;return o==null?null:Nu.createElement(M2,{value:s},o)}return ue.forwardRef(e)}function L4(i){function e(t,n){const[a,s]=ue.useState(!1),{instance:o}=i(t,s).current;ue.useImperativeHandle(n,()=>o),ue.useEffect(function(){a&&o.update()},[o,a,t.children]);const c=o._contentNode;return c?C4.createPortal(t.children,c):null}return ue.forwardRef(e)}function O4(i){function e(t,n){const{instance:a}=i(t).current;return ue.useImperativeHandle(n,()=>a),null}return ue.forwardRef(e)}function A2(i,e){const t=ue.useRef(void 0);ue.useEffect(function(){return e!=null&&i.instance.on(e),t.current=e,function(){t.current!=null&&i.instance.off(t.current),t.current=null}},[i,e])}function o1(i,e){const t=i.pane??e.pane;return t?{...i,pane:t}:i}function N4(i,e){return function(n,a){const s=r1(),o=i(o1(n,s),s);return Yw(s.map,n.attribution),A2(o.current,n.eventHandlers),e(o.current,s,n,a),o}}var Dg={exports:{}};var U4=Dg.exports,uA;function I4(){return uA||(uA=1,(function(i,e){(function(t,n){n(e)})(U4,(function(t){var n="1.9.4";function a(u){var v,T,P,j;for(T=1,P=arguments.length;T<P;T++){j=arguments[T];for(v in j)u[v]=j[v]}return u}var s=Object.create||(function(){function u(){}return function(v){return u.prototype=v,new u}})();function o(u,v){var T=Array.prototype.slice;if(u.bind)return u.bind.apply(u,T.call(arguments,1));var P=T.call(arguments,2);return function(){return u.apply(v,P.length?P.concat(T.call(arguments)):arguments)}}var c=0;function f(u){return"_leaflet_id"in u||(u._leaflet_id=++c),u._leaflet_id}function d(u,v,T){var P,j,ee,be;return be=function(){P=!1,j&&(ee.apply(T,j),j=!1)},ee=function(){P?j=arguments:(u.apply(T,arguments),setTimeout(be,v),P=!0)},ee}function g(u,v,T){var P=v[1],j=v[0],ee=P-j;return u===P&&T?u:((u-j)%ee+ee)%ee+j}function y(){return!1}function x(u,v){if(v===!1)return u;var T=Math.pow(10,v===void 0?6:v);return Math.round(u*T)/T}function b(u){return u.trim?u.trim():u.replace(/^\s+|\s+$/g,"")}function M(u){return b(u).split(/\s+/)}function R(u,v){Object.prototype.hasOwnProperty.call(u,"options")||(u.options=u.options?s(u.options):{});for(var T in v)u.options[T]=v[T];return u.options}function C(u,v,T){var P=[];for(var j in u)P.push(encodeURIComponent(T?j.toUpperCase():j)+"="+encodeURIComponent(u[j]));return(!v||v.indexOf("?")===-1?"?":"&")+P.join("&")}var E=/\{ *([\w_ -]+) *\}/g;function N(u,v){return u.replace(E,function(T,P){var j=v[P];if(j===void 0)throw new Error("No value provided for variable "+T);return typeof j=="function"&&(j=j(v)),j})}var I=Array.isArray||function(u){return Object.prototype.toString.call(u)==="[object Array]"};function z(u,v){for(var T=0;T<u.length;T++)if(u[T]===v)return T;return-1}var F="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function V(u){return window["webkit"+u]||window["moz"+u]||window["ms"+u]}var W=0;function Z(u){var v=+new Date,T=Math.max(0,16-(v-W));return W=v+T,window.setTimeout(u,T)}var B=window.requestAnimationFrame||V("RequestAnimationFrame")||Z,H=window.cancelAnimationFrame||V("CancelAnimationFrame")||V("CancelRequestAnimationFrame")||function(u){window.clearTimeout(u)};function Q(u,v,T){if(T&&B===Z)u.call(v);else return B.call(window,o(u,v))}function J(u){u&&H.call(window,u)}var oe={__proto__:null,extend:a,create:s,bind:o,get lastId(){return c},stamp:f,throttle:d,wrapNum:g,falseFn:y,formatNum:x,trim:b,splitWords:M,setOptions:R,getParamString:C,template:N,isArray:I,indexOf:z,emptyImageUrl:F,requestFn:B,cancelFn:H,requestAnimFrame:Q,cancelAnimFrame:J};function re(){}re.extend=function(u){var v=function(){R(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},T=v.__super__=this.prototype,P=s(T);P.constructor=v,v.prototype=P;for(var j in this)Object.prototype.hasOwnProperty.call(this,j)&&j!=="prototype"&&j!=="__super__"&&(v[j]=this[j]);return u.statics&&a(v,u.statics),u.includes&&(ve(u.includes),a.apply(null,[P].concat(u.includes))),a(P,u),delete P.statics,delete P.includes,P.options&&(P.options=T.options?s(T.options):{},a(P.options,u.options)),P._initHooks=[],P.callInitHooks=function(){if(!this._initHooksCalled){T.callInitHooks&&T.callInitHooks.call(this),this._initHooksCalled=!0;for(var ee=0,be=P._initHooks.length;ee<be;ee++)P._initHooks[ee].call(this)}},v},re.include=function(u){var v=this.prototype.options;return a(this.prototype,u),u.options&&(this.prototype.options=v,this.mergeOptions(u.options)),this},re.mergeOptions=function(u){return a(this.prototype.options,u),this},re.addInitHook=function(u){var v=Array.prototype.slice.call(arguments,1),T=typeof u=="function"?u:function(){this[u].apply(this,v)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(T),this};function ve(u){if(!(typeof L>"u"||!L||!L.Mixin)){u=I(u)?u:[u];for(var v=0;v<u.length;v++)u[v]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var q={on:function(u,v,T){if(typeof u=="object")for(var P in u)this._on(P,u[P],v);else{u=M(u);for(var j=0,ee=u.length;j<ee;j++)this._on(u[j],v,T)}return this},off:function(u,v,T){if(!arguments.length)delete this._events;else if(typeof u=="object")for(var P in u)this._off(P,u[P],v);else{u=M(u);for(var j=arguments.length===1,ee=0,be=u.length;ee<be;ee++)j?this._off(u[ee]):this._off(u[ee],v,T)}return this},_on:function(u,v,T,P){if(typeof v!="function"){console.warn("wrong listener type: "+typeof v);return}if(this._listens(u,v,T)===!1){T===this&&(T=void 0);var j={fn:v,ctx:T};P&&(j.once=!0),this._events=this._events||{},this._events[u]=this._events[u]||[],this._events[u].push(j)}},_off:function(u,v,T){var P,j,ee;if(this._events&&(P=this._events[u],!!P)){if(arguments.length===1){if(this._firingCount)for(j=0,ee=P.length;j<ee;j++)P[j].fn=y;delete this._events[u];return}if(typeof v!="function"){console.warn("wrong listener type: "+typeof v);return}var be=this._listens(u,v,T);if(be!==!1){var Oe=P[be];this._firingCount&&(Oe.fn=y,this._events[u]=P=P.slice()),P.splice(be,1)}}},fire:function(u,v,T){if(!this.listens(u,T))return this;var P=a({},v,{type:u,target:this,sourceTarget:v&&v.sourceTarget||this});if(this._events){var j=this._events[u];if(j){this._firingCount=this._firingCount+1||1;for(var ee=0,be=j.length;ee<be;ee++){var Oe=j[ee],Ye=Oe.fn;Oe.once&&this.off(u,Ye,Oe.ctx),Ye.call(Oe.ctx||this,P)}this._firingCount--}}return T&&this._propagateEvent(P),this},listens:function(u,v,T,P){typeof u!="string"&&console.warn('"string" type argument expected');var j=v;typeof v!="function"&&(P=!!v,j=void 0,T=void 0);var ee=this._events&&this._events[u];if(ee&&ee.length&&this._listens(u,j,T)!==!1)return!0;if(P){for(var be in this._eventParents)if(this._eventParents[be].listens(u,v,T,P))return!0}return!1},_listens:function(u,v,T){if(!this._events)return!1;var P=this._events[u]||[];if(!v)return!!P.length;T===this&&(T=void 0);for(var j=0,ee=P.length;j<ee;j++)if(P[j].fn===v&&P[j].ctx===T)return j;return!1},once:function(u,v,T){if(typeof u=="object")for(var P in u)this._on(P,u[P],v,!0);else{u=M(u);for(var j=0,ee=u.length;j<ee;j++)this._on(u[j],v,T,!0)}return this},addEventParent:function(u){return this._eventParents=this._eventParents||{},this._eventParents[f(u)]=u,this},removeEventParent:function(u){return this._eventParents&&delete this._eventParents[f(u)],this},_propagateEvent:function(u){for(var v in this._eventParents)this._eventParents[v].fire(u.type,a({layer:u.target,propagatedFrom:u.target},u),!0)}};q.addEventListener=q.on,q.removeEventListener=q.clearAllEventListeners=q.off,q.addOneTimeEventListener=q.once,q.fireEvent=q.fire,q.hasEventListeners=q.listens;var K=re.extend(q);function te(u,v,T){this.x=T?Math.round(u):u,this.y=T?Math.round(v):v}var de=Math.trunc||function(u){return u>0?Math.floor(u):Math.ceil(u)};te.prototype={clone:function(){return new te(this.x,this.y)},add:function(u){return this.clone()._add(ce(u))},_add:function(u){return this.x+=u.x,this.y+=u.y,this},subtract:function(u){return this.clone()._subtract(ce(u))},_subtract:function(u){return this.x-=u.x,this.y-=u.y,this},divideBy:function(u){return this.clone()._divideBy(u)},_divideBy:function(u){return this.x/=u,this.y/=u,this},multiplyBy:function(u){return this.clone()._multiplyBy(u)},_multiplyBy:function(u){return this.x*=u,this.y*=u,this},scaleBy:function(u){return new te(this.x*u.x,this.y*u.y)},unscaleBy:function(u){return new te(this.x/u.x,this.y/u.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=de(this.x),this.y=de(this.y),this},distanceTo:function(u){u=ce(u);var v=u.x-this.x,T=u.y-this.y;return Math.sqrt(v*v+T*T)},equals:function(u){return u=ce(u),u.x===this.x&&u.y===this.y},contains:function(u){return u=ce(u),Math.abs(u.x)<=Math.abs(this.x)&&Math.abs(u.y)<=Math.abs(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}};function ce(u,v,T){return u instanceof te?u:I(u)?new te(u[0],u[1]):u==null?u:typeof u=="object"&&"x"in u&&"y"in u?new te(u.x,u.y):new te(u,v,T)}function G(u,v){if(u)for(var T=v?[u,v]:u,P=0,j=T.length;P<j;P++)this.extend(T[P])}G.prototype={extend:function(u){var v,T;if(!u)return this;if(u instanceof te||typeof u[0]=="number"||"x"in u)v=T=ce(u);else if(u=ne(u),v=u.min,T=u.max,!v||!T)return this;return!this.min&&!this.max?(this.min=v.clone(),this.max=T.clone()):(this.min.x=Math.min(v.x,this.min.x),this.max.x=Math.max(T.x,this.max.x),this.min.y=Math.min(v.y,this.min.y),this.max.y=Math.max(T.y,this.max.y)),this},getCenter:function(u){return ce((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,u)},getBottomLeft:function(){return ce(this.min.x,this.max.y)},getTopRight:function(){return ce(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(u){var v,T;return typeof u[0]=="number"||u instanceof te?u=ce(u):u=ne(u),u instanceof G?(v=u.min,T=u.max):v=T=u,v.x>=this.min.x&&T.x<=this.max.x&&v.y>=this.min.y&&T.y<=this.max.y},intersects:function(u){u=ne(u);var v=this.min,T=this.max,P=u.min,j=u.max,ee=j.x>=v.x&&P.x<=T.x,be=j.y>=v.y&&P.y<=T.y;return ee&&be},overlaps:function(u){u=ne(u);var v=this.min,T=this.max,P=u.min,j=u.max,ee=j.x>v.x&&P.x<T.x,be=j.y>v.y&&P.y<T.y;return ee&&be},isValid:function(){return!!(this.min&&this.max)},pad:function(u){var v=this.min,T=this.max,P=Math.abs(v.x-T.x)*u,j=Math.abs(v.y-T.y)*u;return ne(ce(v.x-P,v.y-j),ce(T.x+P,T.y+j))},equals:function(u){return u?(u=ne(u),this.min.equals(u.getTopLeft())&&this.max.equals(u.getBottomRight())):!1}};function ne(u,v){return!u||u instanceof G?u:new G(u,v)}function fe(u,v){if(u)for(var T=v?[u,v]:u,P=0,j=T.length;P<j;P++)this.extend(T[P])}fe.prototype={extend:function(u){var v=this._southWest,T=this._northEast,P,j;if(u instanceof xe)P=u,j=u;else if(u instanceof fe){if(P=u._southWest,j=u._northEast,!P||!j)return this}else return u?this.extend(he(u)||me(u)):this;return!v&&!T?(this._southWest=new xe(P.lat,P.lng),this._northEast=new xe(j.lat,j.lng)):(v.lat=Math.min(P.lat,v.lat),v.lng=Math.min(P.lng,v.lng),T.lat=Math.max(j.lat,T.lat),T.lng=Math.max(j.lng,T.lng)),this},pad:function(u){var v=this._southWest,T=this._northEast,P=Math.abs(v.lat-T.lat)*u,j=Math.abs(v.lng-T.lng)*u;return new fe(new xe(v.lat-P,v.lng-j),new xe(T.lat+P,T.lng+j))},getCenter:function(){return new xe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new xe(this.getNorth(),this.getWest())},getSouthEast:function(){return new xe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(u){typeof u[0]=="number"||u instanceof xe||"lat"in u?u=he(u):u=me(u);var v=this._southWest,T=this._northEast,P,j;return u instanceof fe?(P=u.getSouthWest(),j=u.getNorthEast()):P=j=u,P.lat>=v.lat&&j.lat<=T.lat&&P.lng>=v.lng&&j.lng<=T.lng},intersects:function(u){u=me(u);var v=this._southWest,T=this._northEast,P=u.getSouthWest(),j=u.getNorthEast(),ee=j.lat>=v.lat&&P.lat<=T.lat,be=j.lng>=v.lng&&P.lng<=T.lng;return ee&&be},overlaps:function(u){u=me(u);var v=this._southWest,T=this._northEast,P=u.getSouthWest(),j=u.getNorthEast(),ee=j.lat>v.lat&&P.lat<T.lat,be=j.lng>v.lng&&P.lng<T.lng;return ee&&be},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(u,v){return u?(u=me(u),this._southWest.equals(u.getSouthWest(),v)&&this._northEast.equals(u.getNorthEast(),v)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function me(u,v){return u instanceof fe?u:new fe(u,v)}function xe(u,v,T){if(isNaN(u)||isNaN(v))throw new Error("Invalid LatLng object: ("+u+", "+v+")");this.lat=+u,this.lng=+v,T!==void 0&&(this.alt=+T)}xe.prototype={equals:function(u,v){if(!u)return!1;u=he(u);var T=Math.max(Math.abs(this.lat-u.lat),Math.abs(this.lng-u.lng));return T<=(v===void 0?1e-9:v)},toString:function(u){return"LatLng("+x(this.lat,u)+", "+x(this.lng,u)+")"},distanceTo:function(u){return Ae.distance(this,he(u))},wrap:function(){return Ae.wrapLatLng(this)},toBounds:function(u){var v=180*u/40075017,T=v/Math.cos(Math.PI/180*this.lat);return me([this.lat-v,this.lng-T],[this.lat+v,this.lng+T])},clone:function(){return new xe(this.lat,this.lng,this.alt)}};function he(u,v,T){return u instanceof xe?u:I(u)&&typeof u[0]!="object"?u.length===3?new xe(u[0],u[1],u[2]):u.length===2?new xe(u[0],u[1]):null:u==null?u:typeof u=="object"&&"lat"in u?new xe(u.lat,"lng"in u?u.lng:u.lon,u.alt):v===void 0?null:new xe(u,v,T)}var _e={latLngToPoint:function(u,v){var T=this.projection.project(u),P=this.scale(v);return this.transformation._transform(T,P)},pointToLatLng:function(u,v){var T=this.scale(v),P=this.transformation.untransform(u,T);return this.projection.unproject(P)},project:function(u){return this.projection.project(u)},unproject:function(u){return this.projection.unproject(u)},scale:function(u){return 256*Math.pow(2,u)},zoom:function(u){return Math.log(u/256)/Math.LN2},getProjectedBounds:function(u){if(this.infinite)return null;var v=this.projection.bounds,T=this.scale(u),P=this.transformation.transform(v.min,T),j=this.transformation.transform(v.max,T);return new G(P,j)},infinite:!1,wrapLatLng:function(u){var v=this.wrapLng?g(u.lng,this.wrapLng,!0):u.lng,T=this.wrapLat?g(u.lat,this.wrapLat,!0):u.lat,P=u.alt;return new xe(T,v,P)},wrapLatLngBounds:function(u){var v=u.getCenter(),T=this.wrapLatLng(v),P=v.lat-T.lat,j=v.lng-T.lng;if(P===0&&j===0)return u;var ee=u.getSouthWest(),be=u.getNorthEast(),Oe=new xe(ee.lat-P,ee.lng-j),Ye=new xe(be.lat-P,be.lng-j);return new fe(Oe,Ye)}},Ae=a({},_e,{wrapLng:[-180,180],R:6371e3,distance:function(u,v){var T=Math.PI/180,P=u.lat*T,j=v.lat*T,ee=Math.sin((v.lat-u.lat)*T/2),be=Math.sin((v.lng-u.lng)*T/2),Oe=ee*ee+Math.cos(P)*Math.cos(j)*be*be,Ye=2*Math.atan2(Math.sqrt(Oe),Math.sqrt(1-Oe));return this.R*Ye}}),$e=6378137,et={R:$e,MAX_LATITUDE:85.0511287798,project:function(u){var v=Math.PI/180,T=this.MAX_LATITUDE,P=Math.max(Math.min(T,u.lat),-T),j=Math.sin(P*v);return new te(this.R*u.lng*v,this.R*Math.log((1+j)/(1-j))/2)},unproject:function(u){var v=180/Math.PI;return new xe((2*Math.atan(Math.exp(u.y/this.R))-Math.PI/2)*v,u.x*v/this.R)},bounds:(function(){var u=$e*Math.PI;return new G([-u,-u],[u,u])})()};function qe(u,v,T,P){if(I(u)){this._a=u[0],this._b=u[1],this._c=u[2],this._d=u[3];return}this._a=u,this._b=v,this._c=T,this._d=P}qe.prototype={transform:function(u,v){return this._transform(u.clone(),v)},_transform:function(u,v){return v=v||1,u.x=v*(this._a*u.x+this._b),u.y=v*(this._c*u.y+this._d),u},untransform:function(u,v){return v=v||1,new te((u.x/v-this._b)/this._a,(u.y/v-this._d)/this._c)}};function nt(u,v,T,P){return new qe(u,v,T,P)}var St=a({},Ae,{code:"EPSG:3857",projection:et,transformation:(function(){var u=.5/(Math.PI*et.R);return nt(u,.5,-u,.5)})()}),Ne=a({},St,{code:"EPSG:900913"});function Ve(u){return document.createElementNS("http://www.w3.org/2000/svg",u)}function Fe(u,v){var T="",P,j,ee,be,Oe,Ye;for(P=0,ee=u.length;P<ee;P++){for(Oe=u[P],j=0,be=Oe.length;j<be;j++)Ye=Oe[j],T+=(j?"L":"M")+Ye.x+" "+Ye.y;T+=v?kt.svg?"z":"x":""}return T||"M0 0"}var rt=document.documentElement.style,ae="ActiveXObject"in window,ut=ae&&!document.addEventListener,Ze="msLaunchUri"in navigator&&!("documentMode"in document),Le=Yn("webkit"),tt=Yn("android"),$=Yn("android 2")||Yn("android 3"),Y=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ye=tt&&Yn("Google")&&Y<537&&!("AudioNode"in window),Be=!!window.opera,De=!Ze&&Yn("chrome"),Ce=Yn("gecko")&&!Le&&!Be&&!ae,vt=!De&&Yn("safari"),ht=Yn("phantom"),bt="OTransition"in rt,Ct=navigator.platform.indexOf("Win")===0,Ge=ae&&"transition"in rt,Qe="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!$,st="MozPerspective"in rt,ge=!window.L_DISABLE_3D&&(Ge||Qe||st)&&!bt&&!ht,we=typeof orientation<"u"||Yn("mobile"),xt=we&&Le,Se=we&&Qe,it=!window.PointerEvent&&window.MSPointerEvent,lt=!!(window.PointerEvent||it),At="ontouchstart"in window||!!window.TouchEvent,ct=!window.L_NO_TOUCH&&(At||lt),je=we&&Be,mt=we&&Ce,Rt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Lt=(function(){var u=!1;try{var v=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("testPassiveEventSupport",y,v),window.removeEventListener("testPassiveEventSupport",y,v)}catch{}return u})(),qt=(function(){return!!document.createElement("canvas").getContext})(),bn=!!(document.createElementNS&&Ve("svg").createSVGRect),Bn=!!bn&&(function(){var u=document.createElement("div");return u.innerHTML="<svg/>",(u.firstChild&&u.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Ai=!bn&&(function(){try{var u=document.createElement("div");u.innerHTML='<v:shape adj="1"/>';var v=u.firstChild;return v.style.behavior="url(#default#VML)",v&&typeof v.adj=="object"}catch{return!1}})(),ia=navigator.platform.indexOf("Mac")===0,Ca=navigator.platform.indexOf("Linux")===0;function Yn(u){return navigator.userAgent.toLowerCase().indexOf(u)>=0}var kt={ie:ae,ielt9:ut,edge:Ze,webkit:Le,android:tt,android23:$,androidStock:ye,opera:Be,chrome:De,gecko:Ce,safari:vt,phantom:ht,opera12:bt,win:Ct,ie3d:Ge,webkit3d:Qe,gecko3d:st,any3d:ge,mobile:we,mobileWebkit:xt,mobileWebkit3d:Se,msPointer:it,pointer:lt,touch:ct,touchNative:At,mobileOpera:je,mobileGecko:mt,retina:Rt,passiveEvents:Lt,canvas:qt,svg:bn,vml:Ai,inlineSvg:Bn,mac:ia,linux:Ca},Fi=kt.msPointer?"MSPointerDown":"pointerdown",si=kt.msPointer?"MSPointerMove":"pointermove",Hn=kt.msPointer?"MSPointerUp":"pointerup",cn=kt.msPointer?"MSPointerCancel":"pointercancel",Li={touchstart:Fi,touchmove:si,touchend:Hn,touchcancel:cn},ga={touchstart:Xt,touchmove:va,touchend:va,touchcancel:va},fs={},cr=!1;function lo(u,v,T){return v==="touchstart"&&Zn(),ga[v]?(T=ga[v].bind(this,T),u.addEventListener(Li[v],T,!1),T):(console.warn("wrong event specified:",v),y)}function ur(u,v,T){if(!Li[v]){console.warn("wrong event specified:",v);return}u.removeEventListener(Li[v],T,!1)}function fr(u){fs[u.pointerId]=u}function Gr(u){fs[u.pointerId]&&(fs[u.pointerId]=u)}function yi(u){delete fs[u.pointerId]}function Zn(){cr||(document.addEventListener(Fi,fr,!0),document.addEventListener(si,Gr,!0),document.addEventListener(Hn,yi,!0),document.addEventListener(cn,yi,!0),cr=!0)}function va(u,v){if(v.pointerType!==(v.MSPOINTER_TYPE_MOUSE||"mouse")){v.touches=[];for(var T in fs)v.touches.push(fs[T]);v.changedTouches=[v],u(v)}}function Xt(u,v){v.MSPOINTER_TYPE_TOUCH&&v.pointerType===v.MSPOINTER_TYPE_TOUCH&&ui(v),va(u,v)}function ie(u){var v={},T,P;for(P in u)T=u[P],v[P]=T&&T.bind?T.bind(u):T;return u=v,v.type="dblclick",v.detail=2,v.isTrusted=!1,v._simulated=!0,v}var Re=200;function Xe(u,v){u.addEventListener("dblclick",v);var T=0,P;function j(ee){if(ee.detail!==1){P=ee.detail;return}if(!(ee.pointerType==="mouse"||ee.sourceCapabilities&&!ee.sourceCapabilities.firesTouchEvents)){var be=dr(ee);if(!(be.some(function(Ye){return Ye instanceof HTMLLabelElement&&Ye.attributes.for})&&!be.some(function(Ye){return Ye instanceof HTMLInputElement||Ye instanceof HTMLSelectElement}))){var Oe=Date.now();Oe-T<=Re?(P++,P===2&&v(ie(ee))):P=1,T=Oe}}}return u.addEventListener("click",j),{dblclick:v,simDblclick:j}}function ke(u,v){u.removeEventListener("dblclick",v.dblclick),u.removeEventListener("click",v.simDblclick)}var Ue=ya(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Et=ya(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ut=Et==="webkitTransition"||Et==="OTransition"?Et+"End":"transitionend";function Dt(u){return typeof u=="string"?document.getElementById(u):u}function Pt(u,v){var T=u.style[v]||u.currentStyle&&u.currentStyle[v];if((!T||T==="auto")&&document.defaultView){var P=document.defaultView.getComputedStyle(u,null);T=P?P[v]:null}return T==="auto"?null:T}function Tt(u,v,T){var P=document.createElement(u);return P.className=v||"",T&&T.appendChild(P),P}function Ot(u){var v=u.parentNode;v&&v.removeChild(u)}function Vt(u){for(;u.firstChild;)u.removeChild(u.firstChild)}function Jt(u){var v=u.parentNode;v&&v.lastChild!==u&&v.appendChild(u)}function xn(u){var v=u.parentNode;v&&v.firstChild!==u&&v.insertBefore(u,v.firstChild)}function Kn(u,v){if(u.classList!==void 0)return u.classList.contains(v);var T=Cn(u);return T.length>0&&new RegExp("(^|\\s)"+v+"(\\s|$)").test(T)}function zt(u,v){if(u.classList!==void 0)for(var T=M(v),P=0,j=T.length;P<j;P++)u.classList.add(T[P]);else if(!Kn(u,v)){var ee=Cn(u);Yt(u,(ee?ee+" ":"")+v)}}function nn(u,v){u.classList!==void 0?u.classList.remove(v):Yt(u,b((" "+Cn(u)+" ").replace(" "+v+" "," ")))}function Yt(u,v){u.className.baseVal===void 0?u.className=v:u.className.baseVal=v}function Cn(u){return u.correspondingElement&&(u=u.correspondingElement),u.className.baseVal===void 0?u.className:u.className.baseVal}function jt(u,v){"opacity"in u.style?u.style.opacity=v:"filter"in u.style&&qi(u,v)}function qi(u,v){var T=!1,P="DXImageTransform.Microsoft.Alpha";try{T=u.filters.item(P)}catch{if(v===1)return}v=Math.round(v*100),T?(T.Enabled=v!==100,T.Opacity=v):u.style.filter+=" progid:"+P+"(opacity="+v+")"}function ya(u){for(var v=document.documentElement.style,T=0;T<u.length;T++)if(u[T]in v)return u[T];return!1}function ai(u,v,T){var P=v||new te(0,0);u.style[Ue]=(kt.ie3d?"translate("+P.x+"px,"+P.y+"px)":"translate3d("+P.x+"px,"+P.y+"px,0)")+(T?" scale("+T+")":"")}function Fn(u,v){u._leaflet_pos=v,kt.any3d?ai(u,v):(u.style.left=v.x+"px",u.style.top=v.y+"px")}function Tn(u){return u._leaflet_pos||new te(0,0)}var Qn,ci,Ei;if("onselectstart"in document)Qn=function(){on(window,"selectstart",ui)},ci=function(){Gn(window,"selectstart",ui)};else{var _i=ya(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Qn=function(){if(_i){var u=document.documentElement.style;Ei=u[_i],u[_i]="none"}},ci=function(){_i&&(document.documentElement.style[_i]=Ei,Ei=void 0)}}function Es(){on(window,"dragstart",ui)}function ki(){Gn(window,"dragstart",ui)}var Ho,co;function hs(u){for(;u.tabIndex===-1;)u=u.parentNode;u.style&&(Xi(),Ho=u,co=u.style.outlineStyle,u.style.outlineStyle="none",on(window,"keydown",Xi))}function Xi(){Ho&&(Ho.style.outlineStyle=co,Ho=void 0,co=void 0,Gn(window,"keydown",Xi))}function Gs(u){do u=u.parentNode;while((!u.offsetWidth||!u.offsetHeight)&&u!==document.body);return u}function uo(u){var v=u.getBoundingClientRect();return{x:v.width/u.offsetWidth||1,y:v.height/u.offsetHeight||1,boundingClientRect:v}}var ws={__proto__:null,TRANSFORM:Ue,TRANSITION:Et,TRANSITION_END:Ut,get:Dt,getStyle:Pt,create:Tt,remove:Ot,empty:Vt,toFront:Jt,toBack:xn,hasClass:Kn,addClass:zt,removeClass:nn,setClass:Yt,getClass:Cn,setOpacity:jt,testProp:ya,setTransform:ai,setPosition:Fn,getPosition:Tn,get disableTextSelection(){return Qn},get enableTextSelection(){return ci},disableImageDrag:Es,enableImageDrag:ki,preventOutline:hs,restoreOutline:Xi,getSizedParentNode:Gs,getScale:uo};function on(u,v,T,P){if(v&&typeof v=="object")for(var j in v)Qa(u,j,v[j],T);else{v=M(v);for(var ee=0,be=v.length;ee<be;ee++)Qa(u,v[ee],T,P)}return this}var Fa="_leaflet_events";function Gn(u,v,T,P){if(arguments.length===1)fo(u),delete u[Fa];else if(v&&typeof v=="object")for(var j in v)_a(u,j,v[j],T);else if(v=M(v),arguments.length===2)fo(u,function(Oe){return z(v,Oe)!==-1});else for(var ee=0,be=v.length;ee<be;ee++)_a(u,v[ee],T,P);return this}function fo(u,v){for(var T in u[Fa]){var P=T.split(/\d/)[0];(!v||v(P))&&_a(u,P,null,null,T)}}var Cs={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Qa(u,v,T,P){var j=v+f(T)+(P?"_"+f(P):"");if(u[Fa]&&u[Fa][j])return this;var ee=function(Oe){return T.call(P||u,Oe||window.event)},be=ee;!kt.touchNative&&kt.pointer&&v.indexOf("touch")===0?ee=lo(u,v,ee):kt.touch&&v==="dblclick"?ee=Xe(u,ee):"addEventListener"in u?v==="touchstart"||v==="touchmove"||v==="wheel"||v==="mousewheel"?u.addEventListener(Cs[v]||v,ee,kt.passiveEvents?{passive:!1}:!1):v==="mouseenter"||v==="mouseleave"?(ee=function(Oe){Oe=Oe||window.event,Ls(u,Oe)&&be(Oe)},u.addEventListener(Cs[v],ee,!1)):u.addEventListener(v,be,!1):u.attachEvent("on"+v,ee),u[Fa]=u[Fa]||{},u[Fa][j]=ee}function _a(u,v,T,P,j){j=j||v+f(T)+(P?"_"+f(P):"");var ee=u[Fa]&&u[Fa][j];if(!ee)return this;!kt.touchNative&&kt.pointer&&v.indexOf("touch")===0?ur(u,v,ee):kt.touch&&v==="dblclick"?ke(u,ee):"removeEventListener"in u?u.removeEventListener(Cs[v]||v,ee,!1):u.detachEvent("on"+v,ee),u[Fa][j]=null}function Ja(u){return u.stopPropagation?u.stopPropagation():u.originalEvent?u.originalEvent._stopped=!0:u.cancelBubble=!0,this}function Rs(u){return Qa(u,"wheel",Ja),this}function hr(u){return on(u,"mousedown touchstart dblclick contextmenu",Ja),u._leaflet_disable_click=!0,this}function ui(u){return u.preventDefault?u.preventDefault():u.returnValue=!1,this}function Ds(u){return ui(u),Ja(u),this}function dr(u){if(u.composedPath)return u.composedPath();for(var v=[],T=u.target;T;)v.push(T),T=T.parentNode;return v}function js(u,v){if(!v)return new te(u.clientX,u.clientY);var T=uo(v),P=T.boundingClientRect;return new te((u.clientX-P.left)/T.x-v.clientLeft,(u.clientY-P.top)/T.y-v.clientTop)}var ho=kt.linux&&kt.chrome?window.devicePixelRatio:kt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Si(u){return kt.edge?u.wheelDeltaY/2:u.deltaY&&u.deltaMode===0?-u.deltaY/ho:u.deltaY&&u.deltaMode===1?-u.deltaY*20:u.deltaY&&u.deltaMode===2?-u.deltaY*60:u.deltaX||u.deltaZ?0:u.wheelDelta?(u.wheelDeltaY||u.wheelDelta)/2:u.detail&&Math.abs(u.detail)<32765?-u.detail*20:u.detail?u.detail/-32765*60:0}function Ls(u,v){var T=v.relatedTarget;if(!T)return!0;try{for(;T&&T!==u;)T=T.parentNode}catch{return!1}return T!==u}var po={__proto__:null,on,off:Gn,stopPropagation:Ja,disableScrollPropagation:Rs,disableClickPropagation:hr,preventDefault:ui,stop:Ds,getPropagationPath:dr,getMousePosition:js,getWheelDelta:Si,isExternalTarget:Ls,addListener:on,removeListener:Gn},ka=K.extend({run:function(u,v,T,P){this.stop(),this._el=u,this._inProgress=!0,this._duration=T||.25,this._easeOutPower=1/Math.max(P||.5,.2),this._startPos=Tn(u),this._offset=v.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Q(this._animate,this),this._step()},_step:function(u){var v=+new Date-this._startTime,T=this._duration*1e3;v<T?this._runFrame(this._easeOut(v/T),u):(this._runFrame(1),this._complete())},_runFrame:function(u,v){var T=this._startPos.add(this._offset.multiplyBy(u));v&&T._round(),Fn(this._el,T),this.fire("step")},_complete:function(){J(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(u){return 1-Math.pow(1-u,this._easeOutPower)}}),yn=K.extend({options:{crs:St,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(u,v){v=R(this,v),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(u),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),v.maxBounds&&this.setMaxBounds(v.maxBounds),v.zoom!==void 0&&(this._zoom=this._limitZoom(v.zoom)),v.center&&v.zoom!==void 0&&this.setView(he(v.center),v.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Et&&kt.any3d&&!kt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),on(this._proxy,Ut,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(u,v,T){if(v=v===void 0?this._zoom:this._limitZoom(v),u=this._limitCenter(he(u),v,this.options.maxBounds),T=T||{},this._stop(),this._loaded&&!T.reset&&T!==!0){T.animate!==void 0&&(T.zoom=a({animate:T.animate},T.zoom),T.pan=a({animate:T.animate,duration:T.duration},T.pan));var P=this._zoom!==v?this._tryAnimatedZoom&&this._tryAnimatedZoom(u,v,T.zoom):this._tryAnimatedPan(u,T.pan);if(P)return clearTimeout(this._sizeTimer),this}return this._resetView(u,v,T.pan&&T.pan.noMoveStart),this},setZoom:function(u,v){return this._loaded?this.setView(this.getCenter(),u,{zoom:v}):(this._zoom=u,this)},zoomIn:function(u,v){return u=u||(kt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+u,v)},zoomOut:function(u,v){return u=u||(kt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-u,v)},setZoomAround:function(u,v,T){var P=this.getZoomScale(v),j=this.getSize().divideBy(2),ee=u instanceof te?u:this.latLngToContainerPoint(u),be=ee.subtract(j).multiplyBy(1-1/P),Oe=this.containerPointToLatLng(j.add(be));return this.setView(Oe,v,{zoom:T})},_getBoundsCenterZoom:function(u,v){v=v||{},u=u.getBounds?u.getBounds():me(u);var T=ce(v.paddingTopLeft||v.padding||[0,0]),P=ce(v.paddingBottomRight||v.padding||[0,0]),j=this.getBoundsZoom(u,!1,T.add(P));if(j=typeof v.maxZoom=="number"?Math.min(v.maxZoom,j):j,j===1/0)return{center:u.getCenter(),zoom:j};var ee=P.subtract(T).divideBy(2),be=this.project(u.getSouthWest(),j),Oe=this.project(u.getNorthEast(),j),Ye=this.unproject(be.add(Oe).divideBy(2).add(ee),j);return{center:Ye,zoom:j}},fitBounds:function(u,v){if(u=me(u),!u.isValid())throw new Error("Bounds are not valid.");var T=this._getBoundsCenterZoom(u,v);return this.setView(T.center,T.zoom,v)},fitWorld:function(u){return this.fitBounds([[-90,-180],[90,180]],u)},panTo:function(u,v){return this.setView(u,this._zoom,{pan:v})},panBy:function(u,v){if(u=ce(u).round(),v=v||{},!u.x&&!u.y)return this.fire("moveend");if(v.animate!==!0&&!this.getSize().contains(u))return this._resetView(this.unproject(this.project(this.getCenter()).add(u)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ka,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),v.noMoveStart||this.fire("movestart"),v.animate!==!1){zt(this._mapPane,"leaflet-pan-anim");var T=this._getMapPanePos().subtract(u).round();this._panAnim.run(this._mapPane,T,v.duration||.25,v.easeLinearity)}else this._rawPanBy(u),this.fire("move").fire("moveend");return this},flyTo:function(u,v,T){if(T=T||{},T.animate===!1||!kt.any3d)return this.setView(u,v,T);this._stop();var P=this.project(this.getCenter()),j=this.project(u),ee=this.getSize(),be=this._zoom;u=he(u),v=v===void 0?be:v;var Oe=Math.max(ee.x,ee.y),Ye=Oe*this.getZoomScale(be,v),yt=j.distanceTo(P)||1,Nt=1.42,$t=Nt*Nt;function Mn(Gi){var jr=Gi?-1:1,Rl=Gi?Ye:Oe,nh=Ye*Ye-Oe*Oe+jr*$t*$t*yt*yt,nu=2*Rl*$t*yt,iu=nh/nu,Wr=Math.sqrt(iu*iu+1)-iu,qa=Wr<1e-9?-18:Math.log(Wr);return qa}function Sa(Gi){return(Math.exp(Gi)-Math.exp(-Gi))/2}function wi(Gi){return(Math.exp(Gi)+Math.exp(-Gi))/2}function Wa(Gi){return Sa(Gi)/wi(Gi)}var Jn=Mn(0);function $n(Gi){return Oe*(wi(Jn)/wi(Jn+Nt*Gi))}function zn(Gi){return Oe*(wi(Jn)*Wa(Jn+Nt*Gi)-Sa(Jn))/$t}function Co(Gi){return 1-Math.pow(1-Gi,1.5)}var ba=Date.now(),eu=(Mn(1)-Jn)/Nt,In=T.duration?1e3*T.duration:1e3*eu*.8;function tu(){var Gi=(Date.now()-ba)/In,jr=Co(Gi)*eu;Gi<=1?(this._flyToFrame=Q(tu,this),this._move(this.unproject(P.add(j.subtract(P).multiplyBy(zn(jr)/yt)),be),this.getScaleZoom(Oe/$n(jr),be),{flyTo:!0})):this._move(u,v)._moveEnd(!0)}return this._moveStart(!0,T.noMoveStart),tu.call(this),this},flyToBounds:function(u,v){var T=this._getBoundsCenterZoom(u,v);return this.flyTo(T.center,T.zoom,v)},setMaxBounds:function(u){return u=me(u),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),u.isValid()?(this.options.maxBounds=u,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(u){var v=this.options.minZoom;return this.options.minZoom=u,this._loaded&&v!==u&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(u):this},setMaxZoom:function(u){var v=this.options.maxZoom;return this.options.maxZoom=u,this._loaded&&v!==u&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(u):this},panInsideBounds:function(u,v){this._enforcingBounds=!0;var T=this.getCenter(),P=this._limitCenter(T,this._zoom,me(u));return T.equals(P)||this.panTo(P,v),this._enforcingBounds=!1,this},panInside:function(u,v){v=v||{};var T=ce(v.paddingTopLeft||v.padding||[0,0]),P=ce(v.paddingBottomRight||v.padding||[0,0]),j=this.project(this.getCenter()),ee=this.project(u),be=this.getPixelBounds(),Oe=ne([be.min.add(T),be.max.subtract(P)]),Ye=Oe.getSize();if(!Oe.contains(ee)){this._enforcingBounds=!0;var yt=ee.subtract(Oe.getCenter()),Nt=Oe.extend(ee).getSize().subtract(Ye);j.x+=yt.x<0?-Nt.x:Nt.x,j.y+=yt.y<0?-Nt.y:Nt.y,this.panTo(this.unproject(j),v),this._enforcingBounds=!1}return this},invalidateSize:function(u){if(!this._loaded)return this;u=a({animate:!1,pan:!0},u===!0?{animate:!0}:u);var v=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var T=this.getSize(),P=v.divideBy(2).round(),j=T.divideBy(2).round(),ee=P.subtract(j);return!ee.x&&!ee.y?this:(u.animate&&u.pan?this.panBy(ee):(u.pan&&this._rawPanBy(ee),this.fire("move"),u.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:v,newSize:T}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(u){if(u=this._locateOptions=a({timeout:1e4,watch:!1},u),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var v=o(this._handleGeolocationResponse,this),T=o(this._handleGeolocationError,this);return u.watch?this._locationWatchId=navigator.geolocation.watchPosition(v,T,u):navigator.geolocation.getCurrentPosition(v,T,u),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(u){if(this._container._leaflet_id){var v=u.code,T=u.message||(v===1?"permission denied":v===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:v,message:"Geolocation error: "+T+"."})}},_handleGeolocationResponse:function(u){if(this._container._leaflet_id){var v=u.coords.latitude,T=u.coords.longitude,P=new xe(v,T),j=P.toBounds(u.coords.accuracy*2),ee=this._locateOptions;if(ee.setView){var be=this.getBoundsZoom(j);this.setView(P,ee.maxZoom?Math.min(be,ee.maxZoom):be)}var Oe={latlng:P,bounds:j,timestamp:u.timestamp};for(var Ye in u.coords)typeof u.coords[Ye]=="number"&&(Oe[Ye]=u.coords[Ye]);this.fire("locationfound",Oe)}},addHandler:function(u,v){if(!v)return this;var T=this[u]=new v(this);return this._handlers.push(T),this.options[u]&&T.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ot(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(J(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var u;for(u in this._layers)this._layers[u].remove();for(u in this._panes)Ot(this._panes[u]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(u,v){var T="leaflet-pane"+(u?" leaflet-"+u.replace("Pane","")+"-pane":""),P=Tt("div",T,v||this._mapPane);return u&&(this._panes[u]=P),P},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var u=this.getPixelBounds(),v=this.unproject(u.getBottomLeft()),T=this.unproject(u.getTopRight());return new fe(v,T)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(u,v,T){u=me(u),T=ce(T||[0,0]);var P=this.getZoom()||0,j=this.getMinZoom(),ee=this.getMaxZoom(),be=u.getNorthWest(),Oe=u.getSouthEast(),Ye=this.getSize().subtract(T),yt=ne(this.project(Oe,P),this.project(be,P)).getSize(),Nt=kt.any3d?this.options.zoomSnap:1,$t=Ye.x/yt.x,Mn=Ye.y/yt.y,Sa=v?Math.max($t,Mn):Math.min($t,Mn);return P=this.getScaleZoom(Sa,P),Nt&&(P=Math.round(P/(Nt/100))*(Nt/100),P=v?Math.ceil(P/Nt)*Nt:Math.floor(P/Nt)*Nt),Math.max(j,Math.min(ee,P))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new te(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(u,v){var T=this._getTopLeftPoint(u,v);return new G(T,T.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(u){return this.options.crs.getProjectedBounds(u===void 0?this.getZoom():u)},getPane:function(u){return typeof u=="string"?this._panes[u]:u},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(u,v){var T=this.options.crs;return v=v===void 0?this._zoom:v,T.scale(u)/T.scale(v)},getScaleZoom:function(u,v){var T=this.options.crs;v=v===void 0?this._zoom:v;var P=T.zoom(u*T.scale(v));return isNaN(P)?1/0:P},project:function(u,v){return v=v===void 0?this._zoom:v,this.options.crs.latLngToPoint(he(u),v)},unproject:function(u,v){return v=v===void 0?this._zoom:v,this.options.crs.pointToLatLng(ce(u),v)},layerPointToLatLng:function(u){var v=ce(u).add(this.getPixelOrigin());return this.unproject(v)},latLngToLayerPoint:function(u){var v=this.project(he(u))._round();return v._subtract(this.getPixelOrigin())},wrapLatLng:function(u){return this.options.crs.wrapLatLng(he(u))},wrapLatLngBounds:function(u){return this.options.crs.wrapLatLngBounds(me(u))},distance:function(u,v){return this.options.crs.distance(he(u),he(v))},containerPointToLayerPoint:function(u){return ce(u).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(u){return ce(u).add(this._getMapPanePos())},containerPointToLatLng:function(u){var v=this.containerPointToLayerPoint(ce(u));return this.layerPointToLatLng(v)},latLngToContainerPoint:function(u){return this.layerPointToContainerPoint(this.latLngToLayerPoint(he(u)))},mouseEventToContainerPoint:function(u){return js(u,this._container)},mouseEventToLayerPoint:function(u){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(u))},mouseEventToLatLng:function(u){return this.layerPointToLatLng(this.mouseEventToLayerPoint(u))},_initContainer:function(u){var v=this._container=Dt(u);if(v){if(v._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");on(v,"scroll",this._onScroll,this),this._containerId=f(v)},_initLayout:function(){var u=this._container;this._fadeAnimated=this.options.fadeAnimation&&kt.any3d,zt(u,"leaflet-container"+(kt.touch?" leaflet-touch":"")+(kt.retina?" leaflet-retina":"")+(kt.ielt9?" leaflet-oldie":"")+(kt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var v=Pt(u,"position");v!=="absolute"&&v!=="relative"&&v!=="fixed"&&v!=="sticky"&&(u.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var u=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Fn(this._mapPane,new te(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(zt(u.markerPane,"leaflet-zoom-hide"),zt(u.shadowPane,"leaflet-zoom-hide"))},_resetView:function(u,v,T){Fn(this._mapPane,new te(0,0));var P=!this._loaded;this._loaded=!0,v=this._limitZoom(v),this.fire("viewprereset");var j=this._zoom!==v;this._moveStart(j,T)._move(u,v)._moveEnd(j),this.fire("viewreset"),P&&this.fire("load")},_moveStart:function(u,v){return u&&this.fire("zoomstart"),v||this.fire("movestart"),this},_move:function(u,v,T,P){v===void 0&&(v=this._zoom);var j=this._zoom!==v;return this._zoom=v,this._lastCenter=u,this._pixelOrigin=this._getNewPixelOrigin(u),P?T&&T.pinch&&this.fire("zoom",T):((j||T&&T.pinch)&&this.fire("zoom",T),this.fire("move",T)),this},_moveEnd:function(u){return u&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return J(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(u){Fn(this._mapPane,this._getMapPanePos().subtract(u))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(u){this._targets={},this._targets[f(this._container)]=this;var v=u?Gn:on;v(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&v(window,"resize",this._onResize,this),kt.any3d&&this.options.transform3DLimit&&(u?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){J(this._resizeRequest),this._resizeRequest=Q(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var u=this._getMapPanePos();Math.max(Math.abs(u.x),Math.abs(u.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(u,v){for(var T=[],P,j=v==="mouseout"||v==="mouseover",ee=u.target||u.srcElement,be=!1;ee;){if(P=this._targets[f(ee)],P&&(v==="click"||v==="preclick")&&this._draggableMoved(P)){be=!0;break}if(P&&P.listens(v,!0)&&(j&&!Ls(ee,u)||(T.push(P),j))||ee===this._container)break;ee=ee.parentNode}return!T.length&&!be&&!j&&this.listens(v,!0)&&(T=[this]),T},_isClickDisabled:function(u){for(;u&&u!==this._container;){if(u._leaflet_disable_click)return!0;u=u.parentNode}},_handleDOMEvent:function(u){var v=u.target||u.srcElement;if(!(!this._loaded||v._leaflet_disable_events||u.type==="click"&&this._isClickDisabled(v))){var T=u.type;T==="mousedown"&&hs(v),this._fireDOMEvent(u,T)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(u,v,T){if(u.type==="click"){var P=a({},u);P.type="preclick",this._fireDOMEvent(P,P.type,T)}var j=this._findEventTargets(u,v);if(T){for(var ee=[],be=0;be<T.length;be++)T[be].listens(v,!0)&&ee.push(T[be]);j=ee.concat(j)}if(j.length){v==="contextmenu"&&ui(u);var Oe=j[0],Ye={originalEvent:u};if(u.type!=="keypress"&&u.type!=="keydown"&&u.type!=="keyup"){var yt=Oe.getLatLng&&(!Oe._radius||Oe._radius<=10);Ye.containerPoint=yt?this.latLngToContainerPoint(Oe.getLatLng()):this.mouseEventToContainerPoint(u),Ye.layerPoint=this.containerPointToLayerPoint(Ye.containerPoint),Ye.latlng=yt?Oe.getLatLng():this.layerPointToLatLng(Ye.layerPoint)}for(be=0;be<j.length;be++)if(j[be].fire(v,Ye,!0),Ye.originalEvent._stopped||j[be].options.bubblingMouseEvents===!1&&z(this._mouseEvents,v)!==-1)return}},_draggableMoved:function(u){return u=u.dragging&&u.dragging.enabled()?u:this,u.dragging&&u.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var u=0,v=this._handlers.length;u<v;u++)this._handlers[u].disable()},whenReady:function(u,v){return this._loaded?u.call(v||this,{target:this}):this.on("load",u,v),this},_getMapPanePos:function(){return Tn(this._mapPane)||new te(0,0)},_moved:function(){var u=this._getMapPanePos();return u&&!u.equals([0,0])},_getTopLeftPoint:function(u,v){var T=u&&v!==void 0?this._getNewPixelOrigin(u,v):this.getPixelOrigin();return T.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(u,v){var T=this.getSize()._divideBy(2);return this.project(u,v)._subtract(T)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(u,v,T){var P=this._getNewPixelOrigin(T,v);return this.project(u,v)._subtract(P)},_latLngBoundsToNewLayerBounds:function(u,v,T){var P=this._getNewPixelOrigin(T,v);return ne([this.project(u.getSouthWest(),v)._subtract(P),this.project(u.getNorthWest(),v)._subtract(P),this.project(u.getSouthEast(),v)._subtract(P),this.project(u.getNorthEast(),v)._subtract(P)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(u){return this.latLngToLayerPoint(u).subtract(this._getCenterLayerPoint())},_limitCenter:function(u,v,T){if(!T)return u;var P=this.project(u,v),j=this.getSize().divideBy(2),ee=new G(P.subtract(j),P.add(j)),be=this._getBoundsOffset(ee,T,v);return Math.abs(be.x)<=1&&Math.abs(be.y)<=1?u:this.unproject(P.add(be),v)},_limitOffset:function(u,v){if(!v)return u;var T=this.getPixelBounds(),P=new G(T.min.add(u),T.max.add(u));return u.add(this._getBoundsOffset(P,v))},_getBoundsOffset:function(u,v,T){var P=ne(this.project(v.getNorthEast(),T),this.project(v.getSouthWest(),T)),j=P.min.subtract(u.min),ee=P.max.subtract(u.max),be=this._rebound(j.x,-ee.x),Oe=this._rebound(j.y,-ee.y);return new te(be,Oe)},_rebound:function(u,v){return u+v>0?Math.round(u-v)/2:Math.max(0,Math.ceil(u))-Math.max(0,Math.floor(v))},_limitZoom:function(u){var v=this.getMinZoom(),T=this.getMaxZoom(),P=kt.any3d?this.options.zoomSnap:1;return P&&(u=Math.round(u/P)*P),Math.max(v,Math.min(T,u))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){nn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(u,v){var T=this._getCenterOffset(u)._trunc();return(v&&v.animate)!==!0&&!this.getSize().contains(T)?!1:(this.panBy(T,v),!0)},_createAnimProxy:function(){var u=this._proxy=Tt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(u),this.on("zoomanim",function(v){var T=Ue,P=this._proxy.style[T];ai(this._proxy,this.project(v.center,v.zoom),this.getZoomScale(v.zoom,1)),P===this._proxy.style[T]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ot(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var u=this.getCenter(),v=this.getZoom();ai(this._proxy,this.project(u,v),this.getZoomScale(v,1))},_catchTransitionEnd:function(u){this._animatingZoom&&u.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(u,v,T){if(this._animatingZoom)return!0;if(T=T||{},!this._zoomAnimated||T.animate===!1||this._nothingToAnimate()||Math.abs(v-this._zoom)>this.options.zoomAnimationThreshold)return!1;var P=this.getZoomScale(v),j=this._getCenterOffset(u)._divideBy(1-1/P);return T.animate!==!0&&!this.getSize().contains(j)?!1:(Q(function(){this._moveStart(!0,T.noMoveStart||!1)._animateZoom(u,v,!0)},this),!0)},_animateZoom:function(u,v,T,P){this._mapPane&&(T&&(this._animatingZoom=!0,this._animateToCenter=u,this._animateToZoom=v,zt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:u,zoom:v,noUpdate:P}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&nn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function gl(u,v){return new yn(u,v)}var Vi=re.extend({options:{position:"topright"},initialize:function(u){R(this,u)},getPosition:function(){return this.options.position},setPosition:function(u){var v=this._map;return v&&v.removeControl(this),this.options.position=u,v&&v.addControl(this),this},getContainer:function(){return this._container},addTo:function(u){this.remove(),this._map=u;var v=this._container=this.onAdd(u),T=this.getPosition(),P=u._controlCorners[T];return zt(v,"leaflet-control"),T.indexOf("bottom")!==-1?P.insertBefore(v,P.firstChild):P.appendChild(v),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ot(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(u){this._map&&u&&u.screenX>0&&u.screenY>0&&this._map.getContainer().focus()}}),ds=function(u){return new Vi(u)};yn.include({addControl:function(u){return u.addTo(this),this},removeControl:function(u){return u.remove(),this},_initControlPos:function(){var u=this._controlCorners={},v="leaflet-",T=this._controlContainer=Tt("div",v+"control-container",this._container);function P(j,ee){var be=v+j+" "+v+ee;u[j+ee]=Tt("div",be,T)}P("top","left"),P("top","right"),P("bottom","left"),P("bottom","right")},_clearControlPos:function(){for(var u in this._controlCorners)Ot(this._controlCorners[u]);Ot(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Yi=Vi.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(u,v,T,P){return T<P?-1:P<T?1:0}},initialize:function(u,v,T){R(this,T),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var P in u)this._addLayer(u[P],P);for(P in v)this._addLayer(v[P],P,!0)},onAdd:function(u){this._initLayout(),this._update(),this._map=u,u.on("zoomend",this._checkDisabledLayers,this);for(var v=0;v<this._layers.length;v++)this._layers[v].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(u){return Vi.prototype.addTo.call(this,u),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(u,v){return this._addLayer(u,v),this._map?this._update():this},addOverlay:function(u,v){return this._addLayer(u,v,!0),this._map?this._update():this},removeLayer:function(u){u.off("add remove",this._onLayerChange,this);var v=this._getLayer(f(u));return v&&this._layers.splice(this._layers.indexOf(v),1),this._map?this._update():this},expand:function(){zt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var u=this._map.getSize().y-(this._container.offsetTop+50);return u<this._section.clientHeight?(zt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=u+"px"):nn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return nn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var u="leaflet-control-layers",v=this._container=Tt("div",u),T=this.options.collapsed;v.setAttribute("aria-haspopup",!0),hr(v),Rs(v);var P=this._section=Tt("section",u+"-list");T&&(this._map.on("click",this.collapse,this),on(v,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var j=this._layersLink=Tt("a",u+"-toggle",v);j.href="#",j.title="Layers",j.setAttribute("role","button"),on(j,{keydown:function(ee){ee.keyCode===13&&this._expandSafely()},click:function(ee){ui(ee),this._expandSafely()}},this),T||this.expand(),this._baseLayersList=Tt("div",u+"-base",P),this._separator=Tt("div",u+"-separator",P),this._overlaysList=Tt("div",u+"-overlays",P),v.appendChild(P)},_getLayer:function(u){for(var v=0;v<this._layers.length;v++)if(this._layers[v]&&f(this._layers[v].layer)===u)return this._layers[v]},_addLayer:function(u,v,T){this._map&&u.on("add remove",this._onLayerChange,this),this._layers.push({layer:u,name:v,overlay:T}),this.options.sortLayers&&this._layers.sort(o(function(P,j){return this.options.sortFunction(P.layer,j.layer,P.name,j.name)},this)),this.options.autoZIndex&&u.setZIndex&&(this._lastZIndex++,u.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Vt(this._baseLayersList),Vt(this._overlaysList),this._layerControlInputs=[];var u,v,T,P,j=0;for(T=0;T<this._layers.length;T++)P=this._layers[T],this._addItem(P),v=v||P.overlay,u=u||!P.overlay,j+=P.overlay?0:1;return this.options.hideSingleBase&&(u=u&&j>1,this._baseLayersList.style.display=u?"":"none"),this._separator.style.display=v&&u?"":"none",this},_onLayerChange:function(u){this._handlingClick||this._update();var v=this._getLayer(f(u.target)),T=v.overlay?u.type==="add"?"overlayadd":"overlayremove":u.type==="add"?"baselayerchange":null;T&&this._map.fire(T,v)},_createRadioElement:function(u,v){var T='<input type="radio" class="leaflet-control-layers-selector" name="'+u+'"'+(v?' checked="checked"':"")+"/>",P=document.createElement("div");return P.innerHTML=T,P.firstChild},_addItem:function(u){var v=document.createElement("label"),T=this._map.hasLayer(u.layer),P;u.overlay?(P=document.createElement("input"),P.type="checkbox",P.className="leaflet-control-layers-selector",P.defaultChecked=T):P=this._createRadioElement("leaflet-base-layers_"+f(this),T),this._layerControlInputs.push(P),P.layerId=f(u.layer),on(P,"click",this._onInputClick,this);var j=document.createElement("span");j.innerHTML=" "+u.name;var ee=document.createElement("span");v.appendChild(ee),ee.appendChild(P),ee.appendChild(j);var be=u.overlay?this._overlaysList:this._baseLayersList;return be.appendChild(v),this._checkDisabledLayers(),v},_onInputClick:function(){if(!this._preventClick){var u=this._layerControlInputs,v,T,P=[],j=[];this._handlingClick=!0;for(var ee=u.length-1;ee>=0;ee--)v=u[ee],T=this._getLayer(v.layerId).layer,v.checked?P.push(T):v.checked||j.push(T);for(ee=0;ee<j.length;ee++)this._map.hasLayer(j[ee])&&this._map.removeLayer(j[ee]);for(ee=0;ee<P.length;ee++)this._map.hasLayer(P[ee])||this._map.addLayer(P[ee]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var u=this._layerControlInputs,v,T,P=this._map.getZoom(),j=u.length-1;j>=0;j--)v=u[j],T=this._getLayer(v.layerId).layer,v.disabled=T.options.minZoom!==void 0&&P<T.options.minZoom||T.options.maxZoom!==void 0&&P>T.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var u=this._section;this._preventClick=!0,on(u,"click",ui),this.expand();var v=this;setTimeout(function(){Gn(u,"click",ui),v._preventClick=!1})}}),Vu=function(u,v,T){return new Yi(u,v,T)},Oi=Vi.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(u){var v="leaflet-control-zoom",T=Tt("div",v+" leaflet-bar"),P=this.options;return this._zoomInButton=this._createButton(P.zoomInText,P.zoomInTitle,v+"-in",T,this._zoomIn),this._zoomOutButton=this._createButton(P.zoomOutText,P.zoomOutTitle,v+"-out",T,this._zoomOut),this._updateDisabled(),u.on("zoomend zoomlevelschange",this._updateDisabled,this),T},onRemove:function(u){u.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(u){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(u.shiftKey?3:1))},_zoomOut:function(u){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(u.shiftKey?3:1))},_createButton:function(u,v,T,P,j){var ee=Tt("a",T,P);return ee.innerHTML=u,ee.href="#",ee.title=v,ee.setAttribute("role","button"),ee.setAttribute("aria-label",v),hr(ee),on(ee,"click",Ds),on(ee,"click",j,this),on(ee,"click",this._refocusOnMap,this),ee},_updateDisabled:function(){var u=this._map,v="leaflet-disabled";nn(this._zoomInButton,v),nn(this._zoomOutButton,v),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||u._zoom===u.getMinZoom())&&(zt(this._zoomOutButton,v),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||u._zoom===u.getMaxZoom())&&(zt(this._zoomInButton,v),this._zoomInButton.setAttribute("aria-disabled","true"))}});yn.mergeOptions({zoomControl:!0}),yn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Oi,this.addControl(this.zoomControl))});var vl=function(u){return new Oi(u)},ic=Vi.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(u){var v="leaflet-control-scale",T=Tt("div",v),P=this.options;return this._addScales(P,v+"-line",T),u.on(P.updateWhenIdle?"moveend":"move",this._update,this),u.whenReady(this._update,this),T},onRemove:function(u){u.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(u,v,T){u.metric&&(this._mScale=Tt("div",v,T)),u.imperial&&(this._iScale=Tt("div",v,T))},_update:function(){var u=this._map,v=u.getSize().y/2,T=u.distance(u.containerPointToLatLng([0,v]),u.containerPointToLatLng([this.options.maxWidth,v]));this._updateScales(T)},_updateScales:function(u){this.options.metric&&u&&this._updateMetric(u),this.options.imperial&&u&&this._updateImperial(u)},_updateMetric:function(u){var v=this._getRoundNum(u),T=v<1e3?v+" m":v/1e3+" km";this._updateScale(this._mScale,T,v/u)},_updateImperial:function(u){var v=u*3.2808399,T,P,j;v>5280?(T=v/5280,P=this._getRoundNum(T),this._updateScale(this._iScale,P+" mi",P/T)):(j=this._getRoundNum(v),this._updateScale(this._iScale,j+" ft",j/v))},_updateScale:function(u,v,T){u.style.width=Math.round(this.options.maxWidth*T)+"px",u.innerHTML=v},_getRoundNum:function(u){var v=Math.pow(10,(Math.floor(u)+"").length-1),T=u/v;return T=T>=10?10:T>=5?5:T>=3?3:T>=2?2:1,v*T}}),ac=function(u){return new ic(u)},Ra='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Va=Vi.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(kt.inlineSvg?Ra+" ":"")+"Leaflet</a>"},initialize:function(u){R(this,u),this._attributions={}},onAdd:function(u){u.attributionControl=this,this._container=Tt("div","leaflet-control-attribution"),hr(this._container);for(var v in u._layers)u._layers[v].getAttribution&&this.addAttribution(u._layers[v].getAttribution());return this._update(),u.on("layeradd",this._addAttribution,this),this._container},onRemove:function(u){u.off("layeradd",this._addAttribution,this)},_addAttribution:function(u){u.layer.getAttribution&&(this.addAttribution(u.layer.getAttribution()),u.layer.once("remove",function(){this.removeAttribution(u.layer.getAttribution())},this))},setPrefix:function(u){return this.options.prefix=u,this._update(),this},addAttribution:function(u){return u?(this._attributions[u]||(this._attributions[u]=0),this._attributions[u]++,this._update(),this):this},removeAttribution:function(u){return u?(this._attributions[u]&&(this._attributions[u]--,this._update()),this):this},_update:function(){if(this._map){var u=[];for(var v in this._attributions)this._attributions[v]&&u.push(v);var T=[];this.options.prefix&&T.push(this.options.prefix),u.length&&T.push(u.join(", ")),this._container.innerHTML=T.join(' <span aria-hidden="true">|</span> ')}}});yn.mergeOptions({attributionControl:!0}),yn.addInitHook(function(){this.options.attributionControl&&new Va().addTo(this)});var Zi=function(u){return new Va(u)};Vi.Layers=Yi,Vi.Zoom=Oi,Vi.Scale=ic,Vi.Attribution=Va,ds.layers=Vu,ds.zoom=vl,ds.scale=ac,ds.attribution=Zi;var Hi=re.extend({initialize:function(u){this._map=u},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Hi.addTo=function(u,v){return u.addHandler(v,this),this};var Wc={Events:q},Hu=kt.touch?"touchstart mousedown":"mousedown",mo=K.extend({options:{clickTolerance:3},initialize:function(u,v,T,P){R(this,P),this._element=u,this._dragStartTarget=v||u,this._preventOutline=T},enable:function(){this._enabled||(on(this._dragStartTarget,Hu,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(mo._dragging===this&&this.finishDrag(!0),Gn(this._dragStartTarget,Hu,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(u){if(this._enabled&&(this._moved=!1,!Kn(this._element,"leaflet-zoom-anim"))){if(u.touches&&u.touches.length!==1){mo._dragging===this&&this.finishDrag();return}if(!(mo._dragging||u.shiftKey||u.which!==1&&u.button!==1&&!u.touches)&&(mo._dragging=this,this._preventOutline&&hs(this._element),Es(),Qn(),!this._moving)){this.fire("down");var v=u.touches?u.touches[0]:u,T=Gs(this._element);this._startPoint=new te(v.clientX,v.clientY),this._startPos=Tn(this._element),this._parentScale=uo(T);var P=u.type==="mousedown";on(document,P?"mousemove":"touchmove",this._onMove,this),on(document,P?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(u){if(this._enabled){if(u.touches&&u.touches.length>1){this._moved=!0;return}var v=u.touches&&u.touches.length===1?u.touches[0]:u,T=new te(v.clientX,v.clientY)._subtract(this._startPoint);!T.x&&!T.y||Math.abs(T.x)+Math.abs(T.y)<this.options.clickTolerance||(T.x/=this._parentScale.x,T.y/=this._parentScale.y,ui(u),this._moved||(this.fire("dragstart"),this._moved=!0,zt(document.body,"leaflet-dragging"),this._lastTarget=u.target||u.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),zt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(T),this._moving=!0,this._lastEvent=u,this._updatePosition())}},_updatePosition:function(){var u={originalEvent:this._lastEvent};this.fire("predrag",u),Fn(this._element,this._newPos),this.fire("drag",u)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(u){nn(document.body,"leaflet-dragging"),this._lastTarget&&(nn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Gn(document,"mousemove touchmove",this._onMove,this),Gn(document,"mouseup touchend touchcancel",this._onUp,this),ki(),ci();var v=this._moved&&this._moving;this._moving=!1,mo._dragging=!1,v&&this.fire("dragend",{noInertia:u,distance:this._newPos.distanceTo(this._startPos)})}});function Gu(u,v,T){var P,j=[1,4,2,8],ee,be,Oe,Ye,yt,Nt,$t,Mn;for(ee=0,Nt=u.length;ee<Nt;ee++)u[ee]._code=ps(u[ee],v);for(Oe=0;Oe<4;Oe++){for($t=j[Oe],P=[],ee=0,Nt=u.length,be=Nt-1;ee<Nt;be=ee++)Ye=u[ee],yt=u[be],Ye._code&$t?yt._code&$t||(Mn=Xc(yt,Ye,$t,v,T),Mn._code=ps(Mn,v),P.push(Mn)):(yt._code&$t&&(Mn=Xc(yt,Ye,$t,v,T),Mn._code=ps(Mn,v),P.push(Mn)),P.push(Ye));u=P}return u}function ju(u,v){var T,P,j,ee,be,Oe,Ye,yt,Nt;if(!u||u.length===0)throw new Error("latlngs not passed");ms(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var $t=he([0,0]),Mn=me(u),Sa=Mn.getNorthWest().distanceTo(Mn.getSouthWest())*Mn.getNorthEast().distanceTo(Mn.getNorthWest());Sa<1700&&($t=Wu(u));var wi=u.length,Wa=[];for(T=0;T<wi;T++){var Jn=he(u[T]);Wa.push(v.project(he([Jn.lat-$t.lat,Jn.lng-$t.lng])))}for(Oe=Ye=yt=0,T=0,P=wi-1;T<wi;P=T++)j=Wa[T],ee=Wa[P],be=j.y*ee.x-ee.y*j.x,Ye+=(j.x+ee.x)*be,yt+=(j.y+ee.y)*be,Oe+=be*3;Oe===0?Nt=Wa[0]:Nt=[Ye/Oe,yt/Oe];var $n=v.unproject(ce(Nt));return he([$n.lat+$t.lat,$n.lng+$t.lng])}function Wu(u){for(var v=0,T=0,P=0,j=0;j<u.length;j++){var ee=he(u[j]);v+=ee.lat,T+=ee.lng,P++}return he([v/P,T/P])}var qc={__proto__:null,clipPolygon:Gu,polygonCenter:ju,centroid:Wu};function qu(u,v){if(!v||!u.length)return u.slice();var T=v*v;return u=go(u,T),u=Yu(u,T),u}function Xu(u,v,T){return Math.sqrt(yl(u,v,T,!0))}function xd(u,v,T){return yl(u,v,T)}function Yu(u,v){var T=u.length,P=typeof Uint8Array<"u"?Uint8Array:Array,j=new P(T);j[0]=j[T-1]=1,Zu(u,j,v,0,T-1);var ee,be=[];for(ee=0;ee<T;ee++)j[ee]&&be.push(u[ee]);return be}function Zu(u,v,T,P,j){var ee=0,be,Oe,Ye;for(Oe=P+1;Oe<=j-1;Oe++)Ye=yl(u[Oe],u[P],u[j],!0),Ye>ee&&(be=Oe,ee=Ye);ee>T&&(v[be]=1,Zu(u,v,T,P,be),Zu(u,v,T,be,j))}function go(u,v){for(var T=[u[0]],P=1,j=0,ee=u.length;P<ee;P++)vo(u[P],u[j])>v&&(T.push(u[P]),j=P);return j<ee-1&&T.push(u[ee-1]),T}var Ku;function Sd(u,v,T,P,j){var ee=P?Ku:ps(u,T),be=ps(v,T),Oe,Ye,yt;for(Ku=be;;){if(!(ee|be))return[u,v];if(ee&be)return!1;Oe=ee||be,Ye=Xc(u,v,Oe,T,j),yt=ps(Ye,T),Oe===ee?(u=Ye,ee=yt):(v=Ye,be=yt)}}function Xc(u,v,T,P,j){var ee=v.x-u.x,be=v.y-u.y,Oe=P.min,Ye=P.max,yt,Nt;return T&8?(yt=u.x+ee*(Ye.y-u.y)/be,Nt=Ye.y):T&4?(yt=u.x+ee*(Oe.y-u.y)/be,Nt=Oe.y):T&2?(yt=Ye.x,Nt=u.y+be*(Ye.x-u.x)/ee):T&1&&(yt=Oe.x,Nt=u.y+be*(Oe.x-u.x)/ee),new te(yt,Nt,j)}function ps(u,v){var T=0;return u.x<v.min.x?T|=1:u.x>v.max.x&&(T|=2),u.y<v.min.y?T|=4:u.y>v.max.y&&(T|=8),T}function vo(u,v){var T=v.x-u.x,P=v.y-u.y;return T*T+P*P}function yl(u,v,T,P){var j=v.x,ee=v.y,be=T.x-j,Oe=T.y-ee,Ye=be*be+Oe*Oe,yt;return Ye>0&&(yt=((u.x-j)*be+(u.y-ee)*Oe)/Ye,yt>1?(j=T.x,ee=T.y):yt>0&&(j+=be*yt,ee+=Oe*yt)),be=u.x-j,Oe=u.y-ee,P?be*be+Oe*Oe:new te(j,ee)}function ms(u){return!I(u[0])||typeof u[0][0]!="object"&&typeof u[0][0]<"u"}function Go(u){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ms(u)}function yo(u,v){var T,P,j,ee,be,Oe,Ye,yt;if(!u||u.length===0)throw new Error("latlngs not passed");ms(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var Nt=he([0,0]),$t=me(u),Mn=$t.getNorthWest().distanceTo($t.getSouthWest())*$t.getNorthEast().distanceTo($t.getNorthWest());Mn<1700&&(Nt=Wu(u));var Sa=u.length,wi=[];for(T=0;T<Sa;T++){var Wa=he(u[T]);wi.push(v.project(he([Wa.lat-Nt.lat,Wa.lng-Nt.lng])))}for(T=0,P=0;T<Sa-1;T++)P+=wi[T].distanceTo(wi[T+1])/2;if(P===0)yt=wi[0];else for(T=0,ee=0;T<Sa-1;T++)if(be=wi[T],Oe=wi[T+1],j=be.distanceTo(Oe),ee+=j,ee>P){Ye=(ee-P)/j,yt=[Oe.x-Ye*(Oe.x-be.x),Oe.y-Ye*(Oe.y-be.y)];break}var Jn=v.unproject(ce(yt));return he([Jn.lat+Nt.lat,Jn.lng+Nt.lng])}var _l={__proto__:null,simplify:qu,pointToSegmentDistance:Xu,closestPointOnSegment:xd,clipSegment:Sd,_getEdgeIntersection:Xc,_getBitCode:ps,_sqClosestPointOnSegment:yl,isFlat:ms,_flat:Go,polylineCenter:yo},aa={project:function(u){return new te(u.lng,u.lat)},unproject:function(u){return new xe(u.y,u.x)},bounds:new G([-180,-90],[180,90])},xl={R:6378137,R_MINOR:6356752314245179e-9,bounds:new G([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(u){var v=Math.PI/180,T=this.R,P=u.lat*v,j=this.R_MINOR/T,ee=Math.sqrt(1-j*j),be=ee*Math.sin(P),Oe=Math.tan(Math.PI/4-P/2)/Math.pow((1-be)/(1+be),ee/2);return P=-T*Math.log(Math.max(Oe,1e-10)),new te(u.lng*v*T,P)},unproject:function(u){for(var v=180/Math.PI,T=this.R,P=this.R_MINOR/T,j=Math.sqrt(1-P*P),ee=Math.exp(-u.y/T),be=Math.PI/2-2*Math.atan(ee),Oe=0,Ye=.1,yt;Oe<15&&Math.abs(Ye)>1e-7;Oe++)yt=j*Math.sin(be),yt=Math.pow((1-yt)/(1+yt),j/2),Ye=Math.PI/2-2*Math.atan(ee*yt)-be,be+=Ye;return new xe(be*v,u.x*v/T)}},Qf={__proto__:null,LonLat:aa,Mercator:xl,SphericalMercator:et},Qu=a({},Ae,{code:"EPSG:3395",projection:xl,transformation:(function(){var u=.5/(Math.PI*xl.R);return nt(u,.5,-u,.5)})()}),Sl=a({},Ae,{code:"EPSG:4326",projection:aa,transformation:nt(1/180,1,-1/180,.5)}),jo=a({},_e,{projection:aa,transformation:nt(1,0,-1,0),scale:function(u){return Math.pow(2,u)},zoom:function(u){return Math.log(u)/Math.LN2},distance:function(u,v){var T=v.lng-u.lng,P=v.lat-u.lat;return Math.sqrt(T*T+P*P)},infinite:!0});_e.Earth=Ae,_e.EPSG3395=Qu,_e.EPSG3857=St,_e.EPSG900913=Ne,_e.EPSG4326=Sl,_e.Simple=jo;var gs=K.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(u){return u.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(u){return u&&u.removeLayer(this),this},getPane:function(u){return this._map.getPane(u?this.options[u]||u:this.options.pane)},addInteractiveTarget:function(u){return this._map._targets[f(u)]=this,this},removeInteractiveTarget:function(u){return delete this._map._targets[f(u)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(u){var v=u.target;if(v.hasLayer(this)){if(this._map=v,this._zoomAnimated=v._zoomAnimated,this.getEvents){var T=this.getEvents();v.on(T,this),this.once("remove",function(){v.off(T,this)},this)}this.onAdd(v),this.fire("add"),v.fire("layeradd",{layer:this})}}});yn.include({addLayer:function(u){if(!u._layerAdd)throw new Error("The provided object is not a Layer.");var v=f(u);return this._layers[v]?this:(this._layers[v]=u,u._mapToAdd=this,u.beforeAdd&&u.beforeAdd(this),this.whenReady(u._layerAdd,u),this)},removeLayer:function(u){var v=f(u);return this._layers[v]?(this._loaded&&u.onRemove(this),delete this._layers[v],this._loaded&&(this.fire("layerremove",{layer:u}),u.fire("remove")),u._map=u._mapToAdd=null,this):this},hasLayer:function(u){return f(u)in this._layers},eachLayer:function(u,v){for(var T in this._layers)u.call(v,this._layers[T]);return this},_addLayers:function(u){u=u?I(u)?u:[u]:[];for(var v=0,T=u.length;v<T;v++)this.addLayer(u[v])},_addZoomLimit:function(u){(!isNaN(u.options.maxZoom)||!isNaN(u.options.minZoom))&&(this._zoomBoundLayers[f(u)]=u,this._updateZoomLevels())},_removeZoomLimit:function(u){var v=f(u);this._zoomBoundLayers[v]&&(delete this._zoomBoundLayers[v],this._updateZoomLevels())},_updateZoomLevels:function(){var u=1/0,v=-1/0,T=this._getZoomSpan();for(var P in this._zoomBoundLayers){var j=this._zoomBoundLayers[P].options;u=j.minZoom===void 0?u:Math.min(u,j.minZoom),v=j.maxZoom===void 0?v:Math.max(v,j.maxZoom)}this._layersMaxZoom=v===-1/0?void 0:v,this._layersMinZoom=u===1/0?void 0:u,T!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var bl=gs.extend({initialize:function(u,v){R(this,v),this._layers={};var T,P;if(u)for(T=0,P=u.length;T<P;T++)this.addLayer(u[T])},addLayer:function(u){var v=this.getLayerId(u);return this._layers[v]=u,this._map&&this._map.addLayer(u),this},removeLayer:function(u){var v=u in this._layers?u:this.getLayerId(u);return this._map&&this._layers[v]&&this._map.removeLayer(this._layers[v]),delete this._layers[v],this},hasLayer:function(u){var v=typeof u=="number"?u:this.getLayerId(u);return v in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(u){var v=Array.prototype.slice.call(arguments,1),T,P;for(T in this._layers)P=this._layers[T],P[u]&&P[u].apply(P,v);return this},onAdd:function(u){this.eachLayer(u.addLayer,u)},onRemove:function(u){this.eachLayer(u.removeLayer,u)},eachLayer:function(u,v){for(var T in this._layers)u.call(v,this._layers[T]);return this},getLayer:function(u){return this._layers[u]},getLayers:function(){var u=[];return this.eachLayer(u.push,u),u},setZIndex:function(u){return this.invoke("setZIndex",u)},getLayerId:function(u){return f(u)}}),Os=function(u,v){return new bl(u,v)},pr=bl.extend({addLayer:function(u){return this.hasLayer(u)?this:(u.addEventParent(this),bl.prototype.addLayer.call(this,u),this.fire("layeradd",{layer:u}))},removeLayer:function(u){return this.hasLayer(u)?(u in this._layers&&(u=this._layers[u]),u.removeEventParent(this),bl.prototype.removeLayer.call(this,u),this.fire("layerremove",{layer:u})):this},setStyle:function(u){return this.invoke("setStyle",u)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var u=new fe;for(var v in this._layers){var T=this._layers[v];u.extend(T.getBounds?T.getBounds():T.getLatLng())}return u}}),Ju=function(u,v){return new pr(u,v)},mr=re.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(u){R(this,u)},createIcon:function(u){return this._createIcon("icon",u)},createShadow:function(u){return this._createIcon("shadow",u)},_createIcon:function(u,v){var T=this._getIconUrl(u);if(!T){if(u==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var P=this._createImg(T,v&&v.tagName==="IMG"?v:null);return this._setIconStyles(P,u),(this.options.crossOrigin||this.options.crossOrigin==="")&&(P.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),P},_setIconStyles:function(u,v){var T=this.options,P=T[v+"Size"];typeof P=="number"&&(P=[P,P]);var j=ce(P),ee=ce(v==="shadow"&&T.shadowAnchor||T.iconAnchor||j&&j.divideBy(2,!0));u.className="leaflet-marker-"+v+" "+(T.className||""),ee&&(u.style.marginLeft=-ee.x+"px",u.style.marginTop=-ee.y+"px"),j&&(u.style.width=j.x+"px",u.style.height=j.y+"px")},_createImg:function(u,v){return v=v||document.createElement("img"),v.src=u,v},_getIconUrl:function(u){return kt.retina&&this.options[u+"RetinaUrl"]||this.options[u+"Url"]}});function sc(u){return new mr(u)}var Tl=mr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(u){return typeof Tl.imagePath!="string"&&(Tl.imagePath=this._detectIconPath()),(this.options.imagePath||Tl.imagePath)+mr.prototype._getIconUrl.call(this,u)},_stripUrl:function(u){var v=function(T,P,j){var ee=P.exec(T);return ee&&ee[j]};return u=v(u,/^url\((['"])?(.+)\1\)$/,2),u&&v(u,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var u=Tt("div","leaflet-default-icon-path",document.body),v=Pt(u,"background-image")||Pt(u,"backgroundImage");if(document.body.removeChild(u),v=this._stripUrl(v),v)return v;var T=document.querySelector('link[href$="leaflet.css"]');return T?T.href.substring(0,T.href.length-11-1):""}}),Ml=Hi.extend({initialize:function(u){this._marker=u},addHooks:function(){var u=this._marker._icon;this._draggable||(this._draggable=new mo(u,u,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),zt(u,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&nn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(u){var v=this._marker,T=v._map,P=this._marker.options.autoPanSpeed,j=this._marker.options.autoPanPadding,ee=Tn(v._icon),be=T.getPixelBounds(),Oe=T.getPixelOrigin(),Ye=ne(be.min._subtract(Oe).add(j),be.max._subtract(Oe).subtract(j));if(!Ye.contains(ee)){var yt=ce((Math.max(Ye.max.x,ee.x)-Ye.max.x)/(be.max.x-Ye.max.x)-(Math.min(Ye.min.x,ee.x)-Ye.min.x)/(be.min.x-Ye.min.x),(Math.max(Ye.max.y,ee.y)-Ye.max.y)/(be.max.y-Ye.max.y)-(Math.min(Ye.min.y,ee.y)-Ye.min.y)/(be.min.y-Ye.min.y)).multiplyBy(P);T.panBy(yt,{animate:!1}),this._draggable._newPos._add(yt),this._draggable._startPos._add(yt),Fn(v._icon,this._draggable._newPos),this._onDrag(u),this._panRequest=Q(this._adjustPan.bind(this,u))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(u){this._marker.options.autoPan&&(J(this._panRequest),this._panRequest=Q(this._adjustPan.bind(this,u)))},_onDrag:function(u){var v=this._marker,T=v._shadow,P=Tn(v._icon),j=v._map.layerPointToLatLng(P);T&&Fn(T,P),v._latlng=j,u.latlng=j,u.oldLatLng=this._oldLatLng,v.fire("move",u).fire("drag",u)},_onDragEnd:function(u){J(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",u)}}),rc=gs.extend({options:{icon:new Tl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(u,v){R(this,v),this._latlng=he(u)},onAdd:function(u){this._zoomAnimated=this._zoomAnimated&&u.options.markerZoomAnimation,this._zoomAnimated&&u.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(u){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&u.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(u){var v=this._latlng;return this._latlng=he(u),this.update(),this.fire("move",{oldLatLng:v,latlng:this._latlng})},setZIndexOffset:function(u){return this.options.zIndexOffset=u,this.update()},getIcon:function(){return this.options.icon},setIcon:function(u){return this.options.icon=u,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var u=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(u)}return this},_initIcon:function(){var u=this.options,v="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),T=u.icon.createIcon(this._icon),P=!1;T!==this._icon&&(this._icon&&this._removeIcon(),P=!0,u.title&&(T.title=u.title),T.tagName==="IMG"&&(T.alt=u.alt||"")),zt(T,v),u.keyboard&&(T.tabIndex="0",T.setAttribute("role","button")),this._icon=T,u.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&on(T,"focus",this._panOnFocus,this);var j=u.icon.createShadow(this._shadow),ee=!1;j!==this._shadow&&(this._removeShadow(),ee=!0),j&&(zt(j,v),j.alt=""),this._shadow=j,u.opacity<1&&this._updateOpacity(),P&&this.getPane().appendChild(this._icon),this._initInteraction(),j&&ee&&this.getPane(u.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Gn(this._icon,"focus",this._panOnFocus,this),Ot(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ot(this._shadow),this._shadow=null},_setPos:function(u){this._icon&&Fn(this._icon,u),this._shadow&&Fn(this._shadow,u),this._zIndex=u.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(u){this._icon&&(this._icon.style.zIndex=this._zIndex+u)},_animateZoom:function(u){var v=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center).round();this._setPos(v)},_initInteraction:function(){if(this.options.interactive&&(zt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ml)){var u=this.options.draggable;this.dragging&&(u=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ml(this),u&&this.dragging.enable()}},setOpacity:function(u){return this.options.opacity=u,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var u=this.options.opacity;this._icon&&jt(this._icon,u),this._shadow&&jt(this._shadow,u)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var u=this._map;if(u){var v=this.options.icon.options,T=v.iconSize?ce(v.iconSize):ce(0,0),P=v.iconAnchor?ce(v.iconAnchor):ce(0,0);u.panInside(this._latlng,{paddingTopLeft:P,paddingBottomRight:T.subtract(P)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Yc(u,v){return new rc(u,v)}var vs=gs.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(u){this._renderer=u.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(u){return R(this,u),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&u&&Object.prototype.hasOwnProperty.call(u,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),fi=vs.extend({options:{fill:!0,radius:10},initialize:function(u,v){R(this,v),this._latlng=he(u),this._radius=this.options.radius},setLatLng:function(u){var v=this._latlng;return this._latlng=he(u),this.redraw(),this.fire("move",{oldLatLng:v,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(u){return this.options.radius=this._radius=u,this.redraw()},getRadius:function(){return this._radius},setStyle:function(u){var v=u&&u.radius||this._radius;return vs.prototype.setStyle.call(this,u),this.setRadius(v),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var u=this._radius,v=this._radiusY||u,T=this._clickTolerance(),P=[u+T,v+T];this._pxBounds=new G(this._point.subtract(P),this._point.add(P))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(u){return u.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function bd(u,v){return new fi(u,v)}var $u=fi.extend({initialize:function(u,v,T){if(typeof v=="number"&&(v=a({},T,{radius:v})),R(this,v),this._latlng=he(u),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(u){return this._mRadius=u,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var u=[this._radius,this._radiusY||this._radius];return new fe(this._map.layerPointToLatLng(this._point.subtract(u)),this._map.layerPointToLatLng(this._point.add(u)))},setStyle:vs.prototype.setStyle,_project:function(){var u=this._latlng.lng,v=this._latlng.lat,T=this._map,P=T.options.crs;if(P.distance===Ae.distance){var j=Math.PI/180,ee=this._mRadius/Ae.R/j,be=T.project([v+ee,u]),Oe=T.project([v-ee,u]),Ye=be.add(Oe).divideBy(2),yt=T.unproject(Ye).lat,Nt=Math.acos((Math.cos(ee*j)-Math.sin(v*j)*Math.sin(yt*j))/(Math.cos(v*j)*Math.cos(yt*j)))/j;(isNaN(Nt)||Nt===0)&&(Nt=ee/Math.cos(Math.PI/180*v)),this._point=Ye.subtract(T.getPixelOrigin()),this._radius=isNaN(Nt)?0:Ye.x-T.project([yt,u-Nt]).x,this._radiusY=Ye.y-be.y}else{var $t=P.unproject(P.project(this._latlng).subtract([this._mRadius,0]));this._point=T.latLngToLayerPoint(this._latlng),this._radius=this._point.x-T.latLngToLayerPoint($t).x}this._updateBounds()}});function Jf(u,v,T){return new $u(u,v,T)}var Ns=vs.extend({options:{smoothFactor:1,noClip:!1},initialize:function(u,v){R(this,v),this._setLatLngs(u)},getLatLngs:function(){return this._latlngs},setLatLngs:function(u){return this._setLatLngs(u),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(u){for(var v=1/0,T=null,P=yl,j,ee,be=0,Oe=this._parts.length;be<Oe;be++)for(var Ye=this._parts[be],yt=1,Nt=Ye.length;yt<Nt;yt++){j=Ye[yt-1],ee=Ye[yt];var $t=P(u,j,ee,!0);$t<v&&(v=$t,T=P(u,j,ee))}return T&&(T.distance=Math.sqrt(v)),T},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return yo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(u,v){return v=v||this._defaultShape(),u=he(u),v.push(u),this._bounds.extend(u),this.redraw()},_setLatLngs:function(u){this._bounds=new fe,this._latlngs=this._convertLatLngs(u)},_defaultShape:function(){return ms(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(u){for(var v=[],T=ms(u),P=0,j=u.length;P<j;P++)T?(v[P]=he(u[P]),this._bounds.extend(v[P])):v[P]=this._convertLatLngs(u[P]);return v},_project:function(){var u=new G;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,u),this._bounds.isValid()&&u.isValid()&&(this._rawPxBounds=u,this._updateBounds())},_updateBounds:function(){var u=this._clickTolerance(),v=new te(u,u);this._rawPxBounds&&(this._pxBounds=new G([this._rawPxBounds.min.subtract(v),this._rawPxBounds.max.add(v)]))},_projectLatlngs:function(u,v,T){var P=u[0]instanceof xe,j=u.length,ee,be;if(P){for(be=[],ee=0;ee<j;ee++)be[ee]=this._map.latLngToLayerPoint(u[ee]),T.extend(be[ee]);v.push(be)}else for(ee=0;ee<j;ee++)this._projectLatlngs(u[ee],v,T)},_clipPoints:function(){var u=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}var v=this._parts,T,P,j,ee,be,Oe,Ye;for(T=0,j=0,ee=this._rings.length;T<ee;T++)for(Ye=this._rings[T],P=0,be=Ye.length;P<be-1;P++)Oe=Sd(Ye[P],Ye[P+1],u,P,!0),Oe&&(v[j]=v[j]||[],v[j].push(Oe[0]),(Oe[1]!==Ye[P+1]||P===be-2)&&(v[j].push(Oe[1]),j++))}},_simplifyPoints:function(){for(var u=this._parts,v=this.options.smoothFactor,T=0,P=u.length;T<P;T++)u[T]=qu(u[T],v)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(u,v){var T,P,j,ee,be,Oe,Ye=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(T=0,ee=this._parts.length;T<ee;T++)for(Oe=this._parts[T],P=0,be=Oe.length,j=be-1;P<be;j=P++)if(!(!v&&P===0)&&Xu(u,Oe[j],Oe[P])<=Ye)return!0;return!1}});function Wo(u,v){return new Ns(u,v)}Ns._flat=Go;var Al=Ns.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ju(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(u){var v=Ns.prototype._convertLatLngs.call(this,u),T=v.length;return T>=2&&v[0]instanceof xe&&v[0].equals(v[T-1])&&v.pop(),v},_setLatLngs:function(u){Ns.prototype._setLatLngs.call(this,u),ms(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ms(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var u=this._renderer._bounds,v=this.options.weight,T=new te(v,v);if(u=new G(u.min.subtract(T),u.max.add(T)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}for(var P=0,j=this._rings.length,ee;P<j;P++)ee=Gu(this._rings[P],u,!0),ee.length&&this._parts.push(ee)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(u){var v=!1,T,P,j,ee,be,Oe,Ye,yt;if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(ee=0,Ye=this._parts.length;ee<Ye;ee++)for(T=this._parts[ee],be=0,yt=T.length,Oe=yt-1;be<yt;Oe=be++)P=T[be],j=T[Oe],P.y>u.y!=j.y>u.y&&u.x<(j.x-P.x)*(u.y-P.y)/(j.y-P.y)+P.x&&(v=!v);return v||Ns.prototype._containsPoint.call(this,u,!0)}});function Td(u,v){return new Al(u,v)}var $a=pr.extend({initialize:function(u,v){R(this,v),this._layers={},u&&this.addData(u)},addData:function(u){var v=I(u)?u:u.features,T,P,j;if(v){for(T=0,P=v.length;T<P;T++)j=v[T],(j.geometries||j.geometry||j.features||j.coordinates)&&this.addData(j);return this}var ee=this.options;if(ee.filter&&!ee.filter(u))return this;var be=hi(u,ee);return be?(be.feature=Kc(u),be.defaultOptions=be.options,this.resetStyle(be),ee.onEachFeature&&ee.onEachFeature(u,be),this.addLayer(be)):this},resetStyle:function(u){return u===void 0?this.eachLayer(this.resetStyle,this):(u.options=a({},u.defaultOptions),this._setLayerStyle(u,this.options.style),this)},setStyle:function(u){return this.eachLayer(function(v){this._setLayerStyle(v,u)},this)},_setLayerStyle:function(u,v){u.setStyle&&(typeof v=="function"&&(v=v(u.feature)),u.setStyle(v))}});function hi(u,v){var T=u.type==="Feature"?u.geometry:u,P=T?T.coordinates:null,j=[],ee=v&&v.pointToLayer,be=v&&v.coordsToLatLng||Zc,Oe,Ye,yt,Nt;if(!P&&!T)return null;switch(T.type){case"Point":return Oe=be(P),El(ee,u,Oe,v);case"MultiPoint":for(yt=0,Nt=P.length;yt<Nt;yt++)Oe=be(P[yt]),j.push(El(ee,u,Oe,v));return new pr(j);case"LineString":case"MultiLineString":return Ye=oc(P,T.type==="LineString"?0:1,be),new Ns(Ye,v);case"Polygon":case"MultiPolygon":return Ye=oc(P,T.type==="Polygon"?1:2,be),new Al(Ye,v);case"GeometryCollection":for(yt=0,Nt=T.geometries.length;yt<Nt;yt++){var $t=hi({geometry:T.geometries[yt],type:"Feature",properties:u.properties},v);$t&&j.push($t)}return new pr(j);case"FeatureCollection":for(yt=0,Nt=T.features.length;yt<Nt;yt++){var Mn=hi(T.features[yt],v);Mn&&j.push(Mn)}return new pr(j);default:throw new Error("Invalid GeoJSON object.")}}function El(u,v,T,P){return u?u(v,T):new rc(T,P&&P.markersInheritOptions&&P)}function Zc(u){return new xe(u[1],u[0],u[2])}function oc(u,v,T){for(var P=[],j=0,ee=u.length,be;j<ee;j++)be=v?oc(u[j],v-1,T):(T||Zc)(u[j]),P.push(be);return P}function lc(u,v){return u=he(u),u.alt!==void 0?[x(u.lng,v),x(u.lat,v),x(u.alt,v)]:[x(u.lng,v),x(u.lat,v)]}function wl(u,v,T,P){for(var j=[],ee=0,be=u.length;ee<be;ee++)j.push(v?wl(u[ee],ms(u[ee])?0:v-1,T,P):lc(u[ee],P));return!v&&T&&j.length>0&&j.push(j[0].slice()),j}function gr(u,v){return u.feature?a({},u.feature,{geometry:v}):Kc(v)}function Kc(u){return u.type==="Feature"||u.type==="FeatureCollection"?u:{type:"Feature",properties:{},geometry:u}}var qo={toGeoJSON:function(u){return gr(this,{type:"Point",coordinates:lc(this.getLatLng(),u)})}};rc.include(qo),$u.include(qo),fi.include(qo),Ns.include({toGeoJSON:function(u){var v=!ms(this._latlngs),T=wl(this._latlngs,v?1:0,!1,u);return gr(this,{type:(v?"Multi":"")+"LineString",coordinates:T})}}),Al.include({toGeoJSON:function(u){var v=!ms(this._latlngs),T=v&&!ms(this._latlngs[0]),P=wl(this._latlngs,T?2:v?1:0,!0,u);return v||(P=[P]),gr(this,{type:(T?"Multi":"")+"Polygon",coordinates:P})}}),bl.include({toMultiPoint:function(u){var v=[];return this.eachLayer(function(T){v.push(T.toGeoJSON(u).geometry.coordinates)}),gr(this,{type:"MultiPoint",coordinates:v})},toGeoJSON:function(u){var v=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(v==="MultiPoint")return this.toMultiPoint(u);var T=v==="GeometryCollection",P=[];return this.eachLayer(function(j){if(j.toGeoJSON){var ee=j.toGeoJSON(u);if(T)P.push(ee.geometry);else{var be=Kc(ee);be.type==="FeatureCollection"?P.push.apply(P,be.features):P.push(be)}}}),T?gr(this,{geometries:P,type:"GeometryCollection"}):{type:"FeatureCollection",features:P}}});function Qc(u,v){return new $a(u,v)}var cc=Qc,Ha=gs.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(u,v,T){this._url=u,this._bounds=me(v),R(this,T)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(zt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ot(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(u){return this.options.opacity=u,this._image&&this._updateOpacity(),this},setStyle:function(u){return u.opacity&&this.setOpacity(u.opacity),this},bringToFront:function(){return this._map&&Jt(this._image),this},bringToBack:function(){return this._map&&xn(this._image),this},setUrl:function(u){return this._url=u,this._image&&(this._image.src=u),this},setBounds:function(u){return this._bounds=me(u),this._map&&this._reset(),this},getEvents:function(){var u={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var u=this._url.tagName==="IMG",v=this._image=u?this._url:Tt("img");if(zt(v,"leaflet-image-layer"),this._zoomAnimated&&zt(v,"leaflet-zoom-animated"),this.options.className&&zt(v,this.options.className),v.onselectstart=y,v.onmousemove=y,v.onload=o(this.fire,this,"load"),v.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),u){this._url=v.src;return}v.src=this._url,v.alt=this.options.alt},_animateZoom:function(u){var v=this._map.getZoomScale(u.zoom),T=this._map._latLngBoundsToNewLayerBounds(this._bounds,u.zoom,u.center).min;ai(this._image,T,v)},_reset:function(){var u=this._image,v=new G(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),T=v.getSize();Fn(u,v.min),u.style.width=T.x+"px",u.style.height=T.y+"px"},_updateOpacity:function(){jt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var u=this.options.errorOverlayUrl;u&&this._url!==u&&(this._url=u,this._image.src=u)},getCenter:function(){return this._bounds.getCenter()}}),ef=function(u,v,T){return new Ha(u,v,T)},_o=Ha.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var u=this._url.tagName==="VIDEO",v=this._image=u?this._url:Tt("video");if(zt(v,"leaflet-image-layer"),this._zoomAnimated&&zt(v,"leaflet-zoom-animated"),this.options.className&&zt(v,this.options.className),v.onselectstart=y,v.onmousemove=y,v.onloadeddata=o(this.fire,this,"load"),u){for(var T=v.getElementsByTagName("source"),P=[],j=0;j<T.length;j++)P.push(T[j].src);this._url=T.length>0?P:[v.src];return}I(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(v.style,"objectFit")&&(v.style.objectFit="fill"),v.autoplay=!!this.options.autoplay,v.loop=!!this.options.loop,v.muted=!!this.options.muted,v.playsInline=!!this.options.playsInline;for(var ee=0;ee<this._url.length;ee++){var be=Tt("source");be.src=this._url[ee],v.appendChild(be)}}});function uc(u,v,T){return new _o(u,v,T)}var fc=Ha.extend({_initImage:function(){var u=this._image=this._url;zt(u,"leaflet-image-layer"),this._zoomAnimated&&zt(u,"leaflet-zoom-animated"),this.options.className&&zt(u,this.options.className),u.onselectstart=y,u.onmousemove=y}});function es(u,v,T){return new fc(u,v,T)}var Da=gs.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(u,v){u&&(u instanceof xe||I(u))?(this._latlng=he(u),R(this,v)):(R(this,u),this._source=v),this.options.content&&(this._content=this.options.content)},openOn:function(u){return u=arguments.length?u:this._source._map,u.hasLayer(this)||u.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(u){return this._map?this.close():(arguments.length?this._source=u:u=this._source,this._prepareOpen(),this.openOn(u._map)),this},onAdd:function(u){this._zoomAnimated=u._zoomAnimated,this._container||this._initLayout(),u._fadeAnimated&&jt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),u._fadeAnimated&&jt(this._container,1),this.bringToFront(),this.options.interactive&&(zt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(u){u._fadeAnimated?(jt(this._container,0),this._removeTimeout=setTimeout(o(Ot,void 0,this._container),200)):Ot(this._container),this.options.interactive&&(nn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(u){return this._latlng=he(u),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(u){return this._content=u,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var u={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Jt(this._container),this},bringToBack:function(){return this._map&&xn(this._container),this},_prepareOpen:function(u){var v=this._source;if(!v._map)return!1;if(v instanceof pr){v=null;var T=this._source._layers;for(var P in T)if(T[P]._map){v=T[P];break}if(!v)return!1;this._source=v}if(!u)if(v.getCenter)u=v.getCenter();else if(v.getLatLng)u=v.getLatLng();else if(v.getBounds)u=v.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(u),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var u=this._contentNode,v=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof v=="string")u.innerHTML=v;else{for(;u.hasChildNodes();)u.removeChild(u.firstChild);u.appendChild(v)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var u=this._map.latLngToLayerPoint(this._latlng),v=ce(this.options.offset),T=this._getAnchor();this._zoomAnimated?Fn(this._container,u.add(T)):v=v.add(u).add(T);var P=this._containerBottom=-v.y,j=this._containerLeft=-Math.round(this._containerWidth/2)+v.x;this._container.style.bottom=P+"px",this._container.style.left=j+"px"}},_getAnchor:function(){return[0,0]}});yn.include({_initOverlay:function(u,v,T,P){var j=v;return j instanceof u||(j=new u(P).setContent(v)),T&&j.setLatLng(T),j}}),gs.include({_initOverlay:function(u,v,T,P){var j=T;return j instanceof u?(R(j,P),j._source=this):(j=v&&!P?v:new u(P,this),j.setContent(T)),j}});var La=Da.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(u){return u=arguments.length?u:this._source._map,!u.hasLayer(this)&&u._popup&&u._popup.options.autoClose&&u.removeLayer(u._popup),u._popup=this,Da.prototype.openOn.call(this,u)},onAdd:function(u){Da.prototype.onAdd.call(this,u),u.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof vs||this._source.on("preclick",Ja))},onRemove:function(u){Da.prototype.onRemove.call(this,u),u.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof vs||this._source.off("preclick",Ja))},getEvents:function(){var u=Da.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(u.preclick=this.close),this.options.keepInView&&(u.moveend=this._adjustPan),u},_initLayout:function(){var u="leaflet-popup",v=this._container=Tt("div",u+" "+(this.options.className||"")+" leaflet-zoom-animated"),T=this._wrapper=Tt("div",u+"-content-wrapper",v);if(this._contentNode=Tt("div",u+"-content",T),hr(v),Rs(this._contentNode),on(v,"contextmenu",Ja),this._tipContainer=Tt("div",u+"-tip-container",v),this._tip=Tt("div",u+"-tip",this._tipContainer),this.options.closeButton){var P=this._closeButton=Tt("a",u+"-close-button",v);P.setAttribute("role","button"),P.setAttribute("aria-label","Close popup"),P.href="#close",P.innerHTML='<span aria-hidden="true">&#215;</span>',on(P,"click",function(j){ui(j),this.close()},this)}},_updateLayout:function(){var u=this._contentNode,v=u.style;v.width="",v.whiteSpace="nowrap";var T=u.offsetWidth;T=Math.min(T,this.options.maxWidth),T=Math.max(T,this.options.minWidth),v.width=T+1+"px",v.whiteSpace="",v.height="";var P=u.offsetHeight,j=this.options.maxHeight,ee="leaflet-popup-scrolled";j&&P>j?(v.height=j+"px",zt(u,ee)):nn(u,ee),this._containerWidth=this._container.offsetWidth},_animateZoom:function(u){var v=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center),T=this._getAnchor();Fn(this._container,v.add(T))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var u=this._map,v=parseInt(Pt(this._container,"marginBottom"),10)||0,T=this._container.offsetHeight+v,P=this._containerWidth,j=new te(this._containerLeft,-T-this._containerBottom);j._add(Tn(this._container));var ee=u.layerPointToContainerPoint(j),be=ce(this.options.autoPanPadding),Oe=ce(this.options.autoPanPaddingTopLeft||be),Ye=ce(this.options.autoPanPaddingBottomRight||be),yt=u.getSize(),Nt=0,$t=0;ee.x+P+Ye.x>yt.x&&(Nt=ee.x+P-yt.x+Ye.x),ee.x-Nt-Oe.x<0&&(Nt=ee.x-Oe.x),ee.y+T+Ye.y>yt.y&&($t=ee.y+T-yt.y+Ye.y),ee.y-$t-Oe.y<0&&($t=ee.y-Oe.y),(Nt||$t)&&(this.options.keepInView&&(this._autopanning=!0),u.fire("autopanstart").panBy([Nt,$t]))}},_getAnchor:function(){return ce(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),$f=function(u,v){return new La(u,v)};yn.mergeOptions({closePopupOnClick:!0}),yn.include({openPopup:function(u,v,T){return this._initOverlay(La,u,v,T).openOn(this),this},closePopup:function(u){return u=arguments.length?u:this._popup,u&&u.close(),this}}),gs.include({bindPopup:function(u,v){return this._popup=this._initOverlay(La,this._popup,u,v),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(u){return this._popup&&(this instanceof pr||(this._popup._source=this),this._popup._prepareOpen(u||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(u){return this._popup&&this._popup.setContent(u),this},getPopup:function(){return this._popup},_openPopup:function(u){if(!(!this._popup||!this._map)){Ds(u);var v=u.layer||u.target;if(this._popup._source===v&&!(v instanceof vs)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(u.latlng);return}this._popup._source=v,this.openPopup(u.latlng)}},_movePopup:function(u){this._popup.setLatLng(u.latlng)},_onKeyPress:function(u){u.originalEvent.keyCode===13&&this._openPopup(u)}});var Us=Da.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(u){Da.prototype.onAdd.call(this,u),this.setOpacity(this.options.opacity),u.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(u){Da.prototype.onRemove.call(this,u),u.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var u=Da.prototype.getEvents.call(this);return this.options.permanent||(u.preclick=this.close),u},_initLayout:function(){var u="leaflet-tooltip",v=u+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Tt("div",v),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+f(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(u){var v,T,P=this._map,j=this._container,ee=P.latLngToContainerPoint(P.getCenter()),be=P.layerPointToContainerPoint(u),Oe=this.options.direction,Ye=j.offsetWidth,yt=j.offsetHeight,Nt=ce(this.options.offset),$t=this._getAnchor();Oe==="top"?(v=Ye/2,T=yt):Oe==="bottom"?(v=Ye/2,T=0):Oe==="center"?(v=Ye/2,T=yt/2):Oe==="right"?(v=0,T=yt/2):Oe==="left"?(v=Ye,T=yt/2):be.x<ee.x?(Oe="right",v=0,T=yt/2):(Oe="left",v=Ye+(Nt.x+$t.x)*2,T=yt/2),u=u.subtract(ce(v,T,!0)).add(Nt).add($t),nn(j,"leaflet-tooltip-right"),nn(j,"leaflet-tooltip-left"),nn(j,"leaflet-tooltip-top"),nn(j,"leaflet-tooltip-bottom"),zt(j,"leaflet-tooltip-"+Oe),Fn(j,u)},_updatePosition:function(){var u=this._map.latLngToLayerPoint(this._latlng);this._setPosition(u)},setOpacity:function(u){this.options.opacity=u,this._container&&jt(this._container,u)},_animateZoom:function(u){var v=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center);this._setPosition(v)},_getAnchor:function(){return ce(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),hc=function(u,v){return new Us(u,v)};yn.include({openTooltip:function(u,v,T){return this._initOverlay(Us,u,v,T).openOn(this),this},closeTooltip:function(u){return u.close(),this}}),gs.include({bindTooltip:function(u,v){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Us,this._tooltip,u,v),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(u){if(!(!u&&this._tooltipHandlersAdded)){var v=u?"off":"on",T={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?T.add=this._openTooltip:(T.mouseover=this._openTooltip,T.mouseout=this.closeTooltip,T.click=this._openTooltip,this._map?this._addFocusListeners():T.add=this._addFocusListeners),this._tooltip.options.sticky&&(T.mousemove=this._moveTooltip),this[v](T),this._tooltipHandlersAdded=!u}},openTooltip:function(u){return this._tooltip&&(this instanceof pr||(this._tooltip._source=this),this._tooltip._prepareOpen(u)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(u){return this._tooltip&&this._tooltip.setContent(u),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(u){var v=typeof u.getElement=="function"&&u.getElement();v&&(on(v,"focus",function(){this._tooltip._source=u,this.openTooltip()},this),on(v,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(u){var v=typeof u.getElement=="function"&&u.getElement();v&&v.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(u){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var v=this;this._map.once("moveend",function(){v._openOnceFlag=!1,v._openTooltip(u)});return}this._tooltip._source=u.layer||u.target,this.openTooltip(this._tooltip.options.sticky?u.latlng:void 0)}},_moveTooltip:function(u){var v=u.latlng,T,P;this._tooltip.options.sticky&&u.originalEvent&&(T=this._map.mouseEventToContainerPoint(u.originalEvent),P=this._map.containerPointToLayerPoint(T),v=this._map.layerPointToLatLng(P)),this._tooltip.setLatLng(v)}});var xo=mr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(u){var v=u&&u.tagName==="DIV"?u:document.createElement("div"),T=this.options;if(T.html instanceof Element?(Vt(v),v.appendChild(T.html)):v.innerHTML=T.html!==!1?T.html:"",T.bgPos){var P=ce(T.bgPos);v.style.backgroundPosition=-P.x+"px "+-P.y+"px"}return this._setIconStyles(v,"icon"),v},createShadow:function(){return null}});function eh(u){return new xo(u)}mr.Default=Tl;var Xo=gs.extend({options:{tileSize:256,opacity:1,updateWhenIdle:kt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(u){R(this,u)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(u){u._addZoomLimit(this)},onRemove:function(u){this._removeAllTiles(),Ot(this._container),u._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Jt(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(xn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(u){return this.options.opacity=u,this._updateOpacity(),this},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var u=this._clampZoom(this._map.getZoom());u!==this._tileZoom&&(this._tileZoom=u,this._updateLevels()),this._update()}return this},getEvents:function(){var u={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),u.move=this._onMove),this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},createTile:function(){return document.createElement("div")},getTileSize:function(){var u=this.options.tileSize;return u instanceof te?u:new te(u,u)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(u){for(var v=this.getPane().children,T=-u(-1/0,1/0),P=0,j=v.length,ee;P<j;P++)ee=v[P].style.zIndex,v[P]!==this._container&&ee&&(T=u(T,+ee));isFinite(T)&&(this.options.zIndex=T+u(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!kt.ielt9){jt(this._container,this.options.opacity);var u=+new Date,v=!1,T=!1;for(var P in this._tiles){var j=this._tiles[P];if(!(!j.current||!j.loaded)){var ee=Math.min(1,(u-j.loaded)/200);jt(j.el,ee),ee<1?v=!0:(j.active?T=!0:this._onOpaqueTile(j),j.active=!0)}}T&&!this._noPrune&&this._pruneTiles(),v&&(J(this._fadeFrame),this._fadeFrame=Q(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=Tt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var u=this._tileZoom,v=this.options.maxZoom;if(u!==void 0){for(var T in this._levels)T=Number(T),this._levels[T].el.children.length||T===u?(this._levels[T].el.style.zIndex=v-Math.abs(u-T),this._onUpdateLevel(T)):(Ot(this._levels[T].el),this._removeTilesAtZoom(T),this._onRemoveLevel(T),delete this._levels[T]);var P=this._levels[u],j=this._map;return P||(P=this._levels[u]={},P.el=Tt("div","leaflet-tile-container leaflet-zoom-animated",this._container),P.el.style.zIndex=v,P.origin=j.project(j.unproject(j.getPixelOrigin()),u).round(),P.zoom=u,this._setZoomTransform(P,j.getCenter(),j.getZoom()),y(P.el.offsetWidth),this._onCreateLevel(P)),this._level=P,P}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var u,v,T=this._map.getZoom();if(T>this.options.maxZoom||T<this.options.minZoom){this._removeAllTiles();return}for(u in this._tiles)v=this._tiles[u],v.retain=v.current;for(u in this._tiles)if(v=this._tiles[u],v.current&&!v.active){var P=v.coords;this._retainParent(P.x,P.y,P.z,P.z-5)||this._retainChildren(P.x,P.y,P.z,P.z+2)}for(u in this._tiles)this._tiles[u].retain||this._removeTile(u)}},_removeTilesAtZoom:function(u){for(var v in this._tiles)this._tiles[v].coords.z===u&&this._removeTile(v)},_removeAllTiles:function(){for(var u in this._tiles)this._removeTile(u)},_invalidateAll:function(){for(var u in this._levels)Ot(this._levels[u].el),this._onRemoveLevel(Number(u)),delete this._levels[u];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(u,v,T,P){var j=Math.floor(u/2),ee=Math.floor(v/2),be=T-1,Oe=new te(+j,+ee);Oe.z=+be;var Ye=this._tileCoordsToKey(Oe),yt=this._tiles[Ye];return yt&&yt.active?(yt.retain=!0,!0):(yt&&yt.loaded&&(yt.retain=!0),be>P?this._retainParent(j,ee,be,P):!1)},_retainChildren:function(u,v,T,P){for(var j=2*u;j<2*u+2;j++)for(var ee=2*v;ee<2*v+2;ee++){var be=new te(j,ee);be.z=T+1;var Oe=this._tileCoordsToKey(be),Ye=this._tiles[Oe];if(Ye&&Ye.active){Ye.retain=!0;continue}else Ye&&Ye.loaded&&(Ye.retain=!0);T+1<P&&this._retainChildren(j,ee,T+1,P)}},_resetView:function(u){var v=u&&(u.pinch||u.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),v,v)},_animateZoom:function(u){this._setView(u.center,u.zoom,!0,u.noUpdate)},_clampZoom:function(u){var v=this.options;return v.minNativeZoom!==void 0&&u<v.minNativeZoom?v.minNativeZoom:v.maxNativeZoom!==void 0&&v.maxNativeZoom<u?v.maxNativeZoom:u},_setView:function(u,v,T,P){var j=Math.round(v);this.options.maxZoom!==void 0&&j>this.options.maxZoom||this.options.minZoom!==void 0&&j<this.options.minZoom?j=void 0:j=this._clampZoom(j);var ee=this.options.updateWhenZooming&&j!==this._tileZoom;(!P||ee)&&(this._tileZoom=j,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),j!==void 0&&this._update(u),T||this._pruneTiles(),this._noPrune=!!T),this._setZoomTransforms(u,v)},_setZoomTransforms:function(u,v){for(var T in this._levels)this._setZoomTransform(this._levels[T],u,v)},_setZoomTransform:function(u,v,T){var P=this._map.getZoomScale(T,u.zoom),j=u.origin.multiplyBy(P).subtract(this._map._getNewPixelOrigin(v,T)).round();kt.any3d?ai(u.el,j,P):Fn(u.el,j)},_resetGrid:function(){var u=this._map,v=u.options.crs,T=this._tileSize=this.getTileSize(),P=this._tileZoom,j=this._map.getPixelWorldBounds(this._tileZoom);j&&(this._globalTileRange=this._pxBoundsToTileRange(j)),this._wrapX=v.wrapLng&&!this.options.noWrap&&[Math.floor(u.project([0,v.wrapLng[0]],P).x/T.x),Math.ceil(u.project([0,v.wrapLng[1]],P).x/T.y)],this._wrapY=v.wrapLat&&!this.options.noWrap&&[Math.floor(u.project([v.wrapLat[0],0],P).y/T.x),Math.ceil(u.project([v.wrapLat[1],0],P).y/T.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(u){var v=this._map,T=v._animatingZoom?Math.max(v._animateToZoom,v.getZoom()):v.getZoom(),P=v.getZoomScale(T,this._tileZoom),j=v.project(u,this._tileZoom).floor(),ee=v.getSize().divideBy(P*2);return new G(j.subtract(ee),j.add(ee))},_update:function(u){var v=this._map;if(v){var T=this._clampZoom(v.getZoom());if(u===void 0&&(u=v.getCenter()),this._tileZoom!==void 0){var P=this._getTiledPixelBounds(u),j=this._pxBoundsToTileRange(P),ee=j.getCenter(),be=[],Oe=this.options.keepBuffer,Ye=new G(j.getBottomLeft().subtract([Oe,-Oe]),j.getTopRight().add([Oe,-Oe]));if(!(isFinite(j.min.x)&&isFinite(j.min.y)&&isFinite(j.max.x)&&isFinite(j.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var yt in this._tiles){var Nt=this._tiles[yt].coords;(Nt.z!==this._tileZoom||!Ye.contains(new te(Nt.x,Nt.y)))&&(this._tiles[yt].current=!1)}if(Math.abs(T-this._tileZoom)>1){this._setView(u,T);return}for(var $t=j.min.y;$t<=j.max.y;$t++)for(var Mn=j.min.x;Mn<=j.max.x;Mn++){var Sa=new te(Mn,$t);if(Sa.z=this._tileZoom,!!this._isValidTile(Sa)){var wi=this._tiles[this._tileCoordsToKey(Sa)];wi?wi.current=!0:be.push(Sa)}}if(be.sort(function(Jn,$n){return Jn.distanceTo(ee)-$n.distanceTo(ee)}),be.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Wa=document.createDocumentFragment();for(Mn=0;Mn<be.length;Mn++)this._addTile(be[Mn],Wa);this._level.el.appendChild(Wa)}}}},_isValidTile:function(u){var v=this._map.options.crs;if(!v.infinite){var T=this._globalTileRange;if(!v.wrapLng&&(u.x<T.min.x||u.x>T.max.x)||!v.wrapLat&&(u.y<T.min.y||u.y>T.max.y))return!1}if(!this.options.bounds)return!0;var P=this._tileCoordsToBounds(u);return me(this.options.bounds).overlaps(P)},_keyToBounds:function(u){return this._tileCoordsToBounds(this._keyToTileCoords(u))},_tileCoordsToNwSe:function(u){var v=this._map,T=this.getTileSize(),P=u.scaleBy(T),j=P.add(T),ee=v.unproject(P,u.z),be=v.unproject(j,u.z);return[ee,be]},_tileCoordsToBounds:function(u){var v=this._tileCoordsToNwSe(u),T=new fe(v[0],v[1]);return this.options.noWrap||(T=this._map.wrapLatLngBounds(T)),T},_tileCoordsToKey:function(u){return u.x+":"+u.y+":"+u.z},_keyToTileCoords:function(u){var v=u.split(":"),T=new te(+v[0],+v[1]);return T.z=+v[2],T},_removeTile:function(u){var v=this._tiles[u];v&&(Ot(v.el),delete this._tiles[u],this.fire("tileunload",{tile:v.el,coords:this._keyToTileCoords(u)}))},_initTile:function(u){zt(u,"leaflet-tile");var v=this.getTileSize();u.style.width=v.x+"px",u.style.height=v.y+"px",u.onselectstart=y,u.onmousemove=y,kt.ielt9&&this.options.opacity<1&&jt(u,this.options.opacity)},_addTile:function(u,v){var T=this._getTilePos(u),P=this._tileCoordsToKey(u),j=this.createTile(this._wrapCoords(u),o(this._tileReady,this,u));this._initTile(j),this.createTile.length<2&&Q(o(this._tileReady,this,u,null,j)),Fn(j,T),this._tiles[P]={el:j,coords:u,current:!0},v.appendChild(j),this.fire("tileloadstart",{tile:j,coords:u})},_tileReady:function(u,v,T){v&&this.fire("tileerror",{error:v,tile:T,coords:u});var P=this._tileCoordsToKey(u);T=this._tiles[P],T&&(T.loaded=+new Date,this._map._fadeAnimated?(jt(T.el,0),J(this._fadeFrame),this._fadeFrame=Q(this._updateOpacity,this)):(T.active=!0,this._pruneTiles()),v||(zt(T.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:T.el,coords:u})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),kt.ielt9||!this._map._fadeAnimated?Q(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(u){return u.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(u){var v=new te(this._wrapX?g(u.x,this._wrapX):u.x,this._wrapY?g(u.y,this._wrapY):u.y);return v.z=u.z,v},_pxBoundsToTileRange:function(u){var v=this.getTileSize();return new G(u.min.unscaleBy(v).floor(),u.max.unscaleBy(v).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var u in this._tiles)if(!this._tiles[u].loaded)return!1;return!0}});function So(u){return new Xo(u)}var bo=Xo.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(u,v){this._url=u,v=R(this,v),v.detectRetina&&kt.retina&&v.maxZoom>0?(v.tileSize=Math.floor(v.tileSize/2),v.zoomReverse?(v.zoomOffset--,v.minZoom=Math.min(v.maxZoom,v.minZoom+1)):(v.zoomOffset++,v.maxZoom=Math.max(v.minZoom,v.maxZoom-1)),v.minZoom=Math.max(0,v.minZoom)):v.zoomReverse?v.minZoom=Math.min(v.maxZoom,v.minZoom):v.maxZoom=Math.max(v.minZoom,v.maxZoom),typeof v.subdomains=="string"&&(v.subdomains=v.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(u,v){return this._url===u&&v===void 0&&(v=!0),this._url=u,v||this.redraw(),this},createTile:function(u,v){var T=document.createElement("img");return on(T,"load",o(this._tileOnLoad,this,v,T)),on(T,"error",o(this._tileOnError,this,v,T)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(T.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(T.referrerPolicy=this.options.referrerPolicy),T.alt="",T.src=this.getTileUrl(u),T},getTileUrl:function(u){var v={r:kt.retina?"@2x":"",s:this._getSubdomain(u),x:u.x,y:u.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var T=this._globalTileRange.max.y-u.y;this.options.tms&&(v.y=T),v["-y"]=T}return N(this._url,a(v,this.options))},_tileOnLoad:function(u,v){kt.ielt9?setTimeout(o(u,this,null,v),0):u(null,v)},_tileOnError:function(u,v,T){var P=this.options.errorTileUrl;P&&v.getAttribute("src")!==P&&(v.src=P),u(T,v)},_onTileRemove:function(u){u.tile.onload=null},_getZoomForUrl:function(){var u=this._tileZoom,v=this.options.maxZoom,T=this.options.zoomReverse,P=this.options.zoomOffset;return T&&(u=v-u),u+P},_getSubdomain:function(u){var v=Math.abs(u.x+u.y)%this.options.subdomains.length;return this.options.subdomains[v]},_abortLoading:function(){var u,v;for(u in this._tiles)if(this._tiles[u].coords.z!==this._tileZoom&&(v=this._tiles[u].el,v.onload=y,v.onerror=y,!v.complete)){v.src=F;var T=this._tiles[u].coords;Ot(v),delete this._tiles[u],this.fire("tileabort",{tile:v,coords:T})}},_removeTile:function(u){var v=this._tiles[u];if(v)return v.el.setAttribute("src",F),Xo.prototype._removeTile.call(this,u)},_tileReady:function(u,v,T){if(!(!this._map||T&&T.getAttribute("src")===F))return Xo.prototype._tileReady.call(this,u,v,T)}});function Oa(u,v){return new bo(u,v)}var To=bo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(u,v){this._url=u;var T=a({},this.defaultWmsParams);for(var P in v)P in this.options||(T[P]=v[P]);v=R(this,v);var j=v.detectRetina&&kt.retina?2:1,ee=this.getTileSize();T.width=ee.x*j,T.height=ee.y*j,this.wmsParams=T},onAdd:function(u){this._crs=this.options.crs||u.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var v=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[v]=this._crs.code,bo.prototype.onAdd.call(this,u)},getTileUrl:function(u){var v=this._tileCoordsToNwSe(u),T=this._crs,P=ne(T.project(v[0]),T.project(v[1])),j=P.min,ee=P.max,be=(this._wmsVersion>=1.3&&this._crs===Sl?[j.y,j.x,ee.y,ee.x]:[j.x,j.y,ee.x,ee.y]).join(","),Oe=bo.prototype.getTileUrl.call(this,u);return Oe+C(this.wmsParams,Oe,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+be},setParams:function(u,v){return a(this.wmsParams,u),v||this.redraw(),this}});function xa(u,v){return new To(u,v)}bo.WMS=To,Oa.wms=xa;var ts=gs.extend({options:{padding:.1},initialize:function(u){R(this,u),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),zt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var u={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(u.zoomanim=this._onAnimZoom),u},_onAnimZoom:function(u){this._updateTransform(u.center,u.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(u,v){var T=this._map.getZoomScale(v,this._zoom),P=this._map.getSize().multiplyBy(.5+this.options.padding),j=this._map.project(this._center,v),ee=P.multiplyBy(-T).add(j).subtract(this._map._getNewPixelOrigin(u,v));kt.any3d?ai(this._container,ee,T):Fn(this._container,ee)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var u in this._layers)this._layers[u]._reset()},_onZoomEnd:function(){for(var u in this._layers)this._layers[u]._project()},_updatePaths:function(){for(var u in this._layers)this._layers[u]._update()},_update:function(){var u=this.options.padding,v=this._map.getSize(),T=this._map.containerPointToLayerPoint(v.multiplyBy(-u)).round();this._bounds=new G(T,T.add(v.multiplyBy(1+u*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Jc=ts.extend({options:{tolerance:0},getEvents:function(){var u=ts.prototype.getEvents.call(this);return u.viewprereset=this._onViewPreReset,u},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ts.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var u=this._container=document.createElement("canvas");on(u,"mousemove",this._onMouseMove,this),on(u,"click dblclick mousedown mouseup contextmenu",this._onClick,this),on(u,"mouseout",this._handleMouseOut,this),u._leaflet_disable_events=!0,this._ctx=u.getContext("2d")},_destroyContainer:function(){J(this._redrawRequest),delete this._ctx,Ot(this._container),Gn(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var u;this._redrawBounds=null;for(var v in this._layers)u=this._layers[v],u._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ts.prototype._update.call(this);var u=this._bounds,v=this._container,T=u.getSize(),P=kt.retina?2:1;Fn(v,u.min),v.width=P*T.x,v.height=P*T.y,v.style.width=T.x+"px",v.style.height=T.y+"px",kt.retina&&this._ctx.scale(2,2),this._ctx.translate(-u.min.x,-u.min.y),this.fire("update")}},_reset:function(){ts.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(u){this._updateDashArray(u),this._layers[f(u)]=u;var v=u._order={layer:u,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=v),this._drawLast=v,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(u){this._requestRedraw(u)},_removePath:function(u){var v=u._order,T=v.next,P=v.prev;T?T.prev=P:this._drawLast=P,P?P.next=T:this._drawFirst=T,delete u._order,delete this._layers[f(u)],this._requestRedraw(u)},_updatePath:function(u){this._extendRedrawBounds(u),u._project(),u._update(),this._requestRedraw(u)},_updateStyle:function(u){this._updateDashArray(u),this._requestRedraw(u)},_updateDashArray:function(u){if(typeof u.options.dashArray=="string"){var v=u.options.dashArray.split(/[, ]+/),T=[],P,j;for(j=0;j<v.length;j++){if(P=Number(v[j]),isNaN(P))return;T.push(P)}u.options._dashArray=T}else u.options._dashArray=u.options.dashArray},_requestRedraw:function(u){this._map&&(this._extendRedrawBounds(u),this._redrawRequest=this._redrawRequest||Q(this._redraw,this))},_extendRedrawBounds:function(u){if(u._pxBounds){var v=(u.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new G,this._redrawBounds.extend(u._pxBounds.min.subtract([v,v])),this._redrawBounds.extend(u._pxBounds.max.add([v,v]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var u=this._redrawBounds;if(u){var v=u.getSize();this._ctx.clearRect(u.min.x,u.min.y,v.x,v.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var u,v=this._redrawBounds;if(this._ctx.save(),v){var T=v.getSize();this._ctx.beginPath(),this._ctx.rect(v.min.x,v.min.y,T.x,T.y),this._ctx.clip()}this._drawing=!0;for(var P=this._drawFirst;P;P=P.next)u=P.layer,(!v||u._pxBounds&&u._pxBounds.intersects(v))&&u._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(u,v){if(this._drawing){var T,P,j,ee,be=u._parts,Oe=be.length,Ye=this._ctx;if(Oe){for(Ye.beginPath(),T=0;T<Oe;T++){for(P=0,j=be[T].length;P<j;P++)ee=be[T][P],Ye[P?"lineTo":"moveTo"](ee.x,ee.y);v&&Ye.closePath()}this._fillStroke(Ye,u)}}},_updateCircle:function(u){if(!(!this._drawing||u._empty())){var v=u._point,T=this._ctx,P=Math.max(Math.round(u._radius),1),j=(Math.max(Math.round(u._radiusY),1)||P)/P;j!==1&&(T.save(),T.scale(1,j)),T.beginPath(),T.arc(v.x,v.y/j,P,0,Math.PI*2,!1),j!==1&&T.restore(),this._fillStroke(T,u)}},_fillStroke:function(u,v){var T=v.options;T.fill&&(u.globalAlpha=T.fillOpacity,u.fillStyle=T.fillColor||T.color,u.fill(T.fillRule||"evenodd")),T.stroke&&T.weight!==0&&(u.setLineDash&&u.setLineDash(v.options&&v.options._dashArray||[]),u.globalAlpha=T.opacity,u.lineWidth=T.weight,u.strokeStyle=T.color,u.lineCap=T.lineCap,u.lineJoin=T.lineJoin,u.stroke())},_onClick:function(u){for(var v=this._map.mouseEventToLayerPoint(u),T,P,j=this._drawFirst;j;j=j.next)T=j.layer,T.options.interactive&&T._containsPoint(v)&&(!(u.type==="click"||u.type==="preclick")||!this._map._draggableMoved(T))&&(P=T);this._fireEvent(P?[P]:!1,u)},_onMouseMove:function(u){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var v=this._map.mouseEventToLayerPoint(u);this._handleMouseHover(u,v)}},_handleMouseOut:function(u){var v=this._hoveredLayer;v&&(nn(this._container,"leaflet-interactive"),this._fireEvent([v],u,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(u,v){if(!this._mouseHoverThrottled){for(var T,P,j=this._drawFirst;j;j=j.next)T=j.layer,T.options.interactive&&T._containsPoint(v)&&(P=T);P!==this._hoveredLayer&&(this._handleMouseOut(u),P&&(zt(this._container,"leaflet-interactive"),this._fireEvent([P],u,"mouseover"),this._hoveredLayer=P)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,u),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(u,v,T){this._map._fireDOMEvent(v,T||v.type,u)},_bringToFront:function(u){var v=u._order;if(v){var T=v.next,P=v.prev;if(T)T.prev=P;else return;P?P.next=T:T&&(this._drawFirst=T),v.prev=this._drawLast,this._drawLast.next=v,v.next=null,this._drawLast=v,this._requestRedraw(u)}},_bringToBack:function(u){var v=u._order;if(v){var T=v.next,P=v.prev;if(P)P.next=T;else return;T?T.prev=P:P&&(this._drawLast=P),v.prev=null,v.next=this._drawFirst,this._drawFirst.prev=v,this._drawFirst=v,this._requestRedraw(u)}}});function Mo(u){return kt.canvas?new Jc(u):null}var Ao=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(u){return document.createElement("<lvml:"+u+' class="lvml">')}}catch{}return function(u){return document.createElement("<"+u+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),dc={_initContainer:function(){this._container=Tt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ts.prototype._update.call(this),this.fire("update"))},_initPath:function(u){var v=u._container=Ao("shape");zt(v,"leaflet-vml-shape "+(this.options.className||"")),v.coordsize="1 1",u._path=Ao("path"),v.appendChild(u._path),this._updateStyle(u),this._layers[f(u)]=u},_addPath:function(u){var v=u._container;this._container.appendChild(v),u.options.interactive&&u.addInteractiveTarget(v)},_removePath:function(u){var v=u._container;Ot(v),u.removeInteractiveTarget(v),delete this._layers[f(u)]},_updateStyle:function(u){var v=u._stroke,T=u._fill,P=u.options,j=u._container;j.stroked=!!P.stroke,j.filled=!!P.fill,P.stroke?(v||(v=u._stroke=Ao("stroke")),j.appendChild(v),v.weight=P.weight+"px",v.color=P.color,v.opacity=P.opacity,P.dashArray?v.dashStyle=I(P.dashArray)?P.dashArray.join(" "):P.dashArray.replace(/( *, *)/g," "):v.dashStyle="",v.endcap=P.lineCap.replace("butt","flat"),v.joinstyle=P.lineJoin):v&&(j.removeChild(v),u._stroke=null),P.fill?(T||(T=u._fill=Ao("fill")),j.appendChild(T),T.color=P.fillColor||P.color,T.opacity=P.fillOpacity):T&&(j.removeChild(T),u._fill=null)},_updateCircle:function(u){var v=u._point.round(),T=Math.round(u._radius),P=Math.round(u._radiusY||T);this._setPath(u,u._empty()?"M0 0":"AL "+v.x+","+v.y+" "+T+","+P+" 0,"+65535*360)},_setPath:function(u,v){u._path.v=v},_bringToFront:function(u){Jt(u._container)},_bringToBack:function(u){xn(u._container)}},vr=kt.vml?Ao:Ve,Yo=ts.extend({_initContainer:function(){this._container=vr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=vr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ot(this._container),Gn(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ts.prototype._update.call(this);var u=this._bounds,v=u.getSize(),T=this._container;(!this._svgSize||!this._svgSize.equals(v))&&(this._svgSize=v,T.setAttribute("width",v.x),T.setAttribute("height",v.y)),Fn(T,u.min),T.setAttribute("viewBox",[u.min.x,u.min.y,v.x,v.y].join(" ")),this.fire("update")}},_initPath:function(u){var v=u._path=vr("path");u.options.className&&zt(v,u.options.className),u.options.interactive&&zt(v,"leaflet-interactive"),this._updateStyle(u),this._layers[f(u)]=u},_addPath:function(u){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(u._path),u.addInteractiveTarget(u._path)},_removePath:function(u){Ot(u._path),u.removeInteractiveTarget(u._path),delete this._layers[f(u)]},_updatePath:function(u){u._project(),u._update()},_updateStyle:function(u){var v=u._path,T=u.options;v&&(T.stroke?(v.setAttribute("stroke",T.color),v.setAttribute("stroke-opacity",T.opacity),v.setAttribute("stroke-width",T.weight),v.setAttribute("stroke-linecap",T.lineCap),v.setAttribute("stroke-linejoin",T.lineJoin),T.dashArray?v.setAttribute("stroke-dasharray",T.dashArray):v.removeAttribute("stroke-dasharray"),T.dashOffset?v.setAttribute("stroke-dashoffset",T.dashOffset):v.removeAttribute("stroke-dashoffset")):v.setAttribute("stroke","none"),T.fill?(v.setAttribute("fill",T.fillColor||T.color),v.setAttribute("fill-opacity",T.fillOpacity),v.setAttribute("fill-rule",T.fillRule||"evenodd")):v.setAttribute("fill","none"))},_updatePoly:function(u,v){this._setPath(u,Fe(u._parts,v))},_updateCircle:function(u){var v=u._point,T=Math.max(Math.round(u._radius),1),P=Math.max(Math.round(u._radiusY),1)||T,j="a"+T+","+P+" 0 1,0 ",ee=u._empty()?"M0 0":"M"+(v.x-T)+","+v.y+j+T*2+",0 "+j+-T*2+",0 ";this._setPath(u,ee)},_setPath:function(u,v){u._path.setAttribute("d",v)},_bringToFront:function(u){Jt(u._path)},_bringToBack:function(u){xn(u._path)}});kt.vml&&Yo.include(dc);function Cl(u){return kt.svg||kt.vml?new Yo(u):null}yn.include({getRenderer:function(u){var v=u.options.renderer||this._getPaneRenderer(u.options.pane)||this.options.renderer||this._renderer;return v||(v=this._renderer=this._createRenderer()),this.hasLayer(v)||this.addLayer(v),v},_getPaneRenderer:function(u){if(u==="overlayPane"||u===void 0)return!1;var v=this._paneRenderers[u];return v===void 0&&(v=this._createRenderer({pane:u}),this._paneRenderers[u]=v),v},_createRenderer:function(u){return this.options.preferCanvas&&Mo(u)||Cl(u)}});var Eo=Al.extend({initialize:function(u,v){Al.prototype.initialize.call(this,this._boundsToLatLngs(u),v)},setBounds:function(u){return this.setLatLngs(this._boundsToLatLngs(u))},_boundsToLatLngs:function(u){return u=me(u),[u.getSouthWest(),u.getNorthWest(),u.getNorthEast(),u.getSouthEast()]}});function Md(u,v){return new Eo(u,v)}Yo.create=vr,Yo.pointsToPath=Fe,$a.geometryToLayer=hi,$a.coordsToLatLng=Zc,$a.coordsToLatLngs=oc,$a.latLngToCoords=lc,$a.latLngsToCoords=wl,$a.getFeature=gr,$a.asFeature=Kc,yn.mergeOptions({boxZoom:!0});var Ga=Hi.extend({initialize:function(u){this._map=u,this._container=u._container,this._pane=u._panes.overlayPane,this._resetStateTimeout=0,u.on("unload",this._destroy,this)},addHooks:function(){on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Gn(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ot(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(u){if(!u.shiftKey||u.which!==1&&u.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Qn(),Es(),this._startPoint=this._map.mouseEventToContainerPoint(u),on(document,{contextmenu:Ds,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(u){this._moved||(this._moved=!0,this._box=Tt("div","leaflet-zoom-box",this._container),zt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(u);var v=new G(this._point,this._startPoint),T=v.getSize();Fn(this._box,v.min),this._box.style.width=T.x+"px",this._box.style.height=T.y+"px"},_finish:function(){this._moved&&(Ot(this._box),nn(this._container,"leaflet-crosshair")),ci(),ki(),Gn(document,{contextmenu:Ds,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(u){if(!(u.which!==1&&u.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var v=new fe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(v).fire("boxzoomend",{boxZoomBounds:v})}},_onKeyDown:function(u){u.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});yn.addInitHook("addHandler","boxZoom",Ga),yn.mergeOptions({doubleClickZoom:!0});var ja=Hi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(u){var v=this._map,T=v.getZoom(),P=v.options.zoomDelta,j=u.originalEvent.shiftKey?T-P:T+P;v.options.doubleClickZoom==="center"?v.setZoom(j):v.setZoomAround(u.containerPoint,j)}});yn.addInitHook("addHandler","doubleClickZoom",ja),yn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var yr=Hi.extend({addHooks:function(){if(!this._draggable){var u=this._map;this._draggable=new mo(u._mapPane,u._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),u.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),u.on("zoomend",this._onZoomEnd,this),u.whenReady(this._onZoomEnd,this))}zt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){nn(this._map._container,"leaflet-grab"),nn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var u=this._map;if(u._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var v=me(this._map.options.maxBounds);this._offsetLimit=ne(this._map.latLngToContainerPoint(v.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(v.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;u.fire("movestart").fire("dragstart"),u.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(u){if(this._map.options.inertia){var v=this._lastTime=+new Date,T=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(T),this._times.push(v),this._prunePositions(v)}this._map.fire("move",u).fire("drag",u)},_prunePositions:function(u){for(;this._positions.length>1&&u-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var u=this._map.getSize().divideBy(2),v=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=v.subtract(u).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(u,v){return u-(u-v)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var u=this._draggable._newPos.subtract(this._draggable._startPos),v=this._offsetLimit;u.x<v.min.x&&(u.x=this._viscousLimit(u.x,v.min.x)),u.y<v.min.y&&(u.y=this._viscousLimit(u.y,v.min.y)),u.x>v.max.x&&(u.x=this._viscousLimit(u.x,v.max.x)),u.y>v.max.y&&(u.y=this._viscousLimit(u.y,v.max.y)),this._draggable._newPos=this._draggable._startPos.add(u)}},_onPreDragWrap:function(){var u=this._worldWidth,v=Math.round(u/2),T=this._initialWorldOffset,P=this._draggable._newPos.x,j=(P-v+T)%u+v-T,ee=(P+v+T)%u-v-T,be=Math.abs(j+T)<Math.abs(ee+T)?j:ee;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=be},_onDragEnd:function(u){var v=this._map,T=v.options,P=!T.inertia||u.noInertia||this._times.length<2;if(v.fire("dragend",u),P)v.fire("moveend");else{this._prunePositions(+new Date);var j=this._lastPos.subtract(this._positions[0]),ee=(this._lastTime-this._times[0])/1e3,be=T.easeLinearity,Oe=j.multiplyBy(be/ee),Ye=Oe.distanceTo([0,0]),yt=Math.min(T.inertiaMaxSpeed,Ye),Nt=Oe.multiplyBy(yt/Ye),$t=yt/(T.inertiaDeceleration*be),Mn=Nt.multiplyBy(-$t/2).round();!Mn.x&&!Mn.y?v.fire("moveend"):(Mn=v._limitOffset(Mn,v.options.maxBounds),Q(function(){v.panBy(Mn,{duration:$t,easeLinearity:be,noMoveStart:!0,animate:!0})}))}}});yn.addInitHook("addHandler","dragging",yr),yn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Na=Hi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(u){this._map=u,this._setPanDelta(u.options.keyboardPanDelta),this._setZoomDelta(u.options.zoomDelta)},addHooks:function(){var u=this._map._container;u.tabIndex<=0&&(u.tabIndex="0"),on(u,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Gn(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var u=document.body,v=document.documentElement,T=u.scrollTop||v.scrollTop,P=u.scrollLeft||v.scrollLeft;this._map._container.focus(),window.scrollTo(P,T)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(u){var v=this._panKeys={},T=this.keyCodes,P,j;for(P=0,j=T.left.length;P<j;P++)v[T.left[P]]=[-1*u,0];for(P=0,j=T.right.length;P<j;P++)v[T.right[P]]=[u,0];for(P=0,j=T.down.length;P<j;P++)v[T.down[P]]=[0,u];for(P=0,j=T.up.length;P<j;P++)v[T.up[P]]=[0,-1*u]},_setZoomDelta:function(u){var v=this._zoomKeys={},T=this.keyCodes,P,j;for(P=0,j=T.zoomIn.length;P<j;P++)v[T.zoomIn[P]]=u;for(P=0,j=T.zoomOut.length;P<j;P++)v[T.zoomOut[P]]=-u},_addHooks:function(){on(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Gn(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(u){if(!(u.altKey||u.ctrlKey||u.metaKey)){var v=u.keyCode,T=this._map,P;if(v in this._panKeys){if(!T._panAnim||!T._panAnim._inProgress)if(P=this._panKeys[v],u.shiftKey&&(P=ce(P).multiplyBy(3)),T.options.maxBounds&&(P=T._limitOffset(ce(P),T.options.maxBounds)),T.options.worldCopyJump){var j=T.wrapLatLng(T.unproject(T.project(T.getCenter()).add(P)));T.panTo(j)}else T.panBy(P)}else if(v in this._zoomKeys)T.setZoom(T.getZoom()+(u.shiftKey?3:1)*this._zoomKeys[v]);else if(v===27&&T._popup&&T._popup.options.closeOnEscapeKey)T.closePopup();else return;Ds(u)}}});yn.addInitHook("addHandler","keyboard",Na),yn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var pc=Hi.extend({addHooks:function(){on(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Gn(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(u){var v=Si(u),T=this._map.options.wheelDebounceTime;this._delta+=v,this._lastMousePos=this._map.mouseEventToContainerPoint(u),this._startTime||(this._startTime=+new Date);var P=Math.max(T-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),P),Ds(u)},_performZoom:function(){var u=this._map,v=u.getZoom(),T=this._map.options.zoomSnap||0;u._stop();var P=this._delta/(this._map.options.wheelPxPerZoomLevel*4),j=4*Math.log(2/(1+Math.exp(-Math.abs(P))))/Math.LN2,ee=T?Math.ceil(j/T)*T:j,be=u._limitZoom(v+(this._delta>0?ee:-ee))-v;this._delta=0,this._startTime=null,be&&(u.options.scrollWheelZoom==="center"?u.setZoom(v+be):u.setZoomAround(this._lastMousePos,v+be))}});yn.addInitHook("addHandler","scrollWheelZoom",pc);var wo=600;yn.mergeOptions({tapHold:kt.touchNative&&kt.safari&&kt.mobile,tapTolerance:15});var $c=Hi.extend({addHooks:function(){on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Gn(this._map._container,"touchstart",this._onDown,this)},_onDown:function(u){if(clearTimeout(this._holdTimeout),u.touches.length===1){var v=u.touches[0];this._startPos=this._newPos=new te(v.clientX,v.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(on(document,"touchend",ui),on(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",v))},this),wo),on(document,"touchend touchcancel contextmenu",this._cancel,this),on(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function u(){Gn(document,"touchend",ui),Gn(document,"touchend touchcancel",u)},_cancel:function(){clearTimeout(this._holdTimeout),Gn(document,"touchend touchcancel contextmenu",this._cancel,this),Gn(document,"touchmove",this._onMove,this)},_onMove:function(u){var v=u.touches[0];this._newPos=new te(v.clientX,v.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(u,v){var T=new MouseEvent(u,{bubbles:!0,cancelable:!0,view:window,screenX:v.screenX,screenY:v.screenY,clientX:v.clientX,clientY:v.clientY});T._simulated=!0,v.target.dispatchEvent(T)}});yn.addInitHook("addHandler","tapHold",$c),yn.mergeOptions({touchZoom:kt.touch,bounceAtZoomLimits:!0});var th=Hi.extend({addHooks:function(){zt(this._map._container,"leaflet-touch-zoom"),on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){nn(this._map._container,"leaflet-touch-zoom"),Gn(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(u){var v=this._map;if(!(!u.touches||u.touches.length!==2||v._animatingZoom||this._zooming)){var T=v.mouseEventToContainerPoint(u.touches[0]),P=v.mouseEventToContainerPoint(u.touches[1]);this._centerPoint=v.getSize()._divideBy(2),this._startLatLng=v.containerPointToLatLng(this._centerPoint),v.options.touchZoom!=="center"&&(this._pinchStartLatLng=v.containerPointToLatLng(T.add(P)._divideBy(2))),this._startDist=T.distanceTo(P),this._startZoom=v.getZoom(),this._moved=!1,this._zooming=!0,v._stop(),on(document,"touchmove",this._onTouchMove,this),on(document,"touchend touchcancel",this._onTouchEnd,this),ui(u)}},_onTouchMove:function(u){if(!(!u.touches||u.touches.length!==2||!this._zooming)){var v=this._map,T=v.mouseEventToContainerPoint(u.touches[0]),P=v.mouseEventToContainerPoint(u.touches[1]),j=T.distanceTo(P)/this._startDist;if(this._zoom=v.getScaleZoom(j,this._startZoom),!v.options.bounceAtZoomLimits&&(this._zoom<v.getMinZoom()&&j<1||this._zoom>v.getMaxZoom()&&j>1)&&(this._zoom=v._limitZoom(this._zoom)),v.options.touchZoom==="center"){if(this._center=this._startLatLng,j===1)return}else{var ee=T._add(P)._divideBy(2)._subtract(this._centerPoint);if(j===1&&ee.x===0&&ee.y===0)return;this._center=v.unproject(v.project(this._pinchStartLatLng,this._zoom).subtract(ee),this._zoom)}this._moved||(v._moveStart(!0,!1),this._moved=!0),J(this._animRequest);var be=o(v._move,v,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Q(be,this,!0),ui(u)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,J(this._animRequest),Gn(document,"touchmove",this._onTouchMove,this),Gn(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});yn.addInitHook("addHandler","touchZoom",th),yn.BoxZoom=Ga,yn.DoubleClickZoom=ja,yn.Drag=yr,yn.Keyboard=Na,yn.ScrollWheelZoom=pc,yn.TapHold=$c,yn.TouchZoom=th,t.Bounds=G,t.Browser=kt,t.CRS=_e,t.Canvas=Jc,t.Circle=$u,t.CircleMarker=fi,t.Class=re,t.Control=Vi,t.DivIcon=xo,t.DivOverlay=Da,t.DomEvent=po,t.DomUtil=ws,t.Draggable=mo,t.Evented=K,t.FeatureGroup=pr,t.GeoJSON=$a,t.GridLayer=Xo,t.Handler=Hi,t.Icon=mr,t.ImageOverlay=Ha,t.LatLng=xe,t.LatLngBounds=fe,t.Layer=gs,t.LayerGroup=bl,t.LineUtil=_l,t.Map=yn,t.Marker=rc,t.Mixin=Wc,t.Path=vs,t.Point=te,t.PolyUtil=qc,t.Polygon=Al,t.Polyline=Ns,t.Popup=La,t.PosAnimation=ka,t.Projection=Qf,t.Rectangle=Eo,t.Renderer=ts,t.SVG=Yo,t.SVGOverlay=fc,t.TileLayer=bo,t.Tooltip=Us,t.Transformation=qe,t.Util=oe,t.VideoOverlay=_o,t.bind=o,t.bounds=ne,t.canvas=Mo,t.circle=Jf,t.circleMarker=bd,t.control=ds,t.divIcon=eh,t.extend=a,t.featureGroup=Ju,t.geoJSON=Qc,t.geoJson=cc,t.gridLayer=So,t.icon=sc,t.imageOverlay=ef,t.latLng=he,t.latLngBounds=me,t.layerGroup=Os,t.map=gl,t.marker=Yc,t.point=ce,t.polygon=Td,t.polyline=Wo,t.popup=$f,t.rectangle=Md,t.setOptions=R,t.stamp=f,t.svg=Cl,t.svgOverlay=es,t.tileLayer=Oa,t.tooltip=hc,t.transformation=nt,t.version=n,t.videoOverlay=uc;var _r=window.L;t.noConflict=function(){return window.L=_r,this},window.L=t}))})(Dg,Dg.exports)),Dg.exports}var pd=I4();const Kw=A0(pd);function E0(i,e,t){return Object.freeze({instance:i,context:e,container:t})}function l1(i,e){return e==null?function(n,a){const s=ue.useRef(void 0);return s.current||(s.current=i(n,a)),s}:function(n,a){const s=ue.useRef(void 0);s.current||(s.current=i(n,a));const o=ue.useRef(n),{instance:c}=s.current;return ue.useEffect(function(){o.current!==n&&(e(c,n,o.current),o.current=n)},[c,n,e]),s}}function Qw(i,e){ue.useEffect(function(){return(e.layerContainer??e.map).addLayer(i.instance),function(){e.layerContainer?.removeLayer(i.instance),e.map.removeLayer(i.instance)}},[e,i])}function Jw(i){return function(t){const n=r1(),a=i(o1(t,n),n);return Yw(n.map,t.attribution),A2(a.current,t.eventHandlers),Qw(a.current,n),a}}function P4(i,e){const t=ue.useRef(void 0);ue.useEffect(function(){if(e.pathOptions!==t.current){const a=e.pathOptions??{};i.instance.setStyle(a),t.current=a}},[i,e])}function z4(i){return function(t){const n=r1(),a=i(o1(t,n),n);return A2(a.current,t.eventHandlers),Qw(a.current,n),P4(a.current,t),a}}function B4(i,e){const t=l1(i,e),n=Jw(t);return Zw(n)}function F4(i,e){const t=l1(i),n=N4(t,e);return L4(n)}function $w(i,e){const t=l1(i,e),n=z4(t);return Zw(n)}function k4(i,e){const t=l1(i,e),n=Jw(t);return O4(n)}function V4(i,e,t){const{opacity:n,zIndex:a}=e;n!=null&&n!==t.opacity&&i.setOpacity(n),a!=null&&a!==t.zIndex&&i.setZIndex(a)}function E2(){return r1().map}const eC=$w(function({center:e,children:t,...n},a){const s=new pd.Circle(e,n);return E0(s,T2(a,{overlayContainer:s}))},w4);function H4({bounds:i,boundsOptions:e,center:t,children:n,className:a,id:s,placeholder:o,style:c,whenReady:f,zoom:d,...g},y){const[x]=ue.useState({className:a,id:s,style:c}),[b,M]=ue.useState(null),R=ue.useRef(void 0);ue.useImperativeHandle(y,()=>b?.map??null,[b]);const C=ue.useCallback(N=>{if(N!==null&&!R.current){const I=new pd.Map(N,g);R.current=I,t!=null&&d!=null?I.setView(t,d):i!=null&&I.fitBounds(i,e),f!=null&&I.whenReady(f),M(D4(I))}},[]);ue.useEffect(()=>()=>{b?.map.remove()},[b]);const E=b?Nu.createElement(M2,{value:b},n):o??null;return Nu.createElement("div",{...x,ref:C},E)}const G4=ue.forwardRef(H4),tC=B4(function({position:e,...t},n){const a=new pd.Marker(e,t);return E0(a,T2(n,{overlayContainer:a}))},function(e,t,n){t.position!==n.position&&e.setLatLng(t.position),t.icon!=null&&t.icon!==n.icon&&e.setIcon(t.icon),t.zIndexOffset!=null&&t.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),t.opacity!=null&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),e.dragging!=null&&t.draggable!==n.draggable&&(t.draggable===!0?e.dragging.enable():e.dragging.disable())}),nC=$w(function({positions:e,...t},n){const a=new pd.Polyline(e,t);return E0(a,T2(n,{overlayContainer:a}))},function(e,t,n){t.positions!==n.positions&&e.setLatLngs(t.positions)}),j4=F4(function(e,t){const n=new pd.Popup(e,t.overlayContainer);return E0(n,t)},function(e,t,{position:n},a){ue.useEffect(function(){const{instance:o}=e;function c(d){d.popup===o&&(o.update(),a(!0))}function f(d){d.popup===o&&a(!1)}return t.map.on({popupopen:c,popupclose:f}),t.overlayContainer==null?(n!=null&&o.setLatLng(n),o.openOn(t.map)):t.overlayContainer.bindPopup(o),function(){t.map.off({popupopen:c,popupclose:f}),t.overlayContainer?.unbindPopup(),t.map.removeLayer(o)}},[e,t,a,n])}),W4=k4(function({url:e,...t},n){const a=new pd.TileLayer(e,o1(t,n));return E0(a,n)},function(e,t,n){V4(e,t,n);const{url:a}=t;a!=null&&a!==n.url&&e.setUrl(a)}),kv={UAL:{name:"United",color:"#0033A0",icon:"",country:"US",countryFlag:""},DAL:{name:"Delta",color:"#E31837",icon:"",country:"US",countryFlag:""},AAL:{name:"American",color:"#0078D2",icon:"",country:"US",countryFlag:""},SWA:{name:"Southwest",color:"#304CB2",icon:"",country:"US",countryFlag:""},JBU:{name:"JetBlue",color:"#003876",icon:"",country:"US",countryFlag:""},NKS:{name:"Spirit",color:"#FFE600",icon:"",country:"US",countryFlag:""},ASA:{name:"Alaska",color:"#00205B",icon:"",country:"US",countryFlag:""},FDX:{name:"FedEx",color:"#4D148C",icon:"",country:"US",countryFlag:""},UPS:{name:"UPS",color:"#351C15",icon:"",country:"US",countryFlag:""},BAW:{name:"British Airways",color:"#2E5198",icon:"",country:"GB",countryFlag:""},AFR:{name:"Air France",color:"#002157",icon:"",country:"FR",countryFlag:""},DLH:{name:"Lufthansa",color:"#05164D",icon:"",country:"DE",countryFlag:""},UAE:{name:"Emirates",color:"#D71921",icon:"",country:"AE",countryFlag:""},QTR:{name:"Qatar Airways",color:"#5C0632",icon:"",country:"QA",countryFlag:""},SIA:{name:"Singapore Airlines",color:"#F5A623",icon:"",country:"SG",countryFlag:""},ANA:{name:"All Nippon",color:"#00467F",icon:"",country:"JP",countryFlag:""},CPA:{name:"Cathay Pacific",color:"#006564",icon:"",country:"HK",countryFlag:""},KLM:{name:"KLM",color:"#00A1DE",icon:"",country:"NL",countryFlag:""},AIC:{name:"Air India",color:"#E31837",icon:"",country:"IN",countryFlag:""},QFA:{name:"Qantas",color:"#E0001A",icon:"",country:"AU",countryFlag:""},RUS_AF:{name:"Russian Air Force",color:"#D52B1E",icon:"",country:"RU",countryFlag:""},USAF:{name:"US Air Force",color:"#00308F",icon:"",country:"US",countryFlag:""},RAF:{name:"Royal Air Force",color:"#00247D",icon:"",country:"GB",countryFlag:""},PLAAF:{name:"PLA Air Force",color:"#DE2910",icon:"",country:"CN",countryFlag:""}},w2={B737:{name:"Boeing 737",manufacturer:"Boeing",category:"narrow",size:"narrow",typicalSeats:160},B738:{name:"Boeing 737-800",manufacturer:"Boeing",category:"narrow",size:"narrow",typicalSeats:175},B739:{name:"Boeing 737-900",manufacturer:"Boeing",category:"narrow",size:"narrow",typicalSeats:180},A320:{name:"Airbus A320",manufacturer:"Airbus",category:"narrow",size:"narrow",typicalSeats:150},A321:{name:"Airbus A321",manufacturer:"Airbus",category:"narrow",size:"narrow",typicalSeats:185},B787:{name:"Boeing 787 Dreamliner",manufacturer:"Boeing",category:"wide",size:"wide",typicalSeats:290},B789:{name:"Boeing 787-9",manufacturer:"Boeing",category:"wide",size:"wide",typicalSeats:296},B777:{name:"Boeing 777",manufacturer:"Boeing",category:"wide",size:"wide",typicalSeats:350},A330:{name:"Airbus A330",manufacturer:"Airbus",category:"wide",size:"wide",typicalSeats:277},A350:{name:"Airbus A350",manufacturer:"Airbus",category:"wide",size:"wide",typicalSeats:325},B77W:{name:"Boeing 777-300ER",manufacturer:"Boeing",category:"wide",size:"heavy",typicalSeats:396},B747:{name:"Boeing 747",manufacturer:"Boeing",category:"wide",size:"heavy",typicalSeats:416},A380:{name:"Airbus A380",manufacturer:"Airbus",category:"wide",size:"super",typicalSeats:489},E175:{name:"Embraer E175",manufacturer:"Embraer",category:"regional",size:"regional",typicalSeats:76},CRJ9:{name:"Bombardier CRJ-900",manufacturer:"Bombardier",category:"regional",size:"regional",typicalSeats:76},SU35:{name:"Sukhoi Su-35 Flanker",manufacturer:"Sukhoi",category:"military",size:"regional"},SU57:{name:"Sukhoi Su-57 Felon",manufacturer:"Sukhoi",category:"military",size:"regional"},F22:{name:"F-22 Raptor",manufacturer:"Lockheed Martin",category:"military",size:"regional"},F15:{name:"F-15 Eagle",manufacturer:"McDonnell Douglas",category:"military",size:"regional"},F16:{name:"F-16 Fighting Falcon",manufacturer:"General Dynamics",category:"military",size:"regional"}};function c1(i){const e=i.substring(0,3);if(kv[e])return kv[e];const t=i.substring(0,2),n={UA:"UAL",DL:"DAL",AA:"AAL",WN:"SWA",B6:"JBU",AS:"ASA",NK:"NKS",BA:"BAW",AF:"AFR",LH:"DLH",EK:"UAE",QR:"QTR",SQ:"SIA",AI:"AIC",QF:"QFA"};return n[t]&&kv[n[t]]?kv[n[t]]:null}function iC(i,e,t){if(e)return"#00d4ff";switch(i){case"hostile":return"#ff0000";case"hijacked":return"#ff3300";case"warning":return"#ffaa00";case"ghost":return"#666666";case"hero":return"#00ff88";default:return t&&t<.9?"#ffaa00":"#00ff88"}}function q4(i,e,t){const n=iC(t.visualState,e,t.confidence),a=e?28:24,s=t.airline?c1(t.callsign):null;let o="",c="";switch(t.visualState){case"hostile":o="animation: hostile-pulse 0.5s infinite;",c=`<div style="position:absolute;top:-12px;left:50%;transform:translateX(-50%);font-size:10px;">${s?.countryFlag||""}</div>`;break;case"hijacked":o=(t.dataCorruption||0)>.5?"animation: glitch 0.1s infinite; filter: blur(1px);":"animation: hijack-flash 0.3s infinite;";break;case"ghost":o="animation: ghost-fade 1s infinite; opacity: 0.5;";break;case"hero":o="animation: hero-glow 1s infinite;";break}s&&t.visualState!=="hostile"&&(c=`<div style="position:absolute;top:-10px;left:-8px;font-size:8px;background:rgba(0,0,0,0.7);padding:1px 2px;border-radius:2px;">${s.countryFlag}</div>`);const f=t.transponderActive===!1?'<div style="position:absolute;bottom:-8px;left:50%;transform:translateX(-50%);font-size:7px;color:#ff6600;">NO XPDR</div>':"";return Kw.divIcon({className:"aircraft-marker",html:`
      <style>
        @keyframes hostile-pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        @keyframes hijack-flash { 0%, 100% { filter: none; } 50% { filter: hue-rotate(30deg); } }
        @keyframes ghost-fade { 0%, 100% { opacity: 0.3; } 50% { opacity: 0.7; } }
        @keyframes hero-glow { 0%, 100% { filter: drop-shadow(0 0 4px #00ff88); } 50% { filter: drop-shadow(0 0 12px #00ff88); } }
        @keyframes glitch { 0% { transform: translate(0); } 25% { transform: translate(-2px, 1px); } 50% { transform: translate(2px, -1px); } 75% { transform: translate(-1px, 2px); } 100% { transform: translate(0); } }
      </style>
      <div class="aircraft-icon" style="position:relative;transform: rotate(${i}deg);${o}">
        ${c}
        <svg width="${a}" height="${a}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 2L8 10H4L6 12L4 14H8L12 22L16 14H20L18 12L20 10H16L12 2Z"
                fill="${n}"
                stroke="${e?"#ffffff":"#000000"}"
                stroke-width="1"
                filter="drop-shadow(0 0 ${e?"8":"4"}px ${n})"/>
        </svg>
        ${f}
      </div>
    `,iconSize:[a,a],iconAnchor:[a/2,a/2],popupAnchor:[0,-a/2]})}function aC(i){return i>=18e3?`FL${Math.round(i/100)}`:`${Math.round(i/100)*100}'`}function X4(i){return Math.abs(i)<100?"":i>0?"":""}function Y4({track:i,isSelected:e,onSelect:t,showDataBlock:n,trailPositions:a=[]}){const s=ue.useMemo(()=>q4(i.headingDeg,e,i),[i.headingDeg,e,i.confidence,i.visualState,i.dataCorruption,i.transponderActive,i.airline,i.callsign]),o=ue.useMemo(()=>c1(i.callsign),[i.callsign]),c=i.aircraftType?w2[i.aircraftType]:null,f=[i.latitudeDeg,i.longitudeDeg];return O.jsxs(O.Fragment,{children:[a.length>1&&O.jsx(nC,{positions:a,pathOptions:{color:e?"#00d4ff":"#00ff88",weight:1,opacity:.4,dashArray:"4, 4"}}),O.jsx(tC,{position:f,icon:s,eventHandlers:{click:()=>t(i.trackId)},children:O.jsx(j4,{className:"aircraft-popup",children:O.jsxs("div",{className:"popup-content",style:{fontFamily:"'JetBrains Mono', monospace",fontSize:11,minWidth:180},children:[O.jsxs("div",{className:"popup-header",style:{display:"flex",alignItems:"center",gap:6,marginBottom:6,paddingBottom:6,borderBottom:"1px solid rgba(0, 255, 136, 0.3)"},children:[o&&O.jsx("span",{style:{fontSize:14},children:o.countryFlag}),O.jsx("span",{style:{fontWeight:700,color:iC(i.visualState,!1,i.confidence)},children:i.callsign}),i.visualState==="hostile"&&O.jsx("span",{style:{background:"#ff0000",color:"white",fontSize:8,padding:"1px 4px",borderRadius:2,fontWeight:700},children:"HOSTILE"}),i.squawkCode==="7500"&&O.jsx("span",{style:{background:"#ff3300",color:"white",fontSize:8,padding:"1px 4px",borderRadius:2,fontWeight:700},children:"HIJACK"})]}),(o||c)&&O.jsxs("div",{style:{marginBottom:6,color:"#8b949e",fontSize:10},children:[o&&O.jsx("div",{children:o.name}),c&&O.jsx("div",{children:c.name}),i.souls&&O.jsxs("div",{style:{color:"#00d4ff"},children:[i.souls," souls on board"]})]}),O.jsxs("div",{className:"popup-data",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2},children:[O.jsxs("div",{children:["ALT: ",aC(i.altitudeFt)]}),O.jsxs("div",{children:["SPD: ",i.speedKt," KT"]}),O.jsxs("div",{children:["HDG: ",Math.round(i.headingDeg),""]}),O.jsxs("div",{children:["V/S: ",i.verticalRateFpm>0?"+":"",i.verticalRateFpm]})]}),i.transponderActive===!1&&O.jsx("div",{style:{marginTop:6,padding:4,background:"rgba(255, 102, 0, 0.2)",borderRadius:2,color:"#ff6600",fontSize:9,textAlign:"center"},children:"TRANSPONDER INACTIVE"})]})})}),n&&O.jsx(Z4,{track:i,isSelected:e})]})}function Z4({track:i,isSelected:e}){const t=Kw.divIcon({className:"data-block-marker",html:`
      <div class="data-block ${e?"selected":""}" style="
        position: absolute;
        left: 20px;
        top: -20px;
        font-family: 'JetBrains Mono', monospace;
        font-size: 10px;
        color: ${e?"#00d4ff":"#00ff88"};
        text-shadow: 0 0 4px currentColor;
        white-space: nowrap;
        pointer-events: none;
      ">
        <div style="font-weight: bold;">${i.callsign}</div>
        <div>${aC(i.altitudeFt)} ${X4(i.verticalRateFpm)}</div>
        <div>${i.speedKt}</div>
      </div>
    `,iconSize:[0,0],iconAnchor:[0,0]});return O.jsx(tC,{position:[i.latitudeDeg,i.longitudeDeg],icon:t,interactive:!1})}const Lg=new Set;let fA={time:0,deltaTime:0,isPaused:!1},qx=0,kp=null;function sC(i){const e=qx?(i-qx)/1e3:0;qx=i,fA={time:i/1e3,deltaTime:e,isPaused:!1},Lg.forEach(t=>t(fA)),kp=requestAnimationFrame(sC)}function K4(){kp===null&&(kp=requestAnimationFrame(sC))}function Q4(){kp!==null&&(cancelAnimationFrame(kp),kp=null)}function J4(i){const e=ue.useRef(i);e.current=i,ue.useEffect(()=>{const t=n=>e.current(n);return Lg.add(t),Lg.size===1&&K4(),()=>{Lg.delete(t),Lg.size===0&&Q4()}},[])}function $4(i){const e=Math.random()*Math.PI*2,t=i*(.5+Math.random()*.5);return{x:Math.cos(e)*t,y:Math.sin(e)*t}}function e5({width:i,height:e,sweepSpeed:t=4,color:n="#00ff88"}){const a=ue.useRef(null),s=ue.useRef(0);return J4(({deltaTime:o})=>{const c=a.current;if(!c)return;const f=c.getContext("2d");if(!f)return;const d=i/2,g=e/2,y=Math.min(d,g)*.95;s.current+=o/t*Math.PI*2,s.current>=Math.PI*2&&(s.current-=Math.PI*2),f.clearRect(0,0,i,e);const x=60;for(let M=0;M<x;M++){const R=s.current-M/x*Math.PI*2,C=Math.exp(-2*(M/x)*3);if(C<.01)continue;f.beginPath(),f.moveTo(d,g),f.arc(d,g,y,R-.02,R+.02),f.closePath();const[E,N,I]=t5(n);f.fillStyle=`rgba(${E}, ${N}, ${I}, ${C*.3})`,f.fill()}f.beginPath(),f.moveTo(d,g),f.lineTo(d+Math.cos(s.current)*y,g+Math.sin(s.current)*y);const b=f.createLinearGradient(d,g,d+Math.cos(s.current)*y,g+Math.sin(s.current)*y);b.addColorStop(0,`${n}00`),b.addColorStop(.3,`${n}88`),b.addColorStop(1,n),f.strokeStyle=b,f.lineWidth=2,f.stroke(),f.beginPath(),f.arc(d+Math.cos(s.current)*y,g+Math.sin(s.current)*y,4,0,Math.PI*2),f.fillStyle=n,f.shadowColor=n,f.shadowBlur=10,f.fill(),f.shadowBlur=0,f.strokeStyle=`${n}20`,f.lineWidth=1,f.setLineDash([4,8]),[.25,.5,.75,1].forEach(M=>{f.beginPath(),f.arc(d,g,y*M,0,Math.PI*2),f.stroke()}),f.setLineDash([]),f.beginPath(),f.arc(d,g,3,0,Math.PI*2),f.fillStyle=n,f.fill()}),O.jsx("canvas",{ref:a,width:i,height:e,style:{position:"absolute",top:0,left:0,pointerEvents:"none",zIndex:400}})}function t5(i){const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i);return e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:[0,255,136]}const hA=i=>{let e;const t=new Set,n=(d,g)=>{const y=typeof d=="function"?d(e):d;if(!Object.is(y,e)){const x=e;e=g??(typeof y!="object"||y===null)?y:Object.assign({},e,y),t.forEach(b=>b(e,x))}},a=()=>e,c={setState:n,getState:a,getInitialState:()=>f,subscribe:d=>(t.add(d),()=>t.delete(d))},f=e=i(n,a,c);return c},rC=(i=>i?hA(i):hA),n5=i=>i;function i5(i,e=n5){const t=Nu.useSyncExternalStore(i.subscribe,Nu.useCallback(()=>e(i.getState()),[i,e]),Nu.useCallback(()=>e(i.getInitialState()),[i,e]));return Nu.useDebugValue(t),t}const dA=i=>{const e=rC(i),t=n=>i5(e,n);return Object.assign(t,e),t},u1=(i=>i?dA(i):dA),pA=20;u1((i,e)=>({tracks:[],selectedTrackId:null,trackHistory:new Map,setTracks:t=>{const n=new Map(e().trackHistory);t.forEach(a=>{const s=n.get(a.trackId)||[],o=[a.latitudeDeg,a.longitudeDeg];(s.length===0||Math.abs(s[s.length-1][0]-o[0])>.001||Math.abs(s[s.length-1][1]-o[1])>.001)&&(s.push(o),s.length>pA&&s.shift(),n.set(a.trackId,s))}),i({tracks:t,trackHistory:n})},selectTrack:t=>i({selectedTrackId:t}),updateTrack:(t,n)=>i(a=>({tracks:a.tracks.map(s=>s.trackId===t?{...s,...n}:s)})),addTrackPosition:(t,n)=>i(a=>{const s=new Map(a.trackHistory),o=s.get(t)||[];return o.push(n),o.length>pA&&o.shift(),s.set(t,o),{trackHistory:s}})}));const Hs=u1(i=>({appMode:"demo",liveOnly:!1,viewMode:"2d",showDataBlocks:!0,showTrails:!0,showWeather:!0,show4DTrajectories:!1,narrationEnabled:!0,atcAudioEnabled:!0,alertSoundsEnabled:!0,autoTranslate:!0,audioVolume:.8,simulationSpeed:4,trackedFlightId:null,commandLog:[],heroModeActive:!1,timeOffsetMinutes:0,playbackSpeed:1,isPlaying:!1,presentationMode:"cinematic",showCommsPanel:!1,showAIPanel:!0,setViewMode:e=>i({viewMode:e}),toggleDataBlocks:()=>i(e=>({showDataBlocks:!e.showDataBlocks})),toggleTrails:()=>i(e=>({showTrails:!e.showTrails})),toggleWeather:()=>i(e=>({showWeather:!e.showWeather})),toggle4DTrajectories:()=>i(e=>({show4DTrajectories:!e.show4DTrajectories})),setTimeOffset:e=>i({timeOffsetMinutes:Math.max(0,Math.min(60,e))}),setPlaybackSpeed:e=>i({playbackSpeed:e}),togglePlayback:()=>i(e=>({isPlaying:!e.isPlaying})),setPresentationMode:e=>i({presentationMode:e}),toggleCommsPanel:()=>i(e=>({showCommsPanel:!e.showCommsPanel})),toggleAIPanel:()=>i(e=>({showAIPanel:!e.showAIPanel})),setSimulationSpeed:e=>i({simulationSpeed:Math.max(1,Math.min(300,e))}),setAppMode:e=>i({appMode:e,simulationSpeed:e==="demo"?4:150}),setTrackedFlightId:e=>i({trackedFlightId:e}),addCommandLog:e=>i(t=>({commandLog:[{...e,id:`cmd-${Date.now()}`,timestamp:new Date},...t.commandLog].slice(0,50)})),clearCommandLog:()=>i({commandLog:[]}),setHeroModeActive:e=>i({heroModeActive:e}),setLiveOnly:e=>i({liveOnly:e}),setNarrationEnabled:e=>i({narrationEnabled:e}),setAtcAudioEnabled:e=>i({atcAudioEnabled:e}),setAlertSoundsEnabled:e=>i({alertSoundsEnabled:e}),setAutoTranslate:e=>i({autoTranslate:e}),setAudioVolume:e=>i({audioVolume:Math.max(0,Math.min(1,e))})}));u1(i=>({alerts:[],setAlerts:e=>i({alerts:e}),addAlert:e=>i(t=>({alerts:[e,...t.alerts]})),acknowledgeAlert:e=>i(t=>({alerts:t.alerts.map(n=>n.alertId===e?{...n,acknowledged:!0}:n)})),removeAlert:e=>i(t=>({alerts:t.alerts.filter(n=>n.alertId!==e)}))}));const oC=u1(i=>({activeEmergencies:[],screenShake:null,vignetteColor:null,triggerEmergency:e=>i(t=>({activeEmergencies:[...t.activeEmergencies,{...e,phase:"warning",startTime:Date.now()}]})),updateEmergencyPhase:(e,t)=>i(n=>({activeEmergencies:n.activeEmergencies.map(a=>a.id===e?{...a,phase:t}:a)})),clearEmergency:e=>i(t=>({activeEmergencies:t.activeEmergencies.filter(n=>n.id!==e)})),triggerScreenShake:(e,t)=>i({screenShake:{intensity:e,duration:t}}),clearScreenShake:()=>i({screenShake:null}),setVignetteColor:e=>i({vignetteColor:e})})),Xx=new Map,a5=20;function s5(){const i=E2(),e=ue.useRef(null);return ue.useEffect(()=>{const t=i.getContainer();if(t.querySelector(".radar-sweep-container"))return;const a=document.createElement("div");return a.className="radar-sweep-container",a.innerHTML=`
      <div class="radar-sweep" style="
        position: absolute;
        top: 50%;
        left: 50%;
        width: 200%;
        height: 200%;
        transform: translate(-50%, -50%);
        pointer-events: none;
        z-index: 400;
      ">
        <div style="
          position: absolute;
          top: 50%;
          left: 50%;
          width: 100%;
          height: 2px;
          background: linear-gradient(90deg, rgba(0,255,136,0.5) 0%, rgba(0,255,136,0) 100%);
          transform-origin: 0% 50%;
          animation: radar-sweep 4s linear infinite;
        "></div>
      </div>
    `,t.appendChild(a),e.current=a,()=>{e.current&&t.contains(e.current)&&t.removeChild(e.current)}},[i]),null}function r5({center:i}){const e=[10,25,50,100];return O.jsx(O.Fragment,{children:e.map(t=>O.jsx(eC,{center:i,radius:t*1852,pathOptions:{color:"rgba(0, 255, 136, 0.15)",weight:1,fill:!1,dashArray:"4, 8"}},t))})}function o5({overlays:i}){const e=t=>{switch(t){case"EXTREME":return"rgba(255, 51, 102, 0.5)";case"SEVERE":return"rgba(255, 170, 0, 0.4)";case"MODERATE":return"rgba(255, 255, 0, 0.3)";default:return"rgba(0, 212, 255, 0.2)"}};return O.jsx(O.Fragment,{children:i.map(t=>O.jsx(eC,{center:t.center,radius:t.radiusNm*1852,pathOptions:{color:e(t.severity),fillColor:e(t.severity),fillOpacity:.3,weight:2}},t.id))})}function l5({sectors:i}){return O.jsx(O.Fragment,{children:i.map(e=>O.jsx(nC,{positions:e.coordinates,pathOptions:{color:e.isActive?"#00d4ff":"#6e7681",weight:e.isActive?2:1,opacity:e.isActive?.8:.4,dashArray:e.isActive?void 0:"8, 4"}},e.id))})}function c5({tracks:i}){const e=E2(),{trackedFlightId:t}=Hs();return ue.useEffect(()=>{if(!t)return;const n=i.find(a=>a.trackId===t);n&&e.panTo([n.latitudeDeg,n.longitudeDeg],{animate:!0,duration:.5})},[e,t,i]),null}function u5(){const i=E2();return ue.useEffect(()=>{const e=i.getContainer();if(e.querySelector(".compass-rose-container"))return;const n=document.createElement("div");return n.className="compass-rose-container",n.innerHTML=`
      <div style="
        position: absolute;
        top: 20px;
        right: 20px;
        width: 80px;
        height: 80px;
        border: 1px solid rgba(0, 255, 136, 0.3);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: 'Orbitron', monospace;
        font-size: 10px;
        color: #00ff88;
        z-index: 500;
        background: rgba(10, 14, 20, 0.8);
      ">
        <div style="position: absolute; top: 5px;">N</div>
        <div style="position: absolute; bottom: 5px;">S</div>
        <div style="position: absolute; left: 8px;">W</div>
        <div style="position: absolute; right: 8px;">E</div>
        <div style="
          width: 2px;
          height: 30px;
          background: linear-gradient(to bottom, #ff3366, #00ff88);
          position: absolute;
        "></div>
        <div style="
          width: 30px;
          height: 2px;
          background: rgba(0, 255, 136, 0.5);
          position: absolute;
        "></div>
      </div>
    `,e.appendChild(n),()=>{e.contains(n)&&e.removeChild(n)}},[i]),null}function f5({tracks:i,selectedTrackId:e,onSelectTrack:t,showDataBlocks:n,showTrails:a,weatherOverlays:s=[],sectorBoundaries:o=[]}){const c=[42,-71],f=ue.useRef(null),[d,g]=ue.useState(800),[y,x]=ue.useState(600);return ue.useEffect(()=>{if(!f.current)return;const b=()=>{f.current&&(g(f.current.offsetWidth),x(f.current.offsetHeight))};return b(),window.addEventListener("resize",b),()=>{window.removeEventListener("resize",b)}},[]),ue.useEffect(()=>{i.forEach(b=>{const M=Xx.get(b.trackId)||[],R=[b.latitudeDeg,b.longitudeDeg];(M.length===0||Math.abs(M[M.length-1][0]-R[0])>.001||Math.abs(M[M.length-1][1]-R[1])>.001)&&(M.push(R),M.length>a5&&M.shift(),Xx.set(b.trackId,M))})},[i]),O.jsxs("div",{ref:f,className:"radar-map-container",style:{height:"100%",width:"100%",position:"relative"},children:[O.jsx(e5,{width:d||800,height:y||600}),O.jsxs(G4,{center:c,zoom:8,style:{height:"100%",width:"100%"},zoomControl:!1,attributionControl:!1,children:[O.jsx(W4,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:' <a href="https://carto.com/">CARTO</a>'}),O.jsx(s5,{}),O.jsx(u5,{}),O.jsx(r5,{center:c}),O.jsx(c5,{tracks:i}),O.jsx(l5,{sectors:o}),O.jsx(o5,{overlays:s}),i.map(b=>O.jsx(Y4,{track:b,isSelected:e===b.trackId,onSelect:t,showDataBlock:n,trailPositions:a?Xx.get(b.trackId):void 0},b.trackId))]}),O.jsx("div",{className:"map-controls",style:{position:"absolute",bottom:20,left:20,display:"flex",gap:8,zIndex:1e3},children:O.jsxs("div",{style:{background:"rgba(13, 17, 23, 0.9)",border:"1px solid rgba(0, 255, 136, 0.2)",borderRadius:4,padding:"8px 12px",fontFamily:"'JetBrains Mono', monospace",fontSize:11,color:"#00ff88"},children:[O.jsx("span",{style:{opacity:.7},children:"TRK:"})," ",i.length]})}),O.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"none",background:"repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0, 0, 0, 0.03) 2px, rgba(0, 0, 0, 0.03) 4px)",zIndex:999}})]})}var Yx={exports:{}},Su={};var mA;function h5(){return mA||(mA=1,Su.ConcurrentRoot=1,Su.ContinuousEventPriority=8,Su.DefaultEventPriority=32,Su.DiscreteEventPriority=2,Su.IdleEventPriority=268435456,Su.LegacyRoot=0,Su.NoEventPriority=0),Su}var gA;function d5(){return gA||(gA=1,Yx.exports=h5()),Yx.exports}var Xy=d5();const f1="182",jh={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Wh={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},lC=0,Ab=1,cC=2,p5=3,uC=0,Vp=1,Bg=2,Zh=3,Iu=0,Vr=1,cl=2,Bc=0,td=1,Eb=2,wb=3,Cb=4,fC=5,Uf=100,hC=101,dC=102,pC=103,mC=104,gC=200,vC=201,yC=202,_C=203,a_=204,s_=205,xC=206,SC=207,bC=208,TC=209,MC=210,AC=211,EC=212,wC=213,CC=214,r_=0,o_=1,l_=2,od=3,c_=4,u_=5,f_=6,h_=7,w0=0,RC=1,DC=2,fl=0,C2=1,R2=2,D2=3,h1=4,L2=5,O2=6,N2=7,Rb="attached",LC="detached",d1=300,Vc=301,kf=302,t0=303,n0=304,am=306,i0=1e3,ao=1001,a0=1002,Ba=1003,U2=1004,m5=1004,Op=1005,g5=1005,Di=1006,Fg=1007,v5=1007,Ic=1008,y5=1008,Br=1009,I2=1010,P2=1011,jp=1012,p1=1013,dl=1014,ar=1015,tc=1016,m1=1017,g1=1018,Wp=1020,z2=35902,B2=35899,F2=1021,k2=1022,sr=1023,Hc=1026,zf=1027,v1=1028,C0=1029,ld=1030,y1=1031,_5=1032,_1=1033,kg=33776,Vg=33777,Hg=33778,Gg=33779,d_=35840,p_=35841,m_=35842,g_=35843,v_=36196,y_=37492,__=37496,x_=37488,S_=37489,b_=37490,T_=37491,M_=37808,A_=37809,E_=37810,w_=37811,C_=37812,R_=37813,D_=37814,L_=37815,O_=37816,N_=37817,U_=37818,I_=37819,P_=37820,z_=37821,B_=36492,F_=36494,k_=36495,V_=36283,H_=36284,G_=36285,j_=36286,OC=2200,NC=2201,UC=2202,s0=2300,W_=2301,Yy=2302,Kh=2400,Qh=2401,r0=2402,x1=2500,V2=2501,x5=0,S5=1,b5=2,IC=3200,PC=3201,T5=3202,M5=3203,qf=0,zC=1,Du="",ir="srgb",Vf="srgb-linear",o0="linear",Mi="srgb",A5="",E5="rg",w5="ga",C5=0,qh=7680,R5=7681,D5=7682,L5=7683,O5=34055,N5=34056,U5=5386,I5=512,P5=513,z5=514,B5=515,F5=516,k5=517,V5=518,Db=519,BC=512,FC=513,kC=514,S1=515,VC=516,HC=517,b1=518,GC=519,l0=35044,H5=35048,G5=35040,j5=35045,W5=35049,q5=35041,X5=35046,Y5=35050,Z5=35042,K5="100",Lb="300 es",Fo=2e3,qp=2001,Q5={COMPUTE:"compute",RENDER:"render"},J5={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},$5={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};function jC(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}const eN={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Np(i,e){return new eN[i](e)}function WC(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function c0(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function qC(){const i=c0("canvas");return i.style.display="block",i}const vA={};let Hf=null;function tN(i){Hf=i}function nN(){return Hf}function u0(...i){const e="THREE."+i.shift();Hf?Hf("log",e,...i):console.log(e,...i)}function It(...i){const e="THREE."+i.shift();Hf?Hf("warn",e,...i):console.warn(e,...i)}function rn(...i){const e="THREE."+i.shift();Hf?Hf("error",e,...i):console.error(e,...i)}function Xp(...i){const e=i.join(" ");e in vA||(vA[e]=!0,It(...i))}function iN(i,e,t){return new Promise(function(n,a){function s(){switch(i.clientWaitSync(e,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:a();break;case i.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:n()}}setTimeout(s,t)})}let Gc=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const a=n[e];if(a!==void 0){const s=a.indexOf(t);s!==-1&&a.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const a=n.slice(0);for(let s=0,o=a.length;s<o;s++)a[s].call(this,e);e.target=null}}};const er=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let yA=1234567;const nd=Math.PI/180,Yp=180/Math.PI;function ko(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(er[i&255]+er[i>>8&255]+er[i>>16&255]+er[i>>24&255]+"-"+er[e&255]+er[e>>8&255]+"-"+er[e>>16&15|64]+er[e>>24&255]+"-"+er[t&63|128]+er[t>>8&255]+"-"+er[t>>16&255]+er[t>>24&255]+er[n&255]+er[n>>8&255]+er[n>>16&255]+er[n>>24&255]).toLowerCase()}function mn(i,e,t){return Math.max(e,Math.min(t,i))}function H2(i,e){return(i%e+e)%e}function aN(i,e,t,n,a){return n+(i-e)*(a-n)/(t-e)}function sN(i,e,t){return i!==e?(t-i)/(e-i):0}function jg(i,e,t){return(1-t)*i+t*e}function rN(i,e,t,n){return jg(i,e,1-Math.exp(-t*n))}function oN(i,e=1){return e-Math.abs(H2(i,e*2)-e)}function lN(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function cN(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function uN(i,e){return i+Math.floor(Math.random()*(e-i+1))}function fN(i,e){return i+Math.random()*(e-i)}function hN(i){return i*(.5-Math.random())}function dN(i){i!==void 0&&(yA=i);let e=yA+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function pN(i){return i*nd}function mN(i){return i*Yp}function gN(i){return(i&i-1)===0&&i!==0}function vN(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function yN(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function _N(i,e,t,n,a){const s=Math.cos,o=Math.sin,c=s(t/2),f=o(t/2),d=s((e+n)/2),g=o((e+n)/2),y=s((e-n)/2),x=o((e-n)/2),b=s((n-e)/2),M=o((n-e)/2);switch(a){case"XYX":i.set(c*g,f*y,f*x,c*d);break;case"YZY":i.set(f*x,c*g,f*y,c*d);break;case"ZXZ":i.set(f*y,f*x,c*g,c*d);break;case"XZX":i.set(c*g,f*M,f*b,c*d);break;case"YXY":i.set(f*b,c*g,f*M,c*d);break;case"ZYZ":i.set(f*M,f*b,c*g,c*d);break;default:It("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+a)}}function Fr(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function On(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const xN={DEG2RAD:nd,RAD2DEG:Yp,generateUUID:ko,clamp:mn,euclideanModulo:H2,mapLinear:aN,inverseLerp:sN,lerp:jg,damp:rN,pingpong:oN,smoothstep:lN,smootherstep:cN,randInt:uN,randFloat:fN,randFloatSpread:hN,seededRandom:dN,degToRad:pN,radToDeg:mN,isPowerOfTwo:gN,ceilPowerOfTwo:vN,floorPowerOfTwo:yN,setQuaternionFromProperEuler:_N,normalize:On,denormalize:Fr};class dt{constructor(e=0,t=0){dt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,a=e.elements;return this.x=a[0]*t+a[3]*n+a[6],this.y=a[1]*t+a[4]*n+a[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=mn(this.x,e.x,t.x),this.y=mn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=mn(this.x,e,t),this.y=mn(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(mn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(mn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),a=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*n-o*a+e.x,this.y=s*a+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class or{constructor(e=0,t=0,n=0,a=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=a}static slerpFlat(e,t,n,a,s,o,c){let f=n[a+0],d=n[a+1],g=n[a+2],y=n[a+3],x=s[o+0],b=s[o+1],M=s[o+2],R=s[o+3];if(c<=0){e[t+0]=f,e[t+1]=d,e[t+2]=g,e[t+3]=y;return}if(c>=1){e[t+0]=x,e[t+1]=b,e[t+2]=M,e[t+3]=R;return}if(y!==R||f!==x||d!==b||g!==M){let C=f*x+d*b+g*M+y*R;C<0&&(x=-x,b=-b,M=-M,R=-R,C=-C);let E=1-c;if(C<.9995){const N=Math.acos(C),I=Math.sin(N);E=Math.sin(E*N)/I,c=Math.sin(c*N)/I,f=f*E+x*c,d=d*E+b*c,g=g*E+M*c,y=y*E+R*c}else{f=f*E+x*c,d=d*E+b*c,g=g*E+M*c,y=y*E+R*c;const N=1/Math.sqrt(f*f+d*d+g*g+y*y);f*=N,d*=N,g*=N,y*=N}}e[t]=f,e[t+1]=d,e[t+2]=g,e[t+3]=y}static multiplyQuaternionsFlat(e,t,n,a,s,o){const c=n[a],f=n[a+1],d=n[a+2],g=n[a+3],y=s[o],x=s[o+1],b=s[o+2],M=s[o+3];return e[t]=c*M+g*y+f*b-d*x,e[t+1]=f*M+g*x+d*y-c*b,e[t+2]=d*M+g*b+c*x-f*y,e[t+3]=g*M-c*y-f*x-d*b,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,a){return this._x=e,this._y=t,this._z=n,this._w=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,a=e._y,s=e._z,o=e._order,c=Math.cos,f=Math.sin,d=c(n/2),g=c(a/2),y=c(s/2),x=f(n/2),b=f(a/2),M=f(s/2);switch(o){case"XYZ":this._x=x*g*y+d*b*M,this._y=d*b*y-x*g*M,this._z=d*g*M+x*b*y,this._w=d*g*y-x*b*M;break;case"YXZ":this._x=x*g*y+d*b*M,this._y=d*b*y-x*g*M,this._z=d*g*M-x*b*y,this._w=d*g*y+x*b*M;break;case"ZXY":this._x=x*g*y-d*b*M,this._y=d*b*y+x*g*M,this._z=d*g*M+x*b*y,this._w=d*g*y-x*b*M;break;case"ZYX":this._x=x*g*y-d*b*M,this._y=d*b*y+x*g*M,this._z=d*g*M-x*b*y,this._w=d*g*y+x*b*M;break;case"YZX":this._x=x*g*y+d*b*M,this._y=d*b*y+x*g*M,this._z=d*g*M-x*b*y,this._w=d*g*y-x*b*M;break;case"XZY":this._x=x*g*y-d*b*M,this._y=d*b*y-x*g*M,this._z=d*g*M+x*b*y,this._w=d*g*y+x*b*M;break;default:It("Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,a=Math.sin(n);return this._x=e.x*a,this._y=e.y*a,this._z=e.z*a,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],a=t[4],s=t[8],o=t[1],c=t[5],f=t[9],d=t[2],g=t[6],y=t[10],x=n+c+y;if(x>0){const b=.5/Math.sqrt(x+1);this._w=.25/b,this._x=(g-f)*b,this._y=(s-d)*b,this._z=(o-a)*b}else if(n>c&&n>y){const b=2*Math.sqrt(1+n-c-y);this._w=(g-f)/b,this._x=.25*b,this._y=(a+o)/b,this._z=(s+d)/b}else if(c>y){const b=2*Math.sqrt(1+c-n-y);this._w=(s-d)/b,this._x=(a+o)/b,this._y=.25*b,this._z=(f+g)/b}else{const b=2*Math.sqrt(1+y-n-c);this._w=(o-a)/b,this._x=(s+d)/b,this._y=(f+g)/b,this._z=.25*b}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<1e-8?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(mn(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const a=Math.min(1,t/n);return this.slerp(e,a),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,a=e._y,s=e._z,o=e._w,c=t._x,f=t._y,d=t._z,g=t._w;return this._x=n*g+o*c+a*d-s*f,this._y=a*g+o*f+s*c-n*d,this._z=s*g+o*d+n*f-a*c,this._w=o*g-n*c-a*f-s*d,this._onChangeCallback(),this}slerp(e,t){if(t<=0)return this;if(t>=1)return this.copy(e);let n=e._x,a=e._y,s=e._z,o=e._w,c=this.dot(e);c<0&&(n=-n,a=-a,s=-s,o=-o,c=-c);let f=1-t;if(c<.9995){const d=Math.acos(c),g=Math.sin(d);f=Math.sin(f*d)/g,t=Math.sin(t*d)/g,this._x=this._x*f+n*t,this._y=this._y*f+a*t,this._z=this._z*f+s*t,this._w=this._w*f+o*t,this._onChangeCallback()}else this._x=this._x*f+n*t,this._y=this._y*f+a*t,this._z=this._z*f+s*t,this._w=this._w*f+o*t,this.normalize();return this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),a=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(a*Math.sin(e),a*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class pe{constructor(e=0,t=0,n=0){pe.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(_A.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(_A.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,a=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*a,this.y=s[1]*t+s[4]*n+s[7]*a,this.z=s[2]*t+s[5]*n+s[8]*a,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,a=this.z,s=e.elements,o=1/(s[3]*t+s[7]*n+s[11]*a+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*a+s[12])*o,this.y=(s[1]*t+s[5]*n+s[9]*a+s[13])*o,this.z=(s[2]*t+s[6]*n+s[10]*a+s[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,a=this.z,s=e.x,o=e.y,c=e.z,f=e.w,d=2*(o*a-c*n),g=2*(c*t-s*a),y=2*(s*n-o*t);return this.x=t+f*d+o*y-c*g,this.y=n+f*g+c*d-s*y,this.z=a+f*y+s*g-o*d,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,a=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*a,this.y=s[1]*t+s[5]*n+s[9]*a,this.z=s[2]*t+s[6]*n+s[10]*a,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=mn(this.x,e.x,t.x),this.y=mn(this.y,e.y,t.y),this.z=mn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=mn(this.x,e,t),this.y=mn(this.y,e,t),this.z=mn(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(mn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,a=e.y,s=e.z,o=t.x,c=t.y,f=t.z;return this.x=a*f-s*c,this.y=s*o-n*f,this.z=n*c-a*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Zx.copy(this).projectOnVector(e),this.sub(Zx)}reflect(e){return this.sub(Zx.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(mn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,a=this.z-e.z;return t*t+n*n+a*a}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const a=Math.sin(t)*e;return this.x=a*Math.sin(n),this.y=Math.cos(t)*e,this.z=a*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),a=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=a,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Zx=new pe,_A=new or;class En{constructor(e,t,n,a,s,o,c,f,d){En.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,a,s,o,c,f,d)}set(e,t,n,a,s,o,c,f,d){const g=this.elements;return g[0]=e,g[1]=a,g[2]=c,g[3]=t,g[4]=s,g[5]=f,g[6]=n,g[7]=o,g[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,a=t.elements,s=this.elements,o=n[0],c=n[3],f=n[6],d=n[1],g=n[4],y=n[7],x=n[2],b=n[5],M=n[8],R=a[0],C=a[3],E=a[6],N=a[1],I=a[4],z=a[7],F=a[2],V=a[5],W=a[8];return s[0]=o*R+c*N+f*F,s[3]=o*C+c*I+f*V,s[6]=o*E+c*z+f*W,s[1]=d*R+g*N+y*F,s[4]=d*C+g*I+y*V,s[7]=d*E+g*z+y*W,s[2]=x*R+b*N+M*F,s[5]=x*C+b*I+M*V,s[8]=x*E+b*z+M*W,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],a=e[2],s=e[3],o=e[4],c=e[5],f=e[6],d=e[7],g=e[8];return t*o*g-t*c*d-n*s*g+n*c*f+a*s*d-a*o*f}invert(){const e=this.elements,t=e[0],n=e[1],a=e[2],s=e[3],o=e[4],c=e[5],f=e[6],d=e[7],g=e[8],y=g*o-c*d,x=c*f-g*s,b=d*s-o*f,M=t*y+n*x+a*b;if(M===0)return this.set(0,0,0,0,0,0,0,0,0);const R=1/M;return e[0]=y*R,e[1]=(a*d-g*n)*R,e[2]=(c*n-a*o)*R,e[3]=x*R,e[4]=(g*t-a*f)*R,e[5]=(a*s-c*t)*R,e[6]=b*R,e[7]=(n*f-d*t)*R,e[8]=(o*t-n*s)*R,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,a,s,o,c){const f=Math.cos(s),d=Math.sin(s);return this.set(n*f,n*d,-n*(f*o+d*c)+o+e,-a*d,a*f,-a*(-d*o+f*c)+c+t,0,0,1),this}scale(e,t){return this.premultiply(Kx.makeScale(e,t)),this}rotate(e){return this.premultiply(Kx.makeRotation(-e)),this}translate(e,t){return this.premultiply(Kx.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let a=0;a<9;a++)if(t[a]!==n[a])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Kx=new En,xA=new En().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),SA=new En().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function SN(){const i={enabled:!0,workingColorSpace:Vf,spaces:{},convert:function(a,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===Mi&&(a.r=Uu(a.r),a.g=Uu(a.g),a.b=Uu(a.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(a.applyMatrix3(this.spaces[s].toXYZ),a.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===Mi&&(a.r=Hp(a.r),a.g=Hp(a.g),a.b=Hp(a.b))),a},workingToColorSpace:function(a,s){return this.convert(a,this.workingColorSpace,s)},colorSpaceToWorking:function(a,s){return this.convert(a,s,this.workingColorSpace)},getPrimaries:function(a){return this.spaces[a].primaries},getTransfer:function(a){return a===Du?o0:this.spaces[a].transfer},getToneMappingMode:function(a){return this.spaces[a].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(a,s=this.workingColorSpace){return a.fromArray(this.spaces[s].luminanceCoefficients)},define:function(a){Object.assign(this.spaces,a)},_getMatrix:function(a,s,o){return a.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(a){return this.spaces[a].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(a=this.workingColorSpace){return this.spaces[a].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(a,s){return Xp("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),i.workingToColorSpace(a,s)},toWorkingColorSpace:function(a,s){return Xp("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),i.colorSpaceToWorking(a,s)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[Vf]:{primaries:e,whitePoint:n,transfer:o0,toXYZ:xA,fromXYZ:SA,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:ir},outputColorSpaceConfig:{drawingBufferColorSpace:ir}},[ir]:{primaries:e,whitePoint:n,transfer:Mi,toXYZ:xA,fromXYZ:SA,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:ir}}}),i}const Xn=SN();function Uu(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function Hp(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let rp;class XC{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{rp===void 0&&(rp=c0("canvas")),rp.width=e.width,rp.height=e.height;const a=rp.getContext("2d");e instanceof ImageData?a.putImageData(e,0,0):a.drawImage(e,0,0,e.width,e.height),n=rp}return n.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=c0("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const a=n.getImageData(0,0,e.width,e.height),s=a.data;for(let o=0;o<s.length;o++)s[o]=Uu(s[o]/255)*255;return n.putImageData(a,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Uu(t[n]/255)*255):t[n]=Uu(t[n]);return{data:t,width:e.width,height:e.height}}else return It("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let bN=0;class Bf{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:bN++}),this.uuid=ko(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):typeof VideoFrame<"u"&&t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},a=this.data;if(a!==null){let s;if(Array.isArray(a)){s=[];for(let o=0,c=a.length;o<c;o++)a[o].isDataTexture?s.push(Qx(a[o].image)):s.push(Qx(a[o]))}else s=Qx(a);n.url=s}return t||(e.images[this.uuid]=n),n}}function Qx(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?XC.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(It("Texture: Unable to serialize Texture."),{})}let TN=0;const Jx=new pe;class pa extends Gc{constructor(e=pa.DEFAULT_IMAGE,t=pa.DEFAULT_MAPPING,n=ao,a=ao,s=Di,o=Ic,c=sr,f=Br,d=pa.DEFAULT_ANISOTROPY,g=Du){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:TN++}),this.uuid=ko(),this.name="",this.source=new Bf(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=a,this.magFilter=s,this.minFilter=o,this.anisotropy=d,this.format=c,this.internalFormat=null,this.type=f,this.offset=new dt(0,0),this.repeat=new dt(1,1),this.center=new dt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new En,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=g,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(Jx).x}get height(){return this.source.getSize(Jx).y}get depth(){return this.source.getSize(Jx).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const n=e[t];if(n===void 0){It(`Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const a=this[t];if(a===void 0){It(`Texture.setValues(): property '${t}' does not exist.`);continue}a&&n&&a.isVector2&&n.isVector2||a&&n&&a.isVector3&&n.isVector3||a&&n&&a.isMatrix3&&n.isMatrix3?a.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==d1)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case i0:e.x=e.x-Math.floor(e.x);break;case ao:e.x=e.x<0?0:1;break;case a0:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case i0:e.y=e.y-Math.floor(e.y);break;case ao:e.y=e.y<0?0:1;break;case a0:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}pa.DEFAULT_IMAGE=null;pa.DEFAULT_MAPPING=d1;pa.DEFAULT_ANISOTROPY=1;class Ri{constructor(e=0,t=0,n=0,a=1){Ri.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=a}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,a){return this.x=e,this.y=t,this.z=n,this.w=a,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,a=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*a+o[12]*s,this.y=o[1]*t+o[5]*n+o[9]*a+o[13]*s,this.z=o[2]*t+o[6]*n+o[10]*a+o[14]*s,this.w=o[3]*t+o[7]*n+o[11]*a+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,a,s;const f=e.elements,d=f[0],g=f[4],y=f[8],x=f[1],b=f[5],M=f[9],R=f[2],C=f[6],E=f[10];if(Math.abs(g-x)<.01&&Math.abs(y-R)<.01&&Math.abs(M-C)<.01){if(Math.abs(g+x)<.1&&Math.abs(y+R)<.1&&Math.abs(M+C)<.1&&Math.abs(d+b+E-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const I=(d+1)/2,z=(b+1)/2,F=(E+1)/2,V=(g+x)/4,W=(y+R)/4,Z=(M+C)/4;return I>z&&I>F?I<.01?(n=0,a=.707106781,s=.707106781):(n=Math.sqrt(I),a=V/n,s=W/n):z>F?z<.01?(n=.707106781,a=0,s=.707106781):(a=Math.sqrt(z),n=V/a,s=Z/a):F<.01?(n=.707106781,a=.707106781,s=0):(s=Math.sqrt(F),n=W/s,a=Z/s),this.set(n,a,s,t),this}let N=Math.sqrt((C-M)*(C-M)+(y-R)*(y-R)+(x-g)*(x-g));return Math.abs(N)<.001&&(N=1),this.x=(C-M)/N,this.y=(y-R)/N,this.z=(x-g)/N,this.w=Math.acos((d+b+E-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=mn(this.x,e.x,t.x),this.y=mn(this.y,e.y,t.y),this.z=mn(this.z,e.z,t.z),this.w=mn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=mn(this.x,e,t),this.y=mn(this.y,e,t),this.z=mn(this.z,e,t),this.w=mn(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(mn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class G2 extends Gc{constructor(e=1,t=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Di,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=n.depth,this.scissor=new Ri(0,0,e,t),this.scissorTest=!1,this.viewport=new Ri(0,0,e,t);const a={width:e,height:t,depth:n.depth},s=new pa(a);this.textures=[];const o=n.count;for(let c=0;c<o;c++)this.textures[c]=s.clone(),this.textures[c].isRenderTargetTexture=!0,this.textures[c].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(e={}){const t={minFilter:Di,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let n=0;n<this.textures.length;n++)this.textures[n].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let a=0,s=this.textures.length;a<s;a++)this.textures[a].image.width=e,this.textures[a].image.height=t,this.textures[a].image.depth=n,this.textures[a].isData3DTexture!==!0&&(this.textures[a].isArrayTexture=this.textures[a].image.depth>1);this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const a=Object.assign({},e.textures[t].image);this.textures[t].source=new Bf(a)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ro extends G2{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class T1 extends pa{constructor(e=null,t=1,n=1,a=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:a},this.magFilter=Ba,this.minFilter=Ba,this.wrapR=ao,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class MN extends ro{constructor(e=1,t=1,n=1,a={}){super(e,t,a),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new T1(null,e,t,n),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class M1 extends pa{constructor(e=null,t=1,n=1,a=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:a},this.magFilter=Ba,this.minFilter=Ba,this.wrapR=ao,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class AN extends ro{constructor(e=1,t=1,n=1,a={}){super(e,t,a),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new M1(null,e,t,n),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class Ms{constructor(e=new pe(1/0,1/0,1/0),t=new pe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Wl.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Wl.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Wl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const s=n.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,c=s.count;o<c;o++)e.isMesh===!0?e.getVertexPosition(o,Wl):Wl.fromBufferAttribute(s,o),Wl.applyMatrix4(e.matrixWorld),this.expandByPoint(Wl);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Vv.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),Vv.copy(n.boundingBox)),Vv.applyMatrix4(e.matrixWorld),this.union(Vv)}const a=e.children;for(let s=0,o=a.length;s<o;s++)this.expandByObject(a[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Wl),Wl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(pg),Hv.subVectors(this.max,pg),op.subVectors(e.a,pg),lp.subVectors(e.b,pg),cp.subVectors(e.c,pg),Ef.subVectors(lp,op),wf.subVectors(cp,lp),Ch.subVectors(op,cp);let t=[0,-Ef.z,Ef.y,0,-wf.z,wf.y,0,-Ch.z,Ch.y,Ef.z,0,-Ef.x,wf.z,0,-wf.x,Ch.z,0,-Ch.x,-Ef.y,Ef.x,0,-wf.y,wf.x,0,-Ch.y,Ch.x,0];return!$x(t,op,lp,cp,Hv)||(t=[1,0,0,0,1,0,0,0,1],!$x(t,op,lp,cp,Hv))?!1:(Gv.crossVectors(Ef,wf),t=[Gv.x,Gv.y,Gv.z],$x(t,op,lp,cp,Hv))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Wl).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Wl).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(bu[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),bu[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),bu[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),bu[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),bu[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),bu[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),bu[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),bu[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(bu),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const bu=[new pe,new pe,new pe,new pe,new pe,new pe,new pe,new pe],Wl=new pe,Vv=new Ms,op=new pe,lp=new pe,cp=new pe,Ef=new pe,wf=new pe,Ch=new pe,pg=new pe,Hv=new pe,Gv=new pe,Rh=new pe;function $x(i,e,t,n,a){for(let s=0,o=i.length-3;s<=o;s+=3){Rh.fromArray(i,s);const c=a.x*Math.abs(Rh.x)+a.y*Math.abs(Rh.y)+a.z*Math.abs(Rh.z),f=e.dot(Rh),d=t.dot(Rh),g=n.dot(Rh);if(Math.max(-Math.max(f,d,g),Math.min(f,d,g))>c)return!1}return!0}const EN=new Ms,mg=new pe,eS=new pe;class As{constructor(e=new pe,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):EN.setFromPoints(e).getCenter(n);let a=0;for(let s=0,o=e.length;s<o;s++)a=Math.max(a,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(a),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;mg.subVectors(e,this.center);const t=mg.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),a=(n-this.radius)*.5;this.center.addScaledVector(mg,a/n),this.radius+=a}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(eS.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(mg.copy(e.center).add(eS)),this.expandByPoint(mg.copy(e.center).sub(eS))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const Tu=new pe,tS=new pe,jv=new pe,Cf=new pe,nS=new pe,Wv=new pe,iS=new pe;class md{constructor(e=new pe,t=new pe(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Tu)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Tu.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Tu.copy(this.origin).addScaledVector(this.direction,t),Tu.distanceToSquared(e))}distanceSqToSegment(e,t,n,a){tS.copy(e).add(t).multiplyScalar(.5),jv.copy(t).sub(e).normalize(),Cf.copy(this.origin).sub(tS);const s=e.distanceTo(t)*.5,o=-this.direction.dot(jv),c=Cf.dot(this.direction),f=-Cf.dot(jv),d=Cf.lengthSq(),g=Math.abs(1-o*o);let y,x,b,M;if(g>0)if(y=o*f-c,x=o*c-f,M=s*g,y>=0)if(x>=-M)if(x<=M){const R=1/g;y*=R,x*=R,b=y*(y+o*x+2*c)+x*(o*y+x+2*f)+d}else x=s,y=Math.max(0,-(o*x+c)),b=-y*y+x*(x+2*f)+d;else x=-s,y=Math.max(0,-(o*x+c)),b=-y*y+x*(x+2*f)+d;else x<=-M?(y=Math.max(0,-(-o*s+c)),x=y>0?-s:Math.min(Math.max(-s,-f),s),b=-y*y+x*(x+2*f)+d):x<=M?(y=0,x=Math.min(Math.max(-s,-f),s),b=x*(x+2*f)+d):(y=Math.max(0,-(o*s+c)),x=y>0?s:Math.min(Math.max(-s,-f),s),b=-y*y+x*(x+2*f)+d);else x=o>0?-s:s,y=Math.max(0,-(o*x+c)),b=-y*y+x*(x+2*f)+d;return n&&n.copy(this.origin).addScaledVector(this.direction,y),a&&a.copy(tS).addScaledVector(jv,x),b}intersectSphere(e,t){Tu.subVectors(e.center,this.origin);const n=Tu.dot(this.direction),a=Tu.dot(Tu)-n*n,s=e.radius*e.radius;if(a>s)return null;const o=Math.sqrt(s-a),c=n-o,f=n+o;return f<0?null:c<0?this.at(f,t):this.at(c,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,a,s,o,c,f;const d=1/this.direction.x,g=1/this.direction.y,y=1/this.direction.z,x=this.origin;return d>=0?(n=(e.min.x-x.x)*d,a=(e.max.x-x.x)*d):(n=(e.max.x-x.x)*d,a=(e.min.x-x.x)*d),g>=0?(s=(e.min.y-x.y)*g,o=(e.max.y-x.y)*g):(s=(e.max.y-x.y)*g,o=(e.min.y-x.y)*g),n>o||s>a||((s>n||isNaN(n))&&(n=s),(o<a||isNaN(a))&&(a=o),y>=0?(c=(e.min.z-x.z)*y,f=(e.max.z-x.z)*y):(c=(e.max.z-x.z)*y,f=(e.min.z-x.z)*y),n>f||c>a)||((c>n||n!==n)&&(n=c),(f<a||a!==a)&&(a=f),a<0)?null:this.at(n>=0?n:a,t)}intersectsBox(e){return this.intersectBox(e,Tu)!==null}intersectTriangle(e,t,n,a,s){nS.subVectors(t,e),Wv.subVectors(n,e),iS.crossVectors(nS,Wv);let o=this.direction.dot(iS),c;if(o>0){if(a)return null;c=1}else if(o<0)c=-1,o=-o;else return null;Cf.subVectors(this.origin,e);const f=c*this.direction.dot(Wv.crossVectors(Cf,Wv));if(f<0)return null;const d=c*this.direction.dot(nS.cross(Cf));if(d<0||f+d>o)return null;const g=-c*Cf.dot(iS);return g<0?null:this.at(g/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class gn{constructor(e,t,n,a,s,o,c,f,d,g,y,x,b,M,R,C){gn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,a,s,o,c,f,d,g,y,x,b,M,R,C)}set(e,t,n,a,s,o,c,f,d,g,y,x,b,M,R,C){const E=this.elements;return E[0]=e,E[4]=t,E[8]=n,E[12]=a,E[1]=s,E[5]=o,E[9]=c,E[13]=f,E[2]=d,E[6]=g,E[10]=y,E[14]=x,E[3]=b,E[7]=M,E[11]=R,E[15]=C,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new gn().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return this.determinant()===0?(e.set(1,0,0),t.set(0,1,0),n.set(0,0,1),this):(e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this)}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){if(e.determinant()===0)return this.identity();const t=this.elements,n=e.elements,a=1/up.setFromMatrixColumn(e,0).length(),s=1/up.setFromMatrixColumn(e,1).length(),o=1/up.setFromMatrixColumn(e,2).length();return t[0]=n[0]*a,t[1]=n[1]*a,t[2]=n[2]*a,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,a=e.y,s=e.z,o=Math.cos(n),c=Math.sin(n),f=Math.cos(a),d=Math.sin(a),g=Math.cos(s),y=Math.sin(s);if(e.order==="XYZ"){const x=o*g,b=o*y,M=c*g,R=c*y;t[0]=f*g,t[4]=-f*y,t[8]=d,t[1]=b+M*d,t[5]=x-R*d,t[9]=-c*f,t[2]=R-x*d,t[6]=M+b*d,t[10]=o*f}else if(e.order==="YXZ"){const x=f*g,b=f*y,M=d*g,R=d*y;t[0]=x+R*c,t[4]=M*c-b,t[8]=o*d,t[1]=o*y,t[5]=o*g,t[9]=-c,t[2]=b*c-M,t[6]=R+x*c,t[10]=o*f}else if(e.order==="ZXY"){const x=f*g,b=f*y,M=d*g,R=d*y;t[0]=x-R*c,t[4]=-o*y,t[8]=M+b*c,t[1]=b+M*c,t[5]=o*g,t[9]=R-x*c,t[2]=-o*d,t[6]=c,t[10]=o*f}else if(e.order==="ZYX"){const x=o*g,b=o*y,M=c*g,R=c*y;t[0]=f*g,t[4]=M*d-b,t[8]=x*d+R,t[1]=f*y,t[5]=R*d+x,t[9]=b*d-M,t[2]=-d,t[6]=c*f,t[10]=o*f}else if(e.order==="YZX"){const x=o*f,b=o*d,M=c*f,R=c*d;t[0]=f*g,t[4]=R-x*y,t[8]=M*y+b,t[1]=y,t[5]=o*g,t[9]=-c*g,t[2]=-d*g,t[6]=b*y+M,t[10]=x-R*y}else if(e.order==="XZY"){const x=o*f,b=o*d,M=c*f,R=c*d;t[0]=f*g,t[4]=-y,t[8]=d*g,t[1]=x*y+R,t[5]=o*g,t[9]=b*y-M,t[2]=M*y-b,t[6]=c*g,t[10]=R*y+x}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(wN,e,CN)}lookAt(e,t,n){const a=this.elements;return zo.subVectors(e,t),zo.lengthSq()===0&&(zo.z=1),zo.normalize(),Rf.crossVectors(n,zo),Rf.lengthSq()===0&&(Math.abs(n.z)===1?zo.x+=1e-4:zo.z+=1e-4,zo.normalize(),Rf.crossVectors(n,zo)),Rf.normalize(),qv.crossVectors(zo,Rf),a[0]=Rf.x,a[4]=qv.x,a[8]=zo.x,a[1]=Rf.y,a[5]=qv.y,a[9]=zo.y,a[2]=Rf.z,a[6]=qv.z,a[10]=zo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,a=t.elements,s=this.elements,o=n[0],c=n[4],f=n[8],d=n[12],g=n[1],y=n[5],x=n[9],b=n[13],M=n[2],R=n[6],C=n[10],E=n[14],N=n[3],I=n[7],z=n[11],F=n[15],V=a[0],W=a[4],Z=a[8],B=a[12],H=a[1],Q=a[5],J=a[9],oe=a[13],re=a[2],ve=a[6],q=a[10],K=a[14],te=a[3],de=a[7],ce=a[11],G=a[15];return s[0]=o*V+c*H+f*re+d*te,s[4]=o*W+c*Q+f*ve+d*de,s[8]=o*Z+c*J+f*q+d*ce,s[12]=o*B+c*oe+f*K+d*G,s[1]=g*V+y*H+x*re+b*te,s[5]=g*W+y*Q+x*ve+b*de,s[9]=g*Z+y*J+x*q+b*ce,s[13]=g*B+y*oe+x*K+b*G,s[2]=M*V+R*H+C*re+E*te,s[6]=M*W+R*Q+C*ve+E*de,s[10]=M*Z+R*J+C*q+E*ce,s[14]=M*B+R*oe+C*K+E*G,s[3]=N*V+I*H+z*re+F*te,s[7]=N*W+I*Q+z*ve+F*de,s[11]=N*Z+I*J+z*q+F*ce,s[15]=N*B+I*oe+z*K+F*G,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],a=e[8],s=e[12],o=e[1],c=e[5],f=e[9],d=e[13],g=e[2],y=e[6],x=e[10],b=e[14],M=e[3],R=e[7],C=e[11],E=e[15],N=f*b-d*x,I=c*b-d*y,z=c*x-f*y,F=o*b-d*g,V=o*x-f*g,W=o*y-c*g;return t*(R*N-C*I+E*z)-n*(M*N-C*F+E*V)+a*(M*I-R*F+E*W)-s*(M*z-R*V+C*W)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const a=this.elements;return e.isVector3?(a[12]=e.x,a[13]=e.y,a[14]=e.z):(a[12]=e,a[13]=t,a[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],a=e[2],s=e[3],o=e[4],c=e[5],f=e[6],d=e[7],g=e[8],y=e[9],x=e[10],b=e[11],M=e[12],R=e[13],C=e[14],E=e[15],N=y*C*d-R*x*d+R*f*b-c*C*b-y*f*E+c*x*E,I=M*x*d-g*C*d-M*f*b+o*C*b+g*f*E-o*x*E,z=g*R*d-M*y*d+M*c*b-o*R*b-g*c*E+o*y*E,F=M*y*f-g*R*f-M*c*x+o*R*x+g*c*C-o*y*C,V=t*N+n*I+a*z+s*F;if(V===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const W=1/V;return e[0]=N*W,e[1]=(R*x*s-y*C*s-R*a*b+n*C*b+y*a*E-n*x*E)*W,e[2]=(c*C*s-R*f*s+R*a*d-n*C*d-c*a*E+n*f*E)*W,e[3]=(y*f*s-c*x*s-y*a*d+n*x*d+c*a*b-n*f*b)*W,e[4]=I*W,e[5]=(g*C*s-M*x*s+M*a*b-t*C*b-g*a*E+t*x*E)*W,e[6]=(M*f*s-o*C*s-M*a*d+t*C*d+o*a*E-t*f*E)*W,e[7]=(o*x*s-g*f*s+g*a*d-t*x*d-o*a*b+t*f*b)*W,e[8]=z*W,e[9]=(M*y*s-g*R*s-M*n*b+t*R*b+g*n*E-t*y*E)*W,e[10]=(o*R*s-M*c*s+M*n*d-t*R*d-o*n*E+t*c*E)*W,e[11]=(g*c*s-o*y*s-g*n*d+t*y*d+o*n*b-t*c*b)*W,e[12]=F*W,e[13]=(g*R*a-M*y*a+M*n*x-t*R*x-g*n*C+t*y*C)*W,e[14]=(M*c*a-o*R*a-M*n*f+t*R*f+o*n*C-t*c*C)*W,e[15]=(o*y*a-g*c*a+g*n*f-t*y*f-o*n*x+t*c*x)*W,this}scale(e){const t=this.elements,n=e.x,a=e.y,s=e.z;return t[0]*=n,t[4]*=a,t[8]*=s,t[1]*=n,t[5]*=a,t[9]*=s,t[2]*=n,t[6]*=a,t[10]*=s,t[3]*=n,t[7]*=a,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],a=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,a))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),a=Math.sin(t),s=1-n,o=e.x,c=e.y,f=e.z,d=s*o,g=s*c;return this.set(d*o+n,d*c-a*f,d*f+a*c,0,d*c+a*f,g*c+n,g*f-a*o,0,d*f-a*c,g*f+a*o,s*f*f+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,a,s,o){return this.set(1,n,s,0,e,1,o,0,t,a,1,0,0,0,0,1),this}compose(e,t,n){const a=this.elements,s=t._x,o=t._y,c=t._z,f=t._w,d=s+s,g=o+o,y=c+c,x=s*d,b=s*g,M=s*y,R=o*g,C=o*y,E=c*y,N=f*d,I=f*g,z=f*y,F=n.x,V=n.y,W=n.z;return a[0]=(1-(R+E))*F,a[1]=(b+z)*F,a[2]=(M-I)*F,a[3]=0,a[4]=(b-z)*V,a[5]=(1-(x+E))*V,a[6]=(C+N)*V,a[7]=0,a[8]=(M+I)*W,a[9]=(C-N)*W,a[10]=(1-(x+R))*W,a[11]=0,a[12]=e.x,a[13]=e.y,a[14]=e.z,a[15]=1,this}decompose(e,t,n){const a=this.elements;if(e.x=a[12],e.y=a[13],e.z=a[14],this.determinant()===0)return n.set(1,1,1),t.identity(),this;let s=up.set(a[0],a[1],a[2]).length();const o=up.set(a[4],a[5],a[6]).length(),c=up.set(a[8],a[9],a[10]).length();this.determinant()<0&&(s=-s),ql.copy(this);const d=1/s,g=1/o,y=1/c;return ql.elements[0]*=d,ql.elements[1]*=d,ql.elements[2]*=d,ql.elements[4]*=g,ql.elements[5]*=g,ql.elements[6]*=g,ql.elements[8]*=y,ql.elements[9]*=y,ql.elements[10]*=y,t.setFromRotationMatrix(ql),n.x=s,n.y=o,n.z=c,this}makePerspective(e,t,n,a,s,o,c=Fo,f=!1){const d=this.elements,g=2*s/(t-e),y=2*s/(n-a),x=(t+e)/(t-e),b=(n+a)/(n-a);let M,R;if(f)M=s/(o-s),R=o*s/(o-s);else if(c===Fo)M=-(o+s)/(o-s),R=-2*o*s/(o-s);else if(c===qp)M=-o/(o-s),R=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+c);return d[0]=g,d[4]=0,d[8]=x,d[12]=0,d[1]=0,d[5]=y,d[9]=b,d[13]=0,d[2]=0,d[6]=0,d[10]=M,d[14]=R,d[3]=0,d[7]=0,d[11]=-1,d[15]=0,this}makeOrthographic(e,t,n,a,s,o,c=Fo,f=!1){const d=this.elements,g=2/(t-e),y=2/(n-a),x=-(t+e)/(t-e),b=-(n+a)/(n-a);let M,R;if(f)M=1/(o-s),R=o/(o-s);else if(c===Fo)M=-2/(o-s),R=-(o+s)/(o-s);else if(c===qp)M=-1/(o-s),R=-s/(o-s);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+c);return d[0]=g,d[4]=0,d[8]=0,d[12]=x,d[1]=0,d[5]=y,d[9]=0,d[13]=b,d[2]=0,d[6]=0,d[10]=M,d[14]=R,d[3]=0,d[7]=0,d[11]=0,d[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let a=0;a<16;a++)if(t[a]!==n[a])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const up=new pe,ql=new gn,wN=new pe(0,0,0),CN=new pe(1,1,1),Rf=new pe,qv=new pe,zo=new pe,bA=new gn,TA=new or;class Vo{constructor(e=0,t=0,n=0,a=Vo.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=a}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,a=this._order){return this._x=e,this._y=t,this._z=n,this._order=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const a=e.elements,s=a[0],o=a[4],c=a[8],f=a[1],d=a[5],g=a[9],y=a[2],x=a[6],b=a[10];switch(t){case"XYZ":this._y=Math.asin(mn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-g,b),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(x,d),this._z=0);break;case"YXZ":this._x=Math.asin(-mn(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(c,b),this._z=Math.atan2(f,d)):(this._y=Math.atan2(-y,s),this._z=0);break;case"ZXY":this._x=Math.asin(mn(x,-1,1)),Math.abs(x)<.9999999?(this._y=Math.atan2(-y,b),this._z=Math.atan2(-o,d)):(this._y=0,this._z=Math.atan2(f,s));break;case"ZYX":this._y=Math.asin(-mn(y,-1,1)),Math.abs(y)<.9999999?(this._x=Math.atan2(x,b),this._z=Math.atan2(f,s)):(this._x=0,this._z=Math.atan2(-o,d));break;case"YZX":this._z=Math.asin(mn(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(-g,d),this._y=Math.atan2(-y,s)):(this._x=0,this._y=Math.atan2(c,b));break;case"XZY":this._z=Math.asin(-mn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(x,d),this._y=Math.atan2(c,s)):(this._x=Math.atan2(-g,b),this._y=0);break;default:It("Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return bA.makeRotationFromQuaternion(e),this.setFromRotationMatrix(bA,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return TA.setFromEuler(this),this.setFromQuaternion(TA,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Vo.DEFAULT_ORDER="XYZ";class Zp{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let RN=0;const MA=new pe,fp=new or,Mu=new gn,Xv=new pe,gg=new pe,DN=new pe,LN=new or,AA=new pe(1,0,0),EA=new pe(0,1,0),wA=new pe(0,0,1),CA={type:"added"},ON={type:"removed"},hp={type:"childadded",child:null},aS={type:"childremoved",child:null};class li extends Gc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:RN++}),this.uuid=ko(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=li.DEFAULT_UP.clone();const e=new pe,t=new Vo,n=new or,a=new pe(1,1,1);function s(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new gn},normalMatrix:{value:new En}}),this.matrix=new gn,this.matrixWorld=new gn,this.matrixAutoUpdate=li.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=li.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Zp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return fp.setFromAxisAngle(e,t),this.quaternion.multiply(fp),this}rotateOnWorldAxis(e,t){return fp.setFromAxisAngle(e,t),this.quaternion.premultiply(fp),this}rotateX(e){return this.rotateOnAxis(AA,e)}rotateY(e){return this.rotateOnAxis(EA,e)}rotateZ(e){return this.rotateOnAxis(wA,e)}translateOnAxis(e,t){return MA.copy(e).applyQuaternion(this.quaternion),this.position.add(MA.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(AA,e)}translateY(e){return this.translateOnAxis(EA,e)}translateZ(e){return this.translateOnAxis(wA,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Mu.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Xv.copy(e):Xv.set(e,t,n);const a=this.parent;this.updateWorldMatrix(!0,!1),gg.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Mu.lookAt(gg,Xv,this.up):Mu.lookAt(Xv,gg,this.up),this.quaternion.setFromRotationMatrix(Mu),a&&(Mu.extractRotation(a.matrixWorld),fp.setFromRotationMatrix(Mu),this.quaternion.premultiply(fp.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(rn("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(CA),hp.child=e,this.dispatchEvent(hp),hp.child=null):rn("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(ON),aS.child=e,this.dispatchEvent(aS),aS.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Mu.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Mu.multiply(e.parent.matrixWorld)),e.applyMatrix4(Mu),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(CA),hp.child=e,this.dispatchEvent(hp),hp.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,a=this.children.length;n<a;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const a=this.children;for(let s=0,o=a.length;s<o;s++)a[s].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(gg,e,DN),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(gg,LN,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,a=t.length;n<a;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,a=t.length;n<a;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,a=t.length;n<a;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const a=this.children;for(let s=0,o=a.length;s<o;s++)a[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const a={};a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.castShadow===!0&&(a.castShadow=!0),this.receiveShadow===!0&&(a.receiveShadow=!0),this.visible===!1&&(a.visible=!1),this.frustumCulled===!1&&(a.frustumCulled=!1),this.renderOrder!==0&&(a.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),a.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(a.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(a.type="BatchedMesh",a.perObjectFrustumCulled=this.perObjectFrustumCulled,a.sortObjects=this.sortObjects,a.drawRanges=this._drawRanges,a.reservedRanges=this._reservedRanges,a.geometryInfo=this._geometryInfo.map(c=>({...c,boundingBox:c.boundingBox?c.boundingBox.toJSON():void 0,boundingSphere:c.boundingSphere?c.boundingSphere.toJSON():void 0})),a.instanceInfo=this._instanceInfo.map(c=>({...c})),a.availableInstanceIds=this._availableInstanceIds.slice(),a.availableGeometryIds=this._availableGeometryIds.slice(),a.nextIndexStart=this._nextIndexStart,a.nextVertexStart=this._nextVertexStart,a.geometryCount=this._geometryCount,a.maxInstanceCount=this._maxInstanceCount,a.maxVertexCount=this._maxVertexCount,a.maxIndexCount=this._maxIndexCount,a.geometryInitialized=this._geometryInitialized,a.matricesTexture=this._matricesTexture.toJSON(e),a.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(a.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(a.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(a.boundingBox=this.boundingBox.toJSON()));function s(c,f){return c[f.uuid]===void 0&&(c[f.uuid]=f.toJSON(e)),f.uuid}if(this.isScene)this.background&&(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&&(a.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(a.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=s(e.geometries,this.geometry);const c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){const f=c.shapes;if(Array.isArray(f))for(let d=0,g=f.length;d<g;d++){const y=f[d];s(e.shapes,y)}else s(e.shapes,f)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const c=[];for(let f=0,d=this.material.length;f<d;f++)c.push(s(e.materials,this.material[f]));a.material=c}else a.material=s(e.materials,this.material);if(this.children.length>0){a.children=[];for(let c=0;c<this.children.length;c++)a.children.push(this.children[c].toJSON(e).object)}if(this.animations.length>0){a.animations=[];for(let c=0;c<this.animations.length;c++){const f=this.animations[c];a.animations.push(s(e.animations,f))}}if(t){const c=o(e.geometries),f=o(e.materials),d=o(e.textures),g=o(e.images),y=o(e.shapes),x=o(e.skeletons),b=o(e.animations),M=o(e.nodes);c.length>0&&(n.geometries=c),f.length>0&&(n.materials=f),d.length>0&&(n.textures=d),g.length>0&&(n.images=g),y.length>0&&(n.shapes=y),x.length>0&&(n.skeletons=x),b.length>0&&(n.animations=b),M.length>0&&(n.nodes=M)}return n.object=a,n;function o(c){const f=[];for(const d in c){const g=c[d];delete g.metadata,f.push(g)}return f}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const a=e.children[n];this.add(a.clone())}return this}}li.DEFAULT_UP=new pe(0,1,0);li.DEFAULT_MATRIX_AUTO_UPDATE=!0;li.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Xl=new pe,Au=new pe,sS=new pe,Eu=new pe,dp=new pe,pp=new pe,RA=new pe,rS=new pe,oS=new pe,lS=new pe,cS=new Ri,uS=new Ri,fS=new Ri;class io{constructor(e=new pe,t=new pe,n=new pe){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,a){a.subVectors(n,t),Xl.subVectors(e,t),a.cross(Xl);const s=a.lengthSq();return s>0?a.multiplyScalar(1/Math.sqrt(s)):a.set(0,0,0)}static getBarycoord(e,t,n,a,s){Xl.subVectors(a,t),Au.subVectors(n,t),sS.subVectors(e,t);const o=Xl.dot(Xl),c=Xl.dot(Au),f=Xl.dot(sS),d=Au.dot(Au),g=Au.dot(sS),y=o*d-c*c;if(y===0)return s.set(0,0,0),null;const x=1/y,b=(d*f-c*g)*x,M=(o*g-c*f)*x;return s.set(1-b-M,M,b)}static containsPoint(e,t,n,a){return this.getBarycoord(e,t,n,a,Eu)===null?!1:Eu.x>=0&&Eu.y>=0&&Eu.x+Eu.y<=1}static getInterpolation(e,t,n,a,s,o,c,f){return this.getBarycoord(e,t,n,a,Eu)===null?(f.x=0,f.y=0,"z"in f&&(f.z=0),"w"in f&&(f.w=0),null):(f.setScalar(0),f.addScaledVector(s,Eu.x),f.addScaledVector(o,Eu.y),f.addScaledVector(c,Eu.z),f)}static getInterpolatedAttribute(e,t,n,a,s,o){return cS.setScalar(0),uS.setScalar(0),fS.setScalar(0),cS.fromBufferAttribute(e,t),uS.fromBufferAttribute(e,n),fS.fromBufferAttribute(e,a),o.setScalar(0),o.addScaledVector(cS,s.x),o.addScaledVector(uS,s.y),o.addScaledVector(fS,s.z),o}static isFrontFacing(e,t,n,a){return Xl.subVectors(n,t),Au.subVectors(e,t),Xl.cross(Au).dot(a)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,a){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[a]),this}setFromAttributeAndIndices(e,t,n,a){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,a),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Xl.subVectors(this.c,this.b),Au.subVectors(this.a,this.b),Xl.cross(Au).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return io.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return io.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,a,s){return io.getInterpolation(e,this.a,this.b,this.c,t,n,a,s)}containsPoint(e){return io.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return io.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,a=this.b,s=this.c;let o,c;dp.subVectors(a,n),pp.subVectors(s,n),rS.subVectors(e,n);const f=dp.dot(rS),d=pp.dot(rS);if(f<=0&&d<=0)return t.copy(n);oS.subVectors(e,a);const g=dp.dot(oS),y=pp.dot(oS);if(g>=0&&y<=g)return t.copy(a);const x=f*y-g*d;if(x<=0&&f>=0&&g<=0)return o=f/(f-g),t.copy(n).addScaledVector(dp,o);lS.subVectors(e,s);const b=dp.dot(lS),M=pp.dot(lS);if(M>=0&&b<=M)return t.copy(s);const R=b*d-f*M;if(R<=0&&d>=0&&M<=0)return c=d/(d-M),t.copy(n).addScaledVector(pp,c);const C=g*M-b*y;if(C<=0&&y-g>=0&&b-M>=0)return RA.subVectors(s,a),c=(y-g)/(y-g+(b-M)),t.copy(a).addScaledVector(RA,c);const E=1/(C+R+x);return o=R*E,c=x*E,t.copy(n).addScaledVector(dp,o).addScaledVector(pp,c)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const YC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Df={h:0,s:0,l:0},Yv={h:0,s:0,l:0};function hS(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}class Ht{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const a=e;a&&a.isColor?this.copy(a):typeof a=="number"?this.setHex(a):typeof a=="string"&&this.setStyle(a)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ir){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Xn.colorSpaceToWorking(this,t),this}setRGB(e,t,n,a=Xn.workingColorSpace){return this.r=e,this.g=t,this.b=n,Xn.colorSpaceToWorking(this,a),this}setHSL(e,t,n,a=Xn.workingColorSpace){if(e=H2(e,1),t=mn(t,0,1),n=mn(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,o=2*n-s;this.r=hS(o,s,e+1/3),this.g=hS(o,s,e),this.b=hS(o,s,e-1/3)}return Xn.colorSpaceToWorking(this,a),this}setStyle(e,t=ir){function n(s){s!==void 0&&parseFloat(s)<1&&It("Color: Alpha component of "+e+" will be ignored.")}let a;if(a=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=a[1],c=a[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:It("Color: Unknown color model "+e)}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=a[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);It("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=ir){const n=YC[e.toLowerCase()];return n!==void 0?this.setHex(n,t):It("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Uu(e.r),this.g=Uu(e.g),this.b=Uu(e.b),this}copyLinearToSRGB(e){return this.r=Hp(e.r),this.g=Hp(e.g),this.b=Hp(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ir){return Xn.workingToColorSpace(tr.copy(this),e),Math.round(mn(tr.r*255,0,255))*65536+Math.round(mn(tr.g*255,0,255))*256+Math.round(mn(tr.b*255,0,255))}getHexString(e=ir){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Xn.workingColorSpace){Xn.workingToColorSpace(tr.copy(this),t);const n=tr.r,a=tr.g,s=tr.b,o=Math.max(n,a,s),c=Math.min(n,a,s);let f,d;const g=(c+o)/2;if(c===o)f=0,d=0;else{const y=o-c;switch(d=g<=.5?y/(o+c):y/(2-o-c),o){case n:f=(a-s)/y+(a<s?6:0);break;case a:f=(s-n)/y+2;break;case s:f=(n-a)/y+4;break}f/=6}return e.h=f,e.s=d,e.l=g,e}getRGB(e,t=Xn.workingColorSpace){return Xn.workingToColorSpace(tr.copy(this),t),e.r=tr.r,e.g=tr.g,e.b=tr.b,e}getStyle(e=ir){Xn.workingToColorSpace(tr.copy(this),e);const t=tr.r,n=tr.g,a=tr.b;return e!==ir?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${a.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(a*255)})`}offsetHSL(e,t,n){return this.getHSL(Df),this.setHSL(Df.h+e,Df.s+t,Df.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Df),e.getHSL(Yv);const n=jg(Df.h,Yv.h,t),a=jg(Df.s,Yv.s,t),s=jg(Df.l,Yv.l,t);return this.setHSL(n,a,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,a=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*a,this.g=s[1]*t+s[4]*n+s[7]*a,this.b=s[2]*t+s[5]*n+s[8]*a,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const tr=new Ht;Ht.NAMES=YC;let NN=0;class lr extends Gc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:NN++}),this.uuid=ko(),this.name="",this.type="Material",this.blending=td,this.side=Iu,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=a_,this.blendDst=s_,this.blendEquation=Uf,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ht(0,0,0),this.blendAlpha=0,this.depthFunc=od,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Db,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=qh,this.stencilZFail=qh,this.stencilZPass=qh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){It(`Material: parameter '${t}' has value of undefined.`);continue}const a=this[t];if(a===void 0){It(`Material: '${t}' is not a property of THREE.${this.type}.`);continue}a&&a.isColor?a.set(n):a&&a.isVector3&&n&&n.isVector3?a.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(n.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(n.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==td&&(n.blending=this.blending),this.side!==Iu&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==a_&&(n.blendSrc=this.blendSrc),this.blendDst!==s_&&(n.blendDst=this.blendDst),this.blendEquation!==Uf&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==od&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Db&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==qh&&(n.stencilFail=this.stencilFail),this.stencilZFail!==qh&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==qh&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.allowOverride===!1&&(n.allowOverride=!1),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function a(s){const o=[];for(const c in s){const f=s[c];delete f.metadata,o.push(f)}return o}if(t){const s=a(e.textures),o=a(e.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const a=t.length;n=new Array(a);for(let s=0;s!==a;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.allowOverride=e.allowOverride,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Fu extends lr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ht(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Vo,this.combine=w0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Lu=UN();function UN(){const i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),n=new Uint32Array(512),a=new Uint32Array(512);for(let f=0;f<256;++f){const d=f-127;d<-27?(n[f]=0,n[f|256]=32768,a[f]=24,a[f|256]=24):d<-14?(n[f]=1024>>-d-14,n[f|256]=1024>>-d-14|32768,a[f]=-d-1,a[f|256]=-d-1):d<=15?(n[f]=d+15<<10,n[f|256]=d+15<<10|32768,a[f]=13,a[f|256]=13):d<128?(n[f]=31744,n[f|256]=64512,a[f]=24,a[f|256]=24):(n[f]=31744,n[f|256]=64512,a[f]=13,a[f|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),c=new Uint32Array(64);for(let f=1;f<1024;++f){let d=f<<13,g=0;for(;(d&8388608)===0;)d<<=1,g-=8388608;d&=-8388609,g+=947912704,s[f]=d|g}for(let f=1024;f<2048;++f)s[f]=939524096+(f-1024<<13);for(let f=1;f<31;++f)o[f]=f<<23;o[31]=1199570944,o[32]=2147483648;for(let f=33;f<63;++f)o[f]=2147483648+(f-32<<23);o[63]=3347054592;for(let f=1;f<64;++f)f!==32&&(c[f]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:a,mantissaTable:s,exponentTable:o,offsetTable:c}}function to(i){Math.abs(i)>65504&&It("DataUtils.toHalfFloat(): Value out of range."),i=mn(i,-65504,65504),Lu.floatView[0]=i;const e=Lu.uint32View[0],t=e>>23&511;return Lu.baseTable[t]+((e&8388607)>>Lu.shiftTable[t])}function Og(i){const e=i>>10;return Lu.uint32View[0]=Lu.mantissaTable[Lu.offsetTable[e]+(i&1023)]+Lu.exponentTable[e],Lu.floatView[0]}class IN{static toHalfFloat(e){return to(e)}static fromHalfFloat(e){return Og(e)}}const Za=new pe,Zv=new dt;let PN=0;class Pi{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:PN++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=l0,this.updateRanges=[],this.gpuType=ar,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let a=0,s=this.itemSize;a<s;a++)this.array[e+a]=t.array[n+a];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)Zv.fromBufferAttribute(this,t),Zv.applyMatrix3(e),this.setXY(t,Zv.x,Zv.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)Za.fromBufferAttribute(this,t),Za.applyMatrix3(e),this.setXYZ(t,Za.x,Za.y,Za.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Za.fromBufferAttribute(this,t),Za.applyMatrix4(e),this.setXYZ(t,Za.x,Za.y,Za.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Za.fromBufferAttribute(this,t),Za.applyNormalMatrix(e),this.setXYZ(t,Za.x,Za.y,Za.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Za.fromBufferAttribute(this,t),Za.transformDirection(e),this.setXYZ(t,Za.x,Za.y,Za.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Fr(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=On(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Fr(t,this.array)),t}setX(e,t){return this.normalized&&(t=On(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Fr(t,this.array)),t}setY(e,t){return this.normalized&&(t=On(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Fr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=On(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Fr(t,this.array)),t}setW(e,t){return this.normalized&&(t=On(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=On(t,this.array),n=On(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,a){return e*=this.itemSize,this.normalized&&(t=On(t,this.array),n=On(n,this.array),a=On(a,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=a,this}setXYZW(e,t,n,a,s){return e*=this.itemSize,this.normalized&&(t=On(t,this.array),n=On(n,this.array),a=On(a,this.array),s=On(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=a,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==l0&&(e.usage=this.usage),e}}class zN extends Pi{constructor(e,t,n){super(new Int8Array(e),t,n)}}class BN extends Pi{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class FN extends Pi{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class kN extends Pi{constructor(e,t,n){super(new Int16Array(e),t,n)}}class j2 extends Pi{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class VN extends Pi{constructor(e,t,n){super(new Int32Array(e),t,n)}}class W2 extends Pi{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class HN extends Pi{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=Og(this.array[e*this.itemSize]);return this.normalized&&(t=Fr(t,this.array)),t}setX(e,t){return this.normalized&&(t=On(t,this.array)),this.array[e*this.itemSize]=to(t),this}getY(e){let t=Og(this.array[e*this.itemSize+1]);return this.normalized&&(t=Fr(t,this.array)),t}setY(e,t){return this.normalized&&(t=On(t,this.array)),this.array[e*this.itemSize+1]=to(t),this}getZ(e){let t=Og(this.array[e*this.itemSize+2]);return this.normalized&&(t=Fr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=On(t,this.array)),this.array[e*this.itemSize+2]=to(t),this}getW(e){let t=Og(this.array[e*this.itemSize+3]);return this.normalized&&(t=Fr(t,this.array)),t}setW(e,t){return this.normalized&&(t=On(t,this.array)),this.array[e*this.itemSize+3]=to(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=On(t,this.array),n=On(n,this.array)),this.array[e+0]=to(t),this.array[e+1]=to(n),this}setXYZ(e,t,n,a){return e*=this.itemSize,this.normalized&&(t=On(t,this.array),n=On(n,this.array),a=On(a,this.array)),this.array[e+0]=to(t),this.array[e+1]=to(n),this.array[e+2]=to(a),this}setXYZW(e,t,n,a,s){return e*=this.itemSize,this.normalized&&(t=On(t,this.array),n=On(n,this.array),a=On(a,this.array),s=On(s,this.array)),this.array[e+0]=to(t),this.array[e+1]=to(n),this.array[e+2]=to(a),this.array[e+3]=to(s),this}}class Zt extends Pi{constructor(e,t,n){super(new Float32Array(e),t,n)}}let GN=0;const ol=new gn,dS=new li,mp=new pe,Bo=new Ms,vg=new Ms,Ts=new pe;class wn extends Gc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:GN++}),this.uuid=ko(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(jC(e)?W2:j2)(e,1):this.index=e,this}setIndirect(e,t=0){return this.indirect=e,this.indirectOffset=t,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new En().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const a=this.attributes.tangent;return a!==void 0&&(a.transformDirection(e),a.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ol.makeRotationFromQuaternion(e),this.applyMatrix4(ol),this}rotateX(e){return ol.makeRotationX(e),this.applyMatrix4(ol),this}rotateY(e){return ol.makeRotationY(e),this.applyMatrix4(ol),this}rotateZ(e){return ol.makeRotationZ(e),this.applyMatrix4(ol),this}translate(e,t,n){return ol.makeTranslation(e,t,n),this.applyMatrix4(ol),this}scale(e,t,n){return ol.makeScale(e,t,n),this.applyMatrix4(ol),this}lookAt(e){return dS.lookAt(e),dS.updateMatrix(),this.applyMatrix4(dS.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(mp).negate(),this.translate(mp.x,mp.y,mp.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let a=0,s=e.length;a<s;a++){const o=e[a];n.push(o.x,o.y,o.z||0)}this.setAttribute("position",new Zt(n,3))}else{const n=Math.min(e.length,t.count);for(let a=0;a<n;a++){const s=e[a];t.setXYZ(a,s.x,s.y,s.z||0)}e.length>t.count&&It("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ms);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){rn("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new pe(-1/0,-1/0,-1/0),new pe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,a=t.length;n<a;n++){const s=t[n];Bo.setFromBufferAttribute(s),this.morphTargetsRelative?(Ts.addVectors(this.boundingBox.min,Bo.min),this.boundingBox.expandByPoint(Ts),Ts.addVectors(this.boundingBox.max,Bo.max),this.boundingBox.expandByPoint(Ts)):(this.boundingBox.expandByPoint(Bo.min),this.boundingBox.expandByPoint(Bo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&rn('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new As);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){rn("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new pe,1/0);return}if(e){const n=this.boundingSphere.center;if(Bo.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const c=t[s];vg.setFromBufferAttribute(c),this.morphTargetsRelative?(Ts.addVectors(Bo.min,vg.min),Bo.expandByPoint(Ts),Ts.addVectors(Bo.max,vg.max),Bo.expandByPoint(Ts)):(Bo.expandByPoint(vg.min),Bo.expandByPoint(vg.max))}Bo.getCenter(n);let a=0;for(let s=0,o=e.count;s<o;s++)Ts.fromBufferAttribute(e,s),a=Math.max(a,n.distanceToSquared(Ts));if(t)for(let s=0,o=t.length;s<o;s++){const c=t[s],f=this.morphTargetsRelative;for(let d=0,g=c.count;d<g;d++)Ts.fromBufferAttribute(c,d),f&&(mp.fromBufferAttribute(e,d),Ts.add(mp)),a=Math.max(a,n.distanceToSquared(Ts))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&rn('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){rn("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,a=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Pi(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),c=[],f=[];for(let Z=0;Z<n.count;Z++)c[Z]=new pe,f[Z]=new pe;const d=new pe,g=new pe,y=new pe,x=new dt,b=new dt,M=new dt,R=new pe,C=new pe;function E(Z,B,H){d.fromBufferAttribute(n,Z),g.fromBufferAttribute(n,B),y.fromBufferAttribute(n,H),x.fromBufferAttribute(s,Z),b.fromBufferAttribute(s,B),M.fromBufferAttribute(s,H),g.sub(d),y.sub(d),b.sub(x),M.sub(x);const Q=1/(b.x*M.y-M.x*b.y);isFinite(Q)&&(R.copy(g).multiplyScalar(M.y).addScaledVector(y,-b.y).multiplyScalar(Q),C.copy(y).multiplyScalar(b.x).addScaledVector(g,-M.x).multiplyScalar(Q),c[Z].add(R),c[B].add(R),c[H].add(R),f[Z].add(C),f[B].add(C),f[H].add(C))}let N=this.groups;N.length===0&&(N=[{start:0,count:e.count}]);for(let Z=0,B=N.length;Z<B;++Z){const H=N[Z],Q=H.start,J=H.count;for(let oe=Q,re=Q+J;oe<re;oe+=3)E(e.getX(oe+0),e.getX(oe+1),e.getX(oe+2))}const I=new pe,z=new pe,F=new pe,V=new pe;function W(Z){F.fromBufferAttribute(a,Z),V.copy(F);const B=c[Z];I.copy(B),I.sub(F.multiplyScalar(F.dot(B))).normalize(),z.crossVectors(V,B);const Q=z.dot(f[Z])<0?-1:1;o.setXYZW(Z,I.x,I.y,I.z,Q)}for(let Z=0,B=N.length;Z<B;++Z){const H=N[Z],Q=H.start,J=H.count;for(let oe=Q,re=Q+J;oe<re;oe+=3)W(e.getX(oe+0)),W(e.getX(oe+1)),W(e.getX(oe+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Pi(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let x=0,b=n.count;x<b;x++)n.setXYZ(x,0,0,0);const a=new pe,s=new pe,o=new pe,c=new pe,f=new pe,d=new pe,g=new pe,y=new pe;if(e)for(let x=0,b=e.count;x<b;x+=3){const M=e.getX(x+0),R=e.getX(x+1),C=e.getX(x+2);a.fromBufferAttribute(t,M),s.fromBufferAttribute(t,R),o.fromBufferAttribute(t,C),g.subVectors(o,s),y.subVectors(a,s),g.cross(y),c.fromBufferAttribute(n,M),f.fromBufferAttribute(n,R),d.fromBufferAttribute(n,C),c.add(g),f.add(g),d.add(g),n.setXYZ(M,c.x,c.y,c.z),n.setXYZ(R,f.x,f.y,f.z),n.setXYZ(C,d.x,d.y,d.z)}else for(let x=0,b=t.count;x<b;x+=3)a.fromBufferAttribute(t,x+0),s.fromBufferAttribute(t,x+1),o.fromBufferAttribute(t,x+2),g.subVectors(o,s),y.subVectors(a,s),g.cross(y),n.setXYZ(x+0,g.x,g.y,g.z),n.setXYZ(x+1,g.x,g.y,g.z),n.setXYZ(x+2,g.x,g.y,g.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Ts.fromBufferAttribute(e,t),Ts.normalize(),e.setXYZ(t,Ts.x,Ts.y,Ts.z)}toNonIndexed(){function e(c,f){const d=c.array,g=c.itemSize,y=c.normalized,x=new d.constructor(f.length*g);let b=0,M=0;for(let R=0,C=f.length;R<C;R++){c.isInterleavedBufferAttribute?b=f[R]*c.data.stride+c.offset:b=f[R]*g;for(let E=0;E<g;E++)x[M++]=d[b++]}return new Pi(x,g,y)}if(this.index===null)return It("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new wn,n=this.index.array,a=this.attributes;for(const c in a){const f=a[c],d=e(f,n);t.setAttribute(c,d)}const s=this.morphAttributes;for(const c in s){const f=[],d=s[c];for(let g=0,y=d.length;g<y;g++){const x=d[g],b=e(x,n);f.push(b)}t.morphAttributes[c]=f}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let c=0,f=o.length;c<f;c++){const d=o[c];t.addGroup(d.start,d.count,d.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const f=this.parameters;for(const d in f)f[d]!==void 0&&(e[d]=f[d]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const f in n){const d=n[f];e.data.attributes[f]=d.toJSON(e.data)}const a={};let s=!1;for(const f in this.morphAttributes){const d=this.morphAttributes[f],g=[];for(let y=0,x=d.length;y<x;y++){const b=d[y];g.push(b.toJSON(e.data))}g.length>0&&(a[f]=g,s=!0)}s&&(e.data.morphAttributes=a,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const c=this.boundingSphere;return c!==null&&(e.data.boundingSphere=c.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone());const a=e.attributes;for(const d in a){const g=a[d];this.setAttribute(d,g.clone(t))}const s=e.morphAttributes;for(const d in s){const g=[],y=s[d];for(let x=0,b=y.length;x<b;x++)g.push(y[x].clone(t));this.morphAttributes[d]=g}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let d=0,g=o.length;d<g;d++){const y=o[d];this.addGroup(y.start,y.count,y.materialIndex)}const c=e.boundingBox;c!==null&&(this.boundingBox=c.clone());const f=e.boundingSphere;return f!==null&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const DA=new gn,Dh=new md,Kv=new As,LA=new pe,Qv=new pe,Jv=new pe,$v=new pe,pS=new pe,ey=new pe,OA=new pe,ty=new pe;class ma extends li{constructor(e=new wn,t=new Fu){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const a=t[n[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=a.length;s<o;s++){const c=a[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=s}}}}getVertexPosition(e,t){const n=this.geometry,a=n.attributes.position,s=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(a,e);const c=this.morphTargetInfluences;if(s&&c){ey.set(0,0,0);for(let f=0,d=s.length;f<d;f++){const g=c[f],y=s[f];g!==0&&(pS.fromBufferAttribute(y,e),o?ey.addScaledVector(pS,g):ey.addScaledVector(pS.sub(t),g))}t.add(ey)}return t}raycast(e,t){const n=this.geometry,a=this.material,s=this.matrixWorld;a!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),Kv.copy(n.boundingSphere),Kv.applyMatrix4(s),Dh.copy(e.ray).recast(e.near),!(Kv.containsPoint(Dh.origin)===!1&&(Dh.intersectSphere(Kv,LA)===null||Dh.origin.distanceToSquared(LA)>(e.far-e.near)**2))&&(DA.copy(s).invert(),Dh.copy(e.ray).applyMatrix4(DA),!(n.boundingBox!==null&&Dh.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,Dh)))}_computeIntersections(e,t,n){let a;const s=this.geometry,o=this.material,c=s.index,f=s.attributes.position,d=s.attributes.uv,g=s.attributes.uv1,y=s.attributes.normal,x=s.groups,b=s.drawRange;if(c!==null)if(Array.isArray(o))for(let M=0,R=x.length;M<R;M++){const C=x[M],E=o[C.materialIndex],N=Math.max(C.start,b.start),I=Math.min(c.count,Math.min(C.start+C.count,b.start+b.count));for(let z=N,F=I;z<F;z+=3){const V=c.getX(z),W=c.getX(z+1),Z=c.getX(z+2);a=ny(this,E,e,n,d,g,y,V,W,Z),a&&(a.faceIndex=Math.floor(z/3),a.face.materialIndex=C.materialIndex,t.push(a))}}else{const M=Math.max(0,b.start),R=Math.min(c.count,b.start+b.count);for(let C=M,E=R;C<E;C+=3){const N=c.getX(C),I=c.getX(C+1),z=c.getX(C+2);a=ny(this,o,e,n,d,g,y,N,I,z),a&&(a.faceIndex=Math.floor(C/3),t.push(a))}}else if(f!==void 0)if(Array.isArray(o))for(let M=0,R=x.length;M<R;M++){const C=x[M],E=o[C.materialIndex],N=Math.max(C.start,b.start),I=Math.min(f.count,Math.min(C.start+C.count,b.start+b.count));for(let z=N,F=I;z<F;z+=3){const V=z,W=z+1,Z=z+2;a=ny(this,E,e,n,d,g,y,V,W,Z),a&&(a.faceIndex=Math.floor(z/3),a.face.materialIndex=C.materialIndex,t.push(a))}}else{const M=Math.max(0,b.start),R=Math.min(f.count,b.start+b.count);for(let C=M,E=R;C<E;C+=3){const N=C,I=C+1,z=C+2;a=ny(this,o,e,n,d,g,y,N,I,z),a&&(a.faceIndex=Math.floor(C/3),t.push(a))}}}}function jN(i,e,t,n,a,s,o,c){let f;if(e.side===Vr?f=n.intersectTriangle(o,s,a,!0,c):f=n.intersectTriangle(a,s,o,e.side===Iu,c),f===null)return null;ty.copy(c),ty.applyMatrix4(i.matrixWorld);const d=t.ray.origin.distanceTo(ty);return d<t.near||d>t.far?null:{distance:d,point:ty.clone(),object:i}}function ny(i,e,t,n,a,s,o,c,f,d){i.getVertexPosition(c,Qv),i.getVertexPosition(f,Jv),i.getVertexPosition(d,$v);const g=jN(i,e,t,n,Qv,Jv,$v,OA);if(g){const y=new pe;io.getBarycoord(OA,Qv,Jv,$v,y),a&&(g.uv=io.getInterpolatedAttribute(a,c,f,d,y,new dt)),s&&(g.uv1=io.getInterpolatedAttribute(s,c,f,d,y,new dt)),o&&(g.normal=io.getInterpolatedAttribute(o,c,f,d,y,new pe),g.normal.dot(n.direction)>0&&g.normal.multiplyScalar(-1));const x={a:c,b:f,c:d,normal:new pe,materialIndex:0};io.getNormal(Qv,Jv,$v,x.normal),g.face=x,g.barycoord=y}return g}class gd extends wn{constructor(e=1,t=1,n=1,a=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:a,heightSegments:s,depthSegments:o};const c=this;a=Math.floor(a),s=Math.floor(s),o=Math.floor(o);const f=[],d=[],g=[],y=[];let x=0,b=0;M("z","y","x",-1,-1,n,t,e,o,s,0),M("z","y","x",1,-1,n,t,-e,o,s,1),M("x","z","y",1,1,e,n,t,a,o,2),M("x","z","y",1,-1,e,n,-t,a,o,3),M("x","y","z",1,-1,e,t,n,a,s,4),M("x","y","z",-1,-1,e,t,-n,a,s,5),this.setIndex(f),this.setAttribute("position",new Zt(d,3)),this.setAttribute("normal",new Zt(g,3)),this.setAttribute("uv",new Zt(y,2));function M(R,C,E,N,I,z,F,V,W,Z,B){const H=z/W,Q=F/Z,J=z/2,oe=F/2,re=V/2,ve=W+1,q=Z+1;let K=0,te=0;const de=new pe;for(let ce=0;ce<q;ce++){const G=ce*Q-oe;for(let ne=0;ne<ve;ne++){const fe=ne*H-J;de[R]=fe*N,de[C]=G*I,de[E]=re,d.push(de.x,de.y,de.z),de[R]=0,de[C]=0,de[E]=V>0?1:-1,g.push(de.x,de.y,de.z),y.push(ne/W),y.push(1-ce/Z),K+=1}}for(let ce=0;ce<Z;ce++)for(let G=0;G<W;G++){const ne=x+G+ve*ce,fe=x+G+ve*(ce+1),me=x+(G+1)+ve*(ce+1),xe=x+(G+1)+ve*ce;f.push(ne,fe,xe),f.push(fe,me,xe),te+=6}c.addGroup(b,te,B),b+=te,x+=K}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gd(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Kp(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const a=i[t][n];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?a.isRenderTargetTexture?(It("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=a.clone():Array.isArray(a)?e[t][n]=a.slice():e[t][n]=a}}return e}function Ir(i){const e={};for(let t=0;t<i.length;t++){const n=Kp(i[t]);for(const a in n)e[a]=n[a]}return e}function WN(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function ZC(i){const e=i.getRenderTarget();return e===null?i.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Xn.workingColorSpace}const q2={clone:Kp,merge:Ir};var qN=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,XN=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class pl extends lr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=qN,this.fragmentShader=XN,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Kp(e.uniforms),this.uniformsGroups=WN(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this.defaultAttributeValues=Object.assign({},e.defaultAttributeValues),this.index0AttributeName=e.index0AttributeName,this.uniformsNeedUpdate=e.uniformsNeedUpdate,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const a in this.uniforms){const o=this.uniforms[a].value;o&&o.isTexture?t.uniforms[a]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[a]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[a]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[a]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[a]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[a]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[a]={type:"m4",value:o.toArray()}:t.uniforms[a]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const a in this.extensions)this.extensions[a]===!0&&(n[a]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class A1 extends li{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new gn,this.projectionMatrix=new gn,this.projectionMatrixInverse=new gn,this.coordinateSystem=Fo,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Lf=new pe,NA=new dt,UA=new dt;let fa=class extends A1{constructor(e=50,t=1,n=.1,a=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=a,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Yp*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(nd*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Yp*2*Math.atan(Math.tan(nd*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Lf.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Lf.x,Lf.y).multiplyScalar(-e/Lf.z),Lf.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Lf.x,Lf.y).multiplyScalar(-e/Lf.z)}getViewSize(e,t){return this.getViewBounds(e,NA,UA),t.subVectors(UA,NA)}setViewOffset(e,t,n,a,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=a,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(nd*.5*this.fov)/this.zoom,n=2*t,a=this.aspect*n,s=-.5*a;const o=this.view;if(this.view!==null&&this.view.enabled){const f=o.fullWidth,d=o.fullHeight;s+=o.offsetX*a/f,t-=o.offsetY*n/d,a*=o.width/f,n*=o.height/d}const c=this.filmOffset;c!==0&&(s+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+a,t,t-n,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const gp=-90,vp=1;class KC extends li{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const a=new fa(gp,vp,e,t);a.layers=this.layers,this.add(a);const s=new fa(gp,vp,e,t);s.layers=this.layers,this.add(s);const o=new fa(gp,vp,e,t);o.layers=this.layers,this.add(o);const c=new fa(gp,vp,e,t);c.layers=this.layers,this.add(c);const f=new fa(gp,vp,e,t);f.layers=this.layers,this.add(f);const d=new fa(gp,vp,e,t);d.layers=this.layers,this.add(d)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,a,s,o,c,f]=t;for(const d of t)this.remove(d);if(e===Fo)n.up.set(0,1,0),n.lookAt(1,0,0),a.up.set(0,1,0),a.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),c.up.set(0,1,0),c.lookAt(0,0,1),f.up.set(0,1,0),f.lookAt(0,0,-1);else if(e===qp)n.up.set(0,-1,0),n.lookAt(-1,0,0),a.up.set(0,-1,0),a.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),c.up.set(0,-1,0),c.lookAt(0,0,1),f.up.set(0,-1,0),f.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const d of t)this.add(d),d.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:a}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,c,f,d,g]=this.children,y=e.getRenderTarget(),x=e.getActiveCubeFace(),b=e.getActiveMipmapLevel(),M=e.xr.enabled;e.xr.enabled=!1;const R=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,a),e.render(t,s),e.setRenderTarget(n,1,a),e.render(t,o),e.setRenderTarget(n,2,a),e.render(t,c),e.setRenderTarget(n,3,a),e.render(t,f),e.setRenderTarget(n,4,a),e.render(t,d),n.texture.generateMipmaps=R,e.setRenderTarget(n,5,a),e.render(t,g),e.setRenderTarget(y,x,b),e.xr.enabled=M,n.texture.needsPMREMUpdate=!0}}class R0 extends pa{constructor(e=[],t=Vc,n,a,s,o,c,f,d,g){super(e,t,n,a,s,o,c,f,d,g),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class X2 extends ro{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},a=[n,n,n,n,n,n];this.texture=new R0(a),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},a=new gd(5,5,5),s=new pl({name:"CubemapFromEquirect",uniforms:Kp(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Vr,blending:Bc});s.uniforms.tEquirect.value=t;const o=new ma(a,s),c=t.minFilter;return t.minFilter===Ic&&(t.minFilter=Di),new KC(1,10,this).update(e,o),t.minFilter=c,o.geometry.dispose(),o.material.dispose(),this}clear(e,t=!0,n=!0,a=!0){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,a);e.setRenderTarget(s)}}class Up extends li{constructor(){super(),this.isGroup=!0,this.type="Group"}}const YN={type:"move"};class Zy{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Up,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Up,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new pe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new pe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Up,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new pe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new pe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let a=null,s=null,o=null;const c=this._targetRay,f=this._grip,d=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(d&&e.hand){o=!0;for(const R of e.hand.values()){const C=t.getJointPose(R,n),E=this._getHandJoint(d,R);C!==null&&(E.matrix.fromArray(C.transform.matrix),E.matrix.decompose(E.position,E.rotation,E.scale),E.matrixWorldNeedsUpdate=!0,E.jointRadius=C.radius),E.visible=C!==null}const g=d.joints["index-finger-tip"],y=d.joints["thumb-tip"],x=g.position.distanceTo(y.position),b=.02,M=.005;d.inputState.pinching&&x>b+M?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!d.inputState.pinching&&x<=b-M&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else f!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(f.matrix.fromArray(s.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),f.matrixWorldNeedsUpdate=!0,s.linearVelocity?(f.hasLinearVelocity=!0,f.linearVelocity.copy(s.linearVelocity)):f.hasLinearVelocity=!1,s.angularVelocity?(f.hasAngularVelocity=!0,f.angularVelocity.copy(s.angularVelocity)):f.hasAngularVelocity=!1));c!==null&&(a=t.getPose(e.targetRaySpace,n),a===null&&s!==null&&(a=s),a!==null&&(c.matrix.fromArray(a.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,a.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(a.linearVelocity)):c.hasLinearVelocity=!1,a.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(a.angularVelocity)):c.hasAngularVelocity=!1,this.dispatchEvent(YN)))}return c!==null&&(c.visible=a!==null),f!==null&&(f.visible=s!==null),d!==null&&(d.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new Up;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class E1{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ht(e),this.density=t}clone(){return new E1(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class w1{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new Ht(e),this.near=t,this.far=n}clone(){return new w1(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Y2 extends li{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Vo,this.environmentIntensity=1,this.environmentRotation=new Vo,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class C1{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=l0,this.updateRanges=[],this.version=0,this.uuid=ko()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let a=0,s=this.stride;a<s;a++)this.array[e+a]=t.array[n+a];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ko()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ko()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ur=new pe;class cd{constructor(e,t,n,a=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=a}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Ur.fromBufferAttribute(this,t),Ur.applyMatrix4(e),this.setXYZ(t,Ur.x,Ur.y,Ur.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Ur.fromBufferAttribute(this,t),Ur.applyNormalMatrix(e),this.setXYZ(t,Ur.x,Ur.y,Ur.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Ur.fromBufferAttribute(this,t),Ur.transformDirection(e),this.setXYZ(t,Ur.x,Ur.y,Ur.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=Fr(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=On(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=On(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=On(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=On(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=On(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Fr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Fr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Fr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Fr(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=On(t,this.array),n=On(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=On(t,this.array),n=On(n,this.array),a=On(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=a,this}setXYZW(e,t,n,a,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=On(t,this.array),n=On(n,this.array),a=On(a,this.array),s=On(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=a,this.data.array[e+3]=s,this}clone(e){if(e===void 0){u0("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const a=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[a+s])}return new Pi(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new cd(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){u0("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const a=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[a+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Z2 extends lr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ht(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let yp;const yg=new pe,_p=new pe,xp=new pe,Sp=new dt,_g=new dt,QC=new gn,iy=new pe,xg=new pe,ay=new pe,IA=new dt,mS=new dt,PA=new dt;class JC extends li{constructor(e=new Z2){if(super(),this.isSprite=!0,this.type="Sprite",yp===void 0){yp=new wn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new C1(t,5);yp.setIndex([0,1,2,0,2,3]),yp.setAttribute("position",new cd(n,3,0,!1)),yp.setAttribute("uv",new cd(n,2,3,!1))}this.geometry=yp,this.material=e,this.center=new dt(.5,.5),this.count=1}raycast(e,t){e.camera===null&&rn('Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_p.setFromMatrixScale(this.matrixWorld),QC.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),xp.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_p.multiplyScalar(-xp.z);const n=this.material.rotation;let a,s;n!==0&&(s=Math.cos(n),a=Math.sin(n));const o=this.center;sy(iy.set(-.5,-.5,0),xp,o,_p,a,s),sy(xg.set(.5,-.5,0),xp,o,_p,a,s),sy(ay.set(.5,.5,0),xp,o,_p,a,s),IA.set(0,0),mS.set(1,0),PA.set(1,1);let c=e.ray.intersectTriangle(iy,xg,ay,!1,yg);if(c===null&&(sy(xg.set(-.5,.5,0),xp,o,_p,a,s),mS.set(0,1),c=e.ray.intersectTriangle(iy,ay,xg,!1,yg),c===null))return;const f=e.ray.origin.distanceTo(yg);f<e.near||f>e.far||t.push({distance:f,point:yg.clone(),uv:io.getInterpolation(yg,iy,xg,ay,IA,mS,PA,new dt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function sy(i,e,t,n,a,s){Sp.subVectors(i,t).addScalar(.5).multiply(n),a!==void 0?(_g.x=s*Sp.x-a*Sp.y,_g.y=a*Sp.x+s*Sp.y):_g.copy(Sp),i.copy(e),i.x+=_g.x,i.y+=_g.y,i.applyMatrix4(QC)}const ry=new pe,zA=new pe;class $C extends li{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,a=t.length;n<a;n++){const s=t[n];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const a=this.levels;let s;for(s=0;s<a.length&&!(t<a[s].distance);s++);return a.splice(s,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const a=t.splice(n,1);return this.remove(a[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,a;for(n=1,a=t.length;n<a;n++){let s=t[n].distance;if(t[n].object.visible&&(s-=s*t[n].hysteresis),e<s)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){ry.setFromMatrixPosition(this.matrixWorld);const a=e.ray.origin.distanceTo(ry);this.getObjectForDistance(a).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){ry.setFromMatrixPosition(e.matrixWorld),zA.setFromMatrixPosition(this.matrixWorld);const n=ry.distanceTo(zA)/e.zoom;t[0].object.visible=!0;let a,s;for(a=1,s=t.length;a<s;a++){let o=t[a].distance;if(t[a].object.visible&&(o-=o*t[a].hysteresis),n>=o)t[a-1].object.visible=!1,t[a].object.visible=!0;else break}for(this._currentLevel=a-1;a<s;a++)t[a].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let a=0,s=n.length;a<s;a++){const o=n[a];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const BA=new pe,FA=new Ri,kA=new Ri,ZN=new pe,VA=new gn,oy=new pe,gS=new As,HA=new gn,vS=new md;class eR extends ma{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Rb,this.bindMatrix=new gn,this.bindMatrixInverse=new gn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ms),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,oy),this.boundingBox.expandByPoint(oy)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new As),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,oy),this.boundingSphere.expandByPoint(oy)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,a=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),gS.copy(this.boundingSphere),gS.applyMatrix4(a),e.ray.intersectsSphere(gS)!==!1&&(HA.copy(a).invert(),vS.copy(e.ray).applyMatrix4(HA),!(this.boundingBox!==null&&vS.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,vS)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Ri,t=this.geometry.attributes.skinWeight;for(let n=0,a=t.count;n<a;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Rb?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===LC?this.bindMatrixInverse.copy(this.bindMatrix).invert():It("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,a=this.geometry;FA.fromBufferAttribute(a.attributes.skinIndex,e),kA.fromBufferAttribute(a.attributes.skinWeight,e),BA.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=kA.getComponent(s);if(o!==0){const c=FA.getComponent(s);VA.multiplyMatrices(n.bones[c].matrixWorld,n.boneInverses[c]),t.addScaledVector(ZN.copy(BA).applyMatrix4(VA),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class K2 extends li{constructor(){super(),this.isBone=!0,this.type="Bone"}}class $l extends pa{constructor(e=null,t=1,n=1,a,s,o,c,f,d=Ba,g=Ba,y,x){super(null,o,c,f,d,g,a,s,y,x),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const GA=new gn,KN=new gn;class R1{constructor(e=[],t=[]){this.uuid=ko(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.previousBoneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){It("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,a=this.bones.length;n<a;n++)this.boneInverses.push(new gn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new gn;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,a=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const c=e[s]?e[s].matrixWorld:KN;GA.multiplyMatrices(c,t[s]),GA.toArray(n,s*16)}a!==null&&(a.needsUpdate=!0)}clone(){return new R1(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new $l(t,e,e,sr,ar);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const a=this.bones[t];if(a.name===e)return a}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,a=e.bones.length;n<a;n++){const s=e.bones[n];let o=t[s];o===void 0&&(It("Skeleton: No bone found with UUID:",s),o=new K2),this.bones.push(o),this.boneInverses.push(new gn().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let a=0,s=t.length;a<s;a++){const o=t[a];e.bones.push(o.uuid);const c=n[a];e.boneInverses.push(c.toArray())}return e}}class ud extends Pi{constructor(e,t,n,a=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=a}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const bp=new gn,jA=new gn,ly=[],WA=new Ms,QN=new gn,Sg=new ma,bg=new As;class tR extends ma{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new ud(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let a=0;a<n;a++)this.setMatrixAt(a,QN)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Ms),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,bp),WA.copy(e.boundingBox).applyMatrix4(bp),this.boundingBox.union(WA)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new As),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,bp),bg.copy(e.boundingSphere).applyMatrix4(bp),this.boundingSphere.union(bg)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,a=this.morphTexture.source.data.data,s=n.length+1,o=e*s+1;for(let c=0;c<n.length;c++)n[c]=a[o+c]}raycast(e,t){const n=this.matrixWorld,a=this.count;if(Sg.geometry=this.geometry,Sg.material=this.material,Sg.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),bg.copy(this.boundingSphere),bg.applyMatrix4(n),e.ray.intersectsSphere(bg)!==!1))for(let s=0;s<a;s++){this.getMatrixAt(s,bp),jA.multiplyMatrices(n,bp),Sg.matrixWorld=jA,Sg.raycast(e,ly);for(let o=0,c=ly.length;o<c;o++){const f=ly[o];f.instanceId=s,f.object=this,t.push(f)}ly.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new ud(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,a=n.length+1;this.morphTexture===null&&(this.morphTexture=new $l(new Float32Array(a*this.count),a,this.count,v1,ar));const s=this.morphTexture.source.data.data;let o=0;for(let d=0;d<n.length;d++)o+=n[d];const c=this.geometry.morphTargetsRelative?1:1-o,f=a*e;s[f]=c,s.set(n,f+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const yS=new pe,JN=new pe,$N=new En;let Ru=class{constructor(e=new pe(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,a){return this.normal.set(e,t,n),this.constant=a,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const a=yS.subVectors(n,t).cross(JN.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(a,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(yS),a=this.normal.dot(n);if(a===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/a;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||$N.getNormalMatrix(e),a=this.coplanarPoint(yS).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-a.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const Lh=new As,eU=new dt(.5,.5),cy=new pe;class sm{constructor(e=new Ru,t=new Ru,n=new Ru,a=new Ru,s=new Ru,o=new Ru){this.planes=[e,t,n,a,s,o]}set(e,t,n,a,s,o){const c=this.planes;return c[0].copy(e),c[1].copy(t),c[2].copy(n),c[3].copy(a),c[4].copy(s),c[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=Fo,n=!1){const a=this.planes,s=e.elements,o=s[0],c=s[1],f=s[2],d=s[3],g=s[4],y=s[5],x=s[6],b=s[7],M=s[8],R=s[9],C=s[10],E=s[11],N=s[12],I=s[13],z=s[14],F=s[15];if(a[0].setComponents(d-o,b-g,E-M,F-N).normalize(),a[1].setComponents(d+o,b+g,E+M,F+N).normalize(),a[2].setComponents(d+c,b+y,E+R,F+I).normalize(),a[3].setComponents(d-c,b-y,E-R,F-I).normalize(),n)a[4].setComponents(f,x,C,z).normalize(),a[5].setComponents(d-f,b-x,E-C,F-z).normalize();else if(a[4].setComponents(d-f,b-x,E-C,F-z).normalize(),t===Fo)a[5].setComponents(d+f,b+x,E+C,F+z).normalize();else if(t===qp)a[5].setComponents(f,x,C,z).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Lh.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Lh.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Lh)}intersectsSprite(e){Lh.center.set(0,0,0);const t=eU.distanceTo(e.center);return Lh.radius=.7071067811865476+t,Lh.applyMatrix4(e.matrixWorld),this.intersectsSphere(Lh)}intersectsSphere(e){const t=this.planes,n=e.center,a=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<a)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const a=t[n];if(cy.x=a.normal.x>0?e.max.x:e.min.x,cy.y=a.normal.y>0?e.max.y:e.min.y,cy.z=a.normal.z>0?e.max.z:e.min.z,a.distanceToPoint(cy)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Lc=new gn,Oc=new sm;class D1{constructor(){this.coordinateSystem=Fo}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const a=t.cameras[n];if(Lc.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Oc.setFromProjectionMatrix(Lc,a.coordinateSystem,a.reversedDepth),Oc.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const a=t.cameras[n];if(Lc.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Oc.setFromProjectionMatrix(Lc,a.coordinateSystem,a.reversedDepth),Oc.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const a=t.cameras[n];if(Lc.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Oc.setFromProjectionMatrix(Lc,a.coordinateSystem,a.reversedDepth),Oc.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const a=t.cameras[n];if(Lc.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Oc.setFromProjectionMatrix(Lc,a.coordinateSystem,a.reversedDepth),Oc.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const a=t.cameras[n];if(Lc.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Oc.setFromProjectionMatrix(Lc,a.coordinateSystem,a.reversedDepth),Oc.containsPoint(e))return!0}return!1}clone(){return new D1}}function _S(i,e){return i-e}function tU(i,e){return i.z-e.z}function nU(i,e){return e.z-i.z}class iU{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,a){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const c=s[this.index];o.push(c),this.index++,c.start=e,c.count=t,c.z=n,c.index=a}reset(){this.list.length=0,this.index=0}}const eo=new gn,aU=new Ht(1,1,1),qA=new sm,sU=new D1,uy=new Ms,Oh=new As,Tg=new pe,XA=new pe,rU=new pe,xS=new iU,nr=new ma,fy=[];function oU(i,e,t=0){const n=e.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==e.array.constructor){const a=i.count;for(let s=0;s<a;s++)for(let o=0;o<n;o++)e.setComponent(s+t,o,i.getComponent(s,o))}else e.array.set(i.array,t*n);e.needsUpdate=!0}function Nh(i,e){if(i.constructor!==e.constructor){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)e[n]=i[n]}else{const t=Math.min(i.length,e.length);e.set(new i.constructor(i.buffer,0,t))}}class nR extends ma{constructor(e,t,n=t*2,a){super(new wn,a),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new $l(t,e,e,sr,ar);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new $l(t,e,e,C0,dl);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new $l(t,e,e,sr,ar);n.colorSpace=Xn.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,a=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:c,itemSize:f,normalized:d}=o,g=new c.constructor(n*f),y=new Pi(g,f,d);t.setAttribute(s,y)}if(e.getIndex()!==null){const s=n>65535?new Uint32Array(a):new Uint16Array(a);t.setIndex(new Pi(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const a=e.getAttribute(n),s=t.getAttribute(n);if(a.itemSize!==s.itemSize||a.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ms);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,a=t.length;n<a;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,eo),this.getBoundingBoxAt(s,uy).applyMatrix4(eo),e.union(uy)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new As);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,a=t.length;n<a;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,eo),this.getBoundingSphereAt(s,Oh).applyMatrix4(eo),e.union(Oh)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let a=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(_S),a=this._availableInstanceIds.shift(),this._instanceInfo[a]=n):(a=this._instanceInfo.length,this._instanceInfo.push(n));const s=this._matricesTexture;eo.identity().toArray(s.image.data,a*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&(aU.toArray(o.image.data,a*4),o.needsUpdate=!0),this._visibilityChanged=!0,a}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const a={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;a.vertexStart=this._nextVertexStart,a.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(a.indexStart=this._nextIndexStart,a.reservedIndexCount=n===-1?o.count:n),a.indexStart!==-1&&a.indexStart+a.reservedIndexCount>this._maxIndexCount||a.vertexStart+a.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let f;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(_S),f=this._availableGeometryIds.shift(),s[f]=a):(f=this._geometryCount,this._geometryCount++,s.push(a)),this.setGeometryAt(f,e),this._nextIndexStart=a.indexStart+a.reservedIndexCount,this._nextVertexStart=a.vertexStart+a.reservedVertexCount,f}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,a=n.getIndex()!==null,s=n.getIndex(),o=t.getIndex(),c=this._geometryInfo[e];if(a&&o.count>c.reservedIndexCount||t.attributes.position.count>c.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const f=c.vertexStart,d=c.reservedVertexCount;c.vertexCount=t.getAttribute("position").count;for(const g in n.attributes){const y=t.getAttribute(g),x=n.getAttribute(g);oU(y,x,f);const b=y.itemSize;for(let M=y.count,R=d;M<R;M++){const C=f+M;for(let E=0;E<b;E++)x.setComponent(C,E,0)}x.needsUpdate=!0,x.addUpdateRange(f*b,d*b)}if(a){const g=c.indexStart,y=c.reservedIndexCount;c.indexCount=t.getIndex().count;for(let x=0;x<o.count;x++)s.setX(g+x,f+o.getX(x));for(let x=o.count,b=y;x<b;x++)s.setX(g+x,f);s.needsUpdate=!0,s.addUpdateRange(g,c.reservedIndexCount)}return c.start=a?c.indexStart:c.vertexStart,c.count=a?c.indexCount:c.vertexCount,c.boundingBox=null,t.boundingBox!==null&&(c.boundingBox=t.boundingBox.clone()),c.boundingSphere=null,t.boundingSphere!==null&&(c.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const n=this._instanceInfo;for(let a=0,s=n.length;a<s;a++)n[a].active&&n[a].geometryIndex===e&&this.deleteInstance(a);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,a=n.map((o,c)=>c).sort((o,c)=>n[o].vertexStart-n[c].vertexStart),s=this.geometry;for(let o=0,c=n.length;o<c;o++){const f=a[o],d=n[f];if(d.active!==!1){if(s.index!==null){if(d.indexStart!==t){const{indexStart:g,vertexStart:y,reservedIndexCount:x}=d,b=s.index,M=b.array,R=e-y;for(let C=g;C<g+x;C++)M[C]=M[C]+R;b.array.copyWithin(t,g,g+x),b.addUpdateRange(t,x),b.needsUpdate=!0,d.indexStart=t}t+=d.reservedIndexCount}if(d.vertexStart!==e){const{vertexStart:g,reservedVertexCount:y}=d,x=s.attributes;for(const b in x){const M=x[b],{array:R,itemSize:C}=M;R.copyWithin(e*C,g*C,(g+y)*C),M.addUpdateRange(e*C,y*C),M.needsUpdate=!0}d.vertexStart=e}e+=d.reservedVertexCount,d.start=s.index?d.indexStart:d.vertexStart,this._nextIndexStart=s.index?d.indexStart+d.reservedIndexCount:0,this._nextVertexStart=d.vertexStart+d.reservedVertexCount}}return this._visibilityChanged=!0,this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,a=this._geometryInfo[e];if(a.boundingBox===null){const s=new Ms,o=n.index,c=n.attributes.position;for(let f=a.start,d=a.start+a.count;f<d;f++){let g=f;o&&(g=o.getX(g)),s.expandByPoint(Tg.fromBufferAttribute(c,g))}a.boundingBox=s}return t.copy(a.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,a=this._geometryInfo[e];if(a.boundingSphere===null){const s=new As;this.getBoundingBoxAt(e,uy),uy.getCenter(s.center);const o=n.index,c=n.attributes.position;let f=0;for(let d=a.start,g=a.start+a.count;d<g;d++){let y=d;o&&(y=o.getX(y)),Tg.fromBufferAttribute(c,y),f=Math.max(f,s.center.distanceToSquared(Tg))}s.radius=Math.sqrt(f),a.boundingSphere=s}return t.copy(a.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,a=this._matricesTexture.image.data;return t.toArray(a,e*16),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(_S);t[t.length-1]===n.length-1;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const a=new Int32Array(e),s=new Int32Array(e);Nh(this._multiDrawCounts,a),Nh(this._multiDrawStarts,s),this._multiDrawCounts=a,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,c=this._matricesTexture,f=this._colorsTexture;o.dispose(),this._initIndirectTexture(),Nh(o.image.data,this._indirectTexture.image.data),c.dispose(),this._initMatricesTexture(),Nh(c.image.data,this._matricesTexture.image.data),f&&(f.dispose(),this._initColorsTexture(),Nh(f.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(c=>c.active);if(Math.max(...n.map(c=>c.vertexStart+c.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(f=>f.indexStart+f.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new wn,this._initializeGeometry(s));const o=this.geometry;s.index&&Nh(s.index.array,o.index.array);for(const c in s.attributes)Nh(s.attributes[c].array,o.attributes[c].array)}raycast(e,t){const n=this._instanceInfo,a=this._geometryInfo,s=this.matrixWorld,o=this.geometry;nr.material=this.material,nr.geometry.index=o.index,nr.geometry.attributes=o.attributes,nr.geometry.boundingBox===null&&(nr.geometry.boundingBox=new Ms),nr.geometry.boundingSphere===null&&(nr.geometry.boundingSphere=new As);for(let c=0,f=n.length;c<f;c++){if(!n[c].visible||!n[c].active)continue;const d=n[c].geometryIndex,g=a[d];nr.geometry.setDrawRange(g.start,g.count),this.getMatrixAt(c,nr.matrixWorld).premultiply(s),this.getBoundingBoxAt(d,nr.geometry.boundingBox),this.getBoundingSphereAt(d,nr.geometry.boundingSphere),nr.raycast(e,fy);for(let y=0,x=fy.length;y<x;y++){const b=fy[y];b.object=this,b.batchId=c,t.push(b)}fy.length=0}nr.material=null,nr.geometry.index=null,nr.geometry.attributes={},nr.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,n,a,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=a.getIndex(),c=o===null?1:o.array.BYTES_PER_ELEMENT,f=this._instanceInfo,d=this._multiDrawStarts,g=this._multiDrawCounts,y=this._geometryInfo,x=this.perObjectFrustumCulled,b=this._indirectTexture,M=b.image.data,R=n.isArrayCamera?sU:qA;x&&!n.isArrayCamera&&(eo.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),qA.setFromProjectionMatrix(eo,n.coordinateSystem,n.reversedDepth));let C=0;if(this.sortObjects){eo.copy(this.matrixWorld).invert(),Tg.setFromMatrixPosition(n.matrixWorld).applyMatrix4(eo),XA.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(eo);for(let I=0,z=f.length;I<z;I++)if(f[I].visible&&f[I].active){const F=f[I].geometryIndex;this.getMatrixAt(I,eo),this.getBoundingSphereAt(F,Oh).applyMatrix4(eo);let V=!1;if(x&&(V=!R.intersectsSphere(Oh,n)),!V){const W=y[F],Z=rU.subVectors(Oh.center,Tg).dot(XA);xS.push(W.start,W.count,Z,I)}}const E=xS.list,N=this.customSort;N===null?E.sort(s.transparent?nU:tU):N.call(this,E,n);for(let I=0,z=E.length;I<z;I++){const F=E[I];d[C]=F.start*c,g[C]=F.count,M[C]=F.index,C++}xS.reset()}else for(let E=0,N=f.length;E<N;E++)if(f[E].visible&&f[E].active){const I=f[E].geometryIndex;let z=!1;if(x&&(this.getMatrixAt(E,eo),this.getBoundingSphereAt(I,Oh).applyMatrix4(eo),z=!R.intersectsSphere(Oh,n)),!z){const F=y[I];d[C]=F.start*c,g[C]=F.count,M[C]=E,C++}}b.needsUpdate=!0,this._multiDrawCount=C,this._visibilityChanged=!1}onBeforeShadow(e,t,n,a,s,o){this.onBeforeRender(e,null,a,s,o)}}class Hr extends lr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ht(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const q_=new pe,X_=new pe,YA=new gn,Mg=new md,hy=new As,SS=new pe,ZA=new pe;class Gf extends li{constructor(e=new wn,t=new Hr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let a=1,s=t.count;a<s;a++)q_.fromBufferAttribute(t,a-1),X_.fromBufferAttribute(t,a),n[a]=n[a-1],n[a]+=q_.distanceTo(X_);e.setAttribute("lineDistance",new Zt(n,1))}else It("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,a=this.matrixWorld,s=e.params.Line.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),hy.copy(n.boundingSphere),hy.applyMatrix4(a),hy.radius+=s,e.ray.intersectsSphere(hy)===!1)return;YA.copy(a).invert(),Mg.copy(e.ray).applyMatrix4(YA);const c=s/((this.scale.x+this.scale.y+this.scale.z)/3),f=c*c,d=this.isLineSegments?2:1,g=n.index,x=n.attributes.position;if(g!==null){const b=Math.max(0,o.start),M=Math.min(g.count,o.start+o.count);for(let R=b,C=M-1;R<C;R+=d){const E=g.getX(R),N=g.getX(R+1),I=dy(this,e,Mg,f,E,N,R);I&&t.push(I)}if(this.isLineLoop){const R=g.getX(M-1),C=g.getX(b),E=dy(this,e,Mg,f,R,C,M-1);E&&t.push(E)}}else{const b=Math.max(0,o.start),M=Math.min(x.count,o.start+o.count);for(let R=b,C=M-1;R<C;R+=d){const E=dy(this,e,Mg,f,R,R+1,R);E&&t.push(E)}if(this.isLineLoop){const R=dy(this,e,Mg,f,M-1,b,M-1);R&&t.push(R)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const a=t[n[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=a.length;s<o;s++){const c=a[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=s}}}}}function dy(i,e,t,n,a,s,o){const c=i.geometry.attributes.position;if(q_.fromBufferAttribute(c,a),X_.fromBufferAttribute(c,s),t.distanceSqToSegment(q_,X_,SS,ZA)>n)return;SS.applyMatrix4(i.matrixWorld);const d=e.ray.origin.distanceTo(SS);if(!(d<e.near||d>e.far))return{distance:d,point:ZA.clone().applyMatrix4(i.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:i}}const KA=new pe,QA=new pe;class jc extends Gf{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let a=0,s=t.count;a<s;a+=2)KA.fromBufferAttribute(t,a),QA.fromBufferAttribute(t,a+1),n[a]=a===0?0:n[a-1],n[a+1]=n[a]+KA.distanceTo(QA);e.setAttribute("lineDistance",new Zt(n,1))}else It("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class iR extends Gf{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Q2 extends lr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ht(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const JA=new gn,Ob=new md,py=new As,my=new pe;class aR extends li{constructor(e=new wn,t=new Q2){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,a=this.matrixWorld,s=e.params.Points.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),py.copy(n.boundingSphere),py.applyMatrix4(a),py.radius+=s,e.ray.intersectsSphere(py)===!1)return;JA.copy(a).invert(),Ob.copy(e.ray).applyMatrix4(JA);const c=s/((this.scale.x+this.scale.y+this.scale.z)/3),f=c*c,d=n.index,y=n.attributes.position;if(d!==null){const x=Math.max(0,o.start),b=Math.min(d.count,o.start+o.count);for(let M=x,R=b;M<R;M++){const C=d.getX(M);my.fromBufferAttribute(y,C),$A(my,C,f,a,e,t,this)}}else{const x=Math.max(0,o.start),b=Math.min(y.count,o.start+o.count);for(let M=x,R=b;M<R;M++)my.fromBufferAttribute(y,M),$A(my,M,f,a,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const a=t[n[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=a.length;s<o;s++){const c=a[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=s}}}}}function $A(i,e,t,n,a,s,o){const c=Ob.distanceSqToPoint(i);if(c<t){const f=new pe;Ob.closestPointToPoint(i,f),f.applyMatrix4(n);const d=a.ray.origin.distanceTo(f);if(d<a.near||d>a.far)return;s.push({distance:d,distanceToRay:Math.sqrt(c),point:f,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class sR extends pa{constructor(e,t,n,a,s=Di,o=Di,c,f,d){super(e,t,n,a,s,o,c,f,d),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const g=this;function y(){g.needsUpdate=!0,g._requestVideoFrameCallbackId=e.requestVideoFrameCallback(y)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(y))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&(this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),this._requestVideoFrameCallbackId=0),super.dispose()}}class lU extends sR{constructor(e,t,n,a,s,o,c,f){super({},e,t,n,a,s,o,c,f),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class cU extends pa{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Ba,this.minFilter=Ba,this.generateMipmaps=!1,this.needsUpdate=!0}}class L1 extends pa{constructor(e,t,n,a,s,o,c,f,d,g,y,x){super(null,o,c,f,d,g,a,s,y,x),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class uU extends L1{constructor(e,t,n,a,s,o){super(e,t,n,s,o),this.isCompressedArrayTexture=!0,this.image.depth=a,this.wrapR=ao,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class fU extends L1{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,Vc),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class hU extends pa{constructor(e,t,n,a,s,o,c,f,d){super(e,t,n,a,s,o,c,f,d),this.isCanvasTexture=!0,this.needsUpdate=!0}}class fd extends pa{constructor(e,t,n=dl,a,s,o,c=Ba,f=Ba,d,g=Hc,y=1){if(g!==Hc&&g!==zf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const x={width:e,height:t,depth:y};super(x,a,s,o,c,f,g,n,d),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Bf(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class rR extends fd{constructor(e,t=dl,n=Vc,a,s,o=Ba,c=Ba,f,d=Hc){const g={width:e,height:e,depth:1},y=[g,g,g,g,g,g];super(e,e,t,n,a,s,o,c,f,d),this.image=y,this.isCubeDepthTexture=!0,this.isCubeTexture=!0}get images(){return this.image}set images(e){this.image=e}}class J2 extends pa{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class O1 extends wn{constructor(e=1,t=1,n=4,a=8,s=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:a,heightSegments:s},t=Math.max(0,t),n=Math.max(1,Math.floor(n)),a=Math.max(3,Math.floor(a)),s=Math.max(1,Math.floor(s));const o=[],c=[],f=[],d=[],g=t/2,y=Math.PI/2*e,x=t,b=2*y+x,M=n*2+s,R=a+1,C=new pe,E=new pe;for(let N=0;N<=M;N++){let I=0,z=0,F=0,V=0;if(N<=n){const B=N/n,H=B*Math.PI/2;z=-g-e*Math.cos(H),F=e*Math.sin(H),V=-e*Math.cos(H),I=B*y}else if(N<=n+s){const B=(N-n)/s;z=-g+B*t,F=e,V=0,I=y+B*x}else{const B=(N-n-s)/n,H=B*Math.PI/2;z=g+e*Math.sin(H),F=e*Math.cos(H),V=e*Math.sin(H),I=y+x+B*y}const W=Math.max(0,Math.min(1,I/b));let Z=0;N===0?Z=.5/a:N===M&&(Z=-.5/a);for(let B=0;B<=a;B++){const H=B/a,Q=H*Math.PI*2,J=Math.sin(Q),oe=Math.cos(Q);E.x=-F*oe,E.y=z,E.z=F*J,c.push(E.x,E.y,E.z),C.set(-F*oe,V,F*J),C.normalize(),f.push(C.x,C.y,C.z),d.push(H+Z,W)}if(N>0){const B=(N-1)*R;for(let H=0;H<a;H++){const Q=B+H,J=B+H+1,oe=N*R+H,re=N*R+H+1;o.push(Q,J,oe),o.push(J,re,oe)}}}this.setIndex(o),this.setAttribute("position",new Zt(c,3)),this.setAttribute("normal",new Zt(f,3)),this.setAttribute("uv",new Zt(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new O1(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class N1 extends wn{constructor(e=1,t=32,n=0,a=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:a},t=Math.max(3,t);const s=[],o=[],c=[],f=[],d=new pe,g=new dt;o.push(0,0,0),c.push(0,0,1),f.push(.5,.5);for(let y=0,x=3;y<=t;y++,x+=3){const b=n+y/t*a;d.x=e*Math.cos(b),d.y=e*Math.sin(b),o.push(d.x,d.y,d.z),c.push(0,0,1),g.x=(o[x]/e+1)/2,g.y=(o[x+1]/e+1)/2,f.push(g.x,g.y)}for(let y=1;y<=t;y++)s.push(y,y+1,0);this.setIndex(s),this.setAttribute("position",new Zt(o,3)),this.setAttribute("normal",new Zt(c,3)),this.setAttribute("uv",new Zt(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new N1(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class D0 extends wn{constructor(e=1,t=1,n=1,a=32,s=1,o=!1,c=0,f=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:a,heightSegments:s,openEnded:o,thetaStart:c,thetaLength:f};const d=this;a=Math.floor(a),s=Math.floor(s);const g=[],y=[],x=[],b=[];let M=0;const R=[],C=n/2;let E=0;N(),o===!1&&(e>0&&I(!0),t>0&&I(!1)),this.setIndex(g),this.setAttribute("position",new Zt(y,3)),this.setAttribute("normal",new Zt(x,3)),this.setAttribute("uv",new Zt(b,2));function N(){const z=new pe,F=new pe;let V=0;const W=(t-e)/n;for(let Z=0;Z<=s;Z++){const B=[],H=Z/s,Q=H*(t-e)+e;for(let J=0;J<=a;J++){const oe=J/a,re=oe*f+c,ve=Math.sin(re),q=Math.cos(re);F.x=Q*ve,F.y=-H*n+C,F.z=Q*q,y.push(F.x,F.y,F.z),z.set(ve,W,q).normalize(),x.push(z.x,z.y,z.z),b.push(oe,1-H),B.push(M++)}R.push(B)}for(let Z=0;Z<a;Z++)for(let B=0;B<s;B++){const H=R[B][Z],Q=R[B+1][Z],J=R[B+1][Z+1],oe=R[B][Z+1];(e>0||B!==0)&&(g.push(H,Q,oe),V+=3),(t>0||B!==s-1)&&(g.push(Q,J,oe),V+=3)}d.addGroup(E,V,0),E+=V}function I(z){const F=M,V=new dt,W=new pe;let Z=0;const B=z===!0?e:t,H=z===!0?1:-1;for(let J=1;J<=a;J++)y.push(0,C*H,0),x.push(0,H,0),b.push(.5,.5),M++;const Q=M;for(let J=0;J<=a;J++){const re=J/a*f+c,ve=Math.cos(re),q=Math.sin(re);W.x=B*q,W.y=C*H,W.z=B*ve,y.push(W.x,W.y,W.z),x.push(0,H,0),V.x=ve*.5+.5,V.y=q*.5*H+.5,b.push(V.x,V.y),M++}for(let J=0;J<a;J++){const oe=F+J,re=Q+J;z===!0?g.push(re,re+1,oe):g.push(re+1,re,oe),Z+=3}d.addGroup(E,Z,z===!0?1:2),E+=Z}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new D0(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class L0 extends D0{constructor(e=1,t=1,n=32,a=1,s=!1,o=0,c=Math.PI*2){super(0,e,t,n,a,s,o,c),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:a,openEnded:s,thetaStart:o,thetaLength:c}}static fromJSON(e){return new L0(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Xf extends wn{constructor(e=[],t=[],n=1,a=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:a};const s=[],o=[];c(a),d(n),g(),this.setAttribute("position",new Zt(s,3)),this.setAttribute("normal",new Zt(s.slice(),3)),this.setAttribute("uv",new Zt(o,2)),a===0?this.computeVertexNormals():this.normalizeNormals();function c(N){const I=new pe,z=new pe,F=new pe;for(let V=0;V<t.length;V+=3)b(t[V+0],I),b(t[V+1],z),b(t[V+2],F),f(I,z,F,N)}function f(N,I,z,F){const V=F+1,W=[];for(let Z=0;Z<=V;Z++){W[Z]=[];const B=N.clone().lerp(z,Z/V),H=I.clone().lerp(z,Z/V),Q=V-Z;for(let J=0;J<=Q;J++)J===0&&Z===V?W[Z][J]=B:W[Z][J]=B.clone().lerp(H,J/Q)}for(let Z=0;Z<V;Z++)for(let B=0;B<2*(V-Z)-1;B++){const H=Math.floor(B/2);B%2===0?(x(W[Z][H+1]),x(W[Z+1][H]),x(W[Z][H])):(x(W[Z][H+1]),x(W[Z+1][H+1]),x(W[Z+1][H]))}}function d(N){const I=new pe;for(let z=0;z<s.length;z+=3)I.x=s[z+0],I.y=s[z+1],I.z=s[z+2],I.normalize().multiplyScalar(N),s[z+0]=I.x,s[z+1]=I.y,s[z+2]=I.z}function g(){const N=new pe;for(let I=0;I<s.length;I+=3){N.x=s[I+0],N.y=s[I+1],N.z=s[I+2];const z=C(N)/2/Math.PI+.5,F=E(N)/Math.PI+.5;o.push(z,1-F)}M(),y()}function y(){for(let N=0;N<o.length;N+=6){const I=o[N+0],z=o[N+2],F=o[N+4],V=Math.max(I,z,F),W=Math.min(I,z,F);V>.9&&W<.1&&(I<.2&&(o[N+0]+=1),z<.2&&(o[N+2]+=1),F<.2&&(o[N+4]+=1))}}function x(N){s.push(N.x,N.y,N.z)}function b(N,I){const z=N*3;I.x=e[z+0],I.y=e[z+1],I.z=e[z+2]}function M(){const N=new pe,I=new pe,z=new pe,F=new pe,V=new dt,W=new dt,Z=new dt;for(let B=0,H=0;B<s.length;B+=9,H+=6){N.set(s[B+0],s[B+1],s[B+2]),I.set(s[B+3],s[B+4],s[B+5]),z.set(s[B+6],s[B+7],s[B+8]),V.set(o[H+0],o[H+1]),W.set(o[H+2],o[H+3]),Z.set(o[H+4],o[H+5]),F.copy(N).add(I).add(z).divideScalar(3);const Q=C(F);R(V,H+0,N,Q),R(W,H+2,I,Q),R(Z,H+4,z,Q)}}function R(N,I,z,F){F<0&&N.x===1&&(o[I]=N.x-1),z.x===0&&z.z===0&&(o[I]=F/2/Math.PI+.5)}function C(N){return Math.atan2(N.z,-N.x)}function E(N){return Math.atan2(-N.y,Math.sqrt(N.x*N.x+N.z*N.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xf(e.vertices,e.indices,e.radius,e.detail)}}class U1 extends Xf{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,a=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-a,-n,0,-a,n,0,a,-n,0,a,n,-a,-n,0,-a,n,0,a,-n,0,a,n,0,-n,0,-a,n,0,-a,-n,0,a,n,0,a],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new U1(e.radius,e.detail)}}const gy=new pe,vy=new pe,bS=new pe,yy=new io;class oR extends wn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const a=Math.pow(10,4),s=Math.cos(nd*t),o=e.getIndex(),c=e.getAttribute("position"),f=o?o.count:c.count,d=[0,0,0],g=["a","b","c"],y=new Array(3),x={},b=[];for(let M=0;M<f;M+=3){o?(d[0]=o.getX(M),d[1]=o.getX(M+1),d[2]=o.getX(M+2)):(d[0]=M,d[1]=M+1,d[2]=M+2);const{a:R,b:C,c:E}=yy;if(R.fromBufferAttribute(c,d[0]),C.fromBufferAttribute(c,d[1]),E.fromBufferAttribute(c,d[2]),yy.getNormal(bS),y[0]=`${Math.round(R.x*a)},${Math.round(R.y*a)},${Math.round(R.z*a)}`,y[1]=`${Math.round(C.x*a)},${Math.round(C.y*a)},${Math.round(C.z*a)}`,y[2]=`${Math.round(E.x*a)},${Math.round(E.y*a)},${Math.round(E.z*a)}`,!(y[0]===y[1]||y[1]===y[2]||y[2]===y[0]))for(let N=0;N<3;N++){const I=(N+1)%3,z=y[N],F=y[I],V=yy[g[N]],W=yy[g[I]],Z=`${z}_${F}`,B=`${F}_${z}`;B in x&&x[B]?(bS.dot(x[B].normal)<=s&&(b.push(V.x,V.y,V.z),b.push(W.x,W.y,W.z)),x[B]=null):Z in x||(x[Z]={index0:d[N],index1:d[I],normal:bS.clone()})}}for(const M in x)if(x[M]){const{index0:R,index1:C}=x[M];gy.fromBufferAttribute(c,R),vy.fromBufferAttribute(c,C),b.push(gy.x,gy.y,gy.z),b.push(vy.x,vy.y,vy.z)}this.setAttribute("position",new Zt(b,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class nc{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){It("Curve: .getPoint() not implemented.")}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,a=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),s+=n.distanceTo(a),t.push(s),a=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const n=this.getLengths();let a=0;const s=n.length;let o;t?o=t:o=e*n[s-1];let c=0,f=s-1,d;for(;c<=f;)if(a=Math.floor(c+(f-c)/2),d=n[a]-o,d<0)c=a+1;else if(d>0)f=a-1;else{f=a;break}if(a=f,n[a]===o)return a/(s-1);const g=n[a],x=n[a+1]-g,b=(o-g)/x;return(a+b)/(s-1)}getTangent(e,t){let a=e-1e-4,s=e+1e-4;a<0&&(a=0),s>1&&(s=1);const o=this.getPoint(a),c=this.getPoint(s),f=t||(o.isVector2?new dt:new pe);return f.copy(c).sub(o).normalize(),f}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t=!1){const n=new pe,a=[],s=[],o=[],c=new pe,f=new gn;for(let b=0;b<=e;b++){const M=b/e;a[b]=this.getTangentAt(M,new pe)}s[0]=new pe,o[0]=new pe;let d=Number.MAX_VALUE;const g=Math.abs(a[0].x),y=Math.abs(a[0].y),x=Math.abs(a[0].z);g<=d&&(d=g,n.set(1,0,0)),y<=d&&(d=y,n.set(0,1,0)),x<=d&&n.set(0,0,1),c.crossVectors(a[0],n).normalize(),s[0].crossVectors(a[0],c),o[0].crossVectors(a[0],s[0]);for(let b=1;b<=e;b++){if(s[b]=s[b-1].clone(),o[b]=o[b-1].clone(),c.crossVectors(a[b-1],a[b]),c.length()>Number.EPSILON){c.normalize();const M=Math.acos(mn(a[b-1].dot(a[b]),-1,1));s[b].applyMatrix4(f.makeRotationAxis(c,M))}o[b].crossVectors(a[b],s[b])}if(t===!0){let b=Math.acos(mn(s[0].dot(s[e]),-1,1));b/=e,a[0].dot(c.crossVectors(s[0],s[e]))>0&&(b=-b);for(let M=1;M<=e;M++)s[M].applyMatrix4(f.makeRotationAxis(a[M],b*M)),o[M].crossVectors(a[M],s[M])}return{tangents:a,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class I1 extends nc{constructor(e=0,t=0,n=1,a=1,s=0,o=Math.PI*2,c=!1,f=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=a,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=c,this.aRotation=f}getPoint(e,t=new dt){const n=t,a=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=a;for(;s>a;)s-=a;s<Number.EPSILON&&(o?s=0:s=a),this.aClockwise===!0&&!o&&(s===a?s=-a:s=s-a);const c=this.aStartAngle+e*s;let f=this.aX+this.xRadius*Math.cos(c),d=this.aY+this.yRadius*Math.sin(c);if(this.aRotation!==0){const g=Math.cos(this.aRotation),y=Math.sin(this.aRotation),x=f-this.aX,b=d-this.aY;f=x*g-b*y+this.aX,d=x*y+b*g+this.aY}return n.set(f,d)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class lR extends I1{constructor(e,t,n,a,s,o){super(e,t,n,n,a,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function $2(){let i=0,e=0,t=0,n=0;function a(s,o,c,f){i=s,e=c,t=-3*s+3*o-2*c-f,n=2*s-2*o+c+f}return{initCatmullRom:function(s,o,c,f,d){a(o,c,d*(c-s),d*(f-o))},initNonuniformCatmullRom:function(s,o,c,f,d,g,y){let x=(o-s)/d-(c-s)/(d+g)+(c-o)/g,b=(c-o)/g-(f-o)/(g+y)+(f-c)/y;x*=g,b*=g,a(o,c,x,b)},calc:function(s){const o=s*s,c=o*s;return i+e*s+t*o+n*c}}}const _y=new pe,TS=new $2,MS=new $2,AS=new $2;class cR extends nc{constructor(e=[],t=!1,n="centripetal",a=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=a}getPoint(e,t=new pe){const n=t,a=this.points,s=a.length,o=(s-(this.closed?0:1))*e;let c=Math.floor(o),f=o-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/s)+1)*s:f===0&&c===s-1&&(c=s-2,f=1);let d,g;this.closed||c>0?d=a[(c-1)%s]:(_y.subVectors(a[0],a[1]).add(a[0]),d=_y);const y=a[c%s],x=a[(c+1)%s];if(this.closed||c+2<s?g=a[(c+2)%s]:(_y.subVectors(a[s-1],a[s-2]).add(a[s-1]),g=_y),this.curveType==="centripetal"||this.curveType==="chordal"){const b=this.curveType==="chordal"?.5:.25;let M=Math.pow(d.distanceToSquared(y),b),R=Math.pow(y.distanceToSquared(x),b),C=Math.pow(x.distanceToSquared(g),b);R<1e-4&&(R=1),M<1e-4&&(M=R),C<1e-4&&(C=R),TS.initNonuniformCatmullRom(d.x,y.x,x.x,g.x,M,R,C),MS.initNonuniformCatmullRom(d.y,y.y,x.y,g.y,M,R,C),AS.initNonuniformCatmullRom(d.z,y.z,x.z,g.z,M,R,C)}else this.curveType==="catmullrom"&&(TS.initCatmullRom(d.x,y.x,x.x,g.x,this.tension),MS.initCatmullRom(d.y,y.y,x.y,g.y,this.tension),AS.initCatmullRom(d.z,y.z,x.z,g.z,this.tension));return n.set(TS.calc(f),MS.calc(f),AS.calc(f)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const a=e.points[t];this.points.push(a.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const a=this.points[t];e.points.push(a.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const a=e.points[t];this.points.push(new pe().fromArray(a))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function eE(i,e,t,n,a){const s=(n-e)*.5,o=(a-t)*.5,c=i*i,f=i*c;return(2*t-2*n+s+o)*f+(-3*t+3*n-2*s-o)*c+s*i+t}function dU(i,e){const t=1-i;return t*t*e}function pU(i,e){return 2*(1-i)*i*e}function mU(i,e){return i*i*e}function Wg(i,e,t,n){return dU(i,e)+pU(i,t)+mU(i,n)}function gU(i,e){const t=1-i;return t*t*t*e}function vU(i,e){const t=1-i;return 3*t*t*i*e}function yU(i,e){return 3*(1-i)*i*i*e}function _U(i,e){return i*i*i*e}function qg(i,e,t,n,a){return gU(i,e)+vU(i,t)+yU(i,n)+_U(i,a)}class eT extends nc{constructor(e=new dt,t=new dt,n=new dt,a=new dt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=a}getPoint(e,t=new dt){const n=t,a=this.v0,s=this.v1,o=this.v2,c=this.v3;return n.set(qg(e,a.x,s.x,o.x,c.x),qg(e,a.y,s.y,o.y,c.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class uR extends nc{constructor(e=new pe,t=new pe,n=new pe,a=new pe){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=a}getPoint(e,t=new pe){const n=t,a=this.v0,s=this.v1,o=this.v2,c=this.v3;return n.set(qg(e,a.x,s.x,o.x,c.x),qg(e,a.y,s.y,o.y,c.y),qg(e,a.z,s.z,o.z,c.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class tT extends nc{constructor(e=new dt,t=new dt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new dt){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new dt){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class fR extends nc{constructor(e=new pe,t=new pe){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new pe){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new pe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class nT extends nc{constructor(e=new dt,t=new dt,n=new dt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new dt){const n=t,a=this.v0,s=this.v1,o=this.v2;return n.set(Wg(e,a.x,s.x,o.x),Wg(e,a.y,s.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class iT extends nc{constructor(e=new pe,t=new pe,n=new pe){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new pe){const n=t,a=this.v0,s=this.v1,o=this.v2;return n.set(Wg(e,a.x,s.x,o.x),Wg(e,a.y,s.y,o.y),Wg(e,a.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class aT extends nc{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new dt){const n=t,a=this.points,s=(a.length-1)*e,o=Math.floor(s),c=s-o,f=a[o===0?o:o-1],d=a[o],g=a[o>a.length-2?a.length-1:o+1],y=a[o>a.length-3?a.length-1:o+2];return n.set(eE(c,f.x,d.x,g.x,y.x),eE(c,f.y,d.y,g.y,y.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const a=e.points[t];this.points.push(a.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const a=this.points[t];e.points.push(a.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const a=e.points[t];this.points.push(new dt().fromArray(a))}return this}}var Y_=Object.freeze({__proto__:null,ArcCurve:lR,CatmullRomCurve3:cR,CubicBezierCurve:eT,CubicBezierCurve3:uR,EllipseCurve:I1,LineCurve:tT,LineCurve3:fR,QuadraticBezierCurve:nT,QuadraticBezierCurve3:iT,SplineCurve:aT});class hR extends nc{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Y_[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),a=this.getCurveLengths();let s=0;for(;s<a.length;){if(a[s]>=n){const o=a[s]-n,c=this.curves[s],f=c.getLength(),d=f===0?0:1-o/f;return c.getPointAt(d,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,a=this.curves.length;n<a;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let a=0,s=this.curves;a<s.length;a++){const o=s[a],c=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,f=o.getPoints(c);for(let d=0;d<f.length;d++){const g=f[d];n&&n.equals(g)||(t.push(g),n=g)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const a=e.curves[t];this.curves.push(a.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const a=this.curves[t];e.curves.push(a.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const a=e.curves[t];this.curves.push(new Y_[a.type]().fromJSON(a))}return this}}class Z_ extends hR{constructor(e){super(),this.type="Path",this.currentPoint=new dt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new tT(this.currentPoint.clone(),new dt(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,a){const s=new nT(this.currentPoint.clone(),new dt(e,t),new dt(n,a));return this.curves.push(s),this.currentPoint.set(n,a),this}bezierCurveTo(e,t,n,a,s,o){const c=new eT(this.currentPoint.clone(),new dt(e,t),new dt(n,a),new dt(s,o));return this.curves.push(c),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new aT(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,a,s,o){const c=this.currentPoint.x,f=this.currentPoint.y;return this.absarc(e+c,t+f,n,a,s,o),this}absarc(e,t,n,a,s,o){return this.absellipse(e,t,n,n,a,s,o),this}ellipse(e,t,n,a,s,o,c,f){const d=this.currentPoint.x,g=this.currentPoint.y;return this.absellipse(e+d,t+g,n,a,s,o,c,f),this}absellipse(e,t,n,a,s,o,c,f){const d=new I1(e,t,n,a,s,o,c,f);if(this.curves.length>0){const y=d.getPoint(0);y.equals(this.currentPoint)||this.lineTo(y.x,y.y)}this.curves.push(d);const g=d.getPoint(1);return this.currentPoint.copy(g),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class id extends Z_{constructor(e){super(e),this.uuid=ko(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,a=this.holes.length;n<a;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const a=e.holes[t];this.holes.push(a.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const a=this.holes[t];e.holes.push(a.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const a=e.holes[t];this.holes.push(new Z_().fromJSON(a))}return this}}function xU(i,e,t=2){const n=e&&e.length,a=n?e[0]*t:i.length;let s=dR(i,0,a,t,!0);const o=[];if(!s||s.next===s.prev)return o;let c,f,d;if(n&&(s=AU(i,e,s,t)),i.length>80*t){c=i[0],f=i[1];let g=c,y=f;for(let x=t;x<a;x+=t){const b=i[x],M=i[x+1];b<c&&(c=b),M<f&&(f=M),b>g&&(g=b),M>y&&(y=M)}d=Math.max(g-c,y-f),d=d!==0?32767/d:0}return f0(s,o,t,c,f,d,0),o}function dR(i,e,t,n,a){let s;if(a===PU(i,e,t,n)>0)for(let o=e;o<t;o+=n)s=tE(o/n|0,i[o],i[o+1],s);else for(let o=t-n;o>=e;o-=n)s=tE(o/n|0,i[o],i[o+1],s);return s&&Qp(s,s.next)&&(d0(s),s=s.next),s}function hd(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(Qp(t,t.next)||ha(t.prev,t,t.next)===0)){if(d0(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function f0(i,e,t,n,a,s,o){if(!i)return;!o&&s&&DU(i,n,a,s);let c=i;for(;i.prev!==i.next;){const f=i.prev,d=i.next;if(s?bU(i,n,a,s):SU(i)){e.push(f.i,i.i,d.i),d0(i),i=d.next,c=d.next;continue}if(i=d,i===c){o?o===1?(i=TU(hd(i),e),f0(i,e,t,n,a,s,2)):o===2&&MU(i,e,t,n,a,s):f0(hd(i),e,t,n,a,s,1);break}}}function SU(i){const e=i.prev,t=i,n=i.next;if(ha(e,t,n)>=0)return!1;const a=e.x,s=t.x,o=n.x,c=e.y,f=t.y,d=n.y,g=Math.min(a,s,o),y=Math.min(c,f,d),x=Math.max(a,s,o),b=Math.max(c,f,d);let M=n.next;for(;M!==e;){if(M.x>=g&&M.x<=x&&M.y>=y&&M.y<=b&&Ng(a,c,s,f,o,d,M.x,M.y)&&ha(M.prev,M,M.next)>=0)return!1;M=M.next}return!0}function bU(i,e,t,n){const a=i.prev,s=i,o=i.next;if(ha(a,s,o)>=0)return!1;const c=a.x,f=s.x,d=o.x,g=a.y,y=s.y,x=o.y,b=Math.min(c,f,d),M=Math.min(g,y,x),R=Math.max(c,f,d),C=Math.max(g,y,x),E=Nb(b,M,e,t,n),N=Nb(R,C,e,t,n);let I=i.prevZ,z=i.nextZ;for(;I&&I.z>=E&&z&&z.z<=N;){if(I.x>=b&&I.x<=R&&I.y>=M&&I.y<=C&&I!==a&&I!==o&&Ng(c,g,f,y,d,x,I.x,I.y)&&ha(I.prev,I,I.next)>=0||(I=I.prevZ,z.x>=b&&z.x<=R&&z.y>=M&&z.y<=C&&z!==a&&z!==o&&Ng(c,g,f,y,d,x,z.x,z.y)&&ha(z.prev,z,z.next)>=0))return!1;z=z.nextZ}for(;I&&I.z>=E;){if(I.x>=b&&I.x<=R&&I.y>=M&&I.y<=C&&I!==a&&I!==o&&Ng(c,g,f,y,d,x,I.x,I.y)&&ha(I.prev,I,I.next)>=0)return!1;I=I.prevZ}for(;z&&z.z<=N;){if(z.x>=b&&z.x<=R&&z.y>=M&&z.y<=C&&z!==a&&z!==o&&Ng(c,g,f,y,d,x,z.x,z.y)&&ha(z.prev,z,z.next)>=0)return!1;z=z.nextZ}return!0}function TU(i,e){let t=i;do{const n=t.prev,a=t.next.next;!Qp(n,a)&&mR(n,t,t.next,a)&&h0(n,a)&&h0(a,n)&&(e.push(n.i,t.i,a.i),d0(t),d0(t.next),t=i=a),t=t.next}while(t!==i);return hd(t)}function MU(i,e,t,n,a,s){let o=i;do{let c=o.next.next;for(;c!==o.prev;){if(o.i!==c.i&&NU(o,c)){let f=gR(o,c);o=hd(o,o.next),f=hd(f,f.next),f0(o,e,t,n,a,s,0),f0(f,e,t,n,a,s,0);return}c=c.next}o=o.next}while(o!==i)}function AU(i,e,t,n){const a=[];for(let s=0,o=e.length;s<o;s++){const c=e[s]*n,f=s<o-1?e[s+1]*n:i.length,d=dR(i,c,f,n,!1);d===d.next&&(d.steiner=!0),a.push(OU(d))}a.sort(EU);for(let s=0;s<a.length;s++)t=wU(a[s],t);return t}function EU(i,e){let t=i.x-e.x;if(t===0&&(t=i.y-e.y,t===0)){const n=(i.next.y-i.y)/(i.next.x-i.x),a=(e.next.y-e.y)/(e.next.x-e.x);t=n-a}return t}function wU(i,e){const t=CU(i,e);if(!t)return e;const n=gR(t,i);return hd(n,n.next),hd(t,t.next)}function CU(i,e){let t=e;const n=i.x,a=i.y;let s=-1/0,o;if(Qp(i,t))return t;do{if(Qp(i,t.next))return t.next;if(a<=t.y&&a>=t.next.y&&t.next.y!==t.y){const y=t.x+(a-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(y<=n&&y>s&&(s=y,o=t.x<t.next.x?t:t.next,y===n))return o}t=t.next}while(t!==e);if(!o)return null;const c=o,f=o.x,d=o.y;let g=1/0;t=o;do{if(n>=t.x&&t.x>=f&&n!==t.x&&pR(a<d?n:s,a,f,d,a<d?s:n,a,t.x,t.y)){const y=Math.abs(a-t.y)/(n-t.x);h0(t,i)&&(y<g||y===g&&(t.x>o.x||t.x===o.x&&RU(o,t)))&&(o=t,g=y)}t=t.next}while(t!==c);return o}function RU(i,e){return ha(i.prev,i,e.prev)<0&&ha(e.next,i,i.next)<0}function DU(i,e,t,n){let a=i;do a.z===0&&(a.z=Nb(a.x,a.y,e,t,n)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==i);a.prevZ.nextZ=null,a.prevZ=null,LU(a)}function LU(i){let e,t=1;do{let n=i,a;i=null;let s=null;for(e=0;n;){e++;let o=n,c=0;for(let d=0;d<t&&(c++,o=o.nextZ,!!o);d++);let f=t;for(;c>0||f>0&&o;)c!==0&&(f===0||!o||n.z<=o.z)?(a=n,n=n.nextZ,c--):(a=o,o=o.nextZ,f--),s?s.nextZ=a:i=a,a.prevZ=s,s=a;n=o}s.nextZ=null,t*=2}while(e>1);return i}function Nb(i,e,t,n,a){return i=(i-t)*a|0,e=(e-n)*a|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function OU(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function pR(i,e,t,n,a,s,o,c){return(a-o)*(e-c)>=(i-o)*(s-c)&&(i-o)*(n-c)>=(t-o)*(e-c)&&(t-o)*(s-c)>=(a-o)*(n-c)}function Ng(i,e,t,n,a,s,o,c){return!(i===o&&e===c)&&pR(i,e,t,n,a,s,o,c)}function NU(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!UU(i,e)&&(h0(i,e)&&h0(e,i)&&IU(i,e)&&(ha(i.prev,i,e.prev)||ha(i,e.prev,e))||Qp(i,e)&&ha(i.prev,i,i.next)>0&&ha(e.prev,e,e.next)>0)}function ha(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function Qp(i,e){return i.x===e.x&&i.y===e.y}function mR(i,e,t,n){const a=Sy(ha(i,e,t)),s=Sy(ha(i,e,n)),o=Sy(ha(t,n,i)),c=Sy(ha(t,n,e));return!!(a!==s&&o!==c||a===0&&xy(i,t,e)||s===0&&xy(i,n,e)||o===0&&xy(t,i,n)||c===0&&xy(t,e,n))}function xy(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function Sy(i){return i>0?1:i<0?-1:0}function UU(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&mR(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function h0(i,e){return ha(i.prev,i,i.next)<0?ha(i,e,i.next)>=0&&ha(i,i.prev,e)>=0:ha(i,e,i.prev)<0||ha(i,i.next,e)<0}function IU(i,e){let t=i,n=!1;const a=(i.x+e.x)/2,s=(i.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&a<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function gR(i,e){const t=Ub(i.i,i.x,i.y),n=Ub(e.i,e.x,e.y),a=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=a,a.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function tE(i,e,t,n){const a=Ub(i,e,t);return n?(a.next=n.next,a.prev=n,n.next.prev=a,n.next=a):(a.prev=a,a.next=a),a}function d0(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Ub(i,e,t){return{i,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function PU(i,e,t,n){let a=0;for(let s=e,o=t-n;s<t;s+=n)a+=(i[o]-i[s])*(i[s+1]+i[o+1]),o=s;return a}class zU{static triangulate(e,t,n=2){return xU(e,t,n)}}class Jl{static area(e){const t=e.length;let n=0;for(let a=t-1,s=0;s<t;a=s++)n+=e[a].x*e[s].y-e[s].x*e[a].y;return n*.5}static isClockWise(e){return Jl.area(e)<0}static triangulateShape(e,t){const n=[],a=[],s=[];nE(e),iE(n,e);let o=e.length;t.forEach(nE);for(let f=0;f<t.length;f++)a.push(o),o+=t[f].length,iE(n,t[f]);const c=zU.triangulate(n,a);for(let f=0;f<c.length;f+=3)s.push(c.slice(f,f+3));return s}}function nE(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function iE(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class P1 extends wn{constructor(e=new id([new dt(.5,.5),new dt(-.5,.5),new dt(-.5,-.5),new dt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,a=[],s=[];for(let c=0,f=e.length;c<f;c++){const d=e[c];o(d)}this.setAttribute("position",new Zt(a,3)),this.setAttribute("uv",new Zt(s,2)),this.computeVertexNormals();function o(c){const f=[],d=t.curveSegments!==void 0?t.curveSegments:12,g=t.steps!==void 0?t.steps:1,y=t.depth!==void 0?t.depth:1;let x=t.bevelEnabled!==void 0?t.bevelEnabled:!0,b=t.bevelThickness!==void 0?t.bevelThickness:.2,M=t.bevelSize!==void 0?t.bevelSize:b-.1,R=t.bevelOffset!==void 0?t.bevelOffset:0,C=t.bevelSegments!==void 0?t.bevelSegments:3;const E=t.extrudePath,N=t.UVGenerator!==void 0?t.UVGenerator:BU;let I,z=!1,F,V,W,Z;if(E){I=E.getSpacedPoints(g),z=!0,x=!1;const Ne=E.isCatmullRomCurve3?E.closed:!1;F=E.computeFrenetFrames(g,Ne),V=new pe,W=new pe,Z=new pe}x||(C=0,b=0,M=0,R=0);const B=c.extractPoints(d);let H=B.shape;const Q=B.holes;if(!Jl.isClockWise(H)){H=H.reverse();for(let Ne=0,Ve=Q.length;Ne<Ve;Ne++){const Fe=Q[Ne];Jl.isClockWise(Fe)&&(Q[Ne]=Fe.reverse())}}function oe(Ne){const Fe=10000000000000001e-36;let rt=Ne[0];for(let ae=1;ae<=Ne.length;ae++){const ut=ae%Ne.length,Ze=Ne[ut],Le=Ze.x-rt.x,tt=Ze.y-rt.y,$=Le*Le+tt*tt,Y=Math.max(Math.abs(Ze.x),Math.abs(Ze.y),Math.abs(rt.x),Math.abs(rt.y)),ye=Fe*Y*Y;if($<=ye){Ne.splice(ut,1),ae--;continue}rt=Ze}}oe(H),Q.forEach(oe);const re=Q.length,ve=H;for(let Ne=0;Ne<re;Ne++){const Ve=Q[Ne];H=H.concat(Ve)}function q(Ne,Ve,Fe){return Ve||rn("ExtrudeGeometry: vec does not exist"),Ne.clone().addScaledVector(Ve,Fe)}const K=H.length;function te(Ne,Ve,Fe){let rt,ae,ut;const Ze=Ne.x-Ve.x,Le=Ne.y-Ve.y,tt=Fe.x-Ne.x,$=Fe.y-Ne.y,Y=Ze*Ze+Le*Le,ye=Ze*$-Le*tt;if(Math.abs(ye)>Number.EPSILON){const Be=Math.sqrt(Y),De=Math.sqrt(tt*tt+$*$),Ce=Ve.x-Le/Be,vt=Ve.y+Ze/Be,ht=Fe.x-$/De,bt=Fe.y+tt/De,Ct=((ht-Ce)*$-(bt-vt)*tt)/(Ze*$-Le*tt);rt=Ce+Ze*Ct-Ne.x,ae=vt+Le*Ct-Ne.y;const Ge=rt*rt+ae*ae;if(Ge<=2)return new dt(rt,ae);ut=Math.sqrt(Ge/2)}else{let Be=!1;Ze>Number.EPSILON?tt>Number.EPSILON&&(Be=!0):Ze<-Number.EPSILON?tt<-Number.EPSILON&&(Be=!0):Math.sign(Le)===Math.sign($)&&(Be=!0),Be?(rt=-Le,ae=Ze,ut=Math.sqrt(Y)):(rt=Ze,ae=Le,ut=Math.sqrt(Y/2))}return new dt(rt/ut,ae/ut)}const de=[];for(let Ne=0,Ve=ve.length,Fe=Ve-1,rt=Ne+1;Ne<Ve;Ne++,Fe++,rt++)Fe===Ve&&(Fe=0),rt===Ve&&(rt=0),de[Ne]=te(ve[Ne],ve[Fe],ve[rt]);const ce=[];let G,ne=de.concat();for(let Ne=0,Ve=re;Ne<Ve;Ne++){const Fe=Q[Ne];G=[];for(let rt=0,ae=Fe.length,ut=ae-1,Ze=rt+1;rt<ae;rt++,ut++,Ze++)ut===ae&&(ut=0),Ze===ae&&(Ze=0),G[rt]=te(Fe[rt],Fe[ut],Fe[Ze]);ce.push(G),ne=ne.concat(G)}let fe;if(C===0)fe=Jl.triangulateShape(ve,Q);else{const Ne=[],Ve=[];for(let Fe=0;Fe<C;Fe++){const rt=Fe/C,ae=b*Math.cos(rt*Math.PI/2),ut=M*Math.sin(rt*Math.PI/2)+R;for(let Ze=0,Le=ve.length;Ze<Le;Ze++){const tt=q(ve[Ze],de[Ze],ut);$e(tt.x,tt.y,-ae),rt===0&&Ne.push(tt)}for(let Ze=0,Le=re;Ze<Le;Ze++){const tt=Q[Ze];G=ce[Ze];const $=[];for(let Y=0,ye=tt.length;Y<ye;Y++){const Be=q(tt[Y],G[Y],ut);$e(Be.x,Be.y,-ae),rt===0&&$.push(Be)}rt===0&&Ve.push($)}}fe=Jl.triangulateShape(Ne,Ve)}const me=fe.length,xe=M+R;for(let Ne=0;Ne<K;Ne++){const Ve=x?q(H[Ne],ne[Ne],xe):H[Ne];z?(W.copy(F.normals[0]).multiplyScalar(Ve.x),V.copy(F.binormals[0]).multiplyScalar(Ve.y),Z.copy(I[0]).add(W).add(V),$e(Z.x,Z.y,Z.z)):$e(Ve.x,Ve.y,0)}for(let Ne=1;Ne<=g;Ne++)for(let Ve=0;Ve<K;Ve++){const Fe=x?q(H[Ve],ne[Ve],xe):H[Ve];z?(W.copy(F.normals[Ne]).multiplyScalar(Fe.x),V.copy(F.binormals[Ne]).multiplyScalar(Fe.y),Z.copy(I[Ne]).add(W).add(V),$e(Z.x,Z.y,Z.z)):$e(Fe.x,Fe.y,y/g*Ne)}for(let Ne=C-1;Ne>=0;Ne--){const Ve=Ne/C,Fe=b*Math.cos(Ve*Math.PI/2),rt=M*Math.sin(Ve*Math.PI/2)+R;for(let ae=0,ut=ve.length;ae<ut;ae++){const Ze=q(ve[ae],de[ae],rt);$e(Ze.x,Ze.y,y+Fe)}for(let ae=0,ut=Q.length;ae<ut;ae++){const Ze=Q[ae];G=ce[ae];for(let Le=0,tt=Ze.length;Le<tt;Le++){const $=q(Ze[Le],G[Le],rt);z?$e($.x,$.y+I[g-1].y,I[g-1].x+Fe):$e($.x,$.y,y+Fe)}}}he(),_e();function he(){const Ne=a.length/3;if(x){let Ve=0,Fe=K*Ve;for(let rt=0;rt<me;rt++){const ae=fe[rt];et(ae[2]+Fe,ae[1]+Fe,ae[0]+Fe)}Ve=g+C*2,Fe=K*Ve;for(let rt=0;rt<me;rt++){const ae=fe[rt];et(ae[0]+Fe,ae[1]+Fe,ae[2]+Fe)}}else{for(let Ve=0;Ve<me;Ve++){const Fe=fe[Ve];et(Fe[2],Fe[1],Fe[0])}for(let Ve=0;Ve<me;Ve++){const Fe=fe[Ve];et(Fe[0]+K*g,Fe[1]+K*g,Fe[2]+K*g)}}n.addGroup(Ne,a.length/3-Ne,0)}function _e(){const Ne=a.length/3;let Ve=0;Ae(ve,Ve),Ve+=ve.length;for(let Fe=0,rt=Q.length;Fe<rt;Fe++){const ae=Q[Fe];Ae(ae,Ve),Ve+=ae.length}n.addGroup(Ne,a.length/3-Ne,1)}function Ae(Ne,Ve){let Fe=Ne.length;for(;--Fe>=0;){const rt=Fe;let ae=Fe-1;ae<0&&(ae=Ne.length-1);for(let ut=0,Ze=g+C*2;ut<Ze;ut++){const Le=K*ut,tt=K*(ut+1),$=Ve+rt+Le,Y=Ve+ae+Le,ye=Ve+ae+tt,Be=Ve+rt+tt;qe($,Y,ye,Be)}}}function $e(Ne,Ve,Fe){f.push(Ne),f.push(Ve),f.push(Fe)}function et(Ne,Ve,Fe){nt(Ne),nt(Ve),nt(Fe);const rt=a.length/3,ae=N.generateTopUV(n,a,rt-3,rt-2,rt-1);St(ae[0]),St(ae[1]),St(ae[2])}function qe(Ne,Ve,Fe,rt){nt(Ne),nt(Ve),nt(rt),nt(Ve),nt(Fe),nt(rt);const ae=a.length/3,ut=N.generateSideWallUV(n,a,ae-6,ae-3,ae-2,ae-1);St(ut[0]),St(ut[1]),St(ut[3]),St(ut[1]),St(ut[2]),St(ut[3])}function nt(Ne){a.push(f[Ne*3+0]),a.push(f[Ne*3+1]),a.push(f[Ne*3+2])}function St(Ne){s.push(Ne.x),s.push(Ne.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return FU(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,o=e.shapes.length;s<o;s++){const c=t[e.shapes[s]];n.push(c)}const a=e.options.extrudePath;return a!==void 0&&(e.options.extrudePath=new Y_[a.type]().fromJSON(a)),new P1(n,e.options)}}const BU={generateTopUV:function(i,e,t,n,a){const s=e[t*3],o=e[t*3+1],c=e[n*3],f=e[n*3+1],d=e[a*3],g=e[a*3+1];return[new dt(s,o),new dt(c,f),new dt(d,g)]},generateSideWallUV:function(i,e,t,n,a,s){const o=e[t*3],c=e[t*3+1],f=e[t*3+2],d=e[n*3],g=e[n*3+1],y=e[n*3+2],x=e[a*3],b=e[a*3+1],M=e[a*3+2],R=e[s*3],C=e[s*3+1],E=e[s*3+2];return Math.abs(c-g)<Math.abs(o-d)?[new dt(o,1-f),new dt(d,1-y),new dt(x,1-M),new dt(R,1-E)]:[new dt(c,1-f),new dt(g,1-y),new dt(b,1-M),new dt(C,1-E)]}};function FU(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,a=i.length;n<a;n++){const s=i[n];t.shapes.push(s.uuid)}else t.shapes.push(i.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class z1 extends Xf{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,a=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(a,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new z1(e.radius,e.detail)}}class B1 extends wn{constructor(e=[new dt(0,-.5),new dt(.5,0),new dt(0,.5)],t=12,n=0,a=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:a},t=Math.floor(t),a=mn(a,0,Math.PI*2);const s=[],o=[],c=[],f=[],d=[],g=1/t,y=new pe,x=new dt,b=new pe,M=new pe,R=new pe;let C=0,E=0;for(let N=0;N<=e.length-1;N++)switch(N){case 0:C=e[N+1].x-e[N].x,E=e[N+1].y-e[N].y,b.x=E*1,b.y=-C,b.z=E*0,R.copy(b),b.normalize(),f.push(b.x,b.y,b.z);break;case e.length-1:f.push(R.x,R.y,R.z);break;default:C=e[N+1].x-e[N].x,E=e[N+1].y-e[N].y,b.x=E*1,b.y=-C,b.z=E*0,M.copy(b),b.x+=R.x,b.y+=R.y,b.z+=R.z,b.normalize(),f.push(b.x,b.y,b.z),R.copy(M)}for(let N=0;N<=t;N++){const I=n+N*g*a,z=Math.sin(I),F=Math.cos(I);for(let V=0;V<=e.length-1;V++){y.x=e[V].x*z,y.y=e[V].y,y.z=e[V].x*F,o.push(y.x,y.y,y.z),x.x=N/t,x.y=V/(e.length-1),c.push(x.x,x.y);const W=f[3*V+0]*z,Z=f[3*V+1],B=f[3*V+0]*F;d.push(W,Z,B)}}for(let N=0;N<t;N++)for(let I=0;I<e.length-1;I++){const z=I+N*e.length,F=z,V=z+e.length,W=z+e.length+1,Z=z+1;s.push(F,V,Z),s.push(W,Z,V)}this.setIndex(s),this.setAttribute("position",new Zt(o,3)),this.setAttribute("uv",new Zt(c,2)),this.setAttribute("normal",new Zt(d,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new B1(e.points,e.segments,e.phiStart,e.phiLength)}}class O0 extends Xf{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],a=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,a,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new O0(e.radius,e.detail)}}class ku extends wn{constructor(e=1,t=1,n=1,a=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:a};const s=e/2,o=t/2,c=Math.floor(n),f=Math.floor(a),d=c+1,g=f+1,y=e/c,x=t/f,b=[],M=[],R=[],C=[];for(let E=0;E<g;E++){const N=E*x-o;for(let I=0;I<d;I++){const z=I*y-s;M.push(z,-N,0),R.push(0,0,1),C.push(I/c),C.push(1-E/f)}}for(let E=0;E<f;E++)for(let N=0;N<c;N++){const I=N+d*E,z=N+d*(E+1),F=N+1+d*(E+1),V=N+1+d*E;b.push(I,z,V),b.push(z,F,V)}this.setIndex(b),this.setAttribute("position",new Zt(M,3)),this.setAttribute("normal",new Zt(R,3)),this.setAttribute("uv",new Zt(C,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ku(e.width,e.height,e.widthSegments,e.heightSegments)}}class F1 extends wn{constructor(e=.5,t=1,n=32,a=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:a,thetaStart:s,thetaLength:o},n=Math.max(3,n),a=Math.max(1,a);const c=[],f=[],d=[],g=[];let y=e;const x=(t-e)/a,b=new pe,M=new dt;for(let R=0;R<=a;R++){for(let C=0;C<=n;C++){const E=s+C/n*o;b.x=y*Math.cos(E),b.y=y*Math.sin(E),f.push(b.x,b.y,b.z),d.push(0,0,1),M.x=(b.x/t+1)/2,M.y=(b.y/t+1)/2,g.push(M.x,M.y)}y+=x}for(let R=0;R<a;R++){const C=R*(n+1);for(let E=0;E<n;E++){const N=E+C,I=N,z=N+n+1,F=N+n+2,V=N+1;c.push(I,z,V),c.push(z,F,V)}}this.setIndex(c),this.setAttribute("position",new Zt(f,3)),this.setAttribute("normal",new Zt(d,3)),this.setAttribute("uv",new Zt(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new F1(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class k1 extends wn{constructor(e=new id([new dt(0,.5),new dt(-.5,-.5),new dt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],a=[],s=[],o=[];let c=0,f=0;if(Array.isArray(e)===!1)d(e);else for(let g=0;g<e.length;g++)d(e[g]),this.addGroup(c,f,g),c+=f,f=0;this.setIndex(n),this.setAttribute("position",new Zt(a,3)),this.setAttribute("normal",new Zt(s,3)),this.setAttribute("uv",new Zt(o,2));function d(g){const y=a.length/3,x=g.extractPoints(t);let b=x.shape;const M=x.holes;Jl.isClockWise(b)===!1&&(b=b.reverse());for(let C=0,E=M.length;C<E;C++){const N=M[C];Jl.isClockWise(N)===!0&&(M[C]=N.reverse())}const R=Jl.triangulateShape(b,M);for(let C=0,E=M.length;C<E;C++){const N=M[C];b=b.concat(N)}for(let C=0,E=b.length;C<E;C++){const N=b[C];a.push(N.x,N.y,0),s.push(0,0,1),o.push(N.x,N.y)}for(let C=0,E=R.length;C<E;C++){const N=R[C],I=N[0]+y,z=N[1]+y,F=N[2]+y;n.push(I,z,F),f+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return kU(t,e)}static fromJSON(e,t){const n=[];for(let a=0,s=e.shapes.length;a<s;a++){const o=t[e.shapes[a]];n.push(o)}return new k1(n,e.curveSegments)}}function kU(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const a=i[t];e.shapes.push(a.uuid)}else e.shapes.push(i.uuid);return e}class N0 extends wn{constructor(e=1,t=32,n=16,a=0,s=Math.PI*2,o=0,c=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:a,phiLength:s,thetaStart:o,thetaLength:c},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const f=Math.min(o+c,Math.PI);let d=0;const g=[],y=new pe,x=new pe,b=[],M=[],R=[],C=[];for(let E=0;E<=n;E++){const N=[],I=E/n;let z=0;E===0&&o===0?z=.5/t:E===n&&f===Math.PI&&(z=-.5/t);for(let F=0;F<=t;F++){const V=F/t;y.x=-e*Math.cos(a+V*s)*Math.sin(o+I*c),y.y=e*Math.cos(o+I*c),y.z=e*Math.sin(a+V*s)*Math.sin(o+I*c),M.push(y.x,y.y,y.z),x.copy(y).normalize(),R.push(x.x,x.y,x.z),C.push(V+z,1-I),N.push(d++)}g.push(N)}for(let E=0;E<n;E++)for(let N=0;N<t;N++){const I=g[E][N+1],z=g[E][N],F=g[E+1][N],V=g[E+1][N+1];(E!==0||o>0)&&b.push(I,z,V),(E!==n-1||f<Math.PI)&&b.push(z,F,V)}this.setIndex(b),this.setAttribute("position",new Zt(M,3)),this.setAttribute("normal",new Zt(R,3)),this.setAttribute("uv",new Zt(C,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new N0(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class V1 extends Xf{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],a=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,a,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new V1(e.radius,e.detail)}}class H1 extends wn{constructor(e=1,t=.4,n=12,a=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:a,arc:s},n=Math.floor(n),a=Math.floor(a);const o=[],c=[],f=[],d=[],g=new pe,y=new pe,x=new pe;for(let b=0;b<=n;b++)for(let M=0;M<=a;M++){const R=M/a*s,C=b/n*Math.PI*2;y.x=(e+t*Math.cos(C))*Math.cos(R),y.y=(e+t*Math.cos(C))*Math.sin(R),y.z=t*Math.sin(C),c.push(y.x,y.y,y.z),g.x=e*Math.cos(R),g.y=e*Math.sin(R),x.subVectors(y,g).normalize(),f.push(x.x,x.y,x.z),d.push(M/a),d.push(b/n)}for(let b=1;b<=n;b++)for(let M=1;M<=a;M++){const R=(a+1)*b+M-1,C=(a+1)*(b-1)+M-1,E=(a+1)*(b-1)+M,N=(a+1)*b+M;o.push(R,C,N),o.push(C,E,N)}this.setIndex(o),this.setAttribute("position",new Zt(c,3)),this.setAttribute("normal",new Zt(f,3)),this.setAttribute("uv",new Zt(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new H1(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class G1 extends wn{constructor(e=1,t=.4,n=64,a=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:a,p:s,q:o},n=Math.floor(n),a=Math.floor(a);const c=[],f=[],d=[],g=[],y=new pe,x=new pe,b=new pe,M=new pe,R=new pe,C=new pe,E=new pe;for(let I=0;I<=n;++I){const z=I/n*s*Math.PI*2;N(z,s,o,e,b),N(z+.01,s,o,e,M),C.subVectors(M,b),E.addVectors(M,b),R.crossVectors(C,E),E.crossVectors(R,C),R.normalize(),E.normalize();for(let F=0;F<=a;++F){const V=F/a*Math.PI*2,W=-t*Math.cos(V),Z=t*Math.sin(V);y.x=b.x+(W*E.x+Z*R.x),y.y=b.y+(W*E.y+Z*R.y),y.z=b.z+(W*E.z+Z*R.z),f.push(y.x,y.y,y.z),x.subVectors(y,b).normalize(),d.push(x.x,x.y,x.z),g.push(I/n),g.push(F/a)}}for(let I=1;I<=n;I++)for(let z=1;z<=a;z++){const F=(a+1)*(I-1)+(z-1),V=(a+1)*I+(z-1),W=(a+1)*I+z,Z=(a+1)*(I-1)+z;c.push(F,V,Z),c.push(V,W,Z)}this.setIndex(c),this.setAttribute("position",new Zt(f,3)),this.setAttribute("normal",new Zt(d,3)),this.setAttribute("uv",new Zt(g,2));function N(I,z,F,V,W){const Z=Math.cos(I),B=Math.sin(I),H=F/z*I,Q=Math.cos(H);W.x=V*(2+Q)*.5*Z,W.y=V*(2+Q)*B*.5,W.z=V*Math.sin(H)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new G1(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class j1 extends wn{constructor(e=new iT(new pe(-1,-1,0),new pe(-1,1,0),new pe(1,1,0)),t=64,n=1,a=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:a,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const c=new pe,f=new pe,d=new dt;let g=new pe;const y=[],x=[],b=[],M=[];R(),this.setIndex(M),this.setAttribute("position",new Zt(y,3)),this.setAttribute("normal",new Zt(x,3)),this.setAttribute("uv",new Zt(b,2));function R(){for(let I=0;I<t;I++)C(I);C(s===!1?t:0),N(),E()}function C(I){g=e.getPointAt(I/t,g);const z=o.normals[I],F=o.binormals[I];for(let V=0;V<=a;V++){const W=V/a*Math.PI*2,Z=Math.sin(W),B=-Math.cos(W);f.x=B*z.x+Z*F.x,f.y=B*z.y+Z*F.y,f.z=B*z.z+Z*F.z,f.normalize(),x.push(f.x,f.y,f.z),c.x=g.x+n*f.x,c.y=g.y+n*f.y,c.z=g.z+n*f.z,y.push(c.x,c.y,c.z)}}function E(){for(let I=1;I<=t;I++)for(let z=1;z<=a;z++){const F=(a+1)*(I-1)+(z-1),V=(a+1)*I+(z-1),W=(a+1)*I+z,Z=(a+1)*(I-1)+z;M.push(F,V,Z),M.push(V,W,Z)}}function N(){for(let I=0;I<=t;I++)for(let z=0;z<=a;z++)d.x=I/t,d.y=z/a,b.push(d.x,d.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new j1(new Y_[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class vR extends wn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,a=new pe,s=new pe;if(e.index!==null){const o=e.attributes.position,c=e.index;let f=e.groups;f.length===0&&(f=[{start:0,count:c.count,materialIndex:0}]);for(let d=0,g=f.length;d<g;++d){const y=f[d],x=y.start,b=y.count;for(let M=x,R=x+b;M<R;M+=3)for(let C=0;C<3;C++){const E=c.getX(M+C),N=c.getX(M+(C+1)%3);a.fromBufferAttribute(o,E),s.fromBufferAttribute(o,N),aE(a,s,n)===!0&&(t.push(a.x,a.y,a.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let c=0,f=o.count/3;c<f;c++)for(let d=0;d<3;d++){const g=3*c+d,y=3*c+(d+1)%3;a.fromBufferAttribute(o,g),s.fromBufferAttribute(o,y),aE(a,s,n)===!0&&(t.push(a.x,a.y,a.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Zt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function aE(i,e,t){const n=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,a=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return t.has(n)===!0||t.has(a)===!0?!1:(t.add(n),t.add(a),!0)}var sE=Object.freeze({__proto__:null,BoxGeometry:gd,CapsuleGeometry:O1,CircleGeometry:N1,ConeGeometry:L0,CylinderGeometry:D0,DodecahedronGeometry:U1,EdgesGeometry:oR,ExtrudeGeometry:P1,IcosahedronGeometry:z1,LatheGeometry:B1,OctahedronGeometry:O0,PlaneGeometry:ku,PolyhedronGeometry:Xf,RingGeometry:F1,ShapeGeometry:k1,SphereGeometry:N0,TetrahedronGeometry:V1,TorusGeometry:H1,TorusKnotGeometry:G1,TubeGeometry:j1,WireframeGeometry:vR});class yR extends lr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ht(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class sT extends pl{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class rT extends lr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Ht(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qf,this.normalScale=new dt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Vo,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class _R extends rT{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new dt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return mn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ht(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ht(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ht(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class xR extends lr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ht(16777215),this.specular=new Ht(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qf,this.normalScale=new dt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Vo,this.combine=w0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class SR extends lr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ht(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qf,this.normalScale=new dt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class bR extends lr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qf,this.normalScale=new dt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class TR extends lr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ht(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qf,this.normalScale=new dt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Vo,this.combine=w0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class W1 extends lr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=IC,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class q1 extends lr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class MR extends lr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ht(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qf,this.normalScale=new dt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this.fog=e.fog,this}}class AR extends Hr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Jh(i,e){return!i||i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function ER(i){function e(a,s){return i[a]-i[s]}const t=i.length,n=new Array(t);for(let a=0;a!==t;++a)n[a]=a;return n.sort(e),n}function Ib(i,e,t){const n=i.length,a=new i.constructor(n);for(let s=0,o=0;o!==n;++s){const c=t[s]*e;for(let f=0;f!==e;++f)a[o++]=i[c+f]}return a}function oT(i,e,t,n){let a=1,s=i[0];for(;s!==void 0&&s[n]===void 0;)s=i[a++];if(s===void 0)return;let o=s[n];if(o!==void 0)if(Array.isArray(o))do o=s[n],o!==void 0&&(e.push(s.time),t.push(...o)),s=i[a++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[n],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=i[a++];while(s!==void 0);else do o=s[n],o!==void 0&&(e.push(s.time),t.push(o)),s=i[a++];while(s!==void 0)}function VU(i,e,t,n,a=30){const s=i.clone();s.name=e;const o=[];for(let f=0;f<s.tracks.length;++f){const d=s.tracks[f],g=d.getValueSize(),y=[],x=[];for(let b=0;b<d.times.length;++b){const M=d.times[b]*a;if(!(M<t||M>=n)){y.push(d.times[b]);for(let R=0;R<g;++R)x.push(d.values[b*g+R])}}y.length!==0&&(d.times=Jh(y,d.times.constructor),d.values=Jh(x,d.values.constructor),o.push(d))}s.tracks=o;let c=1/0;for(let f=0;f<s.tracks.length;++f)c>s.tracks[f].times[0]&&(c=s.tracks[f].times[0]);for(let f=0;f<s.tracks.length;++f)s.tracks[f].shift(-1*c);return s.resetDuration(),s}function HU(i,e=0,t=i,n=30){n<=0&&(n=30);const a=t.tracks.length,s=e/n;for(let o=0;o<a;++o){const c=t.tracks[o],f=c.ValueTypeName;if(f==="bool"||f==="string")continue;const d=i.tracks.find(function(E){return E.name===c.name&&E.ValueTypeName===f});if(d===void 0)continue;let g=0;const y=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(g=y/3);let x=0;const b=d.getValueSize();d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(x=b/3);const M=c.times.length-1;let R;if(s<=c.times[0]){const E=g,N=y-g;R=c.values.slice(E,N)}else if(s>=c.times[M]){const E=M*y+g,N=E+y-g;R=c.values.slice(E,N)}else{const E=c.createInterpolant(),N=g,I=y-g;E.evaluate(s),R=E.resultBuffer.slice(N,I)}f==="quaternion"&&new or().fromArray(R).normalize().conjugate().toArray(R);const C=d.times.length;for(let E=0;E<C;++E){const N=E*b+x;if(f==="quaternion")or.multiplyQuaternionsFlat(d.values,N,R,0,d.values,N);else{const I=b-x*2;for(let z=0;z<I;++z)d.values[N+z]-=R[z]}}}return i.blendMode=V2,i}class GU{static convertArray(e,t){return Jh(e,t)}static isTypedArray(e){return WC(e)}static getKeyframeOrder(e){return ER(e)}static sortedArray(e,t,n){return Ib(e,t,n)}static flattenJSON(e,t,n,a){oT(e,t,n,a)}static subclip(e,t,n,a,s=30){return VU(e,t,n,a,s)}static makeClipAdditive(e,t=0,n=e,a=30){return HU(e,t,n,a)}}class U0{constructor(e,t,n,a){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=a!==void 0?a:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,a=t[n],s=t[n-1];e:{t:{let o;n:{i:if(!(e<a)){for(let c=n+2;;){if(a===void 0){if(e<s)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===c)break;if(s=a,a=t[++n],e<a)break t}o=t.length;break n}if(!(e>=s)){const c=t[1];e<c&&(n=2,s=c);for(let f=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===f)break;if(a=s,s=t[--n-1],e>=s)break t}o=n,n=0;break n}break e}for(;n<o;){const c=n+o>>>1;e<t[c]?o=c:n=c+1}if(a=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(a===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,a)}return this.interpolate_(n,s,e,a)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,a=this.valueSize,s=e*a;for(let o=0;o!==a;++o)t[o]=n[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class wR extends U0{constructor(e,t,n,a){super(e,t,n,a),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Kh,endingEnd:Kh}}intervalChanged_(e,t,n){const a=this.parameterPositions;let s=e-2,o=e+1,c=a[s],f=a[o];if(c===void 0)switch(this.getSettings_().endingStart){case Qh:s=e,c=2*t-n;break;case r0:s=a.length-2,c=t+a[s]-a[s+1];break;default:s=e,c=n}if(f===void 0)switch(this.getSettings_().endingEnd){case Qh:o=e,f=2*n-t;break;case r0:o=1,f=n+a[1]-a[0];break;default:o=e-1,f=t}const d=(n-t)*.5,g=this.valueSize;this._weightPrev=d/(t-c),this._weightNext=d/(f-n),this._offsetPrev=s*g,this._offsetNext=o*g}interpolate_(e,t,n,a){const s=this.resultBuffer,o=this.sampleValues,c=this.valueSize,f=e*c,d=f-c,g=this._offsetPrev,y=this._offsetNext,x=this._weightPrev,b=this._weightNext,M=(n-t)/(a-t),R=M*M,C=R*M,E=-x*C+2*x*R-x*M,N=(1+x)*C+(-1.5-2*x)*R+(-.5+x)*M+1,I=(-1-b)*C+(1.5+b)*R+.5*M,z=b*C-b*R;for(let F=0;F!==c;++F)s[F]=E*o[g+F]+N*o[d+F]+I*o[f+F]+z*o[y+F];return s}}class lT extends U0{constructor(e,t,n,a){super(e,t,n,a)}interpolate_(e,t,n,a){const s=this.resultBuffer,o=this.sampleValues,c=this.valueSize,f=e*c,d=f-c,g=(n-t)/(a-t),y=1-g;for(let x=0;x!==c;++x)s[x]=o[d+x]*y+o[f+x]*g;return s}}class CR extends U0{constructor(e,t,n,a){super(e,t,n,a)}interpolate_(e){return this.copySampleValue_(e-1)}}class ml{constructor(e,t,n,a){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Jh(t,this.TimeBufferType),this.values=Jh(n,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Jh(e.times,Array),values:Jh(e.values,Array)};const a=e.getInterpolation();a!==e.DefaultInterpolation&&(n.interpolation=a)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new CR(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new lT(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new wR(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case s0:t=this.InterpolantFactoryMethodDiscrete;break;case W_:t=this.InterpolantFactoryMethodLinear;break;case Yy:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return It("KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return s0;case this.InterpolantFactoryMethodLinear:return W_;case this.InterpolantFactoryMethodSmooth:return Yy}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,a=t.length;n!==a;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,a=t.length;n!==a;++n)t[n]*=e}return this}trim(e,t){const n=this.times,a=n.length;let s=0,o=a-1;for(;s!==a&&n[s]<e;)++s;for(;o!==-1&&n[o]>t;)--o;if(++o,s!==0||o!==a){s>=o&&(o=Math.max(o,1),s=o-1);const c=this.getValueSize();this.times=n.slice(s,o),this.values=this.values.slice(s*c,o*c)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(rn("KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,a=this.values,s=n.length;s===0&&(rn("KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let c=0;c!==s;c++){const f=n[c];if(typeof f=="number"&&isNaN(f)){rn("KeyframeTrack: Time is not a valid number.",this,c,f),e=!1;break}if(o!==null&&o>f){rn("KeyframeTrack: Out of order keys.",this,c,f,o),e=!1;break}o=f}if(a!==void 0&&WC(a))for(let c=0,f=a.length;c!==f;++c){const d=a[c];if(isNaN(d)){rn("KeyframeTrack: Value is not a valid number.",this,c,d),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),a=this.getInterpolation()===Yy,s=e.length-1;let o=1;for(let c=1;c<s;++c){let f=!1;const d=e[c],g=e[c+1];if(d!==g&&(c!==1||d!==e[0]))if(a)f=!0;else{const y=c*n,x=y-n,b=y+n;for(let M=0;M!==n;++M){const R=t[y+M];if(R!==t[x+M]||R!==t[b+M]){f=!0;break}}}if(f){if(c!==o){e[o]=e[c];const y=c*n,x=o*n;for(let b=0;b!==n;++b)t[x+b]=t[y+b]}++o}}if(s>0){e[o]=e[s];for(let c=s*n,f=o*n,d=0;d!==n;++d)t[f+d]=t[c+d];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,a=new n(this.name,e,t);return a.createInterpolant=this.createInterpolant,a}}ml.prototype.ValueTypeName="";ml.prototype.TimeBufferType=Float32Array;ml.prototype.ValueBufferType=Float32Array;ml.prototype.DefaultInterpolation=W_;class vd extends ml{constructor(e,t,n){super(e,t,n)}}vd.prototype.ValueTypeName="bool";vd.prototype.ValueBufferType=Array;vd.prototype.DefaultInterpolation=s0;vd.prototype.InterpolantFactoryMethodLinear=void 0;vd.prototype.InterpolantFactoryMethodSmooth=void 0;class cT extends ml{constructor(e,t,n,a){super(e,t,n,a)}}cT.prototype.ValueTypeName="color";class p0 extends ml{constructor(e,t,n,a){super(e,t,n,a)}}p0.prototype.ValueTypeName="number";class RR extends U0{constructor(e,t,n,a){super(e,t,n,a)}interpolate_(e,t,n,a){const s=this.resultBuffer,o=this.sampleValues,c=this.valueSize,f=(n-t)/(a-t);let d=e*c;for(let g=d+c;d!==g;d+=4)or.slerpFlat(s,0,o,d-c,o,d,f);return s}}class I0 extends ml{constructor(e,t,n,a){super(e,t,n,a)}InterpolantFactoryMethodLinear(e){return new RR(this.times,this.values,this.getValueSize(),e)}}I0.prototype.ValueTypeName="quaternion";I0.prototype.InterpolantFactoryMethodSmooth=void 0;class yd extends ml{constructor(e,t,n){super(e,t,n)}}yd.prototype.ValueTypeName="string";yd.prototype.ValueBufferType=Array;yd.prototype.DefaultInterpolation=s0;yd.prototype.InterpolantFactoryMethodLinear=void 0;yd.prototype.InterpolantFactoryMethodSmooth=void 0;class m0 extends ml{constructor(e,t,n,a){super(e,t,n,a)}}m0.prototype.ValueTypeName="vector";class g0{constructor(e="",t=-1,n=[],a=x1){this.name=e,this.tracks=n,this.duration=t,this.blendMode=a,this.uuid=ko(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,a=1/(e.fps||1);for(let o=0,c=n.length;o!==c;++o)t.push(WU(n[o]).scale(a));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s.userData=JSON.parse(e.userData||"{}"),s}static toJSON(e){const t=[],n=e.tracks,a={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let s=0,o=n.length;s!==o;++s)t.push(ml.toJSON(n[s]));return a}static CreateFromMorphTargetSequence(e,t,n,a){const s=t.length,o=[];for(let c=0;c<s;c++){let f=[],d=[];f.push((c+s-1)%s,c,(c+1)%s),d.push(0,1,0);const g=ER(f);f=Ib(f,1,g),d=Ib(d,1,g),!a&&f[0]===0&&(f.push(s),d.push(d[0])),o.push(new p0(".morphTargetInfluences["+t[c].name+"]",f,d).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const a=e;n=a.geometry&&a.geometry.animations||a.animations}for(let a=0;a<n.length;a++)if(n[a].name===t)return n[a];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const a={},s=/^([\w-]*?)([\d]+)$/;for(let c=0,f=e.length;c<f;c++){const d=e[c],g=d.name.match(s);if(g&&g.length>1){const y=g[1];let x=a[y];x||(a[y]=x=[]),x.push(d)}}const o=[];for(const c in a)o.push(this.CreateFromMorphTargetSequence(c,a[c],t,n));return o}static parseAnimation(e,t){if(It("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return rn("AnimationClip: No animation in JSONLoader data."),null;const n=function(y,x,b,M,R){if(b.length!==0){const C=[],E=[];oT(b,C,E,M),C.length!==0&&R.push(new y(x,C,E))}},a=[],s=e.name||"default",o=e.fps||30,c=e.blendMode;let f=e.length||-1;const d=e.hierarchy||[];for(let y=0;y<d.length;y++){const x=d[y].keys;if(!(!x||x.length===0))if(x[0].morphTargets){const b={};let M;for(M=0;M<x.length;M++)if(x[M].morphTargets)for(let R=0;R<x[M].morphTargets.length;R++)b[x[M].morphTargets[R]]=-1;for(const R in b){const C=[],E=[];for(let N=0;N!==x[M].morphTargets.length;++N){const I=x[M];C.push(I.time),E.push(I.morphTarget===R?1:0)}a.push(new p0(".morphTargetInfluence["+R+"]",C,E))}f=b.length*o}else{const b=".bones["+t[y].name+"]";n(m0,b+".position",x,"pos",a),n(I0,b+".quaternion",x,"rot",a),n(m0,b+".scale",x,"scl",a)}}return a.length===0?null:new this(s,f,a,c)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,a=e.length;n!==a;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function jU(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return p0;case"vector":case"vector2":case"vector3":case"vector4":return m0;case"color":return cT;case"quaternion":return I0;case"bool":case"boolean":return vd;case"string":return yd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function WU(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=jU(i.type);if(i.times===void 0){const t=[],n=[];oT(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const Pc={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class uT{constructor(e,t,n){const a=this;let s=!1,o=0,c=0,f;const d=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this._abortController=null,this.itemStart=function(g){c++,s===!1&&a.onStart!==void 0&&a.onStart(g,o,c),s=!0},this.itemEnd=function(g){o++,a.onProgress!==void 0&&a.onProgress(g,o,c),o===c&&(s=!1,a.onLoad!==void 0&&a.onLoad())},this.itemError=function(g){a.onError!==void 0&&a.onError(g)},this.resolveURL=function(g){return f?f(g):g},this.setURLModifier=function(g){return f=g,this},this.addHandler=function(g,y){return d.push(g,y),this},this.removeHandler=function(g){const y=d.indexOf(g);return y!==-1&&d.splice(y,2),this},this.getHandler=function(g){for(let y=0,x=d.length;y<x;y+=2){const b=d[y],M=d[y+1];if(b.global&&(b.lastIndex=0),b.test(g))return M}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const DR=new uT;class oo{constructor(e){this.manager=e!==void 0?e:DR,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(a,s){n.load(e,a,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}oo.DEFAULT_MATERIAL_NAME="__DEFAULT";const wu={};class qU extends Error{constructor(e,t){super(e),this.response=t}}class Pu extends oo{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,n,a){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Pc.get(`file:${e}`);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(wu[e]!==void 0){wu[e].push({onLoad:t,onProgress:n,onError:a});return}wu[e]=[],wu[e].push({onLoad:t,onProgress:n,onError:a});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),c=this.mimeType,f=this.responseType;fetch(o).then(d=>{if(d.status===200||d.status===0){if(d.status===0&&It("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||d.body===void 0||d.body.getReader===void 0)return d;const g=wu[e],y=d.body.getReader(),x=d.headers.get("X-File-Size")||d.headers.get("Content-Length"),b=x?parseInt(x):0,M=b!==0;let R=0;const C=new ReadableStream({start(E){N();function N(){y.read().then(({done:I,value:z})=>{if(I)E.close();else{R+=z.byteLength;const F=new ProgressEvent("progress",{lengthComputable:M,loaded:R,total:b});for(let V=0,W=g.length;V<W;V++){const Z=g[V];Z.onProgress&&Z.onProgress(F)}E.enqueue(z),N()}},I=>{E.error(I)})}}});return new Response(C)}else throw new qU(`fetch for "${d.url}" responded with ${d.status}: ${d.statusText}`,d)}).then(d=>{switch(f){case"arraybuffer":return d.arrayBuffer();case"blob":return d.blob();case"document":return d.text().then(g=>new DOMParser().parseFromString(g,c));case"json":return d.json();default:if(c==="")return d.text();{const y=/charset="?([^;"\s]*)"?/i.exec(c),x=y&&y[1]?y[1].toLowerCase():void 0,b=new TextDecoder(x);return d.arrayBuffer().then(M=>b.decode(M))}}}).then(d=>{Pc.add(`file:${e}`,d);const g=wu[e];delete wu[e];for(let y=0,x=g.length;y<x;y++){const b=g[y];b.onLoad&&b.onLoad(d)}}).catch(d=>{const g=wu[e];if(g===void 0)throw this.manager.itemError(e),d;delete wu[e];for(let y=0,x=g.length;y<x;y++){const b=g[y];b.onError&&b.onError(d)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class XU extends oo{constructor(e){super(e)}load(e,t,n,a){const s=this,o=new Pu(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(c){try{t(s.parse(JSON.parse(c)))}catch(f){a?a(f):rn(f),s.manager.itemError(e)}},n,a)}parse(e){const t=[];for(let n=0;n<e.length;n++){const a=g0.parse(e[n]);t.push(a)}return t}}class YU extends oo{constructor(e){super(e)}load(e,t,n,a){const s=this,o=[],c=new L1,f=new Pu(this.manager);f.setPath(this.path),f.setResponseType("arraybuffer"),f.setRequestHeader(this.requestHeader),f.setWithCredentials(s.withCredentials);let d=0;function g(y){f.load(e[y],function(x){const b=s.parse(x,!0);o[y]={width:b.width,height:b.height,format:b.format,mipmaps:b.mipmaps},d+=1,d===6&&(b.mipmapCount===1&&(c.minFilter=Di),c.image=o,c.format=b.format,c.needsUpdate=!0,t&&t(c))},n,a)}if(Array.isArray(e))for(let y=0,x=e.length;y<x;++y)g(y);else f.load(e,function(y){const x=s.parse(y,!0);if(x.isCubemap){const b=x.mipmaps.length/x.mipmapCount;for(let M=0;M<b;M++){o[M]={mipmaps:[]};for(let R=0;R<x.mipmapCount;R++)o[M].mipmaps.push(x.mipmaps[M*x.mipmapCount+R]),o[M].format=x.format,o[M].width=x.width,o[M].height=x.height}c.image=o}else c.image.width=x.width,c.image.height=x.height,c.mipmaps=x.mipmaps;x.mipmapCount===1&&(c.minFilter=Di),c.format=x.format,c.needsUpdate=!0,t&&t(c)},n,a);return c}}const Tp=new WeakMap;class v0 extends oo{constructor(e){super(e)}load(e,t,n,a){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Pc.get(`image:${e}`);if(o!==void 0){if(o.complete===!0)s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0);else{let y=Tp.get(o);y===void 0&&(y=[],Tp.set(o,y)),y.push({onLoad:t,onError:a})}return o}const c=c0("img");function f(){g(),t&&t(this);const y=Tp.get(this)||[];for(let x=0;x<y.length;x++){const b=y[x];b.onLoad&&b.onLoad(this)}Tp.delete(this),s.manager.itemEnd(e)}function d(y){g(),a&&a(y),Pc.remove(`image:${e}`);const x=Tp.get(this)||[];for(let b=0;b<x.length;b++){const M=x[b];M.onError&&M.onError(y)}Tp.delete(this),s.manager.itemError(e),s.manager.itemEnd(e)}function g(){c.removeEventListener("load",f,!1),c.removeEventListener("error",d,!1)}return c.addEventListener("load",f,!1),c.addEventListener("error",d,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(c.crossOrigin=this.crossOrigin),Pc.add(`image:${e}`,c),s.manager.itemStart(e),c.src=e,c}}class ZU extends oo{constructor(e){super(e)}load(e,t,n,a){const s=new R0;s.colorSpace=ir;const o=new v0(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let c=0;function f(d){o.load(e[d],function(g){s.images[d]=g,c++,c===6&&(s.needsUpdate=!0,t&&t(s))},void 0,a)}for(let d=0;d<e.length;++d)f(d);return s}}class KU extends oo{constructor(e){super(e)}load(e,t,n,a){const s=this,o=new $l,c=new Pu(this.manager);return c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setPath(this.path),c.setWithCredentials(s.withCredentials),c.load(e,function(f){let d;try{d=s.parse(f)}catch(g){if(a!==void 0)a(g);else{g(g);return}}d.image!==void 0?o.image=d.image:d.data!==void 0&&(o.image.width=d.width,o.image.height=d.height,o.image.data=d.data),o.wrapS=d.wrapS!==void 0?d.wrapS:ao,o.wrapT=d.wrapT!==void 0?d.wrapT:ao,o.magFilter=d.magFilter!==void 0?d.magFilter:Di,o.minFilter=d.minFilter!==void 0?d.minFilter:Di,o.anisotropy=d.anisotropy!==void 0?d.anisotropy:1,d.colorSpace!==void 0&&(o.colorSpace=d.colorSpace),d.flipY!==void 0&&(o.flipY=d.flipY),d.format!==void 0&&(o.format=d.format),d.type!==void 0&&(o.type=d.type),d.mipmaps!==void 0&&(o.mipmaps=d.mipmaps,o.minFilter=Ic),d.mipmapCount===1&&(o.minFilter=Di),d.generateMipmaps!==void 0&&(o.generateMipmaps=d.generateMipmaps),o.needsUpdate=!0,t&&t(o,d)},n,a),o}}class QU extends oo{constructor(e){super(e)}load(e,t,n,a){const s=new pa,o=new v0(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(c){s.image=c,s.needsUpdate=!0,t!==void 0&&t(s)},n,a),s}}class Yf extends li{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ht(e),this.intensity=t}dispose(){this.dispatchEvent({type:"dispose"})}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,t}}class LR extends Yf{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(li.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ht(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}toJSON(e){const t=super.toJSON(e);return t.object.groundColor=this.groundColor.getHex(),t}}const ES=new gn,rE=new pe,oE=new pe;class fT{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new dt(512,512),this.mapType=Br,this.map=null,this.mapPass=null,this.matrix=new gn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new sm,this._frameExtents=new dt(1,1),this._viewportCount=1,this._viewports=[new Ri(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;rE.setFromMatrixPosition(e.matrixWorld),t.position.copy(rE),oE.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(oE),t.updateMatrixWorld(),ES.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ES,t.coordinateSystem,t.reversedDepth),t.reversedDepth?n.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(ES)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class JU extends fT{constructor(){super(new fa(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,n=Yp*2*e.angle*this.focus,a=this.mapSize.width/this.mapSize.height*this.aspect,s=e.distance||t.far;(n!==t.fov||a!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=a,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class OR extends Yf{constructor(e,t,n=0,a=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(li.DEFAULT_UP),this.updateMatrix(),this.target=new li,this.distance=n,this.angle=a,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new JU}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.map=e.map,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.angle=this.angle,t.object.decay=this.decay,t.object.penumbra=this.penumbra,t.object.target=this.target.uuid,this.map&&this.map.isTexture&&(t.object.map=this.map.toJSON(e).uuid),t.object.shadow=this.shadow.toJSON(),t}}class $U extends fT{constructor(){super(new fa(90,1,.5,500)),this.isPointLightShadow=!0}}class NR extends Yf{constructor(e,t,n=0,a=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=a,this.shadow=new $U}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.decay=this.decay,t.object.shadow=this.shadow.toJSON(),t}}class ec extends A1{constructor(e=-1,t=1,n=1,a=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=a,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,a,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=a,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,a=(this.top+this.bottom)/2;let s=n-e,o=n+e,c=a+t,f=a-t;if(this.view!==null&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=d*this.view.offsetX,o=s+d*this.view.width,c-=g*this.view.offsetY,f=c-g*this.view.height}this.projectionMatrix.makeOrthographic(s,o,c,f,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class eI extends fT{constructor(){super(new ec(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class UR extends Yf{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(li.DEFAULT_UP),this.updateMatrix(),this.target=new li,this.shadow=new eI}dispose(){super.dispose(),this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.shadow=this.shadow.toJSON(),t.object.target=this.target.uuid,t}}class IR extends Yf{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class PR extends Yf{constructor(e,t,n=10,a=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=a}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class hT{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new pe)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,a=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*a),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],1.092548*(n*a)),t.addScaledVector(o[5],1.092548*(a*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(n*s)),t.addScaledVector(o[8],.546274*(n*n-a*a)),t}getIrradianceAt(e,t){const n=e.x,a=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*a),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*n),t.addScaledVector(o[4],2*.429043*n*a),t.addScaledVector(o[5],2*.429043*a*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*n*s),t.addScaledVector(o[8],.429043*(n*n-a*a)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let a=0;a<9;a++)n[a].fromArray(e,t+a*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let a=0;a<9;a++)n[a].toArray(e,t+a*3);return e}static getBasisAt(e,t){const n=e.x,a=e.y,s=e.z;t[0]=.282095,t[1]=.488603*a,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*a,t[5]=1.092548*a*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-a*a)}}class zR extends Yf{constructor(e=new hT,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class X1 extends oo{constructor(e){super(e),this.textures={}}load(e,t,n,a){const s=this,o=new Pu(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(c){try{t(s.parse(JSON.parse(c)))}catch(f){a?a(f):rn(f),s.manager.itemError(e)}},n,a)}parse(e){const t=this.textures;function n(s){return t[s]===void 0&&It("MaterialLoader: Undefined texture",s),t[s]}const a=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(a.uuid=e.uuid),e.name!==void 0&&(a.name=e.name),e.color!==void 0&&a.color!==void 0&&a.color.setHex(e.color),e.roughness!==void 0&&(a.roughness=e.roughness),e.metalness!==void 0&&(a.metalness=e.metalness),e.sheen!==void 0&&(a.sheen=e.sheen),e.sheenColor!==void 0&&(a.sheenColor=new Ht().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(a.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&a.emissive!==void 0&&a.emissive.setHex(e.emissive),e.specular!==void 0&&a.specular!==void 0&&a.specular.setHex(e.specular),e.specularIntensity!==void 0&&(a.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&a.specularColor!==void 0&&a.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(a.shininess=e.shininess),e.clearcoat!==void 0&&(a.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(a.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(a.dispersion=e.dispersion),e.iridescence!==void 0&&(a.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(a.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(a.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(a.transmission=e.transmission),e.thickness!==void 0&&(a.thickness=e.thickness),e.attenuationDistance!==void 0&&(a.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&a.attenuationColor!==void 0&&a.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(a.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(a.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(a.fog=e.fog),e.flatShading!==void 0&&(a.flatShading=e.flatShading),e.blending!==void 0&&(a.blending=e.blending),e.combine!==void 0&&(a.combine=e.combine),e.side!==void 0&&(a.side=e.side),e.shadowSide!==void 0&&(a.shadowSide=e.shadowSide),e.opacity!==void 0&&(a.opacity=e.opacity),e.transparent!==void 0&&(a.transparent=e.transparent),e.alphaTest!==void 0&&(a.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(a.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(a.depthFunc=e.depthFunc),e.depthTest!==void 0&&(a.depthTest=e.depthTest),e.depthWrite!==void 0&&(a.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(a.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(a.blendSrc=e.blendSrc),e.blendDst!==void 0&&(a.blendDst=e.blendDst),e.blendEquation!==void 0&&(a.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(a.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(a.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(a.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&a.blendColor!==void 0&&a.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(a.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(a.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(a.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(a.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(a.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(a.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(a.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(a.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(a.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(a.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(a.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(a.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(a.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(a.rotation=e.rotation),e.linewidth!==void 0&&(a.linewidth=e.linewidth),e.dashSize!==void 0&&(a.dashSize=e.dashSize),e.gapSize!==void 0&&(a.gapSize=e.gapSize),e.scale!==void 0&&(a.scale=e.scale),e.polygonOffset!==void 0&&(a.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(a.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(a.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(a.dithering=e.dithering),e.alphaToCoverage!==void 0&&(a.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(a.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(a.forceSinglePass=e.forceSinglePass),e.allowOverride!==void 0&&(a.allowOverride=e.allowOverride),e.visible!==void 0&&(a.visible=e.visible),e.toneMapped!==void 0&&(a.toneMapped=e.toneMapped),e.userData!==void 0&&(a.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?a.vertexColors=e.vertexColors>0:a.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(a.uniforms[s]={},o.type){case"t":a.uniforms[s].value=n(o.value);break;case"c":a.uniforms[s].value=new Ht().setHex(o.value);break;case"v2":a.uniforms[s].value=new dt().fromArray(o.value);break;case"v3":a.uniforms[s].value=new pe().fromArray(o.value);break;case"v4":a.uniforms[s].value=new Ri().fromArray(o.value);break;case"m3":a.uniforms[s].value=new En().fromArray(o.value);break;case"m4":a.uniforms[s].value=new gn().fromArray(o.value);break;default:a.uniforms[s].value=o.value}}if(e.defines!==void 0&&(a.defines=e.defines),e.vertexShader!==void 0&&(a.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(a.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(a.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)a.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(a.lights=e.lights),e.clipping!==void 0&&(a.clipping=e.clipping),e.size!==void 0&&(a.size=e.size),e.sizeAttenuation!==void 0&&(a.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(a.map=n(e.map)),e.matcap!==void 0&&(a.matcap=n(e.matcap)),e.alphaMap!==void 0&&(a.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(a.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(a.bumpScale=e.bumpScale),e.normalMap!==void 0&&(a.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(a.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),a.normalScale=new dt().fromArray(s)}return e.displacementMap!==void 0&&(a.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(a.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(a.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(a.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(a.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(a.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(a.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(a.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(a.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(a.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(a.envMap=n(e.envMap)),e.envMapRotation!==void 0&&a.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(a.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(a.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(a.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(a.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(a.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(a.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(a.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(a.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(a.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(a.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(a.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(a.clearcoatNormalScale=new dt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(a.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(a.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(a.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(a.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(a.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(a.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(a.sheenRoughnessMap=n(e.sheenRoughnessMap)),a}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return X1.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:yR,SpriteMaterial:Z2,RawShaderMaterial:sT,ShaderMaterial:pl,PointsMaterial:Q2,MeshPhysicalMaterial:_R,MeshStandardMaterial:rT,MeshPhongMaterial:xR,MeshToonMaterial:SR,MeshNormalMaterial:bR,MeshLambertMaterial:TR,MeshDepthMaterial:W1,MeshDistanceMaterial:q1,MeshBasicMaterial:Fu,MeshMatcapMaterial:MR,LineDashedMaterial:AR,LineBasicMaterial:Hr,Material:lr};return new t[e]}}class Pb{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class dT extends wn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class BR extends oo{constructor(e){super(e)}load(e,t,n,a){const s=this,o=new Pu(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(c){try{t(s.parse(JSON.parse(c)))}catch(f){a?a(f):rn(f),s.manager.itemError(e)}},n,a)}parse(e){const t={},n={};function a(b,M){if(t[M]!==void 0)return t[M];const C=b.interleavedBuffers[M],E=s(b,C.buffer),N=Np(C.type,E),I=new C1(N,C.stride);return I.uuid=C.uuid,t[M]=I,I}function s(b,M){if(n[M]!==void 0)return n[M];const C=b.arrayBuffers[M],E=new Uint32Array(C).buffer;return n[M]=E,E}const o=e.isInstancedBufferGeometry?new dT:new wn,c=e.data.index;if(c!==void 0){const b=Np(c.type,c.array);o.setIndex(new Pi(b,1))}const f=e.data.attributes;for(const b in f){const M=f[b];let R;if(M.isInterleavedBufferAttribute){const C=a(e.data,M.data);R=new cd(C,M.itemSize,M.offset,M.normalized)}else{const C=Np(M.type,M.array),E=M.isInstancedBufferAttribute?ud:Pi;R=new E(C,M.itemSize,M.normalized)}M.name!==void 0&&(R.name=M.name),M.usage!==void 0&&R.setUsage(M.usage),o.setAttribute(b,R)}const d=e.data.morphAttributes;if(d)for(const b in d){const M=d[b],R=[];for(let C=0,E=M.length;C<E;C++){const N=M[C];let I;if(N.isInterleavedBufferAttribute){const z=a(e.data,N.data);I=new cd(z,N.itemSize,N.offset,N.normalized)}else{const z=Np(N.type,N.array);I=new Pi(z,N.itemSize,N.normalized)}N.name!==void 0&&(I.name=N.name),R.push(I)}o.morphAttributes[b]=R}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const y=e.data.groups||e.data.drawcalls||e.data.offsets;if(y!==void 0)for(let b=0,M=y.length;b!==M;++b){const R=y[b];o.addGroup(R.start,R.count,R.materialIndex)}const x=e.data.boundingSphere;return x!==void 0&&(o.boundingSphere=new As().fromJSON(x)),e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class tI extends oo{constructor(e){super(e)}load(e,t,n,a){const s=this,o=this.path===""?Pb.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const c=new Pu(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(f){let d=null;try{d=JSON.parse(f)}catch(y){a!==void 0&&a(y),y("ObjectLoader: Can't parse "+e+".",y.message);return}const g=d.metadata;if(g===void 0||g.type===void 0||g.type.toLowerCase()==="geometry"){a!==void 0&&a(new Error("THREE.ObjectLoader: Can't load "+e)),rn("ObjectLoader: Can't load "+e);return}s.parse(d,t)},n,a)}async loadAsync(e,t){const n=this,a=this.path===""?Pb.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const s=new Pu(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),c=JSON.parse(o),f=c.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(c)}parse(e,t){const n=this.parseAnimations(e.animations),a=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,a),o=this.parseImages(e.images,function(){t!==void 0&&t(d)}),c=this.parseTextures(e.textures,o),f=this.parseMaterials(e.materials,c),d=this.parseObject(e.object,s,f,c,n),g=this.parseSkeletons(e.skeletons,d);if(this.bindSkeletons(d,g),this.bindLightTargets(d),t!==void 0){let y=!1;for(const x in o)if(o[x].data instanceof HTMLImageElement){y=!0;break}y===!1&&t(d)}return d}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,n),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),c=this.parseMaterials(e.materials,o),f=this.parseObject(e.object,a,c,o,t),d=this.parseSkeletons(e.skeletons,f);return this.bindSkeletons(f,d),this.bindLightTargets(f),f}parseShapes(e){const t={};if(e!==void 0)for(let n=0,a=e.length;n<a;n++){const s=new id().fromJSON(e[n]);t[s.uuid]=s}return t}parseSkeletons(e,t){const n={},a={};if(t.traverse(function(s){s.isBone&&(a[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const c=new R1().fromJSON(e[s],a);n[c.uuid]=c}return n}parseGeometries(e,t){const n={};if(e!==void 0){const a=new BR;for(let s=0,o=e.length;s<o;s++){let c;const f=e[s];switch(f.type){case"BufferGeometry":case"InstancedBufferGeometry":c=a.parse(f);break;default:f.type in sE?c=sE[f.type].fromJSON(f,t):It(`ObjectLoader: Unsupported geometry type "${f.type}"`)}c.uuid=f.uuid,f.name!==void 0&&(c.name=f.name),f.userData!==void 0&&(c.userData=f.userData),n[f.uuid]=c}}return n}parseMaterials(e,t){const n={},a={};if(e!==void 0){const s=new X1;s.setTextures(t);for(let o=0,c=e.length;o<c;o++){const f=e[o];n[f.uuid]===void 0&&(n[f.uuid]=s.parse(f)),a[f.uuid]=n[f.uuid]}}return a}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const a=e[n],s=g0.parse(a);t[s.uuid]=s}return t}parseImages(e,t){const n=this,a={};let s;function o(f){return n.manager.itemStart(f),s.load(f,function(){n.manager.itemEnd(f)},void 0,function(){n.manager.itemError(f),n.manager.itemEnd(f)})}function c(f){if(typeof f=="string"){const d=f,g=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:n.resourcePath+d;return o(g)}else return f.data?{data:Np(f.type,f.data),width:f.width,height:f.height}:null}if(e!==void 0&&e.length>0){const f=new uT(t);s=new v0(f),s.setCrossOrigin(this.crossOrigin);for(let d=0,g=e.length;d<g;d++){const y=e[d],x=y.url;if(Array.isArray(x)){const b=[];for(let M=0,R=x.length;M<R;M++){const C=x[M],E=c(C);E!==null&&(E instanceof HTMLImageElement?b.push(E):b.push(new $l(E.data,E.width,E.height)))}a[y.uuid]=new Bf(b)}else{const b=c(y.url);a[y.uuid]=new Bf(b)}}}return a}async parseImagesAsync(e){const t=this,n={};let a;async function s(o){if(typeof o=="string"){const c=o,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:t.resourcePath+c;return await a.loadAsync(f)}else return o.data?{data:Np(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){a=new v0(this.manager),a.setCrossOrigin(this.crossOrigin);for(let o=0,c=e.length;o<c;o++){const f=e[o],d=f.url;if(Array.isArray(d)){const g=[];for(let y=0,x=d.length;y<x;y++){const b=d[y],M=await s(b);M!==null&&(M instanceof HTMLImageElement?g.push(M):g.push(new $l(M.data,M.width,M.height)))}n[f.uuid]=new Bf(g)}else{const g=await s(f.url);n[f.uuid]=new Bf(g)}}}return n}parseTextures(e,t){function n(s,o){return typeof s=="number"?s:(It("ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const a={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const c=e[s];c.image===void 0&&It('ObjectLoader: No "image" specified for',c.uuid),t[c.image]===void 0&&It("ObjectLoader: Undefined image",c.image);const f=t[c.image],d=f.data;let g;Array.isArray(d)?(g=new R0,d.length===6&&(g.needsUpdate=!0)):(d&&d.data?g=new $l:g=new pa,d&&(g.needsUpdate=!0)),g.source=f,g.uuid=c.uuid,c.name!==void 0&&(g.name=c.name),c.mapping!==void 0&&(g.mapping=n(c.mapping,nI)),c.channel!==void 0&&(g.channel=c.channel),c.offset!==void 0&&g.offset.fromArray(c.offset),c.repeat!==void 0&&g.repeat.fromArray(c.repeat),c.center!==void 0&&g.center.fromArray(c.center),c.rotation!==void 0&&(g.rotation=c.rotation),c.wrap!==void 0&&(g.wrapS=n(c.wrap[0],lE),g.wrapT=n(c.wrap[1],lE)),c.format!==void 0&&(g.format=c.format),c.internalFormat!==void 0&&(g.internalFormat=c.internalFormat),c.type!==void 0&&(g.type=c.type),c.colorSpace!==void 0&&(g.colorSpace=c.colorSpace),c.minFilter!==void 0&&(g.minFilter=n(c.minFilter,cE)),c.magFilter!==void 0&&(g.magFilter=n(c.magFilter,cE)),c.anisotropy!==void 0&&(g.anisotropy=c.anisotropy),c.flipY!==void 0&&(g.flipY=c.flipY),c.generateMipmaps!==void 0&&(g.generateMipmaps=c.generateMipmaps),c.premultiplyAlpha!==void 0&&(g.premultiplyAlpha=c.premultiplyAlpha),c.unpackAlignment!==void 0&&(g.unpackAlignment=c.unpackAlignment),c.compareFunction!==void 0&&(g.compareFunction=c.compareFunction),c.userData!==void 0&&(g.userData=c.userData),a[c.uuid]=g}return a}parseObject(e,t,n,a,s){let o;function c(x){return t[x]===void 0&&It("ObjectLoader: Undefined geometry",x),t[x]}function f(x){if(x!==void 0){if(Array.isArray(x)){const b=[];for(let M=0,R=x.length;M<R;M++){const C=x[M];n[C]===void 0&&It("ObjectLoader: Undefined material",C),b.push(n[C])}return b}return n[x]===void 0&&It("ObjectLoader: Undefined material",x),n[x]}}function d(x){return a[x]===void 0&&It("ObjectLoader: Undefined texture",x),a[x]}let g,y;switch(e.type){case"Scene":o=new Y2,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Ht(e.background):o.background=d(e.background)),e.environment!==void 0&&(o.environment=d(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new w1(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new E1(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new fa(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new ec(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new IR(e.color,e.intensity);break;case"DirectionalLight":o=new UR(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new NR(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new PR(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new OR(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new LR(e.color,e.groundColor,e.intensity);break;case"LightProbe":const x=new hT().fromArray(e.sh);o=new zR(x,e.intensity);break;case"SkinnedMesh":g=c(e.geometry),y=f(e.material),o=new eR(g,y),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":g=c(e.geometry),y=f(e.material),o=new ma(g,y);break;case"InstancedMesh":g=c(e.geometry),y=f(e.material);const b=e.count,M=e.instanceMatrix,R=e.instanceColor;o=new tR(g,y,b),o.instanceMatrix=new ud(new Float32Array(M.array),16),R!==void 0&&(o.instanceColor=new ud(new Float32Array(R.array),R.itemSize));break;case"BatchedMesh":g=c(e.geometry),y=f(e.material),o=new nR(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,y),o.geometry=g,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._geometryInfo=e.geometryInfo.map(C=>{let E=null,N=null;return C.boundingBox!==void 0&&(E=new Ms().fromJSON(C.boundingBox)),C.boundingSphere!==void 0&&(N=new As().fromJSON(C.boundingSphere)),{...C,boundingBox:E,boundingSphere:N}}),o._instanceInfo=e.instanceInfo,o._availableInstanceIds=e._availableInstanceIds,o._availableGeometryIds=e._availableGeometryIds,o._nextIndexStart=e.nextIndexStart,o._nextVertexStart=e.nextVertexStart,o._geometryCount=e.geometryCount,o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._matricesTexture=d(e.matricesTexture.uuid),o._indirectTexture=d(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=d(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(o.boundingSphere=new As().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(o.boundingBox=new Ms().fromJSON(e.boundingBox));break;case"LOD":o=new $C;break;case"Line":o=new Gf(c(e.geometry),f(e.material));break;case"LineLoop":o=new iR(c(e.geometry),f(e.material));break;case"LineSegments":o=new jc(c(e.geometry),f(e.material));break;case"PointCloud":case"Points":o=new aR(c(e.geometry),f(e.material));break;case"Sprite":o=new JC(f(e.material));break;case"Group":o=new Up;break;case"Bone":o=new K2;break;default:o=new li}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const x=e.children;for(let b=0;b<x.length;b++)o.add(this.parseObject(x[b],t,n,a,s))}if(e.animations!==void 0){const x=e.animations;for(let b=0;b<x.length;b++){const M=x[b];o.animations.push(s[M])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const x=e.levels;for(let b=0;b<x.length;b++){const M=x[b],R=o.getObjectByProperty("uuid",M.object);R!==void 0&&o.addLevel(R,M.distance,M.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const a=t[n.skeleton];a===void 0?It("ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(a,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,a=e.getObjectByProperty("uuid",n);a!==void 0?t.target=a:t.target=new li}})}}const nI={UVMapping:d1,CubeReflectionMapping:Vc,CubeRefractionMapping:kf,EquirectangularReflectionMapping:t0,EquirectangularRefractionMapping:n0,CubeUVReflectionMapping:am},lE={RepeatWrapping:i0,ClampToEdgeWrapping:ao,MirroredRepeatWrapping:a0},cE={NearestFilter:Ba,NearestMipmapNearestFilter:U2,NearestMipmapLinearFilter:Op,LinearFilter:Di,LinearMipmapNearestFilter:Fg,LinearMipmapLinearFilter:Ic},wS=new WeakMap;class iI extends oo{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&It("ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&It("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,n,a){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Pc.get(`image-bitmap:${e}`);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(d=>{if(wS.has(o)===!0)a&&a(wS.get(o)),s.manager.itemError(e),s.manager.itemEnd(e);else return t&&t(d),s.manager.itemEnd(e),d});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const c={};c.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",c.headers=this.requestHeader,c.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const f=fetch(e,c).then(function(d){return d.blob()}).then(function(d){return createImageBitmap(d,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(d){return Pc.add(`image-bitmap:${e}`,d),t&&t(d),s.manager.itemEnd(e),d}).catch(function(d){a&&a(d),wS.set(f,d),Pc.remove(`image-bitmap:${e}`),s.manager.itemError(e),s.manager.itemEnd(e)});Pc.add(`image-bitmap:${e}`,f),s.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let by,pT=class{static getContext(){return by===void 0&&(by=new(window.AudioContext||window.webkitAudioContext)),by}static setContext(e){by=e}};class aI extends oo{constructor(e){super(e)}load(e,t,n,a){const s=this,o=new Pu(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(f){try{const d=f.slice(0);pT.getContext().decodeAudioData(d,function(y){t(y)}).catch(c)}catch(d){c(d)}},n,a);function c(f){a?a(f):rn(f),s.manager.itemError(e)}}}const uE=new gn,fE=new gn,Uh=new gn;class sI{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new fa,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new fa,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Uh.copy(e.projectionMatrix);const a=t.eyeSep/2,s=a*t.near/t.focus,o=t.near*Math.tan(nd*t.fov*.5)/t.zoom;let c,f;fE.elements[12]=-a,uE.elements[12]=a,c=-o*t.aspect+s,f=o*t.aspect+s,Uh.elements[0]=2*t.near/(f-c),Uh.elements[8]=(f+c)/(f-c),this.cameraL.projectionMatrix.copy(Uh),c=-o*t.aspect-s,f=o*t.aspect-s,Uh.elements[0]=2*t.near/(f-c),Uh.elements[8]=(f+c)/(f-c),this.cameraR.projectionMatrix.copy(Uh)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(fE),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(uE)}}class FR extends fa{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}let mT=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};const Ih=new pe,CS=new or,rI=new pe,Ph=new pe,zh=new pe;class oI extends li{constructor(){super(),this.type="AudioListener",this.context=pT.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new mT}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ih,CS,rI),Ph.set(0,0,-1).applyQuaternion(CS),zh.set(0,1,0).applyQuaternion(CS),t.positionX){const n=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Ih.x,n),t.positionY.linearRampToValueAtTime(Ih.y,n),t.positionZ.linearRampToValueAtTime(Ih.z,n),t.forwardX.linearRampToValueAtTime(Ph.x,n),t.forwardY.linearRampToValueAtTime(Ph.y,n),t.forwardZ.linearRampToValueAtTime(Ph.z,n),t.upX.linearRampToValueAtTime(zh.x,n),t.upY.linearRampToValueAtTime(zh.y,n),t.upZ.linearRampToValueAtTime(zh.z,n)}else t.setPosition(Ih.x,Ih.y,Ih.z),t.setOrientation(Ph.x,Ph.y,Ph.z,zh.x,zh.y,zh.z)}}let kR=class extends li{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){It("Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){It("Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){It("Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){It("Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){It("Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(It("Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){It("Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(It("Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}};const Bh=new pe,hE=new or,lI=new pe,Fh=new pe;class cI extends kR{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Bh,hE,lI),Fh.set(0,0,1).applyQuaternion(hE);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Bh.x,n),t.positionY.linearRampToValueAtTime(Bh.y,n),t.positionZ.linearRampToValueAtTime(Bh.z,n),t.orientationX.linearRampToValueAtTime(Fh.x,n),t.orientationY.linearRampToValueAtTime(Fh.y,n),t.orientationZ.linearRampToValueAtTime(Fh.z,n)}else t.setPosition(Bh.x,Bh.y,Bh.z),t.setOrientation(Fh.x,Fh.y,Fh.z)}}class uI{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class VR{constructor(e,t,n){this.binding=e,this.valueSize=n;let a,s,o;switch(t){case"quaternion":a=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":a=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:a=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=a,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,a=this.valueSize,s=e*a+a;let o=this.cumulativeWeight;if(o===0){for(let c=0;c!==a;++c)n[s+c]=n[c];o=t}else{o+=t;const c=t/o;this._mixBufferRegion(n,s,0,c,a)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,a=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,a,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,a=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,c=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const f=t*this._origIndex;this._mixBufferRegion(n,a,f,1-s,t)}o>0&&this._mixBufferRegionAdditive(n,a,this._addIndex*t,1,t);for(let f=t,d=t+t;f!==d;++f)if(n[f]!==n[f+t]){c.setValue(n,a);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,a=n*this._origIndex;e.getValue(t,a);for(let s=n,o=a;s!==o;++s)t[s]=t[a+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,a,s){if(a>=.5)for(let o=0;o!==s;++o)e[t+o]=e[n+o]}_slerp(e,t,n,a){or.slerpFlat(e,t,e,t,e,n,a)}_slerpAdditive(e,t,n,a,s){const o=this._workIndex*s;or.multiplyQuaternionsFlat(e,o,e,t,e,n),or.slerpFlat(e,t,e,t,e,o,a)}_lerp(e,t,n,a,s){const o=1-a;for(let c=0;c!==s;++c){const f=t+c;e[f]=e[f]*o+e[n+c]*a}}_lerpAdditive(e,t,n,a,s){for(let o=0;o!==s;++o){const c=t+o;e[c]=e[c]+e[n+o]*a}}}const gT="\\[\\]\\.:\\/",fI=new RegExp("["+gT+"]","g"),vT="[^"+gT+"]",hI="[^"+gT.replace("\\.","")+"]",dI=/((?:WC+[\/:])*)/.source.replace("WC",vT),pI=/(WCOD+)?/.source.replace("WCOD",hI),mI=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",vT),gI=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",vT),vI=new RegExp("^"+dI+pI+mI+gI+"$"),yI=["material","materials","bones","map"];class _I{constructor(e,t,n){const a=n||oi.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,a)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,a=this._bindings[n];a!==void 0&&a.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let a=this._targetGroup.nCachedObjects_,s=n.length;a!==s;++a)n[a].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class oi{constructor(e,t,n){this.path=t,this.parsedPath=n||oi.parseTrackName(t),this.node=oi.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new oi.Composite(e,t,n):new oi(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(fI,"")}static parseTrackName(e){const t=vI.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},a=n.nodeName&&n.nodeName.lastIndexOf(".");if(a!==void 0&&a!==-1){const s=n.nodeName.substring(a+1);yI.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,a),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let o=0;o<s.length;o++){const c=s[o];if(c.name===t||c.uuid===t)return c;const f=n(c.children);if(f)return f}return null},a=n(e.children);if(a)return a}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let a=0,s=n.length;a!==s;++a)e[t++]=n[a]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let a=0,s=n.length;a!==s;++a)n[a]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let a=0,s=n.length;a!==s;++a)n[a]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let a=0,s=n.length;a!==s;++a)n[a]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,a=t.propertyName;let s=t.propertyIndex;if(e||(e=oi.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){It("PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let d=t.objectIndex;switch(n){case"materials":if(!e.material){rn("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){rn("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){rn("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let g=0;g<e.length;g++)if(e[g].name===d){d=g;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){rn("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){rn("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){rn("PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(d!==void 0){if(e[d]===void 0){rn("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[d]}}const o=e[a];if(o===void 0){const d=t.nodeName;rn("PropertyBinding: Trying to update property for track: "+d+"."+a+" but it wasn't found.",e);return}let c=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?c=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let f=this.BindingType.Direct;if(s!==void 0){if(a==="morphTargetInfluences"){if(!e.geometry){rn("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){rn("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}f=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(f=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(f=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=a;this.getValue=this.GetterByBindingType[f],this.setValue=this.SetterByBindingTypeAndVersioning[f][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}oi.Composite=_I;oi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};oi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};oi.prototype.GetterByBindingType=[oi.prototype._getValue_direct,oi.prototype._getValue_array,oi.prototype._getValue_arrayElement,oi.prototype._getValue_toArray];oi.prototype.SetterByBindingTypeAndVersioning=[[oi.prototype._setValue_direct,oi.prototype._setValue_direct_setNeedsUpdate,oi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[oi.prototype._setValue_array,oi.prototype._setValue_array_setNeedsUpdate,oi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[oi.prototype._setValue_arrayElement,oi.prototype._setValue_arrayElement_setNeedsUpdate,oi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[oi.prototype._setValue_fromArray,oi.prototype._setValue_fromArray_setNeedsUpdate,oi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class xI{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ko(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,a=arguments.length;n!==a;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,a=this._parsedPaths,s=this._bindings,o=s.length;let c,f=e.length,d=this.nCachedObjects_;for(let g=0,y=arguments.length;g!==y;++g){const x=arguments[g],b=x.uuid;let M=t[b];if(M===void 0){M=f++,t[b]=M,e.push(x);for(let R=0,C=o;R!==C;++R)s[R].push(new oi(x,n[R],a[R]))}else if(M<d){c=e[M];const R=--d,C=e[R];t[C.uuid]=M,e[M]=C,t[b]=R,e[R]=x;for(let E=0,N=o;E!==N;++E){const I=s[E],z=I[R];let F=I[M];I[M]=z,F===void 0&&(F=new oi(x,n[E],a[E])),I[R]=F}}else e[M]!==c&&rn("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=d}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,a=n.length;let s=this.nCachedObjects_;for(let o=0,c=arguments.length;o!==c;++o){const f=arguments[o],d=f.uuid,g=t[d];if(g!==void 0&&g>=s){const y=s++,x=e[y];t[x.uuid]=g,e[g]=x,t[d]=y,e[y]=f;for(let b=0,M=a;b!==M;++b){const R=n[b],C=R[y],E=R[g];R[g]=C,R[y]=E}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,a=n.length;let s=this.nCachedObjects_,o=e.length;for(let c=0,f=arguments.length;c!==f;++c){const d=arguments[c],g=d.uuid,y=t[g];if(y!==void 0)if(delete t[g],y<s){const x=--s,b=e[x],M=--o,R=e[M];t[b.uuid]=y,e[y]=b,t[R.uuid]=x,e[x]=R,e.pop();for(let C=0,E=a;C!==E;++C){const N=n[C],I=N[x],z=N[M];N[y]=I,N[x]=z,N.pop()}}else{const x=--o,b=e[x];x>0&&(t[b.uuid]=y),e[y]=b,e.pop();for(let M=0,R=a;M!==R;++M){const C=n[M];C[y]=C[x],C.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const n=this._bindingsIndicesByPath;let a=n[e];const s=this._bindings;if(a!==void 0)return s[a];const o=this._paths,c=this._parsedPaths,f=this._objects,d=f.length,g=this.nCachedObjects_,y=new Array(d);a=s.length,n[e]=a,o.push(e),c.push(t),s.push(y);for(let x=g,b=f.length;x!==b;++x){const M=f[x];y[x]=new oi(M,e,t)}return y}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const a=this._paths,s=this._parsedPaths,o=this._bindings,c=o.length-1,f=o[c],d=e[c];t[d]=n,o[n]=f,o.pop(),s[n]=s[c],s.pop(),a[n]=a[c],a.pop()}}}class HR{constructor(e,t,n=null,a=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=a;const s=t.tracks,o=s.length,c=new Array(o),f={endingStart:Kh,endingEnd:Kh};for(let d=0;d!==o;++d){const g=s[d].createInterpolant(null);c[d]=g,g.settings=f}this._interpolantSettings=f,this._interpolants=c,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=NC,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n=!1){if(e.fadeOut(t),this.fadeIn(t),n===!0){const a=this._clip.duration,s=e._clip.duration,o=s/a,c=a/s;e.warp(1,o,t),this.warp(c,1,t)}return this}crossFadeTo(e,t,n=!1){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const a=this._mixer,s=a.time,o=this.timeScale;let c=this._timeScaleInterpolant;c===null&&(c=a._lendControlInterpolant(),this._timeScaleInterpolant=c);const f=c.parameterPositions,d=c.sampleValues;return f[0]=s,f[1]=s+n,d[0]=e/o,d[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,a){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const f=(e-s)*n;f<0||n===0?t=0:(this._startTime=null,t=n*f)}t*=this._updateTimeScale(e);const o=this._updateTime(t),c=this._updateWeight(e);if(c>0){const f=this._interpolants,d=this._propertyBindings;switch(this.blendMode){case V2:for(let g=0,y=f.length;g!==y;++g)f[g].evaluate(o),d[g].accumulateAdditive(c);break;case x1:default:for(let g=0,y=f.length;g!==y;++g)f[g].evaluate(o),d[g].accumulate(a,c)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const a=n.evaluate(e)[0];t*=a,e>n.parameterPositions[1]&&(this.stopFading(),a===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const a=n.evaluate(e)[0];t*=a,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let a=this.time+e,s=this._loopCount;const o=n===UC;if(e===0)return s===-1?a:o&&(s&1)===1?t-a:a;if(n===OC){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(a>=t)a=t;else if(a<0)a=0;else{this.time=a;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),a>=t||a<0){const c=Math.floor(a/t);a-=t*c,s+=Math.abs(c);const f=this.repetitions-s;if(f<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,a=e>0?t:0,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(f===1){const d=e<0;this._setEndings(d,!d,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=a,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:c})}}else this.time=a;if(o&&(s&1)===1)return t-a}return a}_setEndings(e,t,n){const a=this._interpolantSettings;n?(a.endingStart=Qh,a.endingEnd=Qh):(e?a.endingStart=this.zeroSlopeAtStart?Qh:Kh:a.endingStart=r0,t?a.endingEnd=this.zeroSlopeAtEnd?Qh:Kh:a.endingEnd=r0)}_scheduleFading(e,t,n){const a=this._mixer,s=a.time;let o=this._weightInterpolant;o===null&&(o=a._lendControlInterpolant(),this._weightInterpolant=o);const c=o.parameterPositions,f=o.sampleValues;return c[0]=s,f[0]=t,c[1]=s+e,f[1]=n,this}}const SI=new Float32Array(1);class bI extends Gc{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,a=e._clip.tracks,s=a.length,o=e._propertyBindings,c=e._interpolants,f=n.uuid,d=this._bindingsByRootAndName;let g=d[f];g===void 0&&(g={},d[f]=g);for(let y=0;y!==s;++y){const x=a[y],b=x.name;let M=g[b];if(M!==void 0)++M.referenceCount,o[y]=M;else{if(M=o[y],M!==void 0){M._cacheIndex===null&&(++M.referenceCount,this._addInactiveBinding(M,f,b));continue}const R=t&&t._propertyBindings[y].binding.parsedPath;M=new VR(oi.create(n,b,R),x.ValueTypeName,x.getValueSize()),++M.referenceCount,this._addInactiveBinding(M,f,b),o[y]=M}c[y].resultBuffer=M.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,a=e._clip.uuid,s=this._actionsByClip[a];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,a,n)}const t=e._propertyBindings;for(let n=0,a=t.length;n!==a;++n){const s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,a=t.length;n!==a;++n){const s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const a=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const c=o.knownActions;e._byClipCacheIndex=c.length,c.push(e)}e._cacheIndex=a.length,a.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],a=e._cacheIndex;n._cacheIndex=a,t[a]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,c=o[s],f=c.knownActions,d=f[f.length-1],g=e._byClipCacheIndex;d._byClipCacheIndex=g,f[g]=d,f.pop(),e._byClipCacheIndex=null;const y=c.actionByRoot,x=(e._localRoot||this._root).uuid;delete y[x],f.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,a=t.length;n!==a;++n){const s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,a=this._nActiveActions++,s=t[a];e._cacheIndex=a,t[a]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,a=--this._nActiveActions,s=t[a];e._cacheIndex=a,t[a]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const a=this._bindingsByRootAndName,s=this._bindings;let o=a[t];o===void 0&&(o={},a[t]=o),o[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,a=n.rootNode.uuid,s=n.path,o=this._bindingsByRootAndName,c=o[a],f=t[t.length-1],d=e._cacheIndex;f._cacheIndex=d,t[d]=f,t.pop(),delete c[s],Object.keys(c).length===0&&delete o[a]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,a=this._nActiveBindings++,s=t[a];e._cacheIndex=a,t[a]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,a=--this._nActiveBindings,s=t[a];e._cacheIndex=a,t[a]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new lT(new Float32Array(2),new Float32Array(2),1,SI),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,a=--this._nActiveControlInterpolants,s=t[a];e.__cacheIndex=a,t[a]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const a=t||this._root,s=a.uuid;let o=typeof e=="string"?g0.findByName(a,e):e;const c=o!==null?o.uuid:e,f=this._actionsByClip[c];let d=null;if(n===void 0&&(o!==null?n=o.blendMode:n=x1),f!==void 0){const y=f.actionByRoot[s];if(y!==void 0&&y.blendMode===n)return y;d=f.knownActions[0],o===null&&(o=d._clip)}if(o===null)return null;const g=new HR(this,o,t,n);return this._bindAction(g,d),this._addInactiveAction(g,c,s),g}existingAction(e,t){const n=t||this._root,a=n.uuid,s=typeof e=="string"?g0.findByName(n,e):e,o=s?s.uuid:e,c=this._actionsByClip[o];return c!==void 0&&c.actionByRoot[a]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,a=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let d=0;d!==n;++d)t[d]._update(a,e,s,o);const c=this._bindings,f=this._nActiveBindings;for(let d=0;d!==f;++d)c[d].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,a=this._actionsByClip,s=a[n];if(s!==void 0){const o=s.knownActions;for(let c=0,f=o.length;c!==f;++c){const d=o[c];this._deactivateAction(d);const g=d._cacheIndex,y=t[t.length-1];d._cacheIndex=null,d._byClipCacheIndex=null,y._cacheIndex=g,t[g]=y,t.pop(),this._removeInactiveBindingsForAction(d)}delete a[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const o in n){const c=n[o].actionByRoot,f=c[t];f!==void 0&&(this._deactivateAction(f),this._removeInactiveAction(f))}const a=this._bindingsByRootAndName,s=a[t];if(s!==void 0)for(const o in s){const c=s[o];c.restoreOriginalState(),this._removeInactiveBinding(c)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class TI extends G2{constructor(e=1,t=1,n=1,a={}){super(e,t,a),this.isRenderTarget3D=!0,this.depth=n,this.texture=new M1(null,e,t,n),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class yT{constructor(e){this.value=e}clone(){return new yT(this.value.clone===void 0?this.value:this.value.clone())}}let MI=0;class AI extends Gc{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:MI++}),this.name="",this.usage=l0,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,a=t.length;n<a;n++){const s=Array.isArray(t[n])?t[n]:[t[n]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class EI extends C1{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class wI{constructor(e,t,n,a,s,o=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=a,this.count=s,this.normalized=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const dE=new gn;class GR{constructor(e,t,n=0,a=1/0){this.ray=new md(e,t),this.near=n,this.far=a,this.camera=null,this.layers=new Zp,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):rn("Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return dE.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(dE),this}intersectObject(e,t=!0,n=[]){return zb(e,this,n,t),n.sort(pE),n}intersectObjects(e,t=!0,n=[]){for(let a=0,s=e.length;a<s;a++)zb(e[a],this,n,t);return n.sort(pE),n}}function pE(i,e){return i.distance-e.distance}function zb(i,e,t,n){let a=!0;if(i.layers.test(e.layers)&&i.raycast(e,t)===!1&&(a=!1),a===!0&&n===!0){const s=i.children;for(let o=0,c=s.length;o<c;o++)zb(s[o],e,t,!0)}}class CI{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=RI.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function RI(){this._document.hidden===!1&&this.reset()}class Bb{constructor(e=1,t=0,n=0){this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=mn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(mn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class DI{constructor(e=1,t=0,n=0){this.radius=e,this.theta=t,this.y=n}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class _T{constructor(e,t,n,a){_T.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,a)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,a){const s=this.elements;return s[0]=e,s[2]=t,s[1]=n,s[3]=a,this}}const mE=new dt;class LI{constructor(e=new dt(1/0,1/0),t=new dt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=mE.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,mE).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const gE=new pe,Ty=new pe,Mp=new pe,Ap=new pe,RS=new pe,OI=new pe,NI=new pe;class UI{constructor(e=new pe,t=new pe){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){gE.subVectors(e,this.start),Ty.subVectors(this.end,this.start);const n=Ty.dot(Ty);let s=Ty.dot(gE)/n;return t&&(s=mn(s,0,1)),s}closestPointToPoint(e,t,n){const a=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(a).add(this.start)}distanceSqToLine3(e,t=OI,n=NI){const a=10000000000000001e-32;let s,o;const c=this.start,f=e.start,d=this.end,g=e.end;Mp.subVectors(d,c),Ap.subVectors(g,f),RS.subVectors(c,f);const y=Mp.dot(Mp),x=Ap.dot(Ap),b=Ap.dot(RS);if(y<=a&&x<=a)return t.copy(c),n.copy(f),t.sub(n),t.dot(t);if(y<=a)s=0,o=b/x,o=mn(o,0,1);else{const M=Mp.dot(RS);if(x<=a)o=0,s=mn(-M/y,0,1);else{const R=Mp.dot(Ap),C=y*x-R*R;C!==0?s=mn((R*b-M*x)/C,0,1):s=0,o=(R*s+b)/x,o<0?(o=0,s=mn(-M/y,0,1)):o>1&&(o=1,s=mn((R-M)/y,0,1))}}return t.copy(c).add(Mp.multiplyScalar(s)),n.copy(f).add(Ap.multiplyScalar(o)),t.sub(n),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const vE=new pe;class II extends li{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new wn,a=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,c=1,f=32;o<f;o++,c++){const d=o/f*Math.PI*2,g=c/f*Math.PI*2;a.push(Math.cos(d),Math.sin(d),1,Math.cos(g),Math.sin(g),1)}n.setAttribute("position",new Zt(a,3));const s=new Hr({fog:!1,toneMapped:!1});this.cone=new jc(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),vE.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(vE),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Of=new pe,My=new gn,DS=new gn;class PI extends jc{constructor(e){const t=jR(e),n=new wn,a=[],s=[];for(let d=0;d<t.length;d++){const g=t[d];g.parent&&g.parent.isBone&&(a.push(0,0,0),a.push(0,0,0),s.push(0,0,0),s.push(0,0,0))}n.setAttribute("position",new Zt(a,3)),n.setAttribute("color",new Zt(s,3));const o=new Hr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,o),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const c=new Ht(255),f=new Ht(65280);this.setColors(c,f)}updateMatrixWorld(e){const t=this.bones,n=this.geometry,a=n.getAttribute("position");DS.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const c=t[s];c.parent&&c.parent.isBone&&(My.multiplyMatrices(DS,c.matrixWorld),Of.setFromMatrixPosition(My),a.setXYZ(o,Of.x,Of.y,Of.z),My.multiplyMatrices(DS,c.parent.matrixWorld),Of.setFromMatrixPosition(My),a.setXYZ(o+1,Of.x,Of.y,Of.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const a=this.geometry.getAttribute("color");for(let s=0;s<a.count;s+=2)a.setXYZ(s,e.r,e.g,e.b),a.setXYZ(s+1,t.r,t.g,t.b);return a.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function jR(i){const e=[];i.isBone===!0&&e.push(i);for(let t=0;t<i.children.length;t++)e.push(...jR(i.children[t]));return e}class zI extends ma{constructor(e,t,n){const a=new N0(t,4,2),s=new Fu({wireframe:!0,fog:!1,toneMapped:!1});super(a,s),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const BI=new pe,yE=new Ht,_E=new Ht;class FI extends li{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const a=new O0(t);a.rotateY(Math.PI*.5),this.material=new Fu({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=a.getAttribute("position"),o=new Float32Array(s.count*3);a.setAttribute("color",new Pi(o,3)),this.add(new ma(a,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");yE.copy(this.light.color),_E.copy(this.light.groundColor);for(let n=0,a=t.count;n<a;n++){const s=n<a/2?yE:_E;t.setXYZ(n,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(BI.setFromMatrixPosition(this.light.matrixWorld).negate())}}class kI extends jc{constructor(e=10,t=10,n=4473924,a=8947848){n=new Ht(n),a=new Ht(a);const s=t/2,o=e/t,c=e/2,f=[],d=[];for(let x=0,b=0,M=-c;x<=t;x++,M+=o){f.push(-c,0,M,c,0,M),f.push(M,0,-c,M,0,c);const R=x===s?n:a;R.toArray(d,b),b+=3,R.toArray(d,b),b+=3,R.toArray(d,b),b+=3,R.toArray(d,b),b+=3}const g=new wn;g.setAttribute("position",new Zt(f,3)),g.setAttribute("color",new Zt(d,3));const y=new Hr({vertexColors:!0,toneMapped:!1});super(g,y),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class VI extends jc{constructor(e=10,t=16,n=8,a=64,s=4473924,o=8947848){s=new Ht(s),o=new Ht(o);const c=[],f=[];if(t>1)for(let y=0;y<t;y++){const x=y/t*(Math.PI*2),b=Math.sin(x)*e,M=Math.cos(x)*e;c.push(0,0,0),c.push(b,0,M);const R=y&1?s:o;f.push(R.r,R.g,R.b),f.push(R.r,R.g,R.b)}for(let y=0;y<n;y++){const x=y&1?s:o,b=e-e/n*y;for(let M=0;M<a;M++){let R=M/a*(Math.PI*2),C=Math.sin(R)*b,E=Math.cos(R)*b;c.push(C,0,E),f.push(x.r,x.g,x.b),R=(M+1)/a*(Math.PI*2),C=Math.sin(R)*b,E=Math.cos(R)*b,c.push(C,0,E),f.push(x.r,x.g,x.b)}}const d=new wn;d.setAttribute("position",new Zt(c,3)),d.setAttribute("color",new Zt(f,3));const g=new Hr({vertexColors:!0,toneMapped:!1});super(d,g),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const xE=new pe,Ay=new pe,SE=new pe;class HI extends li{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let a=new wn;a.setAttribute("position",new Zt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Hr({fog:!1,toneMapped:!1});this.lightPlane=new Gf(a,s),this.add(this.lightPlane),a=new wn,a.setAttribute("position",new Zt([0,0,0,0,0,1],3)),this.targetLine=new Gf(a,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),xE.setFromMatrixPosition(this.light.matrixWorld),Ay.setFromMatrixPosition(this.light.target.matrixWorld),SE.subVectors(Ay,xE),this.lightPlane.lookAt(Ay),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Ay),this.targetLine.scale.z=SE.length()}}const Ey=new pe,Ea=new A1;class GI extends jc{constructor(e){const t=new wn,n=new Hr({color:16777215,vertexColors:!0,toneMapped:!1}),a=[],s=[],o={};c("n1","n2"),c("n2","n4"),c("n4","n3"),c("n3","n1"),c("f1","f2"),c("f2","f4"),c("f4","f3"),c("f3","f1"),c("n1","f1"),c("n2","f2"),c("n3","f3"),c("n4","f4"),c("p","n1"),c("p","n2"),c("p","n3"),c("p","n4"),c("u1","u2"),c("u2","u3"),c("u3","u1"),c("c","t"),c("p","c"),c("cn1","cn2"),c("cn3","cn4"),c("cf1","cf2"),c("cf3","cf4");function c(M,R){f(M),f(R)}function f(M){a.push(0,0,0),s.push(0,0,0),o[M]===void 0&&(o[M]=[]),o[M].push(a.length/3-1)}t.setAttribute("position",new Zt(a,3)),t.setAttribute("color",new Zt(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const d=new Ht(16755200),g=new Ht(16711680),y=new Ht(43775),x=new Ht(16777215),b=new Ht(3355443);this.setColors(d,g,y,x,b)}setColors(e,t,n,a,s){const c=this.geometry.getAttribute("color");return c.setXYZ(0,e.r,e.g,e.b),c.setXYZ(1,e.r,e.g,e.b),c.setXYZ(2,e.r,e.g,e.b),c.setXYZ(3,e.r,e.g,e.b),c.setXYZ(4,e.r,e.g,e.b),c.setXYZ(5,e.r,e.g,e.b),c.setXYZ(6,e.r,e.g,e.b),c.setXYZ(7,e.r,e.g,e.b),c.setXYZ(8,e.r,e.g,e.b),c.setXYZ(9,e.r,e.g,e.b),c.setXYZ(10,e.r,e.g,e.b),c.setXYZ(11,e.r,e.g,e.b),c.setXYZ(12,e.r,e.g,e.b),c.setXYZ(13,e.r,e.g,e.b),c.setXYZ(14,e.r,e.g,e.b),c.setXYZ(15,e.r,e.g,e.b),c.setXYZ(16,e.r,e.g,e.b),c.setXYZ(17,e.r,e.g,e.b),c.setXYZ(18,e.r,e.g,e.b),c.setXYZ(19,e.r,e.g,e.b),c.setXYZ(20,e.r,e.g,e.b),c.setXYZ(21,e.r,e.g,e.b),c.setXYZ(22,e.r,e.g,e.b),c.setXYZ(23,e.r,e.g,e.b),c.setXYZ(24,t.r,t.g,t.b),c.setXYZ(25,t.r,t.g,t.b),c.setXYZ(26,t.r,t.g,t.b),c.setXYZ(27,t.r,t.g,t.b),c.setXYZ(28,t.r,t.g,t.b),c.setXYZ(29,t.r,t.g,t.b),c.setXYZ(30,t.r,t.g,t.b),c.setXYZ(31,t.r,t.g,t.b),c.setXYZ(32,n.r,n.g,n.b),c.setXYZ(33,n.r,n.g,n.b),c.setXYZ(34,n.r,n.g,n.b),c.setXYZ(35,n.r,n.g,n.b),c.setXYZ(36,n.r,n.g,n.b),c.setXYZ(37,n.r,n.g,n.b),c.setXYZ(38,a.r,a.g,a.b),c.setXYZ(39,a.r,a.g,a.b),c.setXYZ(40,s.r,s.g,s.b),c.setXYZ(41,s.r,s.g,s.b),c.setXYZ(42,s.r,s.g,s.b),c.setXYZ(43,s.r,s.g,s.b),c.setXYZ(44,s.r,s.g,s.b),c.setXYZ(45,s.r,s.g,s.b),c.setXYZ(46,s.r,s.g,s.b),c.setXYZ(47,s.r,s.g,s.b),c.setXYZ(48,s.r,s.g,s.b),c.setXYZ(49,s.r,s.g,s.b),c.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,n=1,a=1;let s,o;if(Ea.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)s=1,o=0;else if(this.camera.coordinateSystem===Fo)s=-1,o=1;else if(this.camera.coordinateSystem===qp)s=0,o=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);za("c",t,e,Ea,0,0,s),za("t",t,e,Ea,0,0,o),za("n1",t,e,Ea,-n,-a,s),za("n2",t,e,Ea,n,-a,s),za("n3",t,e,Ea,-n,a,s),za("n4",t,e,Ea,n,a,s),za("f1",t,e,Ea,-n,-a,o),za("f2",t,e,Ea,n,-a,o),za("f3",t,e,Ea,-n,a,o),za("f4",t,e,Ea,n,a,o),za("u1",t,e,Ea,n*.7,a*1.1,s),za("u2",t,e,Ea,-n*.7,a*1.1,s),za("u3",t,e,Ea,0,a*2,s),za("cf1",t,e,Ea,-n,0,o),za("cf2",t,e,Ea,n,0,o),za("cf3",t,e,Ea,0,-a,o),za("cf4",t,e,Ea,0,a,o),za("cn1",t,e,Ea,-n,0,s),za("cn2",t,e,Ea,n,0,s),za("cn3",t,e,Ea,0,-a,s),za("cn4",t,e,Ea,0,a,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function za(i,e,t,n,a,s,o){Ey.set(a,s,o).unproject(n);const c=e[i];if(c!==void 0){const f=t.getAttribute("position");for(let d=0,g=c.length;d<g;d++)f.setXYZ(c[d],Ey.x,Ey.y,Ey.z)}}const wy=new Ms;class jI extends jc{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=new Float32Array(24),s=new wn;s.setIndex(new Pi(n,1)),s.setAttribute("position",new Pi(a,3)),super(s,new Hr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&wy.setFromObject(this.object),wy.isEmpty())return;const e=wy.min,t=wy.max,n=this.geometry.attributes.position,a=n.array;a[0]=t.x,a[1]=t.y,a[2]=t.z,a[3]=e.x,a[4]=t.y,a[5]=t.z,a[6]=e.x,a[7]=e.y,a[8]=t.z,a[9]=t.x,a[10]=e.y,a[11]=t.z,a[12]=t.x,a[13]=t.y,a[14]=e.z,a[15]=e.x,a[16]=t.y,a[17]=e.z,a[18]=e.x,a[19]=e.y,a[20]=e.z,a[21]=t.x,a[22]=e.y,a[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class WI extends jc{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new wn;s.setIndex(new Pi(n,1)),s.setAttribute("position",new Zt(a,3)),super(s,new Hr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class qI extends Gf{constructor(e,t=1,n=16776960){const a=n,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new wn;o.setAttribute("position",new Zt(s,3)),o.computeBoundingSphere(),super(o,new Hr({color:a,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const c=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],f=new wn;f.setAttribute("position",new Zt(c,3)),f.computeBoundingSphere(),this.add(new ma(f,new Fu({color:a,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const bE=new pe;let Cy,LS;class XI extends li{constructor(e=new pe(0,0,1),t=new pe(0,0,0),n=1,a=16776960,s=n*.2,o=s*.2){super(),this.type="ArrowHelper",Cy===void 0&&(Cy=new wn,Cy.setAttribute("position",new Zt([0,0,0,0,1,0],3)),LS=new L0(.5,1,5,1),LS.translate(0,-.5,0)),this.position.copy(t),this.line=new Gf(Cy,new Hr({color:a,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ma(LS,new Fu({color:a,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{bE.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(bE,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class YI extends jc{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],a=new wn;a.setAttribute("position",new Zt(t,3)),a.setAttribute("color",new Zt(n,3));const s=new Hr({vertexColors:!0,toneMapped:!1});super(a,s),this.type="AxesHelper"}setColors(e,t,n){const a=new Ht,s=this.geometry.attributes.color.array;return a.set(e),a.toArray(s,0),a.toArray(s,3),a.set(t),a.toArray(s,6),a.toArray(s,9),a.set(n),a.toArray(s,12),a.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ZI{constructor(){this.type="ShapePath",this.color=new Ht,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Z_,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,a){return this.currentPath.quadraticCurveTo(e,t,n,a),this}bezierCurveTo(e,t,n,a,s,o){return this.currentPath.bezierCurveTo(e,t,n,a,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(E){const N=[];for(let I=0,z=E.length;I<z;I++){const F=E[I],V=new id;V.curves=F.curves,N.push(V)}return N}function n(E,N){const I=N.length;let z=!1;for(let F=I-1,V=0;V<I;F=V++){let W=N[F],Z=N[V],B=Z.x-W.x,H=Z.y-W.y;if(Math.abs(H)>Number.EPSILON){if(H<0&&(W=N[V],B=-B,Z=N[F],H=-H),E.y<W.y||E.y>Z.y)continue;if(E.y===W.y){if(E.x===W.x)return!0}else{const Q=H*(E.x-W.x)-B*(E.y-W.y);if(Q===0)return!0;if(Q<0)continue;z=!z}}else{if(E.y!==W.y)continue;if(Z.x<=E.x&&E.x<=W.x||W.x<=E.x&&E.x<=Z.x)return!0}}return z}const a=Jl.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,c,f;const d=[];if(s.length===1)return c=s[0],f=new id,f.curves=c.curves,d.push(f),d;let g=!a(s[0].getPoints());g=e?!g:g;const y=[],x=[];let b=[],M=0,R;x[M]=void 0,b[M]=[];for(let E=0,N=s.length;E<N;E++)c=s[E],R=c.getPoints(),o=a(R),o=e?!o:o,o?(!g&&x[M]&&M++,x[M]={s:new id,p:R},x[M].s.curves=c.curves,g&&M++,b[M]=[]):b[M].push({h:c,p:R[0]});if(!x[0])return t(s);if(x.length>1){let E=!1,N=0;for(let I=0,z=x.length;I<z;I++)y[I]=[];for(let I=0,z=x.length;I<z;I++){const F=b[I];for(let V=0;V<F.length;V++){const W=F[V];let Z=!0;for(let B=0;B<x.length;B++)n(W.p,x[B].p)&&(I!==B&&N++,Z?(Z=!1,y[B].push(W)):E=!0);Z&&y[I].push(W)}}N>0&&E===!1&&(b=y)}let C;for(let E=0,N=x.length;E<N;E++){f=x[E].s,d.push(f),C=b[E];for(let I=0,z=C.length;I<z;I++)f.holes.push(C[I].h)}return d}}class KI extends Gc{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){It("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function QI(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function JI(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function $I(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function Fb(i,e,t,n){const a=eP(n);switch(t){case F2:return i*e;case v1:return i*e/a.components*a.byteLength;case C0:return i*e/a.components*a.byteLength;case ld:return i*e*2/a.components*a.byteLength;case y1:return i*e*2/a.components*a.byteLength;case k2:return i*e*3/a.components*a.byteLength;case sr:return i*e*4/a.components*a.byteLength;case _1:return i*e*4/a.components*a.byteLength;case kg:case Vg:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case Hg:case Gg:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case p_:case g_:return Math.max(i,16)*Math.max(e,8)/4;case d_:case m_:return Math.max(i,8)*Math.max(e,8)/2;case v_:case y_:case x_:case S_:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case __:case b_:case T_:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case M_:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case A_:return Math.floor((i+4)/5)*Math.floor((e+3)/4)*16;case E_:return Math.floor((i+4)/5)*Math.floor((e+4)/5)*16;case w_:return Math.floor((i+5)/6)*Math.floor((e+4)/5)*16;case C_:return Math.floor((i+5)/6)*Math.floor((e+5)/6)*16;case R_:return Math.floor((i+7)/8)*Math.floor((e+4)/5)*16;case D_:return Math.floor((i+7)/8)*Math.floor((e+5)/6)*16;case L_:return Math.floor((i+7)/8)*Math.floor((e+7)/8)*16;case O_:return Math.floor((i+9)/10)*Math.floor((e+4)/5)*16;case N_:return Math.floor((i+9)/10)*Math.floor((e+5)/6)*16;case U_:return Math.floor((i+9)/10)*Math.floor((e+7)/8)*16;case I_:return Math.floor((i+9)/10)*Math.floor((e+9)/10)*16;case P_:return Math.floor((i+11)/12)*Math.floor((e+9)/10)*16;case z_:return Math.floor((i+11)/12)*Math.floor((e+11)/12)*16;case B_:case F_:case k_:return Math.ceil(i/4)*Math.ceil(e/4)*16;case V_:case H_:return Math.ceil(i/4)*Math.ceil(e/4)*8;case G_:case j_:return Math.ceil(i/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function eP(i){switch(i){case Br:case I2:return{byteLength:1,components:1};case jp:case P2:case tc:return{byteLength:2,components:1};case m1:case g1:return{byteLength:2,components:4};case dl:case p1:case ar:return{byteLength:4,components:1};case z2:case B2:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}class tP{static contain(e,t){return QI(e,t)}static cover(e,t){return JI(e,t)}static fill(e){return $I(e)}static getByteLength(e,t,n,a){return Fb(e,t,n,a)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:f1}}));typeof window<"u"&&(window.__THREE__?It("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=f1);function WR(){let i=null,e=!1,t=null,n=null;function a(s,o){t(s,o),n=i.requestAnimationFrame(a)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(a),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){i=s}}}function nP(i){const e=new WeakMap;function t(c,f){const d=c.array,g=c.usage,y=d.byteLength,x=i.createBuffer();i.bindBuffer(f,x),i.bufferData(f,d,g),c.onUploadCallback();let b;if(d instanceof Float32Array)b=i.FLOAT;else if(typeof Float16Array<"u"&&d instanceof Float16Array)b=i.HALF_FLOAT;else if(d instanceof Uint16Array)c.isFloat16BufferAttribute?b=i.HALF_FLOAT:b=i.UNSIGNED_SHORT;else if(d instanceof Int16Array)b=i.SHORT;else if(d instanceof Uint32Array)b=i.UNSIGNED_INT;else if(d instanceof Int32Array)b=i.INT;else if(d instanceof Int8Array)b=i.BYTE;else if(d instanceof Uint8Array)b=i.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)b=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:x,type:b,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version,size:y}}function n(c,f,d){const g=f.array,y=f.updateRanges;if(i.bindBuffer(d,c),y.length===0)i.bufferSubData(d,0,g);else{y.sort((b,M)=>b.start-M.start);let x=0;for(let b=1;b<y.length;b++){const M=y[x],R=y[b];R.start<=M.start+M.count+1?M.count=Math.max(M.count,R.start+R.count-M.start):(++x,y[x]=R)}y.length=x+1;for(let b=0,M=y.length;b<M;b++){const R=y[b];i.bufferSubData(d,R.start*g.BYTES_PER_ELEMENT,g,R.start,R.count)}f.clearUpdateRanges()}f.onUploadCallback()}function a(c){return c.isInterleavedBufferAttribute&&(c=c.data),e.get(c)}function s(c){c.isInterleavedBufferAttribute&&(c=c.data);const f=e.get(c);f&&(i.deleteBuffer(f.buffer),e.delete(c))}function o(c,f){if(c.isInterleavedBufferAttribute&&(c=c.data),c.isGLBufferAttribute){const g=e.get(c);(!g||g.version<c.version)&&e.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}const d=e.get(c);if(d===void 0)e.set(c,t(c,f));else if(d.version<c.version){if(d.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(d.buffer,c,f),d.version=c.version}}return{get:a,remove:s,update:o}}var iP=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,aP=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,sP=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,rP=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,oP=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,lP=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,cP=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,uP=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,fP=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,hP=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,dP=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,pP=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,mP=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,gP=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,vP=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,yP=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,_P=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,xP=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,SP=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,bP=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,TP=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,MP=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,AP=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,EP=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,wP=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,CP=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,RP=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,DP=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,LP=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,OP=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,NP="gl_FragColor = linearToOutputTexel( gl_FragColor );",UP=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,IP=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,PP=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,zP=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,BP=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,FP=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,kP=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,VP=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,HP=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,GP=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,jP=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,WP=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,qP=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,XP=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,YP=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,ZP=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,KP=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,QP=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,JP=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,$P=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,ez=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.diffuseContribution = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.metalness = metalnessFactor;
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor;
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = vec3( 0.04 );
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.0001, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,tz=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	vec3 diffuseContribution;
	vec3 specularColor;
	vec3 specularColorBlended;
	float roughness;
	float metalness;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
		vec3 iridescenceFresnelDielectric;
		vec3 iridescenceFresnelMetallic;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return v;
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColorBlended;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float rInv = 1.0 / ( roughness + 0.1 );
	float a = -1.9362 + 1.0678 * roughness + 0.4573 * r2 - 0.8469 * rInv;
	float b = -0.6014 + 0.5538 * roughness - 0.4670 * r2 - 0.1255 * rInv;
	float DG = exp( a * dotNV + b );
	return saturate( DG );
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = texture2D( dfgLUT, vec2( material.roughness, dotNV ) ).rg;
	vec2 dfgL = texture2D( dfgLUT, vec2( material.roughness, dotNL ) ).rg;
	vec3 FssEss_V = material.specularColorBlended * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColorBlended * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColorBlended + ( 1.0 - material.specularColorBlended ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColorBlended * t2.x + ( vec3( 1.0 ) - material.specularColorBlended ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseContribution * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
 
 		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
 
 		float sheenAlbedoV = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
 		float sheenAlbedoL = IBLSheenBRDF( geometryNormal, directLight.direction, material.sheenRoughness );
 
 		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * max( sheenAlbedoV, sheenAlbedoL );
 
 		irradiance *= sheenEnergyComp;
 
 	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseContribution );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 diffuse = irradiance * BRDF_Lambert( material.diffuseContribution );
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		diffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectDiffuse += diffuse;
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness ) * RECIPROCAL_PI;
 	#endif
	vec3 singleScatteringDielectric = vec3( 0.0 );
	vec3 multiScatteringDielectric = vec3( 0.0 );
	vec3 singleScatteringMetallic = vec3( 0.0 );
	vec3 multiScatteringMetallic = vec3( 0.0 );
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnelDielectric, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.iridescence, material.iridescenceFresnelMetallic, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscattering( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#endif
	vec3 singleScattering = mix( singleScatteringDielectric, singleScatteringMetallic, material.metalness );
	vec3 multiScattering = mix( multiScatteringDielectric, multiScatteringMetallic, material.metalness );
	vec3 totalScatteringDielectric = singleScatteringDielectric + multiScatteringDielectric;
	vec3 diffuse = material.diffuseContribution * ( 1.0 - totalScatteringDielectric );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	vec3 indirectSpecular = radiance * singleScattering;
	indirectSpecular += multiScattering * cosineWeightedIrradiance;
	vec3 indirectDiffuse = diffuse * cosineWeightedIrradiance;
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		indirectSpecular *= sheenEnergyComp;
		indirectDiffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectSpecular += indirectSpecular;
	reflectedLight.indirectDiffuse += indirectDiffuse;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,nz=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnelDielectric = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceFresnelMetallic = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.diffuseColor );
		material.iridescenceFresnel = mix( material.iridescenceFresnelDielectric, material.iridescenceFresnelMetallic, material.metalness );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS ) && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,iz=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,az=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,sz=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,rz=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,oz=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,lz=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,cz=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,uz=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,fz=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,hz=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,dz=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,pz=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,mz=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,gz=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,vz=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,yz=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,_z=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,xz=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Sz=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,bz=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Tz=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Mz=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Az=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Ez=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,wz=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Cz=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Rz=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Dz=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Lz=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Oz=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Nz=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Uz=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Iz=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Pz=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,zz=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Bz=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#else
			uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#endif
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#else
			uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#endif
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform samplerCubeShadow pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#elif defined( SHADOWMAP_TYPE_BASIC )
			uniform samplerCube pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#endif
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float interleavedGradientNoise( vec2 position ) {
			return fract( 52.9829189 * fract( dot( position, vec2( 0.06711056, 0.00583715 ) ) ) );
		}
		vec2 vogelDiskSample( int sampleIndex, int samplesCount, float phi ) {
			const float goldenAngle = 2.399963229728653;
			float r = sqrt( ( float( sampleIndex ) + 0.5 ) / float( samplesCount ) );
			float theta = float( sampleIndex ) * goldenAngle + phi;
			return vec2( cos( theta ), sin( theta ) ) * r;
		}
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float getShadow( sampler2DShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
				float radius = shadowRadius * texelSize.x;
				float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
				shadow = (
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 0, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 1, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 2, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 3, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 4, 5, phi ) * radius, shadowCoord.z ) )
				) * 0.2;
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#elif defined( SHADOWMAP_TYPE_VSM )
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 distribution = texture2D( shadowMap, shadowCoord.xy ).rg;
				float mean = distribution.x;
				float variance = distribution.y * distribution.y;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					float hard_shadow = step( mean, shadowCoord.z );
				#else
					float hard_shadow = step( shadowCoord.z, mean );
				#endif
				if ( hard_shadow == 1.0 ) {
					shadow = 1.0;
				} else {
					variance = max( variance, 0.0000001 );
					float d = shadowCoord.z - mean;
					float p_max = variance / ( variance + d * d );
					p_max = clamp( ( p_max - 0.3 ) / 0.65, 0.0, 1.0 );
					shadow = max( hard_shadow, p_max );
				}
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#else
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				float depth = texture2D( shadowMap, shadowCoord.xy ).r;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					shadow = step( depth, shadowCoord.z );
				#else
					shadow = step( shadowCoord.z, depth );
				#endif
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#if defined( SHADOWMAP_TYPE_PCF )
	float getPointShadow( samplerCubeShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float texelSize = shadowRadius / shadowMapSize.x;
			vec3 absDir = abs( bd3D );
			vec3 tangent = absDir.x > absDir.z ? vec3( 0.0, 1.0, 0.0 ) : vec3( 1.0, 0.0, 0.0 );
			tangent = normalize( cross( bd3D, tangent ) );
			vec3 bitangent = cross( bd3D, tangent );
			float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
			shadow = (
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 0, 5, phi ).x + bitangent * vogelDiskSample( 0, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 1, 5, phi ).x + bitangent * vogelDiskSample( 1, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 2, 5, phi ).x + bitangent * vogelDiskSample( 2, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 3, 5, phi ).x + bitangent * vogelDiskSample( 3, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 4, 5, phi ).x + bitangent * vogelDiskSample( 4, 5, phi ).y ) * texelSize, dp ) )
			) * 0.2;
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#elif defined( SHADOWMAP_TYPE_BASIC )
	float getPointShadow( samplerCube shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float depth = textureCube( shadowMap, bd3D ).r;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadow = step( depth, dp );
			#else
				shadow = step( dp, depth );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#endif
	#endif
#endif`,Fz=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,kz=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Vz=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0 && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Hz=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Gz=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,jz=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Wz=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,qz=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Xz=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Yz=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Zz=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Kz=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseContribution, material.specularColorBlended, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Qz=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Jz=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,$z=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,eB=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,tB=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const nB=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,iB=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,aB=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,sB=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,rB=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,oB=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,lB=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,cB=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,uB=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,fB=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = vec4( dist, 0.0, 0.0, 1.0 );
}`,hB=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,dB=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,pB=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,mB=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,gB=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,vB=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,yB=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_B=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xB=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,SB=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,bB=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,TB=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( normalize( normal ) * 0.5 + 0.5, diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,MB=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,AB=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,EB=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,wB=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
 
		outgoingLight = outgoingLight + sheenSpecularDirect + sheenSpecularIndirect;
 
 	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,CB=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,RB=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,DB=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,LB=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,OB=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,NB=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,UB=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,IB=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Ln={alphahash_fragment:iP,alphahash_pars_fragment:aP,alphamap_fragment:sP,alphamap_pars_fragment:rP,alphatest_fragment:oP,alphatest_pars_fragment:lP,aomap_fragment:cP,aomap_pars_fragment:uP,batching_pars_vertex:fP,batching_vertex:hP,begin_vertex:dP,beginnormal_vertex:pP,bsdfs:mP,iridescence_fragment:gP,bumpmap_pars_fragment:vP,clipping_planes_fragment:yP,clipping_planes_pars_fragment:_P,clipping_planes_pars_vertex:xP,clipping_planes_vertex:SP,color_fragment:bP,color_pars_fragment:TP,color_pars_vertex:MP,color_vertex:AP,common:EP,cube_uv_reflection_fragment:wP,defaultnormal_vertex:CP,displacementmap_pars_vertex:RP,displacementmap_vertex:DP,emissivemap_fragment:LP,emissivemap_pars_fragment:OP,colorspace_fragment:NP,colorspace_pars_fragment:UP,envmap_fragment:IP,envmap_common_pars_fragment:PP,envmap_pars_fragment:zP,envmap_pars_vertex:BP,envmap_physical_pars_fragment:ZP,envmap_vertex:FP,fog_vertex:kP,fog_pars_vertex:VP,fog_fragment:HP,fog_pars_fragment:GP,gradientmap_pars_fragment:jP,lightmap_pars_fragment:WP,lights_lambert_fragment:qP,lights_lambert_pars_fragment:XP,lights_pars_begin:YP,lights_toon_fragment:KP,lights_toon_pars_fragment:QP,lights_phong_fragment:JP,lights_phong_pars_fragment:$P,lights_physical_fragment:ez,lights_physical_pars_fragment:tz,lights_fragment_begin:nz,lights_fragment_maps:iz,lights_fragment_end:az,logdepthbuf_fragment:sz,logdepthbuf_pars_fragment:rz,logdepthbuf_pars_vertex:oz,logdepthbuf_vertex:lz,map_fragment:cz,map_pars_fragment:uz,map_particle_fragment:fz,map_particle_pars_fragment:hz,metalnessmap_fragment:dz,metalnessmap_pars_fragment:pz,morphinstance_vertex:mz,morphcolor_vertex:gz,morphnormal_vertex:vz,morphtarget_pars_vertex:yz,morphtarget_vertex:_z,normal_fragment_begin:xz,normal_fragment_maps:Sz,normal_pars_fragment:bz,normal_pars_vertex:Tz,normal_vertex:Mz,normalmap_pars_fragment:Az,clearcoat_normal_fragment_begin:Ez,clearcoat_normal_fragment_maps:wz,clearcoat_pars_fragment:Cz,iridescence_pars_fragment:Rz,opaque_fragment:Dz,packing:Lz,premultiplied_alpha_fragment:Oz,project_vertex:Nz,dithering_fragment:Uz,dithering_pars_fragment:Iz,roughnessmap_fragment:Pz,roughnessmap_pars_fragment:zz,shadowmap_pars_fragment:Bz,shadowmap_pars_vertex:Fz,shadowmap_vertex:kz,shadowmask_pars_fragment:Vz,skinbase_vertex:Hz,skinning_pars_vertex:Gz,skinning_vertex:jz,skinnormal_vertex:Wz,specularmap_fragment:qz,specularmap_pars_fragment:Xz,tonemapping_fragment:Yz,tonemapping_pars_fragment:Zz,transmission_fragment:Kz,transmission_pars_fragment:Qz,uv_pars_fragment:Jz,uv_pars_vertex:$z,uv_vertex:eB,worldpos_vertex:tB,background_vert:nB,background_frag:iB,backgroundCube_vert:aB,backgroundCube_frag:sB,cube_vert:rB,cube_frag:oB,depth_vert:lB,depth_frag:cB,distance_vert:uB,distance_frag:fB,equirect_vert:hB,equirect_frag:dB,linedashed_vert:pB,linedashed_frag:mB,meshbasic_vert:gB,meshbasic_frag:vB,meshlambert_vert:yB,meshlambert_frag:_B,meshmatcap_vert:xB,meshmatcap_frag:SB,meshnormal_vert:bB,meshnormal_frag:TB,meshphong_vert:MB,meshphong_frag:AB,meshphysical_vert:EB,meshphysical_frag:wB,meshtoon_vert:CB,meshtoon_frag:RB,points_vert:DB,points_frag:LB,shadow_vert:OB,shadow_frag:NB,sprite_vert:UB,sprite_frag:IB},Ft={common:{diffuse:{value:new Ht(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new En},alphaMap:{value:null},alphaMapTransform:{value:new En},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new En}},envmap:{envMap:{value:null},envMapRotation:{value:new En},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new En}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new En}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new En},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new En},normalScale:{value:new dt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new En},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new En}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new En}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new En}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ht(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ht(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new En},alphaTest:{value:0},uvTransform:{value:new En}},sprite:{diffuse:{value:new Ht(16777215)},opacity:{value:1},center:{value:new dt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new En},alphaMap:{value:null},alphaMapTransform:{value:new En},alphaTest:{value:0}}},Ql={basic:{uniforms:Ir([Ft.common,Ft.specularmap,Ft.envmap,Ft.aomap,Ft.lightmap,Ft.fog]),vertexShader:Ln.meshbasic_vert,fragmentShader:Ln.meshbasic_frag},lambert:{uniforms:Ir([Ft.common,Ft.specularmap,Ft.envmap,Ft.aomap,Ft.lightmap,Ft.emissivemap,Ft.bumpmap,Ft.normalmap,Ft.displacementmap,Ft.fog,Ft.lights,{emissive:{value:new Ht(0)}}]),vertexShader:Ln.meshlambert_vert,fragmentShader:Ln.meshlambert_frag},phong:{uniforms:Ir([Ft.common,Ft.specularmap,Ft.envmap,Ft.aomap,Ft.lightmap,Ft.emissivemap,Ft.bumpmap,Ft.normalmap,Ft.displacementmap,Ft.fog,Ft.lights,{emissive:{value:new Ht(0)},specular:{value:new Ht(1118481)},shininess:{value:30}}]),vertexShader:Ln.meshphong_vert,fragmentShader:Ln.meshphong_frag},standard:{uniforms:Ir([Ft.common,Ft.envmap,Ft.aomap,Ft.lightmap,Ft.emissivemap,Ft.bumpmap,Ft.normalmap,Ft.displacementmap,Ft.roughnessmap,Ft.metalnessmap,Ft.fog,Ft.lights,{emissive:{value:new Ht(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ln.meshphysical_vert,fragmentShader:Ln.meshphysical_frag},toon:{uniforms:Ir([Ft.common,Ft.aomap,Ft.lightmap,Ft.emissivemap,Ft.bumpmap,Ft.normalmap,Ft.displacementmap,Ft.gradientmap,Ft.fog,Ft.lights,{emissive:{value:new Ht(0)}}]),vertexShader:Ln.meshtoon_vert,fragmentShader:Ln.meshtoon_frag},matcap:{uniforms:Ir([Ft.common,Ft.bumpmap,Ft.normalmap,Ft.displacementmap,Ft.fog,{matcap:{value:null}}]),vertexShader:Ln.meshmatcap_vert,fragmentShader:Ln.meshmatcap_frag},points:{uniforms:Ir([Ft.points,Ft.fog]),vertexShader:Ln.points_vert,fragmentShader:Ln.points_frag},dashed:{uniforms:Ir([Ft.common,Ft.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ln.linedashed_vert,fragmentShader:Ln.linedashed_frag},depth:{uniforms:Ir([Ft.common,Ft.displacementmap]),vertexShader:Ln.depth_vert,fragmentShader:Ln.depth_frag},normal:{uniforms:Ir([Ft.common,Ft.bumpmap,Ft.normalmap,Ft.displacementmap,{opacity:{value:1}}]),vertexShader:Ln.meshnormal_vert,fragmentShader:Ln.meshnormal_frag},sprite:{uniforms:Ir([Ft.sprite,Ft.fog]),vertexShader:Ln.sprite_vert,fragmentShader:Ln.sprite_frag},background:{uniforms:{uvTransform:{value:new En},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ln.background_vert,fragmentShader:Ln.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new En}},vertexShader:Ln.backgroundCube_vert,fragmentShader:Ln.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ln.cube_vert,fragmentShader:Ln.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ln.equirect_vert,fragmentShader:Ln.equirect_frag},distance:{uniforms:Ir([Ft.common,Ft.displacementmap,{referencePosition:{value:new pe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ln.distance_vert,fragmentShader:Ln.distance_frag},shadow:{uniforms:Ir([Ft.lights,Ft.fog,{color:{value:new Ht(0)},opacity:{value:1}}]),vertexShader:Ln.shadow_vert,fragmentShader:Ln.shadow_frag}};Ql.physical={uniforms:Ir([Ql.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new En},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new En},clearcoatNormalScale:{value:new dt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new En},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new En},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new En},sheen:{value:0},sheenColor:{value:new Ht(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new En},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new En},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new En},transmissionSamplerSize:{value:new dt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new En},attenuationDistance:{value:0},attenuationColor:{value:new Ht(0)},specularColor:{value:new Ht(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new En},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new En},anisotropyVector:{value:new dt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new En}}]),vertexShader:Ln.meshphysical_vert,fragmentShader:Ln.meshphysical_frag};const Ry={r:0,b:0,g:0},kh=new Vo,PB=new gn;function zB(i,e,t,n,a,s,o){const c=new Ht(0);let f=s===!0?0:1,d,g,y=null,x=0,b=null;function M(I){let z=I.isScene===!0?I.background:null;return z&&z.isTexture&&(z=(I.backgroundBlurriness>0?t:e).get(z)),z}function R(I){let z=!1;const F=M(I);F===null?E(c,f):F&&F.isColor&&(E(F,1),z=!0);const V=i.xr.getEnvironmentBlendMode();V==="additive"?n.buffers.color.setClear(0,0,0,1,o):V==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,o),(i.autoClear||z)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function C(I,z){const F=M(z);F&&(F.isCubeTexture||F.mapping===am)?(g===void 0&&(g=new ma(new gd(1,1,1),new pl({name:"BackgroundCubeMaterial",uniforms:Kp(Ql.backgroundCube.uniforms),vertexShader:Ql.backgroundCube.vertexShader,fragmentShader:Ql.backgroundCube.fragmentShader,side:Vr,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),g.geometry.deleteAttribute("normal"),g.geometry.deleteAttribute("uv"),g.onBeforeRender=function(V,W,Z){this.matrixWorld.copyPosition(Z.matrixWorld)},Object.defineProperty(g.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(g)),kh.copy(z.backgroundRotation),kh.x*=-1,kh.y*=-1,kh.z*=-1,F.isCubeTexture&&F.isRenderTargetTexture===!1&&(kh.y*=-1,kh.z*=-1),g.material.uniforms.envMap.value=F,g.material.uniforms.flipEnvMap.value=F.isCubeTexture&&F.isRenderTargetTexture===!1?-1:1,g.material.uniforms.backgroundBlurriness.value=z.backgroundBlurriness,g.material.uniforms.backgroundIntensity.value=z.backgroundIntensity,g.material.uniforms.backgroundRotation.value.setFromMatrix4(PB.makeRotationFromEuler(kh)),g.material.toneMapped=Xn.getTransfer(F.colorSpace)!==Mi,(y!==F||x!==F.version||b!==i.toneMapping)&&(g.material.needsUpdate=!0,y=F,x=F.version,b=i.toneMapping),g.layers.enableAll(),I.unshift(g,g.geometry,g.material,0,0,null)):F&&F.isTexture&&(d===void 0&&(d=new ma(new ku(2,2),new pl({name:"BackgroundMaterial",uniforms:Kp(Ql.background.uniforms),vertexShader:Ql.background.vertexShader,fragmentShader:Ql.background.fragmentShader,side:Iu,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(d)),d.material.uniforms.t2D.value=F,d.material.uniforms.backgroundIntensity.value=z.backgroundIntensity,d.material.toneMapped=Xn.getTransfer(F.colorSpace)!==Mi,F.matrixAutoUpdate===!0&&F.updateMatrix(),d.material.uniforms.uvTransform.value.copy(F.matrix),(y!==F||x!==F.version||b!==i.toneMapping)&&(d.material.needsUpdate=!0,y=F,x=F.version,b=i.toneMapping),d.layers.enableAll(),I.unshift(d,d.geometry,d.material,0,0,null))}function E(I,z){I.getRGB(Ry,ZC(i)),n.buffers.color.setClear(Ry.r,Ry.g,Ry.b,z,o)}function N(){g!==void 0&&(g.geometry.dispose(),g.material.dispose(),g=void 0),d!==void 0&&(d.geometry.dispose(),d.material.dispose(),d=void 0)}return{getClearColor:function(){return c},setClearColor:function(I,z=1){c.set(I),f=z,E(c,f)},getClearAlpha:function(){return f},setClearAlpha:function(I){f=I,E(c,f)},render:R,addToRenderList:C,dispose:N}}function BB(i,e){const t=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},a=x(null);let s=a,o=!1;function c(H,Q,J,oe,re){let ve=!1;const q=y(oe,J,Q);s!==q&&(s=q,d(s.object)),ve=b(H,oe,J,re),ve&&M(H,oe,J,re),re!==null&&e.update(re,i.ELEMENT_ARRAY_BUFFER),(ve||o)&&(o=!1,z(H,Q,J,oe),re!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get(re).buffer))}function f(){return i.createVertexArray()}function d(H){return i.bindVertexArray(H)}function g(H){return i.deleteVertexArray(H)}function y(H,Q,J){const oe=J.wireframe===!0;let re=n[H.id];re===void 0&&(re={},n[H.id]=re);let ve=re[Q.id];ve===void 0&&(ve={},re[Q.id]=ve);let q=ve[oe];return q===void 0&&(q=x(f()),ve[oe]=q),q}function x(H){const Q=[],J=[],oe=[];for(let re=0;re<t;re++)Q[re]=0,J[re]=0,oe[re]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Q,enabledAttributes:J,attributeDivisors:oe,object:H,attributes:{},index:null}}function b(H,Q,J,oe){const re=s.attributes,ve=Q.attributes;let q=0;const K=J.getAttributes();for(const te in K)if(K[te].location>=0){const ce=re[te];let G=ve[te];if(G===void 0&&(te==="instanceMatrix"&&H.instanceMatrix&&(G=H.instanceMatrix),te==="instanceColor"&&H.instanceColor&&(G=H.instanceColor)),ce===void 0||ce.attribute!==G||G&&ce.data!==G.data)return!0;q++}return s.attributesNum!==q||s.index!==oe}function M(H,Q,J,oe){const re={},ve=Q.attributes;let q=0;const K=J.getAttributes();for(const te in K)if(K[te].location>=0){let ce=ve[te];ce===void 0&&(te==="instanceMatrix"&&H.instanceMatrix&&(ce=H.instanceMatrix),te==="instanceColor"&&H.instanceColor&&(ce=H.instanceColor));const G={};G.attribute=ce,ce&&ce.data&&(G.data=ce.data),re[te]=G,q++}s.attributes=re,s.attributesNum=q,s.index=oe}function R(){const H=s.newAttributes;for(let Q=0,J=H.length;Q<J;Q++)H[Q]=0}function C(H){E(H,0)}function E(H,Q){const J=s.newAttributes,oe=s.enabledAttributes,re=s.attributeDivisors;J[H]=1,oe[H]===0&&(i.enableVertexAttribArray(H),oe[H]=1),re[H]!==Q&&(i.vertexAttribDivisor(H,Q),re[H]=Q)}function N(){const H=s.newAttributes,Q=s.enabledAttributes;for(let J=0,oe=Q.length;J<oe;J++)Q[J]!==H[J]&&(i.disableVertexAttribArray(J),Q[J]=0)}function I(H,Q,J,oe,re,ve,q){q===!0?i.vertexAttribIPointer(H,Q,J,re,ve):i.vertexAttribPointer(H,Q,J,oe,re,ve)}function z(H,Q,J,oe){R();const re=oe.attributes,ve=J.getAttributes(),q=Q.defaultAttributeValues;for(const K in ve){const te=ve[K];if(te.location>=0){let de=re[K];if(de===void 0&&(K==="instanceMatrix"&&H.instanceMatrix&&(de=H.instanceMatrix),K==="instanceColor"&&H.instanceColor&&(de=H.instanceColor)),de!==void 0){const ce=de.normalized,G=de.itemSize,ne=e.get(de);if(ne===void 0)continue;const fe=ne.buffer,me=ne.type,xe=ne.bytesPerElement,he=me===i.INT||me===i.UNSIGNED_INT||de.gpuType===p1;if(de.isInterleavedBufferAttribute){const _e=de.data,Ae=_e.stride,$e=de.offset;if(_e.isInstancedInterleavedBuffer){for(let et=0;et<te.locationSize;et++)E(te.location+et,_e.meshPerAttribute);H.isInstancedMesh!==!0&&oe._maxInstanceCount===void 0&&(oe._maxInstanceCount=_e.meshPerAttribute*_e.count)}else for(let et=0;et<te.locationSize;et++)C(te.location+et);i.bindBuffer(i.ARRAY_BUFFER,fe);for(let et=0;et<te.locationSize;et++)I(te.location+et,G/te.locationSize,me,ce,Ae*xe,($e+G/te.locationSize*et)*xe,he)}else{if(de.isInstancedBufferAttribute){for(let _e=0;_e<te.locationSize;_e++)E(te.location+_e,de.meshPerAttribute);H.isInstancedMesh!==!0&&oe._maxInstanceCount===void 0&&(oe._maxInstanceCount=de.meshPerAttribute*de.count)}else for(let _e=0;_e<te.locationSize;_e++)C(te.location+_e);i.bindBuffer(i.ARRAY_BUFFER,fe);for(let _e=0;_e<te.locationSize;_e++)I(te.location+_e,G/te.locationSize,me,ce,G*xe,G/te.locationSize*_e*xe,he)}}else if(q!==void 0){const ce=q[K];if(ce!==void 0)switch(ce.length){case 2:i.vertexAttrib2fv(te.location,ce);break;case 3:i.vertexAttrib3fv(te.location,ce);break;case 4:i.vertexAttrib4fv(te.location,ce);break;default:i.vertexAttrib1fv(te.location,ce)}}}}N()}function F(){Z();for(const H in n){const Q=n[H];for(const J in Q){const oe=Q[J];for(const re in oe)g(oe[re].object),delete oe[re];delete Q[J]}delete n[H]}}function V(H){if(n[H.id]===void 0)return;const Q=n[H.id];for(const J in Q){const oe=Q[J];for(const re in oe)g(oe[re].object),delete oe[re];delete Q[J]}delete n[H.id]}function W(H){for(const Q in n){const J=n[Q];if(J[H.id]===void 0)continue;const oe=J[H.id];for(const re in oe)g(oe[re].object),delete oe[re];delete J[H.id]}}function Z(){B(),o=!0,s!==a&&(s=a,d(s.object))}function B(){a.geometry=null,a.program=null,a.wireframe=!1}return{setup:c,reset:Z,resetDefaultState:B,dispose:F,releaseStatesOfGeometry:V,releaseStatesOfProgram:W,initAttributes:R,enableAttribute:C,disableUnusedAttributes:N}}function FB(i,e,t){let n;function a(d){n=d}function s(d,g){i.drawArrays(n,d,g),t.update(g,n,1)}function o(d,g,y){y!==0&&(i.drawArraysInstanced(n,d,g,y),t.update(g,n,y))}function c(d,g,y){if(y===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,d,0,g,0,y);let b=0;for(let M=0;M<y;M++)b+=g[M];t.update(b,n,1)}function f(d,g,y,x){if(y===0)return;const b=e.get("WEBGL_multi_draw");if(b===null)for(let M=0;M<d.length;M++)o(d[M],g[M],x[M]);else{b.multiDrawArraysInstancedWEBGL(n,d,0,g,0,x,0,y);let M=0;for(let R=0;R<y;R++)M+=g[R]*x[R];t.update(M,n,1)}}this.setMode=a,this.render=s,this.renderInstances=o,this.renderMultiDraw=c,this.renderMultiDrawInstances=f}function kB(i,e,t,n){let a;function s(){if(a!==void 0)return a;if(e.has("EXT_texture_filter_anisotropic")===!0){const W=e.get("EXT_texture_filter_anisotropic");a=i.getParameter(W.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else a=0;return a}function o(W){return!(W!==sr&&n.convert(W)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function c(W){const Z=W===tc&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(W!==Br&&n.convert(W)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&W!==ar&&!Z)}function f(W){if(W==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";W="mediump"}return W==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let d=t.precision!==void 0?t.precision:"highp";const g=f(d);g!==d&&(It("WebGLRenderer:",d,"not supported, using",g,"instead."),d=g);const y=t.logarithmicDepthBuffer===!0,x=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),b=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),M=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),R=i.getParameter(i.MAX_TEXTURE_SIZE),C=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),E=i.getParameter(i.MAX_VERTEX_ATTRIBS),N=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),I=i.getParameter(i.MAX_VARYING_VECTORS),z=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),F=i.getParameter(i.MAX_SAMPLES),V=i.getParameter(i.SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:f,textureFormatReadable:o,textureTypeReadable:c,precision:d,logarithmicDepthBuffer:y,reversedDepthBuffer:x,maxTextures:b,maxVertexTextures:M,maxTextureSize:R,maxCubemapSize:C,maxAttributes:E,maxVertexUniforms:N,maxVaryings:I,maxFragmentUniforms:z,maxSamples:F,samples:V}}function VB(i){const e=this;let t=null,n=0,a=!1,s=!1;const o=new Ru,c=new En,f={value:null,needsUpdate:!1};this.uniform=f,this.numPlanes=0,this.numIntersection=0,this.init=function(y,x){const b=y.length!==0||x||n!==0||a;return a=x,n=y.length,b},this.beginShadows=function(){s=!0,g(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(y,x){t=g(y,x,0)},this.setState=function(y,x,b){const M=y.clippingPlanes,R=y.clipIntersection,C=y.clipShadows,E=i.get(y);if(!a||M===null||M.length===0||s&&!C)s?g(null):d();else{const N=s?0:n,I=N*4;let z=E.clippingState||null;f.value=z,z=g(M,x,I,b);for(let F=0;F!==I;++F)z[F]=t[F];E.clippingState=z,this.numIntersection=R?this.numPlanes:0,this.numPlanes+=N}};function d(){f.value!==t&&(f.value=t,f.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function g(y,x,b,M){const R=y!==null?y.length:0;let C=null;if(R!==0){if(C=f.value,M!==!0||C===null){const E=b+R*4,N=x.matrixWorldInverse;c.getNormalMatrix(N),(C===null||C.length<E)&&(C=new Float32Array(E));for(let I=0,z=b;I!==R;++I,z+=4)o.copy(y[I]).applyMatrix4(N,c),o.normal.toArray(C,z),C[z+3]=o.constant}f.value=C,f.needsUpdate=!0}return e.numPlanes=R,e.numIntersection=0,C}}function HB(i){let e=new WeakMap;function t(o,c){return c===t0?o.mapping=Vc:c===n0&&(o.mapping=kf),o}function n(o){if(o&&o.isTexture){const c=o.mapping;if(c===t0||c===n0)if(e.has(o)){const f=e.get(o).texture;return t(f,o.mapping)}else{const f=o.image;if(f&&f.height>0){const d=new X2(f.height);return d.fromEquirectangularTexture(i,o),e.set(o,d),o.addEventListener("dispose",a),t(d.texture,o.mapping)}else return null}}return o}function a(o){const c=o.target;c.removeEventListener("dispose",a);const f=e.get(c);f!==void 0&&(e.delete(c),f.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}const Ff=4,TE=[.125,.215,.35,.446,.526,.582],Yh=20,GB=256,Ag=new ec,ME=new Ht;let OS=null,NS=0,US=0,IS=!1;const jB=new pe;class kb{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,t=0,n=.1,a=100,s={}){const{size:o=256,position:c=jB}=s;OS=this._renderer.getRenderTarget(),NS=this._renderer.getActiveCubeFace(),US=this._renderer.getActiveMipmapLevel(),IS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const f=this._allocateTargets();return f.depthBuffer=!0,this._sceneToCubeUV(e,n,a,f,c),t>0&&this._blur(f,0,0,t),this._applyPMREM(f),this._cleanup(f),f}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=wE(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=EE(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(OS,NS,US),this._renderer.xr.enabled=IS,e.scissorTest=!1,Ep(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Vc||e.mapping===kf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),OS=this._renderer.getRenderTarget(),NS=this._renderer.getActiveCubeFace(),US=this._renderer.getActiveMipmapLevel(),IS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Di,minFilter:Di,generateMipmaps:!1,type:tc,format:sr,colorSpace:Vf,depthBuffer:!1},a=AE(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=AE(e,t,n);const{_lodMax:s}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=WB(s)),this._blurMaterial=XB(s,e,t),this._ggxMaterial=qB(s,e,t)}return a}_compileMaterial(e){const t=new ma(new wn,e);this._renderer.compile(t,Ag)}_sceneToCubeUV(e,t,n,a,s){const f=new fa(90,1,t,n),d=[1,-1,1,1,1,1],g=[1,1,1,-1,-1,-1],y=this._renderer,x=y.autoClear,b=y.toneMapping;y.getClearColor(ME),y.toneMapping=fl,y.autoClear=!1,y.state.buffers.depth.getReversed()&&(y.setRenderTarget(a),y.clearDepth(),y.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new ma(new gd,new Fu({name:"PMREM.Background",side:Vr,depthWrite:!1,depthTest:!1})));const R=this._backgroundBox,C=R.material;let E=!1;const N=e.background;N?N.isColor&&(C.color.copy(N),e.background=null,E=!0):(C.color.copy(ME),E=!0);for(let I=0;I<6;I++){const z=I%3;z===0?(f.up.set(0,d[I],0),f.position.set(s.x,s.y,s.z),f.lookAt(s.x+g[I],s.y,s.z)):z===1?(f.up.set(0,0,d[I]),f.position.set(s.x,s.y,s.z),f.lookAt(s.x,s.y+g[I],s.z)):(f.up.set(0,d[I],0),f.position.set(s.x,s.y,s.z),f.lookAt(s.x,s.y,s.z+g[I]));const F=this._cubeSize;Ep(a,z*F,I>2?F:0,F,F),y.setRenderTarget(a),E&&y.render(R,f),y.render(e,f)}y.toneMapping=b,y.autoClear=x,e.background=N}_textureToCubeUV(e,t){const n=this._renderer,a=e.mapping===Vc||e.mapping===kf;a?(this._cubemapMaterial===null&&(this._cubemapMaterial=wE()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=EE());const s=a?this._cubemapMaterial:this._equirectMaterial,o=this._lodMeshes[0];o.material=s;const c=s.uniforms;c.envMap.value=e;const f=this._cubeSize;Ep(t,0,0,3*f,2*f),n.setRenderTarget(t),n.render(o,Ag)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const a=this._lodMeshes.length;for(let s=1;s<a;s++)this._applyGGXFilter(e,s-1,s);t.autoClear=n}_applyGGXFilter(e,t,n){const a=this._renderer,s=this._pingPongRenderTarget,o=this._ggxMaterial,c=this._lodMeshes[n];c.material=o;const f=o.uniforms,d=n/(this._lodMeshes.length-1),g=t/(this._lodMeshes.length-1),y=Math.sqrt(d*d-g*g),x=0+d*1.25,b=y*x,{_lodMax:M}=this,R=this._sizeLods[n],C=3*R*(n>M-Ff?n-M+Ff:0),E=4*(this._cubeSize-R);f.envMap.value=e.texture,f.roughness.value=b,f.mipInt.value=M-t,Ep(s,C,E,3*R,2*R),a.setRenderTarget(s),a.render(c,Ag),f.envMap.value=s.texture,f.roughness.value=0,f.mipInt.value=M-n,Ep(e,C,E,3*R,2*R),a.setRenderTarget(e),a.render(c,Ag)}_blur(e,t,n,a,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,a,"latitudinal",s),this._halfBlur(o,e,n,n,a,"longitudinal",s)}_halfBlur(e,t,n,a,s,o,c){const f=this._renderer,d=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&rn("blur direction must be either latitudinal or longitudinal!");const g=3,y=this._lodMeshes[a];y.material=d;const x=d.uniforms,b=this._sizeLods[n]-1,M=isFinite(s)?Math.PI/(2*b):2*Math.PI/(2*Yh-1),R=s/M,C=isFinite(s)?1+Math.floor(g*R):Yh;C>Yh&&It(`sigmaRadians, ${s}, is too large and will clip, as it requested ${C} samples when the maximum is set to ${Yh}`);const E=[];let N=0;for(let W=0;W<Yh;++W){const Z=W/R,B=Math.exp(-Z*Z/2);E.push(B),W===0?N+=B:W<C&&(N+=2*B)}for(let W=0;W<E.length;W++)E[W]=E[W]/N;x.envMap.value=e.texture,x.samples.value=C,x.weights.value=E,x.latitudinal.value=o==="latitudinal",c&&(x.poleAxis.value=c);const{_lodMax:I}=this;x.dTheta.value=M,x.mipInt.value=I-n;const z=this._sizeLods[a],F=3*z*(a>I-Ff?a-I+Ff:0),V=4*(this._cubeSize-z);Ep(t,F,V,3*z,2*z),f.setRenderTarget(t),f.render(y,Ag)}}function WB(i){const e=[],t=[],n=[];let a=i;const s=i-Ff+1+TE.length;for(let o=0;o<s;o++){const c=Math.pow(2,a);e.push(c);let f=1/c;o>i-Ff?f=TE[o-i+Ff-1]:o===0&&(f=0),t.push(f);const d=1/(c-2),g=-d,y=1+d,x=[g,g,y,g,y,y,g,g,y,y,g,y],b=6,M=6,R=3,C=2,E=1,N=new Float32Array(R*M*b),I=new Float32Array(C*M*b),z=new Float32Array(E*M*b);for(let V=0;V<b;V++){const W=V%3*2/3-1,Z=V>2?0:-1,B=[W,Z,0,W+2/3,Z,0,W+2/3,Z+1,0,W,Z,0,W+2/3,Z+1,0,W,Z+1,0];N.set(B,R*M*V),I.set(x,C*M*V);const H=[V,V,V,V,V,V];z.set(H,E*M*V)}const F=new wn;F.setAttribute("position",new Pi(N,R)),F.setAttribute("uv",new Pi(I,C)),F.setAttribute("faceIndex",new Pi(z,E)),n.push(new ma(F,null)),a>Ff&&a--}return{lodMeshes:n,sizeLods:e,sigmas:t}}function AE(i,e,t){const n=new ro(i,e,t);return n.texture.mapping=am,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Ep(i,e,t,n,a){i.viewport.set(e,t,n,a),i.scissor.set(e,t,n,a)}function qB(i,e,t){return new pl({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:GB,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:Y1(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:Bc,depthTest:!1,depthWrite:!1})}function XB(i,e,t){const n=new Float32Array(Yh),a=new pe(0,1,0);return new pl({name:"SphericalGaussianBlur",defines:{n:Yh,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:Y1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Bc,depthTest:!1,depthWrite:!1})}function EE(){return new pl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Y1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Bc,depthTest:!1,depthWrite:!1})}function wE(){return new pl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Y1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Bc,depthTest:!1,depthWrite:!1})}function Y1(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function YB(i){let e=new WeakMap,t=null;function n(c){if(c&&c.isTexture){const f=c.mapping,d=f===t0||f===n0,g=f===Vc||f===kf;if(d||g){let y=e.get(c);const x=y!==void 0?y.texture.pmremVersion:0;if(c.isRenderTargetTexture&&c.pmremVersion!==x)return t===null&&(t=new kb(i)),y=d?t.fromEquirectangular(c,y):t.fromCubemap(c,y),y.texture.pmremVersion=c.pmremVersion,e.set(c,y),y.texture;if(y!==void 0)return y.texture;{const b=c.image;return d&&b&&b.height>0||g&&b&&a(b)?(t===null&&(t=new kb(i)),y=d?t.fromEquirectangular(c):t.fromCubemap(c),y.texture.pmremVersion=c.pmremVersion,e.set(c,y),c.addEventListener("dispose",s),y.texture):null}}}return c}function a(c){let f=0;const d=6;for(let g=0;g<d;g++)c[g]!==void 0&&f++;return f===d}function s(c){const f=c.target;f.removeEventListener("dispose",s);const d=e.get(f);d!==void 0&&(e.delete(f),d.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:o}}function ZB(i){const e={};function t(n){if(e[n]!==void 0)return e[n];const a=i.getExtension(n);return e[n]=a,a}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const a=t(n);return a===null&&Xp("WebGLRenderer: "+n+" extension not supported."),a}}}function KB(i,e,t,n){const a={},s=new WeakMap;function o(y){const x=y.target;x.index!==null&&e.remove(x.index);for(const M in x.attributes)e.remove(x.attributes[M]);x.removeEventListener("dispose",o),delete a[x.id];const b=s.get(x);b&&(e.remove(b),s.delete(x)),n.releaseStatesOfGeometry(x),x.isInstancedBufferGeometry===!0&&delete x._maxInstanceCount,t.memory.geometries--}function c(y,x){return a[x.id]===!0||(x.addEventListener("dispose",o),a[x.id]=!0,t.memory.geometries++),x}function f(y){const x=y.attributes;for(const b in x)e.update(x[b],i.ARRAY_BUFFER)}function d(y){const x=[],b=y.index,M=y.attributes.position;let R=0;if(b!==null){const N=b.array;R=b.version;for(let I=0,z=N.length;I<z;I+=3){const F=N[I+0],V=N[I+1],W=N[I+2];x.push(F,V,V,W,W,F)}}else if(M!==void 0){const N=M.array;R=M.version;for(let I=0,z=N.length/3-1;I<z;I+=3){const F=I+0,V=I+1,W=I+2;x.push(F,V,V,W,W,F)}}else return;const C=new(jC(x)?W2:j2)(x,1);C.version=R;const E=s.get(y);E&&e.remove(E),s.set(y,C)}function g(y){const x=s.get(y);if(x){const b=y.index;b!==null&&x.version<b.version&&d(y)}else d(y);return s.get(y)}return{get:c,update:f,getWireframeAttribute:g}}function QB(i,e,t){let n;function a(x){n=x}let s,o;function c(x){s=x.type,o=x.bytesPerElement}function f(x,b){i.drawElements(n,b,s,x*o),t.update(b,n,1)}function d(x,b,M){M!==0&&(i.drawElementsInstanced(n,b,s,x*o,M),t.update(b,n,M))}function g(x,b,M){if(M===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,b,0,s,x,0,M);let C=0;for(let E=0;E<M;E++)C+=b[E];t.update(C,n,1)}function y(x,b,M,R){if(M===0)return;const C=e.get("WEBGL_multi_draw");if(C===null)for(let E=0;E<x.length;E++)d(x[E]/o,b[E],R[E]);else{C.multiDrawElementsInstancedWEBGL(n,b,0,s,x,0,R,0,M);let E=0;for(let N=0;N<M;N++)E+=b[N]*R[N];t.update(E,n,1)}}this.setMode=a,this.setIndex=c,this.render=f,this.renderInstances=d,this.renderMultiDraw=g,this.renderMultiDrawInstances=y}function JB(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,o,c){switch(t.calls++,o){case i.TRIANGLES:t.triangles+=c*(s/3);break;case i.LINES:t.lines+=c*(s/2);break;case i.LINE_STRIP:t.lines+=c*(s-1);break;case i.LINE_LOOP:t.lines+=c*s;break;case i.POINTS:t.points+=c*s;break;default:rn("WebGLInfo: Unknown draw mode:",o);break}}function a(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:a,update:n}}function $B(i,e,t){const n=new WeakMap,a=new Ri;function s(o,c,f){const d=o.morphTargetInfluences,g=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,y=g!==void 0?g.length:0;let x=n.get(c);if(x===void 0||x.count!==y){let H=function(){Z.dispose(),n.delete(c),c.removeEventListener("dispose",H)};var b=H;x!==void 0&&x.texture.dispose();const M=c.morphAttributes.position!==void 0,R=c.morphAttributes.normal!==void 0,C=c.morphAttributes.color!==void 0,E=c.morphAttributes.position||[],N=c.morphAttributes.normal||[],I=c.morphAttributes.color||[];let z=0;M===!0&&(z=1),R===!0&&(z=2),C===!0&&(z=3);let F=c.attributes.position.count*z,V=1;F>e.maxTextureSize&&(V=Math.ceil(F/e.maxTextureSize),F=e.maxTextureSize);const W=new Float32Array(F*V*4*y),Z=new T1(W,F,V,y);Z.type=ar,Z.needsUpdate=!0;const B=z*4;for(let Q=0;Q<y;Q++){const J=E[Q],oe=N[Q],re=I[Q],ve=F*V*4*Q;for(let q=0;q<J.count;q++){const K=q*B;M===!0&&(a.fromBufferAttribute(J,q),W[ve+K+0]=a.x,W[ve+K+1]=a.y,W[ve+K+2]=a.z,W[ve+K+3]=0),R===!0&&(a.fromBufferAttribute(oe,q),W[ve+K+4]=a.x,W[ve+K+5]=a.y,W[ve+K+6]=a.z,W[ve+K+7]=0),C===!0&&(a.fromBufferAttribute(re,q),W[ve+K+8]=a.x,W[ve+K+9]=a.y,W[ve+K+10]=a.z,W[ve+K+11]=re.itemSize===4?a.w:1)}}x={count:y,texture:Z,size:new dt(F,V)},n.set(c,x),c.addEventListener("dispose",H)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)f.getUniforms().setValue(i,"morphTexture",o.morphTexture,t);else{let M=0;for(let C=0;C<d.length;C++)M+=d[C];const R=c.morphTargetsRelative?1:1-M;f.getUniforms().setValue(i,"morphTargetBaseInfluence",R),f.getUniforms().setValue(i,"morphTargetInfluences",d)}f.getUniforms().setValue(i,"morphTargetsTexture",x.texture,t),f.getUniforms().setValue(i,"morphTargetsTextureSize",x.size)}return{update:s}}function e6(i,e,t,n){let a=new WeakMap;function s(f){const d=n.render.frame,g=f.geometry,y=e.get(f,g);if(a.get(y)!==d&&(e.update(y),a.set(y,d)),f.isInstancedMesh&&(f.hasEventListener("dispose",c)===!1&&f.addEventListener("dispose",c),a.get(f)!==d&&(t.update(f.instanceMatrix,i.ARRAY_BUFFER),f.instanceColor!==null&&t.update(f.instanceColor,i.ARRAY_BUFFER),a.set(f,d))),f.isSkinnedMesh){const x=f.skeleton;a.get(x)!==d&&(x.update(),a.set(x,d))}return y}function o(){a=new WeakMap}function c(f){const d=f.target;d.removeEventListener("dispose",c),t.remove(d.instanceMatrix),d.instanceColor!==null&&t.remove(d.instanceColor)}return{update:s,dispose:o}}const t6={[C2]:"LINEAR_TONE_MAPPING",[R2]:"REINHARD_TONE_MAPPING",[D2]:"CINEON_TONE_MAPPING",[h1]:"ACES_FILMIC_TONE_MAPPING",[O2]:"AGX_TONE_MAPPING",[N2]:"NEUTRAL_TONE_MAPPING",[L2]:"CUSTOM_TONE_MAPPING"};function n6(i,e,t,n,a){const s=new ro(e,t,{type:i,depthBuffer:n,stencilBuffer:a}),o=new ro(e,t,{type:tc,depthBuffer:!1,stencilBuffer:!1}),c=new wn;c.setAttribute("position",new Zt([-1,3,0,-1,-1,0,3,-1,0],3)),c.setAttribute("uv",new Zt([0,2,0,0,2,0],2));const f=new sT({uniforms:{tDiffuse:{value:null}},vertexShader:`
			precision highp float;

			uniform mat4 modelViewMatrix;
			uniform mat4 projectionMatrix;

			attribute vec3 position;
			attribute vec2 uv;

			varying vec2 vUv;

			void main() {
				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}`,fragmentShader:`
			precision highp float;

			uniform sampler2D tDiffuse;

			varying vec2 vUv;

			#include <tonemapping_pars_fragment>
			#include <colorspace_pars_fragment>

			void main() {
				gl_FragColor = texture2D( tDiffuse, vUv );

				#ifdef LINEAR_TONE_MAPPING
					gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );
				#elif defined( REINHARD_TONE_MAPPING )
					gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );
				#elif defined( CINEON_TONE_MAPPING )
					gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );
				#elif defined( ACES_FILMIC_TONE_MAPPING )
					gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );
				#elif defined( AGX_TONE_MAPPING )
					gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );
				#elif defined( NEUTRAL_TONE_MAPPING )
					gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );
				#elif defined( CUSTOM_TONE_MAPPING )
					gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );
				#endif

				#ifdef SRGB_TRANSFER
					gl_FragColor = sRGBTransferOETF( gl_FragColor );
				#endif
			}`,depthTest:!1,depthWrite:!1}),d=new ma(c,f),g=new ec(-1,1,1,-1,0,1);let y=null,x=null,b=!1,M,R=null,C=[],E=!1;this.setSize=function(N,I){s.setSize(N,I),o.setSize(N,I);for(let z=0;z<C.length;z++){const F=C[z];F.setSize&&F.setSize(N,I)}},this.setEffects=function(N){C=N,E=C.length>0&&C[0].isRenderPass===!0;const I=s.width,z=s.height;for(let F=0;F<C.length;F++){const V=C[F];V.setSize&&V.setSize(I,z)}},this.begin=function(N,I){if(b||N.toneMapping===fl&&C.length===0)return!1;if(R=I,I!==null){const z=I.width,F=I.height;(s.width!==z||s.height!==F)&&this.setSize(z,F)}return E===!1&&N.setRenderTarget(s),M=N.toneMapping,N.toneMapping=fl,!0},this.hasRenderPass=function(){return E},this.end=function(N,I){N.toneMapping=M,b=!0;let z=s,F=o;for(let V=0;V<C.length;V++){const W=C[V];if(W.enabled!==!1&&(W.render(N,F,z,I),W.needsSwap!==!1)){const Z=z;z=F,F=Z}}if(y!==N.outputColorSpace||x!==N.toneMapping){y=N.outputColorSpace,x=N.toneMapping,f.defines={},Xn.getTransfer(y)===Mi&&(f.defines.SRGB_TRANSFER="");const V=t6[x];V&&(f.defines[V]=""),f.needsUpdate=!0}f.uniforms.tDiffuse.value=z.texture,N.setRenderTarget(R),N.render(d,g),R=null,b=!1},this.isCompositing=function(){return b},this.dispose=function(){s.dispose(),o.dispose(),c.dispose(),f.dispose()}}const qR=new pa,Vb=new fd(1,1),XR=new T1,YR=new M1,ZR=new R0,CE=[],RE=[],DE=new Float32Array(16),LE=new Float32Array(9),OE=new Float32Array(4);function rm(i,e,t){const n=i[0];if(n<=0||n>0)return i;const a=e*t;let s=CE[a];if(s===void 0&&(s=new Float32Array(a),CE[a]=s),e!==0){n.toArray(s,0);for(let o=1,c=0;o!==e;++o)c+=t,i[o].toArray(s,c)}return s}function cs(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function us(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function Z1(i,e){let t=RE[e];t===void 0&&(t=new Int32Array(e),RE[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function i6(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function a6(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(cs(t,e))return;i.uniform2fv(this.addr,e),us(t,e)}}function s6(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(cs(t,e))return;i.uniform3fv(this.addr,e),us(t,e)}}function r6(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(cs(t,e))return;i.uniform4fv(this.addr,e),us(t,e)}}function o6(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(cs(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),us(t,e)}else{if(cs(t,n))return;OE.set(n),i.uniformMatrix2fv(this.addr,!1,OE),us(t,n)}}function l6(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(cs(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),us(t,e)}else{if(cs(t,n))return;LE.set(n),i.uniformMatrix3fv(this.addr,!1,LE),us(t,n)}}function c6(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(cs(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),us(t,e)}else{if(cs(t,n))return;DE.set(n),i.uniformMatrix4fv(this.addr,!1,DE),us(t,n)}}function u6(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function f6(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(cs(t,e))return;i.uniform2iv(this.addr,e),us(t,e)}}function h6(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(cs(t,e))return;i.uniform3iv(this.addr,e),us(t,e)}}function d6(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(cs(t,e))return;i.uniform4iv(this.addr,e),us(t,e)}}function p6(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function m6(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(cs(t,e))return;i.uniform2uiv(this.addr,e),us(t,e)}}function g6(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(cs(t,e))return;i.uniform3uiv(this.addr,e),us(t,e)}}function v6(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(cs(t,e))return;i.uniform4uiv(this.addr,e),us(t,e)}}function y6(i,e,t){const n=this.cache,a=t.allocateTextureUnit();n[0]!==a&&(i.uniform1i(this.addr,a),n[0]=a);let s;this.type===i.SAMPLER_2D_SHADOW?(Vb.compareFunction=t.isReversedDepthBuffer()?b1:S1,s=Vb):s=qR,t.setTexture2D(e||s,a)}function _6(i,e,t){const n=this.cache,a=t.allocateTextureUnit();n[0]!==a&&(i.uniform1i(this.addr,a),n[0]=a),t.setTexture3D(e||YR,a)}function x6(i,e,t){const n=this.cache,a=t.allocateTextureUnit();n[0]!==a&&(i.uniform1i(this.addr,a),n[0]=a),t.setTextureCube(e||ZR,a)}function S6(i,e,t){const n=this.cache,a=t.allocateTextureUnit();n[0]!==a&&(i.uniform1i(this.addr,a),n[0]=a),t.setTexture2DArray(e||XR,a)}function b6(i){switch(i){case 5126:return i6;case 35664:return a6;case 35665:return s6;case 35666:return r6;case 35674:return o6;case 35675:return l6;case 35676:return c6;case 5124:case 35670:return u6;case 35667:case 35671:return f6;case 35668:case 35672:return h6;case 35669:case 35673:return d6;case 5125:return p6;case 36294:return m6;case 36295:return g6;case 36296:return v6;case 35678:case 36198:case 36298:case 36306:case 35682:return y6;case 35679:case 36299:case 36307:return _6;case 35680:case 36300:case 36308:case 36293:return x6;case 36289:case 36303:case 36311:case 36292:return S6}}function T6(i,e){i.uniform1fv(this.addr,e)}function M6(i,e){const t=rm(e,this.size,2);i.uniform2fv(this.addr,t)}function A6(i,e){const t=rm(e,this.size,3);i.uniform3fv(this.addr,t)}function E6(i,e){const t=rm(e,this.size,4);i.uniform4fv(this.addr,t)}function w6(i,e){const t=rm(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function C6(i,e){const t=rm(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function R6(i,e){const t=rm(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function D6(i,e){i.uniform1iv(this.addr,e)}function L6(i,e){i.uniform2iv(this.addr,e)}function O6(i,e){i.uniform3iv(this.addr,e)}function N6(i,e){i.uniform4iv(this.addr,e)}function U6(i,e){i.uniform1uiv(this.addr,e)}function I6(i,e){i.uniform2uiv(this.addr,e)}function P6(i,e){i.uniform3uiv(this.addr,e)}function z6(i,e){i.uniform4uiv(this.addr,e)}function B6(i,e,t){const n=this.cache,a=e.length,s=Z1(t,a);cs(n,s)||(i.uniform1iv(this.addr,s),us(n,s));let o;this.type===i.SAMPLER_2D_SHADOW?o=Vb:o=qR;for(let c=0;c!==a;++c)t.setTexture2D(e[c]||o,s[c])}function F6(i,e,t){const n=this.cache,a=e.length,s=Z1(t,a);cs(n,s)||(i.uniform1iv(this.addr,s),us(n,s));for(let o=0;o!==a;++o)t.setTexture3D(e[o]||YR,s[o])}function k6(i,e,t){const n=this.cache,a=e.length,s=Z1(t,a);cs(n,s)||(i.uniform1iv(this.addr,s),us(n,s));for(let o=0;o!==a;++o)t.setTextureCube(e[o]||ZR,s[o])}function V6(i,e,t){const n=this.cache,a=e.length,s=Z1(t,a);cs(n,s)||(i.uniform1iv(this.addr,s),us(n,s));for(let o=0;o!==a;++o)t.setTexture2DArray(e[o]||XR,s[o])}function H6(i){switch(i){case 5126:return T6;case 35664:return M6;case 35665:return A6;case 35666:return E6;case 35674:return w6;case 35675:return C6;case 35676:return R6;case 5124:case 35670:return D6;case 35667:case 35671:return L6;case 35668:case 35672:return O6;case 35669:case 35673:return N6;case 5125:return U6;case 36294:return I6;case 36295:return P6;case 36296:return z6;case 35678:case 36198:case 36298:case 36306:case 35682:return B6;case 35679:case 36299:case 36307:return F6;case 35680:case 36300:case 36308:case 36293:return k6;case 36289:case 36303:case 36311:case 36292:return V6}}class G6{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=b6(t.type)}}class j6{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=H6(t.type)}}class W6{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const a=this.seq;for(let s=0,o=a.length;s!==o;++s){const c=a[s];c.setValue(e,t[c.id],n)}}}const PS=/(\w+)(\])?(\[|\.)?/g;function NE(i,e){i.seq.push(e),i.map[e.id]=e}function q6(i,e,t){const n=i.name,a=n.length;for(PS.lastIndex=0;;){const s=PS.exec(n),o=PS.lastIndex;let c=s[1];const f=s[2]==="]",d=s[3];if(f&&(c=c|0),d===void 0||d==="["&&o+2===a){NE(t,d===void 0?new G6(c,i,e):new j6(c,i,e));break}else{let y=t.map[c];y===void 0&&(y=new W6(c),NE(t,y)),t=y}}}class Ky{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let o=0;o<n;++o){const c=e.getActiveUniform(t,o),f=e.getUniformLocation(t,c.name);q6(c,f,this)}const a=[],s=[];for(const o of this.seq)o.type===e.SAMPLER_2D_SHADOW||o.type===e.SAMPLER_CUBE_SHADOW||o.type===e.SAMPLER_2D_ARRAY_SHADOW?a.push(o):s.push(o);a.length>0&&(this.seq=a.concat(s))}setValue(e,t,n,a){const s=this.map[t];s!==void 0&&s.setValue(e,n,a)}setOptional(e,t,n){const a=t[n];a!==void 0&&this.setValue(e,n,a)}static upload(e,t,n,a){for(let s=0,o=t.length;s!==o;++s){const c=t[s],f=n[c.id];f.needsUpdate!==!1&&c.setValue(e,f.value,a)}}static seqWithValue(e,t){const n=[];for(let a=0,s=e.length;a!==s;++a){const o=e[a];o.id in t&&n.push(o)}return n}}function UE(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}const X6=37297;let Y6=0;function Z6(i,e){const t=i.split(`
`),n=[],a=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=a;o<s;o++){const c=o+1;n.push(`${c===e?">":" "} ${c}: ${t[o]}`)}return n.join(`
`)}const IE=new En;function K6(i){Xn._getMatrix(IE,Xn.workingColorSpace,i);const e=`mat3( ${IE.elements.map(t=>t.toFixed(4))} )`;switch(Xn.getTransfer(i)){case o0:return[e,"LinearTransferOETF"];case Mi:return[e,"sRGBTransferOETF"];default:return It("WebGLProgram: Unsupported color space: ",i),[e,"LinearTransferOETF"]}}function PE(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),s=(i.getShaderInfoLog(e)||"").trim();if(n&&s==="")return"";const o=/ERROR: 0:(\d+)/.exec(s);if(o){const c=parseInt(o[1]);return t.toUpperCase()+`

`+s+`

`+Z6(i.getShaderSource(e),c)}else return s}function Q6(i,e){const t=K6(e);return[`vec4 ${i}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}const J6={[C2]:"Linear",[R2]:"Reinhard",[D2]:"Cineon",[h1]:"ACESFilmic",[O2]:"AgX",[N2]:"Neutral",[L2]:"Custom"};function $6(i,e){const t=J6[e];return t===void 0?(It("WebGLProgram: Unsupported toneMapping:",e),"vec3 "+i+"( vec3 color ) { return LinearToneMapping( color ); }"):"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Dy=new pe;function eF(){Xn.getLuminanceCoefficients(Dy);const i=Dy.x.toFixed(4),e=Dy.y.toFixed(4),t=Dy.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function tF(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Ug).join(`
`)}function nF(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function iF(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let a=0;a<n;a++){const s=i.getActiveAttrib(e,a),o=s.name;let c=1;s.type===i.FLOAT_MAT2&&(c=2),s.type===i.FLOAT_MAT3&&(c=3),s.type===i.FLOAT_MAT4&&(c=4),t[o]={type:s.type,location:i.getAttribLocation(e,o),locationSize:c}}return t}function Ug(i){return i!==""}function zE(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function BE(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const aF=/^[ \t]*#include +<([\w\d./]+)>/gm;function Hb(i){return i.replace(aF,rF)}const sF=new Map;function rF(i,e){let t=Ln[e];if(t===void 0){const n=sF.get(e);if(n!==void 0)t=Ln[n],It('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return Hb(t)}const oF=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function FE(i){return i.replace(oF,lF)}function lF(i,e,t,n){let a="";for(let s=parseInt(e);s<parseInt(t);s++)a+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return a}function kE(i){let e=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}const cF={[Vp]:"SHADOWMAP_TYPE_PCF",[Zh]:"SHADOWMAP_TYPE_VSM"};function uF(i){return cF[i.shadowMapType]||"SHADOWMAP_TYPE_BASIC"}const fF={[Vc]:"ENVMAP_TYPE_CUBE",[kf]:"ENVMAP_TYPE_CUBE",[am]:"ENVMAP_TYPE_CUBE_UV"};function hF(i){return i.envMap===!1?"ENVMAP_TYPE_CUBE":fF[i.envMapMode]||"ENVMAP_TYPE_CUBE"}const dF={[kf]:"ENVMAP_MODE_REFRACTION"};function pF(i){return i.envMap===!1?"ENVMAP_MODE_REFLECTION":dF[i.envMapMode]||"ENVMAP_MODE_REFLECTION"}const mF={[w0]:"ENVMAP_BLENDING_MULTIPLY",[RC]:"ENVMAP_BLENDING_MIX",[DC]:"ENVMAP_BLENDING_ADD"};function gF(i){return i.envMap===!1?"ENVMAP_BLENDING_NONE":mF[i.combine]||"ENVMAP_BLENDING_NONE"}function vF(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}function yF(i,e,t,n){const a=i.getContext(),s=t.defines;let o=t.vertexShader,c=t.fragmentShader;const f=uF(t),d=hF(t),g=pF(t),y=gF(t),x=vF(t),b=tF(t),M=nF(s),R=a.createProgram();let C,E,N=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(C=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M].filter(Ug).join(`
`),C.length>0&&(C+=`
`),E=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M].filter(Ug).join(`
`),E.length>0&&(E+=`
`)):(C=[kE(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+g:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+f:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ug).join(`
`),E=[kE(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.envMap?"#define "+g:"",t.envMap?"#define "+y:"",x?"#define CUBEUV_TEXEL_WIDTH "+x.texelWidth:"",x?"#define CUBEUV_TEXEL_HEIGHT "+x.texelHeight:"",x?"#define CUBEUV_MAX_MIP "+x.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+f:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==fl?"#define TONE_MAPPING":"",t.toneMapping!==fl?Ln.tonemapping_pars_fragment:"",t.toneMapping!==fl?$6("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Ln.colorspace_pars_fragment,Q6("linearToOutputTexel",t.outputColorSpace),eF(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Ug).join(`
`)),o=Hb(o),o=zE(o,t),o=BE(o,t),c=Hb(c),c=zE(c,t),c=BE(c,t),o=FE(o),c=FE(c),t.isRawShaderMaterial!==!0&&(N=`#version 300 es
`,C=[b,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+C,E=["#define varying in",t.glslVersion===Lb?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Lb?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+E);const I=N+C+o,z=N+E+c,F=UE(a,a.VERTEX_SHADER,I),V=UE(a,a.FRAGMENT_SHADER,z);a.attachShader(R,F),a.attachShader(R,V),t.index0AttributeName!==void 0?a.bindAttribLocation(R,0,t.index0AttributeName):t.morphTargets===!0&&a.bindAttribLocation(R,0,"position"),a.linkProgram(R);function W(Q){if(i.debug.checkShaderErrors){const J=a.getProgramInfoLog(R)||"",oe=a.getShaderInfoLog(F)||"",re=a.getShaderInfoLog(V)||"",ve=J.trim(),q=oe.trim(),K=re.trim();let te=!0,de=!0;if(a.getProgramParameter(R,a.LINK_STATUS)===!1)if(te=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(a,R,F,V);else{const ce=PE(a,F,"vertex"),G=PE(a,V,"fragment");rn("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(R,a.VALIDATE_STATUS)+`

Material Name: `+Q.name+`
Material Type: `+Q.type+`

Program Info Log: `+ve+`
`+ce+`
`+G)}else ve!==""?It("WebGLProgram: Program Info Log:",ve):(q===""||K==="")&&(de=!1);de&&(Q.diagnostics={runnable:te,programLog:ve,vertexShader:{log:q,prefix:C},fragmentShader:{log:K,prefix:E}})}a.deleteShader(F),a.deleteShader(V),Z=new Ky(a,R),B=iF(a,R)}let Z;this.getUniforms=function(){return Z===void 0&&W(this),Z};let B;this.getAttributes=function(){return B===void 0&&W(this),B};let H=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return H===!1&&(H=a.getProgramParameter(R,X6)),H},this.destroy=function(){n.releaseStatesOfProgram(this),a.deleteProgram(R),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Y6++,this.cacheKey=e,this.usedTimes=1,this.program=R,this.vertexShader=F,this.fragmentShader=V,this}let _F=0;class xF{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,a=this._getShaderStage(t),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return o.has(a)===!1&&(o.add(a),a.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new SF(e),t.set(e,n)),n}}class SF{constructor(e){this.id=_F++,this.code=e,this.usedTimes=0}}function bF(i,e,t,n,a,s,o){const c=new Zp,f=new xF,d=new Set,g=[],y=new Map,x=a.logarithmicDepthBuffer;let b=a.precision;const M={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distance",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function R(B){return d.add(B),B===0?"uv":`uv${B}`}function C(B,H,Q,J,oe){const re=J.fog,ve=oe.geometry,q=B.isMeshStandardMaterial?J.environment:null,K=(B.isMeshStandardMaterial?t:e).get(B.envMap||q),te=K&&K.mapping===am?K.image.height:null,de=M[B.type];B.precision!==null&&(b=a.getMaxPrecision(B.precision),b!==B.precision&&It("WebGLProgram.getParameters:",B.precision,"not supported, using",b,"instead."));const ce=ve.morphAttributes.position||ve.morphAttributes.normal||ve.morphAttributes.color,G=ce!==void 0?ce.length:0;let ne=0;ve.morphAttributes.position!==void 0&&(ne=1),ve.morphAttributes.normal!==void 0&&(ne=2),ve.morphAttributes.color!==void 0&&(ne=3);let fe,me,xe,he;if(de){const qt=Ql[de];fe=qt.vertexShader,me=qt.fragmentShader}else fe=B.vertexShader,me=B.fragmentShader,f.update(B),xe=f.getVertexShaderID(B),he=f.getFragmentShaderID(B);const _e=i.getRenderTarget(),Ae=i.state.buffers.depth.getReversed(),$e=oe.isInstancedMesh===!0,et=oe.isBatchedMesh===!0,qe=!!B.map,nt=!!B.matcap,St=!!K,Ne=!!B.aoMap,Ve=!!B.lightMap,Fe=!!B.bumpMap,rt=!!B.normalMap,ae=!!B.displacementMap,ut=!!B.emissiveMap,Ze=!!B.metalnessMap,Le=!!B.roughnessMap,tt=B.anisotropy>0,$=B.clearcoat>0,Y=B.dispersion>0,ye=B.iridescence>0,Be=B.sheen>0,De=B.transmission>0,Ce=tt&&!!B.anisotropyMap,vt=$&&!!B.clearcoatMap,ht=$&&!!B.clearcoatNormalMap,bt=$&&!!B.clearcoatRoughnessMap,Ct=ye&&!!B.iridescenceMap,Ge=ye&&!!B.iridescenceThicknessMap,Qe=Be&&!!B.sheenColorMap,st=Be&&!!B.sheenRoughnessMap,ge=!!B.specularMap,we=!!B.specularColorMap,xt=!!B.specularIntensityMap,Se=De&&!!B.transmissionMap,it=De&&!!B.thicknessMap,lt=!!B.gradientMap,At=!!B.alphaMap,ct=B.alphaTest>0,je=!!B.alphaHash,mt=!!B.extensions;let Rt=fl;B.toneMapped&&(_e===null||_e.isXRRenderTarget===!0)&&(Rt=i.toneMapping);const Lt={shaderID:de,shaderType:B.type,shaderName:B.name,vertexShader:fe,fragmentShader:me,defines:B.defines,customVertexShaderID:xe,customFragmentShaderID:he,isRawShaderMaterial:B.isRawShaderMaterial===!0,glslVersion:B.glslVersion,precision:b,batching:et,batchingColor:et&&oe._colorsTexture!==null,instancing:$e,instancingColor:$e&&oe.instanceColor!==null,instancingMorph:$e&&oe.morphTexture!==null,outputColorSpace:_e===null?i.outputColorSpace:_e.isXRRenderTarget===!0?_e.texture.colorSpace:Vf,alphaToCoverage:!!B.alphaToCoverage,map:qe,matcap:nt,envMap:St,envMapMode:St&&K.mapping,envMapCubeUVHeight:te,aoMap:Ne,lightMap:Ve,bumpMap:Fe,normalMap:rt,displacementMap:ae,emissiveMap:ut,normalMapObjectSpace:rt&&B.normalMapType===zC,normalMapTangentSpace:rt&&B.normalMapType===qf,metalnessMap:Ze,roughnessMap:Le,anisotropy:tt,anisotropyMap:Ce,clearcoat:$,clearcoatMap:vt,clearcoatNormalMap:ht,clearcoatRoughnessMap:bt,dispersion:Y,iridescence:ye,iridescenceMap:Ct,iridescenceThicknessMap:Ge,sheen:Be,sheenColorMap:Qe,sheenRoughnessMap:st,specularMap:ge,specularColorMap:we,specularIntensityMap:xt,transmission:De,transmissionMap:Se,thicknessMap:it,gradientMap:lt,opaque:B.transparent===!1&&B.blending===td&&B.alphaToCoverage===!1,alphaMap:At,alphaTest:ct,alphaHash:je,combine:B.combine,mapUv:qe&&R(B.map.channel),aoMapUv:Ne&&R(B.aoMap.channel),lightMapUv:Ve&&R(B.lightMap.channel),bumpMapUv:Fe&&R(B.bumpMap.channel),normalMapUv:rt&&R(B.normalMap.channel),displacementMapUv:ae&&R(B.displacementMap.channel),emissiveMapUv:ut&&R(B.emissiveMap.channel),metalnessMapUv:Ze&&R(B.metalnessMap.channel),roughnessMapUv:Le&&R(B.roughnessMap.channel),anisotropyMapUv:Ce&&R(B.anisotropyMap.channel),clearcoatMapUv:vt&&R(B.clearcoatMap.channel),clearcoatNormalMapUv:ht&&R(B.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:bt&&R(B.clearcoatRoughnessMap.channel),iridescenceMapUv:Ct&&R(B.iridescenceMap.channel),iridescenceThicknessMapUv:Ge&&R(B.iridescenceThicknessMap.channel),sheenColorMapUv:Qe&&R(B.sheenColorMap.channel),sheenRoughnessMapUv:st&&R(B.sheenRoughnessMap.channel),specularMapUv:ge&&R(B.specularMap.channel),specularColorMapUv:we&&R(B.specularColorMap.channel),specularIntensityMapUv:xt&&R(B.specularIntensityMap.channel),transmissionMapUv:Se&&R(B.transmissionMap.channel),thicknessMapUv:it&&R(B.thicknessMap.channel),alphaMapUv:At&&R(B.alphaMap.channel),vertexTangents:!!ve.attributes.tangent&&(rt||tt),vertexColors:B.vertexColors,vertexAlphas:B.vertexColors===!0&&!!ve.attributes.color&&ve.attributes.color.itemSize===4,pointsUvs:oe.isPoints===!0&&!!ve.attributes.uv&&(qe||At),fog:!!re,useFog:B.fog===!0,fogExp2:!!re&&re.isFogExp2,flatShading:B.flatShading===!0&&B.wireframe===!1,sizeAttenuation:B.sizeAttenuation===!0,logarithmicDepthBuffer:x,reversedDepthBuffer:Ae,skinning:oe.isSkinnedMesh===!0,morphTargets:ve.morphAttributes.position!==void 0,morphNormals:ve.morphAttributes.normal!==void 0,morphColors:ve.morphAttributes.color!==void 0,morphTargetsCount:G,morphTextureStride:ne,numDirLights:H.directional.length,numPointLights:H.point.length,numSpotLights:H.spot.length,numSpotLightMaps:H.spotLightMap.length,numRectAreaLights:H.rectArea.length,numHemiLights:H.hemi.length,numDirLightShadows:H.directionalShadowMap.length,numPointLightShadows:H.pointShadowMap.length,numSpotLightShadows:H.spotShadowMap.length,numSpotLightShadowsWithMaps:H.numSpotLightShadowsWithMaps,numLightProbes:H.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:B.dithering,shadowMapEnabled:i.shadowMap.enabled&&Q.length>0,shadowMapType:i.shadowMap.type,toneMapping:Rt,decodeVideoTexture:qe&&B.map.isVideoTexture===!0&&Xn.getTransfer(B.map.colorSpace)===Mi,decodeVideoTextureEmissive:ut&&B.emissiveMap.isVideoTexture===!0&&Xn.getTransfer(B.emissiveMap.colorSpace)===Mi,premultipliedAlpha:B.premultipliedAlpha,doubleSided:B.side===cl,flipSided:B.side===Vr,useDepthPacking:B.depthPacking>=0,depthPacking:B.depthPacking||0,index0AttributeName:B.index0AttributeName,extensionClipCullDistance:mt&&B.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(mt&&B.extensions.multiDraw===!0||et)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:B.customProgramCacheKey()};return Lt.vertexUv1s=d.has(1),Lt.vertexUv2s=d.has(2),Lt.vertexUv3s=d.has(3),d.clear(),Lt}function E(B){const H=[];if(B.shaderID?H.push(B.shaderID):(H.push(B.customVertexShaderID),H.push(B.customFragmentShaderID)),B.defines!==void 0)for(const Q in B.defines)H.push(Q),H.push(B.defines[Q]);return B.isRawShaderMaterial===!1&&(N(H,B),I(H,B),H.push(i.outputColorSpace)),H.push(B.customProgramCacheKey),H.join()}function N(B,H){B.push(H.precision),B.push(H.outputColorSpace),B.push(H.envMapMode),B.push(H.envMapCubeUVHeight),B.push(H.mapUv),B.push(H.alphaMapUv),B.push(H.lightMapUv),B.push(H.aoMapUv),B.push(H.bumpMapUv),B.push(H.normalMapUv),B.push(H.displacementMapUv),B.push(H.emissiveMapUv),B.push(H.metalnessMapUv),B.push(H.roughnessMapUv),B.push(H.anisotropyMapUv),B.push(H.clearcoatMapUv),B.push(H.clearcoatNormalMapUv),B.push(H.clearcoatRoughnessMapUv),B.push(H.iridescenceMapUv),B.push(H.iridescenceThicknessMapUv),B.push(H.sheenColorMapUv),B.push(H.sheenRoughnessMapUv),B.push(H.specularMapUv),B.push(H.specularColorMapUv),B.push(H.specularIntensityMapUv),B.push(H.transmissionMapUv),B.push(H.thicknessMapUv),B.push(H.combine),B.push(H.fogExp2),B.push(H.sizeAttenuation),B.push(H.morphTargetsCount),B.push(H.morphAttributeCount),B.push(H.numDirLights),B.push(H.numPointLights),B.push(H.numSpotLights),B.push(H.numSpotLightMaps),B.push(H.numHemiLights),B.push(H.numRectAreaLights),B.push(H.numDirLightShadows),B.push(H.numPointLightShadows),B.push(H.numSpotLightShadows),B.push(H.numSpotLightShadowsWithMaps),B.push(H.numLightProbes),B.push(H.shadowMapType),B.push(H.toneMapping),B.push(H.numClippingPlanes),B.push(H.numClipIntersection),B.push(H.depthPacking)}function I(B,H){c.disableAll(),H.instancing&&c.enable(0),H.instancingColor&&c.enable(1),H.instancingMorph&&c.enable(2),H.matcap&&c.enable(3),H.envMap&&c.enable(4),H.normalMapObjectSpace&&c.enable(5),H.normalMapTangentSpace&&c.enable(6),H.clearcoat&&c.enable(7),H.iridescence&&c.enable(8),H.alphaTest&&c.enable(9),H.vertexColors&&c.enable(10),H.vertexAlphas&&c.enable(11),H.vertexUv1s&&c.enable(12),H.vertexUv2s&&c.enable(13),H.vertexUv3s&&c.enable(14),H.vertexTangents&&c.enable(15),H.anisotropy&&c.enable(16),H.alphaHash&&c.enable(17),H.batching&&c.enable(18),H.dispersion&&c.enable(19),H.batchingColor&&c.enable(20),H.gradientMap&&c.enable(21),B.push(c.mask),c.disableAll(),H.fog&&c.enable(0),H.useFog&&c.enable(1),H.flatShading&&c.enable(2),H.logarithmicDepthBuffer&&c.enable(3),H.reversedDepthBuffer&&c.enable(4),H.skinning&&c.enable(5),H.morphTargets&&c.enable(6),H.morphNormals&&c.enable(7),H.morphColors&&c.enable(8),H.premultipliedAlpha&&c.enable(9),H.shadowMapEnabled&&c.enable(10),H.doubleSided&&c.enable(11),H.flipSided&&c.enable(12),H.useDepthPacking&&c.enable(13),H.dithering&&c.enable(14),H.transmission&&c.enable(15),H.sheen&&c.enable(16),H.opaque&&c.enable(17),H.pointsUvs&&c.enable(18),H.decodeVideoTexture&&c.enable(19),H.decodeVideoTextureEmissive&&c.enable(20),H.alphaToCoverage&&c.enable(21),B.push(c.mask)}function z(B){const H=M[B.type];let Q;if(H){const J=Ql[H];Q=q2.clone(J.uniforms)}else Q=B.uniforms;return Q}function F(B,H){let Q=y.get(H);return Q!==void 0?++Q.usedTimes:(Q=new yF(i,H,B,s),g.push(Q),y.set(H,Q)),Q}function V(B){if(--B.usedTimes===0){const H=g.indexOf(B);g[H]=g[g.length-1],g.pop(),y.delete(B.cacheKey),B.destroy()}}function W(B){f.remove(B)}function Z(){f.dispose()}return{getParameters:C,getProgramCacheKey:E,getUniforms:z,acquireProgram:F,releaseProgram:V,releaseShaderCache:W,programs:g,dispose:Z}}function TF(){let i=new WeakMap;function e(o){return i.has(o)}function t(o){let c=i.get(o);return c===void 0&&(c={},i.set(o,c)),c}function n(o){i.delete(o)}function a(o,c,f){i.get(o)[c]=f}function s(){i=new WeakMap}return{has:e,get:t,remove:n,update:a,dispose:s}}function MF(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function VE(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function HE(){const i=[];let e=0;const t=[],n=[],a=[];function s(){e=0,t.length=0,n.length=0,a.length=0}function o(y,x,b,M,R,C){let E=i[e];return E===void 0?(E={id:y.id,object:y,geometry:x,material:b,groupOrder:M,renderOrder:y.renderOrder,z:R,group:C},i[e]=E):(E.id=y.id,E.object=y,E.geometry=x,E.material=b,E.groupOrder=M,E.renderOrder=y.renderOrder,E.z=R,E.group=C),e++,E}function c(y,x,b,M,R,C){const E=o(y,x,b,M,R,C);b.transmission>0?n.push(E):b.transparent===!0?a.push(E):t.push(E)}function f(y,x,b,M,R,C){const E=o(y,x,b,M,R,C);b.transmission>0?n.unshift(E):b.transparent===!0?a.unshift(E):t.unshift(E)}function d(y,x){t.length>1&&t.sort(y||MF),n.length>1&&n.sort(x||VE),a.length>1&&a.sort(x||VE)}function g(){for(let y=e,x=i.length;y<x;y++){const b=i[y];if(b.id===null)break;b.id=null,b.object=null,b.geometry=null,b.material=null,b.group=null}}return{opaque:t,transmissive:n,transparent:a,init:s,push:c,unshift:f,finish:g,sort:d}}function AF(){let i=new WeakMap;function e(n,a){const s=i.get(n);let o;return s===void 0?(o=new HE,i.set(n,[o])):a>=s.length?(o=new HE,s.push(o)):o=s[a],o}function t(){i=new WeakMap}return{get:e,dispose:t}}function EF(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new pe,color:new Ht};break;case"SpotLight":t={position:new pe,direction:new pe,color:new Ht,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new pe,color:new Ht,distance:0,decay:0};break;case"HemisphereLight":t={direction:new pe,skyColor:new Ht,groundColor:new Ht};break;case"RectAreaLight":t={color:new Ht,position:new pe,halfWidth:new pe,halfHeight:new pe};break}return i[e.id]=t,t}}}function wF(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new dt};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new dt};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new dt,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let CF=0;function RF(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function DF(i){const e=new EF,t=wF(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let d=0;d<9;d++)n.probe.push(new pe);const a=new pe,s=new gn,o=new gn;function c(d){let g=0,y=0,x=0;for(let B=0;B<9;B++)n.probe[B].set(0,0,0);let b=0,M=0,R=0,C=0,E=0,N=0,I=0,z=0,F=0,V=0,W=0;d.sort(RF);for(let B=0,H=d.length;B<H;B++){const Q=d[B],J=Q.color,oe=Q.intensity,re=Q.distance;let ve=null;if(Q.shadow&&Q.shadow.map&&(Q.shadow.map.texture.format===ld?ve=Q.shadow.map.texture:ve=Q.shadow.map.depthTexture||Q.shadow.map.texture),Q.isAmbientLight)g+=J.r*oe,y+=J.g*oe,x+=J.b*oe;else if(Q.isLightProbe){for(let q=0;q<9;q++)n.probe[q].addScaledVector(Q.sh.coefficients[q],oe);W++}else if(Q.isDirectionalLight){const q=e.get(Q);if(q.color.copy(Q.color).multiplyScalar(Q.intensity),Q.castShadow){const K=Q.shadow,te=t.get(Q);te.shadowIntensity=K.intensity,te.shadowBias=K.bias,te.shadowNormalBias=K.normalBias,te.shadowRadius=K.radius,te.shadowMapSize=K.mapSize,n.directionalShadow[b]=te,n.directionalShadowMap[b]=ve,n.directionalShadowMatrix[b]=Q.shadow.matrix,N++}n.directional[b]=q,b++}else if(Q.isSpotLight){const q=e.get(Q);q.position.setFromMatrixPosition(Q.matrixWorld),q.color.copy(J).multiplyScalar(oe),q.distance=re,q.coneCos=Math.cos(Q.angle),q.penumbraCos=Math.cos(Q.angle*(1-Q.penumbra)),q.decay=Q.decay,n.spot[R]=q;const K=Q.shadow;if(Q.map&&(n.spotLightMap[F]=Q.map,F++,K.updateMatrices(Q),Q.castShadow&&V++),n.spotLightMatrix[R]=K.matrix,Q.castShadow){const te=t.get(Q);te.shadowIntensity=K.intensity,te.shadowBias=K.bias,te.shadowNormalBias=K.normalBias,te.shadowRadius=K.radius,te.shadowMapSize=K.mapSize,n.spotShadow[R]=te,n.spotShadowMap[R]=ve,z++}R++}else if(Q.isRectAreaLight){const q=e.get(Q);q.color.copy(J).multiplyScalar(oe),q.halfWidth.set(Q.width*.5,0,0),q.halfHeight.set(0,Q.height*.5,0),n.rectArea[C]=q,C++}else if(Q.isPointLight){const q=e.get(Q);if(q.color.copy(Q.color).multiplyScalar(Q.intensity),q.distance=Q.distance,q.decay=Q.decay,Q.castShadow){const K=Q.shadow,te=t.get(Q);te.shadowIntensity=K.intensity,te.shadowBias=K.bias,te.shadowNormalBias=K.normalBias,te.shadowRadius=K.radius,te.shadowMapSize=K.mapSize,te.shadowCameraNear=K.camera.near,te.shadowCameraFar=K.camera.far,n.pointShadow[M]=te,n.pointShadowMap[M]=ve,n.pointShadowMatrix[M]=Q.shadow.matrix,I++}n.point[M]=q,M++}else if(Q.isHemisphereLight){const q=e.get(Q);q.skyColor.copy(Q.color).multiplyScalar(oe),q.groundColor.copy(Q.groundColor).multiplyScalar(oe),n.hemi[E]=q,E++}}C>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Ft.LTC_FLOAT_1,n.rectAreaLTC2=Ft.LTC_FLOAT_2):(n.rectAreaLTC1=Ft.LTC_HALF_1,n.rectAreaLTC2=Ft.LTC_HALF_2)),n.ambient[0]=g,n.ambient[1]=y,n.ambient[2]=x;const Z=n.hash;(Z.directionalLength!==b||Z.pointLength!==M||Z.spotLength!==R||Z.rectAreaLength!==C||Z.hemiLength!==E||Z.numDirectionalShadows!==N||Z.numPointShadows!==I||Z.numSpotShadows!==z||Z.numSpotMaps!==F||Z.numLightProbes!==W)&&(n.directional.length=b,n.spot.length=R,n.rectArea.length=C,n.point.length=M,n.hemi.length=E,n.directionalShadow.length=N,n.directionalShadowMap.length=N,n.pointShadow.length=I,n.pointShadowMap.length=I,n.spotShadow.length=z,n.spotShadowMap.length=z,n.directionalShadowMatrix.length=N,n.pointShadowMatrix.length=I,n.spotLightMatrix.length=z+F-V,n.spotLightMap.length=F,n.numSpotLightShadowsWithMaps=V,n.numLightProbes=W,Z.directionalLength=b,Z.pointLength=M,Z.spotLength=R,Z.rectAreaLength=C,Z.hemiLength=E,Z.numDirectionalShadows=N,Z.numPointShadows=I,Z.numSpotShadows=z,Z.numSpotMaps=F,Z.numLightProbes=W,n.version=CF++)}function f(d,g){let y=0,x=0,b=0,M=0,R=0;const C=g.matrixWorldInverse;for(let E=0,N=d.length;E<N;E++){const I=d[E];if(I.isDirectionalLight){const z=n.directional[y];z.direction.setFromMatrixPosition(I.matrixWorld),a.setFromMatrixPosition(I.target.matrixWorld),z.direction.sub(a),z.direction.transformDirection(C),y++}else if(I.isSpotLight){const z=n.spot[b];z.position.setFromMatrixPosition(I.matrixWorld),z.position.applyMatrix4(C),z.direction.setFromMatrixPosition(I.matrixWorld),a.setFromMatrixPosition(I.target.matrixWorld),z.direction.sub(a),z.direction.transformDirection(C),b++}else if(I.isRectAreaLight){const z=n.rectArea[M];z.position.setFromMatrixPosition(I.matrixWorld),z.position.applyMatrix4(C),o.identity(),s.copy(I.matrixWorld),s.premultiply(C),o.extractRotation(s),z.halfWidth.set(I.width*.5,0,0),z.halfHeight.set(0,I.height*.5,0),z.halfWidth.applyMatrix4(o),z.halfHeight.applyMatrix4(o),M++}else if(I.isPointLight){const z=n.point[x];z.position.setFromMatrixPosition(I.matrixWorld),z.position.applyMatrix4(C),x++}else if(I.isHemisphereLight){const z=n.hemi[R];z.direction.setFromMatrixPosition(I.matrixWorld),z.direction.transformDirection(C),R++}}}return{setup:c,setupView:f,state:n}}function GE(i){const e=new DF(i),t=[],n=[];function a(g){d.camera=g,t.length=0,n.length=0}function s(g){t.push(g)}function o(g){n.push(g)}function c(){e.setup(t)}function f(g){e.setupView(t,g)}const d={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:a,state:d,setupLights:c,setupLightsView:f,pushLight:s,pushShadow:o}}function LF(i){let e=new WeakMap;function t(a,s=0){const o=e.get(a);let c;return o===void 0?(c=new GE(i),e.set(a,[c])):s>=o.length?(c=new GE(i),o.push(c)):c=o[s],c}function n(){e=new WeakMap}return{get:t,dispose:n}}const OF=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,NF=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ).rg;
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ).r;
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( max( 0.0, squared_mean - mean * mean ) );
	gl_FragColor = vec4( mean, std_dev, 0.0, 1.0 );
}`,UF=[new pe(1,0,0),new pe(-1,0,0),new pe(0,1,0),new pe(0,-1,0),new pe(0,0,1),new pe(0,0,-1)],IF=[new pe(0,-1,0),new pe(0,-1,0),new pe(0,0,1),new pe(0,0,-1),new pe(0,-1,0),new pe(0,-1,0)],jE=new gn,Eg=new pe,zS=new pe;function PF(i,e,t){let n=new sm;const a=new dt,s=new dt,o=new Ri,c=new W1,f=new q1,d={},g=t.maxTextureSize,y={[Iu]:Vr,[Vr]:Iu,[cl]:cl},x=new pl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new dt},radius:{value:4}},vertexShader:OF,fragmentShader:NF}),b=x.clone();b.defines.HORIZONTAL_PASS=1;const M=new wn;M.setAttribute("position",new Pi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const R=new ma(M,x),C=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Vp;let E=this.type;this.render=function(V,W,Z){if(C.enabled===!1||C.autoUpdate===!1&&C.needsUpdate===!1||V.length===0)return;V.type===Bg&&(It("WebGLShadowMap: PCFSoftShadowMap has been deprecated. Using PCFShadowMap instead."),V.type=Vp);const B=i.getRenderTarget(),H=i.getActiveCubeFace(),Q=i.getActiveMipmapLevel(),J=i.state;J.setBlending(Bc),J.buffers.depth.getReversed()===!0?J.buffers.color.setClear(0,0,0,0):J.buffers.color.setClear(1,1,1,1),J.buffers.depth.setTest(!0),J.setScissorTest(!1);const oe=E!==this.type;oe&&W.traverse(function(re){re.material&&(Array.isArray(re.material)?re.material.forEach(ve=>ve.needsUpdate=!0):re.material.needsUpdate=!0)});for(let re=0,ve=V.length;re<ve;re++){const q=V[re],K=q.shadow;if(K===void 0){It("WebGLShadowMap:",q,"has no shadow.");continue}if(K.autoUpdate===!1&&K.needsUpdate===!1)continue;a.copy(K.mapSize);const te=K.getFrameExtents();if(a.multiply(te),s.copy(K.mapSize),(a.x>g||a.y>g)&&(a.x>g&&(s.x=Math.floor(g/te.x),a.x=s.x*te.x,K.mapSize.x=s.x),a.y>g&&(s.y=Math.floor(g/te.y),a.y=s.y*te.y,K.mapSize.y=s.y)),K.map===null||oe===!0){if(K.map!==null&&(K.map.depthTexture!==null&&(K.map.depthTexture.dispose(),K.map.depthTexture=null),K.map.dispose()),this.type===Zh){if(q.isPointLight){It("WebGLShadowMap: VSM shadow maps are not supported for PointLights. Use PCF or BasicShadowMap instead.");continue}K.map=new ro(a.x,a.y,{format:ld,type:tc,minFilter:Di,magFilter:Di,generateMipmaps:!1}),K.map.texture.name=q.name+".shadowMap",K.map.depthTexture=new fd(a.x,a.y,ar),K.map.depthTexture.name=q.name+".shadowMapDepth",K.map.depthTexture.format=Hc,K.map.depthTexture.compareFunction=null,K.map.depthTexture.minFilter=Ba,K.map.depthTexture.magFilter=Ba}else{q.isPointLight?(K.map=new X2(a.x),K.map.depthTexture=new rR(a.x,dl)):(K.map=new ro(a.x,a.y),K.map.depthTexture=new fd(a.x,a.y,dl)),K.map.depthTexture.name=q.name+".shadowMap",K.map.depthTexture.format=Hc;const ce=i.state.buffers.depth.getReversed();this.type===Vp?(K.map.depthTexture.compareFunction=ce?b1:S1,K.map.depthTexture.minFilter=Di,K.map.depthTexture.magFilter=Di):(K.map.depthTexture.compareFunction=null,K.map.depthTexture.minFilter=Ba,K.map.depthTexture.magFilter=Ba)}K.camera.updateProjectionMatrix()}const de=K.map.isWebGLCubeRenderTarget?6:1;for(let ce=0;ce<de;ce++){if(K.map.isWebGLCubeRenderTarget)i.setRenderTarget(K.map,ce),i.clear();else{ce===0&&(i.setRenderTarget(K.map),i.clear());const G=K.getViewport(ce);o.set(s.x*G.x,s.y*G.y,s.x*G.z,s.y*G.w),J.viewport(o)}if(q.isPointLight){const G=K.camera,ne=K.matrix,fe=q.distance||G.far;fe!==G.far&&(G.far=fe,G.updateProjectionMatrix()),Eg.setFromMatrixPosition(q.matrixWorld),G.position.copy(Eg),zS.copy(G.position),zS.add(UF[ce]),G.up.copy(IF[ce]),G.lookAt(zS),G.updateMatrixWorld(),ne.makeTranslation(-Eg.x,-Eg.y,-Eg.z),jE.multiplyMatrices(G.projectionMatrix,G.matrixWorldInverse),K._frustum.setFromProjectionMatrix(jE,G.coordinateSystem,G.reversedDepth)}else K.updateMatrices(q);n=K.getFrustum(),z(W,Z,K.camera,q,this.type)}K.isPointLightShadow!==!0&&this.type===Zh&&N(K,Z),K.needsUpdate=!1}E=this.type,C.needsUpdate=!1,i.setRenderTarget(B,H,Q)};function N(V,W){const Z=e.update(R);x.defines.VSM_SAMPLES!==V.blurSamples&&(x.defines.VSM_SAMPLES=V.blurSamples,b.defines.VSM_SAMPLES=V.blurSamples,x.needsUpdate=!0,b.needsUpdate=!0),V.mapPass===null&&(V.mapPass=new ro(a.x,a.y,{format:ld,type:tc})),x.uniforms.shadow_pass.value=V.map.depthTexture,x.uniforms.resolution.value=V.mapSize,x.uniforms.radius.value=V.radius,i.setRenderTarget(V.mapPass),i.clear(),i.renderBufferDirect(W,null,Z,x,R,null),b.uniforms.shadow_pass.value=V.mapPass.texture,b.uniforms.resolution.value=V.mapSize,b.uniforms.radius.value=V.radius,i.setRenderTarget(V.map),i.clear(),i.renderBufferDirect(W,null,Z,b,R,null)}function I(V,W,Z,B){let H=null;const Q=Z.isPointLight===!0?V.customDistanceMaterial:V.customDepthMaterial;if(Q!==void 0)H=Q;else if(H=Z.isPointLight===!0?f:c,i.localClippingEnabled&&W.clipShadows===!0&&Array.isArray(W.clippingPlanes)&&W.clippingPlanes.length!==0||W.displacementMap&&W.displacementScale!==0||W.alphaMap&&W.alphaTest>0||W.map&&W.alphaTest>0||W.alphaToCoverage===!0){const J=H.uuid,oe=W.uuid;let re=d[J];re===void 0&&(re={},d[J]=re);let ve=re[oe];ve===void 0&&(ve=H.clone(),re[oe]=ve,W.addEventListener("dispose",F)),H=ve}if(H.visible=W.visible,H.wireframe=W.wireframe,B===Zh?H.side=W.shadowSide!==null?W.shadowSide:W.side:H.side=W.shadowSide!==null?W.shadowSide:y[W.side],H.alphaMap=W.alphaMap,H.alphaTest=W.alphaToCoverage===!0?.5:W.alphaTest,H.map=W.map,H.clipShadows=W.clipShadows,H.clippingPlanes=W.clippingPlanes,H.clipIntersection=W.clipIntersection,H.displacementMap=W.displacementMap,H.displacementScale=W.displacementScale,H.displacementBias=W.displacementBias,H.wireframeLinewidth=W.wireframeLinewidth,H.linewidth=W.linewidth,Z.isPointLight===!0&&H.isMeshDistanceMaterial===!0){const J=i.properties.get(H);J.light=Z}return H}function z(V,W,Z,B,H){if(V.visible===!1)return;if(V.layers.test(W.layers)&&(V.isMesh||V.isLine||V.isPoints)&&(V.castShadow||V.receiveShadow&&H===Zh)&&(!V.frustumCulled||n.intersectsObject(V))){V.modelViewMatrix.multiplyMatrices(Z.matrixWorldInverse,V.matrixWorld);const oe=e.update(V),re=V.material;if(Array.isArray(re)){const ve=oe.groups;for(let q=0,K=ve.length;q<K;q++){const te=ve[q],de=re[te.materialIndex];if(de&&de.visible){const ce=I(V,de,B,H);V.onBeforeShadow(i,V,W,Z,oe,ce,te),i.renderBufferDirect(Z,null,oe,ce,V,te),V.onAfterShadow(i,V,W,Z,oe,ce,te)}}}else if(re.visible){const ve=I(V,re,B,H);V.onBeforeShadow(i,V,W,Z,oe,ve,null),i.renderBufferDirect(Z,null,oe,ve,V,null),V.onAfterShadow(i,V,W,Z,oe,ve,null)}}const J=V.children;for(let oe=0,re=J.length;oe<re;oe++)z(J[oe],W,Z,B,H)}function F(V){V.target.removeEventListener("dispose",F);for(const Z in d){const B=d[Z],H=V.target.uuid;H in B&&(B[H].dispose(),delete B[H])}}}const zF={[r_]:o_,[l_]:f_,[c_]:h_,[od]:u_,[o_]:r_,[f_]:l_,[h_]:c_,[u_]:od};function BF(i,e){function t(){let Se=!1;const it=new Ri;let lt=null;const At=new Ri(0,0,0,0);return{setMask:function(ct){lt!==ct&&!Se&&(i.colorMask(ct,ct,ct,ct),lt=ct)},setLocked:function(ct){Se=ct},setClear:function(ct,je,mt,Rt,Lt){Lt===!0&&(ct*=Rt,je*=Rt,mt*=Rt),it.set(ct,je,mt,Rt),At.equals(it)===!1&&(i.clearColor(ct,je,mt,Rt),At.copy(it))},reset:function(){Se=!1,lt=null,At.set(-1,0,0,0)}}}function n(){let Se=!1,it=!1,lt=null,At=null,ct=null;return{setReversed:function(je){if(it!==je){const mt=e.get("EXT_clip_control");je?mt.clipControlEXT(mt.LOWER_LEFT_EXT,mt.ZERO_TO_ONE_EXT):mt.clipControlEXT(mt.LOWER_LEFT_EXT,mt.NEGATIVE_ONE_TO_ONE_EXT),it=je;const Rt=ct;ct=null,this.setClear(Rt)}},getReversed:function(){return it},setTest:function(je){je?_e(i.DEPTH_TEST):Ae(i.DEPTH_TEST)},setMask:function(je){lt!==je&&!Se&&(i.depthMask(je),lt=je)},setFunc:function(je){if(it&&(je=zF[je]),At!==je){switch(je){case r_:i.depthFunc(i.NEVER);break;case o_:i.depthFunc(i.ALWAYS);break;case l_:i.depthFunc(i.LESS);break;case od:i.depthFunc(i.LEQUAL);break;case c_:i.depthFunc(i.EQUAL);break;case u_:i.depthFunc(i.GEQUAL);break;case f_:i.depthFunc(i.GREATER);break;case h_:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}At=je}},setLocked:function(je){Se=je},setClear:function(je){ct!==je&&(it&&(je=1-je),i.clearDepth(je),ct=je)},reset:function(){Se=!1,lt=null,At=null,ct=null,it=!1}}}function a(){let Se=!1,it=null,lt=null,At=null,ct=null,je=null,mt=null,Rt=null,Lt=null;return{setTest:function(qt){Se||(qt?_e(i.STENCIL_TEST):Ae(i.STENCIL_TEST))},setMask:function(qt){it!==qt&&!Se&&(i.stencilMask(qt),it=qt)},setFunc:function(qt,bn,Bn){(lt!==qt||At!==bn||ct!==Bn)&&(i.stencilFunc(qt,bn,Bn),lt=qt,At=bn,ct=Bn)},setOp:function(qt,bn,Bn){(je!==qt||mt!==bn||Rt!==Bn)&&(i.stencilOp(qt,bn,Bn),je=qt,mt=bn,Rt=Bn)},setLocked:function(qt){Se=qt},setClear:function(qt){Lt!==qt&&(i.clearStencil(qt),Lt=qt)},reset:function(){Se=!1,it=null,lt=null,At=null,ct=null,je=null,mt=null,Rt=null,Lt=null}}}const s=new t,o=new n,c=new a,f=new WeakMap,d=new WeakMap;let g={},y={},x=new WeakMap,b=[],M=null,R=!1,C=null,E=null,N=null,I=null,z=null,F=null,V=null,W=new Ht(0,0,0),Z=0,B=!1,H=null,Q=null,J=null,oe=null,re=null;const ve=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let q=!1,K=0;const te=i.getParameter(i.VERSION);te.indexOf("WebGL")!==-1?(K=parseFloat(/^WebGL (\d)/.exec(te)[1]),q=K>=1):te.indexOf("OpenGL ES")!==-1&&(K=parseFloat(/^OpenGL ES (\d)/.exec(te)[1]),q=K>=2);let de=null,ce={};const G=i.getParameter(i.SCISSOR_BOX),ne=i.getParameter(i.VIEWPORT),fe=new Ri().fromArray(G),me=new Ri().fromArray(ne);function xe(Se,it,lt,At){const ct=new Uint8Array(4),je=i.createTexture();i.bindTexture(Se,je),i.texParameteri(Se,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(Se,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let mt=0;mt<lt;mt++)Se===i.TEXTURE_3D||Se===i.TEXTURE_2D_ARRAY?i.texImage3D(it,0,i.RGBA,1,1,At,0,i.RGBA,i.UNSIGNED_BYTE,ct):i.texImage2D(it+mt,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,ct);return je}const he={};he[i.TEXTURE_2D]=xe(i.TEXTURE_2D,i.TEXTURE_2D,1),he[i.TEXTURE_CUBE_MAP]=xe(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),he[i.TEXTURE_2D_ARRAY]=xe(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),he[i.TEXTURE_3D]=xe(i.TEXTURE_3D,i.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),c.setClear(0),_e(i.DEPTH_TEST),o.setFunc(od),Fe(!1),rt(Ab),_e(i.CULL_FACE),Ne(Bc);function _e(Se){g[Se]!==!0&&(i.enable(Se),g[Se]=!0)}function Ae(Se){g[Se]!==!1&&(i.disable(Se),g[Se]=!1)}function $e(Se,it){return y[Se]!==it?(i.bindFramebuffer(Se,it),y[Se]=it,Se===i.DRAW_FRAMEBUFFER&&(y[i.FRAMEBUFFER]=it),Se===i.FRAMEBUFFER&&(y[i.DRAW_FRAMEBUFFER]=it),!0):!1}function et(Se,it){let lt=b,At=!1;if(Se){lt=x.get(it),lt===void 0&&(lt=[],x.set(it,lt));const ct=Se.textures;if(lt.length!==ct.length||lt[0]!==i.COLOR_ATTACHMENT0){for(let je=0,mt=ct.length;je<mt;je++)lt[je]=i.COLOR_ATTACHMENT0+je;lt.length=ct.length,At=!0}}else lt[0]!==i.BACK&&(lt[0]=i.BACK,At=!0);At&&i.drawBuffers(lt)}function qe(Se){return M!==Se?(i.useProgram(Se),M=Se,!0):!1}const nt={[Uf]:i.FUNC_ADD,[hC]:i.FUNC_SUBTRACT,[dC]:i.FUNC_REVERSE_SUBTRACT};nt[pC]=i.MIN,nt[mC]=i.MAX;const St={[gC]:i.ZERO,[vC]:i.ONE,[yC]:i.SRC_COLOR,[a_]:i.SRC_ALPHA,[MC]:i.SRC_ALPHA_SATURATE,[bC]:i.DST_COLOR,[xC]:i.DST_ALPHA,[_C]:i.ONE_MINUS_SRC_COLOR,[s_]:i.ONE_MINUS_SRC_ALPHA,[TC]:i.ONE_MINUS_DST_COLOR,[SC]:i.ONE_MINUS_DST_ALPHA,[AC]:i.CONSTANT_COLOR,[EC]:i.ONE_MINUS_CONSTANT_COLOR,[wC]:i.CONSTANT_ALPHA,[CC]:i.ONE_MINUS_CONSTANT_ALPHA};function Ne(Se,it,lt,At,ct,je,mt,Rt,Lt,qt){if(Se===Bc){R===!0&&(Ae(i.BLEND),R=!1);return}if(R===!1&&(_e(i.BLEND),R=!0),Se!==fC){if(Se!==C||qt!==B){if((E!==Uf||z!==Uf)&&(i.blendEquation(i.FUNC_ADD),E=Uf,z=Uf),qt)switch(Se){case td:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case Eb:i.blendFunc(i.ONE,i.ONE);break;case wb:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case Cb:i.blendFuncSeparate(i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA,i.ZERO,i.ONE);break;default:rn("WebGLState: Invalid blending: ",Se);break}else switch(Se){case td:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case Eb:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE,i.ONE,i.ONE);break;case wb:rn("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case Cb:rn("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:rn("WebGLState: Invalid blending: ",Se);break}N=null,I=null,F=null,V=null,W.set(0,0,0),Z=0,C=Se,B=qt}return}ct=ct||it,je=je||lt,mt=mt||At,(it!==E||ct!==z)&&(i.blendEquationSeparate(nt[it],nt[ct]),E=it,z=ct),(lt!==N||At!==I||je!==F||mt!==V)&&(i.blendFuncSeparate(St[lt],St[At],St[je],St[mt]),N=lt,I=At,F=je,V=mt),(Rt.equals(W)===!1||Lt!==Z)&&(i.blendColor(Rt.r,Rt.g,Rt.b,Lt),W.copy(Rt),Z=Lt),C=Se,B=!1}function Ve(Se,it){Se.side===cl?Ae(i.CULL_FACE):_e(i.CULL_FACE);let lt=Se.side===Vr;it&&(lt=!lt),Fe(lt),Se.blending===td&&Se.transparent===!1?Ne(Bc):Ne(Se.blending,Se.blendEquation,Se.blendSrc,Se.blendDst,Se.blendEquationAlpha,Se.blendSrcAlpha,Se.blendDstAlpha,Se.blendColor,Se.blendAlpha,Se.premultipliedAlpha),o.setFunc(Se.depthFunc),o.setTest(Se.depthTest),o.setMask(Se.depthWrite),s.setMask(Se.colorWrite);const At=Se.stencilWrite;c.setTest(At),At&&(c.setMask(Se.stencilWriteMask),c.setFunc(Se.stencilFunc,Se.stencilRef,Se.stencilFuncMask),c.setOp(Se.stencilFail,Se.stencilZFail,Se.stencilZPass)),ut(Se.polygonOffset,Se.polygonOffsetFactor,Se.polygonOffsetUnits),Se.alphaToCoverage===!0?_e(i.SAMPLE_ALPHA_TO_COVERAGE):Ae(i.SAMPLE_ALPHA_TO_COVERAGE)}function Fe(Se){H!==Se&&(Se?i.frontFace(i.CW):i.frontFace(i.CCW),H=Se)}function rt(Se){Se!==lC?(_e(i.CULL_FACE),Se!==Q&&(Se===Ab?i.cullFace(i.BACK):Se===cC?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):Ae(i.CULL_FACE),Q=Se}function ae(Se){Se!==J&&(q&&i.lineWidth(Se),J=Se)}function ut(Se,it,lt){Se?(_e(i.POLYGON_OFFSET_FILL),(oe!==it||re!==lt)&&(i.polygonOffset(it,lt),oe=it,re=lt)):Ae(i.POLYGON_OFFSET_FILL)}function Ze(Se){Se?_e(i.SCISSOR_TEST):Ae(i.SCISSOR_TEST)}function Le(Se){Se===void 0&&(Se=i.TEXTURE0+ve-1),de!==Se&&(i.activeTexture(Se),de=Se)}function tt(Se,it,lt){lt===void 0&&(de===null?lt=i.TEXTURE0+ve-1:lt=de);let At=ce[lt];At===void 0&&(At={type:void 0,texture:void 0},ce[lt]=At),(At.type!==Se||At.texture!==it)&&(de!==lt&&(i.activeTexture(lt),de=lt),i.bindTexture(Se,it||he[Se]),At.type=Se,At.texture=it)}function $(){const Se=ce[de];Se!==void 0&&Se.type!==void 0&&(i.bindTexture(Se.type,null),Se.type=void 0,Se.texture=void 0)}function Y(){try{i.compressedTexImage2D(...arguments)}catch(Se){rn("WebGLState:",Se)}}function ye(){try{i.compressedTexImage3D(...arguments)}catch(Se){rn("WebGLState:",Se)}}function Be(){try{i.texSubImage2D(...arguments)}catch(Se){rn("WebGLState:",Se)}}function De(){try{i.texSubImage3D(...arguments)}catch(Se){rn("WebGLState:",Se)}}function Ce(){try{i.compressedTexSubImage2D(...arguments)}catch(Se){rn("WebGLState:",Se)}}function vt(){try{i.compressedTexSubImage3D(...arguments)}catch(Se){rn("WebGLState:",Se)}}function ht(){try{i.texStorage2D(...arguments)}catch(Se){rn("WebGLState:",Se)}}function bt(){try{i.texStorage3D(...arguments)}catch(Se){rn("WebGLState:",Se)}}function Ct(){try{i.texImage2D(...arguments)}catch(Se){rn("WebGLState:",Se)}}function Ge(){try{i.texImage3D(...arguments)}catch(Se){rn("WebGLState:",Se)}}function Qe(Se){fe.equals(Se)===!1&&(i.scissor(Se.x,Se.y,Se.z,Se.w),fe.copy(Se))}function st(Se){me.equals(Se)===!1&&(i.viewport(Se.x,Se.y,Se.z,Se.w),me.copy(Se))}function ge(Se,it){let lt=d.get(it);lt===void 0&&(lt=new WeakMap,d.set(it,lt));let At=lt.get(Se);At===void 0&&(At=i.getUniformBlockIndex(it,Se.name),lt.set(Se,At))}function we(Se,it){const At=d.get(it).get(Se);f.get(it)!==At&&(i.uniformBlockBinding(it,At,Se.__bindingPointIndex),f.set(it,At))}function xt(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),o.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),g={},de=null,ce={},y={},x=new WeakMap,b=[],M=null,R=!1,C=null,E=null,N=null,I=null,z=null,F=null,V=null,W=new Ht(0,0,0),Z=0,B=!1,H=null,Q=null,J=null,oe=null,re=null,fe.set(0,0,i.canvas.width,i.canvas.height),me.set(0,0,i.canvas.width,i.canvas.height),s.reset(),o.reset(),c.reset()}return{buffers:{color:s,depth:o,stencil:c},enable:_e,disable:Ae,bindFramebuffer:$e,drawBuffers:et,useProgram:qe,setBlending:Ne,setMaterial:Ve,setFlipSided:Fe,setCullFace:rt,setLineWidth:ae,setPolygonOffset:ut,setScissorTest:Ze,activeTexture:Le,bindTexture:tt,unbindTexture:$,compressedTexImage2D:Y,compressedTexImage3D:ye,texImage2D:Ct,texImage3D:Ge,updateUBOMapping:ge,uniformBlockBinding:we,texStorage2D:ht,texStorage3D:bt,texSubImage2D:Be,texSubImage3D:De,compressedTexSubImage2D:Ce,compressedTexSubImage3D:vt,scissor:Qe,viewport:st,reset:xt}}function FF(i,e,t,n,a,s,o){const c=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),d=new dt,g=new WeakMap;let y;const x=new WeakMap;let b=!1;try{b=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function M($,Y){return b?new OffscreenCanvas($,Y):c0("canvas")}function R($,Y,ye){let Be=1;const De=tt($);if((De.width>ye||De.height>ye)&&(Be=ye/Math.max(De.width,De.height)),Be<1)if(typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&$ instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&$ instanceof ImageBitmap||typeof VideoFrame<"u"&&$ instanceof VideoFrame){const Ce=Math.floor(Be*De.width),vt=Math.floor(Be*De.height);y===void 0&&(y=M(Ce,vt));const ht=Y?M(Ce,vt):y;return ht.width=Ce,ht.height=vt,ht.getContext("2d").drawImage($,0,0,Ce,vt),It("WebGLRenderer: Texture has been resized from ("+De.width+"x"+De.height+") to ("+Ce+"x"+vt+")."),ht}else return"data"in $&&It("WebGLRenderer: Image in DataTexture is too big ("+De.width+"x"+De.height+")."),$;return $}function C($){return $.generateMipmaps}function E($){i.generateMipmap($)}function N($){return $.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:$.isWebGL3DRenderTarget?i.TEXTURE_3D:$.isWebGLArrayRenderTarget||$.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function I($,Y,ye,Be,De=!1){if($!==null){if(i[$]!==void 0)return i[$];It("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+$+"'")}let Ce=Y;if(Y===i.RED&&(ye===i.FLOAT&&(Ce=i.R32F),ye===i.HALF_FLOAT&&(Ce=i.R16F),ye===i.UNSIGNED_BYTE&&(Ce=i.R8)),Y===i.RED_INTEGER&&(ye===i.UNSIGNED_BYTE&&(Ce=i.R8UI),ye===i.UNSIGNED_SHORT&&(Ce=i.R16UI),ye===i.UNSIGNED_INT&&(Ce=i.R32UI),ye===i.BYTE&&(Ce=i.R8I),ye===i.SHORT&&(Ce=i.R16I),ye===i.INT&&(Ce=i.R32I)),Y===i.RG&&(ye===i.FLOAT&&(Ce=i.RG32F),ye===i.HALF_FLOAT&&(Ce=i.RG16F),ye===i.UNSIGNED_BYTE&&(Ce=i.RG8)),Y===i.RG_INTEGER&&(ye===i.UNSIGNED_BYTE&&(Ce=i.RG8UI),ye===i.UNSIGNED_SHORT&&(Ce=i.RG16UI),ye===i.UNSIGNED_INT&&(Ce=i.RG32UI),ye===i.BYTE&&(Ce=i.RG8I),ye===i.SHORT&&(Ce=i.RG16I),ye===i.INT&&(Ce=i.RG32I)),Y===i.RGB_INTEGER&&(ye===i.UNSIGNED_BYTE&&(Ce=i.RGB8UI),ye===i.UNSIGNED_SHORT&&(Ce=i.RGB16UI),ye===i.UNSIGNED_INT&&(Ce=i.RGB32UI),ye===i.BYTE&&(Ce=i.RGB8I),ye===i.SHORT&&(Ce=i.RGB16I),ye===i.INT&&(Ce=i.RGB32I)),Y===i.RGBA_INTEGER&&(ye===i.UNSIGNED_BYTE&&(Ce=i.RGBA8UI),ye===i.UNSIGNED_SHORT&&(Ce=i.RGBA16UI),ye===i.UNSIGNED_INT&&(Ce=i.RGBA32UI),ye===i.BYTE&&(Ce=i.RGBA8I),ye===i.SHORT&&(Ce=i.RGBA16I),ye===i.INT&&(Ce=i.RGBA32I)),Y===i.RGB&&(ye===i.UNSIGNED_INT_5_9_9_9_REV&&(Ce=i.RGB9_E5),ye===i.UNSIGNED_INT_10F_11F_11F_REV&&(Ce=i.R11F_G11F_B10F)),Y===i.RGBA){const vt=De?o0:Xn.getTransfer(Be);ye===i.FLOAT&&(Ce=i.RGBA32F),ye===i.HALF_FLOAT&&(Ce=i.RGBA16F),ye===i.UNSIGNED_BYTE&&(Ce=vt===Mi?i.SRGB8_ALPHA8:i.RGBA8),ye===i.UNSIGNED_SHORT_4_4_4_4&&(Ce=i.RGBA4),ye===i.UNSIGNED_SHORT_5_5_5_1&&(Ce=i.RGB5_A1)}return(Ce===i.R16F||Ce===i.R32F||Ce===i.RG16F||Ce===i.RG32F||Ce===i.RGBA16F||Ce===i.RGBA32F)&&e.get("EXT_color_buffer_float"),Ce}function z($,Y){let ye;return $?Y===null||Y===dl||Y===Wp?ye=i.DEPTH24_STENCIL8:Y===ar?ye=i.DEPTH32F_STENCIL8:Y===jp&&(ye=i.DEPTH24_STENCIL8,It("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):Y===null||Y===dl||Y===Wp?ye=i.DEPTH_COMPONENT24:Y===ar?ye=i.DEPTH_COMPONENT32F:Y===jp&&(ye=i.DEPTH_COMPONENT16),ye}function F($,Y){return C($)===!0||$.isFramebufferTexture&&$.minFilter!==Ba&&$.minFilter!==Di?Math.log2(Math.max(Y.width,Y.height))+1:$.mipmaps!==void 0&&$.mipmaps.length>0?$.mipmaps.length:$.isCompressedTexture&&Array.isArray($.image)?Y.mipmaps.length:1}function V($){const Y=$.target;Y.removeEventListener("dispose",V),Z(Y),Y.isVideoTexture&&g.delete(Y)}function W($){const Y=$.target;Y.removeEventListener("dispose",W),H(Y)}function Z($){const Y=n.get($);if(Y.__webglInit===void 0)return;const ye=$.source,Be=x.get(ye);if(Be){const De=Be[Y.__cacheKey];De.usedTimes--,De.usedTimes===0&&B($),Object.keys(Be).length===0&&x.delete(ye)}n.remove($)}function B($){const Y=n.get($);i.deleteTexture(Y.__webglTexture);const ye=$.source,Be=x.get(ye);delete Be[Y.__cacheKey],o.memory.textures--}function H($){const Y=n.get($);if($.depthTexture&&($.depthTexture.dispose(),n.remove($.depthTexture)),$.isWebGLCubeRenderTarget)for(let Be=0;Be<6;Be++){if(Array.isArray(Y.__webglFramebuffer[Be]))for(let De=0;De<Y.__webglFramebuffer[Be].length;De++)i.deleteFramebuffer(Y.__webglFramebuffer[Be][De]);else i.deleteFramebuffer(Y.__webglFramebuffer[Be]);Y.__webglDepthbuffer&&i.deleteRenderbuffer(Y.__webglDepthbuffer[Be])}else{if(Array.isArray(Y.__webglFramebuffer))for(let Be=0;Be<Y.__webglFramebuffer.length;Be++)i.deleteFramebuffer(Y.__webglFramebuffer[Be]);else i.deleteFramebuffer(Y.__webglFramebuffer);if(Y.__webglDepthbuffer&&i.deleteRenderbuffer(Y.__webglDepthbuffer),Y.__webglMultisampledFramebuffer&&i.deleteFramebuffer(Y.__webglMultisampledFramebuffer),Y.__webglColorRenderbuffer)for(let Be=0;Be<Y.__webglColorRenderbuffer.length;Be++)Y.__webglColorRenderbuffer[Be]&&i.deleteRenderbuffer(Y.__webglColorRenderbuffer[Be]);Y.__webglDepthRenderbuffer&&i.deleteRenderbuffer(Y.__webglDepthRenderbuffer)}const ye=$.textures;for(let Be=0,De=ye.length;Be<De;Be++){const Ce=n.get(ye[Be]);Ce.__webglTexture&&(i.deleteTexture(Ce.__webglTexture),o.memory.textures--),n.remove(ye[Be])}n.remove($)}let Q=0;function J(){Q=0}function oe(){const $=Q;return $>=a.maxTextures&&It("WebGLTextures: Trying to use "+$+" texture units while this GPU supports only "+a.maxTextures),Q+=1,$}function re($){const Y=[];return Y.push($.wrapS),Y.push($.wrapT),Y.push($.wrapR||0),Y.push($.magFilter),Y.push($.minFilter),Y.push($.anisotropy),Y.push($.internalFormat),Y.push($.format),Y.push($.type),Y.push($.generateMipmaps),Y.push($.premultiplyAlpha),Y.push($.flipY),Y.push($.unpackAlignment),Y.push($.colorSpace),Y.join()}function ve($,Y){const ye=n.get($);if($.isVideoTexture&&Ze($),$.isRenderTargetTexture===!1&&$.isExternalTexture!==!0&&$.version>0&&ye.__version!==$.version){const Be=$.image;if(Be===null)It("WebGLRenderer: Texture marked for update but no image data found.");else if(Be.complete===!1)It("WebGLRenderer: Texture marked for update but image is incomplete");else{he(ye,$,Y);return}}else $.isExternalTexture&&(ye.__webglTexture=$.sourceTexture?$.sourceTexture:null);t.bindTexture(i.TEXTURE_2D,ye.__webglTexture,i.TEXTURE0+Y)}function q($,Y){const ye=n.get($);if($.isRenderTargetTexture===!1&&$.version>0&&ye.__version!==$.version){he(ye,$,Y);return}else $.isExternalTexture&&(ye.__webglTexture=$.sourceTexture?$.sourceTexture:null);t.bindTexture(i.TEXTURE_2D_ARRAY,ye.__webglTexture,i.TEXTURE0+Y)}function K($,Y){const ye=n.get($);if($.isRenderTargetTexture===!1&&$.version>0&&ye.__version!==$.version){he(ye,$,Y);return}t.bindTexture(i.TEXTURE_3D,ye.__webglTexture,i.TEXTURE0+Y)}function te($,Y){const ye=n.get($);if($.isCubeDepthTexture!==!0&&$.version>0&&ye.__version!==$.version){_e(ye,$,Y);return}t.bindTexture(i.TEXTURE_CUBE_MAP,ye.__webglTexture,i.TEXTURE0+Y)}const de={[i0]:i.REPEAT,[ao]:i.CLAMP_TO_EDGE,[a0]:i.MIRRORED_REPEAT},ce={[Ba]:i.NEAREST,[U2]:i.NEAREST_MIPMAP_NEAREST,[Op]:i.NEAREST_MIPMAP_LINEAR,[Di]:i.LINEAR,[Fg]:i.LINEAR_MIPMAP_NEAREST,[Ic]:i.LINEAR_MIPMAP_LINEAR},G={[BC]:i.NEVER,[GC]:i.ALWAYS,[FC]:i.LESS,[S1]:i.LEQUAL,[kC]:i.EQUAL,[b1]:i.GEQUAL,[VC]:i.GREATER,[HC]:i.NOTEQUAL};function ne($,Y){if(Y.type===ar&&e.has("OES_texture_float_linear")===!1&&(Y.magFilter===Di||Y.magFilter===Fg||Y.magFilter===Op||Y.magFilter===Ic||Y.minFilter===Di||Y.minFilter===Fg||Y.minFilter===Op||Y.minFilter===Ic)&&It("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri($,i.TEXTURE_WRAP_S,de[Y.wrapS]),i.texParameteri($,i.TEXTURE_WRAP_T,de[Y.wrapT]),($===i.TEXTURE_3D||$===i.TEXTURE_2D_ARRAY)&&i.texParameteri($,i.TEXTURE_WRAP_R,de[Y.wrapR]),i.texParameteri($,i.TEXTURE_MAG_FILTER,ce[Y.magFilter]),i.texParameteri($,i.TEXTURE_MIN_FILTER,ce[Y.minFilter]),Y.compareFunction&&(i.texParameteri($,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri($,i.TEXTURE_COMPARE_FUNC,G[Y.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(Y.magFilter===Ba||Y.minFilter!==Op&&Y.minFilter!==Ic||Y.type===ar&&e.has("OES_texture_float_linear")===!1)return;if(Y.anisotropy>1||n.get(Y).__currentAnisotropy){const ye=e.get("EXT_texture_filter_anisotropic");i.texParameterf($,ye.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Y.anisotropy,a.getMaxAnisotropy())),n.get(Y).__currentAnisotropy=Y.anisotropy}}}function fe($,Y){let ye=!1;$.__webglInit===void 0&&($.__webglInit=!0,Y.addEventListener("dispose",V));const Be=Y.source;let De=x.get(Be);De===void 0&&(De={},x.set(Be,De));const Ce=re(Y);if(Ce!==$.__cacheKey){De[Ce]===void 0&&(De[Ce]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,ye=!0),De[Ce].usedTimes++;const vt=De[$.__cacheKey];vt!==void 0&&(De[$.__cacheKey].usedTimes--,vt.usedTimes===0&&B(Y)),$.__cacheKey=Ce,$.__webglTexture=De[Ce].texture}return ye}function me($,Y,ye){return Math.floor(Math.floor($/ye)/Y)}function xe($,Y,ye,Be){const Ce=$.updateRanges;if(Ce.length===0)t.texSubImage2D(i.TEXTURE_2D,0,0,0,Y.width,Y.height,ye,Be,Y.data);else{Ce.sort((Ge,Qe)=>Ge.start-Qe.start);let vt=0;for(let Ge=1;Ge<Ce.length;Ge++){const Qe=Ce[vt],st=Ce[Ge],ge=Qe.start+Qe.count,we=me(st.start,Y.width,4),xt=me(Qe.start,Y.width,4);st.start<=ge+1&&we===xt&&me(st.start+st.count-1,Y.width,4)===we?Qe.count=Math.max(Qe.count,st.start+st.count-Qe.start):(++vt,Ce[vt]=st)}Ce.length=vt+1;const ht=i.getParameter(i.UNPACK_ROW_LENGTH),bt=i.getParameter(i.UNPACK_SKIP_PIXELS),Ct=i.getParameter(i.UNPACK_SKIP_ROWS);i.pixelStorei(i.UNPACK_ROW_LENGTH,Y.width);for(let Ge=0,Qe=Ce.length;Ge<Qe;Ge++){const st=Ce[Ge],ge=Math.floor(st.start/4),we=Math.ceil(st.count/4),xt=ge%Y.width,Se=Math.floor(ge/Y.width),it=we,lt=1;i.pixelStorei(i.UNPACK_SKIP_PIXELS,xt),i.pixelStorei(i.UNPACK_SKIP_ROWS,Se),t.texSubImage2D(i.TEXTURE_2D,0,xt,Se,it,lt,ye,Be,Y.data)}$.clearUpdateRanges(),i.pixelStorei(i.UNPACK_ROW_LENGTH,ht),i.pixelStorei(i.UNPACK_SKIP_PIXELS,bt),i.pixelStorei(i.UNPACK_SKIP_ROWS,Ct)}}function he($,Y,ye){let Be=i.TEXTURE_2D;(Y.isDataArrayTexture||Y.isCompressedArrayTexture)&&(Be=i.TEXTURE_2D_ARRAY),Y.isData3DTexture&&(Be=i.TEXTURE_3D);const De=fe($,Y),Ce=Y.source;t.bindTexture(Be,$.__webglTexture,i.TEXTURE0+ye);const vt=n.get(Ce);if(Ce.version!==vt.__version||De===!0){t.activeTexture(i.TEXTURE0+ye);const ht=Xn.getPrimaries(Xn.workingColorSpace),bt=Y.colorSpace===Du?null:Xn.getPrimaries(Y.colorSpace),Ct=Y.colorSpace===Du||ht===bt?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,Y.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,Y.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ct);let Ge=R(Y.image,!1,a.maxTextureSize);Ge=Le(Y,Ge);const Qe=s.convert(Y.format,Y.colorSpace),st=s.convert(Y.type);let ge=I(Y.internalFormat,Qe,st,Y.colorSpace,Y.isVideoTexture);ne(Be,Y);let we;const xt=Y.mipmaps,Se=Y.isVideoTexture!==!0,it=vt.__version===void 0||De===!0,lt=Ce.dataReady,At=F(Y,Ge);if(Y.isDepthTexture)ge=z(Y.format===zf,Y.type),it&&(Se?t.texStorage2D(i.TEXTURE_2D,1,ge,Ge.width,Ge.height):t.texImage2D(i.TEXTURE_2D,0,ge,Ge.width,Ge.height,0,Qe,st,null));else if(Y.isDataTexture)if(xt.length>0){Se&&it&&t.texStorage2D(i.TEXTURE_2D,At,ge,xt[0].width,xt[0].height);for(let ct=0,je=xt.length;ct<je;ct++)we=xt[ct],Se?lt&&t.texSubImage2D(i.TEXTURE_2D,ct,0,0,we.width,we.height,Qe,st,we.data):t.texImage2D(i.TEXTURE_2D,ct,ge,we.width,we.height,0,Qe,st,we.data);Y.generateMipmaps=!1}else Se?(it&&t.texStorage2D(i.TEXTURE_2D,At,ge,Ge.width,Ge.height),lt&&xe(Y,Ge,Qe,st)):t.texImage2D(i.TEXTURE_2D,0,ge,Ge.width,Ge.height,0,Qe,st,Ge.data);else if(Y.isCompressedTexture)if(Y.isCompressedArrayTexture){Se&&it&&t.texStorage3D(i.TEXTURE_2D_ARRAY,At,ge,xt[0].width,xt[0].height,Ge.depth);for(let ct=0,je=xt.length;ct<je;ct++)if(we=xt[ct],Y.format!==sr)if(Qe!==null)if(Se){if(lt)if(Y.layerUpdates.size>0){const mt=Fb(we.width,we.height,Y.format,Y.type);for(const Rt of Y.layerUpdates){const Lt=we.data.subarray(Rt*mt/we.data.BYTES_PER_ELEMENT,(Rt+1)*mt/we.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,ct,0,0,Rt,we.width,we.height,1,Qe,Lt)}Y.clearLayerUpdates()}else t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,ct,0,0,0,we.width,we.height,Ge.depth,Qe,we.data)}else t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,ct,ge,we.width,we.height,Ge.depth,0,we.data,0,0);else It("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Se?lt&&t.texSubImage3D(i.TEXTURE_2D_ARRAY,ct,0,0,0,we.width,we.height,Ge.depth,Qe,st,we.data):t.texImage3D(i.TEXTURE_2D_ARRAY,ct,ge,we.width,we.height,Ge.depth,0,Qe,st,we.data)}else{Se&&it&&t.texStorage2D(i.TEXTURE_2D,At,ge,xt[0].width,xt[0].height);for(let ct=0,je=xt.length;ct<je;ct++)we=xt[ct],Y.format!==sr?Qe!==null?Se?lt&&t.compressedTexSubImage2D(i.TEXTURE_2D,ct,0,0,we.width,we.height,Qe,we.data):t.compressedTexImage2D(i.TEXTURE_2D,ct,ge,we.width,we.height,0,we.data):It("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Se?lt&&t.texSubImage2D(i.TEXTURE_2D,ct,0,0,we.width,we.height,Qe,st,we.data):t.texImage2D(i.TEXTURE_2D,ct,ge,we.width,we.height,0,Qe,st,we.data)}else if(Y.isDataArrayTexture)if(Se){if(it&&t.texStorage3D(i.TEXTURE_2D_ARRAY,At,ge,Ge.width,Ge.height,Ge.depth),lt)if(Y.layerUpdates.size>0){const ct=Fb(Ge.width,Ge.height,Y.format,Y.type);for(const je of Y.layerUpdates){const mt=Ge.data.subarray(je*ct/Ge.data.BYTES_PER_ELEMENT,(je+1)*ct/Ge.data.BYTES_PER_ELEMENT);t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,je,Ge.width,Ge.height,1,Qe,st,mt)}Y.clearLayerUpdates()}else t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Ge.width,Ge.height,Ge.depth,Qe,st,Ge.data)}else t.texImage3D(i.TEXTURE_2D_ARRAY,0,ge,Ge.width,Ge.height,Ge.depth,0,Qe,st,Ge.data);else if(Y.isData3DTexture)Se?(it&&t.texStorage3D(i.TEXTURE_3D,At,ge,Ge.width,Ge.height,Ge.depth),lt&&t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Ge.width,Ge.height,Ge.depth,Qe,st,Ge.data)):t.texImage3D(i.TEXTURE_3D,0,ge,Ge.width,Ge.height,Ge.depth,0,Qe,st,Ge.data);else if(Y.isFramebufferTexture){if(it)if(Se)t.texStorage2D(i.TEXTURE_2D,At,ge,Ge.width,Ge.height);else{let ct=Ge.width,je=Ge.height;for(let mt=0;mt<At;mt++)t.texImage2D(i.TEXTURE_2D,mt,ge,ct,je,0,Qe,st,null),ct>>=1,je>>=1}}else if(xt.length>0){if(Se&&it){const ct=tt(xt[0]);t.texStorage2D(i.TEXTURE_2D,At,ge,ct.width,ct.height)}for(let ct=0,je=xt.length;ct<je;ct++)we=xt[ct],Se?lt&&t.texSubImage2D(i.TEXTURE_2D,ct,0,0,Qe,st,we):t.texImage2D(i.TEXTURE_2D,ct,ge,Qe,st,we);Y.generateMipmaps=!1}else if(Se){if(it){const ct=tt(Ge);t.texStorage2D(i.TEXTURE_2D,At,ge,ct.width,ct.height)}lt&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,Qe,st,Ge)}else t.texImage2D(i.TEXTURE_2D,0,ge,Qe,st,Ge);C(Y)&&E(Be),vt.__version=Ce.version,Y.onUpdate&&Y.onUpdate(Y)}$.__version=Y.version}function _e($,Y,ye){if(Y.image.length!==6)return;const Be=fe($,Y),De=Y.source;t.bindTexture(i.TEXTURE_CUBE_MAP,$.__webglTexture,i.TEXTURE0+ye);const Ce=n.get(De);if(De.version!==Ce.__version||Be===!0){t.activeTexture(i.TEXTURE0+ye);const vt=Xn.getPrimaries(Xn.workingColorSpace),ht=Y.colorSpace===Du?null:Xn.getPrimaries(Y.colorSpace),bt=Y.colorSpace===Du||vt===ht?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,Y.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,Y.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,bt);const Ct=Y.isCompressedTexture||Y.image[0].isCompressedTexture,Ge=Y.image[0]&&Y.image[0].isDataTexture,Qe=[];for(let je=0;je<6;je++)!Ct&&!Ge?Qe[je]=R(Y.image[je],!0,a.maxCubemapSize):Qe[je]=Ge?Y.image[je].image:Y.image[je],Qe[je]=Le(Y,Qe[je]);const st=Qe[0],ge=s.convert(Y.format,Y.colorSpace),we=s.convert(Y.type),xt=I(Y.internalFormat,ge,we,Y.colorSpace),Se=Y.isVideoTexture!==!0,it=Ce.__version===void 0||Be===!0,lt=De.dataReady;let At=F(Y,st);ne(i.TEXTURE_CUBE_MAP,Y);let ct;if(Ct){Se&&it&&t.texStorage2D(i.TEXTURE_CUBE_MAP,At,xt,st.width,st.height);for(let je=0;je<6;je++){ct=Qe[je].mipmaps;for(let mt=0;mt<ct.length;mt++){const Rt=ct[mt];Y.format!==sr?ge!==null?Se?lt&&t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+je,mt,0,0,Rt.width,Rt.height,ge,Rt.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+je,mt,xt,Rt.width,Rt.height,0,Rt.data):It("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Se?lt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+je,mt,0,0,Rt.width,Rt.height,ge,we,Rt.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+je,mt,xt,Rt.width,Rt.height,0,ge,we,Rt.data)}}}else{if(ct=Y.mipmaps,Se&&it){ct.length>0&&At++;const je=tt(Qe[0]);t.texStorage2D(i.TEXTURE_CUBE_MAP,At,xt,je.width,je.height)}for(let je=0;je<6;je++)if(Ge){Se?lt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+je,0,0,0,Qe[je].width,Qe[je].height,ge,we,Qe[je].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+je,0,xt,Qe[je].width,Qe[je].height,0,ge,we,Qe[je].data);for(let mt=0;mt<ct.length;mt++){const Lt=ct[mt].image[je].image;Se?lt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+je,mt+1,0,0,Lt.width,Lt.height,ge,we,Lt.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+je,mt+1,xt,Lt.width,Lt.height,0,ge,we,Lt.data)}}else{Se?lt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+je,0,0,0,ge,we,Qe[je]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+je,0,xt,ge,we,Qe[je]);for(let mt=0;mt<ct.length;mt++){const Rt=ct[mt];Se?lt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+je,mt+1,0,0,ge,we,Rt.image[je]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+je,mt+1,xt,ge,we,Rt.image[je])}}}C(Y)&&E(i.TEXTURE_CUBE_MAP),Ce.__version=De.version,Y.onUpdate&&Y.onUpdate(Y)}$.__version=Y.version}function Ae($,Y,ye,Be,De,Ce){const vt=s.convert(ye.format,ye.colorSpace),ht=s.convert(ye.type),bt=I(ye.internalFormat,vt,ht,ye.colorSpace),Ct=n.get(Y),Ge=n.get(ye);if(Ge.__renderTarget=Y,!Ct.__hasExternalTextures){const Qe=Math.max(1,Y.width>>Ce),st=Math.max(1,Y.height>>Ce);De===i.TEXTURE_3D||De===i.TEXTURE_2D_ARRAY?t.texImage3D(De,Ce,bt,Qe,st,Y.depth,0,vt,ht,null):t.texImage2D(De,Ce,bt,Qe,st,0,vt,ht,null)}t.bindFramebuffer(i.FRAMEBUFFER,$),ut(Y)?c.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Be,De,Ge.__webglTexture,0,ae(Y)):(De===i.TEXTURE_2D||De>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&De<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Be,De,Ge.__webglTexture,Ce),t.bindFramebuffer(i.FRAMEBUFFER,null)}function $e($,Y,ye){if(i.bindRenderbuffer(i.RENDERBUFFER,$),Y.depthBuffer){const Be=Y.depthTexture,De=Be&&Be.isDepthTexture?Be.type:null,Ce=z(Y.stencilBuffer,De),vt=Y.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;ut(Y)?c.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,ae(Y),Ce,Y.width,Y.height):ye?i.renderbufferStorageMultisample(i.RENDERBUFFER,ae(Y),Ce,Y.width,Y.height):i.renderbufferStorage(i.RENDERBUFFER,Ce,Y.width,Y.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,vt,i.RENDERBUFFER,$)}else{const Be=Y.textures;for(let De=0;De<Be.length;De++){const Ce=Be[De],vt=s.convert(Ce.format,Ce.colorSpace),ht=s.convert(Ce.type),bt=I(Ce.internalFormat,vt,ht,Ce.colorSpace);ut(Y)?c.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,ae(Y),bt,Y.width,Y.height):ye?i.renderbufferStorageMultisample(i.RENDERBUFFER,ae(Y),bt,Y.width,Y.height):i.renderbufferStorage(i.RENDERBUFFER,bt,Y.width,Y.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function et($,Y,ye){const Be=Y.isWebGLCubeRenderTarget===!0;if(t.bindFramebuffer(i.FRAMEBUFFER,$),!(Y.depthTexture&&Y.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const De=n.get(Y.depthTexture);if(De.__renderTarget=Y,(!De.__webglTexture||Y.depthTexture.image.width!==Y.width||Y.depthTexture.image.height!==Y.height)&&(Y.depthTexture.image.width=Y.width,Y.depthTexture.image.height=Y.height,Y.depthTexture.needsUpdate=!0),Be){if(De.__webglInit===void 0&&(De.__webglInit=!0,Y.depthTexture.addEventListener("dispose",V)),De.__webglTexture===void 0){De.__webglTexture=i.createTexture(),t.bindTexture(i.TEXTURE_CUBE_MAP,De.__webglTexture),ne(i.TEXTURE_CUBE_MAP,Y.depthTexture);const Ct=s.convert(Y.depthTexture.format),Ge=s.convert(Y.depthTexture.type);let Qe;Y.depthTexture.format===Hc?Qe=i.DEPTH_COMPONENT24:Y.depthTexture.format===zf&&(Qe=i.DEPTH24_STENCIL8);for(let st=0;st<6;st++)i.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+st,0,Qe,Y.width,Y.height,0,Ct,Ge,null)}}else ve(Y.depthTexture,0);const Ce=De.__webglTexture,vt=ae(Y),ht=Be?i.TEXTURE_CUBE_MAP_POSITIVE_X+ye:i.TEXTURE_2D,bt=Y.depthTexture.format===zf?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;if(Y.depthTexture.format===Hc)ut(Y)?c.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,bt,ht,Ce,0,vt):i.framebufferTexture2D(i.FRAMEBUFFER,bt,ht,Ce,0);else if(Y.depthTexture.format===zf)ut(Y)?c.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,bt,ht,Ce,0,vt):i.framebufferTexture2D(i.FRAMEBUFFER,bt,ht,Ce,0);else throw new Error("Unknown depthTexture format")}function qe($){const Y=n.get($),ye=$.isWebGLCubeRenderTarget===!0;if(Y.__boundDepthTexture!==$.depthTexture){const Be=$.depthTexture;if(Y.__depthDisposeCallback&&Y.__depthDisposeCallback(),Be){const De=()=>{delete Y.__boundDepthTexture,delete Y.__depthDisposeCallback,Be.removeEventListener("dispose",De)};Be.addEventListener("dispose",De),Y.__depthDisposeCallback=De}Y.__boundDepthTexture=Be}if($.depthTexture&&!Y.__autoAllocateDepthBuffer)if(ye)for(let Be=0;Be<6;Be++)et(Y.__webglFramebuffer[Be],$,Be);else{const Be=$.texture.mipmaps;Be&&Be.length>0?et(Y.__webglFramebuffer[0],$,0):et(Y.__webglFramebuffer,$,0)}else if(ye){Y.__webglDepthbuffer=[];for(let Be=0;Be<6;Be++)if(t.bindFramebuffer(i.FRAMEBUFFER,Y.__webglFramebuffer[Be]),Y.__webglDepthbuffer[Be]===void 0)Y.__webglDepthbuffer[Be]=i.createRenderbuffer(),$e(Y.__webglDepthbuffer[Be],$,!1);else{const De=$.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Ce=Y.__webglDepthbuffer[Be];i.bindRenderbuffer(i.RENDERBUFFER,Ce),i.framebufferRenderbuffer(i.FRAMEBUFFER,De,i.RENDERBUFFER,Ce)}}else{const Be=$.texture.mipmaps;if(Be&&Be.length>0?t.bindFramebuffer(i.FRAMEBUFFER,Y.__webglFramebuffer[0]):t.bindFramebuffer(i.FRAMEBUFFER,Y.__webglFramebuffer),Y.__webglDepthbuffer===void 0)Y.__webglDepthbuffer=i.createRenderbuffer(),$e(Y.__webglDepthbuffer,$,!1);else{const De=$.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Ce=Y.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,Ce),i.framebufferRenderbuffer(i.FRAMEBUFFER,De,i.RENDERBUFFER,Ce)}}t.bindFramebuffer(i.FRAMEBUFFER,null)}function nt($,Y,ye){const Be=n.get($);Y!==void 0&&Ae(Be.__webglFramebuffer,$,$.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),ye!==void 0&&qe($)}function St($){const Y=$.texture,ye=n.get($),Be=n.get(Y);$.addEventListener("dispose",W);const De=$.textures,Ce=$.isWebGLCubeRenderTarget===!0,vt=De.length>1;if(vt||(Be.__webglTexture===void 0&&(Be.__webglTexture=i.createTexture()),Be.__version=Y.version,o.memory.textures++),Ce){ye.__webglFramebuffer=[];for(let ht=0;ht<6;ht++)if(Y.mipmaps&&Y.mipmaps.length>0){ye.__webglFramebuffer[ht]=[];for(let bt=0;bt<Y.mipmaps.length;bt++)ye.__webglFramebuffer[ht][bt]=i.createFramebuffer()}else ye.__webglFramebuffer[ht]=i.createFramebuffer()}else{if(Y.mipmaps&&Y.mipmaps.length>0){ye.__webglFramebuffer=[];for(let ht=0;ht<Y.mipmaps.length;ht++)ye.__webglFramebuffer[ht]=i.createFramebuffer()}else ye.__webglFramebuffer=i.createFramebuffer();if(vt)for(let ht=0,bt=De.length;ht<bt;ht++){const Ct=n.get(De[ht]);Ct.__webglTexture===void 0&&(Ct.__webglTexture=i.createTexture(),o.memory.textures++)}if($.samples>0&&ut($)===!1){ye.__webglMultisampledFramebuffer=i.createFramebuffer(),ye.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,ye.__webglMultisampledFramebuffer);for(let ht=0;ht<De.length;ht++){const bt=De[ht];ye.__webglColorRenderbuffer[ht]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,ye.__webglColorRenderbuffer[ht]);const Ct=s.convert(bt.format,bt.colorSpace),Ge=s.convert(bt.type),Qe=I(bt.internalFormat,Ct,Ge,bt.colorSpace,$.isXRRenderTarget===!0),st=ae($);i.renderbufferStorageMultisample(i.RENDERBUFFER,st,Qe,$.width,$.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+ht,i.RENDERBUFFER,ye.__webglColorRenderbuffer[ht])}i.bindRenderbuffer(i.RENDERBUFFER,null),$.depthBuffer&&(ye.__webglDepthRenderbuffer=i.createRenderbuffer(),$e(ye.__webglDepthRenderbuffer,$,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(Ce){t.bindTexture(i.TEXTURE_CUBE_MAP,Be.__webglTexture),ne(i.TEXTURE_CUBE_MAP,Y);for(let ht=0;ht<6;ht++)if(Y.mipmaps&&Y.mipmaps.length>0)for(let bt=0;bt<Y.mipmaps.length;bt++)Ae(ye.__webglFramebuffer[ht][bt],$,Y,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+ht,bt);else Ae(ye.__webglFramebuffer[ht],$,Y,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+ht,0);C(Y)&&E(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(vt){for(let ht=0,bt=De.length;ht<bt;ht++){const Ct=De[ht],Ge=n.get(Ct);let Qe=i.TEXTURE_2D;($.isWebGL3DRenderTarget||$.isWebGLArrayRenderTarget)&&(Qe=$.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(Qe,Ge.__webglTexture),ne(Qe,Ct),Ae(ye.__webglFramebuffer,$,Ct,i.COLOR_ATTACHMENT0+ht,Qe,0),C(Ct)&&E(Qe)}t.unbindTexture()}else{let ht=i.TEXTURE_2D;if(($.isWebGL3DRenderTarget||$.isWebGLArrayRenderTarget)&&(ht=$.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(ht,Be.__webglTexture),ne(ht,Y),Y.mipmaps&&Y.mipmaps.length>0)for(let bt=0;bt<Y.mipmaps.length;bt++)Ae(ye.__webglFramebuffer[bt],$,Y,i.COLOR_ATTACHMENT0,ht,bt);else Ae(ye.__webglFramebuffer,$,Y,i.COLOR_ATTACHMENT0,ht,0);C(Y)&&E(ht),t.unbindTexture()}$.depthBuffer&&qe($)}function Ne($){const Y=$.textures;for(let ye=0,Be=Y.length;ye<Be;ye++){const De=Y[ye];if(C(De)){const Ce=N($),vt=n.get(De).__webglTexture;t.bindTexture(Ce,vt),E(Ce),t.unbindTexture()}}}const Ve=[],Fe=[];function rt($){if($.samples>0){if(ut($)===!1){const Y=$.textures,ye=$.width,Be=$.height;let De=i.COLOR_BUFFER_BIT;const Ce=$.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,vt=n.get($),ht=Y.length>1;if(ht)for(let Ct=0;Ct<Y.length;Ct++)t.bindFramebuffer(i.FRAMEBUFFER,vt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ct,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,vt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ct,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,vt.__webglMultisampledFramebuffer);const bt=$.texture.mipmaps;bt&&bt.length>0?t.bindFramebuffer(i.DRAW_FRAMEBUFFER,vt.__webglFramebuffer[0]):t.bindFramebuffer(i.DRAW_FRAMEBUFFER,vt.__webglFramebuffer);for(let Ct=0;Ct<Y.length;Ct++){if($.resolveDepthBuffer&&($.depthBuffer&&(De|=i.DEPTH_BUFFER_BIT),$.stencilBuffer&&$.resolveStencilBuffer&&(De|=i.STENCIL_BUFFER_BIT)),ht){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,vt.__webglColorRenderbuffer[Ct]);const Ge=n.get(Y[Ct]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,Ge,0)}i.blitFramebuffer(0,0,ye,Be,0,0,ye,Be,De,i.NEAREST),f===!0&&(Ve.length=0,Fe.length=0,Ve.push(i.COLOR_ATTACHMENT0+Ct),$.depthBuffer&&$.resolveDepthBuffer===!1&&(Ve.push(Ce),Fe.push(Ce),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,Fe)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,Ve))}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),ht)for(let Ct=0;Ct<Y.length;Ct++){t.bindFramebuffer(i.FRAMEBUFFER,vt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ct,i.RENDERBUFFER,vt.__webglColorRenderbuffer[Ct]);const Ge=n.get(Y[Ct]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,vt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ct,i.TEXTURE_2D,Ge,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,vt.__webglMultisampledFramebuffer)}else if($.depthBuffer&&$.resolveDepthBuffer===!1&&f){const Y=$.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[Y])}}}function ae($){return Math.min(a.maxSamples,$.samples)}function ut($){const Y=n.get($);return $.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Y.__useRenderToTexture!==!1}function Ze($){const Y=o.render.frame;g.get($)!==Y&&(g.set($,Y),$.update())}function Le($,Y){const ye=$.colorSpace,Be=$.format,De=$.type;return $.isCompressedTexture===!0||$.isVideoTexture===!0||ye!==Vf&&ye!==Du&&(Xn.getTransfer(ye)===Mi?(Be!==sr||De!==Br)&&It("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):rn("WebGLTextures: Unsupported texture color space:",ye)),Y}function tt($){return typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement?(d.width=$.naturalWidth||$.width,d.height=$.naturalHeight||$.height):typeof VideoFrame<"u"&&$ instanceof VideoFrame?(d.width=$.displayWidth,d.height=$.displayHeight):(d.width=$.width,d.height=$.height),d}this.allocateTextureUnit=oe,this.resetTextureUnits=J,this.setTexture2D=ve,this.setTexture2DArray=q,this.setTexture3D=K,this.setTextureCube=te,this.rebindTextures=nt,this.setupRenderTarget=St,this.updateRenderTargetMipmap=Ne,this.updateMultisampleRenderTarget=rt,this.setupDepthRenderbuffer=qe,this.setupFrameBufferTexture=Ae,this.useMultisampledRTT=ut,this.isReversedDepthBuffer=function(){return t.buffers.depth.getReversed()}}function KR(i,e){function t(n,a=Du){let s;const o=Xn.getTransfer(a);if(n===Br)return i.UNSIGNED_BYTE;if(n===m1)return i.UNSIGNED_SHORT_4_4_4_4;if(n===g1)return i.UNSIGNED_SHORT_5_5_5_1;if(n===z2)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===B2)return i.UNSIGNED_INT_10F_11F_11F_REV;if(n===I2)return i.BYTE;if(n===P2)return i.SHORT;if(n===jp)return i.UNSIGNED_SHORT;if(n===p1)return i.INT;if(n===dl)return i.UNSIGNED_INT;if(n===ar)return i.FLOAT;if(n===tc)return i.HALF_FLOAT;if(n===F2)return i.ALPHA;if(n===k2)return i.RGB;if(n===sr)return i.RGBA;if(n===Hc)return i.DEPTH_COMPONENT;if(n===zf)return i.DEPTH_STENCIL;if(n===v1)return i.RED;if(n===C0)return i.RED_INTEGER;if(n===ld)return i.RG;if(n===y1)return i.RG_INTEGER;if(n===_1)return i.RGBA_INTEGER;if(n===kg||n===Vg||n===Hg||n===Gg)if(o===Mi)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(n===kg)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Vg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Hg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Gg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(n===kg)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Vg)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Hg)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Gg)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===d_||n===p_||n===m_||n===g_)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(n===d_)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===p_)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===m_)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===g_)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===v_||n===y_||n===__||n===x_||n===S_||n===b_||n===T_)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(n===v_||n===y_)return o===Mi?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===__)return o===Mi?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC;if(n===x_)return s.COMPRESSED_R11_EAC;if(n===S_)return s.COMPRESSED_SIGNED_R11_EAC;if(n===b_)return s.COMPRESSED_RG11_EAC;if(n===T_)return s.COMPRESSED_SIGNED_RG11_EAC}else return null;if(n===M_||n===A_||n===E_||n===w_||n===C_||n===R_||n===D_||n===L_||n===O_||n===N_||n===U_||n===I_||n===P_||n===z_)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(n===M_)return o===Mi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===A_)return o===Mi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===E_)return o===Mi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===w_)return o===Mi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===C_)return o===Mi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===R_)return o===Mi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===D_)return o===Mi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===L_)return o===Mi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===O_)return o===Mi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===N_)return o===Mi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===U_)return o===Mi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===I_)return o===Mi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===P_)return o===Mi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===z_)return o===Mi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===B_||n===F_||n===k_)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(n===B_)return o===Mi?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===F_)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===k_)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===V_||n===H_||n===G_||n===j_)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(n===V_)return s.COMPRESSED_RED_RGTC1_EXT;if(n===H_)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===G_)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===j_)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===Wp?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:t}}const kF=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,VF=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class HF{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const n=new J2(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=n}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new pl({vertexShader:kF,fragmentShader:VF,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new ma(new ku(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class GF extends Gc{constructor(e,t){super();const n=this;let a=null,s=1,o=null,c="local-floor",f=1,d=null,g=null,y=null,x=null,b=null,M=null;const R=typeof XRWebGLBinding<"u",C=new HF,E={},N=t.getContextAttributes();let I=null,z=null;const F=[],V=[],W=new dt;let Z=null;const B=new fa;B.viewport=new Ri;const H=new fa;H.viewport=new Ri;const Q=[B,H],J=new FR;let oe=null,re=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(he){let _e=F[he];return _e===void 0&&(_e=new Zy,F[he]=_e),_e.getTargetRaySpace()},this.getControllerGrip=function(he){let _e=F[he];return _e===void 0&&(_e=new Zy,F[he]=_e),_e.getGripSpace()},this.getHand=function(he){let _e=F[he];return _e===void 0&&(_e=new Zy,F[he]=_e),_e.getHandSpace()};function ve(he){const _e=V.indexOf(he.inputSource);if(_e===-1)return;const Ae=F[_e];Ae!==void 0&&(Ae.update(he.inputSource,he.frame,d||o),Ae.dispatchEvent({type:he.type,data:he.inputSource}))}function q(){a.removeEventListener("select",ve),a.removeEventListener("selectstart",ve),a.removeEventListener("selectend",ve),a.removeEventListener("squeeze",ve),a.removeEventListener("squeezestart",ve),a.removeEventListener("squeezeend",ve),a.removeEventListener("end",q),a.removeEventListener("inputsourceschange",K);for(let he=0;he<F.length;he++){const _e=V[he];_e!==null&&(V[he]=null,F[he].disconnect(_e))}oe=null,re=null,C.reset();for(const he in E)delete E[he];e.setRenderTarget(I),b=null,x=null,y=null,a=null,z=null,xe.stop(),n.isPresenting=!1,e.setPixelRatio(Z),e.setSize(W.width,W.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(he){s=he,n.isPresenting===!0&&It("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(he){c=he,n.isPresenting===!0&&It("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||o},this.setReferenceSpace=function(he){d=he},this.getBaseLayer=function(){return x!==null?x:b},this.getBinding=function(){return y===null&&R&&(y=new XRWebGLBinding(a,t)),y},this.getFrame=function(){return M},this.getSession=function(){return a},this.setSession=async function(he){if(a=he,a!==null){if(I=e.getRenderTarget(),a.addEventListener("select",ve),a.addEventListener("selectstart",ve),a.addEventListener("selectend",ve),a.addEventListener("squeeze",ve),a.addEventListener("squeezestart",ve),a.addEventListener("squeezeend",ve),a.addEventListener("end",q),a.addEventListener("inputsourceschange",K),N.xrCompatible!==!0&&await t.makeXRCompatible(),Z=e.getPixelRatio(),e.getSize(W),R&&"createProjectionLayer"in XRWebGLBinding.prototype){let Ae=null,$e=null,et=null;N.depth&&(et=N.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Ae=N.stencil?zf:Hc,$e=N.stencil?Wp:dl);const qe={colorFormat:t.RGBA8,depthFormat:et,scaleFactor:s};y=this.getBinding(),x=y.createProjectionLayer(qe),a.updateRenderState({layers:[x]}),e.setPixelRatio(1),e.setSize(x.textureWidth,x.textureHeight,!1),z=new ro(x.textureWidth,x.textureHeight,{format:sr,type:Br,depthTexture:new fd(x.textureWidth,x.textureHeight,$e,void 0,void 0,void 0,void 0,void 0,void 0,Ae),stencilBuffer:N.stencil,colorSpace:e.outputColorSpace,samples:N.antialias?4:0,resolveDepthBuffer:x.ignoreDepthValues===!1,resolveStencilBuffer:x.ignoreDepthValues===!1})}else{const Ae={antialias:N.antialias,alpha:!0,depth:N.depth,stencil:N.stencil,framebufferScaleFactor:s};b=new XRWebGLLayer(a,t,Ae),a.updateRenderState({baseLayer:b}),e.setPixelRatio(1),e.setSize(b.framebufferWidth,b.framebufferHeight,!1),z=new ro(b.framebufferWidth,b.framebufferHeight,{format:sr,type:Br,colorSpace:e.outputColorSpace,stencilBuffer:N.stencil,resolveDepthBuffer:b.ignoreDepthValues===!1,resolveStencilBuffer:b.ignoreDepthValues===!1})}z.isXRRenderTarget=!0,this.setFoveation(f),d=null,o=await a.requestReferenceSpace(c),xe.setContext(a),xe.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(a!==null)return a.environmentBlendMode},this.getDepthTexture=function(){return C.getDepthTexture()};function K(he){for(let _e=0;_e<he.removed.length;_e++){const Ae=he.removed[_e],$e=V.indexOf(Ae);$e>=0&&(V[$e]=null,F[$e].disconnect(Ae))}for(let _e=0;_e<he.added.length;_e++){const Ae=he.added[_e];let $e=V.indexOf(Ae);if($e===-1){for(let qe=0;qe<F.length;qe++)if(qe>=V.length){V.push(Ae),$e=qe;break}else if(V[qe]===null){V[qe]=Ae,$e=qe;break}if($e===-1)break}const et=F[$e];et&&et.connect(Ae)}}const te=new pe,de=new pe;function ce(he,_e,Ae){te.setFromMatrixPosition(_e.matrixWorld),de.setFromMatrixPosition(Ae.matrixWorld);const $e=te.distanceTo(de),et=_e.projectionMatrix.elements,qe=Ae.projectionMatrix.elements,nt=et[14]/(et[10]-1),St=et[14]/(et[10]+1),Ne=(et[9]+1)/et[5],Ve=(et[9]-1)/et[5],Fe=(et[8]-1)/et[0],rt=(qe[8]+1)/qe[0],ae=nt*Fe,ut=nt*rt,Ze=$e/(-Fe+rt),Le=Ze*-Fe;if(_e.matrixWorld.decompose(he.position,he.quaternion,he.scale),he.translateX(Le),he.translateZ(Ze),he.matrixWorld.compose(he.position,he.quaternion,he.scale),he.matrixWorldInverse.copy(he.matrixWorld).invert(),et[10]===-1)he.projectionMatrix.copy(_e.projectionMatrix),he.projectionMatrixInverse.copy(_e.projectionMatrixInverse);else{const tt=nt+Ze,$=St+Ze,Y=ae-Le,ye=ut+($e-Le),Be=Ne*St/$*tt,De=Ve*St/$*tt;he.projectionMatrix.makePerspective(Y,ye,Be,De,tt,$),he.projectionMatrixInverse.copy(he.projectionMatrix).invert()}}function G(he,_e){_e===null?he.matrixWorld.copy(he.matrix):he.matrixWorld.multiplyMatrices(_e.matrixWorld,he.matrix),he.matrixWorldInverse.copy(he.matrixWorld).invert()}this.updateCamera=function(he){if(a===null)return;let _e=he.near,Ae=he.far;C.texture!==null&&(C.depthNear>0&&(_e=C.depthNear),C.depthFar>0&&(Ae=C.depthFar)),J.near=H.near=B.near=_e,J.far=H.far=B.far=Ae,(oe!==J.near||re!==J.far)&&(a.updateRenderState({depthNear:J.near,depthFar:J.far}),oe=J.near,re=J.far),J.layers.mask=he.layers.mask|6,B.layers.mask=J.layers.mask&3,H.layers.mask=J.layers.mask&5;const $e=he.parent,et=J.cameras;G(J,$e);for(let qe=0;qe<et.length;qe++)G(et[qe],$e);et.length===2?ce(J,B,H):J.projectionMatrix.copy(B.projectionMatrix),ne(he,J,$e)};function ne(he,_e,Ae){Ae===null?he.matrix.copy(_e.matrixWorld):(he.matrix.copy(Ae.matrixWorld),he.matrix.invert(),he.matrix.multiply(_e.matrixWorld)),he.matrix.decompose(he.position,he.quaternion,he.scale),he.updateMatrixWorld(!0),he.projectionMatrix.copy(_e.projectionMatrix),he.projectionMatrixInverse.copy(_e.projectionMatrixInverse),he.isPerspectiveCamera&&(he.fov=Yp*2*Math.atan(1/he.projectionMatrix.elements[5]),he.zoom=1)}this.getCamera=function(){return J},this.getFoveation=function(){if(!(x===null&&b===null))return f},this.setFoveation=function(he){f=he,x!==null&&(x.fixedFoveation=he),b!==null&&b.fixedFoveation!==void 0&&(b.fixedFoveation=he)},this.hasDepthSensing=function(){return C.texture!==null},this.getDepthSensingMesh=function(){return C.getMesh(J)},this.getCameraTexture=function(he){return E[he]};let fe=null;function me(he,_e){if(g=_e.getViewerPose(d||o),M=_e,g!==null){const Ae=g.views;b!==null&&(e.setRenderTargetFramebuffer(z,b.framebuffer),e.setRenderTarget(z));let $e=!1;Ae.length!==J.cameras.length&&(J.cameras.length=0,$e=!0);for(let St=0;St<Ae.length;St++){const Ne=Ae[St];let Ve=null;if(b!==null)Ve=b.getViewport(Ne);else{const rt=y.getViewSubImage(x,Ne);Ve=rt.viewport,St===0&&(e.setRenderTargetTextures(z,rt.colorTexture,rt.depthStencilTexture),e.setRenderTarget(z))}let Fe=Q[St];Fe===void 0&&(Fe=new fa,Fe.layers.enable(St),Fe.viewport=new Ri,Q[St]=Fe),Fe.matrix.fromArray(Ne.transform.matrix),Fe.matrix.decompose(Fe.position,Fe.quaternion,Fe.scale),Fe.projectionMatrix.fromArray(Ne.projectionMatrix),Fe.projectionMatrixInverse.copy(Fe.projectionMatrix).invert(),Fe.viewport.set(Ve.x,Ve.y,Ve.width,Ve.height),St===0&&(J.matrix.copy(Fe.matrix),J.matrix.decompose(J.position,J.quaternion,J.scale)),$e===!0&&J.cameras.push(Fe)}const et=a.enabledFeatures;if(et&&et.includes("depth-sensing")&&a.depthUsage=="gpu-optimized"&&R){y=n.getBinding();const St=y.getDepthInformation(Ae[0]);St&&St.isValid&&St.texture&&C.init(St,a.renderState)}if(et&&et.includes("camera-access")&&R){e.state.unbindTexture(),y=n.getBinding();for(let St=0;St<Ae.length;St++){const Ne=Ae[St].camera;if(Ne){let Ve=E[Ne];Ve||(Ve=new J2,E[Ne]=Ve);const Fe=y.getCameraImage(Ne);Ve.sourceTexture=Fe}}}}for(let Ae=0;Ae<F.length;Ae++){const $e=V[Ae],et=F[Ae];$e!==null&&et!==void 0&&et.update($e,_e,d||o)}fe&&fe(he,_e),_e.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:_e}),M=null}const xe=new WR;xe.setAnimationLoop(me),this.setAnimationLoop=function(he){fe=he},this.dispose=function(){}}}const Vh=new Vo,jF=new gn;function WF(i,e){function t(C,E){C.matrixAutoUpdate===!0&&C.updateMatrix(),E.value.copy(C.matrix)}function n(C,E){E.color.getRGB(C.fogColor.value,ZC(i)),E.isFog?(C.fogNear.value=E.near,C.fogFar.value=E.far):E.isFogExp2&&(C.fogDensity.value=E.density)}function a(C,E,N,I,z){E.isMeshBasicMaterial||E.isMeshLambertMaterial?s(C,E):E.isMeshToonMaterial?(s(C,E),y(C,E)):E.isMeshPhongMaterial?(s(C,E),g(C,E)):E.isMeshStandardMaterial?(s(C,E),x(C,E),E.isMeshPhysicalMaterial&&b(C,E,z)):E.isMeshMatcapMaterial?(s(C,E),M(C,E)):E.isMeshDepthMaterial?s(C,E):E.isMeshDistanceMaterial?(s(C,E),R(C,E)):E.isMeshNormalMaterial?s(C,E):E.isLineBasicMaterial?(o(C,E),E.isLineDashedMaterial&&c(C,E)):E.isPointsMaterial?f(C,E,N,I):E.isSpriteMaterial?d(C,E):E.isShadowMaterial?(C.color.value.copy(E.color),C.opacity.value=E.opacity):E.isShaderMaterial&&(E.uniformsNeedUpdate=!1)}function s(C,E){C.opacity.value=E.opacity,E.color&&C.diffuse.value.copy(E.color),E.emissive&&C.emissive.value.copy(E.emissive).multiplyScalar(E.emissiveIntensity),E.map&&(C.map.value=E.map,t(E.map,C.mapTransform)),E.alphaMap&&(C.alphaMap.value=E.alphaMap,t(E.alphaMap,C.alphaMapTransform)),E.bumpMap&&(C.bumpMap.value=E.bumpMap,t(E.bumpMap,C.bumpMapTransform),C.bumpScale.value=E.bumpScale,E.side===Vr&&(C.bumpScale.value*=-1)),E.normalMap&&(C.normalMap.value=E.normalMap,t(E.normalMap,C.normalMapTransform),C.normalScale.value.copy(E.normalScale),E.side===Vr&&C.normalScale.value.negate()),E.displacementMap&&(C.displacementMap.value=E.displacementMap,t(E.displacementMap,C.displacementMapTransform),C.displacementScale.value=E.displacementScale,C.displacementBias.value=E.displacementBias),E.emissiveMap&&(C.emissiveMap.value=E.emissiveMap,t(E.emissiveMap,C.emissiveMapTransform)),E.specularMap&&(C.specularMap.value=E.specularMap,t(E.specularMap,C.specularMapTransform)),E.alphaTest>0&&(C.alphaTest.value=E.alphaTest);const N=e.get(E),I=N.envMap,z=N.envMapRotation;I&&(C.envMap.value=I,Vh.copy(z),Vh.x*=-1,Vh.y*=-1,Vh.z*=-1,I.isCubeTexture&&I.isRenderTargetTexture===!1&&(Vh.y*=-1,Vh.z*=-1),C.envMapRotation.value.setFromMatrix4(jF.makeRotationFromEuler(Vh)),C.flipEnvMap.value=I.isCubeTexture&&I.isRenderTargetTexture===!1?-1:1,C.reflectivity.value=E.reflectivity,C.ior.value=E.ior,C.refractionRatio.value=E.refractionRatio),E.lightMap&&(C.lightMap.value=E.lightMap,C.lightMapIntensity.value=E.lightMapIntensity,t(E.lightMap,C.lightMapTransform)),E.aoMap&&(C.aoMap.value=E.aoMap,C.aoMapIntensity.value=E.aoMapIntensity,t(E.aoMap,C.aoMapTransform))}function o(C,E){C.diffuse.value.copy(E.color),C.opacity.value=E.opacity,E.map&&(C.map.value=E.map,t(E.map,C.mapTransform))}function c(C,E){C.dashSize.value=E.dashSize,C.totalSize.value=E.dashSize+E.gapSize,C.scale.value=E.scale}function f(C,E,N,I){C.diffuse.value.copy(E.color),C.opacity.value=E.opacity,C.size.value=E.size*N,C.scale.value=I*.5,E.map&&(C.map.value=E.map,t(E.map,C.uvTransform)),E.alphaMap&&(C.alphaMap.value=E.alphaMap,t(E.alphaMap,C.alphaMapTransform)),E.alphaTest>0&&(C.alphaTest.value=E.alphaTest)}function d(C,E){C.diffuse.value.copy(E.color),C.opacity.value=E.opacity,C.rotation.value=E.rotation,E.map&&(C.map.value=E.map,t(E.map,C.mapTransform)),E.alphaMap&&(C.alphaMap.value=E.alphaMap,t(E.alphaMap,C.alphaMapTransform)),E.alphaTest>0&&(C.alphaTest.value=E.alphaTest)}function g(C,E){C.specular.value.copy(E.specular),C.shininess.value=Math.max(E.shininess,1e-4)}function y(C,E){E.gradientMap&&(C.gradientMap.value=E.gradientMap)}function x(C,E){C.metalness.value=E.metalness,E.metalnessMap&&(C.metalnessMap.value=E.metalnessMap,t(E.metalnessMap,C.metalnessMapTransform)),C.roughness.value=E.roughness,E.roughnessMap&&(C.roughnessMap.value=E.roughnessMap,t(E.roughnessMap,C.roughnessMapTransform)),E.envMap&&(C.envMapIntensity.value=E.envMapIntensity)}function b(C,E,N){C.ior.value=E.ior,E.sheen>0&&(C.sheenColor.value.copy(E.sheenColor).multiplyScalar(E.sheen),C.sheenRoughness.value=E.sheenRoughness,E.sheenColorMap&&(C.sheenColorMap.value=E.sheenColorMap,t(E.sheenColorMap,C.sheenColorMapTransform)),E.sheenRoughnessMap&&(C.sheenRoughnessMap.value=E.sheenRoughnessMap,t(E.sheenRoughnessMap,C.sheenRoughnessMapTransform))),E.clearcoat>0&&(C.clearcoat.value=E.clearcoat,C.clearcoatRoughness.value=E.clearcoatRoughness,E.clearcoatMap&&(C.clearcoatMap.value=E.clearcoatMap,t(E.clearcoatMap,C.clearcoatMapTransform)),E.clearcoatRoughnessMap&&(C.clearcoatRoughnessMap.value=E.clearcoatRoughnessMap,t(E.clearcoatRoughnessMap,C.clearcoatRoughnessMapTransform)),E.clearcoatNormalMap&&(C.clearcoatNormalMap.value=E.clearcoatNormalMap,t(E.clearcoatNormalMap,C.clearcoatNormalMapTransform),C.clearcoatNormalScale.value.copy(E.clearcoatNormalScale),E.side===Vr&&C.clearcoatNormalScale.value.negate())),E.dispersion>0&&(C.dispersion.value=E.dispersion),E.iridescence>0&&(C.iridescence.value=E.iridescence,C.iridescenceIOR.value=E.iridescenceIOR,C.iridescenceThicknessMinimum.value=E.iridescenceThicknessRange[0],C.iridescenceThicknessMaximum.value=E.iridescenceThicknessRange[1],E.iridescenceMap&&(C.iridescenceMap.value=E.iridescenceMap,t(E.iridescenceMap,C.iridescenceMapTransform)),E.iridescenceThicknessMap&&(C.iridescenceThicknessMap.value=E.iridescenceThicknessMap,t(E.iridescenceThicknessMap,C.iridescenceThicknessMapTransform))),E.transmission>0&&(C.transmission.value=E.transmission,C.transmissionSamplerMap.value=N.texture,C.transmissionSamplerSize.value.set(N.width,N.height),E.transmissionMap&&(C.transmissionMap.value=E.transmissionMap,t(E.transmissionMap,C.transmissionMapTransform)),C.thickness.value=E.thickness,E.thicknessMap&&(C.thicknessMap.value=E.thicknessMap,t(E.thicknessMap,C.thicknessMapTransform)),C.attenuationDistance.value=E.attenuationDistance,C.attenuationColor.value.copy(E.attenuationColor)),E.anisotropy>0&&(C.anisotropyVector.value.set(E.anisotropy*Math.cos(E.anisotropyRotation),E.anisotropy*Math.sin(E.anisotropyRotation)),E.anisotropyMap&&(C.anisotropyMap.value=E.anisotropyMap,t(E.anisotropyMap,C.anisotropyMapTransform))),C.specularIntensity.value=E.specularIntensity,C.specularColor.value.copy(E.specularColor),E.specularColorMap&&(C.specularColorMap.value=E.specularColorMap,t(E.specularColorMap,C.specularColorMapTransform)),E.specularIntensityMap&&(C.specularIntensityMap.value=E.specularIntensityMap,t(E.specularIntensityMap,C.specularIntensityMapTransform))}function M(C,E){E.matcap&&(C.matcap.value=E.matcap)}function R(C,E){const N=e.get(E).light;C.referencePosition.value.setFromMatrixPosition(N.matrixWorld),C.nearDistance.value=N.shadow.camera.near,C.farDistance.value=N.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:a}}function qF(i,e,t,n){let a={},s={},o=[];const c=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function f(N,I){const z=I.program;n.uniformBlockBinding(N,z)}function d(N,I){let z=a[N.id];z===void 0&&(M(N),z=g(N),a[N.id]=z,N.addEventListener("dispose",C));const F=I.program;n.updateUBOMapping(N,F);const V=e.render.frame;s[N.id]!==V&&(x(N),s[N.id]=V)}function g(N){const I=y();N.__bindingPointIndex=I;const z=i.createBuffer(),F=N.__size,V=N.usage;return i.bindBuffer(i.UNIFORM_BUFFER,z),i.bufferData(i.UNIFORM_BUFFER,F,V),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,I,z),z}function y(){for(let N=0;N<c;N++)if(o.indexOf(N)===-1)return o.push(N),N;return rn("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function x(N){const I=a[N.id],z=N.uniforms,F=N.__cache;i.bindBuffer(i.UNIFORM_BUFFER,I);for(let V=0,W=z.length;V<W;V++){const Z=Array.isArray(z[V])?z[V]:[z[V]];for(let B=0,H=Z.length;B<H;B++){const Q=Z[B];if(b(Q,V,B,F)===!0){const J=Q.__offset,oe=Array.isArray(Q.value)?Q.value:[Q.value];let re=0;for(let ve=0;ve<oe.length;ve++){const q=oe[ve],K=R(q);typeof q=="number"||typeof q=="boolean"?(Q.__data[0]=q,i.bufferSubData(i.UNIFORM_BUFFER,J+re,Q.__data)):q.isMatrix3?(Q.__data[0]=q.elements[0],Q.__data[1]=q.elements[1],Q.__data[2]=q.elements[2],Q.__data[3]=0,Q.__data[4]=q.elements[3],Q.__data[5]=q.elements[4],Q.__data[6]=q.elements[5],Q.__data[7]=0,Q.__data[8]=q.elements[6],Q.__data[9]=q.elements[7],Q.__data[10]=q.elements[8],Q.__data[11]=0):(q.toArray(Q.__data,re),re+=K.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,J,Q.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function b(N,I,z,F){const V=N.value,W=I+"_"+z;if(F[W]===void 0)return typeof V=="number"||typeof V=="boolean"?F[W]=V:F[W]=V.clone(),!0;{const Z=F[W];if(typeof V=="number"||typeof V=="boolean"){if(Z!==V)return F[W]=V,!0}else if(Z.equals(V)===!1)return Z.copy(V),!0}return!1}function M(N){const I=N.uniforms;let z=0;const F=16;for(let W=0,Z=I.length;W<Z;W++){const B=Array.isArray(I[W])?I[W]:[I[W]];for(let H=0,Q=B.length;H<Q;H++){const J=B[H],oe=Array.isArray(J.value)?J.value:[J.value];for(let re=0,ve=oe.length;re<ve;re++){const q=oe[re],K=R(q),te=z%F,de=te%K.boundary,ce=te+de;z+=de,ce!==0&&F-ce<K.storage&&(z+=F-ce),J.__data=new Float32Array(K.storage/Float32Array.BYTES_PER_ELEMENT),J.__offset=z,z+=K.storage}}}const V=z%F;return V>0&&(z+=F-V),N.__size=z,N.__cache={},this}function R(N){const I={boundary:0,storage:0};return typeof N=="number"||typeof N=="boolean"?(I.boundary=4,I.storage=4):N.isVector2?(I.boundary=8,I.storage=8):N.isVector3||N.isColor?(I.boundary=16,I.storage=12):N.isVector4?(I.boundary=16,I.storage=16):N.isMatrix3?(I.boundary=48,I.storage=48):N.isMatrix4?(I.boundary=64,I.storage=64):N.isTexture?It("WebGLRenderer: Texture samplers can not be part of an uniforms group."):It("WebGLRenderer: Unsupported uniform value type.",N),I}function C(N){const I=N.target;I.removeEventListener("dispose",C);const z=o.indexOf(I.__bindingPointIndex);o.splice(z,1),i.deleteBuffer(a[I.id]),delete a[I.id],delete s[I.id]}function E(){for(const N in a)i.deleteBuffer(a[N]);o=[],a={},s={}}return{bind:f,update:d,dispose:E}}const XF=new Uint16Array([12469,15057,12620,14925,13266,14620,13807,14376,14323,13990,14545,13625,14713,13328,14840,12882,14931,12528,14996,12233,15039,11829,15066,11525,15080,11295,15085,10976,15082,10705,15073,10495,13880,14564,13898,14542,13977,14430,14158,14124,14393,13732,14556,13410,14702,12996,14814,12596,14891,12291,14937,11834,14957,11489,14958,11194,14943,10803,14921,10506,14893,10278,14858,9960,14484,14039,14487,14025,14499,13941,14524,13740,14574,13468,14654,13106,14743,12678,14818,12344,14867,11893,14889,11509,14893,11180,14881,10751,14852,10428,14812,10128,14765,9754,14712,9466,14764,13480,14764,13475,14766,13440,14766,13347,14769,13070,14786,12713,14816,12387,14844,11957,14860,11549,14868,11215,14855,10751,14825,10403,14782,10044,14729,9651,14666,9352,14599,9029,14967,12835,14966,12831,14963,12804,14954,12723,14936,12564,14917,12347,14900,11958,14886,11569,14878,11247,14859,10765,14828,10401,14784,10011,14727,9600,14660,9289,14586,8893,14508,8533,15111,12234,15110,12234,15104,12216,15092,12156,15067,12010,15028,11776,14981,11500,14942,11205,14902,10752,14861,10393,14812,9991,14752,9570,14682,9252,14603,8808,14519,8445,14431,8145,15209,11449,15208,11451,15202,11451,15190,11438,15163,11384,15117,11274,15055,10979,14994,10648,14932,10343,14871,9936,14803,9532,14729,9218,14645,8742,14556,8381,14461,8020,14365,7603,15273,10603,15272,10607,15267,10619,15256,10631,15231,10614,15182,10535,15118,10389,15042,10167,14963,9787,14883,9447,14800,9115,14710,8665,14615,8318,14514,7911,14411,7507,14279,7198,15314,9675,15313,9683,15309,9712,15298,9759,15277,9797,15229,9773,15166,9668,15084,9487,14995,9274,14898,8910,14800,8539,14697,8234,14590,7790,14479,7409,14367,7067,14178,6621,15337,8619,15337,8631,15333,8677,15325,8769,15305,8871,15264,8940,15202,8909,15119,8775,15022,8565,14916,8328,14804,8009,14688,7614,14569,7287,14448,6888,14321,6483,14088,6171,15350,7402,15350,7419,15347,7480,15340,7613,15322,7804,15287,7973,15229,8057,15148,8012,15046,7846,14933,7611,14810,7357,14682,7069,14552,6656,14421,6316,14251,5948,14007,5528,15356,5942,15356,5977,15353,6119,15348,6294,15332,6551,15302,6824,15249,7044,15171,7122,15070,7050,14949,6861,14818,6611,14679,6349,14538,6067,14398,5651,14189,5311,13935,4958,15359,4123,15359,4153,15356,4296,15353,4646,15338,5160,15311,5508,15263,5829,15188,6042,15088,6094,14966,6001,14826,5796,14678,5543,14527,5287,14377,4985,14133,4586,13869,4257,15360,1563,15360,1642,15358,2076,15354,2636,15341,3350,15317,4019,15273,4429,15203,4732,15105,4911,14981,4932,14836,4818,14679,4621,14517,4386,14359,4156,14083,3795,13808,3437,15360,122,15360,137,15358,285,15355,636,15344,1274,15322,2177,15281,2765,15215,3223,15120,3451,14995,3569,14846,3567,14681,3466,14511,3305,14344,3121,14037,2800,13753,2467,15360,0,15360,1,15359,21,15355,89,15346,253,15325,479,15287,796,15225,1148,15133,1492,15008,1749,14856,1882,14685,1886,14506,1783,14324,1608,13996,1398,13702,1183]);let Nc=null;function YF(){return Nc===null&&(Nc=new $l(XF,16,16,ld,tc),Nc.name="DFG_LUT",Nc.minFilter=Di,Nc.magFilter=Di,Nc.wrapS=ao,Nc.wrapT=ao,Nc.generateMipmaps=!1,Nc.needsUpdate=!0),Nc}class QR{constructor(e={}){const{canvas:t=qC(),context:n=null,depth:a=!0,stencil:s=!1,alpha:o=!1,antialias:c=!1,premultipliedAlpha:f=!0,preserveDrawingBuffer:d=!1,powerPreference:g="default",failIfMajorPerformanceCaveat:y=!1,reversedDepthBuffer:x=!1,outputBufferType:b=Br}=e;this.isWebGLRenderer=!0;let M;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");M=n.getContextAttributes().alpha}else M=o;const R=b,C=new Set([_1,y1,C0]),E=new Set([Br,dl,jp,Wp,m1,g1]),N=new Uint32Array(4),I=new Int32Array(4);let z=null,F=null;const V=[],W=[];let Z=null;this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=fl,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const B=this;let H=!1;this._outputColorSpace=ir;let Q=0,J=0,oe=null,re=-1,ve=null;const q=new Ri,K=new Ri;let te=null;const de=new Ht(0);let ce=0,G=t.width,ne=t.height,fe=1,me=null,xe=null;const he=new Ri(0,0,G,ne),_e=new Ri(0,0,G,ne);let Ae=!1;const $e=new sm;let et=!1,qe=!1;const nt=new gn,St=new pe,Ne=new Ri,Ve={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Fe=!1;function rt(){return oe===null?fe:1}let ae=n;function ut(ie,Re){return t.getContext(ie,Re)}try{const ie={alpha:!0,depth:a,stencil:s,antialias:c,premultipliedAlpha:f,preserveDrawingBuffer:d,powerPreference:g,failIfMajorPerformanceCaveat:y};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${f1}`),t.addEventListener("webglcontextlost",Rt,!1),t.addEventListener("webglcontextrestored",Lt,!1),t.addEventListener("webglcontextcreationerror",qt,!1),ae===null){const Re="webgl2";if(ae=ut(Re,ie),ae===null)throw ut(Re)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(ie){throw rn("WebGLRenderer: "+ie.message),ie}let Ze,Le,tt,$,Y,ye,Be,De,Ce,vt,ht,bt,Ct,Ge,Qe,st,ge,we,xt,Se,it,lt,At,ct;function je(){Ze=new ZB(ae),Ze.init(),lt=new KR(ae,Ze),Le=new kB(ae,Ze,e,lt),tt=new BF(ae,Ze),Le.reversedDepthBuffer&&x&&tt.buffers.depth.setReversed(!0),$=new JB(ae),Y=new TF,ye=new FF(ae,Ze,tt,Y,Le,lt,$),Be=new HB(B),De=new YB(B),Ce=new nP(ae),At=new BB(ae,Ce),vt=new KB(ae,Ce,$,At),ht=new e6(ae,vt,Ce,$),xt=new $B(ae,Le,ye),st=new VB(Y),bt=new bF(B,Be,De,Ze,Le,At,st),Ct=new WF(B,Y),Ge=new AF,Qe=new LF(Ze),we=new zB(B,Be,De,tt,ht,M,f),ge=new PF(B,ht,Le),ct=new qF(ae,$,Le,tt),Se=new FB(ae,Ze,$),it=new QB(ae,Ze,$),$.programs=bt.programs,B.capabilities=Le,B.extensions=Ze,B.properties=Y,B.renderLists=Ge,B.shadowMap=ge,B.state=tt,B.info=$}je(),R!==Br&&(Z=new n6(R,t.width,t.height,a,s));const mt=new GF(B,ae);this.xr=mt,this.getContext=function(){return ae},this.getContextAttributes=function(){return ae.getContextAttributes()},this.forceContextLoss=function(){const ie=Ze.get("WEBGL_lose_context");ie&&ie.loseContext()},this.forceContextRestore=function(){const ie=Ze.get("WEBGL_lose_context");ie&&ie.restoreContext()},this.getPixelRatio=function(){return fe},this.setPixelRatio=function(ie){ie!==void 0&&(fe=ie,this.setSize(G,ne,!1))},this.getSize=function(ie){return ie.set(G,ne)},this.setSize=function(ie,Re,Xe=!0){if(mt.isPresenting){It("WebGLRenderer: Can't change size while VR device is presenting.");return}G=ie,ne=Re,t.width=Math.floor(ie*fe),t.height=Math.floor(Re*fe),Xe===!0&&(t.style.width=ie+"px",t.style.height=Re+"px"),Z!==null&&Z.setSize(t.width,t.height),this.setViewport(0,0,ie,Re)},this.getDrawingBufferSize=function(ie){return ie.set(G*fe,ne*fe).floor()},this.setDrawingBufferSize=function(ie,Re,Xe){G=ie,ne=Re,fe=Xe,t.width=Math.floor(ie*Xe),t.height=Math.floor(Re*Xe),this.setViewport(0,0,ie,Re)},this.setEffects=function(ie){if(R===Br){console.error("THREE.WebGLRenderer: setEffects() requires outputBufferType set to HalfFloatType or FloatType.");return}if(ie){for(let Re=0;Re<ie.length;Re++)if(ie[Re].isOutputPass===!0){console.warn("THREE.WebGLRenderer: OutputPass is not needed in setEffects(). Tone mapping and color space conversion are applied automatically.");break}}Z.setEffects(ie||[])},this.getCurrentViewport=function(ie){return ie.copy(q)},this.getViewport=function(ie){return ie.copy(he)},this.setViewport=function(ie,Re,Xe,ke){ie.isVector4?he.set(ie.x,ie.y,ie.z,ie.w):he.set(ie,Re,Xe,ke),tt.viewport(q.copy(he).multiplyScalar(fe).round())},this.getScissor=function(ie){return ie.copy(_e)},this.setScissor=function(ie,Re,Xe,ke){ie.isVector4?_e.set(ie.x,ie.y,ie.z,ie.w):_e.set(ie,Re,Xe,ke),tt.scissor(K.copy(_e).multiplyScalar(fe).round())},this.getScissorTest=function(){return Ae},this.setScissorTest=function(ie){tt.setScissorTest(Ae=ie)},this.setOpaqueSort=function(ie){me=ie},this.setTransparentSort=function(ie){xe=ie},this.getClearColor=function(ie){return ie.copy(we.getClearColor())},this.setClearColor=function(){we.setClearColor(...arguments)},this.getClearAlpha=function(){return we.getClearAlpha()},this.setClearAlpha=function(){we.setClearAlpha(...arguments)},this.clear=function(ie=!0,Re=!0,Xe=!0){let ke=0;if(ie){let Ue=!1;if(oe!==null){const Et=oe.texture.format;Ue=C.has(Et)}if(Ue){const Et=oe.texture.type,Ut=E.has(Et),Dt=we.getClearColor(),Pt=we.getClearAlpha(),Tt=Dt.r,Ot=Dt.g,Vt=Dt.b;Ut?(N[0]=Tt,N[1]=Ot,N[2]=Vt,N[3]=Pt,ae.clearBufferuiv(ae.COLOR,0,N)):(I[0]=Tt,I[1]=Ot,I[2]=Vt,I[3]=Pt,ae.clearBufferiv(ae.COLOR,0,I))}else ke|=ae.COLOR_BUFFER_BIT}Re&&(ke|=ae.DEPTH_BUFFER_BIT),Xe&&(ke|=ae.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ae.clear(ke)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Rt,!1),t.removeEventListener("webglcontextrestored",Lt,!1),t.removeEventListener("webglcontextcreationerror",qt,!1),we.dispose(),Ge.dispose(),Qe.dispose(),Y.dispose(),Be.dispose(),De.dispose(),ht.dispose(),At.dispose(),ct.dispose(),bt.dispose(),mt.dispose(),mt.removeEventListener("sessionstart",kt),mt.removeEventListener("sessionend",Fi),si.stop()};function Rt(ie){ie.preventDefault(),u0("WebGLRenderer: Context Lost."),H=!0}function Lt(){u0("WebGLRenderer: Context Restored."),H=!1;const ie=$.autoReset,Re=ge.enabled,Xe=ge.autoUpdate,ke=ge.needsUpdate,Ue=ge.type;je(),$.autoReset=ie,ge.enabled=Re,ge.autoUpdate=Xe,ge.needsUpdate=ke,ge.type=Ue}function qt(ie){rn("WebGLRenderer: A WebGL context could not be created. Reason: ",ie.statusMessage)}function bn(ie){const Re=ie.target;Re.removeEventListener("dispose",bn),Bn(Re)}function Bn(ie){Ai(ie),Y.remove(ie)}function Ai(ie){const Re=Y.get(ie).programs;Re!==void 0&&(Re.forEach(function(Xe){bt.releaseProgram(Xe)}),ie.isShaderMaterial&&bt.releaseShaderCache(ie))}this.renderBufferDirect=function(ie,Re,Xe,ke,Ue,Et){Re===null&&(Re=Ve);const Ut=Ue.isMesh&&Ue.matrixWorld.determinant()<0,Dt=fr(ie,Re,Xe,ke,Ue);tt.setMaterial(ke,Ut);let Pt=Xe.index,Tt=1;if(ke.wireframe===!0){if(Pt=vt.getWireframeAttribute(Xe),Pt===void 0)return;Tt=2}const Ot=Xe.drawRange,Vt=Xe.attributes.position;let Jt=Ot.start*Tt,xn=(Ot.start+Ot.count)*Tt;Et!==null&&(Jt=Math.max(Jt,Et.start*Tt),xn=Math.min(xn,(Et.start+Et.count)*Tt)),Pt!==null?(Jt=Math.max(Jt,0),xn=Math.min(xn,Pt.count)):Vt!=null&&(Jt=Math.max(Jt,0),xn=Math.min(xn,Vt.count));const Kn=xn-Jt;if(Kn<0||Kn===1/0)return;At.setup(Ue,ke,Dt,Xe,Pt);let zt,nn=Se;if(Pt!==null&&(zt=Ce.get(Pt),nn=it,nn.setIndex(zt)),Ue.isMesh)ke.wireframe===!0?(tt.setLineWidth(ke.wireframeLinewidth*rt()),nn.setMode(ae.LINES)):nn.setMode(ae.TRIANGLES);else if(Ue.isLine){let Yt=ke.linewidth;Yt===void 0&&(Yt=1),tt.setLineWidth(Yt*rt()),Ue.isLineSegments?nn.setMode(ae.LINES):Ue.isLineLoop?nn.setMode(ae.LINE_LOOP):nn.setMode(ae.LINE_STRIP)}else Ue.isPoints?nn.setMode(ae.POINTS):Ue.isSprite&&nn.setMode(ae.TRIANGLES);if(Ue.isBatchedMesh)if(Ue._multiDrawInstances!==null)Xp("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),nn.renderMultiDrawInstances(Ue._multiDrawStarts,Ue._multiDrawCounts,Ue._multiDrawCount,Ue._multiDrawInstances);else if(Ze.get("WEBGL_multi_draw"))nn.renderMultiDraw(Ue._multiDrawStarts,Ue._multiDrawCounts,Ue._multiDrawCount);else{const Yt=Ue._multiDrawStarts,Cn=Ue._multiDrawCounts,jt=Ue._multiDrawCount,qi=Pt?Ce.get(Pt).bytesPerElement:1,ya=Y.get(ke).currentProgram.getUniforms();for(let ai=0;ai<jt;ai++)ya.setValue(ae,"_gl_DrawID",ai),nn.render(Yt[ai]/qi,Cn[ai])}else if(Ue.isInstancedMesh)nn.renderInstances(Jt,Kn,Ue.count);else if(Xe.isInstancedBufferGeometry){const Yt=Xe._maxInstanceCount!==void 0?Xe._maxInstanceCount:1/0,Cn=Math.min(Xe.instanceCount,Yt);nn.renderInstances(Jt,Kn,Cn)}else nn.render(Jt,Kn)};function ia(ie,Re,Xe){ie.transparent===!0&&ie.side===cl&&ie.forceSinglePass===!1?(ie.side=Vr,ie.needsUpdate=!0,cr(ie,Re,Xe),ie.side=Iu,ie.needsUpdate=!0,cr(ie,Re,Xe),ie.side=cl):cr(ie,Re,Xe)}this.compile=function(ie,Re,Xe=null){Xe===null&&(Xe=ie),F=Qe.get(Xe),F.init(Re),W.push(F),Xe.traverseVisible(function(Ue){Ue.isLight&&Ue.layers.test(Re.layers)&&(F.pushLight(Ue),Ue.castShadow&&F.pushShadow(Ue))}),ie!==Xe&&ie.traverseVisible(function(Ue){Ue.isLight&&Ue.layers.test(Re.layers)&&(F.pushLight(Ue),Ue.castShadow&&F.pushShadow(Ue))}),F.setupLights();const ke=new Set;return ie.traverse(function(Ue){if(!(Ue.isMesh||Ue.isPoints||Ue.isLine||Ue.isSprite))return;const Et=Ue.material;if(Et)if(Array.isArray(Et))for(let Ut=0;Ut<Et.length;Ut++){const Dt=Et[Ut];ia(Dt,Xe,Ue),ke.add(Dt)}else ia(Et,Xe,Ue),ke.add(Et)}),F=W.pop(),ke},this.compileAsync=function(ie,Re,Xe=null){const ke=this.compile(ie,Re,Xe);return new Promise(Ue=>{function Et(){if(ke.forEach(function(Ut){Y.get(Ut).currentProgram.isReady()&&ke.delete(Ut)}),ke.size===0){Ue(ie);return}setTimeout(Et,10)}Ze.get("KHR_parallel_shader_compile")!==null?Et():setTimeout(Et,10)})};let Ca=null;function Yn(ie){Ca&&Ca(ie)}function kt(){si.stop()}function Fi(){si.start()}const si=new WR;si.setAnimationLoop(Yn),typeof self<"u"&&si.setContext(self),this.setAnimationLoop=function(ie){Ca=ie,mt.setAnimationLoop(ie),ie===null?si.stop():si.start()},mt.addEventListener("sessionstart",kt),mt.addEventListener("sessionend",Fi),this.render=function(ie,Re){if(Re!==void 0&&Re.isCamera!==!0){rn("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(H===!0)return;const Xe=mt.enabled===!0&&mt.isPresenting===!0,ke=Z!==null&&(oe===null||Xe)&&Z.begin(B,oe);if(ie.matrixWorldAutoUpdate===!0&&ie.updateMatrixWorld(),Re.parent===null&&Re.matrixWorldAutoUpdate===!0&&Re.updateMatrixWorld(),mt.enabled===!0&&mt.isPresenting===!0&&(Z===null||Z.isCompositing()===!1)&&(mt.cameraAutoUpdate===!0&&mt.updateCamera(Re),Re=mt.getCamera()),ie.isScene===!0&&ie.onBeforeRender(B,ie,Re,oe),F=Qe.get(ie,W.length),F.init(Re),W.push(F),nt.multiplyMatrices(Re.projectionMatrix,Re.matrixWorldInverse),$e.setFromProjectionMatrix(nt,Fo,Re.reversedDepth),qe=this.localClippingEnabled,et=st.init(this.clippingPlanes,qe),z=Ge.get(ie,V.length),z.init(),V.push(z),mt.enabled===!0&&mt.isPresenting===!0){const Ut=B.xr.getDepthSensingMesh();Ut!==null&&Hn(Ut,Re,-1/0,B.sortObjects)}Hn(ie,Re,0,B.sortObjects),z.finish(),B.sortObjects===!0&&z.sort(me,xe),Fe=mt.enabled===!1||mt.isPresenting===!1||mt.hasDepthSensing()===!1,Fe&&we.addToRenderList(z,ie),this.info.render.frame++,et===!0&&st.beginShadows();const Ue=F.state.shadowsArray;if(ge.render(Ue,ie,Re),et===!0&&st.endShadows(),this.info.autoReset===!0&&this.info.reset(),(ke&&Z.hasRenderPass())===!1){const Ut=z.opaque,Dt=z.transmissive;if(F.setupLights(),Re.isArrayCamera){const Pt=Re.cameras;if(Dt.length>0)for(let Tt=0,Ot=Pt.length;Tt<Ot;Tt++){const Vt=Pt[Tt];Li(Ut,Dt,ie,Vt)}Fe&&we.render(ie);for(let Tt=0,Ot=Pt.length;Tt<Ot;Tt++){const Vt=Pt[Tt];cn(z,ie,Vt,Vt.viewport)}}else Dt.length>0&&Li(Ut,Dt,ie,Re),Fe&&we.render(ie),cn(z,ie,Re)}oe!==null&&J===0&&(ye.updateMultisampleRenderTarget(oe),ye.updateRenderTargetMipmap(oe)),ke&&Z.end(B),ie.isScene===!0&&ie.onAfterRender(B,ie,Re),At.resetDefaultState(),re=-1,ve=null,W.pop(),W.length>0?(F=W[W.length-1],et===!0&&st.setGlobalState(B.clippingPlanes,F.state.camera)):F=null,V.pop(),V.length>0?z=V[V.length-1]:z=null};function Hn(ie,Re,Xe,ke){if(ie.visible===!1)return;if(ie.layers.test(Re.layers)){if(ie.isGroup)Xe=ie.renderOrder;else if(ie.isLOD)ie.autoUpdate===!0&&ie.update(Re);else if(ie.isLight)F.pushLight(ie),ie.castShadow&&F.pushShadow(ie);else if(ie.isSprite){if(!ie.frustumCulled||$e.intersectsSprite(ie)){ke&&Ne.setFromMatrixPosition(ie.matrixWorld).applyMatrix4(nt);const Ut=ht.update(ie),Dt=ie.material;Dt.visible&&z.push(ie,Ut,Dt,Xe,Ne.z,null)}}else if((ie.isMesh||ie.isLine||ie.isPoints)&&(!ie.frustumCulled||$e.intersectsObject(ie))){const Ut=ht.update(ie),Dt=ie.material;if(ke&&(ie.boundingSphere!==void 0?(ie.boundingSphere===null&&ie.computeBoundingSphere(),Ne.copy(ie.boundingSphere.center)):(Ut.boundingSphere===null&&Ut.computeBoundingSphere(),Ne.copy(Ut.boundingSphere.center)),Ne.applyMatrix4(ie.matrixWorld).applyMatrix4(nt)),Array.isArray(Dt)){const Pt=Ut.groups;for(let Tt=0,Ot=Pt.length;Tt<Ot;Tt++){const Vt=Pt[Tt],Jt=Dt[Vt.materialIndex];Jt&&Jt.visible&&z.push(ie,Ut,Jt,Xe,Ne.z,Vt)}}else Dt.visible&&z.push(ie,Ut,Dt,Xe,Ne.z,null)}}const Et=ie.children;for(let Ut=0,Dt=Et.length;Ut<Dt;Ut++)Hn(Et[Ut],Re,Xe,ke)}function cn(ie,Re,Xe,ke){const{opaque:Ue,transmissive:Et,transparent:Ut}=ie;F.setupLightsView(Xe),et===!0&&st.setGlobalState(B.clippingPlanes,Xe),ke&&tt.viewport(q.copy(ke)),Ue.length>0&&ga(Ue,Re,Xe),Et.length>0&&ga(Et,Re,Xe),Ut.length>0&&ga(Ut,Re,Xe),tt.buffers.depth.setTest(!0),tt.buffers.depth.setMask(!0),tt.buffers.color.setMask(!0),tt.setPolygonOffset(!1)}function Li(ie,Re,Xe,ke){if((Xe.isScene===!0?Xe.overrideMaterial:null)!==null)return;if(F.state.transmissionRenderTarget[ke.id]===void 0){const Jt=Ze.has("EXT_color_buffer_half_float")||Ze.has("EXT_color_buffer_float");F.state.transmissionRenderTarget[ke.id]=new ro(1,1,{generateMipmaps:!0,type:Jt?tc:Br,minFilter:Ic,samples:Le.samples,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Xn.workingColorSpace})}const Et=F.state.transmissionRenderTarget[ke.id],Ut=ke.viewport||q;Et.setSize(Ut.z*B.transmissionResolutionScale,Ut.w*B.transmissionResolutionScale);const Dt=B.getRenderTarget(),Pt=B.getActiveCubeFace(),Tt=B.getActiveMipmapLevel();B.setRenderTarget(Et),B.getClearColor(de),ce=B.getClearAlpha(),ce<1&&B.setClearColor(16777215,.5),B.clear(),Fe&&we.render(Xe);const Ot=B.toneMapping;B.toneMapping=fl;const Vt=ke.viewport;if(ke.viewport!==void 0&&(ke.viewport=void 0),F.setupLightsView(ke),et===!0&&st.setGlobalState(B.clippingPlanes,ke),ga(ie,Xe,ke),ye.updateMultisampleRenderTarget(Et),ye.updateRenderTargetMipmap(Et),Ze.has("WEBGL_multisampled_render_to_texture")===!1){let Jt=!1;for(let xn=0,Kn=Re.length;xn<Kn;xn++){const zt=Re[xn],{object:nn,geometry:Yt,material:Cn,group:jt}=zt;if(Cn.side===cl&&nn.layers.test(ke.layers)){const qi=Cn.side;Cn.side=Vr,Cn.needsUpdate=!0,fs(nn,Xe,ke,Yt,Cn,jt),Cn.side=qi,Cn.needsUpdate=!0,Jt=!0}}Jt===!0&&(ye.updateMultisampleRenderTarget(Et),ye.updateRenderTargetMipmap(Et))}B.setRenderTarget(Dt,Pt,Tt),B.setClearColor(de,ce),Vt!==void 0&&(ke.viewport=Vt),B.toneMapping=Ot}function ga(ie,Re,Xe){const ke=Re.isScene===!0?Re.overrideMaterial:null;for(let Ue=0,Et=ie.length;Ue<Et;Ue++){const Ut=ie[Ue],{object:Dt,geometry:Pt,group:Tt}=Ut;let Ot=Ut.material;Ot.allowOverride===!0&&ke!==null&&(Ot=ke),Dt.layers.test(Xe.layers)&&fs(Dt,Re,Xe,Pt,Ot,Tt)}}function fs(ie,Re,Xe,ke,Ue,Et){ie.onBeforeRender(B,Re,Xe,ke,Ue,Et),ie.modelViewMatrix.multiplyMatrices(Xe.matrixWorldInverse,ie.matrixWorld),ie.normalMatrix.getNormalMatrix(ie.modelViewMatrix),Ue.onBeforeRender(B,Re,Xe,ke,ie,Et),Ue.transparent===!0&&Ue.side===cl&&Ue.forceSinglePass===!1?(Ue.side=Vr,Ue.needsUpdate=!0,B.renderBufferDirect(Xe,Re,ke,Ue,ie,Et),Ue.side=Iu,Ue.needsUpdate=!0,B.renderBufferDirect(Xe,Re,ke,Ue,ie,Et),Ue.side=cl):B.renderBufferDirect(Xe,Re,ke,Ue,ie,Et),ie.onAfterRender(B,Re,Xe,ke,Ue,Et)}function cr(ie,Re,Xe){Re.isScene!==!0&&(Re=Ve);const ke=Y.get(ie),Ue=F.state.lights,Et=F.state.shadowsArray,Ut=Ue.state.version,Dt=bt.getParameters(ie,Ue.state,Et,Re,Xe),Pt=bt.getProgramCacheKey(Dt);let Tt=ke.programs;ke.environment=ie.isMeshStandardMaterial?Re.environment:null,ke.fog=Re.fog,ke.envMap=(ie.isMeshStandardMaterial?De:Be).get(ie.envMap||ke.environment),ke.envMapRotation=ke.environment!==null&&ie.envMap===null?Re.environmentRotation:ie.envMapRotation,Tt===void 0&&(ie.addEventListener("dispose",bn),Tt=new Map,ke.programs=Tt);let Ot=Tt.get(Pt);if(Ot!==void 0){if(ke.currentProgram===Ot&&ke.lightsStateVersion===Ut)return ur(ie,Dt),Ot}else Dt.uniforms=bt.getUniforms(ie),ie.onBeforeCompile(Dt,B),Ot=bt.acquireProgram(Dt,Pt),Tt.set(Pt,Ot),ke.uniforms=Dt.uniforms;const Vt=ke.uniforms;return(!ie.isShaderMaterial&&!ie.isRawShaderMaterial||ie.clipping===!0)&&(Vt.clippingPlanes=st.uniform),ur(ie,Dt),ke.needsLights=yi(ie),ke.lightsStateVersion=Ut,ke.needsLights&&(Vt.ambientLightColor.value=Ue.state.ambient,Vt.lightProbe.value=Ue.state.probe,Vt.directionalLights.value=Ue.state.directional,Vt.directionalLightShadows.value=Ue.state.directionalShadow,Vt.spotLights.value=Ue.state.spot,Vt.spotLightShadows.value=Ue.state.spotShadow,Vt.rectAreaLights.value=Ue.state.rectArea,Vt.ltc_1.value=Ue.state.rectAreaLTC1,Vt.ltc_2.value=Ue.state.rectAreaLTC2,Vt.pointLights.value=Ue.state.point,Vt.pointLightShadows.value=Ue.state.pointShadow,Vt.hemisphereLights.value=Ue.state.hemi,Vt.directionalShadowMap.value=Ue.state.directionalShadowMap,Vt.directionalShadowMatrix.value=Ue.state.directionalShadowMatrix,Vt.spotShadowMap.value=Ue.state.spotShadowMap,Vt.spotLightMatrix.value=Ue.state.spotLightMatrix,Vt.spotLightMap.value=Ue.state.spotLightMap,Vt.pointShadowMap.value=Ue.state.pointShadowMap,Vt.pointShadowMatrix.value=Ue.state.pointShadowMatrix),ke.currentProgram=Ot,ke.uniformsList=null,Ot}function lo(ie){if(ie.uniformsList===null){const Re=ie.currentProgram.getUniforms();ie.uniformsList=Ky.seqWithValue(Re.seq,ie.uniforms)}return ie.uniformsList}function ur(ie,Re){const Xe=Y.get(ie);Xe.outputColorSpace=Re.outputColorSpace,Xe.batching=Re.batching,Xe.batchingColor=Re.batchingColor,Xe.instancing=Re.instancing,Xe.instancingColor=Re.instancingColor,Xe.instancingMorph=Re.instancingMorph,Xe.skinning=Re.skinning,Xe.morphTargets=Re.morphTargets,Xe.morphNormals=Re.morphNormals,Xe.morphColors=Re.morphColors,Xe.morphTargetsCount=Re.morphTargetsCount,Xe.numClippingPlanes=Re.numClippingPlanes,Xe.numIntersection=Re.numClipIntersection,Xe.vertexAlphas=Re.vertexAlphas,Xe.vertexTangents=Re.vertexTangents,Xe.toneMapping=Re.toneMapping}function fr(ie,Re,Xe,ke,Ue){Re.isScene!==!0&&(Re=Ve),ye.resetTextureUnits();const Et=Re.fog,Ut=ke.isMeshStandardMaterial?Re.environment:null,Dt=oe===null?B.outputColorSpace:oe.isXRRenderTarget===!0?oe.texture.colorSpace:Vf,Pt=(ke.isMeshStandardMaterial?De:Be).get(ke.envMap||Ut),Tt=ke.vertexColors===!0&&!!Xe.attributes.color&&Xe.attributes.color.itemSize===4,Ot=!!Xe.attributes.tangent&&(!!ke.normalMap||ke.anisotropy>0),Vt=!!Xe.morphAttributes.position,Jt=!!Xe.morphAttributes.normal,xn=!!Xe.morphAttributes.color;let Kn=fl;ke.toneMapped&&(oe===null||oe.isXRRenderTarget===!0)&&(Kn=B.toneMapping);const zt=Xe.morphAttributes.position||Xe.morphAttributes.normal||Xe.morphAttributes.color,nn=zt!==void 0?zt.length:0,Yt=Y.get(ke),Cn=F.state.lights;if(et===!0&&(qe===!0||ie!==ve)){const Ei=ie===ve&&ke.id===re;st.setState(ke,ie,Ei)}let jt=!1;ke.version===Yt.__version?(Yt.needsLights&&Yt.lightsStateVersion!==Cn.state.version||Yt.outputColorSpace!==Dt||Ue.isBatchedMesh&&Yt.batching===!1||!Ue.isBatchedMesh&&Yt.batching===!0||Ue.isBatchedMesh&&Yt.batchingColor===!0&&Ue.colorTexture===null||Ue.isBatchedMesh&&Yt.batchingColor===!1&&Ue.colorTexture!==null||Ue.isInstancedMesh&&Yt.instancing===!1||!Ue.isInstancedMesh&&Yt.instancing===!0||Ue.isSkinnedMesh&&Yt.skinning===!1||!Ue.isSkinnedMesh&&Yt.skinning===!0||Ue.isInstancedMesh&&Yt.instancingColor===!0&&Ue.instanceColor===null||Ue.isInstancedMesh&&Yt.instancingColor===!1&&Ue.instanceColor!==null||Ue.isInstancedMesh&&Yt.instancingMorph===!0&&Ue.morphTexture===null||Ue.isInstancedMesh&&Yt.instancingMorph===!1&&Ue.morphTexture!==null||Yt.envMap!==Pt||ke.fog===!0&&Yt.fog!==Et||Yt.numClippingPlanes!==void 0&&(Yt.numClippingPlanes!==st.numPlanes||Yt.numIntersection!==st.numIntersection)||Yt.vertexAlphas!==Tt||Yt.vertexTangents!==Ot||Yt.morphTargets!==Vt||Yt.morphNormals!==Jt||Yt.morphColors!==xn||Yt.toneMapping!==Kn||Yt.morphTargetsCount!==nn)&&(jt=!0):(jt=!0,Yt.__version=ke.version);let qi=Yt.currentProgram;jt===!0&&(qi=cr(ke,Re,Ue));let ya=!1,ai=!1,Fn=!1;const Tn=qi.getUniforms(),Qn=Yt.uniforms;if(tt.useProgram(qi.program)&&(ya=!0,ai=!0,Fn=!0),ke.id!==re&&(re=ke.id,ai=!0),ya||ve!==ie){tt.buffers.depth.getReversed()&&ie.reversedDepth!==!0&&(ie._reversedDepth=!0,ie.updateProjectionMatrix()),Tn.setValue(ae,"projectionMatrix",ie.projectionMatrix),Tn.setValue(ae,"viewMatrix",ie.matrixWorldInverse);const _i=Tn.map.cameraPosition;_i!==void 0&&_i.setValue(ae,St.setFromMatrixPosition(ie.matrixWorld)),Le.logarithmicDepthBuffer&&Tn.setValue(ae,"logDepthBufFC",2/(Math.log(ie.far+1)/Math.LN2)),(ke.isMeshPhongMaterial||ke.isMeshToonMaterial||ke.isMeshLambertMaterial||ke.isMeshBasicMaterial||ke.isMeshStandardMaterial||ke.isShaderMaterial)&&Tn.setValue(ae,"isOrthographic",ie.isOrthographicCamera===!0),ve!==ie&&(ve=ie,ai=!0,Fn=!0)}if(Yt.needsLights&&(Cn.state.directionalShadowMap.length>0&&Tn.setValue(ae,"directionalShadowMap",Cn.state.directionalShadowMap,ye),Cn.state.spotShadowMap.length>0&&Tn.setValue(ae,"spotShadowMap",Cn.state.spotShadowMap,ye),Cn.state.pointShadowMap.length>0&&Tn.setValue(ae,"pointShadowMap",Cn.state.pointShadowMap,ye)),Ue.isSkinnedMesh){Tn.setOptional(ae,Ue,"bindMatrix"),Tn.setOptional(ae,Ue,"bindMatrixInverse");const Ei=Ue.skeleton;Ei&&(Ei.boneTexture===null&&Ei.computeBoneTexture(),Tn.setValue(ae,"boneTexture",Ei.boneTexture,ye))}Ue.isBatchedMesh&&(Tn.setOptional(ae,Ue,"batchingTexture"),Tn.setValue(ae,"batchingTexture",Ue._matricesTexture,ye),Tn.setOptional(ae,Ue,"batchingIdTexture"),Tn.setValue(ae,"batchingIdTexture",Ue._indirectTexture,ye),Tn.setOptional(ae,Ue,"batchingColorTexture"),Ue._colorsTexture!==null&&Tn.setValue(ae,"batchingColorTexture",Ue._colorsTexture,ye));const ci=Xe.morphAttributes;if((ci.position!==void 0||ci.normal!==void 0||ci.color!==void 0)&&xt.update(Ue,Xe,qi),(ai||Yt.receiveShadow!==Ue.receiveShadow)&&(Yt.receiveShadow=Ue.receiveShadow,Tn.setValue(ae,"receiveShadow",Ue.receiveShadow)),ke.isMeshGouraudMaterial&&ke.envMap!==null&&(Qn.envMap.value=Pt,Qn.flipEnvMap.value=Pt.isCubeTexture&&Pt.isRenderTargetTexture===!1?-1:1),ke.isMeshStandardMaterial&&ke.envMap===null&&Re.environment!==null&&(Qn.envMapIntensity.value=Re.environmentIntensity),Qn.dfgLUT!==void 0&&(Qn.dfgLUT.value=YF()),ai&&(Tn.setValue(ae,"toneMappingExposure",B.toneMappingExposure),Yt.needsLights&&Gr(Qn,Fn),Et&&ke.fog===!0&&Ct.refreshFogUniforms(Qn,Et),Ct.refreshMaterialUniforms(Qn,ke,fe,ne,F.state.transmissionRenderTarget[ie.id]),Ky.upload(ae,lo(Yt),Qn,ye)),ke.isShaderMaterial&&ke.uniformsNeedUpdate===!0&&(Ky.upload(ae,lo(Yt),Qn,ye),ke.uniformsNeedUpdate=!1),ke.isSpriteMaterial&&Tn.setValue(ae,"center",Ue.center),Tn.setValue(ae,"modelViewMatrix",Ue.modelViewMatrix),Tn.setValue(ae,"normalMatrix",Ue.normalMatrix),Tn.setValue(ae,"modelMatrix",Ue.matrixWorld),ke.isShaderMaterial||ke.isRawShaderMaterial){const Ei=ke.uniformsGroups;for(let _i=0,Es=Ei.length;_i<Es;_i++){const ki=Ei[_i];ct.update(ki,qi),ct.bind(ki,qi)}}return qi}function Gr(ie,Re){ie.ambientLightColor.needsUpdate=Re,ie.lightProbe.needsUpdate=Re,ie.directionalLights.needsUpdate=Re,ie.directionalLightShadows.needsUpdate=Re,ie.pointLights.needsUpdate=Re,ie.pointLightShadows.needsUpdate=Re,ie.spotLights.needsUpdate=Re,ie.spotLightShadows.needsUpdate=Re,ie.rectAreaLights.needsUpdate=Re,ie.hemisphereLights.needsUpdate=Re}function yi(ie){return ie.isMeshLambertMaterial||ie.isMeshToonMaterial||ie.isMeshPhongMaterial||ie.isMeshStandardMaterial||ie.isShadowMaterial||ie.isShaderMaterial&&ie.lights===!0}this.getActiveCubeFace=function(){return Q},this.getActiveMipmapLevel=function(){return J},this.getRenderTarget=function(){return oe},this.setRenderTargetTextures=function(ie,Re,Xe){const ke=Y.get(ie);ke.__autoAllocateDepthBuffer=ie.resolveDepthBuffer===!1,ke.__autoAllocateDepthBuffer===!1&&(ke.__useRenderToTexture=!1),Y.get(ie.texture).__webglTexture=Re,Y.get(ie.depthTexture).__webglTexture=ke.__autoAllocateDepthBuffer?void 0:Xe,ke.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(ie,Re){const Xe=Y.get(ie);Xe.__webglFramebuffer=Re,Xe.__useDefaultFramebuffer=Re===void 0};const Zn=ae.createFramebuffer();this.setRenderTarget=function(ie,Re=0,Xe=0){oe=ie,Q=Re,J=Xe;let ke=null,Ue=!1,Et=!1;if(ie){const Dt=Y.get(ie);if(Dt.__useDefaultFramebuffer!==void 0){tt.bindFramebuffer(ae.FRAMEBUFFER,Dt.__webglFramebuffer),q.copy(ie.viewport),K.copy(ie.scissor),te=ie.scissorTest,tt.viewport(q),tt.scissor(K),tt.setScissorTest(te),re=-1;return}else if(Dt.__webglFramebuffer===void 0)ye.setupRenderTarget(ie);else if(Dt.__hasExternalTextures)ye.rebindTextures(ie,Y.get(ie.texture).__webglTexture,Y.get(ie.depthTexture).__webglTexture);else if(ie.depthBuffer){const Ot=ie.depthTexture;if(Dt.__boundDepthTexture!==Ot){if(Ot!==null&&Y.has(Ot)&&(ie.width!==Ot.image.width||ie.height!==Ot.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ye.setupDepthRenderbuffer(ie)}}const Pt=ie.texture;(Pt.isData3DTexture||Pt.isDataArrayTexture||Pt.isCompressedArrayTexture)&&(Et=!0);const Tt=Y.get(ie).__webglFramebuffer;ie.isWebGLCubeRenderTarget?(Array.isArray(Tt[Re])?ke=Tt[Re][Xe]:ke=Tt[Re],Ue=!0):ie.samples>0&&ye.useMultisampledRTT(ie)===!1?ke=Y.get(ie).__webglMultisampledFramebuffer:Array.isArray(Tt)?ke=Tt[Xe]:ke=Tt,q.copy(ie.viewport),K.copy(ie.scissor),te=ie.scissorTest}else q.copy(he).multiplyScalar(fe).floor(),K.copy(_e).multiplyScalar(fe).floor(),te=Ae;if(Xe!==0&&(ke=Zn),tt.bindFramebuffer(ae.FRAMEBUFFER,ke)&&tt.drawBuffers(ie,ke),tt.viewport(q),tt.scissor(K),tt.setScissorTest(te),Ue){const Dt=Y.get(ie.texture);ae.framebufferTexture2D(ae.FRAMEBUFFER,ae.COLOR_ATTACHMENT0,ae.TEXTURE_CUBE_MAP_POSITIVE_X+Re,Dt.__webglTexture,Xe)}else if(Et){const Dt=Re;for(let Pt=0;Pt<ie.textures.length;Pt++){const Tt=Y.get(ie.textures[Pt]);ae.framebufferTextureLayer(ae.FRAMEBUFFER,ae.COLOR_ATTACHMENT0+Pt,Tt.__webglTexture,Xe,Dt)}}else if(ie!==null&&Xe!==0){const Dt=Y.get(ie.texture);ae.framebufferTexture2D(ae.FRAMEBUFFER,ae.COLOR_ATTACHMENT0,ae.TEXTURE_2D,Dt.__webglTexture,Xe)}re=-1},this.readRenderTargetPixels=function(ie,Re,Xe,ke,Ue,Et,Ut,Dt=0){if(!(ie&&ie.isWebGLRenderTarget)){rn("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Pt=Y.get(ie).__webglFramebuffer;if(ie.isWebGLCubeRenderTarget&&Ut!==void 0&&(Pt=Pt[Ut]),Pt){tt.bindFramebuffer(ae.FRAMEBUFFER,Pt);try{const Tt=ie.textures[Dt],Ot=Tt.format,Vt=Tt.type;if(!Le.textureFormatReadable(Ot)){rn("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Le.textureTypeReadable(Vt)){rn("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Re>=0&&Re<=ie.width-ke&&Xe>=0&&Xe<=ie.height-Ue&&(ie.textures.length>1&&ae.readBuffer(ae.COLOR_ATTACHMENT0+Dt),ae.readPixels(Re,Xe,ke,Ue,lt.convert(Ot),lt.convert(Vt),Et))}finally{const Tt=oe!==null?Y.get(oe).__webglFramebuffer:null;tt.bindFramebuffer(ae.FRAMEBUFFER,Tt)}}},this.readRenderTargetPixelsAsync=async function(ie,Re,Xe,ke,Ue,Et,Ut,Dt=0){if(!(ie&&ie.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Pt=Y.get(ie).__webglFramebuffer;if(ie.isWebGLCubeRenderTarget&&Ut!==void 0&&(Pt=Pt[Ut]),Pt)if(Re>=0&&Re<=ie.width-ke&&Xe>=0&&Xe<=ie.height-Ue){tt.bindFramebuffer(ae.FRAMEBUFFER,Pt);const Tt=ie.textures[Dt],Ot=Tt.format,Vt=Tt.type;if(!Le.textureFormatReadable(Ot))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Le.textureTypeReadable(Vt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Jt=ae.createBuffer();ae.bindBuffer(ae.PIXEL_PACK_BUFFER,Jt),ae.bufferData(ae.PIXEL_PACK_BUFFER,Et.byteLength,ae.STREAM_READ),ie.textures.length>1&&ae.readBuffer(ae.COLOR_ATTACHMENT0+Dt),ae.readPixels(Re,Xe,ke,Ue,lt.convert(Ot),lt.convert(Vt),0);const xn=oe!==null?Y.get(oe).__webglFramebuffer:null;tt.bindFramebuffer(ae.FRAMEBUFFER,xn);const Kn=ae.fenceSync(ae.SYNC_GPU_COMMANDS_COMPLETE,0);return ae.flush(),await iN(ae,Kn,4),ae.bindBuffer(ae.PIXEL_PACK_BUFFER,Jt),ae.getBufferSubData(ae.PIXEL_PACK_BUFFER,0,Et),ae.deleteBuffer(Jt),ae.deleteSync(Kn),Et}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(ie,Re=null,Xe=0){const ke=Math.pow(2,-Xe),Ue=Math.floor(ie.image.width*ke),Et=Math.floor(ie.image.height*ke),Ut=Re!==null?Re.x:0,Dt=Re!==null?Re.y:0;ye.setTexture2D(ie,0),ae.copyTexSubImage2D(ae.TEXTURE_2D,Xe,0,0,Ut,Dt,Ue,Et),tt.unbindTexture()};const va=ae.createFramebuffer(),Xt=ae.createFramebuffer();this.copyTextureToTexture=function(ie,Re,Xe=null,ke=null,Ue=0,Et=null){Et===null&&(Ue!==0?(Xp("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Et=Ue,Ue=0):Et=0);let Ut,Dt,Pt,Tt,Ot,Vt,Jt,xn,Kn;const zt=ie.isCompressedTexture?ie.mipmaps[Et]:ie.image;if(Xe!==null)Ut=Xe.max.x-Xe.min.x,Dt=Xe.max.y-Xe.min.y,Pt=Xe.isBox3?Xe.max.z-Xe.min.z:1,Tt=Xe.min.x,Ot=Xe.min.y,Vt=Xe.isBox3?Xe.min.z:0;else{const ci=Math.pow(2,-Ue);Ut=Math.floor(zt.width*ci),Dt=Math.floor(zt.height*ci),ie.isDataArrayTexture?Pt=zt.depth:ie.isData3DTexture?Pt=Math.floor(zt.depth*ci):Pt=1,Tt=0,Ot=0,Vt=0}ke!==null?(Jt=ke.x,xn=ke.y,Kn=ke.z):(Jt=0,xn=0,Kn=0);const nn=lt.convert(Re.format),Yt=lt.convert(Re.type);let Cn;Re.isData3DTexture?(ye.setTexture3D(Re,0),Cn=ae.TEXTURE_3D):Re.isDataArrayTexture||Re.isCompressedArrayTexture?(ye.setTexture2DArray(Re,0),Cn=ae.TEXTURE_2D_ARRAY):(ye.setTexture2D(Re,0),Cn=ae.TEXTURE_2D),ae.pixelStorei(ae.UNPACK_FLIP_Y_WEBGL,Re.flipY),ae.pixelStorei(ae.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Re.premultiplyAlpha),ae.pixelStorei(ae.UNPACK_ALIGNMENT,Re.unpackAlignment);const jt=ae.getParameter(ae.UNPACK_ROW_LENGTH),qi=ae.getParameter(ae.UNPACK_IMAGE_HEIGHT),ya=ae.getParameter(ae.UNPACK_SKIP_PIXELS),ai=ae.getParameter(ae.UNPACK_SKIP_ROWS),Fn=ae.getParameter(ae.UNPACK_SKIP_IMAGES);ae.pixelStorei(ae.UNPACK_ROW_LENGTH,zt.width),ae.pixelStorei(ae.UNPACK_IMAGE_HEIGHT,zt.height),ae.pixelStorei(ae.UNPACK_SKIP_PIXELS,Tt),ae.pixelStorei(ae.UNPACK_SKIP_ROWS,Ot),ae.pixelStorei(ae.UNPACK_SKIP_IMAGES,Vt);const Tn=ie.isDataArrayTexture||ie.isData3DTexture,Qn=Re.isDataArrayTexture||Re.isData3DTexture;if(ie.isDepthTexture){const ci=Y.get(ie),Ei=Y.get(Re),_i=Y.get(ci.__renderTarget),Es=Y.get(Ei.__renderTarget);tt.bindFramebuffer(ae.READ_FRAMEBUFFER,_i.__webglFramebuffer),tt.bindFramebuffer(ae.DRAW_FRAMEBUFFER,Es.__webglFramebuffer);for(let ki=0;ki<Pt;ki++)Tn&&(ae.framebufferTextureLayer(ae.READ_FRAMEBUFFER,ae.COLOR_ATTACHMENT0,Y.get(ie).__webglTexture,Ue,Vt+ki),ae.framebufferTextureLayer(ae.DRAW_FRAMEBUFFER,ae.COLOR_ATTACHMENT0,Y.get(Re).__webglTexture,Et,Kn+ki)),ae.blitFramebuffer(Tt,Ot,Ut,Dt,Jt,xn,Ut,Dt,ae.DEPTH_BUFFER_BIT,ae.NEAREST);tt.bindFramebuffer(ae.READ_FRAMEBUFFER,null),tt.bindFramebuffer(ae.DRAW_FRAMEBUFFER,null)}else if(Ue!==0||ie.isRenderTargetTexture||Y.has(ie)){const ci=Y.get(ie),Ei=Y.get(Re);tt.bindFramebuffer(ae.READ_FRAMEBUFFER,va),tt.bindFramebuffer(ae.DRAW_FRAMEBUFFER,Xt);for(let _i=0;_i<Pt;_i++)Tn?ae.framebufferTextureLayer(ae.READ_FRAMEBUFFER,ae.COLOR_ATTACHMENT0,ci.__webglTexture,Ue,Vt+_i):ae.framebufferTexture2D(ae.READ_FRAMEBUFFER,ae.COLOR_ATTACHMENT0,ae.TEXTURE_2D,ci.__webglTexture,Ue),Qn?ae.framebufferTextureLayer(ae.DRAW_FRAMEBUFFER,ae.COLOR_ATTACHMENT0,Ei.__webglTexture,Et,Kn+_i):ae.framebufferTexture2D(ae.DRAW_FRAMEBUFFER,ae.COLOR_ATTACHMENT0,ae.TEXTURE_2D,Ei.__webglTexture,Et),Ue!==0?ae.blitFramebuffer(Tt,Ot,Ut,Dt,Jt,xn,Ut,Dt,ae.COLOR_BUFFER_BIT,ae.NEAREST):Qn?ae.copyTexSubImage3D(Cn,Et,Jt,xn,Kn+_i,Tt,Ot,Ut,Dt):ae.copyTexSubImage2D(Cn,Et,Jt,xn,Tt,Ot,Ut,Dt);tt.bindFramebuffer(ae.READ_FRAMEBUFFER,null),tt.bindFramebuffer(ae.DRAW_FRAMEBUFFER,null)}else Qn?ie.isDataTexture||ie.isData3DTexture?ae.texSubImage3D(Cn,Et,Jt,xn,Kn,Ut,Dt,Pt,nn,Yt,zt.data):Re.isCompressedArrayTexture?ae.compressedTexSubImage3D(Cn,Et,Jt,xn,Kn,Ut,Dt,Pt,nn,zt.data):ae.texSubImage3D(Cn,Et,Jt,xn,Kn,Ut,Dt,Pt,nn,Yt,zt):ie.isDataTexture?ae.texSubImage2D(ae.TEXTURE_2D,Et,Jt,xn,Ut,Dt,nn,Yt,zt.data):ie.isCompressedTexture?ae.compressedTexSubImage2D(ae.TEXTURE_2D,Et,Jt,xn,zt.width,zt.height,nn,zt.data):ae.texSubImage2D(ae.TEXTURE_2D,Et,Jt,xn,Ut,Dt,nn,Yt,zt);ae.pixelStorei(ae.UNPACK_ROW_LENGTH,jt),ae.pixelStorei(ae.UNPACK_IMAGE_HEIGHT,qi),ae.pixelStorei(ae.UNPACK_SKIP_PIXELS,ya),ae.pixelStorei(ae.UNPACK_SKIP_ROWS,ai),ae.pixelStorei(ae.UNPACK_SKIP_IMAGES,Fn),Et===0&&Re.generateMipmaps&&ae.generateMipmap(Cn),tt.unbindTexture()},this.initRenderTarget=function(ie){Y.get(ie).__webglFramebuffer===void 0&&ye.setupRenderTarget(ie)},this.initTexture=function(ie){ie.isCubeTexture?ye.setTextureCube(ie,0):ie.isData3DTexture?ye.setTexture3D(ie,0):ie.isDataArrayTexture||ie.isCompressedArrayTexture?ye.setTexture2DArray(ie,0):ye.setTexture2D(ie,0),tt.unbindTexture()},this.resetState=function(){Q=0,J=0,oe=null,tt.reset(),At.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Fo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Xn._getDrawingBufferColorSpace(e),t.unpackColorSpace=Xn._getUnpackColorSpace()}}const ZF=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:h1,AddEquation:Uf,AddOperation:DC,AdditiveAnimationBlendMode:V2,AdditiveBlending:Eb,AgXToneMapping:O2,AlphaFormat:F2,AlwaysCompare:GC,AlwaysDepth:o_,AlwaysStencilFunc:Db,AmbientLight:IR,AnimationAction:HR,AnimationClip:g0,AnimationLoader:XU,AnimationMixer:bI,AnimationObjectGroup:xI,AnimationUtils:GU,ArcCurve:lR,ArrayCamera:FR,ArrowHelper:XI,AttachedBindMode:Rb,Audio:kR,AudioAnalyser:uI,AudioContext:pT,AudioListener:oI,AudioLoader:aI,AxesHelper:YI,BackSide:Vr,BasicDepthPacking:IC,BasicShadowMap:uC,BatchedMesh:nR,Bone:K2,BooleanKeyframeTrack:vd,Box2:LI,Box3:Ms,Box3Helper:WI,BoxGeometry:gd,BoxHelper:jI,BufferAttribute:Pi,BufferGeometry:wn,BufferGeometryLoader:BR,ByteType:I2,Cache:Pc,Camera:A1,CameraHelper:GI,CanvasTexture:hU,CapsuleGeometry:O1,CatmullRomCurve3:cR,CineonToneMapping:D2,CircleGeometry:N1,ClampToEdgeWrapping:ao,Clock:mT,Color:Ht,ColorKeyframeTrack:cT,ColorManagement:Xn,CompressedArrayTexture:uU,CompressedCubeTexture:fU,CompressedTexture:L1,CompressedTextureLoader:YU,ConeGeometry:L0,ConstantAlphaFactor:wC,ConstantColorFactor:AC,Controls:KI,CubeCamera:KC,CubeDepthTexture:rR,CubeReflectionMapping:Vc,CubeRefractionMapping:kf,CubeTexture:R0,CubeTextureLoader:ZU,CubeUVReflectionMapping:am,CubicBezierCurve:eT,CubicBezierCurve3:uR,CubicInterpolant:wR,CullFaceBack:Ab,CullFaceFront:cC,CullFaceFrontBack:p5,CullFaceNone:lC,Curve:nc,CurvePath:hR,CustomBlending:fC,CustomToneMapping:L2,CylinderGeometry:D0,Cylindrical:DI,Data3DTexture:M1,DataArrayTexture:T1,DataTexture:$l,DataTextureLoader:KU,DataUtils:IN,DecrementStencilOp:L5,DecrementWrapStencilOp:N5,DefaultLoadingManager:DR,DepthFormat:Hc,DepthStencilFormat:zf,DepthTexture:fd,DetachedBindMode:LC,DirectionalLight:UR,DirectionalLightHelper:HI,DiscreteInterpolant:CR,DodecahedronGeometry:U1,DoubleSide:cl,DstAlphaFactor:xC,DstColorFactor:bC,DynamicCopyUsage:Y5,DynamicDrawUsage:H5,DynamicReadUsage:W5,EdgesGeometry:oR,EllipseCurve:I1,EqualCompare:kC,EqualDepth:c_,EqualStencilFunc:z5,EquirectangularReflectionMapping:t0,EquirectangularRefractionMapping:n0,Euler:Vo,EventDispatcher:Gc,ExternalTexture:J2,ExtrudeGeometry:P1,FileLoader:Pu,Float16BufferAttribute:HN,Float32BufferAttribute:Zt,FloatType:ar,Fog:w1,FogExp2:E1,FramebufferTexture:cU,FrontSide:Iu,Frustum:sm,FrustumArray:D1,GLBufferAttribute:wI,GLSL1:K5,GLSL3:Lb,GreaterCompare:VC,GreaterDepth:f_,GreaterEqualCompare:b1,GreaterEqualDepth:u_,GreaterEqualStencilFunc:V5,GreaterStencilFunc:F5,GridHelper:kI,Group:Up,HalfFloatType:tc,HemisphereLight:LR,HemisphereLightHelper:FI,IcosahedronGeometry:z1,ImageBitmapLoader:iI,ImageLoader:v0,ImageUtils:XC,IncrementStencilOp:D5,IncrementWrapStencilOp:O5,InstancedBufferAttribute:ud,InstancedBufferGeometry:dT,InstancedInterleavedBuffer:EI,InstancedMesh:tR,Int16BufferAttribute:kN,Int32BufferAttribute:VN,Int8BufferAttribute:zN,IntType:p1,InterleavedBuffer:C1,InterleavedBufferAttribute:cd,Interpolant:U0,InterpolateDiscrete:s0,InterpolateLinear:W_,InterpolateSmooth:Yy,InterpolationSamplingMode:$5,InterpolationSamplingType:J5,InvertStencilOp:U5,KeepStencilOp:qh,KeyframeTrack:ml,LOD:$C,LatheGeometry:B1,Layers:Zp,LessCompare:FC,LessDepth:l_,LessEqualCompare:S1,LessEqualDepth:od,LessEqualStencilFunc:B5,LessStencilFunc:P5,Light:Yf,LightProbe:zR,Line:Gf,Line3:UI,LineBasicMaterial:Hr,LineCurve:tT,LineCurve3:fR,LineDashedMaterial:AR,LineLoop:iR,LineSegments:jc,LinearFilter:Di,LinearInterpolant:lT,LinearMipMapLinearFilter:y5,LinearMipMapNearestFilter:v5,LinearMipmapLinearFilter:Ic,LinearMipmapNearestFilter:Fg,LinearSRGBColorSpace:Vf,LinearToneMapping:C2,LinearTransfer:o0,Loader:oo,LoaderUtils:Pb,LoadingManager:uT,LoopOnce:OC,LoopPingPong:UC,LoopRepeat:NC,MOUSE:jh,Material:lr,MaterialLoader:X1,MathUtils:xN,Matrix2:_T,Matrix3:En,Matrix4:gn,MaxEquation:mC,Mesh:ma,MeshBasicMaterial:Fu,MeshDepthMaterial:W1,MeshDistanceMaterial:q1,MeshLambertMaterial:TR,MeshMatcapMaterial:MR,MeshNormalMaterial:bR,MeshPhongMaterial:xR,MeshPhysicalMaterial:_R,MeshStandardMaterial:rT,MeshToonMaterial:SR,MinEquation:pC,MirroredRepeatWrapping:a0,MixOperation:RC,MultiplyBlending:Cb,MultiplyOperation:w0,NearestFilter:Ba,NearestMipMapLinearFilter:g5,NearestMipMapNearestFilter:m5,NearestMipmapLinearFilter:Op,NearestMipmapNearestFilter:U2,NeutralToneMapping:N2,NeverCompare:BC,NeverDepth:r_,NeverStencilFunc:I5,NoBlending:Bc,NoColorSpace:Du,NoNormalPacking:A5,NoToneMapping:fl,NormalAnimationBlendMode:x1,NormalBlending:td,NormalGAPacking:w5,NormalRGPacking:E5,NotEqualCompare:HC,NotEqualDepth:h_,NotEqualStencilFunc:k5,NumberKeyframeTrack:p0,Object3D:li,ObjectLoader:tI,ObjectSpaceNormalMap:zC,OctahedronGeometry:O0,OneFactor:vC,OneMinusConstantAlphaFactor:CC,OneMinusConstantColorFactor:EC,OneMinusDstAlphaFactor:SC,OneMinusDstColorFactor:TC,OneMinusSrcAlphaFactor:s_,OneMinusSrcColorFactor:_C,OrthographicCamera:ec,PCFShadowMap:Vp,PCFSoftShadowMap:Bg,PMREMGenerator:kb,Path:Z_,PerspectiveCamera:fa,Plane:Ru,PlaneGeometry:ku,PlaneHelper:qI,PointLight:NR,PointLightHelper:zI,Points:aR,PointsMaterial:Q2,PolarGridHelper:VI,PolyhedronGeometry:Xf,PositionalAudio:cI,PropertyBinding:oi,PropertyMixer:VR,QuadraticBezierCurve:nT,QuadraticBezierCurve3:iT,Quaternion:or,QuaternionKeyframeTrack:I0,QuaternionLinearInterpolant:RR,R11_EAC_Format:x_,RED_GREEN_RGTC2_Format:G_,RED_RGTC1_Format:V_,REVISION:f1,RG11_EAC_Format:b_,RGBADepthPacking:PC,RGBAFormat:sr,RGBAIntegerFormat:_1,RGBA_ASTC_10x10_Format:I_,RGBA_ASTC_10x5_Format:O_,RGBA_ASTC_10x6_Format:N_,RGBA_ASTC_10x8_Format:U_,RGBA_ASTC_12x10_Format:P_,RGBA_ASTC_12x12_Format:z_,RGBA_ASTC_4x4_Format:M_,RGBA_ASTC_5x4_Format:A_,RGBA_ASTC_5x5_Format:E_,RGBA_ASTC_6x5_Format:w_,RGBA_ASTC_6x6_Format:C_,RGBA_ASTC_8x5_Format:R_,RGBA_ASTC_8x6_Format:D_,RGBA_ASTC_8x8_Format:L_,RGBA_BPTC_Format:B_,RGBA_ETC2_EAC_Format:__,RGBA_PVRTC_2BPPV1_Format:g_,RGBA_PVRTC_4BPPV1_Format:m_,RGBA_S3TC_DXT1_Format:Vg,RGBA_S3TC_DXT3_Format:Hg,RGBA_S3TC_DXT5_Format:Gg,RGBDepthPacking:T5,RGBFormat:k2,RGBIntegerFormat:_5,RGB_BPTC_SIGNED_Format:F_,RGB_BPTC_UNSIGNED_Format:k_,RGB_ETC1_Format:v_,RGB_ETC2_Format:y_,RGB_PVRTC_2BPPV1_Format:p_,RGB_PVRTC_4BPPV1_Format:d_,RGB_S3TC_DXT1_Format:kg,RGDepthPacking:M5,RGFormat:ld,RGIntegerFormat:y1,RawShaderMaterial:sT,Ray:md,Raycaster:GR,RectAreaLight:PR,RedFormat:v1,RedIntegerFormat:C0,ReinhardToneMapping:R2,RenderTarget:G2,RenderTarget3D:TI,RepeatWrapping:i0,ReplaceStencilOp:R5,ReverseSubtractEquation:dC,RingGeometry:F1,SIGNED_R11_EAC_Format:S_,SIGNED_RED_GREEN_RGTC2_Format:j_,SIGNED_RED_RGTC1_Format:H_,SIGNED_RG11_EAC_Format:T_,SRGBColorSpace:ir,SRGBTransfer:Mi,Scene:Y2,ShaderChunk:Ln,ShaderLib:Ql,ShaderMaterial:pl,ShadowMaterial:yR,Shape:id,ShapeGeometry:k1,ShapePath:ZI,ShapeUtils:Jl,ShortType:P2,Skeleton:R1,SkeletonHelper:PI,SkinnedMesh:eR,Source:Bf,Sphere:As,SphereGeometry:N0,Spherical:Bb,SphericalHarmonics3:hT,SplineCurve:aT,SpotLight:OR,SpotLightHelper:II,Sprite:JC,SpriteMaterial:Z2,SrcAlphaFactor:a_,SrcAlphaSaturateFactor:MC,SrcColorFactor:yC,StaticCopyUsage:X5,StaticDrawUsage:l0,StaticReadUsage:j5,StereoCamera:sI,StreamCopyUsage:Z5,StreamDrawUsage:G5,StreamReadUsage:q5,StringKeyframeTrack:yd,SubtractEquation:hC,SubtractiveBlending:wb,TOUCH:Wh,TangentSpaceNormalMap:qf,TetrahedronGeometry:V1,Texture:pa,TextureLoader:QU,TextureUtils:tP,Timer:CI,TimestampQuery:Q5,TorusGeometry:H1,TorusKnotGeometry:G1,Triangle:io,TriangleFanDrawMode:b5,TriangleStripDrawMode:S5,TrianglesDrawMode:x5,TubeGeometry:j1,UVMapping:d1,Uint16BufferAttribute:j2,Uint32BufferAttribute:W2,Uint8BufferAttribute:BN,Uint8ClampedBufferAttribute:FN,Uniform:yT,UniformsGroup:AI,UniformsLib:Ft,UniformsUtils:q2,UnsignedByteType:Br,UnsignedInt101111Type:B2,UnsignedInt248Type:Wp,UnsignedInt5999Type:z2,UnsignedIntType:dl,UnsignedShort4444Type:m1,UnsignedShort5551Type:g1,UnsignedShortType:jp,VSMShadowMap:Zh,Vector2:dt,Vector3:pe,Vector4:Ri,VectorKeyframeTrack:m0,VideoFrameTexture:lU,VideoTexture:sR,WebGL3DRenderTarget:AN,WebGLArrayRenderTarget:MN,WebGLCoordinateSystem:Fo,WebGLCubeRenderTarget:X2,WebGLRenderTarget:ro,WebGLRenderer:QR,WebGLUtils:KR,WebGPUCoordinateSystem:qp,WebXRController:Zy,WireframeGeometry:vR,WrapAroundEnding:r0,ZeroCurvatureEnding:Kh,ZeroFactor:gC,ZeroSlopeEnding:Qh,ZeroStencilOp:C5,createCanvasElement:qC,error:rn,getConsoleFunction:nN,log:u0,setConsoleFunction:tN,warn:It,warnOnce:Xp},Symbol.toStringTag,{value:"Module"}));var BS={exports:{}},FS={},kS={exports:{}},VS={};var WE;function KF(){if(WE)return VS;WE=1;var i=im();function e(y,x){return y===x&&(y!==0||1/y===1/x)||y!==y&&x!==x}var t=typeof Object.is=="function"?Object.is:e,n=i.useState,a=i.useEffect,s=i.useLayoutEffect,o=i.useDebugValue;function c(y,x){var b=x(),M=n({inst:{value:b,getSnapshot:x}}),R=M[0].inst,C=M[1];return s(function(){R.value=b,R.getSnapshot=x,f(R)&&C({inst:R})},[y,b,x]),a(function(){return f(R)&&C({inst:R}),y(function(){f(R)&&C({inst:R})})},[y]),o(b),b}function f(y){var x=y.getSnapshot;y=y.value;try{var b=x();return!t(y,b)}catch{return!0}}function d(y,x){return x()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:c;return VS.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:g,VS}var qE;function QF(){return qE||(qE=1,kS.exports=KF()),kS.exports}var XE;function JF(){if(XE)return FS;XE=1;var i=im(),e=QF();function t(d,g){return d===g&&(d!==0||1/d===1/g)||d!==d&&g!==g}var n=typeof Object.is=="function"?Object.is:t,a=e.useSyncExternalStore,s=i.useRef,o=i.useEffect,c=i.useMemo,f=i.useDebugValue;return FS.useSyncExternalStoreWithSelector=function(d,g,y,x,b){var M=s(null);if(M.current===null){var R={hasValue:!1,value:null};M.current=R}else R=M.current;M=c(function(){function E(V){if(!N){if(N=!0,I=V,V=x(V),b!==void 0&&R.hasValue){var W=R.value;if(b(W,V))return z=W}return z=V}if(W=z,n(I,V))return W;var Z=x(V);return b!==void 0&&b(W,Z)?(I=V,W):(I=V,z=Z)}var N=!1,I,z,F=y===void 0?null:y;return[function(){return E(g())},F===null?void 0:function(){return E(F())}]},[g,y,x,b]);var C=a(d,M[0],M[1]);return o(function(){R.hasValue=!0,R.value=C},[C]),f(C),C},FS}var YE;function $F(){return YE||(YE=1,BS.exports=JF()),BS.exports}var e8=$F();const t8=A0(e8),{useSyncExternalStoreWithSelector:n8}=t8,i8=i=>i;function a8(i,e=i8,t){const n=n8(i.subscribe,i.getState,i.getInitialState,e,t);return Nu.useDebugValue(n),n}const ZE=(i,e)=>{const t=rC(i),n=(a,s=e)=>a8(t,a,s);return Object.assign(n,t),n},s8=((i,e)=>i?ZE(i,e):ZE),r8=i=>typeof i=="object"&&typeof i.then=="function",Ly=[];function o8(i,e,t=(n,a)=>n===a){if(i===e)return!0;if(!i||!e)return!1;const n=i.length;if(e.length!==n)return!1;for(let a=0;a<n;a++)if(!t(i[a],e[a]))return!1;return!0}function l8(i,e=null,t=!1,n={}){e===null&&(e=[i]);for(const s of Ly)if(o8(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return n.lifespan&&n.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,n.lifespan)),s.response;if(!t)throw s.promise}const a={keys:e,equal:n.equal,remove:()=>{const s=Ly.indexOf(a);s!==-1&&Ly.splice(s,1)},promise:(r8(i)?i:i(...e)).then(s=>{a.response=s,n.lifespan&&n.lifespan>0&&(a.timeout=setTimeout(a.remove,n.lifespan))}).catch(s=>a.error=s)};if(Ly.push(a),!t)throw a.promise}const c8=(i,e,t)=>l8(i,e,!1,t);var HS={exports:{}},GS={exports:{}},jS={exports:{}},WS={};var KE;function u8(){return KE||(KE=1,(function(i){function e(q,K){var te=q.length;q.push(K);e:for(;0<te;){var de=te-1>>>1,ce=q[de];if(0<a(ce,K))q[de]=K,q[te]=ce,te=de;else break e}}function t(q){return q.length===0?null:q[0]}function n(q){if(q.length===0)return null;var K=q[0],te=q.pop();if(te!==K){q[0]=te;e:for(var de=0,ce=q.length,G=ce>>>1;de<G;){var ne=2*(de+1)-1,fe=q[ne],me=ne+1,xe=q[me];if(0>a(fe,te))me<ce&&0>a(xe,fe)?(q[de]=xe,q[me]=te,de=me):(q[de]=fe,q[ne]=te,de=ne);else if(me<ce&&0>a(xe,te))q[de]=xe,q[me]=te,de=me;else break e}}return K}function a(q,K){var te=q.sortIndex-K.sortIndex;return te!==0?te:q.id-K.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();i.unstable_now=function(){return o.now()-c}}var f=[],d=[],g=1,y=null,x=3,b=!1,M=!1,R=!1,C=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function I(q){for(var K=t(d);K!==null;){if(K.callback===null)n(d);else if(K.startTime<=q)n(d),K.sortIndex=K.expirationTime,e(f,K);else break;K=t(d)}}function z(q){if(R=!1,I(q),!M)if(t(f)!==null)M=!0,re();else{var K=t(d);K!==null&&ve(z,K.startTime-q)}}var F=!1,V=-1,W=5,Z=-1;function B(){return!(i.unstable_now()-Z<W)}function H(){if(F){var q=i.unstable_now();Z=q;var K=!0;try{e:{M=!1,R&&(R=!1,E(V),V=-1),b=!0;var te=x;try{t:{for(I(q),y=t(f);y!==null&&!(y.expirationTime>q&&B());){var de=y.callback;if(typeof de=="function"){y.callback=null,x=y.priorityLevel;var ce=de(y.expirationTime<=q);if(q=i.unstable_now(),typeof ce=="function"){y.callback=ce,I(q),K=!0;break t}y===t(f)&&n(f),I(q)}else n(f);y=t(f)}if(y!==null)K=!0;else{var G=t(d);G!==null&&ve(z,G.startTime-q),K=!1}}break e}finally{y=null,x=te,b=!1}K=void 0}}finally{K?Q():F=!1}}}var Q;if(typeof N=="function")Q=function(){N(H)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,oe=J.port2;J.port1.onmessage=H,Q=function(){oe.postMessage(null)}}else Q=function(){C(H,0)};function re(){F||(F=!0,Q())}function ve(q,K){V=C(function(){q(i.unstable_now())},K)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(q){q.callback=null},i.unstable_continueExecution=function(){M||b||(M=!0,re())},i.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<q?Math.floor(1e3/q):5},i.unstable_getCurrentPriorityLevel=function(){return x},i.unstable_getFirstCallbackNode=function(){return t(f)},i.unstable_next=function(q){switch(x){case 1:case 2:case 3:var K=3;break;default:K=x}var te=x;x=K;try{return q()}finally{x=te}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(q,K){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var te=x;x=q;try{return K()}finally{x=te}},i.unstable_scheduleCallback=function(q,K,te){var de=i.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?de+te:de):te=de,q){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=te+ce,q={id:g++,callback:K,priorityLevel:q,startTime:te,expirationTime:ce,sortIndex:-1},te>de?(q.sortIndex=te,e(d,q),t(f)===null&&q===t(d)&&(R?(E(V),V=-1):R=!0,ve(z,te-de))):(q.sortIndex=ce,e(f,q),M||b||(M=!0,re())),q},i.unstable_shouldYield=B,i.unstable_wrapCallback=function(q){var K=x;return function(){var te=x;x=K;try{return q.apply(this,arguments)}finally{x=te}}}})(WS)),WS}var QE;function f8(){return QE||(QE=1,jS.exports=u8()),jS.exports}var JE;function h8(){return JE||(JE=1,(function(i){i.exports=function(e){function t(h,p,S,w){return new iu(h,p,S,w)}function n(){}function a(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)p+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(h){return h===null||typeof h!="object"?null:(h=xm&&h[xm]||h["@@iterator"],typeof h=="function"?h:null)}function o(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===ru?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case nf:return"Fragment";case Ro:return"Portal";case _m:return"Profiler";case ym:return"StrictMode";case Ed:return"Suspense";case vc:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case Zo:return(h.displayName||"Context")+".Provider";case gc:return(h._context.displayName||"Context")+".Consumer";case af:var p=h.render;return h=h.displayName,h||(h=p.displayName||p.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case ah:return p=h.displayName||null,p!==null?p:o(h.type)||"Memo";case Do:p=h._payload,h=h._init;try{return o(h(p))}catch{}}return null}function c(h){if(wd===void 0)try{throw Error()}catch(S){var p=S.stack.trim().match(/\n( *(at )?)/);wd=p&&p[1]||"",Sm=-1<S.stack.indexOf(`
    at`)?" (<anonymous>)":-1<S.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wd+h+Sm}function f(h,p){if(!h||yc)return"";yc=!0;var S=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var w={DetermineComponentFrameRoot:function(){try{if(p){var Bt=function(){throw Error()};if(Object.defineProperty(Bt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Bt,[])}catch(_n){var Gt=_n}Reflect.construct(h,[],Bt)}else{try{Bt.call()}catch(_n){Gt=_n}h.call(Bt.prototype)}}else{try{throw Error()}catch(_n){Gt=_n}(Bt=h())&&typeof Bt.catch=="function"&&Bt.catch(function(){})}}catch(_n){if(_n&&Gt&&typeof _n.stack=="string")return[_n.stack,Gt.stack]}return[null,null]}};w.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var U=Object.getOwnPropertyDescriptor(w.DetermineComponentFrameRoot,"name");U&&U.configurable&&Object.defineProperty(w.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var k=w.DetermineComponentFrameRoot(),le=k[0],Te=k[1];if(le&&Te){var ze=le.split(`
`),pt=Te.split(`
`);for(U=w=0;w<ze.length&&!ze[w].includes("DetermineComponentFrameRoot");)w++;for(;U<pt.length&&!pt[U].includes("DetermineComponentFrameRoot");)U++;if(w===ze.length||U===pt.length)for(w=ze.length-1,U=pt.length-1;1<=w&&0<=U&&ze[w]!==pt[U];)U--;for(;1<=w&&0<=U;w--,U--)if(ze[w]!==pt[U]){if(w!==1||U!==1)do if(w--,U--,0>U||ze[w]!==pt[U]){var wt=`
`+ze[w].replace(" at new "," at ");return h.displayName&&wt.includes("<anonymous>")&&(wt=wt.replace("<anonymous>",h.displayName)),wt}while(1<=w&&0<=U);break}}}finally{yc=!1,Error.prepareStackTrace=S}return(S=h?h.displayName||h.name:"")?c(S):""}function d(h){switch(h.tag){case 26:case 27:case 5:return c(h.type);case 16:return c("Lazy");case 13:return c("Suspense");case 19:return c("SuspenseList");case 0:case 15:return h=f(h.type,!1),h;case 11:return h=f(h.type.render,!1),h;case 1:return h=f(h.type,!0),h;default:return""}}function g(h){try{var p="";do p+=d(h),h=h.return;while(h);return p}catch(S){return`
Error generating stack: `+S.message+`
`+S.stack}}function y(h){var p=h,S=h;if(h.alternate)for(;p.return;)p=p.return;else{h=p;do p=h,(p.flags&4098)!==0&&(S=p.return),h=p.return;while(h)}return p.tag===3?S:null}function x(h){if(y(h)!==h)throw Error(a(188))}function b(h){var p=h.alternate;if(!p){if(p=y(h),p===null)throw Error(a(188));return p!==h?null:h}for(var S=h,w=p;;){var U=S.return;if(U===null)break;var k=U.alternate;if(k===null){if(w=U.return,w!==null){S=w;continue}break}if(U.child===k.child){for(k=U.child;k;){if(k===S)return x(U),h;if(k===w)return x(U),p;k=k.sibling}throw Error(a(188))}if(S.return!==w.return)S=U,w=k;else{for(var le=!1,Te=U.child;Te;){if(Te===S){le=!0,S=U,w=k;break}if(Te===w){le=!0,w=U,S=k;break}Te=Te.sibling}if(!le){for(Te=k.child;Te;){if(Te===S){le=!0,S=k,w=U;break}if(Te===w){le=!0,w=k,S=U;break}Te=Te.sibling}if(!le)throw Error(a(189))}}if(S.alternate!==w)throw Error(a(190))}if(S.tag!==3)throw Error(a(188));return S.stateNode.current===S?h:p}function M(h){var p=h.tag;if(p===5||p===26||p===27||p===6)return h;for(h=h.child;h!==null;){if(p=M(h),p!==null)return p;h=h.sibling}return null}function R(h){var p=h.tag;if(p===5||p===26||p===27||p===6)return h;for(h=h.child;h!==null;){if(h.tag!==4&&(p=R(h),p!==null))return p;h=h.sibling}return null}function C(h){return{current:h}}function E(h){0>Pl||(h.current=dh[Pl],dh[Pl]=null,Pl--)}function N(h,p){Pl++,dh[Pl]=h.current,h.current=p}function I(h){return h>>>=0,h===0?32:31-(ph(h)/pv|0)|0}function z(h){var p=h&42;if(p!==0)return p;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function F(h,p){var S=h.pendingLanes;if(S===0)return 0;var w=0,U=h.suspendedLanes,k=h.pingedLanes,le=h.warmLanes;h=h.finishedLanes!==0;var Te=S&134217727;return Te!==0?(S=Te&~U,S!==0?w=z(S):(k&=Te,k!==0?w=z(k):h||(le=Te&~le,le!==0&&(w=z(le))))):(Te=S&~U,Te!==0?w=z(Te):k!==0?w=z(k):h||(le=S&~le,le!==0&&(w=z(le)))),w===0?0:p!==0&&p!==w&&(p&U)===0&&(U=w&-w,le=p&-p,U>=le||U===32&&(le&4194176)!==0)?p:w}function V(h,p){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&p)===0}function W(h,p){switch(h){case 1:case 2:case 4:case 8:return p+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Z(){var h=lf;return lf<<=1,(lf&4194176)===0&&(lf=128),h}function B(){var h=mh;return mh<<=1,(mh&62914560)===0&&(mh=4194304),h}function H(h){for(var p=[],S=0;31>S;S++)p.push(h);return p}function Q(h,p){h.pendingLanes|=p,p!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function J(h,p,S,w,U,k){var le=h.pendingLanes;h.pendingLanes=S,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=S,h.entangledLanes&=S,h.errorRecoveryDisabledLanes&=S,h.shellSuspendCounter=0;var Te=h.entanglements,ze=h.expirationTimes,pt=h.hiddenUpdates;for(S=le&~S;0<S;){var wt=31-qs(S),Bt=1<<wt;Te[wt]=0,ze[wt]=-1;var Gt=pt[wt];if(Gt!==null)for(pt[wt]=null,wt=0;wt<Gt.length;wt++){var _n=Gt[wt];_n!==null&&(_n.lane&=-536870913)}S&=~Bt}w!==0&&oe(h,w,0),k!==0&&U===0&&h.tag!==0&&(h.suspendedLanes|=k&~(le&~p))}function oe(h,p,S){h.pendingLanes|=p,h.suspendedLanes&=~p;var w=31-qs(p);h.entangledLanes|=p,h.entanglements[w]=h.entanglements[w]|1073741824|S&4194218}function re(h,p){var S=h.entangledLanes|=p;for(h=h.entanglements;S;){var w=31-qs(S),U=1<<w;U&p|h[w]&p&&(h[w]|=p),S&=~U}}function ve(h){return h&=-h,2<h?8<h?(h&134217727)!==0?32:268435456:8:2}function q(h){if(Xs&&typeof Xs.onCommitFiberRoot=="function")try{Xs.onCommitFiberRoot(uf,h,void 0,(h.current.flags&128)===128)}catch{}}function K(h){if(typeof yv=="function"&&Jm(h),Xs&&typeof Xs.setStrictMode=="function")try{Xs.setStrictMode(uf,h)}catch{}}function te(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}function de(h,p){if(typeof h=="object"&&h!==null){var S=jd.get(h);return S!==void 0?S:(p={value:h,source:p,stack:g(p)},jd.set(h,p),p)}return{value:h,source:p,stack:g(p)}}function ce(h,p){zi[Ji++]=yh,zi[Ji++]=vh,vh=h,yh=p}function G(h,p,S){Mr[Ar++]=el,Mr[Ar++]=Yr,Mr[Ar++]=Lo,Lo=h;var w=el;h=Yr;var U=32-qs(w)-1;w&=~(1<<U),S+=1;var k=32-qs(p)+U;if(30<k){var le=U-U%5;k=(w&(1<<le)-1).toString(32),w>>=le,U-=le,el=1<<32-qs(p)+U|S<<U|w,Yr=k+h}else el=1<<k|S<<U|w,Yr=h}function ne(h){h.return!==null&&(ce(h,1),G(h,1,0))}function fe(h){for(;h===vh;)vh=zi[--Ji],zi[Ji]=null,yh=zi[--Ji],zi[Ji]=null;for(;h===Lo;)Lo=Mr[--Ar],Mr[Ar]=null,Yr=Mr[--Ar],Mr[Ar]=null,el=Mr[--Ar],Mr[Ar]=null}function me(h,p){N(Oo,p),N(_h,h),N(Ya,null),h=ou(p),E(Ya),N(Ya,h)}function xe(){E(Ya),E(_h),E(Oo)}function he(h){h.memoizedState!==null&&N(ff,h);var p=Ya.current,S=X0(p,h.type);p!==S&&(N(_h,h),N(Ya,S))}function _e(h){_h.current===h&&(E(Ya),E(_h)),ff.current===h&&(E(ff),Qo?dn._currentValue=Ws:dn._currentValue2=Ws)}function Ae(h){var p=Error(a(418,""));throw St(de(p,h)),xh}function $e(h,p){if(!Is)throw Error(a(175));cx(h.stateNode,h.type,h.memoizedProps,p,h)||Ae(h)}function et(h){for(_s=h.return;_s;)switch(_s.tag){case 3:case 27:Zr=!0;return;case 5:case 13:Zr=!1;return;default:_s=_s.return}}function qe(h){if(!Is||h!==_s)return!1;if(!ei)return et(h),ei=!0,!1;var p=!1;if(as?h.tag!==3&&h.tag!==27&&(h.tag!==5||cv(h.type)&&!Sc(h.type,h.memoizedProps))&&(p=!0):h.tag!==3&&(h.tag!==5||cv(h.type)&&!Sc(h.type,h.memoizedProps))&&(p=!0),p&&rs&&Ae(h),et(h),h.tag===13){if(!Is)throw Error(a(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(a(317));rs=ov(h)}else rs=_s?Fm(h.stateNode):null;return!0}function nt(){Is&&(rs=_s=null,ei=!1)}function St(h){Er===null?Er=[h]:Er.push(h)}function Ne(){for(var h=Tc,p=hf=Tc=0;p<h;){var S=wr[p];wr[p++]=null;var w=wr[p];wr[p++]=null;var U=wr[p];wr[p++]=null;var k=wr[p];if(wr[p++]=null,w!==null&&U!==null){var le=w.pending;le===null?U.next=U:(U.next=le.next,le.next=U),w.pending=U}k!==0&&ae(S,U,k)}}function Ve(h,p,S,w){wr[Tc++]=h,wr[Tc++]=p,wr[Tc++]=S,wr[Tc++]=w,hf|=w,h.lanes|=w,h=h.alternate,h!==null&&(h.lanes|=w)}function Fe(h,p,S,w){return Ve(h,p,S,w),ut(h)}function rt(h,p){return Ve(h,null,null,p),ut(h)}function ae(h,p,S){h.lanes|=S;var w=h.alternate;w!==null&&(w.lanes|=S);for(var U=!1,k=h.return;k!==null;)k.childLanes|=S,w=k.alternate,w!==null&&(w.childLanes|=S),k.tag===22&&(h=k.stateNode,h===null||h._visibility&1||(U=!0)),h=k,k=k.return;U&&p!==null&&h.tag===3&&(k=h.stateNode,U=31-qs(S),k=k.hiddenUpdates,h=k[U],h===null?k[U]=[p]:h.push(p),p.lane=S|536870912)}function ut(h){if(50<yu)throw yu=0,Bs=null,Error(a(185));for(var p=h.return;p!==null;)h=p,p=h.return;return h.tag===3?h.stateNode:null}function Ze(h){h!==fu&&h.next===null&&(fu===null?df=fu=h:fu=fu.next=h),bh=!0,Sh||(Sh=!0,Be(tt))}function Le(h,p){if(!No&&bh){No=!0;do for(var S=!1,w=df;w!==null;){if(h!==0){var U=w.pendingLanes;if(U===0)var k=0;else{var le=w.suspendedLanes,Te=w.pingedLanes;k=(1<<31-qs(42|h)+1)-1,k&=U&~(le&~Te),k=k&201326677?k&201326677|1:k?k|2:0}k!==0&&(S=!0,ye(w,k))}else k=Nn,k=F(w,w===Pn?k:0),(k&3)===0||V(w,k)||(S=!0,ye(w,k));w=w.next}while(S);No=!1}}function tt(){bh=Sh=!1;var h=0;Mc!==0&&(bc()&&(h=Mc),Mc=0);for(var p=ss(),S=null,w=df;w!==null;){var U=w.next,k=$(w,p);k===0?(w.next=null,S===null?df=U:S.next=U,U===null&&(fu=S)):(S=w,(h!==0||(k&3)!==0)&&(bh=!0)),w=U}Le(h)}function $(h,p){for(var S=h.suspendedLanes,w=h.pingedLanes,U=h.expirationTimes,k=h.pendingLanes&-62914561;0<k;){var le=31-qs(k),Te=1<<le,ze=U[le];ze===-1?((Te&S)===0||(Te&w)!==0)&&(U[le]=W(Te,p)):ze<=p&&(h.expiredLanes|=Te),k&=~Te}if(p=Pn,S=Nn,S=F(h,h===p?S:0),w=h.callbackNode,S===0||h===p&&Ti===2||h.cancelPendingCommit!==null)return w!==null&&w!==null&&gh(w),h.callbackNode=null,h.callbackPriority=0;if((S&3)===0||V(h,S)){if(p=S&-S,p===h.callbackPriority)return p;switch(w!==null&&gh(w),ve(S)){case 2:case 8:S=vv;break;case 32:S=Hd;break;case 268435456:S=Gd;break;default:S=Hd}return w=Y.bind(null,h),S=cf(S,w),h.callbackPriority=p,h.callbackNode=S,p}return w!==null&&w!==null&&gh(w),h.callbackPriority=2,h.callbackNode=null,2}function Y(h,p){var S=h.callbackNode;if(ba()&&h.callbackNode!==S)return null;var w=Nn;return w=F(h,h===Pn?w:0),w===0?null:(pc(h,w,p),$(h,ss()),h.callbackNode!=null&&h.callbackNode===S?Y.bind(null,h):null)}function ye(h,p){if(ba())return null;pc(h,p,!0)}function Be(h){Ta?Ld(function(){(sn&6)!==0?cf(Qm,h):h()}):cf(Qm,h)}function De(){return Mc===0&&(Mc=Z()),Mc}function Ce(h,p){if(Th===null){var S=Th=[];Wd=0,Ys=De(),Ac={status:"pending",value:void 0,then:function(w){S.push(w)}}}return Wd++,p.then(vt,vt),p}function vt(){if(--Wd===0&&Th!==null){Ac!==null&&(Ac.status="fulfilled");var h=Th;Th=null,Ys=0,Ac=null;for(var p=0;p<h.length;p++)(0,h[p])()}}function ht(h,p){var S=[],w={status:"pending",value:null,reason:null,then:function(U){S.push(U)}};return h.then(function(){w.status="fulfilled",w.value=p;for(var U=0;U<S.length;U++)(0,S[U])(p)},function(U){for(w.status="rejected",w.reason=U,U=0;U<S.length;U++)(0,S[U])(void 0)}),w}function bt(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ct(h,p){h=h.updateQueue,p.updateQueue===h&&(p.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function Ge(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function Qe(h,p,S){var w=h.updateQueue;if(w===null)return null;if(w=w.shared,(sn&2)!==0){var U=w.pending;return U===null?p.next=p:(p.next=U.next,U.next=p),w.pending=p,p=ut(h),ae(h,null,S),p}return Ve(h,w,p,S),ut(h)}function st(h,p,S){if(p=p.updateQueue,p!==null&&(p=p.shared,(S&4194176)!==0)){var w=p.lanes;w&=h.pendingLanes,S|=w,p.lanes=S,re(h,S)}}function ge(h,p){var S=h.updateQueue,w=h.alternate;if(w!==null&&(w=w.updateQueue,S===w)){var U=null,k=null;if(S=S.firstBaseUpdate,S!==null){do{var le={lane:S.lane,tag:S.tag,payload:S.payload,callback:null,next:null};k===null?U=k=le:k=k.next=le,S=S.next}while(S!==null);k===null?U=k=p:k=k.next=p}else U=k=p;S={baseState:w.baseState,firstBaseUpdate:U,lastBaseUpdate:k,shared:w.shared,callbacks:w.callbacks},h.updateQueue=S;return}h=S.lastBaseUpdate,h===null?S.firstBaseUpdate=p:h.next=p,S.lastBaseUpdate=p}function we(){if(pf){var h=Ac;if(h!==null)throw h}}function xt(h,p,S,w){pf=!1;var U=h.updateQueue;zl=!1;var k=U.firstBaseUpdate,le=U.lastBaseUpdate,Te=U.shared.pending;if(Te!==null){U.shared.pending=null;var ze=Te,pt=ze.next;ze.next=null,le===null?k=pt:le.next=pt,le=ze;var wt=h.alternate;wt!==null&&(wt=wt.updateQueue,Te=wt.lastBaseUpdate,Te!==le&&(Te===null?wt.firstBaseUpdate=pt:Te.next=pt,wt.lastBaseUpdate=ze))}if(k!==null){var Bt=U.baseState;le=0,wt=pt=ze=null,Te=k;do{var Gt=Te.lane&-536870913,_n=Gt!==Te.lane;if(_n?(Nn&Gt)===Gt:(w&Gt)===Gt){Gt!==0&&Gt===Ys&&(pf=!0),wt!==null&&(wt=wt.next={lane:0,tag:Te.tag,payload:Te.payload,callback:null,next:null});e:{var Js=h,wh=Te;Gt=p;var _u=S;switch(wh.tag){case 1:if(Js=wh.payload,typeof Js=="function"){Bt=Js.call(_u,Bt,Gt);break e}Bt=Js;break e;case 3:Js.flags=Js.flags&-65537|128;case 0:if(Js=wh.payload,Gt=typeof Js=="function"?Js.call(_u,Bt,Gt):Js,Gt==null)break e;Bt=su({},Bt,Gt);break e;case 2:zl=!0}}Gt=Te.callback,Gt!==null&&(h.flags|=64,_n&&(h.flags|=8192),_n=U.callbacks,_n===null?U.callbacks=[Gt]:_n.push(Gt))}else _n={lane:Gt,tag:Te.tag,payload:Te.payload,callback:Te.callback,next:null},wt===null?(pt=wt=_n,ze=Bt):wt=wt.next=_n,le|=Gt;if(Te=Te.next,Te===null){if(Te=U.shared.pending,Te===null)break;_n=Te,Te=_n.next,_n.next=null,U.lastBaseUpdate=_n,U.shared.pending=null}}while(!0);wt===null&&(ze=Bt),U.baseState=ze,U.firstBaseUpdate=pt,U.lastBaseUpdate=wt,k===null&&(U.shared.lanes=0),Lr|=le,h.lanes=le,h.memoizedState=Bt}}function Se(h,p){if(typeof h!="function")throw Error(a(191,h));h.call(p)}function it(h,p){var S=h.callbacks;if(S!==null)for(h.callbacks=null,h=0;h<S.length;h++)Se(S[h],p)}function lt(h,p){if(Tr(h,p))return!0;if(typeof h!="object"||h===null||typeof p!="object"||p===null)return!1;var S=Object.keys(h),w=Object.keys(p);if(S.length!==w.length)return!1;for(w=0;w<S.length;w++){var U=S[w];if(!Mh.call(p,U)||!Tr(h[U],p[U]))return!1}return!0}function At(h){return h=h.status,h==="fulfilled"||h==="rejected"}function ct(){}function je(h,p,S){switch(S=h[S],S===void 0?h.push(p):S!==p&&(p.then(ct,ct),p=S),p.status){case"fulfilled":return p.value;case"rejected":throw h=p.reason,h===xi?Error(a(483)):h;default:if(typeof p.status=="string")p.then(ct,ct);else{if(h=Pn,h!==null&&100<h.shellSuspendCounter)throw Error(a(482));h=p,h.status="pending",h.then(function(w){if(p.status==="pending"){var U=p;U.status="fulfilled",U.value=w}},function(w){if(p.status==="pending"){var U=p;U.status="rejected",U.reason=w}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw h=p.reason,h===xi?Error(a(483)):h}throw hu=p,xi}}function mt(){if(hu===null)throw Error(a(459));var h=hu;return hu=null,h}function Rt(h){var p=Kr;return Kr+=1,tl===null&&(tl=[]),je(tl,h,p)}function Lt(h,p){p=p.props.ref,h.ref=p!==void 0?p:null}function qt(h,p){throw p.$$typeof===vm?Error(a(525)):(h=Object.prototype.toString.call(p),Error(a(31,h==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":h)))}function bn(h){var p=h._init;return p(h._payload)}function Bn(h){function p(Ke,Ie){if(h){var at=Ke.deletions;at===null?(Ke.deletions=[Ie],Ke.flags|=16):at.push(Ie)}}function S(Ke,Ie){if(!h)return null;for(;Ie!==null;)p(Ke,Ie),Ie=Ie.sibling;return null}function w(Ke){for(var Ie=new Map;Ke!==null;)Ke.key!==null?Ie.set(Ke.key,Ke):Ie.set(Ke.index,Ke),Ke=Ke.sibling;return Ie}function U(Ke,Ie){return Ke=qa(Ke,Ie),Ke.index=0,Ke.sibling=null,Ke}function k(Ke,Ie,at){return Ke.index=at,h?(at=Ke.alternate,at!==null?(at=at.index,at<Ie?(Ke.flags|=33554434,Ie):at):(Ke.flags|=33554434,Ie)):(Ke.flags|=1048576,Ie)}function le(Ke){return h&&Ke.alternate===null&&(Ke.flags|=33554434),Ke}function Te(Ke,Ie,at,Mt){return Ie===null||Ie.tag!==6?(Ie=mc(at,Ke.mode,Mt),Ie.return=Ke,Ie):(Ie=U(Ie,at),Ie.return=Ke,Ie)}function ze(Ke,Ie,at,Mt){var tn=at.type;return tn===nf?wt(Ke,Ie,at.props.children,Mt,at.key):Ie!==null&&(Ie.elementType===tn||typeof tn=="object"&&tn!==null&&tn.$$typeof===Do&&bn(tn)===Ie.type)?(Ie=U(Ie,at.props),Lt(Ie,at),Ie.return=Ke,Ie):(Ie=qr(at.type,at.key,at.props,null,Ke.mode,Mt),Lt(Ie,at),Ie.return=Ke,Ie)}function pt(Ke,Ie,at,Mt){return Ie===null||Ie.tag!==4||Ie.stateNode.containerInfo!==at.containerInfo||Ie.stateNode.implementation!==at.implementation?(Ie=tf(at,Ke.mode,Mt),Ie.return=Ke,Ie):(Ie=U(Ie,at.children||[]),Ie.return=Ke,Ie)}function wt(Ke,Ie,at,Mt,tn){return Ie===null||Ie.tag!==7?(Ie=Ll(at,Ke.mode,Mt,tn),Ie.return=Ke,Ie):(Ie=U(Ie,at),Ie.return=Ke,Ie)}function Bt(Ke,Ie,at){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return Ie=mc(""+Ie,Ke.mode,at),Ie.return=Ke,Ie;if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case Ol:return at=qr(Ie.type,Ie.key,Ie.props,null,Ke.mode,at),Lt(at,Ie),at.return=Ke,at;case Ro:return Ie=tf(Ie,Ke.mode,at),Ie.return=Ke,Ie;case Do:var Mt=Ie._init;return Ie=Mt(Ie._payload),Bt(Ke,Ie,at)}if(_c(Ie)||s(Ie))return Ie=Ll(Ie,Ke.mode,at,null),Ie.return=Ke,Ie;if(typeof Ie.then=="function")return Bt(Ke,Rt(Ie),at);if(Ie.$$typeof===Zo)return Bt(Ke,xl(Ke,Ie),at);qt(Ke,Ie)}return null}function Gt(Ke,Ie,at,Mt){var tn=Ie!==null?Ie.key:null;if(typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint")return tn!==null?null:Te(Ke,Ie,""+at,Mt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case Ol:return at.key===tn?ze(Ke,Ie,at,Mt):null;case Ro:return at.key===tn?pt(Ke,Ie,at,Mt):null;case Do:return tn=at._init,at=tn(at._payload),Gt(Ke,Ie,at,Mt)}if(_c(at)||s(at))return tn!==null?null:wt(Ke,Ie,at,Mt,null);if(typeof at.then=="function")return Gt(Ke,Ie,Rt(at),Mt);if(at.$$typeof===Zo)return Gt(Ke,Ie,xl(Ke,at),Mt);qt(Ke,at)}return null}function _n(Ke,Ie,at,Mt,tn){if(typeof Mt=="string"&&Mt!==""||typeof Mt=="number"||typeof Mt=="bigint")return Ke=Ke.get(at)||null,Te(Ie,Ke,""+Mt,tn);if(typeof Mt=="object"&&Mt!==null){switch(Mt.$$typeof){case Ol:return Ke=Ke.get(Mt.key===null?at:Mt.key)||null,ze(Ie,Ke,Mt,tn);case Ro:return Ke=Ke.get(Mt.key===null?at:Mt.key)||null,pt(Ie,Ke,Mt,tn);case Do:var Ni=Mt._init;return Mt=Ni(Mt._payload),_n(Ke,Ie,at,Mt,tn)}if(_c(Mt)||s(Mt))return Ke=Ke.get(at)||null,wt(Ie,Ke,Mt,tn,null);if(typeof Mt.then=="function")return _n(Ke,Ie,at,Rt(Mt),tn);if(Mt.$$typeof===Zo)return _n(Ke,Ie,at,xl(Ie,Mt),tn);qt(Ie,Mt)}return null}function Js(Ke,Ie,at,Mt){for(var tn=null,Ni=null,pn=Ie,ni=Ie=0,Pa=null;pn!==null&&ni<at.length;ni++){pn.index>ni?(Pa=pn,pn=null):Pa=pn.sibling;var ii=Gt(Ke,pn,at[ni],Mt);if(ii===null){pn===null&&(pn=Pa);break}h&&pn&&ii.alternate===null&&p(Ke,pn),Ie=k(ii,Ie,ni),Ni===null?tn=ii:Ni.sibling=ii,Ni=ii,pn=Pa}if(ni===at.length)return S(Ke,pn),ei&&ce(Ke,ni),tn;if(pn===null){for(;ni<at.length;ni++)pn=Bt(Ke,at[ni],Mt),pn!==null&&(Ie=k(pn,Ie,ni),Ni===null?tn=pn:Ni.sibling=pn,Ni=pn);return ei&&ce(Ke,ni),tn}for(pn=w(pn);ni<at.length;ni++)Pa=_n(pn,Ke,ni,at[ni],Mt),Pa!==null&&(h&&Pa.alternate!==null&&pn.delete(Pa.key===null?ni:Pa.key),Ie=k(Pa,Ie,ni),Ni===null?tn=Pa:Ni.sibling=Pa,Ni=Pa);return h&&pn.forEach(function(jl){return p(Ke,jl)}),ei&&ce(Ke,ni),tn}function wh(Ke,Ie,at,Mt){if(at==null)throw Error(a(151));for(var tn=null,Ni=null,pn=Ie,ni=Ie=0,Pa=null,ii=at.next();pn!==null&&!ii.done;ni++,ii=at.next()){pn.index>ni?(Pa=pn,pn=null):Pa=pn.sibling;var jl=Gt(Ke,pn,ii.value,Mt);if(jl===null){pn===null&&(pn=Pa);break}h&&pn&&jl.alternate===null&&p(Ke,pn),Ie=k(jl,Ie,ni),Ni===null?tn=jl:Ni.sibling=jl,Ni=jl,pn=Pa}if(ii.done)return S(Ke,pn),ei&&ce(Ke,ni),tn;if(pn===null){for(;!ii.done;ni++,ii=at.next())ii=Bt(Ke,ii.value,Mt),ii!==null&&(Ie=k(ii,Ie,ni),Ni===null?tn=ii:Ni.sibling=ii,Ni=ii);return ei&&ce(Ke,ni),tn}for(pn=w(pn);!ii.done;ni++,ii=at.next())ii=_n(pn,Ke,ni,ii.value,Mt),ii!==null&&(h&&ii.alternate!==null&&pn.delete(ii.key===null?ni:ii.key),Ie=k(ii,Ie,ni),Ni===null?tn=ii:Ni.sibling=ii,Ni=ii);return h&&pn.forEach(function(ep){return p(Ke,ep)}),ei&&ce(Ke,ni),tn}function _u(Ke,Ie,at,Mt){if(typeof at=="object"&&at!==null&&at.type===nf&&at.key===null&&(at=at.props.children),typeof at=="object"&&at!==null){switch(at.$$typeof){case Ol:e:{for(var tn=at.key;Ie!==null;){if(Ie.key===tn){if(tn=at.type,tn===nf){if(Ie.tag===7){S(Ke,Ie.sibling),Mt=U(Ie,at.props.children),Mt.return=Ke,Ke=Mt;break e}}else if(Ie.elementType===tn||typeof tn=="object"&&tn!==null&&tn.$$typeof===Do&&bn(tn)===Ie.type){S(Ke,Ie.sibling),Mt=U(Ie,at.props),Lt(Mt,at),Mt.return=Ke,Ke=Mt;break e}S(Ke,Ie);break}else p(Ke,Ie);Ie=Ie.sibling}at.type===nf?(Mt=Ll(at.props.children,Ke.mode,Mt,at.key),Mt.return=Ke,Ke=Mt):(Mt=qr(at.type,at.key,at.props,null,Ke.mode,Mt),Lt(Mt,at),Mt.return=Ke,Ke=Mt)}return le(Ke);case Ro:e:{for(tn=at.key;Ie!==null;){if(Ie.key===tn)if(Ie.tag===4&&Ie.stateNode.containerInfo===at.containerInfo&&Ie.stateNode.implementation===at.implementation){S(Ke,Ie.sibling),Mt=U(Ie,at.children||[]),Mt.return=Ke,Ke=Mt;break e}else{S(Ke,Ie);break}else p(Ke,Ie);Ie=Ie.sibling}Mt=tf(at,Ke.mode,Mt),Mt.return=Ke,Ke=Mt}return le(Ke);case Do:return tn=at._init,at=tn(at._payload),_u(Ke,Ie,at,Mt)}if(_c(at))return Js(Ke,Ie,at,Mt);if(s(at)){if(tn=s(at),typeof tn!="function")throw Error(a(150));return at=tn.call(at),wh(Ke,Ie,at,Mt)}if(typeof at.then=="function")return _u(Ke,Ie,Rt(at),Mt);if(at.$$typeof===Zo)return _u(Ke,Ie,xl(Ke,at),Mt);qt(Ke,at)}return typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint"?(at=""+at,Ie!==null&&Ie.tag===6?(S(Ke,Ie.sibling),Mt=U(Ie,at),Mt.return=Ke,Ke=Mt):(S(Ke,Ie),Mt=mc(at,Ke.mode,Mt),Mt.return=Ke,Ke=Mt),le(Ke)):S(Ke,Ie)}return function(Ke,Ie,at,Mt){try{Kr=0;var tn=_u(Ke,Ie,at,Mt);return tl=null,tn}catch(pn){if(pn===xi)throw pn;var Ni=t(29,pn,null,Ke.mode);return Ni.lanes=Mt,Ni.return=Ke,Ni}}}function Ai(h,p){h=Uo,N(Cr,h),N(nl,p),Uo=h|p.baseLanes}function ia(){N(Cr,Uo),N(nl,nl.current)}function Ca(){Uo=Cr.current,E(nl),E(Cr)}function Yn(h){var p=h.alternate;N(Ma,Ma.current&1),N(Rr,h),Qr===null&&(p===null||nl.current!==null||p.memoizedState!==null)&&(Qr=h)}function kt(h){if(h.tag===22){if(N(Ma,Ma.current),N(Rr,h),Qr===null){var p=h.alternate;p!==null&&p.memoizedState!==null&&(Qr=h)}}else Fi()}function Fi(){N(Ma,Ma.current),N(Rr,Rr.current)}function si(h){E(Rr),Qr===h&&(Qr=null),E(Ma)}function Hn(h){for(var p=h;p!==null;){if(p.tag===13){var S=p.memoizedState;if(S!==null&&(S=S.dehydrated,S===null||Pd(S)||hh(S)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}function cn(){throw Error(a(321))}function Li(h,p){if(p===null)return!1;for(var S=0;S<p.length&&S<h.length;S++)if(!Tr(h[S],p[S]))return!1;return!0}function ga(h,p,S,w,U,k){return il=k,Rn=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,un.H=h===null||h.memoizedState===null?Aa:xs,Bl=!1,k=S(w,U),Bl=!1,Bi&&(k=cr(p,S,w,U)),fs(h),k}function fs(h){un.H=ti;var p=ri!==null&&ri.next!==null;if(il=0,ra=ri=Rn=null,Jr=!1,$i=0,mf=null,p)throw Error(a(300));h===null||oa||(h=h.dependencies,h!==null&&yo(h)&&(oa=!0))}function cr(h,p,S,w){Rn=h;var U=0;do{if(Bi&&(mf=null),$i=0,Bi=!1,25<=U)throw Error(a(301));if(U+=1,ra=ri=null,h.updateQueue!=null){var k=h.updateQueue;k.lastEffect=null,k.events=null,k.stores=null,k.memoCache!=null&&(k.memoCache.index=0)}un.H=wc,k=p(S,w)}while(Bi);return k}function lo(){var h=un.H,p=h.useState()[0];return p=typeof p.then=="function"?va(p):p,h=h.useState()[0],(ri!==null?ri.memoizedState:null)!==h&&(Rn.flags|=1024),p}function ur(){var h=Ah!==0;return Ah=0,h}function fr(h,p,S){p.updateQueue=h.updateQueue,p.flags&=-2053,h.lanes&=~S}function Gr(h){if(Jr){for(h=h.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}Jr=!1}il=0,ra=ri=Rn=null,Bi=!1,$i=Ah=0,mf=null}function yi(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ra===null?Rn.memoizedState=ra=h:ra=ra.next=h,ra}function Zn(){if(ri===null){var h=Rn.alternate;h=h!==null?h.memoizedState:null}else h=ri.next;var p=ra===null?Rn.memoizedState:ra.next;if(p!==null)ra=p,ri=h;else{if(h===null)throw Rn.alternate===null?Error(a(467)):Error(a(310));ri=h,h={memoizedState:ri.memoizedState,baseState:ri.baseState,baseQueue:ri.baseQueue,queue:ri.queue,next:null},ra===null?Rn.memoizedState=ra=h:ra=ra.next=h}return ra}function va(h){var p=$i;return $i+=1,mf===null&&(mf=[]),h=je(mf,h,p),p=Rn,(ra===null?p.memoizedState:ra.next)===null&&(p=p.alternate,un.H=p===null||p.memoizedState===null?Aa:xs),h}function Xt(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return va(h);if(h.$$typeof===Zo)return aa(h)}throw Error(a(438,String(h)))}function ie(h){var p=null,S=Rn.updateQueue;if(S!==null&&(p=S.memoCache),p==null){var w=Rn.alternate;w!==null&&(w=w.updateQueue,w!==null&&(w=w.memoCache,w!=null&&(p={data:w.data.map(function(U){return U.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),S===null&&(S=Xd(),Rn.updateQueue=S),S.memoCache=p,S=p.data[p.index],S===void 0)for(S=p.data[p.index]=Array(h),w=0;w<h;w++)S[w]=q0;return p.index++,S}function Re(h,p){return typeof p=="function"?p(h):p}function Xe(h){var p=Zn();return ke(p,ri,h)}function ke(h,p,S){var w=h.queue;if(w===null)throw Error(a(311));w.lastRenderedReducer=S;var U=h.baseQueue,k=w.pending;if(k!==null){if(U!==null){var le=U.next;U.next=k.next,k.next=le}p.baseQueue=U=k,w.pending=null}if(k=h.baseState,U===null)h.memoizedState=k;else{p=U.next;var Te=le=null,ze=null,pt=p,wt=!1;do{var Bt=pt.lane&-536870913;if(Bt!==pt.lane?(Nn&Bt)===Bt:(il&Bt)===Bt){var Gt=pt.revertLane;if(Gt===0)ze!==null&&(ze=ze.next={lane:0,revertLane:0,action:pt.action,hasEagerState:pt.hasEagerState,eagerState:pt.eagerState,next:null}),Bt===Ys&&(wt=!0);else if((il&Gt)===Gt){pt=pt.next,Gt===Ys&&(wt=!0);continue}else Bt={lane:0,revertLane:pt.revertLane,action:pt.action,hasEagerState:pt.hasEagerState,eagerState:pt.eagerState,next:null},ze===null?(Te=ze=Bt,le=k):ze=ze.next=Bt,Rn.lanes|=Gt,Lr|=Gt;Bt=pt.action,Bl&&S(k,Bt),k=pt.hasEagerState?pt.eagerState:S(k,Bt)}else Gt={lane:Bt,revertLane:pt.revertLane,action:pt.action,hasEagerState:pt.hasEagerState,eagerState:pt.eagerState,next:null},ze===null?(Te=ze=Gt,le=k):ze=ze.next=Gt,Rn.lanes|=Bt,Lr|=Bt;pt=pt.next}while(pt!==null&&pt!==p);if(ze===null?le=k:ze.next=Te,!Tr(k,h.memoizedState)&&(oa=!0,wt&&(S=Ac,S!==null)))throw S;h.memoizedState=k,h.baseState=le,h.baseQueue=ze,w.lastRenderedState=k}return U===null&&(w.lanes=0),[h.memoizedState,w.dispatch]}function Ue(h){var p=Zn(),S=p.queue;if(S===null)throw Error(a(311));S.lastRenderedReducer=h;var w=S.dispatch,U=S.pending,k=p.memoizedState;if(U!==null){S.pending=null;var le=U=U.next;do k=h(k,le.action),le=le.next;while(le!==U);Tr(k,p.memoizedState)||(oa=!0),p.memoizedState=k,p.baseQueue===null&&(p.baseState=k),S.lastRenderedState=k}return[k,w]}function Et(h,p,S){var w=Rn,U=Zn(),k=ei;if(k){if(S===void 0)throw Error(a(407));S=S()}else S=p();var le=!Tr((ri||U).memoizedState,S);if(le&&(U.memoizedState=S,oa=!0),U=U.queue,ki(Pt.bind(null,w,U,h),[h]),U.getSnapshot!==p||le||ra!==null&&ra.memoizedState.tag&1){if(w.flags|=2048,Qn(9,Dt.bind(null,w,U,S,p),{destroy:void 0},null),Pn===null)throw Error(a(349));k||(il&60)!==0||Ut(w,p,S)}return S}function Ut(h,p,S){h.flags|=16384,h={getSnapshot:p,value:S},p=Rn.updateQueue,p===null?(p=Xd(),Rn.updateQueue=p,p.stores=[h]):(S=p.stores,S===null?p.stores=[h]:S.push(h))}function Dt(h,p,S,w){p.value=S,p.getSnapshot=w,Tt(p)&&Ot(h)}function Pt(h,p,S){return S(function(){Tt(p)&&Ot(h)})}function Tt(h){var p=h.getSnapshot;h=h.value;try{var S=p();return!Tr(h,S)}catch{return!0}}function Ot(h){var p=rt(h,2);p!==null&&Na(p,h,2)}function Vt(h){var p=yi();if(typeof h=="function"){var S=h;if(h=S(),Bl){K(!0);try{S()}finally{K(!1)}}}return p.memoizedState=p.baseState=h,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Re,lastRenderedState:h},p}function Jt(h,p,S,w){return h.baseState=S,ke(h,ri,typeof w=="function"?w:Re)}function xn(h,p,S,w,U){if(dr(h))throw Error(a(485));if(h=p.action,h!==null){var k={payload:U,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(le){k.listeners.push(le)}};un.T!==null?S(!0):k.isTransition=!1,w(k),S=p.pending,S===null?(k.next=p.pending=k,Kn(p,k)):(k.next=S.next,p.pending=S.next=k)}}function Kn(h,p){var S=p.action,w=p.payload,U=h.state;if(p.isTransition){var k=un.T,le={};un.T=le;try{var Te=S(U,w),ze=un.S;ze!==null&&ze(le,Te),zt(h,p,Te)}catch(pt){Yt(h,p,pt)}finally{un.T=k}}else try{k=S(U,w),zt(h,p,k)}catch(pt){Yt(h,p,pt)}}function zt(h,p,S){S!==null&&typeof S=="object"&&typeof S.then=="function"?S.then(function(w){nn(h,p,w)},function(w){return Yt(h,p,w)}):nn(h,p,S)}function nn(h,p,S){p.status="fulfilled",p.value=S,Cn(p),h.state=S,p=h.pending,p!==null&&(S=p.next,S===p?h.pending=null:(S=S.next,p.next=S,Kn(h,S)))}function Yt(h,p,S){var w=h.pending;if(h.pending=null,w!==null){w=w.next;do p.status="rejected",p.reason=S,Cn(p),p=p.next;while(p!==w)}h.action=null}function Cn(h){h=h.listeners;for(var p=0;p<h.length;p++)(0,h[p])()}function jt(h,p){return p}function qi(h,p){if(ei){var S=Pn.formState;if(S!==null){e:{var w=Rn;if(ei){if(rs){var U=$0(rs,Zr);if(U){rs=Fm(U),w=ev(U);break e}}Ae(w)}w=!1}w&&(p=S[0])}}S=yi(),S.memoizedState=S.baseState=p,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jt,lastRenderedState:p},S.queue=w,S=hr.bind(null,Rn,w),w.dispatch=S,w=Vt(!1);var k=Ds.bind(null,Rn,!1,w.queue);return w=yi(),U={state:p,dispatch:null,action:h,pending:null},w.queue=U,S=xn.bind(null,Rn,U,k,S),U.dispatch=S,w.memoizedState=h,[p,S,!1]}function ya(h){var p=Zn();return ai(p,ri,h)}function ai(h,p,S){p=ke(h,p,jt)[0],h=Xe(Re)[0],p=typeof p=="object"&&p!==null&&typeof p.then=="function"?va(p):p;var w=Zn(),U=w.queue,k=U.dispatch;return S!==w.memoizedState&&(Rn.flags|=2048,Qn(9,Fn.bind(null,U,S),{destroy:void 0},null)),[p,k,h]}function Fn(h,p){h.action=p}function Tn(h){var p=Zn(),S=ri;if(S!==null)return ai(p,S,h);Zn(),p=p.memoizedState,S=Zn();var w=S.queue.dispatch;return S.memoizedState=h,[p,w,!1]}function Qn(h,p,S,w){return h={tag:h,create:p,inst:S,deps:w,next:null},p=Rn.updateQueue,p===null&&(p=Xd(),Rn.updateQueue=p),S=p.lastEffect,S===null?p.lastEffect=h.next=h:(w=S.next,S.next=h,h.next=w,p.lastEffect=h),h}function ci(){return Zn().memoizedState}function Ei(h,p,S,w){var U=yi();Rn.flags|=h,U.memoizedState=Qn(1|p,S,{destroy:void 0},w===void 0?null:w)}function _i(h,p,S,w){var U=Zn();w=w===void 0?null:w;var k=U.memoizedState.inst;ri!==null&&w!==null&&Li(w,ri.memoizedState.deps)?U.memoizedState=Qn(p,S,k,w):(Rn.flags|=h,U.memoizedState=Qn(1|p,S,k,w))}function Es(h,p){Ei(8390656,8,h,p)}function ki(h,p){_i(2048,8,h,p)}function Ho(h,p){return _i(4,2,h,p)}function co(h,p){return _i(4,4,h,p)}function hs(h,p){if(typeof p=="function"){h=h();var S=p(h);return function(){typeof S=="function"?S():p(null)}}if(p!=null)return h=h(),p.current=h,function(){p.current=null}}function Xi(h,p,S){S=S!=null?S.concat([h]):null,_i(4,4,hs.bind(null,p,h),S)}function Gs(){}function uo(h,p){var S=Zn();p=p===void 0?null:p;var w=S.memoizedState;return p!==null&&Li(p,w[1])?w[0]:(S.memoizedState=[h,p],h)}function ws(h,p){var S=Zn();p=p===void 0?null:p;var w=S.memoizedState;if(p!==null&&Li(p,w[1]))return w[0];if(w=h(),Bl){K(!0);try{h()}finally{K(!1)}}return S.memoizedState=[w,p],w}function on(h,p,S){return S===void 0||(il&1073741824)!==0?h.memoizedState=p:(h.memoizedState=S,h=yr(),Rn.lanes|=h,Lr|=h,S)}function Fa(h,p,S,w){return Tr(S,p)?S:nl.current!==null?(h=on(h,S,w),Tr(h,p)||(oa=!0),h):(il&42)===0?(oa=!0,h.memoizedState=S):(h=yr(),Rn.lanes|=h,Lr|=h,p)}function Gn(h,p,S,w,U){var k=Ua();ys(k!==0&&8>k?k:8);var le=un.T,Te={};un.T=Te,Ds(h,!1,p,S);try{var ze=U(),pt=un.S;if(pt!==null&&pt(Te,ze),ze!==null&&typeof ze=="object"&&typeof ze.then=="function"){var wt=ht(ze,w);ui(h,p,wt,ja(h))}else ui(h,p,w,ja(h))}catch(Bt){ui(h,p,{then:function(){},status:"rejected",reason:Bt},ja())}finally{ys(k),un.T=le}}function fo(h){var p=h.memoizedState;if(p!==null)return p;p={memoizedState:Ws,baseState:Ws,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Re,lastRenderedState:Ws},next:null};var S={};return p.next={memoizedState:S,baseState:S,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Re,lastRenderedState:S},next:null},h.memoizedState=p,h=h.alternate,h!==null&&(h.memoizedState=p),p}function Cs(){return aa(dn)}function Qa(){return Zn().memoizedState}function _a(){return Zn().memoizedState}function Ja(h){for(var p=h.return;p!==null;){switch(p.tag){case 24:case 3:var S=ja();h=Ge(S);var w=Qe(p,h,S);w!==null&&(Na(w,p,S),st(w,p,S)),p={cache:Qu()},h.payload=p;return}p=p.return}}function Rs(h,p,S){var w=ja();S={lane:w,revertLane:0,action:S,hasEagerState:!1,eagerState:null,next:null},dr(h)?js(p,S):(S=Fe(h,p,S,w),S!==null&&(Na(S,h,w),ho(S,p,w)))}function hr(h,p,S){var w=ja();ui(h,p,S,w)}function ui(h,p,S,w){var U={lane:w,revertLane:0,action:S,hasEagerState:!1,eagerState:null,next:null};if(dr(h))js(p,U);else{var k=h.alternate;if(h.lanes===0&&(k===null||k.lanes===0)&&(k=p.lastRenderedReducer,k!==null))try{var le=p.lastRenderedState,Te=k(le,S);if(U.hasEagerState=!0,U.eagerState=Te,Tr(Te,le))return Ve(h,p,U,0),Pn===null&&Ne(),!1}catch{}if(S=Fe(h,p,U,w),S!==null)return Na(S,h,w),ho(S,p,w),!0}return!1}function Ds(h,p,S,w){if(w={lane:2,revertLane:De(),action:w,hasEagerState:!1,eagerState:null,next:null},dr(h)){if(p)throw Error(a(479))}else p=Fe(h,S,w,2),p!==null&&Na(p,h,2)}function dr(h){var p=h.alternate;return h===Rn||p!==null&&p===Rn}function js(h,p){Bi=Jr=!0;var S=h.pending;S===null?p.next=p:(p.next=S.next,S.next=p),h.pending=p}function ho(h,p,S){if((S&4194176)!==0){var w=p.lanes;w&=h.pendingLanes,S|=w,p.lanes=S,re(h,S)}}function Si(h,p,S,w){p=h.memoizedState,S=S(w,p),S=S==null?p:su({},p,S),h.memoizedState=S,h.lanes===0&&(h.updateQueue.baseState=S)}function Ls(h,p,S,w,U,k,le){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(w,k,le):p.prototype&&p.prototype.isPureReactComponent?!lt(S,w)||!lt(U,k):!0}function po(h,p,S,w){h=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(S,w),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(S,w),p.state!==h&&Yd.enqueueReplaceState(p,p.state,null)}function ka(h,p){var S=p;if("ref"in p){S={};for(var w in p)w!=="ref"&&(S[w]=p[w])}if(h=h.defaultProps){S===p&&(S=su({},S));for(var U in h)S[U]===void 0&&(S[U]=h[U])}return S}function yn(h,p){try{var S=h.onUncaughtError;S(p.value,{componentStack:p.stack})}catch(w){setTimeout(function(){throw w})}}function gl(h,p,S){try{var w=h.onCaughtError;w(S.value,{componentStack:S.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(U){setTimeout(function(){throw U})}}function Vi(h,p,S){return S=Ge(S),S.tag=3,S.payload={element:null},S.callback=function(){yn(h,p)},S}function ds(h){return h=Ge(h),h.tag=3,h}function Yi(h,p,S,w){var U=S.type.getDerivedStateFromError;if(typeof U=="function"){var k=w.value;h.payload=function(){return U(k)},h.callback=function(){gl(p,S,w)}}var le=S.stateNode;le!==null&&typeof le.componentDidCatch=="function"&&(h.callback=function(){gl(p,S,w),typeof U!="function"&&(Nr===null?Nr=new Set([this]):Nr.add(this));var Te=w.stack;this.componentDidCatch(w.value,{componentStack:Te!==null?Te:""})})}function Vu(h,p,S,w,U){if(S.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){if(p=S.alternate,p!==null&&Go(p,S,U,!0),S=Rr.current,S!==null){switch(S.tag){case 13:return Qr===null?Oe():S.alternate===null&&Wn===0&&(Wn=3),S.flags&=-257,S.flags|=65536,S.lanes=U,w===qd?S.flags|=16384:(p=S.updateQueue,p===null?S.updateQueue=new Set([w]):p.add(w),tu(h,w,U)),!1;case 22:return S.flags|=65536,w===qd?S.flags|=16384:(p=S.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([w])},S.updateQueue=p):(S=p.retryQueue,S===null?p.retryQueue=new Set([w]):S.add(w)),tu(h,w,U)),!1}throw Error(a(435,S.tag))}return tu(h,w,U),Oe(),!1}if(ei)return p=Rr.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=U,w!==xh&&(h=Error(a(422),{cause:w}),St(de(h,S)))):(w!==xh&&(p=Error(a(423),{cause:w}),St(de(p,S))),h=h.current.alternate,h.flags|=65536,U&=-U,h.lanes|=U,w=de(w,S),U=Vi(h.stateNode,w,U),ge(h,U),Wn!==4&&(Wn=2)),!1;var k=Error(a(520),{cause:w});if(k=de(k,S),vf===null?vf=[k]:vf.push(k),Wn!==4&&(Wn=2),p===null)return!0;w=de(w,S),S=p;do{switch(S.tag){case 3:return S.flags|=65536,h=U&-U,S.lanes|=h,h=Vi(S.stateNode,w,h),ge(S,h),!1;case 1:if(p=S.type,k=S.stateNode,(S.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Nr===null||!Nr.has(k))))return S.flags|=65536,U&=-U,S.lanes|=U,U=ds(U),Yi(U,h,S,w),ge(S,U),!1}S=S.return}while(S!==null);return!1}function Oi(h,p,S,w){p.child=h===null?eg(p,null,S,w):Ec(p,h.child,S,w)}function vl(h,p,S,w,U){S=S.render;var k=p.ref;if("ref"in w){var le={};for(var Te in w)Te!=="ref"&&(le[Te]=w[Te])}else le=w;return _l(p),w=ga(h,p,S,le,k,U),Te=ur(),h!==null&&!oa?(fr(h,p,U),go(h,p,U)):(ei&&Te&&ne(p),p.flags|=1,Oi(h,p,w,U),p.child)}function ic(h,p,S,w,U){if(h===null){var k=S.type;return typeof k=="function"&&!Wr(k)&&k.defaultProps===void 0&&S.compare===null?(p.tag=15,p.type=k,ac(h,p,k,w,U)):(h=qr(S.type,null,w,p,p.mode,U),h.ref=p.ref,h.return=p,p.child=h)}if(k=h.child,!Ku(h,U)){var le=k.memoizedProps;if(S=S.compare,S=S!==null?S:lt,S(le,w)&&h.ref===p.ref)return go(h,p,U)}return p.flags|=1,h=qa(k,w),h.ref=p.ref,h.return=p,p.child=h}function ac(h,p,S,w,U){if(h!==null){var k=h.memoizedProps;if(lt(k,w)&&h.ref===p.ref)if(oa=!1,p.pendingProps=w=k,Ku(h,U))(h.flags&131072)!==0&&(oa=!0);else return p.lanes=h.lanes,go(h,p,U)}return Hi(h,p,S,w,U)}function Ra(h,p,S){var w=p.pendingProps,U=w.children,k=(p.stateNode._pendingVisibility&2)!==0,le=h!==null?h.memoizedState:null;if(Zi(h,p),w.mode==="hidden"||k){if((p.flags&128)!==0){if(w=le!==null?le.baseLanes|S:S,h!==null){for(U=p.child=h.child,k=0;U!==null;)k=k|U.lanes|U.childLanes,U=U.sibling;p.childLanes=k&~w}else p.childLanes=0,p.child=null;return Va(h,p,w,S)}if((S&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},h!==null&&gs(p,le!==null?le.cachePool:null),le!==null?Ai(p,le):ia(),kt(p);else return p.lanes=p.childLanes=536870912,Va(h,p,le!==null?le.baseLanes|S:S,S)}else le!==null?(gs(p,le.cachePool),Ai(p,le),Fi(),p.memoizedState=null):(h!==null&&gs(p,null),ia(),Fi());return Oi(h,p,U,S),p.child}function Va(h,p,S,w){var U=jo();return U=U===null?null:{parent:Qo?di._currentValue:di._currentValue2,pool:U},p.memoizedState={baseLanes:S,cachePool:U},h!==null&&gs(p,null),ia(),kt(p),h!==null&&Go(h,p,w,!0),null}function Zi(h,p){var S=p.ref;if(S===null)h!==null&&h.ref!==null&&(p.flags|=2097664);else{if(typeof S!="function"&&typeof S!="object")throw Error(a(284));(h===null||h.ref!==S)&&(p.flags|=2097664)}}function Hi(h,p,S,w,U){return _l(p),S=ga(h,p,S,w,void 0,U),w=ur(),h!==null&&!oa?(fr(h,p,U),go(h,p,U)):(ei&&w&&ne(p),p.flags|=1,Oi(h,p,S,U),p.child)}function Wc(h,p,S,w,U,k){return _l(p),p.updateQueue=null,S=cr(p,w,S,U),fs(h),w=ur(),h!==null&&!oa?(fr(h,p,k),go(h,p,k)):(ei&&w&&ne(p),p.flags|=1,Oi(h,p,S,k),p.child)}function Hu(h,p,S,w,U){if(_l(p),p.stateNode===null){var k=uu,le=S.contextType;typeof le=="object"&&le!==null&&(k=aa(le)),k=new S(w,k),p.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,k.updater=Yd,p.stateNode=k,k._reactInternals=p,k=p.stateNode,k.props=w,k.state=p.memoizedState,k.refs={},bt(p),le=S.contextType,k.context=typeof le=="object"&&le!==null?aa(le):uu,k.state=p.memoizedState,le=S.getDerivedStateFromProps,typeof le=="function"&&(Si(p,S,le,w),k.state=p.memoizedState),typeof S.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(le=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),le!==k.state&&Yd.enqueueReplaceState(k,k.state,null),xt(p,w,k,U),we(),k.state=p.memoizedState),typeof k.componentDidMount=="function"&&(p.flags|=4194308),w=!0}else if(h===null){k=p.stateNode;var Te=p.memoizedProps,ze=ka(S,Te);k.props=ze;var pt=k.context,wt=S.contextType;le=uu,typeof wt=="object"&&wt!==null&&(le=aa(wt));var Bt=S.getDerivedStateFromProps;wt=typeof Bt=="function"||typeof k.getSnapshotBeforeUpdate=="function",Te=p.pendingProps!==Te,wt||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(Te||pt!==le)&&po(p,k,w,le),zl=!1;var Gt=p.memoizedState;k.state=Gt,xt(p,w,k,U),we(),pt=p.memoizedState,Te||Gt!==pt||zl?(typeof Bt=="function"&&(Si(p,S,Bt,w),pt=p.memoizedState),(ze=zl||Ls(p,S,ze,w,Gt,pt,le))?(wt||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(p.flags|=4194308)):(typeof k.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=w,p.memoizedState=pt),k.props=w,k.state=pt,k.context=le,w=ze):(typeof k.componentDidMount=="function"&&(p.flags|=4194308),w=!1)}else{k=p.stateNode,Ct(h,p),le=p.memoizedProps,wt=ka(S,le),k.props=wt,Bt=p.pendingProps,Gt=k.context,pt=S.contextType,ze=uu,typeof pt=="object"&&pt!==null&&(ze=aa(pt)),Te=S.getDerivedStateFromProps,(pt=typeof Te=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(le!==Bt||Gt!==ze)&&po(p,k,w,ze),zl=!1,Gt=p.memoizedState,k.state=Gt,xt(p,w,k,U),we();var _n=p.memoizedState;le!==Bt||Gt!==_n||zl||h!==null&&h.dependencies!==null&&yo(h.dependencies)?(typeof Te=="function"&&(Si(p,S,Te,w),_n=p.memoizedState),(wt=zl||Ls(p,S,wt,w,Gt,_n,ze)||h!==null&&h.dependencies!==null&&yo(h.dependencies))?(pt||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(w,_n,ze),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(w,_n,ze)),typeof k.componentDidUpdate=="function"&&(p.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof k.componentDidUpdate!="function"||le===h.memoizedProps&&Gt===h.memoizedState||(p.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||le===h.memoizedProps&&Gt===h.memoizedState||(p.flags|=1024),p.memoizedProps=w,p.memoizedState=_n),k.props=w,k.state=_n,k.context=ze,w=wt):(typeof k.componentDidUpdate!="function"||le===h.memoizedProps&&Gt===h.memoizedState||(p.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||le===h.memoizedProps&&Gt===h.memoizedState||(p.flags|=1024),w=!1)}return k=w,Zi(h,p),w=(p.flags&128)!==0,k||w?(k=p.stateNode,S=w&&typeof S.getDerivedStateFromError!="function"?null:k.render(),p.flags|=1,h!==null&&w?(p.child=Ec(p,h.child,null,U),p.child=Ec(p,null,S,U)):Oi(h,p,S,U),p.memoizedState=k.state,h=p.child):h=go(h,p,U),h}function mo(h,p,S,w){return nt(),p.flags|=256,Oi(h,p,S,w),p.child}function Gu(h){return{baseLanes:h,cachePool:bl()}}function ju(h,p,S){return h=h!==null?h.childLanes&~S:0,p&&(h|=Qs),h}function Wu(h,p,S){var w=p.pendingProps,U=!1,k=(p.flags&128)!==0,le;if((le=k)||(le=h!==null&&h.memoizedState===null?!1:(Ma.current&2)!==0),le&&(U=!0,p.flags&=-129),le=(p.flags&32)!==0,p.flags&=-33,h===null){if(ei){if(U?Yn(p):Fi(),ei){var Te=rs,ze;(ze=Te)&&(Te=sv(Te,Zr),Te!==null?(p.memoizedState={dehydrated:Te,treeContext:Lo!==null?{id:el,overflow:Yr}:null,retryLane:536870912},ze=t(18,null,null,0),ze.stateNode=Te,ze.return=p,p.child=ze,_s=p,rs=null,ze=!0):ze=!1),ze||Ae(p)}if(Te=p.memoizedState,Te!==null&&(Te=Te.dehydrated,Te!==null))return hh(Te)?p.lanes=16:p.lanes=536870912,null;si(p)}return Te=w.children,w=w.fallback,U?(Fi(),U=p.mode,Te=qu({mode:"hidden",children:Te},U),w=Ll(w,U,S,null),Te.return=p,w.return=p,Te.sibling=w,p.child=Te,U=p.child,U.memoizedState=Gu(S),U.childLanes=ju(h,le,S),p.memoizedState=Ss,w):(Yn(p),qc(p,Te))}if(ze=h.memoizedState,ze!==null&&(Te=ze.dehydrated,Te!==null)){if(k)p.flags&256?(Yn(p),p.flags&=-257,p=Xu(h,p,S)):p.memoizedState!==null?(Fi(),p.child=h.child,p.flags|=128,p=null):(Fi(),U=w.fallback,Te=p.mode,w=qu({mode:"visible",children:w.children},Te),U=Ll(U,Te,S,null),U.flags|=2,w.return=p,U.return=p,w.sibling=U,p.child=w,Ec(p,h.child,null,S),w=p.child,w.memoizedState=Gu(S),w.childLanes=ju(h,le,S),p.memoizedState=Ss,p=U);else if(Yn(p),hh(Te))le=J0(Te).digest,w=Error(a(419)),w.stack="",w.digest=le,St({value:w,source:null,stack:null}),p=Xu(h,p,S);else if(oa||Go(h,p,S,!1),le=(S&h.childLanes)!==0,oa||le){if(le=Pn,le!==null){if(w=S&-S,(w&42)!==0)w=1;else switch(w){case 2:w=1;break;case 8:w=4;break;case 32:w=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:w=64;break;case 268435456:w=134217728;break;default:w=0}if(w=(w&(le.suspendedLanes|S))!==0?0:w,w!==0&&w!==ze.retryLane)throw ze.retryLane=w,rt(h,w),Na(le,h,w),xv}Pd(Te)||Oe(),p=Xu(h,p,S)}else Pd(Te)?(p.flags|=128,p.child=h.child,p=Rl.bind(null,h),lx(Te,p),p=null):(h=ze.treeContext,Is&&(rs=nv(Te),_s=p,ei=!0,Er=null,Zr=!1,h!==null&&(Mr[Ar++]=el,Mr[Ar++]=Yr,Mr[Ar++]=Lo,el=h.id,Yr=h.overflow,Lo=p)),p=qc(p,w.children),p.flags|=4096);return p}return U?(Fi(),U=w.fallback,Te=p.mode,ze=h.child,k=ze.sibling,w=qa(ze,{mode:"hidden",children:w.children}),w.subtreeFlags=ze.subtreeFlags&31457280,k!==null?U=qa(k,U):(U=Ll(U,Te,S,null),U.flags|=2),U.return=p,w.return=p,w.sibling=U,p.child=w,w=U,U=p.child,Te=h.child.memoizedState,Te===null?Te=Gu(S):(ze=Te.cachePool,ze!==null?(k=Qo?di._currentValue:di._currentValue2,ze=ze.parent!==k?{parent:k,pool:k}:ze):ze=bl(),Te={baseLanes:Te.baseLanes|S,cachePool:ze}),U.memoizedState=Te,U.childLanes=ju(h,le,S),p.memoizedState=Ss,w):(Yn(p),S=h.child,h=S.sibling,S=qa(S,{mode:"visible",children:w.children}),S.return=p,S.sibling=null,h!==null&&(le=p.deletions,le===null?(p.deletions=[h],p.flags|=16):le.push(h)),p.child=S,p.memoizedState=null,S)}function qc(h,p){return p=qu({mode:"visible",children:p},h.mode),p.return=h,h.child=p}function qu(h,p){return Ad(h,p,0,null)}function Xu(h,p,S){return Ec(p,h.child,null,S),h=qc(p,p.pendingProps.children),h.flags|=2,p.memoizedState=null,h}function xd(h,p,S){h.lanes|=p;var w=h.alternate;w!==null&&(w.lanes|=p),yl(h.return,p,S)}function Yu(h,p,S,w,U){var k=h.memoizedState;k===null?h.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:w,tail:S,tailMode:U}:(k.isBackwards=p,k.rendering=null,k.renderingStartTime=0,k.last=w,k.tail=S,k.tailMode=U)}function Zu(h,p,S){var w=p.pendingProps,U=w.revealOrder,k=w.tail;if(Oi(h,p,w.children,S),w=Ma.current,(w&2)!==0)w=w&1|2,p.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=p.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&xd(h,S,p);else if(h.tag===19)xd(h,S,p);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===p)break e;for(;h.sibling===null;){if(h.return===null||h.return===p)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}w&=1}switch(N(Ma,w),U){case"forwards":for(S=p.child,U=null;S!==null;)h=S.alternate,h!==null&&Hn(h)===null&&(U=S),S=S.sibling;S=U,S===null?(U=p.child,p.child=null):(U=S.sibling,S.sibling=null),Yu(p,!1,U,S,k);break;case"backwards":for(S=null,U=p.child,p.child=null;U!==null;){if(h=U.alternate,h!==null&&Hn(h)===null){p.child=U;break}h=U.sibling,U.sibling=S,S=U,U=h}Yu(p,!0,S,null,k);break;case"together":Yu(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function go(h,p,S){if(h!==null&&(p.dependencies=h.dependencies),Lr|=p.lanes,(S&p.childLanes)===0)if(h!==null){if(Go(h,p,S,!1),(S&p.childLanes)===0)return null}else return null;if(h!==null&&p.child!==h.child)throw Error(a(153));if(p.child!==null){for(h=p.child,S=qa(h,h.pendingProps),p.child=S,S.return=p;h.sibling!==null;)h=h.sibling,S=S.sibling=qa(h,h.pendingProps),S.return=p;S.sibling=null}return p.child}function Ku(h,p){return(h.lanes&p)!==0?!0:(h=h.dependencies,!!(h!==null&&yo(h)))}function Sd(h,p,S){switch(p.tag){case 3:me(p,p.stateNode.containerInfo),ps(p,di,h.memoizedState.cache),nt();break;case 27:case 5:he(p);break;case 4:me(p,p.stateNode.containerInfo);break;case 10:ps(p,p.type,p.memoizedProps.value);break;case 13:var w=p.memoizedState;if(w!==null)return w.dehydrated!==null?(Yn(p),p.flags|=128,null):(S&p.child.childLanes)!==0?Wu(h,p,S):(Yn(p),h=go(h,p,S),h!==null?h.sibling:null);Yn(p);break;case 19:var U=(h.flags&128)!==0;if(w=(S&p.childLanes)!==0,w||(Go(h,p,S,!1),w=(S&p.childLanes)!==0),U){if(w)return Zu(h,p,S);p.flags|=128}if(U=p.memoizedState,U!==null&&(U.rendering=null,U.tail=null,U.lastEffect=null),N(Ma,Ma.current),w)break;return null;case 22:case 23:return p.lanes=0,Ra(h,p,S);case 24:ps(p,di,h.memoizedState.cache)}return go(h,p,S)}function Xc(h,p,S){if(h!==null)if(h.memoizedProps!==p.pendingProps)oa=!0;else{if(!Ku(h,S)&&(p.flags&128)===0)return oa=!1,Sd(h,p,S);oa=(h.flags&131072)!==0}else oa=!1,ei&&(p.flags&1048576)!==0&&G(p,yh,p.index);switch(p.lanes=0,p.tag){case 16:e:{h=p.pendingProps;var w=p.elementType,U=w._init;if(w=U(w._payload),p.type=w,typeof w=="function")Wr(w)?(h=ka(w,h),p.tag=1,p=Hu(null,p,w,h,S)):(p.tag=0,p=Hi(null,p,w,h,S));else{if(w!=null){if(U=w.$$typeof,U===af){p.tag=11,p=vl(null,p,w,h,S);break e}else if(U===ah){p.tag=14,p=ic(null,p,w,h,S);break e}}throw p=o(w)||w,Error(a(306,p,""))}}return p;case 0:return Hi(h,p,p.type,p.pendingProps,S);case 1:return w=p.type,U=ka(w,p.pendingProps),Hu(h,p,w,U,S);case 3:e:{if(me(p,p.stateNode.containerInfo),h===null)throw Error(a(387));var k=p.pendingProps;U=p.memoizedState,w=U.element,Ct(h,p),xt(p,k,null,S);var le=p.memoizedState;if(k=le.cache,ps(p,di,k),k!==U.cache&&ms(p,[di],S,!0),we(),k=le.element,Is&&U.isDehydrated)if(U={element:k,isDehydrated:!1,cache:le.cache},p.updateQueue.baseState=U,p.memoizedState=U,p.flags&256){p=mo(h,p,k,S);break e}else if(k!==w){w=de(Error(a(424)),p),St(w),p=mo(h,p,k,S);break e}else for(Is&&(rs=tv(p.stateNode.containerInfo),_s=p,ei=!0,Er=null,Zr=!0),S=eg(p,null,k,S),p.child=S;S;)S.flags=S.flags&-3|4096,S=S.sibling;else{if(nt(),k===w){p=go(h,p,S);break e}Oi(h,p,k,S)}p=p.child}return p;case 26:if(br)return Zi(h,p),h===null?(S=Vd(p.type,null,p.pendingProps,null))?p.memoizedState=S:ei||(p.stateNode=ux(p.type,p.pendingProps,Oo.current,p)):p.memoizedState=Vd(p.type,h.memoizedProps,p.pendingProps,h.memoizedState),null;case 27:if(as)return he(p),h===null&&as&&ei&&(w=p.stateNode=Km(p.type,p.pendingProps,Oo.current,Ya.current,!1),_s=p,Zr=!0,rs=zd(w)),w=p.pendingProps.children,h!==null||ei?Oi(h,p,w,S):p.child=Ec(p,null,w,S),Zi(h,p),p.child;case 5:return h===null&&ei&&(uv(p.type,p.pendingProps,Ya.current),(U=w=rs)&&(w=iv(w,p.type,p.pendingProps,Zr),w!==null?(p.stateNode=w,_s=p,rs=zd(w),Zr=!1,U=!0):U=!1),U||Ae(p)),he(p),U=p.type,k=p.pendingProps,le=h!==null?h.memoizedProps:null,w=k.children,Sc(U,k)?w=null:le!==null&&Sc(U,le)&&(p.flags|=32),p.memoizedState!==null&&(U=ga(h,p,lo,null,null,S),Qo?dn._currentValue=U:dn._currentValue2=U),Zi(h,p),Oi(h,p,w,S),p.child;case 6:return h===null&&ei&&(fv(p.pendingProps,Ya.current),(h=S=rs)&&(S=av(S,p.pendingProps,Zr),S!==null?(p.stateNode=S,_s=p,rs=null,h=!0):h=!1),h||Ae(p)),null;case 13:return Wu(h,p,S);case 4:return me(p,p.stateNode.containerInfo),w=p.pendingProps,h===null?p.child=Ec(p,null,w,S):Oi(h,p,w,S),p.child;case 11:return vl(h,p,p.type,p.pendingProps,S);case 7:return Oi(h,p,p.pendingProps,S),p.child;case 8:return Oi(h,p,p.pendingProps.children,S),p.child;case 12:return Oi(h,p,p.pendingProps.children,S),p.child;case 10:return w=p.pendingProps,ps(p,p.type,w.value),Oi(h,p,w.children,S),p.child;case 9:return U=p.type._context,w=p.pendingProps.children,_l(p),U=aa(U),w=w(U),p.flags|=1,Oi(h,p,w,S),p.child;case 14:return ic(h,p,p.type,p.pendingProps,S);case 15:return ac(h,p,p.type,p.pendingProps,S);case 19:return Zu(h,p,S);case 22:return Ra(h,p,S);case 24:return _l(p),w=aa(di),h===null?(U=jo(),U===null&&(U=Pn,k=Qu(),U.pooledCache=k,k.refCount++,k!==null&&(U.pooledCacheLanes|=S),U=k),p.memoizedState={parent:w,cache:U},bt(p),ps(p,di,U)):((h.lanes&S)!==0&&(Ct(h,p),xt(p,null,null,S),we()),U=h.memoizedState,k=p.memoizedState,U.parent!==w?(U={parent:w,cache:w},p.memoizedState=U,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=U),ps(p,di,w)):(w=k.cache,ps(p,di,w),w!==U.cache&&ms(p,[di],S,!0))),Oi(h,p,p.pendingProps.children,S),p.child;case 29:throw p.pendingProps}throw Error(a(156,p.tag))}function ps(h,p,S){Qo?(N(Zs,p._currentValue),p._currentValue=S):(N(Zs,p._currentValue2),p._currentValue2=S)}function vo(h){var p=Zs.current;Qo?h._currentValue=p:h._currentValue2=p,E(Zs)}function yl(h,p,S){for(;h!==null;){var w=h.alternate;if((h.childLanes&p)!==p?(h.childLanes|=p,w!==null&&(w.childLanes|=p)):w!==null&&(w.childLanes&p)!==p&&(w.childLanes|=p),h===S)break;h=h.return}}function ms(h,p,S,w){var U=h.child;for(U!==null&&(U.return=h);U!==null;){var k=U.dependencies;if(k!==null){var le=U.child;k=k.firstContext;e:for(;k!==null;){var Te=k;k=U;for(var ze=0;ze<p.length;ze++)if(Te.context===p[ze]){k.lanes|=S,Te=k.alternate,Te!==null&&(Te.lanes|=S),yl(k.return,S,h),w||(le=null);break e}k=Te.next}}else if(U.tag===18){if(le=U.return,le===null)throw Error(a(341));le.lanes|=S,k=le.alternate,k!==null&&(k.lanes|=S),yl(le,S,h),le=null}else le=U.child;if(le!==null)le.return=U;else for(le=U;le!==null;){if(le===h){le=null;break}if(U=le.sibling,U!==null){U.return=le.return,le=U;break}le=le.return}U=le}}function Go(h,p,S,w){h=null;for(var U=p,k=!1;U!==null;){if(!k){if((U.flags&524288)!==0)k=!0;else if((U.flags&262144)!==0)break}if(U.tag===10){var le=U.alternate;if(le===null)throw Error(a(387));if(le=le.memoizedProps,le!==null){var Te=U.type;Tr(U.pendingProps.value,le.value)||(h!==null?h.push(Te):h=[Te])}}else if(U===ff.current){if(le=U.alternate,le===null)throw Error(a(387));le.memoizedState.memoizedState!==U.memoizedState.memoizedState&&(h!==null?h.push(dn):h=[dn])}U=U.return}h!==null&&ms(p,h,S,w),p.flags|=262144}function yo(h){for(h=h.firstContext;h!==null;){var p=h.context;if(!Tr(Qo?p._currentValue:p._currentValue2,h.memoizedValue))return!0;h=h.next}return!1}function _l(h){Cc=h,ea=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function aa(h){return Qf(Cc,h)}function xl(h,p){return Cc===null&&_l(h),Qf(h,p)}function Qf(h,p){var S=Qo?p._currentValue:p._currentValue2;if(p={context:p,memoizedValue:S,next:null},ea===null){if(h===null)throw Error(a(308));ea=p,h.dependencies={lanes:0,firstContext:p},h.flags|=524288}else ea=ea.next=p;return S}function Qu(){return{controller:new Sv,data:new Map,refCount:0}}function Sl(h){h.refCount--,h.refCount===0&&Fl(du,function(){h.controller.abort()})}function jo(){var h=kl.current;return h!==null?h:Pn.pooledCache}function gs(h,p){p===null?N(kl,kl.current):N(kl,p.pool)}function bl(){var h=jo();return h===null?null:{parent:Qo?di._currentValue:di._currentValue2,pool:h}}function Os(h){h.flags|=4}function pr(h,p){if(h!==null&&h.child===p.child)return!1;if((p.flags&16)!==0)return!0;for(h=p.child;h!==null;){if((h.flags&13878)!==0||(h.subtreeFlags&13878)!==0)return!0;h=h.sibling}return!1}function Ju(h,p,S,w){if(is)for(S=p.child;S!==null;){if(S.tag===5||S.tag===6)Ko(h,S.stateNode);else if(!(S.tag===4||as&&S.tag===27)&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===p)break;for(;S.sibling===null;){if(S.return===null||S.return===p)return;S=S.return}S.sibling.return=S.return,S=S.sibling}else if(xr)for(var U=p.child;U!==null;){if(U.tag===5){var k=U.stateNode;S&&w&&(k=zm(k,U.type,U.memoizedProps)),Ko(h,k)}else if(U.tag===6)k=U.stateNode,S&&w&&(k=Bm(k,U.memoizedProps)),Ko(h,k);else if(U.tag!==4){if(U.tag===22&&U.memoizedState!==null)k=U.child,k!==null&&(k.return=U),Ju(h,U,!0,!0);else if(U.child!==null){U.child.return=U,U=U.child;continue}}if(U===p)break;for(;U.sibling===null;){if(U.return===null||U.return===p)return;U=U.return}U.sibling.return=U.return,U=U.sibling}}function mr(h,p,S,w){if(xr)for(var U=p.child;U!==null;){if(U.tag===5){var k=U.stateNode;S&&w&&(k=zm(k,U.type,U.memoizedProps)),Im(h,k)}else if(U.tag===6)k=U.stateNode,S&&w&&(k=Bm(k,U.memoizedProps)),Im(h,k);else if(U.tag!==4){if(U.tag===22&&U.memoizedState!==null)k=U.child,k!==null&&(k.return=U),mr(h,U,!(U.memoizedProps!==null&&U.memoizedProps.mode==="manual"),!0);else if(U.child!==null){U.child.return=U,U=U.child;continue}}if(U===p)break;for(;U.sibling===null;){if(U.return===null||U.return===p)return;U=U.return}U.sibling.return=U.return,U=U.sibling}}function sc(h,p){if(xr&&pr(h,p)){h=p.stateNode;var S=h.containerInfo,w=Id();mr(w,p,!1,!1),h.pendingChildren=w,Os(p),Q0(S,w)}}function Tl(h,p,S,w){if(is)h.memoizedProps!==w&&Os(p);else if(xr){var U=h.stateNode,k=h.memoizedProps;if((h=pr(h,p))||k!==w){var le=Ya.current;k=Um(U,S,k,w,!h,null),k===U?p.stateNode=U:(Nl(k,S,w,le)&&Os(p),p.stateNode=k,h?Ju(k,p,!1,!1):Os(p))}else p.stateNode=U}}function Ml(h,p,S){if(Y0(p,S)){if(h.flags|=16777216,!Ul(p,S))if(j())h.flags|=8192;else throw hu=qd,$m}else h.flags&=-16777217}function rc(h,p){if(hv(p)){if(h.flags|=16777216,!Ym(p))if(j())h.flags|=8192;else throw hu=qd,$m}else h.flags&=-16777217}function Yc(h,p){p!==null&&(h.flags|=4),h.flags&16384&&(p=h.tag!==22?B():536870912,h.lanes|=p,Hl|=p)}function vs(h,p){if(!ei)switch(h.tailMode){case"hidden":p=h.tail;for(var S=null;p!==null;)p.alternate!==null&&(S=p),p=p.sibling;S===null?h.tail=null:S.sibling=null;break;case"collapsed":S=h.tail;for(var w=null;S!==null;)S.alternate!==null&&(w=S),S=S.sibling;w===null?p||h.tail===null?h.tail=null:h.tail.sibling=null:w.sibling=null}}function fi(h){var p=h.alternate!==null&&h.alternate.child===h.child,S=0,w=0;if(p)for(var U=h.child;U!==null;)S|=U.lanes|U.childLanes,w|=U.subtreeFlags&31457280,w|=U.flags&31457280,U.return=h,U=U.sibling;else for(U=h.child;U!==null;)S|=U.lanes|U.childLanes,w|=U.subtreeFlags,w|=U.flags,U.return=h,U=U.sibling;return h.subtreeFlags|=w,h.childLanes=S,p}function bd(h,p,S){var w=p.pendingProps;switch(fe(p),p.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fi(p),null;case 1:return fi(p),null;case 3:return S=p.stateNode,w=null,h!==null&&(w=h.memoizedState.cache),p.memoizedState.cache!==w&&(p.flags|=2048),vo(di),xe(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(h===null||h.child===null)&&(qe(p)?Os(p):h===null||h.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,Er!==null&&(wo(Er),Er=null))),sc(h,p),fi(p),null;case 26:if(br){S=p.type;var U=p.memoizedState;return h===null?(Os(p),U!==null?(fi(p),rc(p,U)):(fi(p),Ml(p,S,w))):U?U!==h.memoizedState?(Os(p),fi(p),rc(p,U)):(fi(p),p.flags&=-16777217):(is?h.memoizedProps!==w&&Os(p):Tl(h,p,S,w),fi(p),Ml(p,S,w)),null}case 27:if(as){if(_e(p),S=Oo.current,U=p.type,h!==null&&p.stateNode!=null)is?h.memoizedProps!==w&&Os(p):Tl(h,p,U,w);else{if(!w){if(p.stateNode===null)throw Error(a(166));return fi(p),null}h=Ya.current,qe(p)?$e(p,h):(h=Km(U,w,S,h,!0),p.stateNode=h,Os(p))}return fi(p),null}case 5:if(_e(p),S=p.type,h!==null&&p.stateNode!=null)Tl(h,p,S,w);else{if(!w){if(p.stateNode===null)throw Error(a(166));return fi(p),null}h=Ya.current,qe(p)?$e(p,h):(U=Tm(S,w,Oo.current,h,p),Ju(U,p,!1,!1),p.stateNode=U,Nl(U,S,w,h)&&Os(p))}return fi(p),Ml(p,p.type,p.pendingProps),null;case 6:if(h&&p.stateNode!=null)S=h.memoizedProps,is?S!==w&&Os(p):xr&&(S!==w?(p.stateNode=Rd(w,Oo.current,Ya.current,p),Os(p)):p.stateNode=h.stateNode);else{if(typeof w!="string"&&p.stateNode===null)throw Error(a(166));if(h=Oo.current,S=Ya.current,qe(p)){if(!Is)throw Error(a(176));if(h=p.stateNode,S=p.memoizedProps,w=null,U=_s,U!==null)switch(U.tag){case 27:case 5:w=U.memoizedProps}rv(h,S,p,w)||Ae(p)}else p.stateNode=Rd(w,h,S,p)}return fi(p),null;case 13:if(w=p.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(U=qe(p),w!==null&&w.dehydrated!==null){if(h===null){if(!U)throw Error(a(318));if(!Is)throw Error(a(344));if(U=p.memoizedState,U=U!==null?U.dehydrated:null,!U)throw Error(a(317));rf(U,p)}else nt(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;fi(p),U=!1}else Er!==null&&(wo(Er),Er=null),U=!0;if(!U)return p.flags&256?(si(p),p):(si(p),null)}if(si(p),(p.flags&128)!==0)return p.lanes=S,p;if(S=w!==null,h=h!==null&&h.memoizedState!==null,S){w=p.child,U=null,w.alternate!==null&&w.alternate.memoizedState!==null&&w.alternate.memoizedState.cachePool!==null&&(U=w.alternate.memoizedState.cachePool.pool);var k=null;w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(k=w.memoizedState.cachePool.pool),k!==U&&(w.flags|=2048)}return S!==h&&S&&(p.child.flags|=8192),Yc(p,p.updateQueue),fi(p),null;case 4:return xe(),sc(h,p),h===null&&Em(p.stateNode.containerInfo),fi(p),null;case 10:return vo(p.type),fi(p),null;case 19:if(E(Ma),U=p.memoizedState,U===null)return fi(p),null;if(w=(p.flags&128)!==0,k=U.rendering,k===null)if(w)vs(U,!1);else{if(Wn!==0||h!==null&&(h.flags&128)!==0)for(h=p.child;h!==null;){if(k=Hn(h),k!==null){for(p.flags|=128,vs(U,!1),h=k.updateQueue,p.updateQueue=h,Yc(p,h),p.subtreeFlags=0,h=S,S=p.child;S!==null;)Dl(S,h),S=S.sibling;return N(Ma,Ma.current&1|2),p.child}h=h.sibling}U.tail!==null&&ss()>Wi&&(p.flags|=128,w=!0,vs(U,!1),p.lanes=4194304)}else{if(!w)if(h=Hn(k),h!==null){if(p.flags|=128,w=!0,h=h.updateQueue,p.updateQueue=h,Yc(p,h),vs(U,!0),U.tail===null&&U.tailMode==="hidden"&&!k.alternate&&!ei)return fi(p),null}else 2*ss()-U.renderingStartTime>Wi&&S!==536870912&&(p.flags|=128,w=!0,vs(U,!1),p.lanes=4194304);U.isBackwards?(k.sibling=p.child,p.child=k):(h=U.last,h!==null?h.sibling=k:p.child=k,U.last=k)}return U.tail!==null?(p=U.tail,U.rendering=p,U.tail=p.sibling,U.renderingStartTime=ss(),p.sibling=null,h=Ma.current,N(Ma,w?h&1|2:h&1),p):(fi(p),null);case 22:case 23:return si(p),Ca(),w=p.memoizedState!==null,h!==null?h.memoizedState!==null!==w&&(p.flags|=8192):w&&(p.flags|=8192),w?(S&536870912)!==0&&(p.flags&128)===0&&(fi(p),p.subtreeFlags&6&&(p.flags|=8192)):fi(p),S=p.updateQueue,S!==null&&Yc(p,S.retryQueue),S=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(S=h.memoizedState.cachePool.pool),w=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(w=p.memoizedState.cachePool.pool),w!==S&&(p.flags|=2048),h!==null&&E(kl),null;case 24:return S=null,h!==null&&(S=h.memoizedState.cache),p.memoizedState.cache!==S&&(p.flags|=2048),vo(di),fi(p),null;case 25:return null}throw Error(a(156,p.tag))}function $u(h,p){switch(fe(p),p.tag){case 1:return h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 3:return vo(di),xe(),h=p.flags,(h&65536)!==0&&(h&128)===0?(p.flags=h&-65537|128,p):null;case 26:case 27:case 5:return _e(p),null;case 13:if(si(p),h=p.memoizedState,h!==null&&h.dehydrated!==null){if(p.alternate===null)throw Error(a(340));nt()}return h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 19:return E(Ma),null;case 4:return xe(),null;case 10:return vo(p.type),null;case 22:case 23:return si(p),Ca(),h!==null&&E(kl),h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 24:return vo(di),null;case 25:return null;default:return null}}function Jf(h,p){switch(fe(p),p.tag){case 3:vo(di),xe();break;case 26:case 27:case 5:_e(p);break;case 4:xe();break;case 13:si(p);break;case 19:E(Ma);break;case 10:vo(p.type);break;case 22:case 23:si(p),Ca(),h!==null&&E(kl);break;case 24:vo(di)}}function Ns(h,p){try{var S=p.updateQueue,w=S!==null?S.lastEffect:null;if(w!==null){var U=w.next;S=U;do{if((S.tag&h)===h){w=void 0;var k=S.create,le=S.inst;w=k(),le.destroy=w}S=S.next}while(S!==U)}}catch(Te){In(p,p.return,Te)}}function Wo(h,p,S){try{var w=p.updateQueue,U=w!==null?w.lastEffect:null;if(U!==null){var k=U.next;w=k;do{if((w.tag&h)===h){var le=w.inst,Te=le.destroy;if(Te!==void 0){le.destroy=void 0,U=p;var ze=S;try{Te()}catch(pt){In(U,ze,pt)}}}w=w.next}while(w!==k)}}catch(pt){In(p,p.return,pt)}}function Al(h){var p=h.updateQueue;if(p!==null){var S=h.stateNode;try{it(p,S)}catch(w){In(h,h.return,w)}}}function Td(h,p,S){S.props=ka(h.type,h.memoizedProps),S.state=h.memoizedState;try{S.componentWillUnmount()}catch(w){In(h,p,w)}}function $a(h,p){try{var S=h.ref;if(S!==null){var w=h.stateNode;switch(h.tag){case 26:case 27:case 5:var U=sf(w);break;default:U=w}typeof S=="function"?h.refCleanup=S(U):S.current=U}}catch(k){In(h,p,k)}}function hi(h,p){var S=h.ref,w=h.refCleanup;if(S!==null)if(typeof w=="function")try{w()}catch(U){In(h,p,U)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof S=="function")try{S(null)}catch(U){In(h,p,U)}else S.current=null}function El(h){var p=h.type,S=h.memoizedProps,w=h.stateNode;try{ox(w,p,S,h)}catch(U){In(h,h.return,U)}}function Zc(h,p,S){try{Dm(h.stateNode,h.type,S,p,h)}catch(w){In(h,h.return,w)}}function oc(h){return h.tag===5||h.tag===3||(br?h.tag===26:!1)||(as?h.tag===27:!1)||h.tag===4}function lc(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||oc(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&(!as||h.tag!==27)&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function wl(h,p,S){var w=h.tag;if(w===5||w===6)h=h.stateNode,p?Om(S,h,p):Z0(S,h);else if(!(w===4||as&&w===27)&&(h=h.child,h!==null))for(wl(h,p,S),h=h.sibling;h!==null;)wl(h,p,S),h=h.sibling}function gr(h,p,S){var w=h.tag;if(w===5||w===6)h=h.stateNode,p?Lm(S,h,p):Rm(S,h);else if(!(w===4||as&&w===27)&&(h=h.child,h!==null))for(gr(h,p,S),h=h.sibling;h!==null;)gr(h,p,S),h=h.sibling}function Kc(h,p,S){h=h.containerInfo;try{Pm(h,S)}catch(w){In(p,p.return,w)}}function qo(h,p){for(xc(h.containerInfo),ta=p;ta!==null;)if(h=ta,p=h.child,(h.subtreeFlags&1028)!==0&&p!==null)p.return=h,ta=p;else for(;ta!==null;){h=ta;var S=h.alternate;switch(p=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((p&1024)!==0&&S!==null){p=void 0;var w=h,U=S.memoizedProps;S=S.memoizedState;var k=w.stateNode;try{var le=ka(w.type,U,w.elementType===w.type);p=k.getSnapshotBeforeUpdate(le,S),k.__reactInternalSnapshotBeforeUpdate=p}catch(Te){In(w,w.return,Te)}}break;case 3:(p&1024)!==0&&is&&Ud(h.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((p&1024)!==0)throw Error(a(163))}if(p=h.sibling,p!==null){p.return=h.return,ta=p;break}ta=h.return}return le=pu,pu=!1,le}function Qc(h,p,S){var w=S.flags;switch(S.tag){case 0:case 11:case 15:Us(h,S),w&4&&Ns(5,S);break;case 1:if(Us(h,S),w&4)if(h=S.stateNode,p===null)try{h.componentDidMount()}catch(Te){In(S,S.return,Te)}else{var U=ka(S.type,p.memoizedProps);p=p.memoizedState;try{h.componentDidUpdate(U,p,h.__reactInternalSnapshotBeforeUpdate)}catch(Te){In(S,S.return,Te)}}w&64&&Al(S),w&512&&$a(S,S.return);break;case 3:if(Us(h,S),w&64&&(w=S.updateQueue,w!==null)){if(h=null,S.child!==null)switch(S.child.tag){case 27:case 5:h=sf(S.child.stateNode);break;case 1:h=S.child.stateNode}try{it(w,h)}catch(Te){In(S,S.return,Te)}}break;case 26:if(br){Us(h,S),w&512&&$a(S,S.return);break}case 27:case 5:Us(h,S),p===null&&w&4&&El(S),w&512&&$a(S,S.return);break;case 12:Us(h,S);break;case 13:Us(h,S),w&4&&_o(h,S);break;case 22:if(U=S.memoizedState!==null||Ia,!U){p=p!==null&&p.memoizedState!==null||ji;var k=Ia,le=ji;Ia=U,(ji=p)&&!le?xo(h,S,(S.subtreeFlags&8772)!==0):Us(h,S),Ia=k,ji=le}w&512&&(S.memoizedProps.mode==="manual"?$a(S,S.return):hi(S,S.return));break;default:Us(h,S)}}function cc(h){var p=h.alternate;p!==null&&(h.alternate=null,cc(p)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(p=h.stateNode,p!==null&&wm(p)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function Ha(h,p,S){for(S=S.child;S!==null;)ef(h,p,S),S=S.sibling}function ef(h,p,S){if(Xs&&typeof Xs.onCommitFiberUnmount=="function")try{Xs.onCommitFiberUnmount(uf,S)}catch{}switch(S.tag){case 26:if(br){ji||hi(S,p),Ha(h,p,S),S.memoizedState?Gm(S.memoizedState):S.stateNode&&qm(S.stateNode);break}case 27:if(as){ji||hi(S,p);var w=la,U=Ks;la=S.stateNode,Ha(h,p,S),dv(S.stateNode),la=w,Ks=U;break}case 5:ji||hi(S,p);case 6:if(is){if(w=la,U=Ks,la=null,Ha(h,p,S),la=w,Ks=U,la!==null)if(Ks)try{sa(la,S.stateNode)}catch(k){In(S,p,k)}else try{Ps(la,S.stateNode)}catch(k){In(S,p,k)}}else Ha(h,p,S);break;case 18:is&&la!==null&&(Ks?km(la,S.stateNode):lv(la,S.stateNode));break;case 4:is?(w=la,U=Ks,la=S.stateNode.containerInfo,Ks=!0,Ha(h,p,S),la=w,Ks=U):(xr&&Kc(S.stateNode,S,Id()),Ha(h,p,S));break;case 0:case 11:case 14:case 15:ji||Wo(2,S,p),ji||Wo(4,S,p),Ha(h,p,S);break;case 1:ji||(hi(S,p),w=S.stateNode,typeof w.componentWillUnmount=="function"&&Td(S,p,w)),Ha(h,p,S);break;case 21:Ha(h,p,S);break;case 22:ji||hi(S,p),ji=(w=ji)||S.memoizedState!==null,Ha(h,p,S),ji=w;break;default:Ha(h,p,S)}}function _o(h,p){if(Is&&p.memoizedState===null&&(h=p.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{Fd(h)}catch(S){In(p,p.return,S)}}function uc(h){switch(h.tag){case 13:case 19:var p=h.stateNode;return p===null&&(p=h.stateNode=new gf),p;case 22:return h=h.stateNode,p=h._retryCache,p===null&&(p=h._retryCache=new gf),p;default:throw Error(a(435,h.tag))}}function fc(h,p){var S=uc(h);p.forEach(function(w){var U=nh.bind(null,h,w);S.has(w)||(S.add(w),w.then(U,U))})}function es(h,p){var S=p.deletions;if(S!==null)for(var w=0;w<S.length;w++){var U=S[w],k=h,le=p;if(is){var Te=le;e:for(;Te!==null;){switch(Te.tag){case 27:case 5:la=Te.stateNode,Ks=!1;break e;case 3:la=Te.stateNode.containerInfo,Ks=!0;break e;case 4:la=Te.stateNode.containerInfo,Ks=!0;break e}Te=Te.return}if(la===null)throw Error(a(160));ef(k,le,U),la=null,Ks=!1}else ef(k,le,U);k=U.alternate,k!==null&&(k.return=null),U.return=null}if(p.subtreeFlags&13878)for(p=p.child;p!==null;)Da(p,h),p=p.sibling}function Da(h,p){var S=h.alternate,w=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:es(p,h),La(h),w&4&&(Wo(3,h,h.return),Ns(3,h),Wo(5,h,h.return));break;case 1:es(p,h),La(h),w&512&&(ji||S===null||hi(S,S.return)),w&64&&Ia&&(h=h.updateQueue,h!==null&&(w=h.callbacks,w!==null&&(S=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=S===null?w:S.concat(w))));break;case 26:if(br){var U=zs;es(p,h),La(h),w&512&&(ji||S===null||hi(S,S.return)),w&4&&(w=S!==null?S.memoizedState:null,p=h.memoizedState,S===null?p===null?h.stateNode===null?h.stateNode=jm(U,h.type,h.memoizedProps,h):Wm(U,h.type,h.stateNode):h.stateNode=Hm(U,p,h.memoizedProps):w!==p?(w===null?S.stateNode!==null&&qm(S.stateNode):Gm(w),p===null?Wm(U,h.type,h.stateNode):Hm(U,p,h.memoizedProps)):p===null&&h.stateNode!==null&&Zc(h,h.memoizedProps,S.memoizedProps));break}case 27:if(as&&w&4&&h.alternate===null){U=h.stateNode;var k=h.memoizedProps;try{fx(U),hx(h.type,k,U,h)}catch(wt){In(h,h.return,wt)}}case 5:if(es(p,h),La(h),w&512&&(ji||S===null||hi(S,S.return)),is){if(h.flags&32){p=h.stateNode;try{uh(p)}catch(wt){In(h,h.return,wt)}}w&4&&h.stateNode!=null&&(p=h.memoizedProps,Zc(h,p,S!==null?S.memoizedProps:p)),w&1024&&(Rc=!0)}break;case 6:if(es(p,h),La(h),w&4&&is){if(h.stateNode===null)throw Error(a(162));w=h.memoizedProps,S=S!==null?S.memoizedProps:w,p=h.stateNode;try{K0(p,S,w)}catch(wt){In(h,h.return,wt)}}break;case 3:if(br?(Xm(),U=zs,zs=kd(p.containerInfo),es(p,h),zs=U):es(p,h),La(h),w&4){if(is&&Is&&S!==null&&S.memoizedState.isDehydrated)try{Bd(p.containerInfo)}catch(wt){In(h,h.return,wt)}if(xr){w=p.containerInfo,S=p.pendingChildren;try{Pm(w,S)}catch(wt){In(h,h.return,wt)}}}Rc&&(Rc=!1,$f(h));break;case 4:br?(S=zs,zs=kd(h.stateNode.containerInfo),es(p,h),La(h),zs=S):(es(p,h),La(h)),w&4&&xr&&Kc(h.stateNode,h,h.stateNode.pendingChildren);break;case 12:es(p,h),La(h);break;case 13:es(p,h),La(h),h.child.flags&8192&&h.memoizedState!==null!=(S!==null&&S.memoizedState!==null)&&(al=ss()),w&4&&(w=h.updateQueue,w!==null&&(h.updateQueue=null,fc(h,w)));break;case 22:w&512&&(ji||S===null||hi(S,S.return)),U=h.memoizedState!==null;var le=S!==null&&S.memoizedState!==null,Te=Ia,ze=ji;if(Ia=Te||U,ji=ze||le,es(p,h),ji=ze,Ia=Te,La(h),p=h.stateNode,p._current=h,p._visibility&=-3,p._visibility|=p._pendingVisibility&2,w&8192&&(p._visibility=U?p._visibility&-2:p._visibility|1,U&&(p=Ia||ji,S===null||le||p||hc(h)),is&&(h.memoizedProps===null||h.memoizedProps.mode!=="manual"))){e:if(S=null,is)for(p=h;;){if(p.tag===5||br&&p.tag===26||as&&p.tag===27){if(S===null){le=S=p;try{k=le.stateNode,U?fh(k):Nm(le.stateNode,le.memoizedProps)}catch(wt){In(le,le.return,wt)}}}else if(p.tag===6){if(S===null){le=p;try{var pt=le.stateNode;U?Nd(pt):Il(pt,le.memoizedProps)}catch(wt){In(le,le.return,wt)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===h)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===h)break e;for(;p.sibling===null;){if(p.return===null||p.return===h)break e;S===p&&(S=null),p=p.return}S===p&&(S=null),p.sibling.return=p.return,p=p.sibling}}w&4&&(w=h.updateQueue,w!==null&&(S=w.retryQueue,S!==null&&(w.retryQueue=null,fc(h,S))));break;case 19:es(p,h),La(h),w&4&&(w=h.updateQueue,w!==null&&(h.updateQueue=null,fc(h,w)));break;case 21:break;default:es(p,h),La(h)}}function La(h){var p=h.flags;if(p&2){try{if(is&&(!as||h.tag!==27)){e:{for(var S=h.return;S!==null;){if(oc(S)){var w=S;break e}S=S.return}throw Error(a(160))}switch(w.tag){case 27:if(as){var U=w.stateNode,k=lc(h);gr(h,k,U);break}case 5:var le=w.stateNode;w.flags&32&&(uh(le),w.flags&=-33);var Te=lc(h);gr(h,Te,le);break;case 3:case 4:var ze=w.stateNode.containerInfo,pt=lc(h);wl(h,pt,ze);break;default:throw Error(a(161))}}}catch(wt){In(h,h.return,wt)}h.flags&=-3}p&4096&&(h.flags&=-4097)}function $f(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var p=h;$f(p),p.tag===5&&p.flags&1024&&bi(p.stateNode),h=h.sibling}}function Us(h,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)Qc(h,p.alternate,p),p=p.sibling}function hc(h){for(h=h.child;h!==null;){var p=h;switch(p.tag){case 0:case 11:case 14:case 15:Wo(4,p,p.return),hc(p);break;case 1:hi(p,p.return);var S=p.stateNode;typeof S.componentWillUnmount=="function"&&Td(p,p.return,S),hc(p);break;case 26:case 27:case 5:hi(p,p.return),hc(p);break;case 22:hi(p,p.return),p.memoizedState===null&&hc(p);break;default:hc(p)}h=h.sibling}}function xo(h,p,S){for(S=S&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var w=p.alternate,U=h,k=p,le=k.flags;switch(k.tag){case 0:case 11:case 15:xo(U,k,S),Ns(4,k);break;case 1:if(xo(U,k,S),w=k,U=w.stateNode,typeof U.componentDidMount=="function")try{U.componentDidMount()}catch(pt){In(w,w.return,pt)}if(w=k,U=w.updateQueue,U!==null){var Te=w.stateNode;try{var ze=U.shared.hiddenCallbacks;if(ze!==null)for(U.shared.hiddenCallbacks=null,U=0;U<ze.length;U++)Se(ze[U],Te)}catch(pt){In(w,w.return,pt)}}S&&le&64&&Al(k),$a(k,k.return);break;case 26:case 27:case 5:xo(U,k,S),S&&w===null&&le&4&&El(k),$a(k,k.return);break;case 12:xo(U,k,S);break;case 13:xo(U,k,S),S&&le&4&&_o(U,k);break;case 22:k.memoizedState===null&&xo(U,k,S),$a(k,k.return);break;default:xo(U,k,S)}p=p.sibling}}function eh(h,p){var S=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(S=h.memoizedState.cachePool.pool),h=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(h=p.memoizedState.cachePool.pool),h!==S&&(h!=null&&h.refCount++,S!=null&&Sl(S))}function Xo(h,p){h=null,p.alternate!==null&&(h=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==h&&(p.refCount++,h!=null&&Sl(h))}function So(h,p,S,w){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)bo(h,p,S,w),p=p.sibling}function bo(h,p,S,w){var U=p.flags;switch(p.tag){case 0:case 11:case 15:So(h,p,S,w),U&2048&&Ns(9,p);break;case 3:So(h,p,S,w),U&2048&&(h=null,p.alternate!==null&&(h=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==h&&(p.refCount++,h!=null&&Sl(h)));break;case 12:if(U&2048){So(h,p,S,w),h=p.stateNode;try{var k=p.memoizedProps,le=k.id,Te=k.onPostCommit;typeof Te=="function"&&Te(le,p.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch(ze){In(p,p.return,ze)}}else So(h,p,S,w);break;case 23:break;case 22:k=p.stateNode,p.memoizedState!==null?k._visibility&4?So(h,p,S,w):To(h,p):k._visibility&4?So(h,p,S,w):(k._visibility|=4,Oa(h,p,S,w,(p.subtreeFlags&10256)!==0)),U&2048&&eh(p.alternate,p);break;case 24:So(h,p,S,w),U&2048&&Xo(p.alternate,p);break;default:So(h,p,S,w)}}function Oa(h,p,S,w,U){for(U=U&&(p.subtreeFlags&10256)!==0,p=p.child;p!==null;){var k=h,le=p,Te=S,ze=w,pt=le.flags;switch(le.tag){case 0:case 11:case 15:Oa(k,le,Te,ze,U),Ns(8,le);break;case 23:break;case 22:var wt=le.stateNode;le.memoizedState!==null?wt._visibility&4?Oa(k,le,Te,ze,U):To(k,le):(wt._visibility|=4,Oa(k,le,Te,ze,U)),U&&pt&2048&&eh(le.alternate,le);break;case 24:Oa(k,le,Te,ze,U),U&&pt&2048&&Xo(le.alternate,le);break;default:Oa(k,le,Te,ze,U)}p=p.sibling}}function To(h,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var S=h,w=p,U=w.flags;switch(w.tag){case 22:To(S,w),U&2048&&eh(w.alternate,w);break;case 24:To(S,w),U&2048&&Xo(w.alternate,w);break;default:To(S,w)}p=p.sibling}}function xa(h){if(h.subtreeFlags&mu)for(h=h.child;h!==null;)ts(h),h=h.sibling}function ts(h){switch(h.tag){case 26:xa(h),h.flags&mu&&(h.memoizedState!==null?Zm(zs,h.memoizedState,h.memoizedProps):Ki(h.type,h.memoizedProps));break;case 5:xa(h),h.flags&mu&&Ki(h.type,h.memoizedProps);break;case 3:case 4:if(br){var p=zs;zs=kd(h.stateNode.containerInfo),xa(h),zs=p}else xa(h);break;case 22:h.memoizedState===null&&(p=h.alternate,p!==null&&p.memoizedState!==null?(p=mu,mu=16777216,xa(h),mu=p):xa(h));break;default:xa(h)}}function Jc(h){var p=h.alternate;if(p!==null&&(h=p.child,h!==null)){p.child=null;do p=h.sibling,h.sibling=null,h=p;while(h!==null)}}function Mo(h){var p=h.deletions;if((h.flags&16)!==0){if(p!==null)for(var S=0;S<p.length;S++){var w=p[S];ta=w,vr(w,h)}Jc(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)Ao(h),h=h.sibling}function Ao(h){switch(h.tag){case 0:case 11:case 15:Mo(h),h.flags&2048&&Wo(9,h,h.return);break;case 3:Mo(h);break;case 12:Mo(h);break;case 22:var p=h.stateNode;h.memoizedState!==null&&p._visibility&4&&(h.return===null||h.return.tag!==13)?(p._visibility&=-5,dc(h)):Mo(h);break;default:Mo(h)}}function dc(h){var p=h.deletions;if((h.flags&16)!==0){if(p!==null)for(var S=0;S<p.length;S++){var w=p[S];ta=w,vr(w,h)}Jc(h)}for(h=h.child;h!==null;){switch(p=h,p.tag){case 0:case 11:case 15:Wo(8,p,p.return),dc(p);break;case 22:S=p.stateNode,S._visibility&4&&(S._visibility&=-5,dc(p));break;default:dc(p)}h=h.sibling}}function vr(h,p){for(;ta!==null;){var S=ta;switch(S.tag){case 0:case 11:case 15:Wo(8,S,p);break;case 23:case 22:if(S.memoizedState!==null&&S.memoizedState.cachePool!==null){var w=S.memoizedState.cachePool.pool;w!=null&&w.refCount++}break;case 24:Sl(S.memoizedState.cache)}if(w=S.child,w!==null)w.return=S,ta=w;else e:for(S=h;ta!==null;){w=ta;var U=w.sibling,k=w.return;if(cc(w),w===S){ta=null;break e}if(U!==null){U.return=k,ta=U;break e}ta=k}}}function Yo(h){var p=Am(h);if(p!=null){if(typeof p.memoizedProps["data-testname"]!="string")throw Error(a(364));return p}if(h=cu(h),h===null)throw Error(a(362));return h.stateNode.current}function Cl(h,p){var S=h.tag;switch(p.$$typeof){case Eh:if(h.type===p.value)return!0;break;case Qd:e:{for(p=p.value,h=[h,0],S=0;S<h.length;){var w=h[S++],U=w.tag,k=h[S++],le=p[k];if(U!==5&&U!==26&&U!==27||!$o(w)){for(;le!=null&&Cl(w,le);)k++,le=p[k];if(k===p.length){p=!0;break e}else for(w=w.child;w!==null;)h.push(w,k),w=w.sibling}}p=!1}return p;case Jd:if((S===5||S===26||S===27)&&rx(h.stateNode,p.value))return!0;break;case pi:if((S===5||S===6||S===26||S===27)&&(h=ch(h),h!==null&&0<=h.indexOf(p.value)))return!0;break;case jn:if((S===5||S===26||S===27)&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===p.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function Eo(h){switch(h.$$typeof){case Eh:return"<"+(o(h.value)||"Unknown")+">";case Qd:return":has("+(Eo(h)||"")+")";case Jd:return'[role="'+h.value+'"]';case pi:return'"'+h.value+'"';case jn:return'[data-testname="'+h.value+'"]';default:throw Error(a(365))}}function Md(h,p){var S=[];h=[h,0];for(var w=0;w<h.length;){var U=h[w++],k=U.tag,le=h[w++],Te=p[le];if(k!==5&&k!==26&&k!==27||!$o(U)){for(;Te!=null&&Cl(U,Te);)le++,Te=p[le];if(le===p.length)S.push(U);else for(U=U.child;U!==null;)h.push(U,le),U=U.sibling}}return S}function Ga(h,p){if(!Jo)throw Error(a(363));h=Yo(h),h=Md(h,p),p=[],h=Array.from(h);for(var S=0;S<h.length;){var w=h[S++],U=w.tag;if(U===5||U===26||U===27)$o(w)||p.push(w.stateNode);else for(w=w.child;w!==null;)h.push(w),w=w.sibling}return p}function ja(){if((sn&2)!==0&&Nn!==0)return Nn&-Nn;if(un.T!==null){var h=Ys;return h!==0?h:De()}return Xr()}function yr(){Qs===0&&(Qs=(Nn&536870912)===0||ei?Z():536870912);var h=Rr.current;return h!==null&&(h.flags|=32),Qs}function Na(h,p,S){(h===Pn&&Ti===2||h.cancelPendingCommit!==null)&&(T(h,0),_r(h,Nn,Qs,!1)),Q(h,S),((sn&2)===0||h!==Pn)&&(h===Pn&&((sn&2)===0&&(Io|=S),Wn===4&&_r(h,Nn,Qs,!1)),Ze(h))}function pc(h,p,S){if((sn&6)!==0)throw Error(a(327));var w=!S&&(p&60)===0&&(p&h.expiredLanes)===0||V(h,p),U=w?Nt(h,p):Ye(h,p,!0),k=w;do{if(U===0){Dr&&!w&&_r(h,p,0,!1);break}else if(U===6)_r(h,p,0,!mi);else{if(S=h.current.alternate,k&&!th(S)){U=Ye(h,p,!1),k=!1;continue}if(U===2){if(k=p,h.errorRecoveryDisabledLanes&k)var le=0;else le=h.pendingLanes&-536870913,le=le!==0?le:le&536870912?536870912:0;if(le!==0){p=le;e:{var Te=h;U=vf;var ze=Is&&Te.current.memoizedState.isDehydrated;if(ze&&(T(Te,le).flags|=256),le=Ye(Te,le,!1),le!==2){if(Vl&&!ze){Te.errorRecoveryDisabledLanes|=k,Io|=k,U=4;break e}k=Or,Or=U,k!==null&&wo(k)}U=le}if(k=!1,U!==2)continue}}if(U===1){T(h,0),_r(h,p,0,!0);break}e:{switch(w=h,U){case 0:case 1:throw Error(a(345));case 4:if((p&4194176)===p){_r(w,p,Qs,!mi);break e}break;case 2:Or=null;break;case 3:case 5:break;default:throw Error(a(329))}if(w.finishedWork=S,w.finishedLanes=p,(p&62914560)===p&&(k=al+300-ss(),10<k)){if(_r(w,p,Qs,!mi),F(w,0)!==0)break e;w.timeoutHandle=Mm($c.bind(null,w,S,Or,Po,yf,p,Qs,Io,Hl,mi,2,-0,0),k);break e}$c(w,S,Or,Po,yf,p,Qs,Io,Hl,mi,0,-0,0)}}break}while(!0);Ze(h)}function wo(h){Or===null?Or=h:Or.push.apply(Or,h)}function $c(h,p,S,w,U,k,le,Te,ze,pt,wt,Bt,Gt){var _n=p.subtreeFlags;if((_n&8192||(_n&16785408)===16785408)&&(Sr(),ts(p),p=Dd(),p!==null)){h.cancelPendingCommit=p($n.bind(null,h,S,w,U,le,Te,ze,1,Bt,Gt)),_r(h,k,le,!pt);return}$n(h,S,w,U,le,Te,ze,wt,Bt,Gt)}function th(h){for(var p=h;;){var S=p.tag;if((S===0||S===11||S===15)&&p.flags&16384&&(S=p.updateQueue,S!==null&&(S=S.stores,S!==null)))for(var w=0;w<S.length;w++){var U=S[w],k=U.getSnapshot;U=U.value;try{if(!Tr(k(),U))return!1}catch{return!1}}if(S=p.child,p.subtreeFlags&16384&&S!==null)S.return=p,p=S;else{if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function _r(h,p,S,w){p&=~bs,p&=~Io,h.suspendedLanes|=p,h.pingedLanes&=~p,w&&(h.warmLanes|=p),w=h.expirationTimes;for(var U=p;0<U;){var k=31-qs(U),le=1<<k;w[k]=-1,U&=~le}S!==0&&oe(h,S,p)}function u(){return(sn&6)===0?(Le(0),!1):!0}function v(){if(Sn!==null){if(Ti===0)var h=Sn.return;else h=Sn,ea=Cc=null,Gr(h),tl=null,Kr=0,h=Sn;for(;h!==null;)Jf(h.alternate,h),h=h.return;Sn=null}}function T(h,p){h.finishedWork=null,h.finishedLanes=0;var S=h.timeoutHandle;S!==lu&&(h.timeoutHandle=lu,lh(S)),S=h.cancelPendingCommit,S!==null&&(h.cancelPendingCommit=null,S()),v(),Pn=h,Sn=S=qa(h.current,null),Nn=p,Ti=0,ca=null,mi=!1,Dr=V(h,p),Vl=!1,Hl=Qs=bs=Io=Lr=Wn=0,Or=vf=null,yf=!1,(p&8)!==0&&(p|=p&32);var w=h.entangledLanes;if(w!==0)for(h=h.entanglements,w&=p;0<w;){var U=31-qs(w),k=1<<U;p|=h[U],w&=~k}return Uo=p,Ne(),S}function P(h,p){Rn=null,un.H=ti,p===xi?(p=mt(),Ti=3):p===$m?(p=mt(),Ti=4):Ti=p===xv?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,ca=p,Sn===null&&(Wn=1,yn(h,de(p,h.current)))}function j(){var h=Rr.current;return h===null?!0:(Nn&4194176)===Nn?Qr===null:(Nn&62914560)===Nn||(Nn&536870912)!==0?h===Qr:!1}function ee(){var h=un.H;return un.H=ti,h===null?ti:h}function be(){var h=un.A;return un.A=Kd,h}function Oe(){Wn=4,mi||(Nn&4194176)!==Nn&&Rr.current!==null||(Dr=!0),(Lr&134217727)===0&&(Io&134217727)===0||Pn===null||_r(Pn,Nn,Qs,!1)}function Ye(h,p,S){var w=sn;sn|=2;var U=ee(),k=be();(Pn!==h||Nn!==p)&&(Po=null,T(h,p)),p=!1;var le=Wn;e:do try{if(Ti!==0&&Sn!==null){var Te=Sn,ze=ca;switch(Ti){case 8:v(),le=6;break e;case 3:case 2:case 6:Rr.current===null&&(p=!0);var pt=Ti;if(Ti=0,ca=null,wi(h,Te,ze,pt),S&&Dr){le=0;break e}break;default:pt=Ti,Ti=0,ca=null,wi(h,Te,ze,pt)}}yt(),le=Wn;break}catch(wt){P(h,wt)}while(!0);return p&&h.shellSuspendCounter++,ea=Cc=null,sn=w,un.H=U,un.A=k,Sn===null&&(Pn=null,Nn=0,Ne()),le}function yt(){for(;Sn!==null;)Mn(Sn)}function Nt(h,p){var S=sn;sn|=2;var w=ee(),U=be();Pn!==h||Nn!==p?(Po=null,Wi=ss()+500,T(h,p)):Dr=V(h,p);e:do try{if(Ti!==0&&Sn!==null){p=Sn;var k=ca;t:switch(Ti){case 1:Ti=0,ca=null,wi(h,p,k,1);break;case 2:if(At(k)){Ti=0,ca=null,Sa(p);break}p=function(){Ti===2&&Pn===h&&(Ti=7),Ze(h)},k.then(p,p);break e;case 3:Ti=7;break e;case 4:Ti=5;break e;case 7:At(k)?(Ti=0,ca=null,Sa(p)):(Ti=0,ca=null,wi(h,p,k,7));break;case 5:var le=null;switch(Sn.tag){case 26:le=Sn.memoizedState;case 5:case 27:var Te=Sn,ze=Te.type,pt=Te.pendingProps;if(le?Ym(le):Ul(ze,pt)){Ti=0,ca=null;var wt=Te.sibling;if(wt!==null)Sn=wt;else{var Bt=Te.return;Bt!==null?(Sn=Bt,Wa(Bt)):Sn=null}break t}}Ti=0,ca=null,wi(h,p,k,5);break;case 6:Ti=0,ca=null,wi(h,p,k,6);break;case 8:v(),Wn=6;break e;default:throw Error(a(462))}}$t();break}catch(Gt){P(h,Gt)}while(!0);return ea=Cc=null,un.H=w,un.A=U,sn=S,Sn!==null?0:(Pn=null,Nn=0,Ne(),Wn)}function $t(){for(;Sn!==null&&!mv();)Mn(Sn)}function Mn(h){var p=Xc(h.alternate,h,Uo);h.memoizedProps=h.pendingProps,p===null?Wa(h):Sn=p}function Sa(h){var p=h,S=p.alternate;switch(p.tag){case 15:case 0:p=Wc(S,p,p.pendingProps,p.type,void 0,Nn);break;case 11:p=Wc(S,p,p.pendingProps,p.type.render,p.ref,Nn);break;case 5:Gr(p);default:Jf(S,p),p=Sn=Dl(p,Uo),p=Xc(S,p,Uo)}h.memoizedProps=h.pendingProps,p===null?Wa(h):Sn=p}function wi(h,p,S,w){ea=Cc=null,Gr(p),tl=null,Kr=0;var U=p.return;try{if(Vu(h,U,p,S,Nn)){Wn=1,yn(h,de(S,h.current)),Sn=null;return}}catch(k){if(U!==null)throw Sn=U,k;Wn=1,yn(h,de(S,h.current)),Sn=null;return}p.flags&32768?(ei||w===1?h=!0:Dr||(Nn&536870912)!==0?h=!1:(mi=h=!0,(w===2||w===3||w===6)&&(w=Rr.current,w!==null&&w.tag===13&&(w.flags|=16384))),Jn(p,h)):Wa(p)}function Wa(h){var p=h;do{if((p.flags&32768)!==0){Jn(p,mi);return}h=p.return;var S=bd(p.alternate,p,Uo);if(S!==null){Sn=S;return}if(p=p.sibling,p!==null){Sn=p;return}Sn=p=h}while(p!==null);Wn===0&&(Wn=5)}function Jn(h,p){do{var S=$u(h.alternate,h);if(S!==null){S.flags&=32767,Sn=S;return}if(S=h.return,S!==null&&(S.flags|=32768,S.subtreeFlags=0,S.deletions=null),!p&&(h=h.sibling,h!==null)){Sn=h;return}Sn=h=S}while(h!==null);Wn=6,Sn=null}function $n(h,p,S,w,U,k,le,Te,ze,pt){var wt=un.T,Bt=Ua();try{ys(2),un.T=null,zn(h,p,S,w,Bt,U,k,le,Te,ze,pt)}finally{un.T=wt,ys(Bt)}}function zn(h,p,S,w,U,k,le,Te){do ba();while(Gl!==null);if((sn&6)!==0)throw Error(a(327));var ze=h.finishedWork;if(w=h.finishedLanes,ze===null)return null;if(h.finishedWork=null,h.finishedLanes=0,ze===h.current)throw Error(a(177));h.callbackNode=null,h.callbackPriority=0,h.cancelPendingCommit=null;var pt=ze.lanes|ze.childLanes;if(pt|=hf,J(h,w,pt,k,le,Te),h===Pn&&(Sn=Pn=null,Nn=0),(ze.subtreeFlags&10256)===0&&(ze.flags&10256)===0||$r||($r=!0,$d=pt,vu=S,nu(Hd,function(){return ba(),null})),S=(ze.flags&15990)!==0,(ze.subtreeFlags&15990)!==0||S?(S=un.T,un.T=null,k=Ua(),ys(2),le=sn,sn|=4,qo(h,ze),Da(ze,h),bm(h.containerInfo),h.current=ze,Qc(h,ze.alternate,ze),gv(),sn=le,ys(k),un.T=S):h.current=ze,$r?($r=!1,Gl=h,gu=w):Co(h,pt),pt=h.pendingLanes,pt===0&&(Nr=null),q(ze.stateNode),Ze(h),p!==null)for(U=h.onRecoverableError,ze=0;ze<p.length;ze++)pt=p[ze],U(pt.value,{componentStack:pt.stack});return(gu&3)!==0&&ba(),pt=h.pendingLanes,(w&4194218)!==0&&(pt&42)!==0?h===Bs?yu++:(yu=0,Bs=h):yu=0,Le(0),null}function Co(h,p){(h.pooledCacheLanes&=p)===0&&(p=h.pooledCache,p!=null&&(h.pooledCache=null,Sl(p)))}function ba(){if(Gl!==null){var h=Gl,p=$d;$d=0;var S=ve(gu),w=32>S?32:S;S=un.T;var U=Ua();try{if(ys(w),un.T=null,Gl===null)var k=!1;else{w=vu,vu=null;var le=Gl,Te=gu;if(Gl=null,gu=0,(sn&6)!==0)throw Error(a(331));var ze=sn;if(sn|=4,Ao(le.current),bo(le,le.current,Te,w),sn=ze,Le(0,!1),Xs&&typeof Xs.onPostCommitFiberRoot=="function")try{Xs.onPostCommitFiberRoot(uf,le)}catch{}k=!0}return k}finally{ys(U),un.T=S,Co(h,p)}}return!1}function eu(h,p,S){p=de(S,p),p=Vi(h.stateNode,p,2),h=Qe(h,p,2),h!==null&&(Q(h,2),Ze(h))}function In(h,p,S){if(h.tag===3)eu(h,h,S);else for(;p!==null;){if(p.tag===3){eu(p,h,S);break}else if(p.tag===1){var w=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(Nr===null||!Nr.has(w))){h=de(S,h),S=ds(2),w=Qe(p,S,2),w!==null&&(Yi(S,w,p,h),Q(w,2),Ze(w));break}}p=p.return}}function tu(h,p,S){var w=h.pingCache;if(w===null){w=h.pingCache=new kn;var U=new Set;w.set(p,U)}else U=w.get(p),U===void 0&&(U=new Set,w.set(p,U));U.has(S)||(Vl=!0,U.add(S),h=Gi.bind(null,h,p,S),p.then(h,h))}function Gi(h,p,S){var w=h.pingCache;w!==null&&w.delete(p),h.pingedLanes|=h.suspendedLanes&S,h.warmLanes&=~S,Pn===h&&(Nn&S)===S&&(Wn===4||Wn===3&&(Nn&62914560)===Nn&&300>ss()-al?(sn&2)===0&&T(h,0):bs|=S,Hl===Nn&&(Hl=0)),Ze(h)}function jr(h,p){p===0&&(p=B()),h=rt(h,p),h!==null&&(Q(h,p),Ze(h))}function Rl(h){var p=h.memoizedState,S=0;p!==null&&(S=p.retryLane),jr(h,S)}function nh(h,p){var S=0;switch(h.tag){case 13:var w=h.stateNode,U=h.memoizedState;U!==null&&(S=U.retryLane);break;case 19:w=h.stateNode;break;case 22:w=h.stateNode._retryCache;break;default:throw Error(a(314))}w!==null&&w.delete(p),jr(h,S)}function nu(h,p){return cf(h,p)}function iu(h,p,S,w){this.tag=h,this.key=S,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wr(h){return h=h.prototype,!(!h||!h.isReactComponent)}function qa(h,p){var S=h.alternate;return S===null?(S=t(h.tag,p,h.key,h.mode),S.elementType=h.elementType,S.type=h.type,S.stateNode=h.stateNode,S.alternate=h,h.alternate=S):(S.pendingProps=p,S.type=h.type,S.flags=0,S.subtreeFlags=0,S.deletions=null),S.flags=h.flags&31457280,S.childLanes=h.childLanes,S.lanes=h.lanes,S.child=h.child,S.memoizedProps=h.memoizedProps,S.memoizedState=h.memoizedState,S.updateQueue=h.updateQueue,p=h.dependencies,S.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},S.sibling=h.sibling,S.index=h.index,S.ref=h.ref,S.refCleanup=h.refCleanup,S}function Dl(h,p){h.flags&=31457282;var S=h.alternate;return S===null?(h.childLanes=0,h.lanes=p,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=S.childLanes,h.lanes=S.lanes,h.child=S.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=S.memoizedProps,h.memoizedState=S.memoizedState,h.updateQueue=S.updateQueue,h.type=S.type,p=S.dependencies,h.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),h}function qr(h,p,S,w,U,k){var le=0;if(w=h,typeof h=="function")Wr(h)&&(le=1);else if(typeof h=="string")le=br&&as?Vm(h,S,Ya.current)?26:of(h)?27:5:br?Vm(h,S,Ya.current)?26:5:as&&of(h)?27:5;else e:switch(h){case nf:return Ll(S.children,U,k,p);case ym:le=8,U|=24;break;case _m:return h=t(12,S,p,U|2),h.elementType=_m,h.lanes=k,h;case Ed:return h=t(13,S,p,U),h.elementType=Ed,h.lanes=k,h;case vc:return h=t(19,S,p,U),h.elementType=vc,h.lanes=k,h;case sh:return Ad(S,U,k,p);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case W0:case Zo:le=10;break e;case gc:le=9;break e;case af:le=11;break e;case ah:le=14;break e;case Do:le=16,w=null;break e}le=29,S=Error(a(130,h===null?"null":typeof h,"")),w=null}return p=t(le,S,p,U),p.elementType=h,p.type=w,p.lanes=k,p}function Ll(h,p,S,w){return h=t(7,h,w,p),h.lanes=S,h}function Ad(h,p,S,w){h=t(22,h,w,p),h.elementType=sh,h.lanes=S;var U={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var k=U._current;if(k===null)throw Error(a(456));if((U._pendingVisibility&2)===0){var le=rt(k,2);le!==null&&(U._pendingVisibility|=2,Na(le,k,2))}},attach:function(){var k=U._current;if(k===null)throw Error(a(456));if((U._pendingVisibility&2)!==0){var le=rt(k,2);le!==null&&(U._pendingVisibility&=-3,Na(le,k,2))}}};return h.stateNode=U,h}function mc(h,p,S){return h=t(6,h,null,p),h.lanes=S,h}function tf(h,p,S){return p=t(4,h.children!==null?h.children:[],h.key,p),p.lanes=S,p.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},p}function au(h,p,S,w,U,k,le,Te){this.tag=1,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=lu,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=H(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=H(0),this.hiddenUpdates=H(null),this.identifierPrefix=w,this.onUncaughtError=U,this.onCaughtError=k,this.onRecoverableError=le,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Te,this.incompleteTransitions=new Map}function Xa(h,p,S,w,U,k,le,Te,ze,pt,wt,Bt){return h=new au(h,p,S,le,Te,ze,pt,Bt),p=1,k===!0&&(p|=24),k=t(3,null,null,p),h.current=k,k.stateNode=h,p=Qu(),p.refCount++,h.pooledCache=p,p.refCount++,k.memoizedState={element:w,isDehydrated:S,cache:p},bt(k),h}function ih(h){return h?(h=uu,h):uu}function pm(h){var p=h._reactInternals;if(p===void 0)throw typeof h.render=="function"?Error(a(188)):(h=Object.keys(h).join(","),Error(a(268,h)));return h=b(p),h=h!==null?M(h):null,h===null?null:sf(h.stateNode)}function G0(h,p,S,w,U,k){U=ih(U),w.context===null?w.context=U:w.pendingContext=U,w=Ge(p),w.payload={element:S},k=k===void 0?null:k,k!==null&&(w.callback=k),S=Qe(h,w,p),S!==null&&(Na(S,h,p),st(S,h,p))}function j0(h,p){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var S=h.retryLane;h.retryLane=S!==0&&S<p?S:p}}function mm(h,p){j0(h,p),(h=h.alternate)&&j0(h,p)}var an={},gm=im(),ns=f8(),su=Object.assign,vm=Symbol.for("react.element"),Ol=Symbol.for("react.transitional.element"),Ro=Symbol.for("react.portal"),nf=Symbol.for("react.fragment"),ym=Symbol.for("react.strict_mode"),_m=Symbol.for("react.profiler"),W0=Symbol.for("react.provider"),gc=Symbol.for("react.consumer"),Zo=Symbol.for("react.context"),af=Symbol.for("react.forward_ref"),Ed=Symbol.for("react.suspense"),vc=Symbol.for("react.suspense_list"),ah=Symbol.for("react.memo"),Do=Symbol.for("react.lazy"),sh=Symbol.for("react.offscreen"),q0=Symbol.for("react.memo_cache_sentinel"),xm=Symbol.iterator,ru=Symbol.for("react.client.reference"),un=gm.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,wd,Sm,yc=!1,_c=Array.isArray,Cd=e.rendererVersion,rh=e.rendererPackageName,oh=e.extraDevToolsConfig,sf=e.getPublicInstance,ou=e.getRootHostContext,X0=e.getChildHostContext,xc=e.prepareForCommit,bm=e.resetAfterCommit,Tm=e.createInstance,Ko=e.appendInitialChild,Nl=e.finalizeInitialChildren,Sc=e.shouldSetTextContent,Rd=e.createTextInstance,Mm=e.scheduleTimeout,lh=e.cancelTimeout,lu=e.noTimeout,Qo=e.isPrimaryRenderer;e.warnsIfNotActing;var is=e.supportsMutation,xr=e.supportsPersistence,Is=e.supportsHydration,Am=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var Em=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var ys=e.setCurrentUpdatePriority,Ua=e.getCurrentUpdatePriority,Xr=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var bc=e.shouldAttemptEagerTransition,wm=e.detachDeletedInstance;e.requestPostPaintCallback;var Y0=e.maySuspendCommit,Ul=e.preloadInstance,Sr=e.startSuspendingCommit,Ki=e.suspendInstance,Dd=e.waitForCommitToBeReady,Ws=e.NotPendingTransition,dn=e.HostTransitionContext,bi=e.resetFormInstance;e.bindToConsole;var Ta=e.supportsMicrotasks,Ld=e.scheduleMicrotask,Jo=e.supportsTestSelectors,cu=e.findFiberRoot,Od=e.getBoundingRect,ch=e.getTextContent,$o=e.isHiddenSubtree,rx=e.matchAccessibilityRole,Qi=e.setFocusIfFocusable,Cm=e.setupIntersectionObserver,Rm=e.appendChild,Z0=e.appendChildToContainer,K0=e.commitTextUpdate,ox=e.commitMount,Dm=e.commitUpdate,Lm=e.insertBefore,Om=e.insertInContainerBefore,Ps=e.removeChild,sa=e.removeChildFromContainer,uh=e.resetTextContent,fh=e.hideInstance,Nd=e.hideTextInstance,Nm=e.unhideInstance,Il=e.unhideTextInstance,Ud=e.clearContainer,Um=e.cloneInstance,Id=e.createContainerChildSet,Im=e.appendChildToContainerChildSet,Q0=e.finalizeContainerChildren,Pm=e.replaceContainerChildren,zm=e.cloneHiddenInstance,Bm=e.cloneHiddenTextInstance,Pd=e.isSuspenseInstancePending,hh=e.isSuspenseInstanceFallback,J0=e.getSuspenseInstanceFallbackErrorDetails,lx=e.registerSuspenseInstanceRetry,$0=e.canHydrateFormStateMarker,ev=e.isFormStateMarkerMatching,Fm=e.getNextHydratableSibling,zd=e.getFirstHydratableChild,tv=e.getFirstHydratableChildWithinContainer,nv=e.getFirstHydratableChildWithinSuspenseInstance,iv=e.canHydrateInstance,av=e.canHydrateTextInstance,sv=e.canHydrateSuspenseInstance,cx=e.hydrateInstance,rv=e.hydrateTextInstance,rf=e.hydrateSuspenseInstance,ov=e.getNextHydratableInstanceAfterSuspenseInstance,Bd=e.commitHydratedContainer,Fd=e.commitHydratedSuspenseInstance,lv=e.clearSuspenseBoundary,km=e.clearSuspenseBoundaryFromContainer,cv=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var uv=e.validateHydratableInstance,fv=e.validateHydratableTextInstance,br=e.supportsResources,Vm=e.isHostHoistableType,kd=e.getHoistableRoot,Vd=e.getResource,Hm=e.acquireResource,Gm=e.releaseResource,jm=e.hydrateHoistable,Wm=e.mountHoistable,qm=e.unmountHoistable,ux=e.createHoistableInstance,Xm=e.prepareToCommitHoistables,hv=e.mayResourceSuspendCommit,Ym=e.preloadResource,Zm=e.suspendResource,as=e.supportsSingletons,Km=e.resolveSingletonInstance,fx=e.clearSingleton,hx=e.acquireSingletonInstance,dv=e.releaseSingletonInstance,of=e.isHostSingletonType,dh=[],Pl=-1,uu={},qs=Math.clz32?Math.clz32:I,ph=Math.log,pv=Math.LN2,lf=128,mh=4194304,cf=ns.unstable_scheduleCallback,gh=ns.unstable_cancelCallback,mv=ns.unstable_shouldYield,gv=ns.unstable_requestPaint,ss=ns.unstable_now,Qm=ns.unstable_ImmediatePriority,vv=ns.unstable_UserBlockingPriority,Hd=ns.unstable_NormalPriority,Gd=ns.unstable_IdlePriority,yv=ns.log,Jm=ns.unstable_setDisableYieldValue,uf=null,Xs=null,Tr=typeof Object.is=="function"?Object.is:te,jd=new WeakMap,zi=[],Ji=0,vh=null,yh=0,Mr=[],Ar=0,Lo=null,el=1,Yr="",Ya=C(null),_h=C(null),Oo=C(null),ff=C(null),_s=null,rs=null,ei=!1,Er=null,Zr=!1,xh=Error(a(519)),wr=[],Tc=0,hf=0,df=null,fu=null,Sh=!1,bh=!1,No=!1,Mc=0,Th=null,Wd=0,Ys=0,Ac=null,zl=!1,pf=!1,Mh=Object.prototype.hasOwnProperty,xi=Error(a(460)),$m=Error(a(474)),qd={then:function(){}},hu=null,tl=null,Kr=0,Ec=Bn(!0),eg=Bn(!1),nl=C(null),Cr=C(0),Rr=C(null),Qr=null,Ma=C(0),il=0,Rn=null,ri=null,ra=null,Jr=!1,Bi=!1,Bl=!1,Ah=0,$i=0,mf=null,_v=0,Xd=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},ti={readContext:aa,use:Xt,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useLayoutEffect:cn,useInsertionEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useSyncExternalStore:cn,useId:cn};ti.useCacheRefresh=cn,ti.useMemoCache=cn,ti.useHostTransitionStatus=cn,ti.useFormState=cn,ti.useActionState=cn,ti.useOptimistic=cn;var Aa={readContext:aa,use:Xt,useCallback:function(h,p){return yi().memoizedState=[h,p===void 0?null:p],h},useContext:aa,useEffect:Es,useImperativeHandle:function(h,p,S){S=S!=null?S.concat([h]):null,Ei(4194308,4,hs.bind(null,p,h),S)},useLayoutEffect:function(h,p){return Ei(4194308,4,h,p)},useInsertionEffect:function(h,p){Ei(4,2,h,p)},useMemo:function(h,p){var S=yi();p=p===void 0?null:p;var w=h();if(Bl){K(!0);try{h()}finally{K(!1)}}return S.memoizedState=[w,p],w},useReducer:function(h,p,S){var w=yi();if(S!==void 0){var U=S(p);if(Bl){K(!0);try{S(p)}finally{K(!1)}}}else U=p;return w.memoizedState=w.baseState=U,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:U},w.queue=h,h=h.dispatch=Rs.bind(null,Rn,h),[w.memoizedState,h]},useRef:function(h){var p=yi();return h={current:h},p.memoizedState=h},useState:function(h){h=Vt(h);var p=h.queue,S=hr.bind(null,Rn,p);return p.dispatch=S,[h.memoizedState,S]},useDebugValue:Gs,useDeferredValue:function(h,p){var S=yi();return on(S,h,p)},useTransition:function(){var h=Vt(!1);return h=Gn.bind(null,Rn,h.queue,!0,!1),yi().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,p,S){var w=Rn,U=yi();if(ei){if(S===void 0)throw Error(a(407));S=S()}else{if(S=p(),Pn===null)throw Error(a(349));(Nn&60)!==0||Ut(w,p,S)}U.memoizedState=S;var k={value:S,getSnapshot:p};return U.queue=k,Es(Pt.bind(null,w,k,h),[h]),w.flags|=2048,Qn(9,Dt.bind(null,w,k,S,p),{destroy:void 0},null),S},useId:function(){var h=yi(),p=Pn.identifierPrefix;if(ei){var S=Yr,w=el;S=(w&~(1<<32-qs(w)-1)).toString(32)+S,p=":"+p+"R"+S,S=Ah++,0<S&&(p+="H"+S.toString(32)),p+=":"}else S=_v++,p=":"+p+"r"+S.toString(32)+":";return h.memoizedState=p},useCacheRefresh:function(){return yi().memoizedState=Ja.bind(null,Rn)}};Aa.useMemoCache=ie,Aa.useHostTransitionStatus=Cs,Aa.useFormState=qi,Aa.useActionState=qi,Aa.useOptimistic=function(h){var p=yi();p.memoizedState=p.baseState=h;var S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=S,p=Ds.bind(null,Rn,!0,S),S.dispatch=p,[h,p]};var xs={readContext:aa,use:Xt,useCallback:uo,useContext:aa,useEffect:ki,useImperativeHandle:Xi,useInsertionEffect:Ho,useLayoutEffect:co,useMemo:ws,useReducer:Xe,useRef:ci,useState:function(){return Xe(Re)},useDebugValue:Gs,useDeferredValue:function(h,p){var S=Zn();return Fa(S,ri.memoizedState,h,p)},useTransition:function(){var h=Xe(Re)[0],p=Zn().memoizedState;return[typeof h=="boolean"?h:va(h),p]},useSyncExternalStore:Et,useId:Qa};xs.useCacheRefresh=_a,xs.useMemoCache=ie,xs.useHostTransitionStatus=Cs,xs.useFormState=ya,xs.useActionState=ya,xs.useOptimistic=function(h,p){var S=Zn();return Jt(S,ri,h,p)};var wc={readContext:aa,use:Xt,useCallback:uo,useContext:aa,useEffect:ki,useImperativeHandle:Xi,useInsertionEffect:Ho,useLayoutEffect:co,useMemo:ws,useReducer:Ue,useRef:ci,useState:function(){return Ue(Re)},useDebugValue:Gs,useDeferredValue:function(h,p){var S=Zn();return ri===null?on(S,h,p):Fa(S,ri.memoizedState,h,p)},useTransition:function(){var h=Ue(Re)[0],p=Zn().memoizedState;return[typeof h=="boolean"?h:va(h),p]},useSyncExternalStore:Et,useId:Qa};wc.useCacheRefresh=_a,wc.useMemoCache=ie,wc.useHostTransitionStatus=Cs,wc.useFormState=Tn,wc.useActionState=Tn,wc.useOptimistic=function(h,p){var S=Zn();return ri!==null?Jt(S,ri,h,p):(S.baseState=h,[h,S.queue.dispatch])};var Yd={isMounted:function(h){return(h=h._reactInternals)?y(h)===h:!1},enqueueSetState:function(h,p,S){h=h._reactInternals;var w=ja(),U=Ge(w);U.payload=p,S!=null&&(U.callback=S),p=Qe(h,U,w),p!==null&&(Na(p,h,w),st(p,h,w))},enqueueReplaceState:function(h,p,S){h=h._reactInternals;var w=ja(),U=Ge(w);U.tag=1,U.payload=p,S!=null&&(U.callback=S),p=Qe(h,U,w),p!==null&&(Na(p,h,w),st(p,h,w))},enqueueForceUpdate:function(h,p){h=h._reactInternals;var S=ja(),w=Ge(S);w.tag=2,p!=null&&(w.callback=p),p=Qe(h,w,S),p!==null&&(Na(p,h,S),st(p,h,S))}},tg=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(p))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)},xv=Error(a(461)),oa=!1,Ss={dehydrated:null,treeContext:null,retryLane:0},Zs=C(null),Cc=null,ea=null,Sv=typeof AbortController<"u"?AbortController:function(){var h=[],p=this.signal={aborted:!1,addEventListener:function(S,w){h.push(w)}};this.abort=function(){p.aborted=!0,h.forEach(function(S){return S()})}},Fl=ns.unstable_scheduleCallback,du=ns.unstable_NormalPriority,di={$$typeof:Zo,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Zd=un.S;un.S=function(h,p){typeof p=="object"&&p!==null&&typeof p.then=="function"&&Ce(h,p),Zd!==null&&Zd(h,p)};var kl=C(null),Ia=!1,ji=!1,Rc=!1,gf=typeof WeakSet=="function"?WeakSet:Set,ta=null,pu=!1,la=null,Ks=!1,zs=null,mu=8192,Kd={getCacheForType:function(h){var p=aa(di),S=p.data.get(h);return S===void 0&&(S=h(),p.data.set(h,S)),S}},Eh=0,Qd=1,Jd=2,jn=3,pi=4;if(typeof Symbol=="function"&&Symbol.for){var Dn=Symbol.for;Eh=Dn("selector.component"),Qd=Dn("selector.has_pseudo_class"),Jd=Dn("selector.role"),jn=Dn("selector.test_id"),pi=Dn("selector.text")}var kn=typeof WeakMap=="function"?WeakMap:Map,sn=0,Pn=null,Sn=null,Nn=0,Ti=0,ca=null,mi=!1,Dr=!1,Vl=!1,Uo=0,Wn=0,Lr=0,Io=0,bs=0,Qs=0,Hl=0,vf=null,Or=null,yf=!1,al=0,Wi=1/0,Po=null,Nr=null,$r=!1,Gl=null,gu=0,$d=0,vu=null,yu=0,Bs=null;return an.attemptContinuousHydration=function(h){if(h.tag===13){var p=rt(h,67108864);p!==null&&Na(p,h,67108864),mm(h,67108864)}},an.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var p=ja(),S=rt(h,p);S!==null&&Na(S,h,p),mm(h,p)}},an.attemptSynchronousHydration=function(h){switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var p=z(h.pendingLanes);if(p!==0){for(h.pendingLanes|=2,h.entangledLanes|=2;p;){var S=1<<31-qs(p);h.entanglements[1]|=S,p&=~S}Ze(h),(sn&6)===0&&(Wi=ss()+500,Le(0))}}break;case 13:p=rt(h,2),p!==null&&Na(p,h,2),u(),mm(h,2)}},an.batchedUpdates=function(h,p){return h(p)},an.createComponentSelector=function(h){return{$$typeof:Eh,value:h}},an.createContainer=function(h,p,S,w,U,k,le,Te,ze,pt){return Xa(h,p,!1,null,S,w,k,le,Te,ze,pt,null)},an.createHasPseudoClassSelector=function(h){return{$$typeof:Qd,value:h}},an.createHydrationContainer=function(h,p,S,w,U,k,le,Te,ze,pt,wt,Bt,Gt){return h=Xa(S,w,!0,h,U,k,Te,ze,pt,wt,Bt,Gt),h.context=ih(null),S=h.current,w=ja(),U=Ge(w),U.callback=p??null,Qe(S,U,w),h.current.lanes=w,Q(h,w),Ze(h),h},an.createPortal=function(h,p,S){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ro,key:w==null?null:""+w,children:h,containerInfo:p,implementation:S}},an.createRoleSelector=function(h){return{$$typeof:Jd,value:h}},an.createTestNameSelector=function(h){return{$$typeof:jn,value:h}},an.createTextSelector=function(h){return{$$typeof:pi,value:h}},an.defaultOnCaughtError=function(h){console.error(h)},an.defaultOnRecoverableError=function(h){tg(h)},an.defaultOnUncaughtError=function(h){tg(h)},an.deferredUpdates=function(h){var p=un.T,S=Ua();try{return ys(32),un.T=null,h()}finally{ys(S),un.T=p}},an.discreteUpdates=function(h,p,S,w,U){var k=un.T,le=Ua();try{return ys(2),un.T=null,h(p,S,w,U)}finally{ys(le),un.T=k,sn===0&&(Wi=ss()+500)}},an.findAllNodes=Ga,an.findBoundingRects=function(h,p){if(!Jo)throw Error(a(363));p=Ga(h,p),h=[];for(var S=0;S<p.length;S++)h.push(Od(p[S]));for(p=h.length-1;0<p;p--){S=h[p];for(var w=S.x,U=w+S.width,k=S.y,le=k+S.height,Te=p-1;0<=Te;Te--)if(p!==Te){var ze=h[Te],pt=ze.x,wt=pt+ze.width,Bt=ze.y,Gt=Bt+ze.height;if(w>=pt&&k>=Bt&&U<=wt&&le<=Gt){h.splice(p,1);break}else if(w!==pt||S.width!==ze.width||Gt<k||Bt>le){if(!(k!==Bt||S.height!==ze.height||wt<w||pt>U)){pt>w&&(ze.width+=pt-w,ze.x=w),wt<U&&(ze.width=U-pt),h.splice(p,1);break}}else{Bt>k&&(ze.height+=Bt-k,ze.y=k),Gt<le&&(ze.height=le-Bt),h.splice(p,1);break}}}return h},an.findHostInstance=pm,an.findHostInstanceWithNoPortals=function(h){return h=b(h),h=h!==null?R(h):null,h===null?null:sf(h.stateNode)},an.findHostInstanceWithWarning=function(h){return pm(h)},an.flushPassiveEffects=ba,an.flushSyncFromReconciler=function(h){var p=sn;sn|=1;var S=un.T,w=Ua();try{if(ys(2),un.T=null,h)return h()}finally{ys(w),un.T=S,sn=p,(sn&6)===0&&Le(0)}},an.flushSyncWork=u,an.focusWithin=function(h,p){if(!Jo)throw Error(a(363));for(h=Yo(h),p=Md(h,p),p=Array.from(p),h=0;h<p.length;){var S=p[h++],w=S.tag;if(!$o(S)){if((w===5||w===26||w===27)&&Qi(S.stateNode))return!0;for(S=S.child;S!==null;)p.push(S),S=S.sibling}}return!1},an.getFindAllNodesFailureDescription=function(h,p){if(!Jo)throw Error(a(363));var S=0,w=[];h=[Yo(h),0];for(var U=0;U<h.length;){var k=h[U++],le=k.tag,Te=h[U++],ze=p[Te];if((le!==5&&le!==26&&le!==27||!$o(k))&&(Cl(k,ze)&&(w.push(Eo(ze)),Te++,Te>S&&(S=Te)),Te<p.length))for(k=k.child;k!==null;)h.push(k,Te),k=k.sibling}if(S<p.length){for(h=[];S<p.length;S++)h.push(Eo(p[S]));return`findAllNodes was able to match part of the selector:
  `+(w.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},an.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 27:case 5:return sf(h.child.stateNode);default:return h.child.stateNode}},an.injectIntoDevTools=function(){var h={bundleType:0,version:Cd,rendererPackageName:rh,currentDispatcherRef:un,findFiberByHostInstance:Am,reconcilerVersion:"19.0.0"};if(oh!==null&&(h.rendererConfig=oh),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var p=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(p.isDisabled||!p.supportsFiber)h=!0;else{try{uf=p.inject(h),Xs=p}catch{}h=!!p.checkDCE}}return h},an.isAlreadyRendering=function(){return!1},an.observeVisibleRects=function(h,p,S,w){if(!Jo)throw Error(a(363));h=Ga(h,p);var U=Cm(h,S,w).disconnect;return{disconnect:function(){U()}}},an.shouldError=function(){return null},an.shouldSuspend=function(){return!1},an.startHostTransition=function(h,p,S,w){if(h.tag!==5)throw Error(a(476));var U=fo(h).queue;Gn(h,U,p,Ws,S===null?n:function(){var k=fo(h).next.queue;return ui(h,k,{},ja()),S(w)})},an.updateContainer=function(h,p,S,w){var U=p.current,k=ja();return G0(U,k,h,p,S,w),k},an.updateContainerSync=function(h,p,S,w){return p.tag===0&&ba(),G0(p.current,2,h,p,S,w),2},an},i.exports.default=i.exports,Object.defineProperty(i.exports,"__esModule",{value:!0})})(GS)),GS.exports}var $E;function d8(){return $E||($E=1,HS.exports=h8()),HS.exports}var p8=d8();const m8=A0(p8);var qS={exports:{}},XS={};var e3;function g8(){return e3||(e3=1,(function(i){function e(q,K){var te=q.length;q.push(K);e:for(;0<te;){var de=te-1>>>1,ce=q[de];if(0<a(ce,K))q[de]=K,q[te]=ce,te=de;else break e}}function t(q){return q.length===0?null:q[0]}function n(q){if(q.length===0)return null;var K=q[0],te=q.pop();if(te!==K){q[0]=te;e:for(var de=0,ce=q.length,G=ce>>>1;de<G;){var ne=2*(de+1)-1,fe=q[ne],me=ne+1,xe=q[me];if(0>a(fe,te))me<ce&&0>a(xe,fe)?(q[de]=xe,q[me]=te,de=me):(q[de]=fe,q[ne]=te,de=ne);else if(me<ce&&0>a(xe,te))q[de]=xe,q[me]=te,de=me;else break e}}return K}function a(q,K){var te=q.sortIndex-K.sortIndex;return te!==0?te:q.id-K.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();i.unstable_now=function(){return o.now()-c}}var f=[],d=[],g=1,y=null,x=3,b=!1,M=!1,R=!1,C=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function I(q){for(var K=t(d);K!==null;){if(K.callback===null)n(d);else if(K.startTime<=q)n(d),K.sortIndex=K.expirationTime,e(f,K);else break;K=t(d)}}function z(q){if(R=!1,I(q),!M)if(t(f)!==null)M=!0,re();else{var K=t(d);K!==null&&ve(z,K.startTime-q)}}var F=!1,V=-1,W=5,Z=-1;function B(){return!(i.unstable_now()-Z<W)}function H(){if(F){var q=i.unstable_now();Z=q;var K=!0;try{e:{M=!1,R&&(R=!1,E(V),V=-1),b=!0;var te=x;try{t:{for(I(q),y=t(f);y!==null&&!(y.expirationTime>q&&B());){var de=y.callback;if(typeof de=="function"){y.callback=null,x=y.priorityLevel;var ce=de(y.expirationTime<=q);if(q=i.unstable_now(),typeof ce=="function"){y.callback=ce,I(q),K=!0;break t}y===t(f)&&n(f),I(q)}else n(f);y=t(f)}if(y!==null)K=!0;else{var G=t(d);G!==null&&ve(z,G.startTime-q),K=!1}}break e}finally{y=null,x=te,b=!1}K=void 0}}finally{K?Q():F=!1}}}var Q;if(typeof N=="function")Q=function(){N(H)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,oe=J.port2;J.port1.onmessage=H,Q=function(){oe.postMessage(null)}}else Q=function(){C(H,0)};function re(){F||(F=!0,Q())}function ve(q,K){V=C(function(){q(i.unstable_now())},K)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(q){q.callback=null},i.unstable_continueExecution=function(){M||b||(M=!0,re())},i.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<q?Math.floor(1e3/q):5},i.unstable_getCurrentPriorityLevel=function(){return x},i.unstable_getFirstCallbackNode=function(){return t(f)},i.unstable_next=function(q){switch(x){case 1:case 2:case 3:var K=3;break;default:K=x}var te=x;x=K;try{return q()}finally{x=te}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(q,K){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var te=x;x=q;try{return K()}finally{x=te}},i.unstable_scheduleCallback=function(q,K,te){var de=i.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?de+te:de):te=de,q){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=te+ce,q={id:g++,callback:K,priorityLevel:q,startTime:te,expirationTime:ce,sortIndex:-1},te>de?(q.sortIndex=te,e(d,q),t(f)===null&&q===t(d)&&(R?(E(V),V=-1):R=!0,ve(z,te-de))):(q.sortIndex=ce,e(f,q),M||b||(M=!0,re())),q},i.unstable_shouldYield=B,i.unstable_wrapCallback=function(q){var K=x;return function(){var te=x;x=K;try{return q.apply(this,arguments)}finally{x=te}}}})(XS)),XS}var t3;function v8(){return t3||(t3=1,qS.exports=g8()),qS.exports}var n3=v8();function xT(i,e,t){if(!i)return;if(t(i)===!0)return i;let n=e?i.return:i.child;for(;n;){const a=xT(n,e,t);if(a)return a;n=e?null:n.sibling}}function JR(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const ST=JR(ue.createContext(null));class $R extends ue.Component{render(){return ue.createElement(ST.Provider,{value:this._reactInternals},this.props.children)}}function eD(){const i=ue.useContext(ST);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=ue.useId();return ue.useMemo(()=>{for(const t of[i,i?.alternate]){if(!t)continue;const n=xT(t,!1,a=>{let s=a.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(n)return n}},[i,e])}const y8=Symbol.for("react.context"),_8=i=>i!==null&&typeof i=="object"&&"$$typeof"in i&&i.$$typeof===y8;function x8(){const i=eD(),[e]=ue.useState(()=>new Map);e.clear();let t=i;for(;t;){const n=t.type;_8(n)&&n!==ST&&!e.has(n)&&e.set(n,ue.use(JR(n))),t=t.return}return e}function S8(){const i=x8();return ue.useMemo(()=>Array.from(i.keys()).reduce((e,t)=>n=>ue.createElement(e,null,ue.createElement(t.Provider,{...n,value:i.get(t)})),e=>ue.createElement($R,{...e})),[i])}function tD(i){let e=i.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const nD=i=>i&&i.isOrthographicCamera,b8=i=>i&&i.hasOwnProperty("current"),T8=i=>i!=null&&(typeof i=="string"||typeof i=="number"||i.isColor),P0=((i,e)=>typeof window<"u"&&(((i=window.document)==null?void 0:i.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?ue.useLayoutEffect:ue.useEffect;function iD(i){const e=ue.useRef(i);return P0(()=>{e.current=i},[i]),e}function M8(){const i=eD(),e=S8();return ue.useMemo(()=>({children:t})=>{const a=!!xT(i,!0,s=>s.type===ue.StrictMode)?ue.StrictMode:ue.Fragment;return O.jsx(a,{children:O.jsx(e,{children:t})})},[i,e])}function A8({set:i}){return P0(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}const E8=(i=>(i=class extends ue.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},i.getDerivedStateFromError=()=>({error:!0}),i))();function aD(i){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],t),i[1]):i}function wp(i){var e;return(e=i.__r3f)==null?void 0:e.root.getState()}const ua={obj:i=>i===Object(i)&&!ua.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,nul:i=>i===null,arr:i=>Array.isArray(i),equ(i,e,{arrays:t="shallow",objects:n="reference",strict:a=!0}={}){if(typeof i!=typeof e||!!i!=!!e)return!1;if(ua.str(i)||ua.num(i)||ua.boo(i))return i===e;const s=ua.obj(i);if(s&&n==="reference")return i===e;const o=ua.arr(i);if(o&&t==="reference")return i===e;if((o||s)&&i===e)return!0;let c;for(c in i)if(!(c in e))return!1;if(s&&t==="shallow"&&n==="shallow"){for(c in a?e:i)if(!ua.equ(i[c],e[c],{strict:a,objects:"reference"}))return!1}else for(c in a?e:i)if(i[c]!==e[c])return!1;if(ua.und(c)){if(o&&i.length===0&&e.length===0||s&&Object.keys(i).length===0&&Object.keys(e).length===0)return!0;if(i!==e)return!1}return!0}};function w8(i){i.type!=="Scene"&&(i.dispose==null||i.dispose());for(const e in i){const t=i[e];t?.type!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const sD=["children","key","ref"];function C8(i){const e={};for(const t in i)sD.includes(t)||(e[t]=i[t]);return e}function K_(i,e,t,n){const a=i;let s=a?.__r3f;return s||(s={root:e,type:t,parent:null,children:[],props:C8(n),object:a,eventCount:0,handlers:{},isHidden:!1},a&&(a.__r3f=s)),s}function y0(i,e){if(!e.includes("-"))return{root:i,key:e,target:i[e]};if(e in i)return{root:i,key:e,target:i[e]};let t=i;const n=e.split("-");for(const a of n){if(typeof t!="object"||t===null){if(t!==void 0){const s=n.slice(n.indexOf(a)).join("-");return{root:t,key:s,target:void 0}}return{root:i,key:e,target:void 0}}e=a,i=t,t=t[e]}return{root:i,key:e,target:t}}const i3=/-\d+$/;function Q_(i,e){if(ua.str(e.props.attach)){if(i3.test(e.props.attach)){const a=e.props.attach.replace(i3,""),{root:s,key:o}=y0(i.object,a);Array.isArray(s[o])||(s[o]=[])}const{root:t,key:n}=y0(i.object,e.props.attach);e.previousAttach=t[n],t[n]=e.object}else ua.fun(e.props.attach)&&(e.previousAttach=e.props.attach(i.object,e.object))}function J_(i,e){if(ua.str(e.props.attach)){const{root:t,key:n}=y0(i.object,e.props.attach),a=e.previousAttach;a===void 0?delete t[n]:t[n]=a}else e.previousAttach==null||e.previousAttach(i.object,e.object);delete e.previousAttach}const Gb=[...sD,"args","dispose","attach","object","onUpdate","dispose"],a3=new Map;function R8(i){let e=a3.get(i.constructor);try{e||(e=new i.constructor,a3.set(i.constructor,e))}catch{}return e}function D8(i,e){const t={};for(const n in e)if(!Gb.includes(n)&&!ua.equ(e[n],i.props[n])){t[n]=e[n];for(const a in e)a.startsWith(`${n}-`)&&(t[a]=e[a])}for(const n in i.props){if(Gb.includes(n)||e.hasOwnProperty(n))continue;const{root:a,key:s}=y0(i.object,n);if(a.constructor&&a.constructor.length===0){const o=R8(a);ua.und(o)||(t[s]=o[s])}else t[s]=0}return t}const L8=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],O8=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function If(i,e){var t;const n=i.__r3f,a=n&&tD(n).getState(),s=n?.eventCount;for(const c in e){let f=e[c];if(Gb.includes(c))continue;if(n&&O8.test(c)){typeof f=="function"?n.handlers[c]=f:delete n.handlers[c],n.eventCount=Object.keys(n.handlers).length;continue}if(f===void 0)continue;let{root:d,key:g,target:y}=y0(i,c);if(y===void 0&&(typeof d!="object"||d===null))throw Error(`R3F: Cannot set "${c}". Ensure it is an object before setting "${g}".`);if(y instanceof Zp&&f instanceof Zp)y.mask=f.mask;else if(y instanceof Ht&&T8(f))y.set(f);else if(y!==null&&typeof y=="object"&&typeof y.set=="function"&&typeof y.copy=="function"&&f!=null&&f.constructor&&y.constructor===f.constructor)y.copy(f);else if(y!==null&&typeof y=="object"&&typeof y.set=="function"&&Array.isArray(f))typeof y.fromArray=="function"?y.fromArray(f):y.set(...f);else if(y!==null&&typeof y=="object"&&typeof y.set=="function"&&typeof f=="number")typeof y.setScalar=="function"?y.setScalar(f):y.set(f);else{var o;d[g]=f,a&&!a.linear&&L8.includes(g)&&(o=d[g])!=null&&o.isTexture&&d[g].format===sr&&d[g].type===Br&&(d[g].colorSpace=ir)}}if(n!=null&&n.parent&&a!=null&&a.internal&&(t=n.object)!=null&&t.isObject3D&&s!==n.eventCount){const c=n.object,f=a.internal.interaction.indexOf(c);f>-1&&a.internal.interaction.splice(f,1),n.eventCount&&c.raycast!==null&&a.internal.interaction.push(c)}return n&&n.props.attach===void 0&&(n.object.isBufferGeometry?n.props.attach="geometry":n.object.isMaterial&&(n.props.attach="material")),n&&om(n),i}function om(i){var e;if(!i.parent)return;i.props.onUpdate==null||i.props.onUpdate(i.object);const t=(e=i.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function N8(i,e){i.manual||(nD(i)?(i.left=e.width/-2,i.right=e.width/2,i.top=e.height/2,i.bottom=e.height/-2):i.aspect=e.width/e.height,i.updateProjectionMatrix())}const no=i=>i?.isObject3D;function Oy(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function rD(i,e,t,n){const a=t.get(e);a&&(t.delete(e),t.size===0&&(i.delete(n),a.target.releasePointerCapture(n)))}function U8(i,e){const{internal:t}=i.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,a)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(a)}),t.capturedMap.forEach((n,a)=>{rD(t.capturedMap,e,n,a)})}function I8(i){function e(f){const{internal:d}=i.getState(),g=f.offsetX-d.initialClick[0],y=f.offsetY-d.initialClick[1];return Math.round(Math.sqrt(g*g+y*y))}function t(f){return f.filter(d=>["Move","Over","Enter","Out","Leave"].some(g=>{var y;return(y=d.__r3f)==null?void 0:y.handlers["onPointer"+g]}))}function n(f,d){const g=i.getState(),y=new Set,x=[],b=d?d(g.internal.interaction):g.internal.interaction;for(let E=0;E<b.length;E++){const N=wp(b[E]);N&&(N.raycaster.camera=void 0)}g.previousRoot||g.events.compute==null||g.events.compute(f,g);function M(E){const N=wp(E);if(!N||!N.events.enabled||N.raycaster.camera===null)return[];if(N.raycaster.camera===void 0){var I;N.events.compute==null||N.events.compute(f,N,(I=N.previousRoot)==null?void 0:I.getState()),N.raycaster.camera===void 0&&(N.raycaster.camera=null)}return N.raycaster.camera?N.raycaster.intersectObject(E,!0):[]}let R=b.flatMap(M).sort((E,N)=>{const I=wp(E.object),z=wp(N.object);return!I||!z?E.distance-N.distance:z.events.priority-I.events.priority||E.distance-N.distance}).filter(E=>{const N=Oy(E);return y.has(N)?!1:(y.add(N),!0)});g.events.filter&&(R=g.events.filter(R,g));for(const E of R){let N=E.object;for(;N;){var C;(C=N.__r3f)!=null&&C.eventCount&&x.push({...E,eventObject:N}),N=N.parent}}if("pointerId"in f&&g.internal.capturedMap.has(f.pointerId))for(let E of g.internal.capturedMap.get(f.pointerId).values())y.has(Oy(E.intersection))||x.push(E.intersection);return x}function a(f,d,g,y){if(f.length){const x={stopped:!1};for(const b of f){let M=wp(b.object);if(M||b.object.traverseAncestors(R=>{const C=wp(R);if(C)return M=C,!1}),M){const{raycaster:R,pointer:C,camera:E,internal:N}=M,I=new pe(C.x,C.y,0).unproject(E),z=B=>{var H,Q;return(H=(Q=N.capturedMap.get(B))==null?void 0:Q.has(b.eventObject))!=null?H:!1},F=B=>{const H={intersection:b,target:d.target};N.capturedMap.has(B)?N.capturedMap.get(B).set(b.eventObject,H):N.capturedMap.set(B,new Map([[b.eventObject,H]])),d.target.setPointerCapture(B)},V=B=>{const H=N.capturedMap.get(B);H&&rD(N.capturedMap,b.eventObject,H,B)};let W={};for(let B in d){let H=d[B];typeof H!="function"&&(W[B]=H)}let Z={...b,...W,pointer:C,intersections:f,stopped:x.stopped,delta:g,unprojectedPoint:I,ray:R.ray,camera:E,stopPropagation(){const B="pointerId"in d&&N.capturedMap.get(d.pointerId);if((!B||B.has(b.eventObject))&&(Z.stopped=x.stopped=!0,N.hovered.size&&Array.from(N.hovered.values()).find(H=>H.eventObject===b.eventObject))){const H=f.slice(0,f.indexOf(b));s([...H,b])}},target:{hasPointerCapture:z,setPointerCapture:F,releasePointerCapture:V},currentTarget:{hasPointerCapture:z,setPointerCapture:F,releasePointerCapture:V},nativeEvent:d};if(y(Z),x.stopped===!0)break}}}return f}function s(f){const{internal:d}=i.getState();for(const g of d.hovered.values())if(!f.length||!f.find(y=>y.object===g.object&&y.index===g.index&&y.instanceId===g.instanceId)){const x=g.eventObject.__r3f;if(d.hovered.delete(Oy(g)),x!=null&&x.eventCount){const b=x.handlers,M={...g,intersections:f};b.onPointerOut==null||b.onPointerOut(M),b.onPointerLeave==null||b.onPointerLeave(M)}}}function o(f,d){for(let g=0;g<d.length;g++){const y=d[g].__r3f;y==null||y.handlers.onPointerMissed==null||y.handlers.onPointerMissed(f)}}function c(f){switch(f){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return d=>{const{internal:g}=i.getState();"pointerId"in d&&g.capturedMap.has(d.pointerId)&&requestAnimationFrame(()=>{g.capturedMap.has(d.pointerId)&&(g.capturedMap.delete(d.pointerId),s([]))})}}return function(g){const{onPointerMissed:y,internal:x}=i.getState();x.lastEvent.current=g;const b=f==="onPointerMove",M=f==="onClick"||f==="onContextMenu"||f==="onDoubleClick",C=n(g,b?t:void 0),E=M?e(g):0;f==="onPointerDown"&&(x.initialClick=[g.offsetX,g.offsetY],x.initialHits=C.map(I=>I.eventObject)),M&&!C.length&&E<=2&&(o(g,x.interaction),y&&y(g)),b&&s(C);function N(I){const z=I.eventObject,F=z.__r3f;if(!(F!=null&&F.eventCount))return;const V=F.handlers;if(b){if(V.onPointerOver||V.onPointerEnter||V.onPointerOut||V.onPointerLeave){const W=Oy(I),Z=x.hovered.get(W);Z?Z.stopped&&I.stopPropagation():(x.hovered.set(W,I),V.onPointerOver==null||V.onPointerOver(I),V.onPointerEnter==null||V.onPointerEnter(I))}V.onPointerMove==null||V.onPointerMove(I)}else{const W=V[f];W?(!M||x.initialHits.includes(z))&&(o(g,x.interaction.filter(Z=>!x.initialHits.includes(Z))),W(I)):M&&x.initialHits.includes(z)&&o(g,x.interaction.filter(Z=>!x.initialHits.includes(Z)))}}a(C,g,E,N)}}return{handlePointer:c}}const s3=i=>!!(i!=null&&i.render),oD=ue.createContext(null),P8=(i,e)=>{const t=s8((c,f)=>{const d=new pe,g=new pe,y=new pe;function x(E=f().camera,N=g,I=f().size){const{width:z,height:F,top:V,left:W}=I,Z=z/F;N.isVector3?y.copy(N):y.set(...N);const B=E.getWorldPosition(d).distanceTo(y);if(nD(E))return{width:z/E.zoom,height:F/E.zoom,top:V,left:W,factor:1,distance:B,aspect:Z};{const H=E.fov*Math.PI/180,Q=2*Math.tan(H/2)*B,J=Q*(z/F);return{width:J,height:Q,top:V,left:W,factor:z/J,distance:B,aspect:Z}}}let b;const M=E=>c(N=>({performance:{...N.performance,current:E}})),R=new dt;return{set:c,get:f,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(E=1)=>i(f(),E),advance:(E,N)=>e(E,N,f()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new mT,pointer:R,mouse:R,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const E=f();b&&clearTimeout(b),E.performance.current!==E.performance.min&&M(E.performance.min),b=setTimeout(()=>M(f().performance.max),E.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:x},setEvents:E=>c(N=>({...N,events:{...N.events,...E}})),setSize:(E,N,I=0,z=0)=>{const F=f().camera,V={width:E,height:N,top:I,left:z};c(W=>({size:V,viewport:{...W.viewport,...x(F,g,V)}}))},setDpr:E=>c(N=>{const I=aD(E);return{viewport:{...N.viewport,dpr:I,initialDpr:N.viewport.initialDpr||I}}}),setFrameloop:(E="always")=>{const N=f().clock;N.stop(),N.elapsedTime=0,E!=="never"&&(N.start(),N.elapsedTime=0),c(()=>({frameloop:E}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:ue.createRef(),active:!1,frames:0,priority:0,subscribe:(E,N,I)=>{const z=f().internal;return z.priority=z.priority+(N>0?1:0),z.subscribers.push({ref:E,priority:N,store:I}),z.subscribers=z.subscribers.sort((F,V)=>F.priority-V.priority),()=>{const F=f().internal;F!=null&&F.subscribers&&(F.priority=F.priority-(N>0?1:0),F.subscribers=F.subscribers.filter(V=>V.ref!==E))}}}}}),n=t.getState();let a=n.size,s=n.viewport.dpr,o=n.camera;return t.subscribe(()=>{const{camera:c,size:f,viewport:d,gl:g,set:y}=t.getState();if(f.width!==a.width||f.height!==a.height||d.dpr!==s){a=f,s=d.dpr,N8(c,f),d.dpr>0&&g.setPixelRatio(d.dpr);const x=typeof HTMLCanvasElement<"u"&&g.domElement instanceof HTMLCanvasElement;g.setSize(f.width,f.height,x)}c!==o&&(o=c,y(x=>({viewport:{...x.viewport,...x.viewport.getCurrentViewport(c)}})))}),t.subscribe(c=>i(c)),t};function lD(){const i=ue.useContext(oD);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function Pr(i=t=>t,e){return lD()(i,e)}function K1(i,e=0){const t=lD(),n=t.getState().internal.subscribe,a=iD(i);return P0(()=>n(a,e,t),[e,n,t]),null}var z8={version:"9.4.2"};function B8(i){const e=m8(i);return e.injectIntoDevTools(),e}const cD=0,Jp={},F8=/^three(?=[A-Z])/,Q1=i=>`${i[0].toUpperCase()}${i.slice(1)}`;let k8=0;const V8=i=>typeof i=="function";function H8(i){if(V8(i)){const e=`${k8++}`;return Jp[e]=i,e}else Object.assign(Jp,i)}function uD(i,e){const t=Q1(i),n=Jp[t];if(i!=="primitive"&&!n)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(i==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function G8(i,e,t){var n;return i=Q1(i)in Jp?i:i.replace(F8,""),uD(i,e),i==="primitive"&&(n=e.object)!=null&&n.__r3f&&delete e.object.__r3f,K_(e.object,t,i,e)}function j8(i){if(!i.isHidden){var e;i.props.attach&&(e=i.parent)!=null&&e.object?J_(i.parent,i):no(i.object)&&(i.object.visible=!1),i.isHidden=!0,om(i)}}function fD(i){if(i.isHidden){var e;i.props.attach&&(e=i.parent)!=null&&e.object?Q_(i.parent,i):no(i.object)&&i.props.visible!==!1&&(i.object.visible=!0),i.isHidden=!1,om(i)}}function bT(i,e,t){const n=e.root.getState();if(!(!i.parent&&i.object!==n.scene)){if(!e.object){var a,s;const o=Jp[Q1(e.type)];e.object=(a=e.props.object)!=null?a:new o(...(s=e.props.args)!=null?s:[]),e.object.__r3f=e}if(If(e.object,e.props),e.props.attach)Q_(i,e);else if(no(e.object)&&no(i.object)){const o=i.object.children.indexOf(t?.object);if(t&&o!==-1){const c=i.object.children.indexOf(e.object);if(c!==-1){i.object.children.splice(c,1);const f=c<o?o-1:o;i.object.children.splice(f,0,e.object)}else e.object.parent=i.object,i.object.children.splice(o,0,e.object),e.object.dispatchEvent({type:"added"}),i.object.dispatchEvent({type:"childadded",child:e.object})}else i.object.add(e.object)}for(const o of e.children)bT(e,o);om(e)}}function YS(i,e){e&&(e.parent=i,i.children.push(e),bT(i,e))}function r3(i,e,t){if(!e||!t)return;e.parent=i;const n=i.children.indexOf(t);n!==-1?i.children.splice(n,0,e):i.children.push(e),bT(i,e,t)}function hD(i){if(typeof i.dispose=="function"){const e=()=>{try{i.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():n3.unstable_scheduleCallback(n3.unstable_IdlePriority,e)}}function jb(i,e,t){if(!e)return;e.parent=null;const n=i.children.indexOf(e);n!==-1&&i.children.splice(n,1),e.props.attach?J_(i,e):no(e.object)&&no(i.object)&&(i.object.remove(e.object),U8(tD(e),e.object));const a=e.props.dispose!==null&&t!==!1;for(let s=e.children.length-1;s>=0;s--){const o=e.children[s];jb(e,o,a)}e.children.length=0,delete e.object.__r3f,a&&e.type!=="primitive"&&e.object.type!=="Scene"&&hD(e.object),t===void 0&&om(e)}function W8(i,e){for(const t of[i,i.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const n=t.ref(e);typeof n=="function"&&(t.refCleanup=n)}else t.ref&&(t.ref.current=e)}const Qy=[];function q8(){for(const[t]of Qy){const n=t.parent;if(n){t.props.attach?J_(n,t):no(t.object)&&no(n.object)&&n.object.remove(t.object);for(const a of t.children)a.props.attach?J_(t,a):no(a.object)&&no(t.object)&&t.object.remove(a.object)}t.isHidden&&fD(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&hD(t.object)}for(const[t,n,a]of Qy){t.props=n;const s=t.parent;if(s){var i,e;const o=Jp[Q1(t.type)];t.object=(i=t.props.object)!=null?i:new o(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,W8(a,t.object),If(t.object,t.props),t.props.attach?Q_(s,t):no(t.object)&&no(s.object)&&s.object.add(t.object);for(const c of t.children)c.props.attach?Q_(t,c):no(c.object)&&no(t.object)&&t.object.add(c.object);om(t)}}Qy.length=0}const ZS=()=>{},o3={};let Ny=cD;const X8=0,Y8=4,Wb=B8({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:G8,removeChild:jb,appendChild:YS,appendInitialChild:YS,insertBefore:r3,appendChildToContainer(i,e){const t=i.getState().scene.__r3f;!e||!t||YS(t,e)},removeChildFromContainer(i,e){const t=i.getState().scene.__r3f;!e||!t||jb(t,e)},insertInContainerBefore(i,e,t){const n=i.getState().scene.__r3f;!e||!t||!n||r3(n,e,t)},getRootHostContext:()=>o3,getChildHostContext:()=>o3,commitUpdate(i,e,t,n,a){var s,o,c;uD(e,n);let f=!1;if((i.type==="primitive"&&t.object!==n.object||((s=n.args)==null?void 0:s.length)!==((o=t.args)==null?void 0:o.length)||(c=n.args)!=null&&c.some((g,y)=>{var x;return g!==((x=t.args)==null?void 0:x[y])}))&&(f=!0),f)Qy.push([i,{...n},a]);else{const g=D8(i,n);Object.keys(g).length&&(Object.assign(i.props,g),If(i.object,g))}(a.sibling===null||(a.flags&Y8)===X8)&&q8()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:i=>i?.object,prepareForCommit:()=>null,preparePortalMount:i=>K_(i.getState().scene,i,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:j8,unhideInstance:fD,createTextInstance:ZS,hideTextInstance:ZS,unhideTextInstance:ZS,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:ue.createContext(null),setCurrentUpdatePriority(i){Ny=i},getCurrentUpdatePriority(){return Ny},resolveUpdatePriority(){var i;if(Ny!==cD)return Ny;switch(typeof window<"u"&&((i=window.event)==null?void 0:i.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Xy.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Xy.ContinuousEventPriority;default:return Xy.DefaultEventPriority}},resetFormInstance(){},rendererPackageName:"@react-three/fiber",rendererVersion:z8.version}),dd=new Map,Cp={objects:"shallow",strict:!1};function Z8(i,e){if(!e&&typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:t,height:n,top:a,left:s}=i.parentElement.getBoundingClientRect();return{width:t,height:n,top:a,left:s}}else if(!e&&typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function K8(i){const e=dd.get(i),t=e?.fiber,n=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const a=typeof reportError=="function"?reportError:console.error,s=n||P8(Yb,c3),o=t||Wb.createContainer(s,Xy.ConcurrentRoot,null,!1,null,"",a,a,a,null);e||dd.set(i,{fiber:o,store:s});let c,f,d=!1,g=null;return{async configure(y={}){let x;g=new Promise(G=>x=G);let{gl:b,size:M,scene:R,events:C,onCreated:E,shadows:N=!1,linear:I=!1,flat:z=!1,legacy:F=!1,orthographic:V=!1,frameloop:W="always",dpr:Z=[1,2],performance:B,raycaster:H,camera:Q,onPointerMissed:J}=y,oe=s.getState(),re=oe.gl;if(!oe.gl){const G={canvas:i,powerPreference:"high-performance",antialias:!0,alpha:!0},ne=typeof b=="function"?await b(G):b;s3(ne)?re=ne:re=new QR({...G,...b}),oe.set({gl:re})}let ve=oe.raycaster;ve||oe.set({raycaster:ve=new GR});const{params:q,...K}=H||{};if(ua.equ(K,ve,Cp)||If(ve,{...K}),ua.equ(q,ve.params,Cp)||If(ve,{params:{...ve.params,...q}}),!oe.camera||oe.camera===f&&!ua.equ(f,Q,Cp)){f=Q;const G=Q?.isCamera,ne=G?Q:V?new ec(0,0,0,0,.1,1e3):new fa(75,0,.1,1e3);G||(ne.position.z=5,Q&&(If(ne,Q),ne.manual||("aspect"in Q||"left"in Q||"right"in Q||"bottom"in Q||"top"in Q)&&(ne.manual=!0,ne.updateProjectionMatrix())),!oe.camera&&!(Q!=null&&Q.rotation)&&ne.lookAt(0,0,0)),oe.set({camera:ne}),ve.camera=ne}if(!oe.scene){let G;R!=null&&R.isScene?(G=R,K_(G,s,"",{})):(G=new Y2,K_(G,s,"",{}),R&&If(G,R)),oe.set({scene:G})}C&&!oe.events.handlers&&oe.set({events:C(s)});const te=Z8(i,M);if(ua.equ(te,oe.size,Cp)||oe.setSize(te.width,te.height,te.top,te.left),Z&&oe.viewport.dpr!==aD(Z)&&oe.setDpr(Z),oe.frameloop!==W&&oe.setFrameloop(W),oe.onPointerMissed||oe.set({onPointerMissed:J}),B&&!ua.equ(B,oe.performance,Cp)&&oe.set(G=>({performance:{...G.performance,...B}})),!oe.xr){var de;const G=(me,xe)=>{const he=s.getState();he.frameloop!=="never"&&c3(me,!0,he,xe)},ne=()=>{const me=s.getState();me.gl.xr.enabled=me.gl.xr.isPresenting,me.gl.xr.setAnimationLoop(me.gl.xr.isPresenting?G:null),me.gl.xr.isPresenting||Yb(me)},fe={connect(){const me=s.getState().gl;me.xr.addEventListener("sessionstart",ne),me.xr.addEventListener("sessionend",ne)},disconnect(){const me=s.getState().gl;me.xr.removeEventListener("sessionstart",ne),me.xr.removeEventListener("sessionend",ne)}};typeof((de=re.xr)==null?void 0:de.addEventListener)=="function"&&fe.connect(),oe.set({xr:fe})}if(re.shadowMap){const G=re.shadowMap.enabled,ne=re.shadowMap.type;if(re.shadowMap.enabled=!!N,ua.boo(N))re.shadowMap.type=Bg;else if(ua.str(N)){var ce;const fe={basic:uC,percentage:Vp,soft:Bg,variance:Zh};re.shadowMap.type=(ce=fe[N])!=null?ce:Bg}else ua.obj(N)&&Object.assign(re.shadowMap,N);(G!==re.shadowMap.enabled||ne!==re.shadowMap.type)&&(re.shadowMap.needsUpdate=!0)}return Xn.enabled=!F,d||(re.outputColorSpace=I?Vf:ir,re.toneMapping=z?fl:h1),oe.legacy!==F&&oe.set(()=>({legacy:F})),oe.linear!==I&&oe.set(()=>({linear:I})),oe.flat!==z&&oe.set(()=>({flat:z})),b&&!ua.fun(b)&&!s3(b)&&!ua.equ(b,re,Cp)&&If(re,b),c=E,d=!0,x(),this},render(y){return!d&&!g&&this.configure(),g.then(()=>{Wb.updateContainer(O.jsx(Q8,{store:s,children:y,onCreated:c,rootElement:i}),o,null,()=>{})}),s},unmount(){dD(i)}}}function Q8({store:i,children:e,onCreated:t,rootElement:n}){return P0(()=>{const a=i.getState();a.set(s=>({internal:{...s.internal,active:!0}})),t&&t(a),i.getState().events.connected||a.events.connect==null||a.events.connect(n)},[]),O.jsx(oD.Provider,{value:i,children:e})}function dD(i,e){const t=dd.get(i),n=t?.fiber;if(n){const a=t?.store.getState();a&&(a.internal.active=!1),Wb.updateContainer(null,n,null,()=>{a&&setTimeout(()=>{try{var s,o,c,f;a.events.disconnect==null||a.events.disconnect(),(s=a.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(c=a.gl)==null||c.forceContextLoss==null||c.forceContextLoss(),(f=a.gl)!=null&&f.xr&&a.xr.disconnect(),w8(a.scene),dd.delete(i)}catch{}},500)})}}const J8=new Set,$8=new Set,ek=new Set;function KS(i,e){if(i.size)for(const{callback:t}of i.values())t(e)}function Xg(i,e){switch(i){case"before":return KS(J8,e);case"after":return KS($8,e);case"tail":return KS(ek,e)}}let QS,JS;function qb(i,e,t){let n=e.clock.getDelta();e.frameloop==="never"&&typeof i=="number"&&(n=i-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=i),QS=e.internal.subscribers;for(let a=0;a<QS.length;a++)JS=QS[a],JS.ref.current(JS.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let $_=!1,Xb=!1,$S,l3,Rp;function pD(i){l3=requestAnimationFrame(pD),$_=!0,$S=0,Xg("before",i),Xb=!0;for(const t of dd.values()){var e;Rp=t.store.getState(),Rp.internal.active&&(Rp.frameloop==="always"||Rp.internal.frames>0)&&!((e=Rp.gl.xr)!=null&&e.isPresenting)&&($S+=qb(i,Rp))}if(Xb=!1,Xg("after",i),$S===0)return Xg("tail",i),$_=!1,cancelAnimationFrame(l3)}function Yb(i,e=1){var t;if(!i)return dd.forEach(n=>Yb(n.store.getState(),e));(t=i.gl.xr)!=null&&t.isPresenting||!i.internal.active||i.frameloop==="never"||(e>1?i.internal.frames=Math.min(60,i.internal.frames+e):Xb?i.internal.frames=2:i.internal.frames=1,$_||($_=!0,requestAnimationFrame(pD)))}function c3(i,e=!0,t,n){if(e&&Xg("before",i),t)qb(i,t,n);else for(const a of dd.values())qb(i,a.store.getState());e&&Xg("after",i)}const eb={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function tk(i){const{handlePointer:e}=I8(i);return{priority:1,enabled:!0,compute(t,n,a){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(eb).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:a}=i.getState();(t=a.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(a.lastEvent.current)},connect:t=>{const{set:n,events:a}=i.getState();if(a.disconnect==null||a.disconnect(),n(s=>({events:{...s.events,connected:t}})),a.handlers)for(const s in a.handlers){const o=a.handlers[s],[c,f]=eb[s];t.addEventListener(c,o,{passive:f})}},disconnect:()=>{const{set:t,events:n}=i.getState();if(n.connected){if(n.handlers)for(const a in n.handlers){const s=n.handlers[a],[o]=eb[a];n.connected.removeEventListener(o,s)}t(a=>({events:{...a.events,connected:void 0}}))}}}}function u3(i,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>i(...n),e)}}function nk({debounce:i,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const a=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!a)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=ue.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),c=ue.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),f=i?typeof i=="number"?i:i.scroll:null,d=i?typeof i=="number"?i:i.resize:null,g=ue.useRef(!1);ue.useEffect(()=>(g.current=!0,()=>{g.current=!1}));const[y,x,b]=ue.useMemo(()=>{const E=()=>{if(!c.current.element)return;const{left:N,top:I,width:z,height:F,bottom:V,right:W,x:Z,y:B}=c.current.element.getBoundingClientRect(),H={left:N,top:I,width:z,height:F,bottom:V,right:W,x:Z,y:B};c.current.element instanceof HTMLElement&&n&&(H.height=c.current.element.offsetHeight,H.width=c.current.element.offsetWidth),Object.freeze(H),g.current&&!rk(c.current.lastBounds,H)&&o(c.current.lastBounds=H)};return[E,d?u3(E,d):E,f?u3(E,f):E]},[o,n,f,d]);function M(){c.current.scrollContainers&&(c.current.scrollContainers.forEach(E=>E.removeEventListener("scroll",b,!0)),c.current.scrollContainers=null),c.current.resizeObserver&&(c.current.resizeObserver.disconnect(),c.current.resizeObserver=null),c.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",c.current.orientationHandler))}function R(){c.current.element&&(c.current.resizeObserver=new a(b),c.current.resizeObserver.observe(c.current.element),e&&c.current.scrollContainers&&c.current.scrollContainers.forEach(E=>E.addEventListener("scroll",b,{capture:!0,passive:!0})),c.current.orientationHandler=()=>{b()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",c.current.orientationHandler))}const C=E=>{!E||E===c.current.element||(M(),c.current.element=E,c.current.scrollContainers=mD(E),R())};return ak(b,!!e),ik(x),ue.useEffect(()=>{M(),R()},[e,b,x]),ue.useEffect(()=>M,[]),[C,s,y]}function ik(i){ue.useEffect(()=>{const e=i;return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[i])}function ak(i,e){ue.useEffect(()=>{if(e){const t=i;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",t,!0)}}},[i,e])}function mD(i){const e=[];if(!i||i===document.body)return e;const{overflow:t,overflowX:n,overflowY:a}=window.getComputedStyle(i);return[t,n,a].some(s=>s==="auto"||s==="scroll")&&e.push(i),[...e,...mD(i.parentElement)]}const sk=["x","y","top","bottom","left","right","width","height"],rk=(i,e)=>sk.every(t=>i[t]===e[t]);function ok({ref:i,children:e,fallback:t,resize:n,style:a,gl:s,events:o=tk,eventSource:c,eventPrefix:f,shadows:d,linear:g,flat:y,legacy:x,orthographic:b,frameloop:M,dpr:R,performance:C,raycaster:E,camera:N,scene:I,onPointerMissed:z,onCreated:F,...V}){ue.useMemo(()=>H8(ZF),[]);const W=M8(),[Z,B]=nk({scroll:!0,debounce:{scroll:50,resize:0},...n}),H=ue.useRef(null),Q=ue.useRef(null);ue.useImperativeHandle(i,()=>H.current);const J=iD(z),[oe,re]=ue.useState(!1),[ve,q]=ue.useState(!1);if(oe)throw oe;if(ve)throw ve;const K=ue.useRef(null);P0(()=>{const de=H.current;if(B.width>0&&B.height>0&&de){K.current||(K.current=K8(de));async function ce(){await K.current.configure({gl:s,scene:I,events:o,shadows:d,linear:g,flat:y,legacy:x,orthographic:b,frameloop:M,dpr:R,performance:C,raycaster:E,camera:N,size:B,onPointerMissed:(...G)=>J.current==null?void 0:J.current(...G),onCreated:G=>{G.events.connect==null||G.events.connect(c?b8(c)?c.current:c:Q.current),f&&G.setEvents({compute:(ne,fe)=>{const me=ne[f+"X"],xe=ne[f+"Y"];fe.pointer.set(me/fe.size.width*2-1,-(xe/fe.size.height)*2+1),fe.raycaster.setFromCamera(fe.pointer,fe.camera)}}),F?.(G)}}),K.current.render(O.jsx(W,{children:O.jsx(E8,{set:q,children:O.jsx(ue.Suspense,{fallback:O.jsx(A8,{set:re}),children:e??null})})}))}ce()}}),ue.useEffect(()=>{const de=H.current;if(de)return()=>dD(de)},[]);const te=c?"none":"auto";return O.jsx("div",{ref:Q,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:te,...a},...V,children:O.jsx("div",{ref:Z,style:{width:"100%",height:"100%"},children:O.jsx("canvas",{ref:H,style:{display:"block"},children:t})})})}function lk(i){return O.jsx($R,{children:O.jsx(ok,{...i})})}function $p(){return $p=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},$p.apply(null,arguments)}const z0=new pe,TT=new pe,ck=new pe,f3=new dt;function uk(i,e,t){const n=z0.setFromMatrixPosition(i.matrixWorld);n.project(e);const a=t.width/2,s=t.height/2;return[n.x*a+a,-(n.y*s)+s]}function fk(i,e){const t=z0.setFromMatrixPosition(i.matrixWorld),n=TT.setFromMatrixPosition(e.matrixWorld),a=t.sub(n),s=e.getWorldDirection(ck);return a.angleTo(s)>Math.PI/2}function hk(i,e,t,n){const a=z0.setFromMatrixPosition(i.matrixWorld),s=a.clone();s.project(e),f3.set(s.x,s.y),t.setFromCamera(f3,e);const o=t.intersectObjects(n,!0);if(o.length){const c=o[0].distance;return a.distanceTo(t.ray.origin)<c}return!0}function dk(i,e){if(e instanceof ec)return e.zoom;if(e instanceof fa){const t=z0.setFromMatrixPosition(i.matrixWorld),n=TT.setFromMatrixPosition(e.matrixWorld),a=e.fov*Math.PI/180,s=t.distanceTo(n);return 1/(2*Math.tan(a/2)*s)}else return 1}function pk(i,e,t){if(e instanceof fa||e instanceof ec){const n=z0.setFromMatrixPosition(i.matrixWorld),a=TT.setFromMatrixPosition(e.matrixWorld),s=n.distanceTo(a),o=(t[1]-t[0])/(e.far-e.near),c=t[1]-o*e.far;return Math.round(o*s+c)}}const Zb=i=>Math.abs(i)<1e-10?0:i;function gD(i,e,t=""){let n="matrix3d(";for(let a=0;a!==16;a++)n+=Zb(e[a]*i.elements[a])+(a!==15?",":")");return t+n}const mk=(i=>e=>gD(e,i))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),gk=(i=>(e,t)=>gD(e,i(t),"translate(-50%,-50%)"))(i=>[1/i,1/i,1/i,1,-1/i,-1/i,-1/i,-1,1/i,1/i,1/i,1,1,1,1,1]);function vk(i){return i&&typeof i=="object"&&"current"in i}const yk=ue.forwardRef(({children:i,eps:e=.001,style:t,className:n,prepend:a,center:s,fullscreen:o,portal:c,distanceFactor:f,sprite:d=!1,transform:g=!1,occlude:y,onOcclude:x,castShadow:b,receiveShadow:M,material:R,geometry:C,zIndexRange:E=[16777271,0],calculatePosition:N=uk,as:I="div",wrapperClass:z,pointerEvents:F="auto",...V},W)=>{const{gl:Z,camera:B,scene:H,size:Q,raycaster:J,events:oe,viewport:re}=Pr(),[ve]=ue.useState(()=>document.createElement(I)),q=ue.useRef(null),K=ue.useRef(null),te=ue.useRef(0),de=ue.useRef([0,0]),ce=ue.useRef(null),G=ue.useRef(null),ne=c?.current||oe.connected||Z.domElement.parentNode,fe=ue.useRef(null),me=ue.useRef(!1),xe=ue.useMemo(()=>y&&y!=="blending"||Array.isArray(y)&&y.length&&vk(y[0]),[y]);ue.useLayoutEffect(()=>{const et=Z.domElement;y&&y==="blending"?(et.style.zIndex=`${Math.floor(E[0]/2)}`,et.style.position="absolute",et.style.pointerEvents="none"):(et.style.zIndex=null,et.style.position=null,et.style.pointerEvents=null)},[y]),ue.useLayoutEffect(()=>{if(K.current){const et=q.current=Xw.createRoot(ve);if(H.updateMatrixWorld(),g)ve.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const qe=N(K.current,B,Q);ve.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${qe[0]}px,${qe[1]}px,0);transform-origin:0 0;`}return ne&&(a?ne.prepend(ve):ne.appendChild(ve)),()=>{ne&&ne.removeChild(ve),et.unmount()}}},[ne,g]),ue.useLayoutEffect(()=>{z&&(ve.className=z)},[z]);const he=ue.useMemo(()=>g?{position:"absolute",top:0,left:0,width:Q.width,height:Q.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-Q.height/2,left:-Q.width/2,width:Q.width,height:Q.height},...t},[t,s,o,Q,g]),_e=ue.useMemo(()=>({position:"absolute",pointerEvents:F}),[F]);ue.useLayoutEffect(()=>{if(me.current=!1,g){var et;(et=q.current)==null||et.render(ue.createElement("div",{ref:ce,style:he},ue.createElement("div",{ref:G,style:_e},ue.createElement("div",{ref:W,className:n,style:t,children:i}))))}else{var qe;(qe=q.current)==null||qe.render(ue.createElement("div",{ref:W,style:he,className:n,children:i}))}});const Ae=ue.useRef(!0);K1(et=>{if(K.current){B.updateMatrixWorld(),K.current.updateWorldMatrix(!0,!1);const qe=g?de.current:N(K.current,B,Q);if(g||Math.abs(te.current-B.zoom)>e||Math.abs(de.current[0]-qe[0])>e||Math.abs(de.current[1]-qe[1])>e){const nt=fk(K.current,B);let St=!1;xe&&(Array.isArray(y)?St=y.map(rt=>rt.current):y!=="blending"&&(St=[H]));const Ne=Ae.current;if(St){const rt=hk(K.current,B,J,St);Ae.current=rt&&!nt}else Ae.current=!nt;Ne!==Ae.current&&(x?x(!Ae.current):ve.style.display=Ae.current?"block":"none");const Ve=Math.floor(E[0]/2),Fe=y?xe?[E[0],Ve]:[Ve-1,0]:E;if(ve.style.zIndex=`${pk(K.current,B,Fe)}`,g){const[rt,ae]=[Q.width/2,Q.height/2],ut=B.projectionMatrix.elements[5]*ae,{isOrthographicCamera:Ze,top:Le,left:tt,bottom:$,right:Y}=B,ye=mk(B.matrixWorldInverse),Be=Ze?`scale(${ut})translate(${Zb(-(Y+tt)/2)}px,${Zb((Le+$)/2)}px)`:`translateZ(${ut}px)`;let De=K.current.matrixWorld;d&&(De=B.matrixWorldInverse.clone().transpose().copyPosition(De).scale(K.current.scale),De.elements[3]=De.elements[7]=De.elements[11]=0,De.elements[15]=1),ve.style.width=Q.width+"px",ve.style.height=Q.height+"px",ve.style.perspective=Ze?"":`${ut}px`,ce.current&&G.current&&(ce.current.style.transform=`${Be}${ye}translate(${rt}px,${ae}px)`,G.current.style.transform=gk(De,1/((f||10)/400)))}else{const rt=f===void 0?1:dk(K.current,B)*f;ve.style.transform=`translate3d(${qe[0]}px,${qe[1]}px,0) scale(${rt})`}de.current=qe,te.current=B.zoom}}if(!xe&&fe.current&&!me.current)if(g){if(ce.current){const qe=ce.current.children[0];if(qe!=null&&qe.clientWidth&&qe!=null&&qe.clientHeight){const{isOrthographicCamera:nt}=B;if(nt||C)V.scale&&(Array.isArray(V.scale)?V.scale instanceof pe?fe.current.scale.copy(V.scale.clone().divideScalar(1)):fe.current.scale.set(1/V.scale[0],1/V.scale[1],1/V.scale[2]):fe.current.scale.setScalar(1/V.scale));else{const St=(f||10)/400,Ne=qe.clientWidth*St,Ve=qe.clientHeight*St;fe.current.scale.set(Ne,Ve,1)}me.current=!0}}}else{const qe=ve.children[0];if(qe!=null&&qe.clientWidth&&qe!=null&&qe.clientHeight){const nt=1/re.factor,St=qe.clientWidth*nt,Ne=qe.clientHeight*nt;fe.current.scale.set(St,Ne,1),me.current=!0}fe.current.lookAt(et.camera.position)}});const $e=ue.useMemo(()=>({vertexShader:g?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[g]);return ue.createElement("group",$p({},V,{ref:K}),y&&!xe&&ue.createElement("mesh",{castShadow:b,receiveShadow:M,ref:fe},C||ue.createElement("planeGeometry",null),R||ue.createElement("shaderMaterial",{side:cl,vertexShader:$e.vertexShader,fragmentShader:$e.fragmentShader})))});var _k=Object.defineProperty,xk=(i,e,t)=>e in i?_k(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Sk=(i,e,t)=>(xk(i,e+"",t),t);class bk{constructor(){Sk(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const a=this._listeners[e];if(a!==void 0){const s=a.indexOf(t);s!==-1&&a.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const a=n.slice(0);for(let s=0,o=a.length;s<o;s++)a[s].call(this,e);e.target=null}}}var Tk=Object.defineProperty,Mk=(i,e,t)=>e in i?Tk(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,fn=(i,e,t)=>(Mk(i,typeof e!="symbol"?e+"":e,t),t);const Uy=new md,h3=new Ru,Ak=Math.cos(70*(Math.PI/180)),d3=(i,e)=>(i%e+e)%e;let Ek=class extends bk{constructor(e,t){super(),fn(this,"object"),fn(this,"domElement"),fn(this,"enabled",!0),fn(this,"target",new pe),fn(this,"minDistance",0),fn(this,"maxDistance",1/0),fn(this,"minZoom",0),fn(this,"maxZoom",1/0),fn(this,"minPolarAngle",0),fn(this,"maxPolarAngle",Math.PI),fn(this,"minAzimuthAngle",-1/0),fn(this,"maxAzimuthAngle",1/0),fn(this,"enableDamping",!1),fn(this,"dampingFactor",.05),fn(this,"enableZoom",!0),fn(this,"zoomSpeed",1),fn(this,"enableRotate",!0),fn(this,"rotateSpeed",1),fn(this,"enablePan",!0),fn(this,"panSpeed",1),fn(this,"screenSpacePanning",!0),fn(this,"keyPanSpeed",7),fn(this,"zoomToCursor",!1),fn(this,"autoRotate",!1),fn(this,"autoRotateSpeed",2),fn(this,"reverseOrbit",!1),fn(this,"reverseHorizontalOrbit",!1),fn(this,"reverseVerticalOrbit",!1),fn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),fn(this,"mouseButtons",{LEFT:jh.ROTATE,MIDDLE:jh.DOLLY,RIGHT:jh.PAN}),fn(this,"touches",{ONE:Wh.ROTATE,TWO:Wh.DOLLY_PAN}),fn(this,"target0"),fn(this,"position0"),fn(this,"zoom0"),fn(this,"_domElementKeyEvents",null),fn(this,"getPolarAngle"),fn(this,"getAzimuthalAngle"),fn(this,"setPolarAngle"),fn(this,"setAzimuthalAngle"),fn(this,"getDistance"),fn(this,"getZoomScale"),fn(this,"listenToKeyEvents"),fn(this,"stopListenToKeyEvents"),fn(this,"saveState"),fn(this,"reset"),fn(this,"update"),fn(this,"connect"),fn(this,"dispose"),fn(this,"dollyIn"),fn(this,"dollyOut"),fn(this,"getScale"),fn(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>g.phi,this.getAzimuthalAngle=()=>g.theta,this.setPolarAngle=ge=>{let we=d3(ge,2*Math.PI),xt=g.phi;xt<0&&(xt+=2*Math.PI),we<0&&(we+=2*Math.PI);let Se=Math.abs(we-xt);2*Math.PI-Se<Se&&(we<xt?we+=2*Math.PI:xt+=2*Math.PI),y.phi=we-xt,n.update()},this.setAzimuthalAngle=ge=>{let we=d3(ge,2*Math.PI),xt=g.theta;xt<0&&(xt+=2*Math.PI),we<0&&(we+=2*Math.PI);let Se=Math.abs(we-xt);2*Math.PI-Se<Se&&(we<xt?we+=2*Math.PI:xt+=2*Math.PI),y.theta=we-xt,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=ge=>{ge.addEventListener("keydown",Ce),this._domElementKeyEvents=ge},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Ce),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(a),n.update(),f=c.NONE},this.update=(()=>{const ge=new pe,we=new pe(0,1,0),xt=new or().setFromUnitVectors(e.up,we),Se=xt.clone().invert(),it=new pe,lt=new or,At=2*Math.PI;return function(){const je=n.object.position;xt.setFromUnitVectors(e.up,we),Se.copy(xt).invert(),ge.copy(je).sub(n.target),ge.applyQuaternion(xt),g.setFromVector3(ge),n.autoRotate&&f===c.NONE&&re(J()),n.enableDamping?(g.theta+=y.theta*n.dampingFactor,g.phi+=y.phi*n.dampingFactor):(g.theta+=y.theta,g.phi+=y.phi);let mt=n.minAzimuthAngle,Rt=n.maxAzimuthAngle;isFinite(mt)&&isFinite(Rt)&&(mt<-Math.PI?mt+=At:mt>Math.PI&&(mt-=At),Rt<-Math.PI?Rt+=At:Rt>Math.PI&&(Rt-=At),mt<=Rt?g.theta=Math.max(mt,Math.min(Rt,g.theta)):g.theta=g.theta>(mt+Rt)/2?Math.max(mt,g.theta):Math.min(Rt,g.theta)),g.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,g.phi)),g.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(b,n.dampingFactor):n.target.add(b),n.zoomToCursor&&B||n.object.isOrthographicCamera?g.radius=fe(g.radius):g.radius=fe(g.radius*x),ge.setFromSpherical(g),ge.applyQuaternion(Se),je.copy(n.target).add(ge),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(y.theta*=1-n.dampingFactor,y.phi*=1-n.dampingFactor,b.multiplyScalar(1-n.dampingFactor)):(y.set(0,0,0),b.set(0,0,0));let Lt=!1;if(n.zoomToCursor&&B){let qt=null;if(n.object instanceof fa&&n.object.isPerspectiveCamera){const bn=ge.length();qt=fe(bn*x);const Bn=bn-qt;n.object.position.addScaledVector(W,Bn),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const bn=new pe(Z.x,Z.y,0);bn.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/x)),n.object.updateProjectionMatrix(),Lt=!0;const Bn=new pe(Z.x,Z.y,0);Bn.unproject(n.object),n.object.position.sub(Bn).add(bn),n.object.updateMatrixWorld(),qt=ge.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;qt!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(qt).add(n.object.position):(Uy.origin.copy(n.object.position),Uy.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(Uy.direction))<Ak?e.lookAt(n.target):(h3.setFromNormalAndCoplanarPoint(n.object.up,n.target),Uy.intersectPlane(h3,n.target))))}else n.object instanceof ec&&n.object.isOrthographicCamera&&(Lt=x!==1,Lt&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/x)),n.object.updateProjectionMatrix()));return x=1,B=!1,Lt||it.distanceToSquared(n.object.position)>d||8*(1-lt.dot(n.object.quaternion))>d?(n.dispatchEvent(a),it.copy(n.object.position),lt.copy(n.object.quaternion),Lt=!1,!0):!1}})(),this.connect=ge=>{n.domElement=ge,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",bt),n.domElement.addEventListener("pointerdown",tt),n.domElement.addEventListener("pointercancel",Y),n.domElement.addEventListener("wheel",De)},this.dispose=()=>{var ge,we,xt,Se,it,lt;n.domElement&&(n.domElement.style.touchAction="auto"),(ge=n.domElement)==null||ge.removeEventListener("contextmenu",bt),(we=n.domElement)==null||we.removeEventListener("pointerdown",tt),(xt=n.domElement)==null||xt.removeEventListener("pointercancel",Y),(Se=n.domElement)==null||Se.removeEventListener("wheel",De),(it=n.domElement)==null||it.ownerDocument.removeEventListener("pointermove",$),(lt=n.domElement)==null||lt.ownerDocument.removeEventListener("pointerup",Y),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",Ce)};const n=this,a={type:"change"},s={type:"start"},o={type:"end"},c={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let f=c.NONE;const d=1e-6,g=new Bb,y=new Bb;let x=1;const b=new pe,M=new dt,R=new dt,C=new dt,E=new dt,N=new dt,I=new dt,z=new dt,F=new dt,V=new dt,W=new pe,Z=new dt;let B=!1;const H=[],Q={};function J(){return 2*Math.PI/60/60*n.autoRotateSpeed}function oe(){return Math.pow(.95,n.zoomSpeed)}function re(ge){n.reverseOrbit||n.reverseHorizontalOrbit?y.theta+=ge:y.theta-=ge}function ve(ge){n.reverseOrbit||n.reverseVerticalOrbit?y.phi+=ge:y.phi-=ge}const q=(()=>{const ge=new pe;return function(xt,Se){ge.setFromMatrixColumn(Se,0),ge.multiplyScalar(-xt),b.add(ge)}})(),K=(()=>{const ge=new pe;return function(xt,Se){n.screenSpacePanning===!0?ge.setFromMatrixColumn(Se,1):(ge.setFromMatrixColumn(Se,0),ge.crossVectors(n.object.up,ge)),ge.multiplyScalar(xt),b.add(ge)}})(),te=(()=>{const ge=new pe;return function(xt,Se){const it=n.domElement;if(it&&n.object instanceof fa&&n.object.isPerspectiveCamera){const lt=n.object.position;ge.copy(lt).sub(n.target);let At=ge.length();At*=Math.tan(n.object.fov/2*Math.PI/180),q(2*xt*At/it.clientHeight,n.object.matrix),K(2*Se*At/it.clientHeight,n.object.matrix)}else it&&n.object instanceof ec&&n.object.isOrthographicCamera?(q(xt*(n.object.right-n.object.left)/n.object.zoom/it.clientWidth,n.object.matrix),K(Se*(n.object.top-n.object.bottom)/n.object.zoom/it.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function de(ge){n.object instanceof fa&&n.object.isPerspectiveCamera||n.object instanceof ec&&n.object.isOrthographicCamera?x=ge:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function ce(ge){de(x/ge)}function G(ge){de(x*ge)}function ne(ge){if(!n.zoomToCursor||!n.domElement)return;B=!0;const we=n.domElement.getBoundingClientRect(),xt=ge.clientX-we.left,Se=ge.clientY-we.top,it=we.width,lt=we.height;Z.x=xt/it*2-1,Z.y=-(Se/lt)*2+1,W.set(Z.x,Z.y,1).unproject(n.object).sub(n.object.position).normalize()}function fe(ge){return Math.max(n.minDistance,Math.min(n.maxDistance,ge))}function me(ge){M.set(ge.clientX,ge.clientY)}function xe(ge){ne(ge),z.set(ge.clientX,ge.clientY)}function he(ge){E.set(ge.clientX,ge.clientY)}function _e(ge){R.set(ge.clientX,ge.clientY),C.subVectors(R,M).multiplyScalar(n.rotateSpeed);const we=n.domElement;we&&(re(2*Math.PI*C.x/we.clientHeight),ve(2*Math.PI*C.y/we.clientHeight)),M.copy(R),n.update()}function Ae(ge){F.set(ge.clientX,ge.clientY),V.subVectors(F,z),V.y>0?ce(oe()):V.y<0&&G(oe()),z.copy(F),n.update()}function $e(ge){N.set(ge.clientX,ge.clientY),I.subVectors(N,E).multiplyScalar(n.panSpeed),te(I.x,I.y),E.copy(N),n.update()}function et(ge){ne(ge),ge.deltaY<0?G(oe()):ge.deltaY>0&&ce(oe()),n.update()}function qe(ge){let we=!1;switch(ge.code){case n.keys.UP:te(0,n.keyPanSpeed),we=!0;break;case n.keys.BOTTOM:te(0,-n.keyPanSpeed),we=!0;break;case n.keys.LEFT:te(n.keyPanSpeed,0),we=!0;break;case n.keys.RIGHT:te(-n.keyPanSpeed,0),we=!0;break}we&&(ge.preventDefault(),n.update())}function nt(){if(H.length==1)M.set(H[0].pageX,H[0].pageY);else{const ge=.5*(H[0].pageX+H[1].pageX),we=.5*(H[0].pageY+H[1].pageY);M.set(ge,we)}}function St(){if(H.length==1)E.set(H[0].pageX,H[0].pageY);else{const ge=.5*(H[0].pageX+H[1].pageX),we=.5*(H[0].pageY+H[1].pageY);E.set(ge,we)}}function Ne(){const ge=H[0].pageX-H[1].pageX,we=H[0].pageY-H[1].pageY,xt=Math.sqrt(ge*ge+we*we);z.set(0,xt)}function Ve(){n.enableZoom&&Ne(),n.enablePan&&St()}function Fe(){n.enableZoom&&Ne(),n.enableRotate&&nt()}function rt(ge){if(H.length==1)R.set(ge.pageX,ge.pageY);else{const xt=st(ge),Se=.5*(ge.pageX+xt.x),it=.5*(ge.pageY+xt.y);R.set(Se,it)}C.subVectors(R,M).multiplyScalar(n.rotateSpeed);const we=n.domElement;we&&(re(2*Math.PI*C.x/we.clientHeight),ve(2*Math.PI*C.y/we.clientHeight)),M.copy(R)}function ae(ge){if(H.length==1)N.set(ge.pageX,ge.pageY);else{const we=st(ge),xt=.5*(ge.pageX+we.x),Se=.5*(ge.pageY+we.y);N.set(xt,Se)}I.subVectors(N,E).multiplyScalar(n.panSpeed),te(I.x,I.y),E.copy(N)}function ut(ge){const we=st(ge),xt=ge.pageX-we.x,Se=ge.pageY-we.y,it=Math.sqrt(xt*xt+Se*Se);F.set(0,it),V.set(0,Math.pow(F.y/z.y,n.zoomSpeed)),ce(V.y),z.copy(F)}function Ze(ge){n.enableZoom&&ut(ge),n.enablePan&&ae(ge)}function Le(ge){n.enableZoom&&ut(ge),n.enableRotate&&rt(ge)}function tt(ge){var we,xt;n.enabled!==!1&&(H.length===0&&((we=n.domElement)==null||we.ownerDocument.addEventListener("pointermove",$),(xt=n.domElement)==null||xt.ownerDocument.addEventListener("pointerup",Y)),Ct(ge),ge.pointerType==="touch"?vt(ge):ye(ge))}function $(ge){n.enabled!==!1&&(ge.pointerType==="touch"?ht(ge):Be(ge))}function Y(ge){var we,xt,Se;Ge(ge),H.length===0&&((we=n.domElement)==null||we.releasePointerCapture(ge.pointerId),(xt=n.domElement)==null||xt.ownerDocument.removeEventListener("pointermove",$),(Se=n.domElement)==null||Se.ownerDocument.removeEventListener("pointerup",Y)),n.dispatchEvent(o),f=c.NONE}function ye(ge){let we;switch(ge.button){case 0:we=n.mouseButtons.LEFT;break;case 1:we=n.mouseButtons.MIDDLE;break;case 2:we=n.mouseButtons.RIGHT;break;default:we=-1}switch(we){case jh.DOLLY:if(n.enableZoom===!1)return;xe(ge),f=c.DOLLY;break;case jh.ROTATE:if(ge.ctrlKey||ge.metaKey||ge.shiftKey){if(n.enablePan===!1)return;he(ge),f=c.PAN}else{if(n.enableRotate===!1)return;me(ge),f=c.ROTATE}break;case jh.PAN:if(ge.ctrlKey||ge.metaKey||ge.shiftKey){if(n.enableRotate===!1)return;me(ge),f=c.ROTATE}else{if(n.enablePan===!1)return;he(ge),f=c.PAN}break;default:f=c.NONE}f!==c.NONE&&n.dispatchEvent(s)}function Be(ge){if(n.enabled!==!1)switch(f){case c.ROTATE:if(n.enableRotate===!1)return;_e(ge);break;case c.DOLLY:if(n.enableZoom===!1)return;Ae(ge);break;case c.PAN:if(n.enablePan===!1)return;$e(ge);break}}function De(ge){n.enabled===!1||n.enableZoom===!1||f!==c.NONE&&f!==c.ROTATE||(ge.preventDefault(),n.dispatchEvent(s),et(ge),n.dispatchEvent(o))}function Ce(ge){n.enabled===!1||n.enablePan===!1||qe(ge)}function vt(ge){switch(Qe(ge),H.length){case 1:switch(n.touches.ONE){case Wh.ROTATE:if(n.enableRotate===!1)return;nt(),f=c.TOUCH_ROTATE;break;case Wh.PAN:if(n.enablePan===!1)return;St(),f=c.TOUCH_PAN;break;default:f=c.NONE}break;case 2:switch(n.touches.TWO){case Wh.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Ve(),f=c.TOUCH_DOLLY_PAN;break;case Wh.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Fe(),f=c.TOUCH_DOLLY_ROTATE;break;default:f=c.NONE}break;default:f=c.NONE}f!==c.NONE&&n.dispatchEvent(s)}function ht(ge){switch(Qe(ge),f){case c.TOUCH_ROTATE:if(n.enableRotate===!1)return;rt(ge),n.update();break;case c.TOUCH_PAN:if(n.enablePan===!1)return;ae(ge),n.update();break;case c.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Ze(ge),n.update();break;case c.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Le(ge),n.update();break;default:f=c.NONE}}function bt(ge){n.enabled!==!1&&ge.preventDefault()}function Ct(ge){H.push(ge)}function Ge(ge){delete Q[ge.pointerId];for(let we=0;we<H.length;we++)if(H[we].pointerId==ge.pointerId){H.splice(we,1);return}}function Qe(ge){let we=Q[ge.pointerId];we===void 0&&(we=new dt,Q[ge.pointerId]=we),we.set(ge.pageX,ge.pageY)}function st(ge){const we=ge.pointerId===H[0].pointerId?H[1]:H[0];return Q[we.pointerId]}this.dollyIn=(ge=oe())=>{G(ge),n.update()},this.dollyOut=(ge=oe())=>{ce(ge),n.update()},this.getScale=()=>x,this.setScale=ge=>{de(ge),n.update()},this.getZoomScale=()=>oe(),t!==void 0&&this.connect(t),this.update()}};function wk(){var i=Object.create(null);function e(a,s){var o=a.id,c=a.name,f=a.dependencies;f===void 0&&(f=[]);var d=a.init;d===void 0&&(d=function(){});var g=a.getTransferables;if(g===void 0&&(g=null),!i[o])try{f=f.map(function(x){return x&&x.isWorkerModule&&(e(x,function(b){if(b instanceof Error)throw b}),x=i[x.id].value),x}),d=n("<"+c+">.init",d),g&&(g=n("<"+c+">.getTransferables",g));var y=null;typeof d=="function"?y=d.apply(void 0,f):console.error("worker module init function failed to rehydrate"),i[o]={id:o,value:y,getTransferables:g},s(y)}catch(x){x&&x.noLog||console.error(x),s(x)}}function t(a,s){var o,c=a.id,f=a.args;(!i[c]||typeof i[c].value!="function")&&s(new Error("Worker module "+c+": not found or its 'init' did not return a function"));try{var d=(o=i[c]).value.apply(o,f);d&&typeof d.then=="function"?d.then(g,function(y){return s(y instanceof Error?y:new Error(""+y))}):g(d)}catch(y){s(y)}function g(y){try{var x=i[c].getTransferables&&i[c].getTransferables(y);(!x||!Array.isArray(x)||!x.length)&&(x=void 0),s(y,x)}catch(b){console.error(b),s(b)}}}function n(a,s){var o=void 0;self.troikaDefine=function(f){return o=f};var c=URL.createObjectURL(new Blob(["/** "+a.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(c)}catch(f){console.error(f)}return URL.revokeObjectURL(c),delete self.troikaDefine,o}self.addEventListener("message",function(a){var s=a.data,o=s.messageId,c=s.action,f=s.data;try{c==="registerModule"&&e(f,function(d){d instanceof Error?postMessage({messageId:o,success:!1,error:d.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof d=="function"}})}),c==="callModule"&&t(f,function(d,g){d instanceof Error?postMessage({messageId:o,success:!1,error:d.message}):postMessage({messageId:o,success:!0,result:d},g||void 0)})}catch(d){postMessage({messageId:o,success:!1,error:d.stack})}})}function Ck(i){var e=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return e._getInitResult().then(function(a){if(typeof a=="function")return a.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=i.dependencies,n=i.init;t=Array.isArray(t)?t.map(function(s){return s&&(s=s.onMainThread||s,s._getInitResult&&(s=s._getInitResult())),s}):[];var a=Promise.all(t).then(function(s){return n.apply(null,s)});return e._getInitResult=function(){return a},a},e}var vD=function(){var i=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),i=!0}catch(t){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return vD=function(){return i},i},Rk=0,Dk=0,tb=!1,Yg=Object.create(null),Zg=Object.create(null),Kb=Object.create(null);function lm(i){if((!i||typeof i.init!="function")&&!tb)throw new Error("requires `options.init` function");var e=i.dependencies,t=i.init,n=i.getTransferables,a=i.workerId,s=Ck(i);a==null&&(a="#default");var o="workerModule"+ ++Rk,c=i.name||o,f=null;e=e&&e.map(function(g){return typeof g=="function"&&!g.workerModuleData&&(tb=!0,g=lm({workerId:a,name:"<"+c+"> function dependency: "+g.name,init:`function(){return (
`+Jy(g)+`
)}`}),tb=!1),g&&g.workerModuleData&&(g=g.workerModuleData),g});function d(){for(var g=[],y=arguments.length;y--;)g[y]=arguments[y];if(!vD())return s.apply(void 0,g);if(!f){f=p3(a,"registerModule",d.workerModuleData);var x=function(){f=null,Zg[a].delete(x)};(Zg[a]||(Zg[a]=new Set)).add(x)}return f.then(function(b){var M=b.isCallable;if(M)return p3(a,"callModule",{id:o,args:g});throw new Error("Worker module function was called but `init` did not return a callable function")})}return d.workerModuleData={isWorkerModule:!0,id:o,name:c,dependencies:e,init:Jy(t),getTransferables:n&&Jy(n)},d.onMainThread=s,d}function Lk(i){Zg[i]&&Zg[i].forEach(function(e){e()}),Yg[i]&&(Yg[i].terminate(),delete Yg[i])}function Jy(i){var e=i.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function Ok(i){var e=Yg[i];if(!e){var t=Jy(wk);e=Yg[i]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+i.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(n){var a=n.data,s=a.messageId,o=Kb[s];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete Kb[s],o(a)}}return e}function p3(i,e,t){return new Promise(function(n,a){var s=++Dk;Kb[s]=function(o){o.success?n(o.result):a(new Error("Error in worker "+e+" call: "+o.error))},Ok(i).postMessage({messageId:s,action:e,data:t})})}function yD(){var i=(function(e){function t(de,ce,G,ne,fe,me,xe,he){var _e=1-xe;he.x=_e*_e*de+2*_e*xe*G+xe*xe*fe,he.y=_e*_e*ce+2*_e*xe*ne+xe*xe*me}function n(de,ce,G,ne,fe,me,xe,he,_e,Ae){var $e=1-_e;Ae.x=$e*$e*$e*de+3*$e*$e*_e*G+3*$e*_e*_e*fe+_e*_e*_e*xe,Ae.y=$e*$e*$e*ce+3*$e*$e*_e*ne+3*$e*_e*_e*me+_e*_e*_e*he}function a(de,ce){for(var G=/([MLQCZ])([^MLQCZ]*)/g,ne,fe,me,xe,he;ne=G.exec(de);){var _e=ne[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(Ae){return parseFloat(Ae)});switch(ne[1]){case"M":xe=fe=_e[0],he=me=_e[1];break;case"L":(_e[0]!==xe||_e[1]!==he)&&ce("L",xe,he,xe=_e[0],he=_e[1]);break;case"Q":{ce("Q",xe,he,xe=_e[2],he=_e[3],_e[0],_e[1]);break}case"C":{ce("C",xe,he,xe=_e[4],he=_e[5],_e[0],_e[1],_e[2],_e[3]);break}case"Z":(xe!==fe||he!==me)&&ce("L",xe,he,fe,me);break}}}function s(de,ce,G){G===void 0&&(G=16);var ne={x:0,y:0};a(de,function(fe,me,xe,he,_e,Ae,$e,et,qe){switch(fe){case"L":ce(me,xe,he,_e);break;case"Q":{for(var nt=me,St=xe,Ne=1;Ne<G;Ne++)t(me,xe,Ae,$e,he,_e,Ne/(G-1),ne),ce(nt,St,ne.x,ne.y),nt=ne.x,St=ne.y;break}case"C":{for(var Ve=me,Fe=xe,rt=1;rt<G;rt++)n(me,xe,Ae,$e,et,qe,he,_e,rt/(G-1),ne),ce(Ve,Fe,ne.x,ne.y),Ve=ne.x,Fe=ne.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",c="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",f=new WeakMap,d={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function g(de,ce){var G=de.getContext?de.getContext("webgl",d):de,ne=f.get(G);if(!ne){let Ve=function(Le){var tt=me[Le];if(!tt&&(tt=me[Le]=G.getExtension(Le),!tt))throw new Error(Le+" not supported");return tt},Fe=function(Le,tt){var $=G.createShader(tt);return G.shaderSource($,Le),G.compileShader($),$},rt=function(Le,tt,$,Y){if(!xe[Le]){var ye={},Be={},De=G.createProgram();G.attachShader(De,Fe(tt,G.VERTEX_SHADER)),G.attachShader(De,Fe($,G.FRAGMENT_SHADER)),G.linkProgram(De),xe[Le]={program:De,transaction:function(vt){G.useProgram(De),vt({setUniform:function(bt,Ct){for(var Ge=[],Qe=arguments.length-2;Qe-- >0;)Ge[Qe]=arguments[Qe+2];var st=Be[Ct]||(Be[Ct]=G.getUniformLocation(De,Ct));G["uniform"+bt].apply(G,[st].concat(Ge))},setAttribute:function(bt,Ct,Ge,Qe,st){var ge=ye[bt];ge||(ge=ye[bt]={buf:G.createBuffer(),loc:G.getAttribLocation(De,bt),data:null}),G.bindBuffer(G.ARRAY_BUFFER,ge.buf),G.vertexAttribPointer(ge.loc,Ct,G.FLOAT,!1,0,0),G.enableVertexAttribArray(ge.loc),fe?G.vertexAttribDivisor(ge.loc,Qe):Ve("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(ge.loc,Qe),st!==ge.data&&(G.bufferData(G.ARRAY_BUFFER,st,Ge),ge.data=st)}})}}}xe[Le].transaction(Y)},ae=function(Le,tt){_e++;try{G.activeTexture(G.TEXTURE0+_e);var $=he[Le];$||($=he[Le]=G.createTexture(),G.bindTexture(G.TEXTURE_2D,$),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MIN_FILTER,G.NEAREST),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MAG_FILTER,G.NEAREST)),G.bindTexture(G.TEXTURE_2D,$),tt($,_e)}finally{_e--}},ut=function(Le,tt,$){var Y=G.createFramebuffer();Ae.push(Y),G.bindFramebuffer(G.FRAMEBUFFER,Y),G.activeTexture(G.TEXTURE0+tt),G.bindTexture(G.TEXTURE_2D,Le),G.framebufferTexture2D(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0,G.TEXTURE_2D,Le,0);try{$(Y)}finally{G.deleteFramebuffer(Y),G.bindFramebuffer(G.FRAMEBUFFER,Ae[--Ae.length-1]||null)}},Ze=function(){me={},xe={},he={},_e=-1,Ae.length=0};var $e=Ve,et=Fe,qe=rt,nt=ae,St=ut,Ne=Ze,fe=typeof WebGL2RenderingContext<"u"&&G instanceof WebGL2RenderingContext,me={},xe={},he={},_e=-1,Ae=[];G.canvas.addEventListener("webglcontextlost",function(Le){Ze(),Le.preventDefault()},!1),f.set(G,ne={gl:G,isWebGL2:fe,getExtension:Ve,withProgram:rt,withTexture:ae,withTextureFramebuffer:ut,handleContextLoss:Ze})}ce(ne)}function y(de,ce,G,ne,fe,me,xe,he){xe===void 0&&(xe=15),he===void 0&&(he=null),g(de,function(_e){var Ae=_e.gl,$e=_e.withProgram,et=_e.withTexture;et("copy",function(qe,nt){Ae.texImage2D(Ae.TEXTURE_2D,0,Ae.RGBA,fe,me,0,Ae.RGBA,Ae.UNSIGNED_BYTE,ce),$e("copy",o,c,function(St){var Ne=St.setUniform,Ve=St.setAttribute;Ve("aUV",2,Ae.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),Ne("1i","image",nt),Ae.bindFramebuffer(Ae.FRAMEBUFFER,he||null),Ae.disable(Ae.BLEND),Ae.colorMask(xe&8,xe&4,xe&2,xe&1),Ae.viewport(G,ne,fe,me),Ae.scissor(G,ne,fe,me),Ae.drawArrays(Ae.TRIANGLES,0,3)})})})}function x(de,ce,G){var ne=de.width,fe=de.height;g(de,function(me){var xe=me.gl,he=new Uint8Array(ne*fe*4);xe.readPixels(0,0,ne,fe,xe.RGBA,xe.UNSIGNED_BYTE,he),de.width=ce,de.height=G,y(xe,he,0,0,ne,fe)})}var b=Object.freeze({__proto__:null,withWebGLContext:g,renderImageData:y,resizeWebGLCanvasWithoutClearing:x});function M(de,ce,G,ne,fe,me){me===void 0&&(me=1);var xe=new Uint8Array(de*ce),he=ne[2]-ne[0],_e=ne[3]-ne[1],Ae=[];s(G,function(Ve,Fe,rt,ae){Ae.push({x1:Ve,y1:Fe,x2:rt,y2:ae,minX:Math.min(Ve,rt),minY:Math.min(Fe,ae),maxX:Math.max(Ve,rt),maxY:Math.max(Fe,ae)})}),Ae.sort(function(Ve,Fe){return Ve.maxX-Fe.maxX});for(var $e=0;$e<de;$e++)for(var et=0;et<ce;et++){var qe=St(ne[0]+he*($e+.5)/de,ne[1]+_e*(et+.5)/ce),nt=Math.pow(1-Math.abs(qe)/fe,me)/2;qe<0&&(nt=1-nt),nt=Math.max(0,Math.min(255,Math.round(nt*255))),xe[et*de+$e]=nt}return xe;function St(Ve,Fe){for(var rt=1/0,ae=1/0,ut=Ae.length;ut--;){var Ze=Ae[ut];if(Ze.maxX+ae<=Ve)break;if(Ve+ae>Ze.minX&&Fe-ae<Ze.maxY&&Fe+ae>Ze.minY){var Le=E(Ve,Fe,Ze.x1,Ze.y1,Ze.x2,Ze.y2);Le<rt&&(rt=Le,ae=Math.sqrt(rt))}}return Ne(Ve,Fe)&&(ae=-ae),ae}function Ne(Ve,Fe){for(var rt=0,ae=Ae.length;ae--;){var ut=Ae[ae];if(ut.maxX<=Ve)break;var Ze=ut.y1>Fe!=ut.y2>Fe&&Ve<(ut.x2-ut.x1)*(Fe-ut.y1)/(ut.y2-ut.y1)+ut.x1;Ze&&(rt+=ut.y1<ut.y2?1:-1)}return rt!==0}}function R(de,ce,G,ne,fe,me,xe,he,_e,Ae){me===void 0&&(me=1),he===void 0&&(he=0),_e===void 0&&(_e=0),Ae===void 0&&(Ae=0),C(de,ce,G,ne,fe,me,xe,null,he,_e,Ae)}function C(de,ce,G,ne,fe,me,xe,he,_e,Ae,$e){me===void 0&&(me=1),_e===void 0&&(_e=0),Ae===void 0&&(Ae=0),$e===void 0&&($e=0);for(var et=M(de,ce,G,ne,fe,me),qe=new Uint8Array(et.length*4),nt=0;nt<et.length;nt++)qe[nt*4+$e]=et[nt];y(xe,qe,_e,Ae,de,ce,1<<3-$e,he)}function E(de,ce,G,ne,fe,me){var xe=fe-G,he=me-ne,_e=xe*xe+he*he,Ae=_e?Math.max(0,Math.min(1,((de-G)*xe+(ce-ne)*he)/_e)):0,$e=de-(G+Ae*xe),et=ce-(ne+Ae*he);return $e*$e+et*et}var N=Object.freeze({__proto__:null,generate:M,generateIntoCanvas:R,generateIntoFramebuffer:C}),I="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",z="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",F="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",V=new Float32Array([0,0,2,0,0,2]),W=null,Z=!1,B={},H=new WeakMap;function Q(de){if(!Z&&!ve(de))throw new Error("WebGL generation not supported")}function J(de,ce,G,ne,fe,me,xe){if(me===void 0&&(me=1),xe===void 0&&(xe=null),!xe&&(xe=W,!xe)){var he=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!he)throw new Error("OffscreenCanvas or DOM canvas not supported");xe=W=he.getContext("webgl",{depth:!1})}Q(xe);var _e=new Uint8Array(de*ce*4);g(xe,function(qe){var nt=qe.gl,St=qe.withTexture,Ne=qe.withTextureFramebuffer;St("readable",function(Ve,Fe){nt.texImage2D(nt.TEXTURE_2D,0,nt.RGBA,de,ce,0,nt.RGBA,nt.UNSIGNED_BYTE,null),Ne(Ve,Fe,function(rt){re(de,ce,G,ne,fe,me,nt,rt,0,0,0),nt.readPixels(0,0,de,ce,nt.RGBA,nt.UNSIGNED_BYTE,_e)})})});for(var Ae=new Uint8Array(de*ce),$e=0,et=0;$e<_e.length;$e+=4)Ae[et++]=_e[$e];return Ae}function oe(de,ce,G,ne,fe,me,xe,he,_e,Ae){me===void 0&&(me=1),he===void 0&&(he=0),_e===void 0&&(_e=0),Ae===void 0&&(Ae=0),re(de,ce,G,ne,fe,me,xe,null,he,_e,Ae)}function re(de,ce,G,ne,fe,me,xe,he,_e,Ae,$e){me===void 0&&(me=1),_e===void 0&&(_e=0),Ae===void 0&&(Ae=0),$e===void 0&&($e=0),Q(xe);var et=[];s(G,function(qe,nt,St,Ne){et.push(qe,nt,St,Ne)}),et=new Float32Array(et),g(xe,function(qe){var nt=qe.gl,St=qe.isWebGL2,Ne=qe.getExtension,Ve=qe.withProgram,Fe=qe.withTexture,rt=qe.withTextureFramebuffer,ae=qe.handleContextLoss;if(Fe("rawDistances",function(ut,Ze){(de!==ut._lastWidth||ce!==ut._lastHeight)&&nt.texImage2D(nt.TEXTURE_2D,0,nt.RGBA,ut._lastWidth=de,ut._lastHeight=ce,0,nt.RGBA,nt.UNSIGNED_BYTE,null),Ve("main",I,z,function(Le){var tt=Le.setAttribute,$=Le.setUniform,Y=!St&&Ne("ANGLE_instanced_arrays"),ye=!St&&Ne("EXT_blend_minmax");tt("aUV",2,nt.STATIC_DRAW,0,V),tt("aLineSegment",4,nt.DYNAMIC_DRAW,1,et),$.apply(void 0,["4f","uGlyphBounds"].concat(ne)),$("1f","uMaxDistance",fe),$("1f","uExponent",me),rt(ut,Ze,function(Be){nt.enable(nt.BLEND),nt.colorMask(!0,!0,!0,!0),nt.viewport(0,0,de,ce),nt.scissor(0,0,de,ce),nt.blendFunc(nt.ONE,nt.ONE),nt.blendEquationSeparate(nt.FUNC_ADD,St?nt.MAX:ye.MAX_EXT),nt.clear(nt.COLOR_BUFFER_BIT),St?nt.drawArraysInstanced(nt.TRIANGLES,0,3,et.length/4):Y.drawArraysInstancedANGLE(nt.TRIANGLES,0,3,et.length/4)})}),Ve("post",o,F,function(Le){Le.setAttribute("aUV",2,nt.STATIC_DRAW,0,V),Le.setUniform("1i","tex",Ze),nt.bindFramebuffer(nt.FRAMEBUFFER,he),nt.disable(nt.BLEND),nt.colorMask($e===0,$e===1,$e===2,$e===3),nt.viewport(_e,Ae,de,ce),nt.scissor(_e,Ae,de,ce),nt.drawArrays(nt.TRIANGLES,0,3)})}),nt.isContextLost())throw ae(),new Error("webgl context lost")})}function ve(de){var ce=!de||de===W?B:de.canvas||de,G=H.get(ce);if(G===void 0){Z=!0;var ne=null;try{var fe=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],me=J(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,de);G=me&&fe.length===me.length&&me.every(function(xe,he){return xe===fe[he]}),G||(ne="bad trial run results",console.info(fe,me))}catch(xe){G=!1,ne=xe.message}ne&&console.warn("WebGL SDF generation not supported:",ne),Z=!1,H.set(ce,G)}return G}var q=Object.freeze({__proto__:null,generate:J,generateIntoCanvas:oe,generateIntoFramebuffer:re,isSupported:ve});function K(de,ce,G,ne,fe,me){fe===void 0&&(fe=Math.max(ne[2]-ne[0],ne[3]-ne[1])/2),me===void 0&&(me=1);try{return J.apply(q,arguments)}catch(xe){return console.info("WebGL SDF generation failed, falling back to JS",xe),M.apply(N,arguments)}}function te(de,ce,G,ne,fe,me,xe,he,_e,Ae){fe===void 0&&(fe=Math.max(ne[2]-ne[0],ne[3]-ne[1])/2),me===void 0&&(me=1),he===void 0&&(he=0),_e===void 0&&(_e=0),Ae===void 0&&(Ae=0);try{return oe.apply(q,arguments)}catch($e){return console.info("WebGL SDF generation failed, falling back to JS",$e),R.apply(N,arguments)}}return e.forEachPathCommand=a,e.generate=K,e.generateIntoCanvas=te,e.javascript=N,e.pathToLineSegments=s,e.webgl=q,e.webglUtils=b,Object.defineProperty(e,"__esModule",{value:!0}),e})({});return i}function Nk(){var i=(function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},n={},a={};n.L=1,a[1]="L",Object.keys(t).forEach(function(ae,ut){n[ae]=1<<ut+1,a[n[ae]]=ae}),Object.freeze(n);var s=n.LRI|n.RLI|n.FSI,o=n.L|n.R|n.AL,c=n.B|n.S|n.WS|n.ON|n.FSI|n.LRI|n.RLI|n.PDI,f=n.BN|n.RLE|n.LRE|n.RLO|n.LRO|n.PDF,d=n.S|n.WS|n.B|s|n.PDI|f,g=null;function y(){if(!g){g=new Map;var ae=function(Ze){if(t.hasOwnProperty(Ze)){var Le=0;t[Ze].split(",").forEach(function(tt){var $=tt.split("+"),Y=$[0],ye=$[1];Y=parseInt(Y,36),ye=ye?parseInt(ye,36):0,g.set(Le+=Y,n[Ze]);for(var Be=0;Be<ye;Be++)g.set(++Le,n[Ze])})}};for(var ut in t)ae(ut)}}function x(ae){return y(),g.get(ae.codePointAt(0))||n.L}function b(ae){return a[x(ae)]}var M={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function R(ae,ut){var Ze=36,Le=0,tt=new Map,$=ut&&new Map,Y;return ae.split(",").forEach(function ye(Be){if(Be.indexOf("+")!==-1)for(var De=+Be;De--;)ye(Y);else{Y=Be;var Ce=Be.split(">"),vt=Ce[0],ht=Ce[1];vt=String.fromCodePoint(Le+=parseInt(vt,Ze)),ht=String.fromCodePoint(Le+=parseInt(ht,Ze)),tt.set(vt,ht),ut&&$.set(ht,vt)}}),{map:tt,reverseMap:$}}var C,E,N;function I(){if(!C){var ae=R(M.pairs,!0),ut=ae.map,Ze=ae.reverseMap;C=ut,E=Ze,N=R(M.canonical,!1).map}}function z(ae){return I(),C.get(ae)||null}function F(ae){return I(),E.get(ae)||null}function V(ae){return I(),N.get(ae)||null}var W=n.L,Z=n.R,B=n.EN,H=n.ES,Q=n.ET,J=n.AN,oe=n.CS,re=n.B,ve=n.S,q=n.ON,K=n.BN,te=n.NSM,de=n.AL,ce=n.LRO,G=n.RLO,ne=n.LRE,fe=n.RLE,me=n.PDF,xe=n.LRI,he=n.RLI,_e=n.FSI,Ae=n.PDI;function $e(ae,ut){for(var Ze=125,Le=new Uint32Array(ae.length),tt=0;tt<ae.length;tt++)Le[tt]=x(ae[tt]);var $=new Map;function Y(Ra,Va){var Zi=Le[Ra];Le[Ra]=Va,$.set(Zi,$.get(Zi)-1),Zi&c&&$.set(c,$.get(c)-1),$.set(Va,($.get(Va)||0)+1),Va&c&&$.set(c,($.get(c)||0)+1)}for(var ye=new Uint8Array(ae.length),Be=new Map,De=[],Ce=null,vt=0;vt<ae.length;vt++)Ce||De.push(Ce={start:vt,end:ae.length-1,level:ut==="rtl"?1:ut==="ltr"?0:ic(vt,!1)}),Le[vt]&re&&(Ce.end=vt,Ce=null);for(var ht=fe|ne|G|ce|s|Ae|me|re,bt=function(Ra){return Ra+(Ra&1?1:2)},Ct=function(Ra){return Ra+(Ra&1?2:1)},Ge=0;Ge<De.length;Ge++){Ce=De[Ge];var Qe=[{_level:Ce.level,_override:0,_isolate:0}],st=void 0,ge=0,we=0,xt=0;$.clear();for(var Se=Ce.start;Se<=Ce.end;Se++){var it=Le[Se];if(st=Qe[Qe.length-1],$.set(it,($.get(it)||0)+1),it&c&&$.set(c,($.get(c)||0)+1),it&ht)if(it&(fe|ne)){ye[Se]=st._level;var lt=(it===fe?Ct:bt)(st._level);lt<=Ze&&!ge&&!we?Qe.push({_level:lt,_override:0,_isolate:0}):ge||we++}else if(it&(G|ce)){ye[Se]=st._level;var At=(it===G?Ct:bt)(st._level);At<=Ze&&!ge&&!we?Qe.push({_level:At,_override:it&G?Z:W,_isolate:0}):ge||we++}else if(it&s){it&_e&&(it=ic(Se+1,!0)===1?he:xe),ye[Se]=st._level,st._override&&Y(Se,st._override);var ct=(it===he?Ct:bt)(st._level);ct<=Ze&&ge===0&&we===0?(xt++,Qe.push({_level:ct,_override:0,_isolate:1,_isolInitIndex:Se})):ge++}else if(it&Ae){if(ge>0)ge--;else if(xt>0){for(we=0;!Qe[Qe.length-1]._isolate;)Qe.pop();var je=Qe[Qe.length-1]._isolInitIndex;je!=null&&(Be.set(je,Se),Be.set(Se,je)),Qe.pop(),xt--}st=Qe[Qe.length-1],ye[Se]=st._level,st._override&&Y(Se,st._override)}else it&me?(ge===0&&(we>0?we--:!st._isolate&&Qe.length>1&&(Qe.pop(),st=Qe[Qe.length-1])),ye[Se]=st._level):it&re&&(ye[Se]=Ce.level);else ye[Se]=st._level,st._override&&it!==K&&Y(Se,st._override)}for(var mt=[],Rt=null,Lt=Ce.start;Lt<=Ce.end;Lt++){var qt=Le[Lt];if(!(qt&f)){var bn=ye[Lt],Bn=qt&s,Ai=qt===Ae;Rt&&bn===Rt._level?(Rt._end=Lt,Rt._endsWithIsolInit=Bn):mt.push(Rt={_start:Lt,_end:Lt,_level:bn,_startsWithPDI:Ai,_endsWithIsolInit:Bn})}}for(var ia=[],Ca=0;Ca<mt.length;Ca++){var Yn=mt[Ca];if(!Yn._startsWithPDI||Yn._startsWithPDI&&!Be.has(Yn._start)){for(var kt=[Rt=Yn],Fi=void 0;Rt&&Rt._endsWithIsolInit&&(Fi=Be.get(Rt._end))!=null;)for(var si=Ca+1;si<mt.length;si++)if(mt[si]._start===Fi){kt.push(Rt=mt[si]);break}for(var Hn=[],cn=0;cn<kt.length;cn++)for(var Li=kt[cn],ga=Li._start;ga<=Li._end;ga++)Hn.push(ga);for(var fs=ye[Hn[0]],cr=Ce.level,lo=Hn[0]-1;lo>=0;lo--)if(!(Le[lo]&f)){cr=ye[lo];break}var ur=Hn[Hn.length-1],fr=ye[ur],Gr=Ce.level;if(!(Le[ur]&s)){for(var yi=ur+1;yi<=Ce.end;yi++)if(!(Le[yi]&f)){Gr=ye[yi];break}}ia.push({_seqIndices:Hn,_sosType:Math.max(cr,fs)%2?Z:W,_eosType:Math.max(Gr,fr)%2?Z:W})}}for(var Zn=0;Zn<ia.length;Zn++){var va=ia[Zn],Xt=va._seqIndices,ie=va._sosType,Re=va._eosType,Xe=ye[Xt[0]]&1?Z:W;if($.get(te))for(var ke=0;ke<Xt.length;ke++){var Ue=Xt[ke];if(Le[Ue]&te){for(var Et=ie,Ut=ke-1;Ut>=0;Ut--)if(!(Le[Xt[Ut]]&f)){Et=Le[Xt[Ut]];break}Y(Ue,Et&(s|Ae)?q:Et)}}if($.get(B))for(var Dt=0;Dt<Xt.length;Dt++){var Pt=Xt[Dt];if(Le[Pt]&B)for(var Tt=Dt-1;Tt>=-1;Tt--){var Ot=Tt===-1?ie:Le[Xt[Tt]];if(Ot&o){Ot===de&&Y(Pt,J);break}}}if($.get(de))for(var Vt=0;Vt<Xt.length;Vt++){var Jt=Xt[Vt];Le[Jt]&de&&Y(Jt,Z)}if($.get(H)||$.get(oe))for(var xn=1;xn<Xt.length-1;xn++){var Kn=Xt[xn];if(Le[Kn]&(H|oe)){for(var zt=0,nn=0,Yt=xn-1;Yt>=0&&(zt=Le[Xt[Yt]],!!(zt&f));Yt--);for(var Cn=xn+1;Cn<Xt.length&&(nn=Le[Xt[Cn]],!!(nn&f));Cn++);zt===nn&&(Le[Kn]===H?zt===B:zt&(B|J))&&Y(Kn,zt)}}if($.get(B))for(var jt=0;jt<Xt.length;jt++){var qi=Xt[jt];if(Le[qi]&B){for(var ya=jt-1;ya>=0&&Le[Xt[ya]]&(Q|f);ya--)Y(Xt[ya],B);for(jt++;jt<Xt.length&&Le[Xt[jt]]&(Q|f|B);jt++)Le[Xt[jt]]!==B&&Y(Xt[jt],B)}}if($.get(Q)||$.get(H)||$.get(oe))for(var ai=0;ai<Xt.length;ai++){var Fn=Xt[ai];if(Le[Fn]&(Q|H|oe)){Y(Fn,q);for(var Tn=ai-1;Tn>=0&&Le[Xt[Tn]]&f;Tn--)Y(Xt[Tn],q);for(var Qn=ai+1;Qn<Xt.length&&Le[Xt[Qn]]&f;Qn++)Y(Xt[Qn],q)}}if($.get(B))for(var ci=0,Ei=ie;ci<Xt.length;ci++){var _i=Xt[ci],Es=Le[_i];Es&B?Ei===W&&Y(_i,W):Es&o&&(Ei=Es)}if($.get(c)){var ki=Z|B|J,Ho=ki|W,co=[];{for(var hs=[],Xi=0;Xi<Xt.length;Xi++)if(Le[Xt[Xi]]&c){var Gs=ae[Xt[Xi]],uo=void 0;if(z(Gs)!==null)if(hs.length<63)hs.push({char:Gs,seqIndex:Xi});else break;else if((uo=F(Gs))!==null)for(var ws=hs.length-1;ws>=0;ws--){var on=hs[ws].char;if(on===uo||on===F(V(Gs))||z(V(on))===Gs){co.push([hs[ws].seqIndex,Xi]),hs.length=ws;break}}}co.sort(function(Ra,Va){return Ra[0]-Va[0]})}for(var Fa=0;Fa<co.length;Fa++){for(var Gn=co[Fa],fo=Gn[0],Cs=Gn[1],Qa=!1,_a=0,Ja=fo+1;Ja<Cs;Ja++){var Rs=Xt[Ja];if(Le[Rs]&Ho){Qa=!0;var hr=Le[Rs]&ki?Z:W;if(hr===Xe){_a=hr;break}}}if(Qa&&!_a){_a=ie;for(var ui=fo-1;ui>=0;ui--){var Ds=Xt[ui];if(Le[Ds]&Ho){var dr=Le[Ds]&ki?Z:W;dr!==Xe?_a=dr:_a=Xe;break}}}if(_a){if(Le[Xt[fo]]=Le[Xt[Cs]]=_a,_a!==Xe){for(var js=fo+1;js<Xt.length;js++)if(!(Le[Xt[js]]&f)){x(ae[Xt[js]])&te&&(Le[Xt[js]]=_a);break}}if(_a!==Xe){for(var ho=Cs+1;ho<Xt.length;ho++)if(!(Le[Xt[ho]]&f)){x(ae[Xt[ho]])&te&&(Le[Xt[ho]]=_a);break}}}}for(var Si=0;Si<Xt.length;Si++)if(Le[Xt[Si]]&c){for(var Ls=Si,po=Si,ka=ie,yn=Si-1;yn>=0;yn--)if(Le[Xt[yn]]&f)Ls=yn;else{ka=Le[Xt[yn]]&ki?Z:W;break}for(var gl=Re,Vi=Si+1;Vi<Xt.length;Vi++)if(Le[Xt[Vi]]&(c|f))po=Vi;else{gl=Le[Xt[Vi]]&ki?Z:W;break}for(var ds=Ls;ds<=po;ds++)Le[Xt[ds]]=ka===gl?ka:Xe;Si=po}}}for(var Yi=Ce.start;Yi<=Ce.end;Yi++){var Vu=ye[Yi],Oi=Le[Yi];if(Vu&1?Oi&(W|B|J)&&ye[Yi]++:Oi&Z?ye[Yi]++:Oi&(J|B)&&(ye[Yi]+=2),Oi&f&&(ye[Yi]=Yi===0?Ce.level:ye[Yi-1]),Yi===Ce.end||x(ae[Yi])&(ve|re))for(var vl=Yi;vl>=0&&x(ae[vl])&d;vl--)ye[vl]=Ce.level}}return{levels:ye,paragraphs:De};function ic(Ra,Va){for(var Zi=Ra;Zi<ae.length;Zi++){var Hi=Le[Zi];if(Hi&(Z|de))return 1;if(Hi&(re|W)||Va&&Hi===Ae)return 0;if(Hi&s){var Wc=ac(Zi);Zi=Wc===-1?ae.length:Wc}}return 0}function ac(Ra){for(var Va=1,Zi=Ra+1;Zi<ae.length;Zi++){var Hi=Le[Zi];if(Hi&re)break;if(Hi&Ae){if(--Va===0)return Zi}else Hi&s&&Va++}return-1}}var et="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",qe;function nt(){if(!qe){var ae=R(et,!0),ut=ae.map,Ze=ae.reverseMap;Ze.forEach(function(Le,tt){ut.set(tt,Le)}),qe=ut}}function St(ae){return nt(),qe.get(ae)||null}function Ne(ae,ut,Ze,Le){var tt=ae.length;Ze=Math.max(0,Ze==null?0:+Ze),Le=Math.min(tt-1,Le==null?tt-1:+Le);for(var $=new Map,Y=Ze;Y<=Le;Y++)if(ut[Y]&1){var ye=St(ae[Y]);ye!==null&&$.set(Y,ye)}return $}function Ve(ae,ut,Ze,Le){var tt=ae.length;Ze=Math.max(0,Ze==null?0:+Ze),Le=Math.min(tt-1,Le==null?tt-1:+Le);var $=[];return ut.paragraphs.forEach(function(Y){var ye=Math.max(Ze,Y.start),Be=Math.min(Le,Y.end);if(ye<Be){for(var De=ut.levels.slice(ye,Be+1),Ce=Be;Ce>=ye&&x(ae[Ce])&d;Ce--)De[Ce]=Y.level;for(var vt=Y.level,ht=1/0,bt=0;bt<De.length;bt++){var Ct=De[bt];Ct>vt&&(vt=Ct),Ct<ht&&(ht=Ct|1)}for(var Ge=vt;Ge>=ht;Ge--)for(var Qe=0;Qe<De.length;Qe++)if(De[Qe]>=Ge){for(var st=Qe;Qe+1<De.length&&De[Qe+1]>=Ge;)Qe++;Qe>st&&$.push([st+ye,Qe+ye])}}}),$}function Fe(ae,ut,Ze,Le){var tt=rt(ae,ut,Ze,Le),$=[].concat(ae);return tt.forEach(function(Y,ye){$[ye]=(ut.levels[Y]&1?St(ae[Y]):null)||ae[Y]}),$.join("")}function rt(ae,ut,Ze,Le){for(var tt=Ve(ae,ut,Ze,Le),$=[],Y=0;Y<ae.length;Y++)$[Y]=Y;return tt.forEach(function(ye){for(var Be=ye[0],De=ye[1],Ce=$.slice(Be,De+1),vt=Ce.length;vt--;)$[De-vt]=Ce[vt]}),$}return e.closingToOpeningBracket=F,e.getBidiCharType=x,e.getBidiCharTypeName=b,e.getCanonicalBracket=V,e.getEmbeddingLevels=$e,e.getMirroredCharacter=St,e.getMirroredCharactersMap=Ne,e.getReorderSegments=Ve,e.getReorderedIndices=rt,e.getReorderedString=Fe,e.openingToClosingBracket=z,Object.defineProperty(e,"__esModule",{value:!0}),e})({});return i}const _D=/\bvoid\s+main\s*\(\s*\)\s*{/g;function Qb(i){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(n,a){let s=Ln[a];return s?Qb(s):n}return i.replace(e,t)}const ks=[];for(let i=0;i<256;i++)ks[i]=(i<16?"0":"")+i.toString(16);function Uk(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(ks[i&255]+ks[i>>8&255]+ks[i>>16&255]+ks[i>>24&255]+"-"+ks[e&255]+ks[e>>8&255]+"-"+ks[e>>16&15|64]+ks[e>>24&255]+"-"+ks[t&63|128]+ks[t>>8&255]+"-"+ks[t>>16&255]+ks[t>>24&255]+ks[n&255]+ks[n>>8&255]+ks[n>>16&255]+ks[n>>24&255]).toUpperCase()}const Hh=Object.assign||function(){let i=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let n=arguments[e];if(n)for(let a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])}return i},Ik=Date.now(),m3=new WeakMap,g3=new Map;let Pk=1e10;function Jb(i,e){const t=kk(e);let n=m3.get(i);if(n||m3.set(i,n=Object.create(null)),n[t])return new n[t];const a=`_onBeforeCompile${t}`,s=function(d,g){i.onBeforeCompile.call(this,d,g);const y=this.customProgramCacheKey()+"|"+d.vertexShader+"|"+d.fragmentShader;let x=g3[y];if(!x){const b=zk(this,d,e,t);x=g3[y]=b}d.vertexShader=x.vertexShader,d.fragmentShader=x.fragmentShader,Hh(d.uniforms,this.uniforms),e.timeUniform&&(d.uniforms[e.timeUniform]={get value(){return Date.now()-Ik}}),this[a]&&this[a](d)},o=function(){return c(e.chained?i:i.clone())},c=function(d){const g=Object.create(d,f);return Object.defineProperty(g,"baseMaterial",{value:i}),Object.defineProperty(g,"id",{value:Pk++}),g.uuid=Uk(),g.uniforms=Hh({},d.uniforms,e.uniforms),g.defines=Hh({},d.defines,e.defines),g.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",g.extensions=Hh({},d.extensions,e.extensions),g._listeners=void 0,g},f={constructor:{value:o},isDerivedMaterial:{value:!0},type:{get:()=>i.type,set:d=>{i.type=d}},isDerivedFrom:{writable:!0,configurable:!0,value:function(d){const g=this.baseMaterial;return d===g||g.isDerivedMaterial&&g.isDerivedFrom(d)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return i.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return s},set(d){this[a]=d}},copy:{writable:!0,configurable:!0,value:function(d){return i.copy.call(this,d),!i.isShaderMaterial&&!i.isDerivedMaterial&&(Hh(this.extensions,d.extensions),Hh(this.defines,d.defines),Hh(this.uniforms,q2.clone(d.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const d=new i.constructor;return c(d).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let d=this._depthMaterial;return d||(d=this._depthMaterial=Jb(i.isDerivedMaterial?i.getDepthMaterial():new W1({depthPacking:PC}),e),d.defines.IS_DEPTH_MATERIAL="",d.uniforms=this.uniforms),d}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let d=this._distanceMaterial;return d||(d=this._distanceMaterial=Jb(i.isDerivedMaterial?i.getDistanceMaterial():new q1,e),d.defines.IS_DISTANCE_MATERIAL="",d.uniforms=this.uniforms),d}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:d,_distanceMaterial:g}=this;d&&d.dispose(),g&&g.dispose(),i.dispose.call(this)}}};return n[t]=o,new o}function zk(i,{vertexShader:e,fragmentShader:t},n,a){let{vertexDefs:s,vertexMainIntro:o,vertexMainOutro:c,vertexTransform:f,fragmentDefs:d,fragmentMainIntro:g,fragmentMainOutro:y,fragmentColorTransform:x,customRewriter:b,timeUniform:M}=n;if(s=s||"",o=o||"",c=c||"",d=d||"",g=g||"",y=y||"",(f||b)&&(e=Qb(e)),(x||b)&&(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),t=Qb(t)),b){let R=b({vertexShader:e,fragmentShader:t});e=R.vertexShader,t=R.fragmentShader}if(x){let R=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,C=>(R.push(C),"")),y=`${x}
${R.join(`
`)}
${y}`}if(M){const R=`
uniform float ${M};
`;s=R+s,d=R+d}return f&&(e=`vec3 troika_position_${a};
vec3 troika_normal_${a};
vec2 troika_uv_${a};
${e}
`,s=`${s}
void troikaVertexTransform${a}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${f}
}
`,o=`
troika_position_${a} = vec3(position);
troika_normal_${a} = vec3(normal);
troika_uv_${a} = vec2(uv);
troikaVertexTransform${a}(troika_position_${a}, troika_normal_${a}, troika_uv_${a});
${o}
`,e=e.replace(/\b(position|normal|uv)\b/g,(R,C,E,N)=>/\battribute\s+vec[23]\s+$/.test(N.substr(0,E))?C:`troika_${C}_${a}`),i.map&&i.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${a}`))),e=v3(e,a,s,o,c),t=v3(t,a,d,g,y),{vertexShader:e,fragmentShader:t}}function v3(i,e,t,n,a){return(n||a||t)&&(i=i.replace(_D,`
${t}
void troikaOrigMain${e}() {`),i+=`
void main() {
  ${n}
  troikaOrigMain${e}();
  ${a}
}`),i}function Bk(i,e){return i==="uniforms"?void 0:typeof e=="function"?e.toString():e}let Fk=0;const y3=new Map;function kk(i){const e=JSON.stringify(i,Bk);let t=y3.get(e);return t==null&&y3.set(e,t=++Fk),t}function Vk(){return typeof window>"u"&&(self.window=self),(function(i){var e={parse:function(a){var s=e._bin,o=new Uint8Array(a);if(s.readASCII(o,0,4)=="ttcf"){var c=4;s.readUshort(o,c),c+=2,s.readUshort(o,c),c+=2;var f=s.readUint(o,c);c+=4;for(var d=[],g=0;g<f;g++){var y=s.readUint(o,c);c+=4,d.push(e._readFont(o,y))}return d}return[e._readFont(o,0)]},_readFont:function(a,s){var o=e._bin,c=s;o.readFixed(a,s),s+=4;var f=o.readUshort(a,s);s+=2,o.readUshort(a,s),s+=2,o.readUshort(a,s),s+=2,o.readUshort(a,s),s+=2;for(var d=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],g={_data:a,_offset:c},y={},x=0;x<f;x++){var b=o.readASCII(a,s,4);s+=4,o.readUint(a,s),s+=4;var M=o.readUint(a,s);s+=4;var R=o.readUint(a,s);s+=4,y[b]={offset:M,length:R}}for(x=0;x<d.length;x++){var C=d[x];y[C]&&(g[C.trim()]=e[C.trim()].parse(a,y[C].offset,y[C].length,g))}return g},_tabOffset:function(a,s,o){for(var c=e._bin,f=c.readUshort(a,o+4),d=o+12,g=0;g<f;g++){var y=c.readASCII(a,d,4);d+=4,c.readUint(a,d),d+=4;var x=c.readUint(a,d);if(d+=4,c.readUint(a,d),d+=4,y==s)return x}return 0}};e._bin={readFixed:function(a,s){return(a[s]<<8|a[s+1])+(a[s+2]<<8|a[s+3])/65540},readF2dot14:function(a,s){return e._bin.readShort(a,s)/16384},readInt:function(a,s){return e._bin._view(a).getInt32(s)},readInt8:function(a,s){return e._bin._view(a).getInt8(s)},readShort:function(a,s){return e._bin._view(a).getInt16(s)},readUshort:function(a,s){return e._bin._view(a).getUint16(s)},readUshorts:function(a,s,o){for(var c=[],f=0;f<o;f++)c.push(e._bin.readUshort(a,s+2*f));return c},readUint:function(a,s){return e._bin._view(a).getUint32(s)},readUint64:function(a,s){return 4294967296*e._bin.readUint(a,s)+e._bin.readUint(a,s+4)},readASCII:function(a,s,o){for(var c="",f=0;f<o;f++)c+=String.fromCharCode(a[s+f]);return c},readUnicode:function(a,s,o){for(var c="",f=0;f<o;f++){var d=a[s++]<<8|a[s++];c+=String.fromCharCode(d)}return c},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(a,s,o){var c=e._bin._tdec;return c&&s==0&&o==a.length?c.decode(a):e._bin.readASCII(a,s,o)},readBytes:function(a,s,o){for(var c=[],f=0;f<o;f++)c.push(a[s+f]);return c},readASCIIArray:function(a,s,o){for(var c=[],f=0;f<o;f++)c.push(String.fromCharCode(a[s+f]));return c},_view:function(a){return a._dataView||(a._dataView=a.buffer?new DataView(a.buffer,a.byteOffset,a.byteLength):new DataView(new Uint8Array(a).buffer))}},e._lctf={},e._lctf.parse=function(a,s,o,c,f){var d=e._bin,g={},y=s;d.readFixed(a,s),s+=4;var x=d.readUshort(a,s);s+=2;var b=d.readUshort(a,s);s+=2;var M=d.readUshort(a,s);return s+=2,g.scriptList=e._lctf.readScriptList(a,y+x),g.featureList=e._lctf.readFeatureList(a,y+b),g.lookupList=e._lctf.readLookupList(a,y+M,f),g},e._lctf.readLookupList=function(a,s,o){var c=e._bin,f=s,d=[],g=c.readUshort(a,s);s+=2;for(var y=0;y<g;y++){var x=c.readUshort(a,s);s+=2;var b=e._lctf.readLookupTable(a,f+x,o);d.push(b)}return d},e._lctf.readLookupTable=function(a,s,o){var c=e._bin,f=s,d={tabs:[]};d.ltype=c.readUshort(a,s),s+=2,d.flag=c.readUshort(a,s),s+=2;var g=c.readUshort(a,s);s+=2;for(var y=d.ltype,x=0;x<g;x++){var b=c.readUshort(a,s);s+=2;var M=o(a,y,f+b,d);d.tabs.push(M)}return d},e._lctf.numOfOnes=function(a){for(var s=0,o=0;o<32;o++)(a>>>o&1)!=0&&s++;return s},e._lctf.readClassDef=function(a,s){var o=e._bin,c=[],f=o.readUshort(a,s);if(s+=2,f==1){var d=o.readUshort(a,s);s+=2;var g=o.readUshort(a,s);s+=2;for(var y=0;y<g;y++)c.push(d+y),c.push(d+y),c.push(o.readUshort(a,s)),s+=2}if(f==2){var x=o.readUshort(a,s);for(s+=2,y=0;y<x;y++)c.push(o.readUshort(a,s)),s+=2,c.push(o.readUshort(a,s)),s+=2,c.push(o.readUshort(a,s)),s+=2}return c},e._lctf.getInterval=function(a,s){for(var o=0;o<a.length;o+=3){var c=a[o],f=a[o+1];if(a[o+2],c<=s&&s<=f)return o}return-1},e._lctf.readCoverage=function(a,s){var o=e._bin,c={};c.fmt=o.readUshort(a,s),s+=2;var f=o.readUshort(a,s);return s+=2,c.fmt==1&&(c.tab=o.readUshorts(a,s,f)),c.fmt==2&&(c.tab=o.readUshorts(a,s,3*f)),c},e._lctf.coverageIndex=function(a,s){var o=a.tab;if(a.fmt==1)return o.indexOf(s);if(a.fmt==2){var c=e._lctf.getInterval(o,s);if(c!=-1)return o[c+2]+(s-o[c])}return-1},e._lctf.readFeatureList=function(a,s){var o=e._bin,c=s,f=[],d=o.readUshort(a,s);s+=2;for(var g=0;g<d;g++){var y=o.readASCII(a,s,4);s+=4;var x=o.readUshort(a,s);s+=2;var b=e._lctf.readFeatureTable(a,c+x);b.tag=y.trim(),f.push(b)}return f},e._lctf.readFeatureTable=function(a,s){var o=e._bin,c=s,f={},d=o.readUshort(a,s);s+=2,d>0&&(f.featureParams=c+d);var g=o.readUshort(a,s);s+=2,f.tab=[];for(var y=0;y<g;y++)f.tab.push(o.readUshort(a,s+2*y));return f},e._lctf.readScriptList=function(a,s){var o=e._bin,c=s,f={},d=o.readUshort(a,s);s+=2;for(var g=0;g<d;g++){var y=o.readASCII(a,s,4);s+=4;var x=o.readUshort(a,s);s+=2,f[y.trim()]=e._lctf.readScriptTable(a,c+x)}return f},e._lctf.readScriptTable=function(a,s){var o=e._bin,c=s,f={},d=o.readUshort(a,s);s+=2,d>0&&(f.default=e._lctf.readLangSysTable(a,c+d));var g=o.readUshort(a,s);s+=2;for(var y=0;y<g;y++){var x=o.readASCII(a,s,4);s+=4;var b=o.readUshort(a,s);s+=2,f[x.trim()]=e._lctf.readLangSysTable(a,c+b)}return f},e._lctf.readLangSysTable=function(a,s){var o=e._bin,c={};o.readUshort(a,s),s+=2,c.reqFeature=o.readUshort(a,s),s+=2;var f=o.readUshort(a,s);return s+=2,c.features=o.readUshorts(a,s,f),c},e.CFF={},e.CFF.parse=function(a,s,o){var c=e._bin;(a=new Uint8Array(a.buffer,s,o))[s=0],a[++s],a[++s],a[++s],s++;var f=[];s=e.CFF.readIndex(a,s,f);for(var d=[],g=0;g<f.length-1;g++)d.push(c.readASCII(a,s+f[g],f[g+1]-f[g]));s+=f[f.length-1];var y=[];s=e.CFF.readIndex(a,s,y);var x=[];for(g=0;g<y.length-1;g++)x.push(e.CFF.readDict(a,s+y[g],s+y[g+1]));s+=y[y.length-1];var b=x[0],M=[];s=e.CFF.readIndex(a,s,M);var R=[];for(g=0;g<M.length-1;g++)R.push(c.readASCII(a,s+M[g],M[g+1]-M[g]));if(s+=M[M.length-1],e.CFF.readSubrs(a,s,b),b.CharStrings){s=b.CharStrings,M=[],s=e.CFF.readIndex(a,s,M);var C=[];for(g=0;g<M.length-1;g++)C.push(c.readBytes(a,s+M[g],M[g+1]-M[g]));b.CharStrings=C}if(b.ROS){s=b.FDArray;var E=[];for(s=e.CFF.readIndex(a,s,E),b.FDArray=[],g=0;g<E.length-1;g++){var N=e.CFF.readDict(a,s+E[g],s+E[g+1]);e.CFF._readFDict(a,N,R),b.FDArray.push(N)}s+=E[E.length-1],s=b.FDSelect,b.FDSelect=[];var I=a[s];if(s++,I!=3)throw I;var z=c.readUshort(a,s);for(s+=2,g=0;g<z+1;g++)b.FDSelect.push(c.readUshort(a,s),a[s+2]),s+=3}return b.Encoding&&(b.Encoding=e.CFF.readEncoding(a,b.Encoding,b.CharStrings.length)),b.charset&&(b.charset=e.CFF.readCharset(a,b.charset,b.CharStrings.length)),e.CFF._readFDict(a,b,R),b},e.CFF._readFDict=function(a,s,o){var c;for(var f in s.Private&&(c=s.Private[1],s.Private=e.CFF.readDict(a,c,c+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(a,c+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(f)!=-1&&(s[f]=o[s[f]-426+35])},e.CFF.readSubrs=function(a,s,o){var c=e._bin,f=[];s=e.CFF.readIndex(a,s,f);var d,g=f.length;d=g<1240?107:g<33900?1131:32768,o.Bias=d,o.Subrs=[];for(var y=0;y<f.length-1;y++)o.Subrs.push(c.readBytes(a,s+f[y],f[y+1]-f[y]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(a,s){for(var o=0;o<a.charset.length;o++)if(a.charset[o]==s)return o;return-1},e.CFF.glyphBySE=function(a,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(a,e.CFF.tableSE[s])},e.CFF.readEncoding=function(a,s,o){e._bin;var c=[".notdef"],f=a[s];if(s++,f!=0)throw"error: unknown encoding format: "+f;var d=a[s];s++;for(var g=0;g<d;g++)c.push(a[s+g]);return c},e.CFF.readCharset=function(a,s,o){var c=e._bin,f=[".notdef"],d=a[s];if(s++,d==0)for(var g=0;g<o;g++){var y=c.readUshort(a,s);s+=2,f.push(y)}else{if(d!=1&&d!=2)throw"error: format: "+d;for(;f.length<o;){y=c.readUshort(a,s),s+=2;var x=0;for(d==1?(x=a[s],s++):(x=c.readUshort(a,s),s+=2),g=0;g<=x;g++)f.push(y),y++}}return f},e.CFF.readIndex=function(a,s,o){var c=e._bin,f=c.readUshort(a,s)+1,d=a[s+=2];if(s++,d==1)for(var g=0;g<f;g++)o.push(a[s+g]);else if(d==2)for(g=0;g<f;g++)o.push(c.readUshort(a,s+2*g));else if(d==3)for(g=0;g<f;g++)o.push(16777215&c.readUint(a,s+3*g-1));else if(f!=1)throw"unsupported offset size: "+d+", count: "+f;return(s+=f*d)-1},e.CFF.getCharString=function(a,s,o){var c=e._bin,f=a[s],d=a[s+1];a[s+2],a[s+3],a[s+4];var g=1,y=null,x=null;f<=20&&(y=f,g=1),f==12&&(y=100*f+d,g=2),21<=f&&f<=27&&(y=f,g=1),f==28&&(x=c.readShort(a,s+1),g=3),29<=f&&f<=31&&(y=f,g=1),32<=f&&f<=246&&(x=f-139,g=1),247<=f&&f<=250&&(x=256*(f-247)+d+108,g=2),251<=f&&f<=254&&(x=256*-(f-251)-d-108,g=2),f==255&&(x=c.readInt(a,s+1)/65535,g=5),o.val=x??"o"+y,o.size=g},e.CFF.readCharString=function(a,s,o){for(var c=s+o,f=e._bin,d=[];s<c;){var g=a[s],y=a[s+1];a[s+2],a[s+3],a[s+4];var x=1,b=null,M=null;g<=20&&(b=g,x=1),g==12&&(b=100*g+y,x=2),g!=19&&g!=20||(b=g,x=2),21<=g&&g<=27&&(b=g,x=1),g==28&&(M=f.readShort(a,s+1),x=3),29<=g&&g<=31&&(b=g,x=1),32<=g&&g<=246&&(M=g-139,x=1),247<=g&&g<=250&&(M=256*(g-247)+y+108,x=2),251<=g&&g<=254&&(M=256*-(g-251)-y-108,x=2),g==255&&(M=f.readInt(a,s+1)/65535,x=5),d.push(M??"o"+b),s+=x}return d},e.CFF.readDict=function(a,s,o){for(var c=e._bin,f={},d=[];s<o;){var g=a[s],y=a[s+1];a[s+2],a[s+3],a[s+4];var x=1,b=null,M=null;if(g==28&&(M=c.readShort(a,s+1),x=3),g==29&&(M=c.readInt(a,s+1),x=5),32<=g&&g<=246&&(M=g-139,x=1),247<=g&&g<=250&&(M=256*(g-247)+y+108,x=2),251<=g&&g<=254&&(M=256*-(g-251)-y-108,x=2),g==255)throw M=c.readInt(a,s+1)/65535,x=5,"unknown number";if(g==30){var R=[];for(x=1;;){var C=a[s+x];x++;var E=C>>4,N=15&C;if(E!=15&&R.push(E),N!=15&&R.push(N),N==15)break}for(var I="",z=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],F=0;F<R.length;F++)I+=z[R[F]];M=parseFloat(I)}g<=21&&(b=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][g],x=1,g==12&&(b=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][y],x=2)),b!=null?(f[b]=d.length==1?d[0]:d,d=[]):d.push(M),s+=x}return f},e.cmap={},e.cmap.parse=function(a,s,o){a=new Uint8Array(a.buffer,s,o),s=0;var c=e._bin,f={};c.readUshort(a,s),s+=2;var d=c.readUshort(a,s);s+=2;var g=[];f.tables=[];for(var y=0;y<d;y++){var x=c.readUshort(a,s);s+=2;var b=c.readUshort(a,s);s+=2;var M=c.readUint(a,s);s+=4;var R="p"+x+"e"+b,C=g.indexOf(M);if(C==-1){var E;C=f.tables.length,g.push(M);var N=c.readUshort(a,M);N==0?E=e.cmap.parse0(a,M):N==4?E=e.cmap.parse4(a,M):N==6?E=e.cmap.parse6(a,M):N==12?E=e.cmap.parse12(a,M):console.debug("unknown format: "+N,x,b,M),f.tables.push(E)}if(f[R]!=null)throw"multiple tables for one platform+encoding";f[R]=C}return f},e.cmap.parse0=function(a,s){var o=e._bin,c={};c.format=o.readUshort(a,s),s+=2;var f=o.readUshort(a,s);s+=2,o.readUshort(a,s),s+=2,c.map=[];for(var d=0;d<f-6;d++)c.map.push(a[s+d]);return c},e.cmap.parse4=function(a,s){var o=e._bin,c=s,f={};f.format=o.readUshort(a,s),s+=2;var d=o.readUshort(a,s);s+=2,o.readUshort(a,s),s+=2;var g=o.readUshort(a,s);s+=2;var y=g/2;f.searchRange=o.readUshort(a,s),s+=2,f.entrySelector=o.readUshort(a,s),s+=2,f.rangeShift=o.readUshort(a,s),s+=2,f.endCount=o.readUshorts(a,s,y),s+=2*y,s+=2,f.startCount=o.readUshorts(a,s,y),s+=2*y,f.idDelta=[];for(var x=0;x<y;x++)f.idDelta.push(o.readShort(a,s)),s+=2;for(f.idRangeOffset=o.readUshorts(a,s,y),s+=2*y,f.glyphIdArray=[];s<c+d;)f.glyphIdArray.push(o.readUshort(a,s)),s+=2;return f},e.cmap.parse6=function(a,s){var o=e._bin,c={};c.format=o.readUshort(a,s),s+=2,o.readUshort(a,s),s+=2,o.readUshort(a,s),s+=2,c.firstCode=o.readUshort(a,s),s+=2;var f=o.readUshort(a,s);s+=2,c.glyphIdArray=[];for(var d=0;d<f;d++)c.glyphIdArray.push(o.readUshort(a,s)),s+=2;return c},e.cmap.parse12=function(a,s){var o=e._bin,c={};c.format=o.readUshort(a,s),s+=2,s+=2,o.readUint(a,s),s+=4,o.readUint(a,s),s+=4;var f=o.readUint(a,s);s+=4,c.groups=[];for(var d=0;d<f;d++){var g=s+12*d,y=o.readUint(a,g+0),x=o.readUint(a,g+4),b=o.readUint(a,g+8);c.groups.push([y,x,b])}return c},e.glyf={},e.glyf.parse=function(a,s,o,c){for(var f=[],d=0;d<c.maxp.numGlyphs;d++)f.push(null);return f},e.glyf._parseGlyf=function(a,s){var o=e._bin,c=a._data,f=e._tabOffset(c,"glyf",a._offset)+a.loca[s];if(a.loca[s]==a.loca[s+1])return null;var d={};if(d.noc=o.readShort(c,f),f+=2,d.xMin=o.readShort(c,f),f+=2,d.yMin=o.readShort(c,f),f+=2,d.xMax=o.readShort(c,f),f+=2,d.yMax=o.readShort(c,f),f+=2,d.xMin>=d.xMax||d.yMin>=d.yMax)return null;if(d.noc>0){d.endPts=[];for(var g=0;g<d.noc;g++)d.endPts.push(o.readUshort(c,f)),f+=2;var y=o.readUshort(c,f);if(f+=2,c.length-f<y)return null;d.instructions=o.readBytes(c,f,y),f+=y;var x=d.endPts[d.noc-1]+1;for(d.flags=[],g=0;g<x;g++){var b=c[f];if(f++,d.flags.push(b),(8&b)!=0){var M=c[f];f++;for(var R=0;R<M;R++)d.flags.push(b),g++}}for(d.xs=[],g=0;g<x;g++){var C=(2&d.flags[g])!=0,E=(16&d.flags[g])!=0;C?(d.xs.push(E?c[f]:-c[f]),f++):E?d.xs.push(0):(d.xs.push(o.readShort(c,f)),f+=2)}for(d.ys=[],g=0;g<x;g++)C=(4&d.flags[g])!=0,E=(32&d.flags[g])!=0,C?(d.ys.push(E?c[f]:-c[f]),f++):E?d.ys.push(0):(d.ys.push(o.readShort(c,f)),f+=2);var N=0,I=0;for(g=0;g<x;g++)N+=d.xs[g],I+=d.ys[g],d.xs[g]=N,d.ys[g]=I}else{var z;d.parts=[];do{z=o.readUshort(c,f),f+=2;var F={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(d.parts.push(F),F.glyphIndex=o.readUshort(c,f),f+=2,1&z){var V=o.readShort(c,f);f+=2;var W=o.readShort(c,f);f+=2}else V=o.readInt8(c,f),f++,W=o.readInt8(c,f),f++;2&z?(F.m.tx=V,F.m.ty=W):(F.p1=V,F.p2=W),8&z?(F.m.a=F.m.d=o.readF2dot14(c,f),f+=2):64&z?(F.m.a=o.readF2dot14(c,f),f+=2,F.m.d=o.readF2dot14(c,f),f+=2):128&z&&(F.m.a=o.readF2dot14(c,f),f+=2,F.m.b=o.readF2dot14(c,f),f+=2,F.m.c=o.readF2dot14(c,f),f+=2,F.m.d=o.readF2dot14(c,f),f+=2)}while(32&z);if(256&z){var Z=o.readUshort(c,f);for(f+=2,d.instr=[],g=0;g<Z;g++)d.instr.push(c[f]),f++}}return d},e.GDEF={},e.GDEF.parse=function(a,s,o,c){var f=s;s+=4;var d=e._bin.readUshort(a,s);return{glyphClassDef:d===0?null:e._lctf.readClassDef(a,f+d)}},e.GPOS={},e.GPOS.parse=function(a,s,o,c){return e._lctf.parse(a,s,o,c,e.GPOS.subt)},e.GPOS.subt=function(a,s,o,c){var f=e._bin,d=o,g={};if(g.fmt=f.readUshort(a,o),o+=2,s==1||s==2||s==3||s==7||s==8&&g.fmt<=2){var y=f.readUshort(a,o);o+=2,g.coverage=e._lctf.readCoverage(a,y+d)}if(s==1&&g.fmt==1){var x=f.readUshort(a,o);o+=2,x!=0&&(g.pos=e.GPOS.readValueRecord(a,o,x))}else if(s==2&&g.fmt>=1&&g.fmt<=2){x=f.readUshort(a,o),o+=2;var b=f.readUshort(a,o);o+=2;var M=e._lctf.numOfOnes(x),R=e._lctf.numOfOnes(b);if(g.fmt==1){g.pairsets=[];var C=f.readUshort(a,o);o+=2;for(var E=0;E<C;E++){var N=d+f.readUshort(a,o);o+=2;var I=f.readUshort(a,N);N+=2;for(var z=[],F=0;F<I;F++){var V=f.readUshort(a,N);N+=2,x!=0&&(J=e.GPOS.readValueRecord(a,N,x),N+=2*M),b!=0&&(oe=e.GPOS.readValueRecord(a,N,b),N+=2*R),z.push({gid2:V,val1:J,val2:oe})}g.pairsets.push(z)}}if(g.fmt==2){var W=f.readUshort(a,o);o+=2;var Z=f.readUshort(a,o);o+=2;var B=f.readUshort(a,o);o+=2;var H=f.readUshort(a,o);for(o+=2,g.classDef1=e._lctf.readClassDef(a,d+W),g.classDef2=e._lctf.readClassDef(a,d+Z),g.matrix=[],E=0;E<B;E++){var Q=[];for(F=0;F<H;F++){var J=null,oe=null;x!=0&&(J=e.GPOS.readValueRecord(a,o,x),o+=2*M),b!=0&&(oe=e.GPOS.readValueRecord(a,o,b),o+=2*R),Q.push({val1:J,val2:oe})}g.matrix.push(Q)}}}else if(s==4&&g.fmt==1)g.markCoverage=e._lctf.readCoverage(a,f.readUshort(a,o)+d),g.baseCoverage=e._lctf.readCoverage(a,f.readUshort(a,o+2)+d),g.markClassCount=f.readUshort(a,o+4),g.markArray=e.GPOS.readMarkArray(a,f.readUshort(a,o+6)+d),g.baseArray=e.GPOS.readBaseArray(a,f.readUshort(a,o+8)+d,g.markClassCount);else if(s==6&&g.fmt==1)g.mark1Coverage=e._lctf.readCoverage(a,f.readUshort(a,o)+d),g.mark2Coverage=e._lctf.readCoverage(a,f.readUshort(a,o+2)+d),g.markClassCount=f.readUshort(a,o+4),g.mark1Array=e.GPOS.readMarkArray(a,f.readUshort(a,o+6)+d),g.mark2Array=e.GPOS.readBaseArray(a,f.readUshort(a,o+8)+d,g.markClassCount);else{if(s==9&&g.fmt==1){var re=f.readUshort(a,o);o+=2;var ve=f.readUint(a,o);if(o+=4,c.ltype==9)c.ltype=re;else if(c.ltype!=re)throw"invalid extension substitution";return e.GPOS.subt(a,c.ltype,d+ve)}console.debug("unsupported GPOS table LookupType",s,"format",g.fmt)}return g},e.GPOS.readValueRecord=function(a,s,o){var c=e._bin,f=[];return f.push(1&o?c.readShort(a,s):0),s+=1&o?2:0,f.push(2&o?c.readShort(a,s):0),s+=2&o?2:0,f.push(4&o?c.readShort(a,s):0),s+=4&o?2:0,f.push(8&o?c.readShort(a,s):0),s+=8&o?2:0,f},e.GPOS.readBaseArray=function(a,s,o){var c=e._bin,f=[],d=s,g=c.readUshort(a,s);s+=2;for(var y=0;y<g;y++){for(var x=[],b=0;b<o;b++)x.push(e.GPOS.readAnchorRecord(a,d+c.readUshort(a,s))),s+=2;f.push(x)}return f},e.GPOS.readMarkArray=function(a,s){var o=e._bin,c=[],f=s,d=o.readUshort(a,s);s+=2;for(var g=0;g<d;g++){var y=e.GPOS.readAnchorRecord(a,o.readUshort(a,s+2)+f);y.markClass=o.readUshort(a,s),c.push(y),s+=4}return c},e.GPOS.readAnchorRecord=function(a,s){var o=e._bin,c={};return c.fmt=o.readUshort(a,s),c.x=o.readShort(a,s+2),c.y=o.readShort(a,s+4),c},e.GSUB={},e.GSUB.parse=function(a,s,o,c){return e._lctf.parse(a,s,o,c,e.GSUB.subt)},e.GSUB.subt=function(a,s,o,c){var f=e._bin,d=o,g={};if(g.fmt=f.readUshort(a,o),o+=2,s!=1&&s!=2&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==2||s==4||s==5&&g.fmt<=2||s==6&&g.fmt<=2){var y=f.readUshort(a,o);o+=2,g.coverage=e._lctf.readCoverage(a,d+y)}if(s==1&&g.fmt>=1&&g.fmt<=2){if(g.fmt==1)g.delta=f.readShort(a,o),o+=2;else if(g.fmt==2){var x=f.readUshort(a,o);o+=2,g.newg=f.readUshorts(a,o,x),o+=2*g.newg.length}}else if(s==2&&g.fmt==1){x=f.readUshort(a,o),o+=2,g.seqs=[];for(var b=0;b<x;b++){var M=f.readUshort(a,o)+d;o+=2;var R=f.readUshort(a,M);g.seqs.push(f.readUshorts(a,M+2,R))}}else if(s==4)for(g.vals=[],x=f.readUshort(a,o),o+=2,b=0;b<x;b++){var C=f.readUshort(a,o);o+=2,g.vals.push(e.GSUB.readLigatureSet(a,d+C))}else if(s==5&&g.fmt==2){if(g.fmt==2){var E=f.readUshort(a,o);o+=2,g.cDef=e._lctf.readClassDef(a,d+E),g.scset=[];var N=f.readUshort(a,o);for(o+=2,b=0;b<N;b++){var I=f.readUshort(a,o);o+=2,g.scset.push(I==0?null:e.GSUB.readSubClassSet(a,d+I))}}}else if(s==6&&g.fmt==3){if(g.fmt==3){for(b=0;b<3;b++){x=f.readUshort(a,o),o+=2;for(var z=[],F=0;F<x;F++)z.push(e._lctf.readCoverage(a,d+f.readUshort(a,o+2*F)));o+=2*x,b==0&&(g.backCvg=z),b==1&&(g.inptCvg=z),b==2&&(g.ahedCvg=z)}x=f.readUshort(a,o),o+=2,g.lookupRec=e.GSUB.readSubstLookupRecords(a,o,x)}}else{if(s==7&&g.fmt==1){var V=f.readUshort(a,o);o+=2;var W=f.readUint(a,o);if(o+=4,c.ltype==9)c.ltype=V;else if(c.ltype!=V)throw"invalid extension substitution";return e.GSUB.subt(a,c.ltype,d+W)}console.debug("unsupported GSUB table LookupType",s,"format",g.fmt)}return g},e.GSUB.readSubClassSet=function(a,s){var o=e._bin.readUshort,c=s,f=[],d=o(a,s);s+=2;for(var g=0;g<d;g++){var y=o(a,s);s+=2,f.push(e.GSUB.readSubClassRule(a,c+y))}return f},e.GSUB.readSubClassRule=function(a,s){var o=e._bin.readUshort,c={},f=o(a,s),d=o(a,s+=2);s+=2,c.input=[];for(var g=0;g<f-1;g++)c.input.push(o(a,s)),s+=2;return c.substLookupRecords=e.GSUB.readSubstLookupRecords(a,s,d),c},e.GSUB.readSubstLookupRecords=function(a,s,o){for(var c=e._bin.readUshort,f=[],d=0;d<o;d++)f.push(c(a,s),c(a,s+2)),s+=4;return f},e.GSUB.readChainSubClassSet=function(a,s){var o=e._bin,c=s,f=[],d=o.readUshort(a,s);s+=2;for(var g=0;g<d;g++){var y=o.readUshort(a,s);s+=2,f.push(e.GSUB.readChainSubClassRule(a,c+y))}return f},e.GSUB.readChainSubClassRule=function(a,s){for(var o=e._bin,c={},f=["backtrack","input","lookahead"],d=0;d<f.length;d++){var g=o.readUshort(a,s);s+=2,d==1&&g--,c[f[d]]=o.readUshorts(a,s,g),s+=2*c[f[d]].length}return g=o.readUshort(a,s),s+=2,c.subst=o.readUshorts(a,s,2*g),s+=2*c.subst.length,c},e.GSUB.readLigatureSet=function(a,s){var o=e._bin,c=s,f=[],d=o.readUshort(a,s);s+=2;for(var g=0;g<d;g++){var y=o.readUshort(a,s);s+=2,f.push(e.GSUB.readLigature(a,c+y))}return f},e.GSUB.readLigature=function(a,s){var o=e._bin,c={chain:[]};c.nglyph=o.readUshort(a,s),s+=2;var f=o.readUshort(a,s);s+=2;for(var d=0;d<f-1;d++)c.chain.push(o.readUshort(a,s)),s+=2;return c},e.head={},e.head.parse=function(a,s,o){var c=e._bin,f={};return c.readFixed(a,s),s+=4,f.fontRevision=c.readFixed(a,s),s+=4,c.readUint(a,s),s+=4,c.readUint(a,s),s+=4,f.flags=c.readUshort(a,s),s+=2,f.unitsPerEm=c.readUshort(a,s),s+=2,f.created=c.readUint64(a,s),s+=8,f.modified=c.readUint64(a,s),s+=8,f.xMin=c.readShort(a,s),s+=2,f.yMin=c.readShort(a,s),s+=2,f.xMax=c.readShort(a,s),s+=2,f.yMax=c.readShort(a,s),s+=2,f.macStyle=c.readUshort(a,s),s+=2,f.lowestRecPPEM=c.readUshort(a,s),s+=2,f.fontDirectionHint=c.readShort(a,s),s+=2,f.indexToLocFormat=c.readShort(a,s),s+=2,f.glyphDataFormat=c.readShort(a,s),s+=2,f},e.hhea={},e.hhea.parse=function(a,s,o){var c=e._bin,f={};return c.readFixed(a,s),s+=4,f.ascender=c.readShort(a,s),s+=2,f.descender=c.readShort(a,s),s+=2,f.lineGap=c.readShort(a,s),s+=2,f.advanceWidthMax=c.readUshort(a,s),s+=2,f.minLeftSideBearing=c.readShort(a,s),s+=2,f.minRightSideBearing=c.readShort(a,s),s+=2,f.xMaxExtent=c.readShort(a,s),s+=2,f.caretSlopeRise=c.readShort(a,s),s+=2,f.caretSlopeRun=c.readShort(a,s),s+=2,f.caretOffset=c.readShort(a,s),s+=2,s+=8,f.metricDataFormat=c.readShort(a,s),s+=2,f.numberOfHMetrics=c.readUshort(a,s),s+=2,f},e.hmtx={},e.hmtx.parse=function(a,s,o,c){for(var f=e._bin,d={aWidth:[],lsBearing:[]},g=0,y=0,x=0;x<c.maxp.numGlyphs;x++)x<c.hhea.numberOfHMetrics&&(g=f.readUshort(a,s),s+=2,y=f.readShort(a,s),s+=2),d.aWidth.push(g),d.lsBearing.push(y);return d},e.kern={},e.kern.parse=function(a,s,o,c){var f=e._bin,d=f.readUshort(a,s);if(s+=2,d==1)return e.kern.parseV1(a,s-2,o,c);var g=f.readUshort(a,s);s+=2;for(var y={glyph1:[],rval:[]},x=0;x<g;x++){s+=2,o=f.readUshort(a,s),s+=2;var b=f.readUshort(a,s);s+=2;var M=b>>>8;if((M&=15)!=0)throw"unknown kern table format: "+M;s=e.kern.readFormat0(a,s,y)}return y},e.kern.parseV1=function(a,s,o,c){var f=e._bin;f.readFixed(a,s),s+=4;var d=f.readUint(a,s);s+=4;for(var g={glyph1:[],rval:[]},y=0;y<d;y++){f.readUint(a,s),s+=4;var x=f.readUshort(a,s);s+=2,f.readUshort(a,s),s+=2;var b=x>>>8;if((b&=15)!=0)throw"unknown kern table format: "+b;s=e.kern.readFormat0(a,s,g)}return g},e.kern.readFormat0=function(a,s,o){var c=e._bin,f=-1,d=c.readUshort(a,s);s+=2,c.readUshort(a,s),s+=2,c.readUshort(a,s),s+=2,c.readUshort(a,s),s+=2;for(var g=0;g<d;g++){var y=c.readUshort(a,s);s+=2;var x=c.readUshort(a,s);s+=2;var b=c.readShort(a,s);s+=2,y!=f&&(o.glyph1.push(y),o.rval.push({glyph2:[],vals:[]}));var M=o.rval[o.rval.length-1];M.glyph2.push(x),M.vals.push(b),f=y}return s},e.loca={},e.loca.parse=function(a,s,o,c){var f=e._bin,d=[],g=c.head.indexToLocFormat,y=c.maxp.numGlyphs+1;if(g==0)for(var x=0;x<y;x++)d.push(f.readUshort(a,s+(x<<1))<<1);if(g==1)for(x=0;x<y;x++)d.push(f.readUint(a,s+(x<<2)));return d},e.maxp={},e.maxp.parse=function(a,s,o){var c=e._bin,f={},d=c.readUint(a,s);return s+=4,f.numGlyphs=c.readUshort(a,s),s+=2,d==65536&&(f.maxPoints=c.readUshort(a,s),s+=2,f.maxContours=c.readUshort(a,s),s+=2,f.maxCompositePoints=c.readUshort(a,s),s+=2,f.maxCompositeContours=c.readUshort(a,s),s+=2,f.maxZones=c.readUshort(a,s),s+=2,f.maxTwilightPoints=c.readUshort(a,s),s+=2,f.maxStorage=c.readUshort(a,s),s+=2,f.maxFunctionDefs=c.readUshort(a,s),s+=2,f.maxInstructionDefs=c.readUshort(a,s),s+=2,f.maxStackElements=c.readUshort(a,s),s+=2,f.maxSizeOfInstructions=c.readUshort(a,s),s+=2,f.maxComponentElements=c.readUshort(a,s),s+=2,f.maxComponentDepth=c.readUshort(a,s),s+=2),f},e.name={},e.name.parse=function(a,s,o){var c=e._bin,f={};c.readUshort(a,s),s+=2;var d=c.readUshort(a,s);s+=2,c.readUshort(a,s);for(var g,y=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],x=s+=2,b=0;b<d;b++){var M=c.readUshort(a,s);s+=2;var R=c.readUshort(a,s);s+=2;var C=c.readUshort(a,s);s+=2;var E=c.readUshort(a,s);s+=2;var N=c.readUshort(a,s);s+=2;var I=c.readUshort(a,s);s+=2;var z,F=y[E],V=x+12*d+I;if(M==0)z=c.readUnicode(a,V,N/2);else if(M==3&&R==0)z=c.readUnicode(a,V,N/2);else if(R==0)z=c.readASCII(a,V,N);else if(R==1)z=c.readUnicode(a,V,N/2);else if(R==3)z=c.readUnicode(a,V,N/2);else{if(M!=1)throw"unknown encoding "+R+", platformID: "+M;z=c.readASCII(a,V,N),console.debug("reading unknown MAC encoding "+R+" as ASCII")}var W="p"+M+","+C.toString(16);f[W]==null&&(f[W]={}),f[W][F!==void 0?F:E]=z,f[W]._lang=C}for(var Z in f)if(f[Z].postScriptName!=null&&f[Z]._lang==1033)return f[Z];for(var Z in f)if(f[Z].postScriptName!=null&&f[Z]._lang==0)return f[Z];for(var Z in f)if(f[Z].postScriptName!=null&&f[Z]._lang==3084)return f[Z];for(var Z in f)if(f[Z].postScriptName!=null)return f[Z];for(var Z in f){g=Z;break}return console.debug("returning name table with languageID "+f[g]._lang),f[g]},e["OS/2"]={},e["OS/2"].parse=function(a,s,o){var c=e._bin.readUshort(a,s);s+=2;var f={};if(c==0)e["OS/2"].version0(a,s,f);else if(c==1)e["OS/2"].version1(a,s,f);else if(c==2||c==3||c==4)e["OS/2"].version2(a,s,f);else{if(c!=5)throw"unknown OS/2 table version: "+c;e["OS/2"].version5(a,s,f)}return f},e["OS/2"].version0=function(a,s,o){var c=e._bin;return o.xAvgCharWidth=c.readShort(a,s),s+=2,o.usWeightClass=c.readUshort(a,s),s+=2,o.usWidthClass=c.readUshort(a,s),s+=2,o.fsType=c.readUshort(a,s),s+=2,o.ySubscriptXSize=c.readShort(a,s),s+=2,o.ySubscriptYSize=c.readShort(a,s),s+=2,o.ySubscriptXOffset=c.readShort(a,s),s+=2,o.ySubscriptYOffset=c.readShort(a,s),s+=2,o.ySuperscriptXSize=c.readShort(a,s),s+=2,o.ySuperscriptYSize=c.readShort(a,s),s+=2,o.ySuperscriptXOffset=c.readShort(a,s),s+=2,o.ySuperscriptYOffset=c.readShort(a,s),s+=2,o.yStrikeoutSize=c.readShort(a,s),s+=2,o.yStrikeoutPosition=c.readShort(a,s),s+=2,o.sFamilyClass=c.readShort(a,s),s+=2,o.panose=c.readBytes(a,s,10),s+=10,o.ulUnicodeRange1=c.readUint(a,s),s+=4,o.ulUnicodeRange2=c.readUint(a,s),s+=4,o.ulUnicodeRange3=c.readUint(a,s),s+=4,o.ulUnicodeRange4=c.readUint(a,s),s+=4,o.achVendID=[c.readInt8(a,s),c.readInt8(a,s+1),c.readInt8(a,s+2),c.readInt8(a,s+3)],s+=4,o.fsSelection=c.readUshort(a,s),s+=2,o.usFirstCharIndex=c.readUshort(a,s),s+=2,o.usLastCharIndex=c.readUshort(a,s),s+=2,o.sTypoAscender=c.readShort(a,s),s+=2,o.sTypoDescender=c.readShort(a,s),s+=2,o.sTypoLineGap=c.readShort(a,s),s+=2,o.usWinAscent=c.readUshort(a,s),s+=2,o.usWinDescent=c.readUshort(a,s),s+=2},e["OS/2"].version1=function(a,s,o){var c=e._bin;return s=e["OS/2"].version0(a,s,o),o.ulCodePageRange1=c.readUint(a,s),s+=4,o.ulCodePageRange2=c.readUint(a,s),s+=4},e["OS/2"].version2=function(a,s,o){var c=e._bin;return s=e["OS/2"].version1(a,s,o),o.sxHeight=c.readShort(a,s),s+=2,o.sCapHeight=c.readShort(a,s),s+=2,o.usDefault=c.readUshort(a,s),s+=2,o.usBreak=c.readUshort(a,s),s+=2,o.usMaxContext=c.readUshort(a,s),s+=2},e["OS/2"].version5=function(a,s,o){var c=e._bin;return s=e["OS/2"].version2(a,s,o),o.usLowerOpticalPointSize=c.readUshort(a,s),s+=2,o.usUpperOpticalPointSize=c.readUshort(a,s),s+=2},e.post={},e.post.parse=function(a,s,o){var c=e._bin,f={};return f.version=c.readFixed(a,s),s+=4,f.italicAngle=c.readFixed(a,s),s+=4,f.underlinePosition=c.readShort(a,s),s+=2,f.underlineThickness=c.readShort(a,s),s+=2,f},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(a,s){var o=a.cmap,c=-1;if(o.p0e4!=null?c=o.p0e4:o.p3e1!=null?c=o.p3e1:o.p1e0!=null?c=o.p1e0:o.p0e3!=null&&(c=o.p0e3),c==-1)throw"no familiar platform and encoding!";var f=o.tables[c];if(f.format==0)return s>=f.map.length?0:f.map[s];if(f.format==4){for(var d=-1,g=0;g<f.endCount.length;g++)if(s<=f.endCount[g]){d=g;break}return d==-1||f.startCount[d]>s?0:65535&(f.idRangeOffset[d]!=0?f.glyphIdArray[s-f.startCount[d]+(f.idRangeOffset[d]>>1)-(f.idRangeOffset.length-d)]:s+f.idDelta[d])}if(f.format==12){if(s>f.groups[f.groups.length-1][1])return 0;for(g=0;g<f.groups.length;g++){var y=f.groups[g];if(y[0]<=s&&s<=y[1])return y[2]+(s-y[0])}return 0}throw"unknown cmap table format "+f.format},e.U.glyphToPath=function(a,s){var o={cmds:[],crds:[]};if(a.SVG&&a.SVG.entries[s]){var c=a.SVG.entries[s];return c==null?o:(typeof c=="string"&&(c=e.SVG.toPath(c),a.SVG.entries[s]=c),c)}if(a.CFF){var f={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:a.CFF.Private?a.CFF.Private.defaultWidthX:0,open:!1},d=a.CFF,g=a.CFF.Private;if(d.ROS){for(var y=0;d.FDSelect[y+2]<=s;)y+=2;g=d.FDArray[d.FDSelect[y+1]].Private}e.U._drawCFF(a.CFF.CharStrings[s],f,d,g,o)}else a.glyf&&e.U._drawGlyf(s,a,o);return o},e.U._drawGlyf=function(a,s,o){var c=s.glyf[a];c==null&&(c=s.glyf[a]=e.glyf._parseGlyf(s,a)),c!=null&&(c.noc>-1?e.U._simpleGlyph(c,o):e.U._compoGlyph(c,s,o))},e.U._simpleGlyph=function(a,s){for(var o=0;o<a.noc;o++){for(var c=o==0?0:a.endPts[o-1]+1,f=a.endPts[o],d=c;d<=f;d++){var g=d==c?f:d-1,y=d==f?c:d+1,x=1&a.flags[d],b=1&a.flags[g],M=1&a.flags[y],R=a.xs[d],C=a.ys[d];if(d==c)if(x){if(!b){e.U.P.moveTo(s,R,C);continue}e.U.P.moveTo(s,a.xs[g],a.ys[g])}else b?e.U.P.moveTo(s,a.xs[g],a.ys[g]):e.U.P.moveTo(s,(a.xs[g]+R)/2,(a.ys[g]+C)/2);x?b&&e.U.P.lineTo(s,R,C):M?e.U.P.qcurveTo(s,R,C,a.xs[y],a.ys[y]):e.U.P.qcurveTo(s,R,C,(R+a.xs[y])/2,(C+a.ys[y])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(a,s,o){for(var c=0;c<a.parts.length;c++){var f={cmds:[],crds:[]},d=a.parts[c];e.U._drawGlyf(d.glyphIndex,s,f);for(var g=d.m,y=0;y<f.crds.length;y+=2){var x=f.crds[y],b=f.crds[y+1];o.crds.push(x*g.a+b*g.b+g.tx),o.crds.push(x*g.c+b*g.d+g.ty)}for(y=0;y<f.cmds.length;y++)o.cmds.push(f.cmds[y])}},e.U._getGlyphClass=function(a,s){var o=e._lctf.getInterval(s,a);return o==-1?0:s[o+2]},e.U._applySubs=function(a,s,o,c){for(var f=a.length-s-1,d=0;d<o.tabs.length;d++)if(o.tabs[d]!=null){var g,y=o.tabs[d];if(!y.coverage||(g=e._lctf.coverageIndex(y.coverage,a[s]))!=-1){if(o.ltype==1)a[s],y.fmt==1?a[s]=a[s]+y.delta:a[s]=y.newg[g];else if(o.ltype==4)for(var x=y.vals[g],b=0;b<x.length;b++){var M=x[b],R=M.chain.length;if(!(R>f)){for(var C=!0,E=0,N=0;N<R;N++){for(;a[s+E+(1+N)]==-1;)E++;M.chain[N]!=a[s+E+(1+N)]&&(C=!1)}if(C){for(a[s]=M.nglyph,N=0;N<R+E;N++)a[s+N+1]=-1;break}}}else if(o.ltype==5&&y.fmt==2)for(var I=e._lctf.getInterval(y.cDef,a[s]),z=y.cDef[I+2],F=y.scset[z],V=0;V<F.length;V++){var W=F[V],Z=W.input;if(!(Z.length>f)){for(C=!0,N=0;N<Z.length;N++){var B=e._lctf.getInterval(y.cDef,a[s+1+N]);if(I==-1&&y.cDef[B+2]!=Z[N]){C=!1;break}}if(C){var H=W.substLookupRecords;for(b=0;b<H.length;b+=2)H[b],H[b+1]}}}else if(o.ltype==6&&y.fmt==3){if(!e.U._glsCovered(a,y.backCvg,s-y.backCvg.length)||!e.U._glsCovered(a,y.inptCvg,s)||!e.U._glsCovered(a,y.ahedCvg,s+y.inptCvg.length))continue;var Q=y.lookupRec;for(V=0;V<Q.length;V+=2){I=Q[V];var J=c[Q[V+1]];e.U._applySubs(a,s+I,J,c)}}}}},e.U._glsCovered=function(a,s,o){for(var c=0;c<s.length;c++)if(e._lctf.coverageIndex(s[c],a[o+c])==-1)return!1;return!0},e.U.glyphsToPath=function(a,s,o){for(var c={cmds:[],crds:[]},f=0,d=0;d<s.length;d++){var g=s[d];if(g!=-1){for(var y=d<s.length-1&&s[d+1]!=-1?s[d+1]:0,x=e.U.glyphToPath(a,g),b=0;b<x.crds.length;b+=2)c.crds.push(x.crds[b]+f),c.crds.push(x.crds[b+1]);for(o&&c.cmds.push(o),b=0;b<x.cmds.length;b++)c.cmds.push(x.cmds[b]);o&&c.cmds.push("X"),f+=a.hmtx.aWidth[g],d<s.length-1&&(f+=e.U.getPairAdjustment(a,g,y))}}return c},e.U.P={},e.U.P.moveTo=function(a,s,o){a.cmds.push("M"),a.crds.push(s,o)},e.U.P.lineTo=function(a,s,o){a.cmds.push("L"),a.crds.push(s,o)},e.U.P.curveTo=function(a,s,o,c,f,d,g){a.cmds.push("C"),a.crds.push(s,o,c,f,d,g)},e.U.P.qcurveTo=function(a,s,o,c,f){a.cmds.push("Q"),a.crds.push(s,o,c,f)},e.U.P.closePath=function(a){a.cmds.push("Z")},e.U._drawCFF=function(a,s,o,c,f){for(var d=s.stack,g=s.nStems,y=s.haveWidth,x=s.width,b=s.open,M=0,R=s.x,C=s.y,E=0,N=0,I=0,z=0,F=0,V=0,W=0,Z=0,B=0,H=0,Q={val:0,size:0};M<a.length;){e.CFF.getCharString(a,M,Q);var J=Q.val;if(M+=Q.size,J=="o1"||J=="o18")d.length%2!=0&&!y&&(x=d.shift()+c.nominalWidthX),g+=d.length>>1,d.length=0,y=!0;else if(J=="o3"||J=="o23")d.length%2!=0&&!y&&(x=d.shift()+c.nominalWidthX),g+=d.length>>1,d.length=0,y=!0;else if(J=="o4")d.length>1&&!y&&(x=d.shift()+c.nominalWidthX,y=!0),b&&e.U.P.closePath(f),C+=d.pop(),e.U.P.moveTo(f,R,C),b=!0;else if(J=="o5")for(;d.length>0;)R+=d.shift(),C+=d.shift(),e.U.P.lineTo(f,R,C);else if(J=="o6"||J=="o7")for(var oe=d.length,re=J=="o6",ve=0;ve<oe;ve++){var q=d.shift();re?R+=q:C+=q,re=!re,e.U.P.lineTo(f,R,C)}else if(J=="o8"||J=="o24"){oe=d.length;for(var K=0;K+6<=oe;)E=R+d.shift(),N=C+d.shift(),I=E+d.shift(),z=N+d.shift(),R=I+d.shift(),C=z+d.shift(),e.U.P.curveTo(f,E,N,I,z,R,C),K+=6;J=="o24"&&(R+=d.shift(),C+=d.shift(),e.U.P.lineTo(f,R,C))}else{if(J=="o11")break;if(J=="o1234"||J=="o1235"||J=="o1236"||J=="o1237")J=="o1234"&&(N=C,I=(E=R+d.shift())+d.shift(),H=z=N+d.shift(),V=z,Z=C,R=(W=(F=(B=I+d.shift())+d.shift())+d.shift())+d.shift(),e.U.P.curveTo(f,E,N,I,z,B,H),e.U.P.curveTo(f,F,V,W,Z,R,C)),J=="o1235"&&(E=R+d.shift(),N=C+d.shift(),I=E+d.shift(),z=N+d.shift(),B=I+d.shift(),H=z+d.shift(),F=B+d.shift(),V=H+d.shift(),W=F+d.shift(),Z=V+d.shift(),R=W+d.shift(),C=Z+d.shift(),d.shift(),e.U.P.curveTo(f,E,N,I,z,B,H),e.U.P.curveTo(f,F,V,W,Z,R,C)),J=="o1236"&&(E=R+d.shift(),N=C+d.shift(),I=E+d.shift(),H=z=N+d.shift(),V=z,W=(F=(B=I+d.shift())+d.shift())+d.shift(),Z=V+d.shift(),R=W+d.shift(),e.U.P.curveTo(f,E,N,I,z,B,H),e.U.P.curveTo(f,F,V,W,Z,R,C)),J=="o1237"&&(E=R+d.shift(),N=C+d.shift(),I=E+d.shift(),z=N+d.shift(),B=I+d.shift(),H=z+d.shift(),F=B+d.shift(),V=H+d.shift(),W=F+d.shift(),Z=V+d.shift(),Math.abs(W-R)>Math.abs(Z-C)?R=W+d.shift():C=Z+d.shift(),e.U.P.curveTo(f,E,N,I,z,B,H),e.U.P.curveTo(f,F,V,W,Z,R,C));else if(J=="o14"){if(d.length>0&&!y&&(x=d.shift()+o.nominalWidthX,y=!0),d.length==4){var te=d.shift(),de=d.shift(),ce=d.shift(),G=d.shift(),ne=e.CFF.glyphBySE(o,ce),fe=e.CFF.glyphBySE(o,G);e.U._drawCFF(o.CharStrings[ne],s,o,c,f),s.x=te,s.y=de,e.U._drawCFF(o.CharStrings[fe],s,o,c,f)}b&&(e.U.P.closePath(f),b=!1)}else if(J=="o19"||J=="o20")d.length%2!=0&&!y&&(x=d.shift()+c.nominalWidthX),g+=d.length>>1,d.length=0,y=!0,M+=g+7>>3;else if(J=="o21")d.length>2&&!y&&(x=d.shift()+c.nominalWidthX,y=!0),C+=d.pop(),R+=d.pop(),b&&e.U.P.closePath(f),e.U.P.moveTo(f,R,C),b=!0;else if(J=="o22")d.length>1&&!y&&(x=d.shift()+c.nominalWidthX,y=!0),R+=d.pop(),b&&e.U.P.closePath(f),e.U.P.moveTo(f,R,C),b=!0;else if(J=="o25"){for(;d.length>6;)R+=d.shift(),C+=d.shift(),e.U.P.lineTo(f,R,C);E=R+d.shift(),N=C+d.shift(),I=E+d.shift(),z=N+d.shift(),R=I+d.shift(),C=z+d.shift(),e.U.P.curveTo(f,E,N,I,z,R,C)}else if(J=="o26")for(d.length%2&&(R+=d.shift());d.length>0;)E=R,N=C+d.shift(),R=I=E+d.shift(),C=(z=N+d.shift())+d.shift(),e.U.P.curveTo(f,E,N,I,z,R,C);else if(J=="o27")for(d.length%2&&(C+=d.shift());d.length>0;)N=C,I=(E=R+d.shift())+d.shift(),z=N+d.shift(),R=I+d.shift(),C=z,e.U.P.curveTo(f,E,N,I,z,R,C);else if(J=="o10"||J=="o29"){var me=J=="o10"?c:o;if(d.length==0)console.debug("error: empty stack");else{var xe=d.pop(),he=me.Subrs[xe+me.Bias];s.x=R,s.y=C,s.nStems=g,s.haveWidth=y,s.width=x,s.open=b,e.U._drawCFF(he,s,o,c,f),R=s.x,C=s.y,g=s.nStems,y=s.haveWidth,x=s.width,b=s.open}}else if(J=="o30"||J=="o31"){var _e=d.length,Ae=(K=0,J=="o31");for(K+=_e-(oe=-3&_e);K<oe;)Ae?(N=C,I=(E=R+d.shift())+d.shift(),C=(z=N+d.shift())+d.shift(),oe-K==5?(R=I+d.shift(),K++):R=I,Ae=!1):(E=R,N=C+d.shift(),I=E+d.shift(),z=N+d.shift(),R=I+d.shift(),oe-K==5?(C=z+d.shift(),K++):C=z,Ae=!0),e.U.P.curveTo(f,E,N,I,z,R,C),K+=4}else{if((J+"").charAt(0)=="o")throw console.debug("Unknown operation: "+J,a),J;d.push(J)}}}s.x=R,s.y=C,s.nStems=g,s.haveWidth=y,s.width=x,s.open=b};var t=e,n={Typr:t};return i.Typr=t,i.default=n,Object.defineProperty(i,"__esModule",{value:!0}),i})({}).Typr}function Hk(){return(function(i){var e=Uint8Array,t=Uint16Array,n=Uint32Array,a=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c=function(J,oe){for(var re=new t(31),ve=0;ve<31;++ve)re[ve]=oe+=1<<J[ve-1];var q=new n(re[30]);for(ve=1;ve<30;++ve)for(var K=re[ve];K<re[ve+1];++K)q[K]=K-re[ve]<<5|ve;return[re,q]},f=c(a,2),d=f[0],g=f[1];d[28]=258,g[258]=28;for(var y=c(s,0)[0],x=new t(32768),b=0;b<32768;++b){var M=(43690&b)>>>1|(21845&b)<<1;M=(61680&(M=(52428&M)>>>2|(13107&M)<<2))>>>4|(3855&M)<<4,x[b]=((65280&M)>>>8|(255&M)<<8)>>>1}var R=function(J,oe,re){for(var ve=J.length,q=0,K=new t(oe);q<ve;++q)++K[J[q]-1];var te,de=new t(oe);for(q=0;q<oe;++q)de[q]=de[q-1]+K[q-1]<<1;{te=new t(1<<oe);var ce=15-oe;for(q=0;q<ve;++q)if(J[q])for(var G=q<<4|J[q],ne=oe-J[q],fe=de[J[q]-1]++<<ne,me=fe|(1<<ne)-1;fe<=me;++fe)te[x[fe]>>>ce]=G}return te},C=new e(288);for(b=0;b<144;++b)C[b]=8;for(b=144;b<256;++b)C[b]=9;for(b=256;b<280;++b)C[b]=7;for(b=280;b<288;++b)C[b]=8;var E=new e(32);for(b=0;b<32;++b)E[b]=5;var N=R(C,9),I=R(E,5),z=function(J){for(var oe=J[0],re=1;re<J.length;++re)J[re]>oe&&(oe=J[re]);return oe},F=function(J,oe,re){var ve=oe/8|0;return(J[ve]|J[ve+1]<<8)>>(7&oe)&re},V=function(J,oe){var re=oe/8|0;return(J[re]|J[re+1]<<8|J[re+2]<<16)>>(7&oe)},W=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Z=function(J,oe,re){var ve=new Error(oe||W[J]);if(ve.code=J,Error.captureStackTrace&&Error.captureStackTrace(ve,Z),!re)throw ve;return ve},B=function(J,oe,re){var ve=J.length;if(!ve||re&&!re.l&&ve<5)return oe||new e(0);var q=!oe||re,K=!re||re.i;re||(re={}),oe||(oe=new e(3*ve));var te,de=function(st){var ge=oe.length;if(st>ge){var we=new e(Math.max(2*ge,st));we.set(oe),oe=we}},ce=re.f||0,G=re.p||0,ne=re.b||0,fe=re.l,me=re.d,xe=re.m,he=re.n,_e=8*ve;do{if(!fe){re.f=ce=F(J,G,1);var Ae=F(J,G+1,3);if(G+=3,!Ae){var $e=J[(Ze=((te=G)/8|0)+(7&te&&1)+4)-4]|J[Ze-3]<<8,et=Ze+$e;if(et>ve){K&&Z(0);break}q&&de(ne+$e),oe.set(J.subarray(Ze,et),ne),re.b=ne+=$e,re.p=G=8*et;continue}if(Ae==1)fe=N,me=I,xe=9,he=5;else if(Ae==2){var qe=F(J,G,31)+257,nt=F(J,G+10,15)+4,St=qe+F(J,G+5,31)+1;G+=14;for(var Ne=new e(St),Ve=new e(19),Fe=0;Fe<nt;++Fe)Ve[o[Fe]]=F(J,G+3*Fe,7);G+=3*nt;var rt=z(Ve),ae=(1<<rt)-1,ut=R(Ve,rt);for(Fe=0;Fe<St;){var Ze,Le=ut[F(J,G,ae)];if(G+=15&Le,(Ze=Le>>>4)<16)Ne[Fe++]=Ze;else{var tt=0,$=0;for(Ze==16?($=3+F(J,G,3),G+=2,tt=Ne[Fe-1]):Ze==17?($=3+F(J,G,7),G+=3):Ze==18&&($=11+F(J,G,127),G+=7);$--;)Ne[Fe++]=tt}}var Y=Ne.subarray(0,qe),ye=Ne.subarray(qe);xe=z(Y),he=z(ye),fe=R(Y,xe),me=R(ye,he)}else Z(1);if(G>_e){K&&Z(0);break}}q&&de(ne+131072);for(var Be=(1<<xe)-1,De=(1<<he)-1,Ce=G;;Ce=G){var vt=(tt=fe[V(J,G)&Be])>>>4;if((G+=15&tt)>_e){K&&Z(0);break}if(tt||Z(2),vt<256)oe[ne++]=vt;else{if(vt==256){Ce=G,fe=null;break}var ht=vt-254;if(vt>264){var bt=a[Fe=vt-257];ht=F(J,G,(1<<bt)-1)+d[Fe],G+=bt}var Ct=me[V(J,G)&De],Ge=Ct>>>4;if(Ct||Z(3),G+=15&Ct,ye=y[Ge],Ge>3&&(bt=s[Ge],ye+=V(J,G)&(1<<bt)-1,G+=bt),G>_e){K&&Z(0);break}q&&de(ne+131072);for(var Qe=ne+ht;ne<Qe;ne+=4)oe[ne]=oe[ne-ye],oe[ne+1]=oe[ne+1-ye],oe[ne+2]=oe[ne+2-ye],oe[ne+3]=oe[ne+3-ye];ne=Qe}}re.l=fe,re.p=Ce,re.b=ne,fe&&(ce=1,re.m=xe,re.d=me,re.n=he)}while(!ce);return ne==oe.length?oe:(function(st,ge,we){(we==null||we>st.length)&&(we=st.length);var xt=new(st instanceof t?t:st instanceof n?n:e)(we-ge);return xt.set(st.subarray(ge,we)),xt})(oe,0,ne)},H=new e(0),Q=typeof TextDecoder<"u"&&new TextDecoder;try{Q.decode(H,{stream:!0})}catch{}return i.convert_streams=function(J){var oe=new DataView(J),re=0;function ve(){var qe=oe.getUint16(re);return re+=2,qe}function q(){var qe=oe.getUint32(re);return re+=4,qe}function K(qe){$e.setUint16(et,qe),et+=2}function te(qe){$e.setUint32(et,qe),et+=4}for(var de={signature:q(),flavor:q(),length:q(),numTables:ve(),reserved:ve(),totalSfntSize:q(),majorVersion:ve(),minorVersion:ve(),metaOffset:q(),metaLength:q(),metaOrigLength:q(),privOffset:q(),privLength:q()},ce=0;Math.pow(2,ce)<=de.numTables;)ce++;ce--;for(var G=16*Math.pow(2,ce),ne=16*de.numTables-G,fe=12,me=[],xe=0;xe<de.numTables;xe++)me.push({tag:q(),offset:q(),compLength:q(),origLength:q(),origChecksum:q()}),fe+=16;var he,_e=new Uint8Array(12+16*me.length+me.reduce((function(qe,nt){return qe+nt.origLength+4}),0)),Ae=_e.buffer,$e=new DataView(Ae),et=0;return te(de.flavor),K(de.numTables),K(G),K(ce),K(ne),me.forEach((function(qe){te(qe.tag),te(qe.origChecksum),te(fe),te(qe.origLength),qe.outOffset=fe,(fe+=qe.origLength)%4!=0&&(fe+=4-fe%4)})),me.forEach((function(qe){var nt,St=J.slice(qe.offset,qe.offset+qe.compLength);if(qe.compLength!=qe.origLength){var Ne=new Uint8Array(qe.origLength);nt=new Uint8Array(St,2),B(nt,Ne)}else Ne=new Uint8Array(St);_e.set(Ne,qe.outOffset);var Ve=0;(fe=qe.outOffset+qe.origLength)%4!=0&&(Ve=4-fe%4),_e.set(new Uint8Array(Ve).buffer,qe.outOffset+qe.origLength),he=fe+Ve})),Ae.slice(0,he)},Object.defineProperty(i,"__esModule",{value:!0}),i})({}).convert_streams}function Gk(i,e){const t={M:2,L:2,Q:4,C:6,Z:0},n={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},a=1,s=2,o=4,c=8,f=16,d=32;let g;function y(W){if(!g){const Z={R:s,L:a,D:o,C:f,U:d,T:c};g=new Map;for(let B in n){let H=0;n[B].split(",").forEach(Q=>{let[J,oe]=Q.split("+");J=parseInt(J,36),oe=oe?parseInt(oe,36):0,g.set(H+=J,Z[B]);for(let re=oe;re--;)g.set(++H,Z[B])})}}return g.get(W)||d}const x=1,b=2,M=3,R=4,C=[null,"isol","init","fina","medi"];function E(W){const Z=new Uint8Array(W.length);let B=d,H=x,Q=-1;for(let J=0;J<W.length;J++){const oe=W.codePointAt(J);let re=y(oe)|0,ve=x;re&c||(B&(a|o|f)?re&(s|o|f)?(ve=M,(H===x||H===M)&&Z[Q]++):re&(a|d)&&(H===b||H===R)&&Z[Q]--:B&(s|d)&&(H===b||H===R)&&Z[Q]--,H=Z[J]=ve,B=re,Q=J,oe>65535&&J++)}return Z}function N(W,Z){const B=[];for(let Q=0;Q<Z.length;Q++){const J=Z.codePointAt(Q);J>65535&&Q++,B.push(i.U.codeToGlyph(W,J))}const H=W.GSUB;if(H){const{lookupList:Q,featureList:J}=H;let oe;const re=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,ve=[];J.forEach(q=>{if(re.test(q.tag))for(let K=0;K<q.tab.length;K++){if(ve[q.tab[K]])continue;ve[q.tab[K]]=!0;const te=Q[q.tab[K]],de=/^(isol|init|fina|medi)$/.test(q.tag);de&&!oe&&(oe=E(Z));for(let ce=0;ce<B.length;ce++)(!oe||!de||C[oe[ce]]===q.tag)&&i.U._applySubs(B,ce,te,Q)}})}return B}function I(W,Z){const B=new Int16Array(Z.length*3);let H=0;for(;H<Z.length;H++){const re=Z[H];if(re===-1)continue;B[H*3+2]=W.hmtx.aWidth[re];const ve=W.GPOS;if(ve){const q=ve.lookupList;for(let K=0;K<q.length;K++){const te=q[K];for(let de=0;de<te.tabs.length;de++){const ce=te.tabs[de];if(te.ltype===1){if(i._lctf.coverageIndex(ce.coverage,re)!==-1&&ce.pos){oe(ce.pos,H);break}}else if(te.ltype===2){let G=null,ne=Q();if(ne!==-1){const fe=i._lctf.coverageIndex(ce.coverage,Z[ne]);if(fe!==-1){if(ce.fmt===1){const me=ce.pairsets[fe];for(let xe=0;xe<me.length;xe++)me[xe].gid2===re&&(G=me[xe])}else if(ce.fmt===2){const me=i.U._getGlyphClass(Z[ne],ce.classDef1),xe=i.U._getGlyphClass(re,ce.classDef2);G=ce.matrix[me][xe]}if(G){G.val1&&oe(G.val1,ne),G.val2&&oe(G.val2,H);break}}}}else if(te.ltype===4){const G=i._lctf.coverageIndex(ce.markCoverage,re);if(G!==-1){const ne=Q(J),fe=ne===-1?-1:i._lctf.coverageIndex(ce.baseCoverage,Z[ne]);if(fe!==-1){const me=ce.markArray[G],xe=ce.baseArray[fe][me.markClass];B[H*3]=xe.x-me.x+B[ne*3]-B[ne*3+2],B[H*3+1]=xe.y-me.y+B[ne*3+1];break}}}else if(te.ltype===6){const G=i._lctf.coverageIndex(ce.mark1Coverage,re);if(G!==-1){const ne=Q();if(ne!==-1){const fe=Z[ne];if(z(W,fe)===3){const me=i._lctf.coverageIndex(ce.mark2Coverage,fe);if(me!==-1){const xe=ce.mark1Array[G],he=ce.mark2Array[me][xe.markClass];B[H*3]=he.x-xe.x+B[ne*3]-B[ne*3+2],B[H*3+1]=he.y-xe.y+B[ne*3+1];break}}}}}}}}else if(W.kern&&!W.cff){const q=Q();if(q!==-1){const K=W.kern.glyph1.indexOf(Z[q]);if(K!==-1){const te=W.kern.rval[K].glyph2.indexOf(re);te!==-1&&(B[q*3+2]+=W.kern.rval[K].vals[te])}}}}return B;function Q(re){for(let ve=H-1;ve>=0;ve--)if(Z[ve]!==-1&&(!re||re(Z[ve])))return ve;return-1}function J(re){return z(W,re)===1}function oe(re,ve){for(let q=0;q<3;q++)B[ve*3+q]+=re[q]||0}}function z(W,Z){const B=W.GDEF&&W.GDEF.glyphClassDef;return B?i.U._getGlyphClass(Z,B):0}function F(...W){for(let Z=0;Z<W.length;Z++)if(typeof W[Z]=="number")return W[Z]}function V(W){const Z=Object.create(null),B=W["OS/2"],H=W.hhea,Q=W.head.unitsPerEm,J=F(B&&B.sTypoAscender,H&&H.ascender,Q),oe={unitsPerEm:Q,ascender:J,descender:F(B&&B.sTypoDescender,H&&H.descender,0),capHeight:F(B&&B.sCapHeight,J),xHeight:F(B&&B.sxHeight,J),lineGap:F(B&&B.sTypoLineGap,H&&H.lineGap),supportsCodePoint(re){return i.U.codeToGlyph(W,re)>0},forEachGlyph(re,ve,q,K){let te=0;const de=1/oe.unitsPerEm*ve,ce=N(W,re);let G=0;const ne=I(W,ce);return ce.forEach((fe,me)=>{if(fe!==-1){let xe=Z[fe];if(!xe){const{cmds:he,crds:_e}=i.U.glyphToPath(W,fe);let Ae="",$e=0;for(let Ne=0,Ve=he.length;Ne<Ve;Ne++){const Fe=t[he[Ne]];Ae+=he[Ne];for(let rt=1;rt<=Fe;rt++)Ae+=(rt>1?",":"")+_e[$e++]}let et,qe,nt,St;if(_e.length){et=qe=1/0,nt=St=-1/0;for(let Ne=0,Ve=_e.length;Ne<Ve;Ne+=2){let Fe=_e[Ne],rt=_e[Ne+1];Fe<et&&(et=Fe),rt<qe&&(qe=rt),Fe>nt&&(nt=Fe),rt>St&&(St=rt)}}else et=nt=qe=St=0;xe=Z[fe]={index:fe,advanceWidth:W.hmtx.aWidth[fe],xMin:et,yMin:qe,xMax:nt,yMax:St,path:Ae}}K.call(null,xe,te+ne[me*3]*de,ne[me*3+1]*de,G),te+=ne[me*3+2]*de,q&&(te+=q*ve)}G+=re.codePointAt(G)>65535?2:1}),te}};return oe}return function(Z){const B=new Uint8Array(Z,0,4),H=i._bin.readASCII(B,0,4);if(H==="wOFF")Z=e(Z);else if(H==="wOF2")throw new Error("woff2 fonts not supported");return V(i.parse(Z)[0])}}const jk=lm({name:"Typr Font Parser",dependencies:[Vk,Hk,Gk],init(i,e,t){const n=i(),a=e();return t(n,a)}});function Wk(){return(function(i){var e=function(){this.buckets=new Map};e.prototype.add=function(I){var z=I>>5;this.buckets.set(z,(this.buckets.get(z)||0)|1<<(31&I))},e.prototype.has=function(I){var z=this.buckets.get(I>>5);return z!==void 0&&(z&1<<(31&I))!=0},e.prototype.serialize=function(){var I=[];return this.buckets.forEach((function(z,F){I.push((+F).toString(36)+":"+z.toString(36))})),I.join(",")},e.prototype.deserialize=function(I){var z=this;this.buckets.clear(),I.split(",").forEach((function(F){var V=F.split(":");z.buckets.set(parseInt(V[0],36),parseInt(V[1],36))}))};var t=Math.pow(2,8),n=t-1,a=~n;function s(I){var z=(function(V){return V&a})(I).toString(16),F=(function(V){return(V&a)+t-1})(I).toString(16);return"codepoint-index/plane"+(I>>16)+"/"+z+"-"+F+".json"}function o(I,z){var F=I&n,V=z.codePointAt(F/6|0);return((V=(V||48)-48)&1<<F%6)!=0}function c(I,z){var F;(F=I,F.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map((function(V){return V.split("-").map((function(W){return parseInt(W.trim(),16)}))}))).forEach((function(V){var W=V[0],Z=V[1];Z===void 0&&(Z=W),z(W,Z)}))}function f(I,z){c(I,(function(F,V){for(var W=F;W<=V;W++)z(W)}))}var d={},g={},y=new WeakMap,x="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function b(I){var z=y.get(I);return z||(z=new e,f(I.ranges,(function(F){return z.add(F)})),y.set(I,z)),z}var M,R=new Map;function C(I,z,F){return I[z]?z:I[F]?F:(function(V){for(var W in V)return W})(I)}function E(I,z){var F=z;if(!I.includes(F)){F=1/0;for(var V=0;V<I.length;V++)Math.abs(I[V]-z)<Math.abs(F-z)&&(F=I[V])}return F}function N(I){return M||(M=new Set,f("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",(function(z){M.add(z)}))),M.has(I)}return i.CodePointSet=e,i.clearCache=function(){d={},g={}},i.getFontsForString=function(I,z){z===void 0&&(z={});var F,V=z.lang;V===void 0&&(V=new RegExp("\\p{Script=Hangul}","u").test(F=I)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(F)?"ja":"en");var W=z.category;W===void 0&&(W="sans-serif");var Z=z.style;Z===void 0&&(Z="normal");var B=z.weight;B===void 0&&(B=400);var H=(z.dataUrl||x).replace(/\/$/g,""),Q=new Map,J=new Uint8Array(I.length),oe={},re={},ve=new Array(I.length),q=new Map,K=!1;function te(G){var ne=R.get(G);return ne||(ne=fetch(H+"/"+G).then((function(fe){if(!fe.ok)throw new Error(fe.statusText);return fe.json().then((function(me){if(!Array.isArray(me)||me[0]!==1)throw new Error("Incorrect schema version; need 1, got "+me[0]);return me[1]}))})).catch((function(fe){if(H!==x)return K||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+H+'", trying default CDN. '+fe.message),K=!0),H=x,R.delete(G),te(G);throw fe})),R.set(G,ne)),ne}for(var de=function(G){var ne=I.codePointAt(G),fe=s(ne);ve[G]=fe,d[fe]||q.has(fe)||q.set(fe,te(fe).then((function(me){d[fe]=me}))),ne>65535&&(G++,ce=G)},ce=0;ce<I.length;ce++)de(ce);return Promise.all(q.values()).then((function(){q.clear();for(var G=function(fe){var me=I.codePointAt(fe),xe=null,he=d[ve[fe]],_e=void 0;for(var Ae in he){var $e=re[Ae];if($e===void 0&&($e=re[Ae]=new RegExp(Ae).test(V||"en")),$e){for(var et in _e=Ae,he[Ae])if(o(me,he[Ae][et])){xe=et;break}break}}if(!xe){e:for(var qe in he)if(qe!==_e){for(var nt in he[qe])if(o(me,he[qe][nt])){xe=nt;break e}}}xe||(console.debug("No font coverage for U+"+me.toString(16)),xe="latin"),ve[fe]=xe,g[xe]||q.has(xe)||q.set(xe,te("font-meta/"+xe+".json").then((function(St){g[xe]=St}))),me>65535&&(fe++,ne=fe)},ne=0;ne<I.length;ne++)G(ne);return Promise.all(q.values())})).then((function(){for(var G,ne=null,fe=0;fe<I.length;fe++){var me=I.codePointAt(fe);if(ne&&(N(me)||b(ne).has(me)))J[fe]=J[fe-1];else{ne=g[ve[fe]];var xe=oe[ne.id];if(!xe){var he=ne.typeforms,_e=C(he,W,"sans-serif"),Ae=C(he[_e],Z,"normal"),$e=E((G=he[_e])===null||G===void 0?void 0:G[Ae],B);xe=oe[ne.id]=H+"/font-files/"+ne.id+"/"+_e+"."+Ae+"."+$e+".woff"}var et=Q.get(xe);et==null&&(et=Q.size,Q.set(xe,et)),J[fe]=et}me>65535&&(fe++,J[fe]=J[fe-1])}return{fontUrls:Array.from(Q.keys()),chars:J}}))},Object.defineProperty(i,"__esModule",{value:!0}),i})({})}function qk(i,e){const t=Object.create(null),n=Object.create(null);function a(o,c){const f=d=>{console.error(`Failure loading font ${o}`,d)};try{const d=new XMLHttpRequest;d.open("get",o,!0),d.responseType="arraybuffer",d.onload=function(){if(d.status>=400)f(new Error(d.statusText));else if(d.status>0)try{const g=i(d.response);g.src=o,c(g)}catch(g){f(g)}},d.onerror=f,d.send()}catch(d){f(d)}}function s(o,c){let f=t[o];f?c(f):n[o]?n[o].push(c):(n[o]=[c],a(o,d=>{d.src=o,t[o]=d,n[o].forEach(g=>g(d)),delete n[o]}))}return function(o,c,{lang:f,fonts:d=[],style:g="normal",weight:y="normal",unicodeFontsURL:x}={}){const b=new Uint8Array(o.length),M=[];o.length||N();const R=new Map,C=[];if(g!=="italic"&&(g="normal"),typeof y!="number"&&(y=y==="bold"?700:400),d&&!Array.isArray(d)&&(d=[d]),d=d.slice().filter(z=>!z.lang||z.lang.test(f)).reverse(),d.length){let W=0;(function Z(B=0){for(let H=B,Q=o.length;H<Q;H++){const J=o.codePointAt(H);if(W===1&&M[b[H-1]].supportsCodePoint(J)||H>0&&/\s/.test(o[H]))b[H]=b[H-1],W===2&&(C[C.length-1][1]=H);else for(let oe=b[H],re=d.length;oe<=re;oe++)if(oe===re){const ve=W===2?C[C.length-1]:C[C.length]=[H,H];ve[1]=H,W=2}else{b[H]=oe;const{src:ve,unicodeRange:q}=d[oe];if(!q||I(J,q)){const K=t[ve];if(!K){s(ve,()=>{Z(H)});return}if(K.supportsCodePoint(J)){let te=R.get(K);typeof te!="number"&&(te=M.length,M.push(K),R.set(K,te)),b[H]=te,W=1;break}}}J>65535&&H+1<Q&&(b[H+1]=b[H],H++,W===2&&(C[C.length-1][1]=H))}E()})()}else C.push([0,o.length-1]),E();function E(){if(C.length){const z=C.map(F=>o.substring(F[0],F[1]+1)).join(`
`);e.getFontsForString(z,{lang:f||void 0,style:g,weight:y,dataUrl:x}).then(({fontUrls:F,chars:V})=>{const W=M.length;let Z=0;C.forEach(H=>{for(let Q=0,J=H[1]-H[0];Q<=J;Q++)b[H[0]+Q]=V[Z++]+W;Z++});let B=0;F.forEach((H,Q)=>{s(H,J=>{M[Q+W]=J,++B===F.length&&N()})})})}else N()}function N(){c({chars:b,fonts:M})}function I(z,F){for(let V=0;V<F.length;V++){const[W,Z=W]=F[V];if(W<=z&&z<=Z)return!0}return!1}}}const Xk=lm({name:"FontResolver",dependencies:[qk,jk,Wk],init(i,e,t){return i(e,t())}});function Yk(i,e){const n=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,a="[^\\S\\u00A0]",s=new RegExp(`${a}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function o({text:M,lang:R,fonts:C,style:E,weight:N,preResolvedFonts:I,unicodeFontsURL:z},F){const V=({chars:W,fonts:Z})=>{let B,H;const Q=[];for(let J=0;J<W.length;J++)W[J]!==H?(H=W[J],Q.push(B={start:J,end:J,fontObj:Z[W[J]]})):B.end=J;F(Q)};I?V(I):i(M,V,{lang:R,fonts:C,style:E,weight:N,unicodeFontsURL:z})}function c({text:M="",font:R,lang:C,sdfGlyphSize:E=64,fontSize:N=400,fontWeight:I=1,fontStyle:z="normal",letterSpacing:F=0,lineHeight:V="normal",maxWidth:W=1/0,direction:Z,textAlign:B="left",textIndent:H=0,whiteSpace:Q="normal",overflowWrap:J="normal",anchorX:oe=0,anchorY:re=0,metricsOnly:ve=!1,unicodeFontsURL:q,preResolvedFonts:K=null,includeCaretPositions:te=!1,chunkedBoundsSize:de=8192,colorRanges:ce=null},G){const ne=y(),fe={fontLoad:0,typesetting:0};M.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),M=M.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),N=+N,F=+F,W=+W,V=V||"normal",H=+H,o({text:M,lang:C,style:z,weight:I,fonts:typeof R=="string"?[{src:R}]:R,unicodeFontsURL:q,preResolvedFonts:K},me=>{fe.fontLoad=y()-ne;const xe=isFinite(W);let he=null,_e=null,Ae=null,$e=null,et=null,qe=null,nt=null,St=null,Ne=0,Ve=0,Fe=Q!=="nowrap";const rt=new Map,ae=y();let ut=H,Ze=0,Le=new x;const tt=[Le];me.forEach(De=>{const{fontObj:Ce}=De,{ascender:vt,descender:ht,unitsPerEm:bt,lineGap:Ct,capHeight:Ge,xHeight:Qe}=Ce;let st=rt.get(Ce);if(!st){const it=N/bt,lt=V==="normal"?(vt-ht+Ct)*it:V*N,At=(lt-(vt-ht)*it)/2,ct=Math.min(lt,(vt-ht)*it),je=(vt+ht)/2*it+ct/2;st={index:rt.size,src:Ce.src,fontObj:Ce,fontSizeMult:it,unitsPerEm:bt,ascender:vt*it,descender:ht*it,capHeight:Ge*it,xHeight:Qe*it,lineHeight:lt,baseline:-At-vt*it,caretTop:je,caretBottom:je-ct},rt.set(Ce,st)}const{fontSizeMult:ge}=st,we=M.slice(De.start,De.end+1);let xt,Se;Ce.forEachGlyph(we,N,F,(it,lt,At,ct)=>{lt+=Ze,ct+=De.start,xt=lt,Se=it;const je=M.charAt(ct),mt=it.advanceWidth*ge,Rt=Le.count;let Lt;if("isEmpty"in it||(it.isWhitespace=!!je&&new RegExp(a).test(je),it.canBreakAfter=!!je&&s.test(je),it.isEmpty=it.xMin===it.xMax||it.yMin===it.yMax||n.test(je)),!it.isWhitespace&&!it.isEmpty&&Ve++,Fe&&xe&&!it.isWhitespace&&lt+mt+ut>W&&Rt){if(Le.glyphAt(Rt-1).glyphObj.canBreakAfter)Lt=new x,ut=-lt;else for(let bn=Rt;bn--;)if(bn===0&&J==="break-word"){Lt=new x,ut=-lt;break}else if(Le.glyphAt(bn).glyphObj.canBreakAfter){Lt=Le.splitAt(bn+1);const Bn=Lt.glyphAt(0).x;ut-=Bn;for(let Ai=Lt.count;Ai--;)Lt.glyphAt(Ai).x-=Bn;break}Lt&&(Le.isSoftWrapped=!0,Le=Lt,tt.push(Le),Ne=W)}let qt=Le.glyphAt(Le.count);qt.glyphObj=it,qt.x=lt+ut,qt.y=At,qt.width=mt,qt.charIndex=ct,qt.fontData=st,je===`
`&&(Le=new x,tt.push(Le),ut=-(lt+mt+F*N)+H)}),Ze=xt+Se.advanceWidth*ge+F*N});let $=0;tt.forEach(De=>{let Ce=!0;for(let vt=De.count;vt--;){const ht=De.glyphAt(vt);Ce&&!ht.glyphObj.isWhitespace&&(De.width=ht.x+ht.width,De.width>Ne&&(Ne=De.width),Ce=!1);let{lineHeight:bt,capHeight:Ct,xHeight:Ge,baseline:Qe}=ht.fontData;bt>De.lineHeight&&(De.lineHeight=bt);const st=Qe-De.baseline;st<0&&(De.baseline+=st,De.cap+=st,De.ex+=st),De.cap=Math.max(De.cap,De.baseline+Ct),De.ex=Math.max(De.ex,De.baseline+Ge)}De.baseline-=$,De.cap-=$,De.ex-=$,$+=De.lineHeight});let Y=0,ye=0;if(oe&&(typeof oe=="number"?Y=-oe:typeof oe=="string"&&(Y=-Ne*(oe==="left"?0:oe==="center"?.5:oe==="right"?1:d(oe)))),re&&(typeof re=="number"?ye=-re:typeof re=="string"&&(ye=re==="top"?0:re==="top-baseline"?-tt[0].baseline:re==="top-cap"?-tt[0].cap:re==="top-ex"?-tt[0].ex:re==="middle"?$/2:re==="bottom"?$:re==="bottom-baseline"?-tt[tt.length-1].baseline:d(re)*$)),!ve){const De=e.getEmbeddingLevels(M,Z);he=new Uint16Array(Ve),_e=new Uint8Array(Ve),Ae=new Float32Array(Ve*2),$e={},nt=[1/0,1/0,-1/0,-1/0],St=[],te&&(qe=new Float32Array(M.length*4)),ce&&(et=new Uint8Array(Ve*3));let Ce=0,vt=-1,ht=-1,bt,Ct;if(tt.forEach((Ge,Qe)=>{let{count:st,width:ge}=Ge;if(st>0){let we=0;for(let ct=st;ct--&&Ge.glyphAt(ct).glyphObj.isWhitespace;)we++;let xt=0,Se=0;if(B==="center")xt=(Ne-ge)/2;else if(B==="right")xt=Ne-ge;else if(B==="justify"&&Ge.isSoftWrapped){let ct=0;for(let je=st-we;je--;)Ge.glyphAt(je).glyphObj.isWhitespace&&ct++;Se=(Ne-ge)/ct}if(Se||xt){let ct=0;for(let je=0;je<st;je++){let mt=Ge.glyphAt(je);const Rt=mt.glyphObj;mt.x+=xt+ct,Se!==0&&Rt.isWhitespace&&je<st-we&&(ct+=Se,mt.width+=Se)}}const it=e.getReorderSegments(M,De,Ge.glyphAt(0).charIndex,Ge.glyphAt(Ge.count-1).charIndex);for(let ct=0;ct<it.length;ct++){const[je,mt]=it[ct];let Rt=1/0,Lt=-1/0;for(let qt=0;qt<st;qt++)if(Ge.glyphAt(qt).charIndex>=je){let bn=qt,Bn=qt;for(;Bn<st;Bn++){let Ai=Ge.glyphAt(Bn);if(Ai.charIndex>mt)break;Bn<st-we&&(Rt=Math.min(Rt,Ai.x),Lt=Math.max(Lt,Ai.x+Ai.width))}for(let Ai=bn;Ai<Bn;Ai++){const ia=Ge.glyphAt(Ai);ia.x=Lt-(ia.x+ia.width-Rt)}break}}let lt;const At=ct=>lt=ct;for(let ct=0;ct<st;ct++){const je=Ge.glyphAt(ct);lt=je.glyphObj;const mt=lt.index,Rt=De.levels[je.charIndex]&1;if(Rt){const Lt=e.getMirroredCharacter(M[je.charIndex]);Lt&&je.fontData.fontObj.forEachGlyph(Lt,0,0,At)}if(te){const{charIndex:Lt,fontData:qt}=je,bn=je.x+Y,Bn=je.x+je.width+Y;qe[Lt*4]=Rt?Bn:bn,qe[Lt*4+1]=Rt?bn:Bn,qe[Lt*4+2]=Ge.baseline+qt.caretBottom+ye,qe[Lt*4+3]=Ge.baseline+qt.caretTop+ye;const Ai=Lt-vt;Ai>1&&g(qe,vt,Ai),vt=Lt}if(ce){const{charIndex:Lt}=je;for(;Lt>ht;)ht++,ce.hasOwnProperty(ht)&&(Ct=ce[ht])}if(!lt.isWhitespace&&!lt.isEmpty){const Lt=Ce++,{fontSizeMult:qt,src:bn,index:Bn}=je.fontData,Ai=$e[bn]||($e[bn]={});Ai[mt]||(Ai[mt]={path:lt.path,pathBounds:[lt.xMin,lt.yMin,lt.xMax,lt.yMax]});const ia=je.x+Y,Ca=je.y+Ge.baseline+ye;Ae[Lt*2]=ia,Ae[Lt*2+1]=Ca;const Yn=ia+lt.xMin*qt,kt=Ca+lt.yMin*qt,Fi=ia+lt.xMax*qt,si=Ca+lt.yMax*qt;Yn<nt[0]&&(nt[0]=Yn),kt<nt[1]&&(nt[1]=kt),Fi>nt[2]&&(nt[2]=Fi),si>nt[3]&&(nt[3]=si),Lt%de===0&&(bt={start:Lt,end:Lt,rect:[1/0,1/0,-1/0,-1/0]},St.push(bt)),bt.end++;const Hn=bt.rect;if(Yn<Hn[0]&&(Hn[0]=Yn),kt<Hn[1]&&(Hn[1]=kt),Fi>Hn[2]&&(Hn[2]=Fi),si>Hn[3]&&(Hn[3]=si),he[Lt]=mt,_e[Lt]=Bn,ce){const cn=Lt*3;et[cn]=Ct>>16&255,et[cn+1]=Ct>>8&255,et[cn+2]=Ct&255}}}}}),qe){const Ge=M.length-vt;Ge>1&&g(qe,vt,Ge)}}const Be=[];rt.forEach(({index:De,src:Ce,unitsPerEm:vt,ascender:ht,descender:bt,lineHeight:Ct,capHeight:Ge,xHeight:Qe})=>{Be[De]={src:Ce,unitsPerEm:vt,ascender:ht,descender:bt,lineHeight:Ct,capHeight:Ge,xHeight:Qe}}),fe.typesetting=y()-ae,G({glyphIds:he,glyphFontIndices:_e,glyphPositions:Ae,glyphData:$e,fontData:Be,caretPositions:qe,glyphColors:et,chunkedBounds:St,fontSize:N,topBaseline:ye+tt[0].baseline,blockBounds:[Y,ye-$,Y+Ne,ye],visibleBounds:nt,timings:fe})})}function f(M,R){c({...M,metricsOnly:!0},C=>{const[E,N,I,z]=C.blockBounds;R({width:I-E,height:z-N})})}function d(M){let R=M.match(/^([\d.]+)%$/),C=R?parseFloat(R[1]):NaN;return isNaN(C)?0:C/100}function g(M,R,C){const E=M[R*4],N=M[R*4+1],I=M[R*4+2],z=M[R*4+3],F=(N-E)/C;for(let V=0;V<C;V++){const W=(R+V)*4;M[W]=E+F*V,M[W+1]=E+F*(V+1),M[W+2]=I,M[W+3]=z}}function y(){return(self.performance||Date).now()}function x(){this.data=[]}const b=["glyphObj","x","y","width","charIndex","fontData"];return x.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/b.length)},glyphAt(M){let R=x.flyweight;return R.data=this.data,R.index=M,R},splitAt(M){let R=new x;return R.data=this.data.splice(M*b.length),R}},x.flyweight=b.reduce((M,R,C,E)=>(Object.defineProperty(M,R,{get(){return this.data[this.index*b.length+C]},set(N){this.data[this.index*b.length+C]=N}}),M),{data:null,index:0}),{typeset:c,measure:f}}const ad=()=>(self.performance||Date).now(),J1=yD();let _3;function Zk(i,e,t,n,a,s,o,c,f,d,g=!0){return g?Qk(i,e,t,n,a,s,o,c,f,d).then(null,y=>(_3||(console.warn("WebGL SDF generation failed, falling back to JS",y),_3=!0),S3(i,e,t,n,a,s,o,c,f,d))):S3(i,e,t,n,a,s,o,c,f,d)}const $y=[],Kk=5;let $b=0;function xD(){const i=ad();for(;$y.length&&ad()-i<Kk;)$y.shift()();$b=$y.length?setTimeout(xD,0):0}const Qk=(...i)=>new Promise((e,t)=>{$y.push(()=>{const n=ad();try{J1.webgl.generateIntoCanvas(...i),e({timing:ad()-n})}catch(a){t(a)}}),$b||($b=setTimeout(xD,0))}),Jk=4,$k=2e3,x3={};let eV=0;function S3(i,e,t,n,a,s,o,c,f,d){const g="TroikaTextSDFGenerator_JS_"+eV++%Jk;let y=x3[g];return y||(y=x3[g]={workerModule:lm({name:g,workerId:g,dependencies:[yD,ad],init(x,b){const M=x().javascript.generate;return function(...R){const C=b();return{textureData:M(...R),timing:b()-C}}},getTransferables(x){return[x.textureData.buffer]}}),requests:0,idleTimer:null}),y.requests++,clearTimeout(y.idleTimer),y.workerModule(i,e,t,n,a,s).then(({textureData:x,timing:b})=>{const M=ad(),R=new Uint8Array(x.length*4);for(let C=0;C<x.length;C++)R[C*4+d]=x[C];return J1.webglUtils.renderImageData(o,R,c,f,i,e,1<<3-d),b+=ad()-M,--y.requests===0&&(y.idleTimer=setTimeout(()=>{Lk(g)},$k)),{timing:b}})}function tV(i){i._warm||(J1.webgl.isSupported(i),i._warm=!0)}const nV=J1.webglUtils.resizeWebGLCanvasWithoutClearing,Ig={unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},iV=new Ht;function Dp(){return(self.performance||Date).now()}const b3=Object.create(null);function SD(i,e){i=rV({},i);const t=Dp(),n=[];if(i.font&&n.push({label:"user",src:oV(i.font)}),i.font=n,i.text=""+i.text,i.sdfGlyphSize=i.sdfGlyphSize||Ig.sdfGlyphSize,i.unicodeFontsURL=i.unicodeFontsURL||Ig.unicodeFontsURL,i.colorRanges!=null){let x={};for(let b in i.colorRanges)if(i.colorRanges.hasOwnProperty(b)){let M=i.colorRanges[b];typeof M!="number"&&(M=iV.set(M).getHex()),x[b]=M}i.colorRanges=x}Object.freeze(i);const{textureWidth:a,sdfExponent:s}=Ig,{sdfGlyphSize:o}=i,c=a/o*4;let f=b3[o];if(!f){const x=document.createElement("canvas");x.width=a,x.height=o*256/c,f=b3[o]={glyphCount:0,sdfGlyphSize:o,sdfCanvas:x,sdfTexture:new pa(x,void 0,void 0,void 0,Di,Di),contextLost:!1,glyphsByFont:new Map},f.sdfTexture.generateMipmaps=!1,aV(f)}const{sdfTexture:d,sdfCanvas:g}=f;MD(i).then(x=>{const{glyphIds:b,glyphFontIndices:M,fontData:R,glyphPositions:C,fontSize:E,timings:N}=x,I=[],z=new Float32Array(b.length*4);let F=0,V=0;const W=Dp(),Z=R.map(oe=>{let re=f.glyphsByFont.get(oe.src);return re||f.glyphsByFont.set(oe.src,re=new Map),re});b.forEach((oe,re)=>{const ve=M[re],{src:q,unitsPerEm:K}=R[ve];let te=Z[ve].get(oe);if(!te){const{path:fe,pathBounds:me}=x.glyphData[q][oe],xe=Math.max(me[2]-me[0],me[3]-me[1])/o*(Ig.sdfMargin*o+.5),he=f.glyphCount++,_e=[me[0]-xe,me[1]-xe,me[2]+xe,me[3]+xe];Z[ve].set(oe,te={path:fe,atlasIndex:he,sdfViewBox:_e}),I.push(te)}const{sdfViewBox:de}=te,ce=C[V++],G=C[V++],ne=E/K;z[F++]=ce+de[0]*ne,z[F++]=G+de[1]*ne,z[F++]=ce+de[2]*ne,z[F++]=G+de[3]*ne,b[re]=te.atlasIndex}),N.quads=(N.quads||0)+(Dp()-W);const B=Dp();N.sdf={};const H=g.height,Q=Math.ceil(f.glyphCount/c),J=Math.pow(2,Math.ceil(Math.log2(Q*o)));J>H&&(console.info(`Increasing SDF texture size ${H}->${J}`),nV(g,a,J),d.dispose()),Promise.all(I.map(oe=>bD(oe,f,i.gpuAccelerateSDF).then(({timing:re})=>{N.sdf[oe.atlasIndex]=re}))).then(()=>{I.length&&!f.contextLost&&(TD(f),d.needsUpdate=!0),N.sdfTotal=Dp()-B,N.total=Dp()-t,e(Object.freeze({parameters:i,sdfTexture:d,sdfGlyphSize:o,sdfExponent:s,glyphBounds:z,glyphAtlasIndices:b,glyphColors:x.glyphColors,caretPositions:x.caretPositions,chunkedBounds:x.chunkedBounds,ascender:x.ascender,descender:x.descender,lineHeight:x.lineHeight,capHeight:x.capHeight,xHeight:x.xHeight,topBaseline:x.topBaseline,blockBounds:x.blockBounds,visibleBounds:x.visibleBounds,timings:x.timings}))})}),Promise.resolve().then(()=>{f.contextLost||tV(g)})}function bD({path:i,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:n,sdfCanvas:a,contextLost:s},o){if(s)return Promise.resolve({timing:-1});const{textureWidth:c,sdfExponent:f}=Ig,d=Math.max(t[2]-t[0],t[3]-t[1]),g=Math.floor(e/4),y=g%(c/n)*n,x=Math.floor(g/(c/n))*n,b=e%4;return Zk(n,n,i,t,d,f,a,y,x,b,o)}function aV(i){const e=i.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),i.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),i.contextLost=!1;const n=[];i.glyphsByFont.forEach(a=>{a.forEach(s=>{n.push(bD(s,i,!0))})}),Promise.all(n).then(()=>{TD(i),i.sdfTexture.needsUpdate=!0})})}function sV({font:i,characters:e,sdfGlyphSize:t},n){let a=Array.isArray(e)?e.join(`
`):""+e;SD({font:i,sdfGlyphSize:t,text:a},n)}function rV(i,e){for(let t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i}let Iy;function oV(i){return Iy||(Iy=typeof document>"u"?{}:document.createElement("a")),Iy.href=i,Iy.href}function TD(i){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=i,{width:n,height:a}=e,s=i.sdfCanvas.getContext("webgl");let o=t.image.data;(!o||o.length!==n*a*4)&&(o=new Uint8Array(n*a*4),t.image={width:n,height:a,data:o},t.flipY=!1,t.isDataTexture=!0),s.readPixels(0,0,n,a,s.RGBA,s.UNSIGNED_BYTE,o)}}const lV=lm({name:"Typesetter",dependencies:[Yk,Xk,Nk],init(i,e,t){return i(e,t())}}),MD=lm({name:"Typesetter",dependencies:[lV],init(i){return function(e){return new Promise(t=>{i.typeset(e,t)})}},getTransferables(i){const e=[];for(let t in i)i[t]&&i[t].buffer&&e.push(i[t].buffer);return e}});MD.onMainThread;const T3={};function cV(i){let e=T3[i];return e||(e=T3[i]=new ku(1,1,i,i).translate(.5,.5,0)),e}const uV="aTroikaGlyphBounds",M3="aTroikaGlyphIndex",fV="aTroikaGlyphColor";class hV extends dT{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new As,this.boundingBox=new Ms}computeBoundingSphere(){}computeBoundingBox(){}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=cV(e);["position","normal","uv"].forEach(n=>{this.attributes[n]=t.attributes[n].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,n,a,s){this.updateAttributeData(uV,e,4),this.updateAttributeData(M3,t,1),this.updateAttributeData(fV,s,3),this._blockBounds=n,this._chunkedBounds=a,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:n}=this;if(t){const{PI:a,floor:s,min:o,max:c,sin:f,cos:d}=Math,g=a/2,y=a*2,x=Math.abs(t),b=e[0]/x,M=e[2]/x,R=s((b+g)/y)!==s((M+g)/y)?-x:o(f(b)*x,f(M)*x),C=s((b-g)/y)!==s((M-g)/y)?x:c(f(b)*x,f(M)*x),E=s((b+a)/y)!==s((M+a)/y)?x*2:c(x-d(b)*x,x-d(M)*x);n.min.set(R,e[1],t<0?-E:0),n.max.set(C,e[3],t<0?0:E)}else n.min.set(e[0],e[1],0),n.max.set(e[2],e[3],0);n.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(M3).count,n=this._chunkedBounds;if(n)for(let a=n.length;a--;){t=n[a].end;let s=n[a].rect;if(s[1]<e.w&&s[3]>e.y&&s[0]<e.z&&s[2]>e.x)break}this.instanceCount=t}updateAttributeData(e,t,n){const a=this.getAttribute(e);t?a&&a.array.length===t.length?(a.array.set(t),a.needsUpdate=!0):(this.setAttribute(e,new ud(t,n)),delete this._maxInstanceCount,this.dispose()):a&&this.deleteAttribute(e)}}const dV=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,pV=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,mV=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,gV=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function vV(i){const e=Jb(i,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new dt},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Ri(0,0,0,0)},uTroikaClipRect:{value:new Ri(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new dt},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Ht},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new En},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:dV,vertexTransform:pV,fragmentDefs:mV,fragmentColorTransform:gV,customRewriter({vertexShader:t,fragmentShader:n}){let a=/\buniform\s+vec3\s+diffuse\b/;return a.test(n)&&(n=n.replace(a,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),a.test(t)||(t=t.replace(_D,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:n}}});return e.transparent=!0,e.forceSinglePass=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const MT=new Fu({color:16777215,side:cl,transparent:!0}),A3=8421504,E3=new gn,Py=new pe,nb=new pe,wg=[],yV=new pe,ib="+x+y";function w3(i){return Array.isArray(i)?i[0]:i}let AD=()=>{const i=new ma(new ku(1,1),MT);return AD=()=>i,i},ED=()=>{const i=new ma(new ku(1,1,32,1),MT);return ED=()=>i,i};const _V={type:"syncstart"},xV={type:"synccomplete"},wD=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],SV=wD.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let CD=class extends ma{constructor(){const e=new hV;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=A3,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=ib,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(_V),SD({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const n=this._queuedSyncs;n&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{n.forEach(a=>a&&a())})),this.dispatchEvent(xV),e&&e()})))}onBeforeRender(e,t,n,a,s,o){this.sync(),s.isTroikaTextMaterial&&this._prepareForRender(s)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(e){return vV(e)}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=MT.clone());if((!e||!e.isDerivedFrom(t))&&(e=this._derivedMaterial=this.createDerivedMaterial(t),t.addEventListener("dispose",function n(){t.removeEventListener("dispose",n),e.dispose()})),this.hasOutline()){let n=e._outlineMtl;return n||(n=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),n.isTextOutlineMaterial=!0,n.depthWrite=!1,n.map=null,e.addEventListener("dispose",function a(){e.removeEventListener("dispose",a),n.dispose()})),[n,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return w3(this.material).getDepthMaterial()}set customDepthMaterial(e){}get customDistanceMaterial(){return w3(this.material).getDistanceMaterial()}set customDistanceMaterial(e){}_prepareForRender(e){const t=e.isTextOutlineMaterial,n=e.uniforms,a=this.textRenderInfo;if(a){const{sdfTexture:c,blockBounds:f}=a;n.uTroikaSDFTexture.value=c,n.uTroikaSDFTextureSize.value.set(c.image.width,c.image.height),n.uTroikaSDFGlyphSize.value=a.sdfGlyphSize,n.uTroikaSDFExponent.value=a.sdfExponent,n.uTroikaTotalBounds.value.fromArray(f),n.uTroikaUseGlyphColors.value=!t&&!!a.glyphColors;let d=0,g=0,y=0,x,b,M,R=0,C=0;if(t){let{outlineWidth:N,outlineOffsetX:I,outlineOffsetY:z,outlineBlur:F,outlineOpacity:V}=this;d=this._parsePercent(N)||0,g=Math.max(0,this._parsePercent(F)||0),x=V,R=this._parsePercent(I)||0,C=this._parsePercent(z)||0}else y=Math.max(0,this._parsePercent(this.strokeWidth)||0),y&&(M=this.strokeColor,n.uTroikaStrokeColor.value.set(M??A3),b=this.strokeOpacity,b==null&&(b=1)),x=this.fillOpacity;n.uTroikaEdgeOffset.value=d,n.uTroikaPositionOffset.value.set(R,C),n.uTroikaBlurRadius.value=g,n.uTroikaStrokeWidth.value=y,n.uTroikaStrokeOpacity.value=b,n.uTroikaFillOpacity.value=x??1,n.uTroikaCurveRadius.value=this.curveRadius||0;let E=this.clipRect;if(E&&Array.isArray(E)&&E.length===4)n.uTroikaClipRect.value.fromArray(E);else{const N=(this.fontSize||.1)*100;n.uTroikaClipRect.value.set(f[0]-N,f[1]-N,f[2]+N,f[3]+N)}this.geometry.applyClipRect(n.uTroikaClipRect.value)}n.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const s=t?this.outlineColor||0:this.color;if(s==null)delete e.color;else{const c=e.hasOwnProperty("color")?e.color:e.color=new Ht;(s!==c._input||typeof s=="object")&&c.set(c._input=s)}let o=this.orientation||ib;if(o!==e._orientation){let c=n.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let f=o!==ib&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(f){let[,d,g,y,x]=f;Py.set(0,0,0)[g]=d==="-"?1:-1,nb.set(0,0,0)[x]=y==="-"?-1:1,E3.lookAt(yV,Py.cross(nb),nb),c.setFromMatrix4(E3)}else c.identity();e._orientation=o}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),n=t?parseFloat(t[1]):NaN;e=(isNaN(n)?0:n/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new dt){t.copy(e);const n=this.curveRadius;return n&&(t.x=Math.atan2(e.x,Math.abs(n)-Math.abs(e.z))*Math.abs(n)),t}worldPositionToTextCoords(e,t=new dt){return Py.copy(e),this.localPositionToTextCoords(this.worldToLocal(Py),t)}raycast(e,t){const{textRenderInfo:n,curveRadius:a}=this;if(n){const s=n.blockBounds,o=a?ED():AD(),c=o.geometry,{position:f,uv:d}=c.attributes;for(let g=0;g<d.count;g++){let y=s[0]+d.getX(g)*(s[2]-s[0]);const x=s[1]+d.getY(g)*(s[3]-s[1]);let b=0;a&&(b=a-Math.cos(y/a)*a,y=Math.sin(y/a)*a),f.setXYZ(g,y,x,b)}c.boundingSphere=this.geometry.boundingSphere,c.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,wg.length=0,o.raycast(e,wg);for(let g=0;g<wg.length;g++)wg[g].object=this,t.push(wg[g])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,SV.forEach(n=>{this[n]=e[n]}),this}clone(){return new this.constructor().copy(this)}};wD.forEach(i=>{const e="_private_"+i;Object.defineProperty(CD.prototype,i,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});new Ms;new Ht;const bV=ue.forwardRef(({sdfGlyphSize:i=64,anchorX:e="center",anchorY:t="middle",font:n,fontSize:a=1,children:s,characters:o,onSync:c,...f},d)=>{const g=Pr(({invalidate:M})=>M),[y]=ue.useState(()=>new CD),[x,b]=ue.useMemo(()=>{const M=[];let R="";return ue.Children.forEach(s,C=>{typeof C=="string"||typeof C=="number"?R+=C:M.push(C)}),[M,R]},[s]);return c8(()=>new Promise(M=>sV({font:n,characters:o},M)),["troika-text",n,o]),ue.useLayoutEffect(()=>{y.sync(()=>{g(),c&&c(y)})}),ue.useEffect(()=>()=>y.dispose(),[y]),ue.createElement("primitive",$p({object:y,ref:d,font:n,text:b,anchorX:e,anchorY:t,fontSize:a,sdfGlyphSize:i},f),x)});function TV(i,e,t){const n=Pr(b=>b.size),a=Pr(b=>b.viewport),s=typeof i=="number"?i:n.width*a.dpr,o=n.height*a.dpr,c=(typeof i=="number"?t:i)||{},{samples:f=0,depth:d,...g}=c,y=d??c.depthBuffer,x=ue.useMemo(()=>{const b=new ro(s,o,{minFilter:Di,magFilter:Di,type:tc,...g});return y&&(b.depthTexture=new fd(s,o,ar)),b.samples=f,b},[]);return ue.useLayoutEffect(()=>{x.setSize(s,o),f&&(x.samples=f)},[f,x,s,o]),ue.useEffect(()=>()=>x.dispose(),[]),x}const MV=i=>typeof i=="function",AV=ue.forwardRef(({envMap:i,resolution:e=256,frames:t=1/0,makeDefault:n,children:a,...s},o)=>{const c=Pr(({set:C})=>C),f=Pr(({camera:C})=>C),d=Pr(({size:C})=>C),g=ue.useRef(null);ue.useImperativeHandle(o,()=>g.current,[]);const y=ue.useRef(null),x=TV(e);ue.useLayoutEffect(()=>{s.manual||(g.current.aspect=d.width/d.height)},[d,s]),ue.useLayoutEffect(()=>{g.current.updateProjectionMatrix()});let b=0,M=null;const R=MV(a);return K1(C=>{R&&(t===1/0||b<t)&&(y.current.visible=!1,C.gl.setRenderTarget(x),M=C.scene.background,i&&(C.scene.background=i),C.gl.render(C.scene,g.current),C.scene.background=M,C.gl.setRenderTarget(null),y.current.visible=!0,b++)}),ue.useLayoutEffect(()=>{if(n){const C=f;return c(()=>({camera:g.current})),()=>c(()=>({camera:C}))}},[g,n,c]),ue.createElement(ue.Fragment,null,ue.createElement("perspectiveCamera",$p({ref:g},s),!R&&a),ue.createElement("group",{ref:y},R&&a(x.texture)))}),EV=ue.forwardRef(({makeDefault:i,camera:e,regress:t,domElement:n,enableDamping:a=!0,keyEvents:s=!1,onChange:o,onStart:c,onEnd:f,...d},g)=>{const y=Pr(V=>V.invalidate),x=Pr(V=>V.camera),b=Pr(V=>V.gl),M=Pr(V=>V.events),R=Pr(V=>V.setEvents),C=Pr(V=>V.set),E=Pr(V=>V.get),N=Pr(V=>V.performance),I=e||x,z=n||M.connected||b.domElement,F=ue.useMemo(()=>new Ek(I),[I]);return K1(()=>{F.enabled&&F.update()},-1),ue.useEffect(()=>(s&&F.connect(s===!0?z:s),F.connect(z),()=>{F.dispose()}),[s,z,t,F,y]),ue.useEffect(()=>{const V=B=>{y(),t&&N.regress(),o&&o(B)},W=B=>{c&&c(B)},Z=B=>{f&&f(B)};return F.addEventListener("change",V),F.addEventListener("start",W),F.addEventListener("end",Z),()=>{F.removeEventListener("start",W),F.removeEventListener("end",Z),F.removeEventListener("change",V)}},[o,c,f,F,y,R]),ue.useEffect(()=>{if(i){const V=E().controls;return C({controls:F}),()=>C({controls:V})}},[i,F]),ue.createElement("primitive",$p({ref:g,object:F,enableDamping:a},d))});function wV({track:i,position:e,isSelected:t,onClick:n}){const a=ue.useRef(null),s=ue.useRef(null),o=(i.headingDeg-90)*Math.PI/180;K1(({clock:f})=>{if(s.current&&t){const d=1+Math.sin(f.elapsedTime*3)*.1;s.current.scale.setScalar(d)}});const c=()=>i.verticalRateFpm>500?"#00ff88":i.verticalRateFpm<-500?"#00d4ff":"#ffffff";return O.jsxs("group",{position:e,children:[t&&O.jsxs("mesh",{ref:s,children:[O.jsx("sphereGeometry",{args:[.3,16,16]}),O.jsx("meshBasicMaterial",{color:"#00ff88",transparent:!0,opacity:.3})]}),O.jsxs("mesh",{ref:a,rotation:[0,-o,0],onClick:f=>{f.stopPropagation(),n()},children:[O.jsx("coneGeometry",{args:[.08,.25,8]}),O.jsx("meshStandardMaterial",{color:c(),emissive:t?"#00ff88":"#000000",emissiveIntensity:t?.5:0})]}),O.jsxs("line",{children:[O.jsx("bufferGeometry",{attach:"geometry",children:O.jsx("bufferAttribute",{attach:"attributes-position",args:[new Float32Array([0,0,0,0,-e[1],0]),3]})}),O.jsx("lineBasicMaterial",{color:"#00ff8844",transparent:!0,opacity:.3})]}),t&&O.jsx(yk,{position:[.3,.2,0],style:{pointerEvents:"none"},children:O.jsxs("div",{style:{background:"rgba(13, 17, 23, 0.9)",border:"1px solid #00ff88",borderRadius:4,padding:"4px 8px",fontFamily:"'JetBrains Mono', monospace",fontSize:10,color:"#00ff88",whiteSpace:"nowrap"},children:[O.jsx("div",{children:i.callsign}),O.jsxs("div",{children:["FL",Math.round(i.altitudeFt/100)]}),O.jsxs("div",{children:[i.speedKt,"KT"]})]})})]})}const CV=[{altitude:1e4,label:"FL100",color:"#00ff8822"},{altitude:2e4,label:"FL200",color:"#00ff8833"},{altitude:3e4,label:"FL300",color:"#00ff8844"},{altitude:4e4,label:"FL400",color:"#00ff8855"}];function RV(){const i=ue.useMemo(()=>CV.map(({altitude:e,label:t,color:n})=>({y:e/1e4,label:t,color:n})),[]);return O.jsx(O.Fragment,{children:i.map(({y:e,label:t,color:n})=>O.jsxs("group",{position:[0,e,0],children:[O.jsxs("mesh",{rotation:[-Math.PI/2,0,0],children:[O.jsx("planeGeometry",{args:[40,40]}),O.jsx("meshBasicMaterial",{color:n,transparent:!0,opacity:.1,side:2})]}),O.jsx(bV,{position:[-18,0,0],fontSize:.3,color:"#00ff88",anchorX:"left",anchorY:"middle",children:t})]},t))})}function DV(i,e,t){const a=(e-t[1])*Math.cos(t[0]*Math.PI/180)*60*1,s=(i-t[0])*60*(100/100);return[a,-s]}function LV(i){return i/1e4}function OV({tracks:i,selectedTrackId:e,onSelectTrack:t,mapCenter:n}){const a=Hs(o=>o.viewMode),s=()=>a==="3d"?[8,10,12]:[0,15,.01];return O.jsx(lk,{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},gl:{antialias:!0,alpha:!0},children:O.jsxs(ue.Suspense,{fallback:null,children:[O.jsx(AV,{makeDefault:!0,position:s(),fov:a==="3d"?50:30}),a==="3d"&&O.jsx(EV,{enablePan:!0,enableZoom:!0,enableRotate:!0,maxPolarAngle:Math.PI/2.2,minPolarAngle:Math.PI/6,minDistance:5,maxDistance:40}),O.jsx("ambientLight",{intensity:.4}),O.jsx("directionalLight",{position:[10,10,5],intensity:.6}),O.jsxs("mesh",{rotation:[-Math.PI/2,0,0],position:[0,0,0],children:[O.jsx("planeGeometry",{args:[50,50,50,50]}),O.jsx("meshBasicMaterial",{color:"#0a0e14",wireframe:!0,opacity:.3,transparent:!0})]}),O.jsx(RV,{}),i.map(o=>{const[c,f]=DV(o.latitudeDeg,o.longitudeDeg,n),d=LV(o.altitudeFt);return O.jsx(wV,{track:o,position:[c,d,f],isSelected:o.trackId===e,onClick:()=>t(o.trackId)},o.trackId)})]})})}const AT=ue.createContext({});function ET(i){const e=ue.useRef(null);return e.current===null&&(e.current=i()),e.current}const wT=typeof window<"u",RD=wT?ue.useLayoutEffect:ue.useEffect,$1=ue.createContext(null);function CT(i,e){i.indexOf(e)===-1&&i.push(e)}function RT(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}const zu=(i,e,t)=>t>e?e:t<i?i:t;let DT=()=>{};const Bu={},DD=i=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(i);function LD(i){return typeof i=="object"&&i!==null}const OD=i=>/^0[^.\s]+$/u.test(i);function LT(i){let e;return()=>(e===void 0&&(e=i()),e)}const hl=i=>i,NV=(i,e)=>t=>e(i(t)),B0=(...i)=>i.reduce(NV),_0=(i,e,t)=>{const n=e-i;return n===0?1:(t-i)/n};class OT{constructor(){this.subscriptions=[]}add(e){return CT(this.subscriptions,e),()=>RT(this.subscriptions,e)}notify(e,t,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,t,n);else for(let s=0;s<a;s++){const o=this.subscriptions[s];o&&o(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Fc=i=>i*1e3,ul=i=>i/1e3;function ND(i,e){return e?i*(1e3/e):0}const UD=(i,e,t)=>(((1-3*t+3*e)*i+(3*t-6*e))*i+3*e)*i,UV=1e-7,IV=12;function PV(i,e,t,n,a){let s,o,c=0;do o=e+(t-e)/2,s=UD(o,n,a)-i,s>0?t=o:e=o;while(Math.abs(s)>UV&&++c<IV);return o}function F0(i,e,t,n){if(i===e&&t===n)return hl;const a=s=>PV(s,0,1,i,t);return s=>s===0||s===1?s:UD(a(s),e,n)}const ID=i=>e=>e<=.5?i(2*e)/2:(2-i(2*(1-e)))/2,PD=i=>e=>1-i(1-e),zD=F0(.33,1.53,.69,.99),NT=PD(zD),BD=ID(NT),FD=i=>(i*=2)<1?.5*NT(i):.5*(2-Math.pow(2,-10*(i-1))),UT=i=>1-Math.sin(Math.acos(i)),kD=PD(UT),VD=ID(UT),zV=F0(.42,0,1,1),BV=F0(0,0,.58,1),HD=F0(.42,0,.58,1),FV=i=>Array.isArray(i)&&typeof i[0]!="number",GD=i=>Array.isArray(i)&&typeof i[0]=="number",kV={linear:hl,easeIn:zV,easeInOut:HD,easeOut:BV,circIn:UT,circInOut:VD,circOut:kD,backIn:NT,backInOut:BD,backOut:zD,anticipate:FD},VV=i=>typeof i=="string",C3=i=>{if(GD(i)){DT(i.length===4);const[e,t,n,a]=i;return F0(e,t,n,a)}else if(VV(i))return kV[i];return i},zy=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function HV(i,e){let t=new Set,n=new Set,a=!1,s=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function f(g){o.has(g)&&(d.schedule(g),i()),g(c)}const d={schedule:(g,y=!1,x=!1)=>{const M=x&&a?t:n;return y&&o.add(g),M.has(g)||M.add(g),g},cancel:g=>{n.delete(g),o.delete(g)},process:g=>{if(c=g,a){s=!0;return}a=!0,[t,n]=[n,t],t.forEach(f),t.clear(),a=!1,s&&(s=!1,d.process(g))}};return d}const GV=40;function jD(i,e){let t=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,o=zy.reduce((I,z)=>(I[z]=HV(s),I),{}),{setup:c,read:f,resolveKeyframes:d,preUpdate:g,update:y,preRender:x,render:b,postRender:M}=o,R=()=>{const I=Bu.useManualTiming?a.timestamp:performance.now();t=!1,Bu.useManualTiming||(a.delta=n?1e3/60:Math.max(Math.min(I-a.timestamp,GV),1)),a.timestamp=I,a.isProcessing=!0,c.process(a),f.process(a),d.process(a),g.process(a),y.process(a),x.process(a),b.process(a),M.process(a),a.isProcessing=!1,t&&e&&(n=!1,i(R))},C=()=>{t=!0,n=!0,a.isProcessing||i(R)};return{schedule:zy.reduce((I,z)=>{const F=o[z];return I[z]=(V,W=!1,Z=!1)=>(t||C(),F.schedule(V,W,Z)),I},{}),cancel:I=>{for(let z=0;z<zy.length;z++)o[zy[z]].cancel(I)},state:a,steps:o}}const{schedule:na,cancel:jf,state:Vs,steps:ab}=jD(typeof requestAnimationFrame<"u"?requestAnimationFrame:hl,!0);let e_;function jV(){e_=void 0}const so={now:()=>(e_===void 0&&so.set(Vs.isProcessing||Bu.useManualTiming?Vs.timestamp:performance.now()),e_),set:i=>{e_=i,queueMicrotask(jV)}},WD=i=>e=>typeof e=="string"&&e.startsWith(i),qD=WD("--"),WV=WD("var(--"),IT=i=>WV(i)?qV.test(i.split("/*")[0].trim()):!1,qV=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,cm={test:i=>typeof i=="number",parse:parseFloat,transform:i=>i},x0={...cm,transform:i=>zu(0,1,i)},By={...cm,default:1},Kg=i=>Math.round(i*1e5)/1e5,PT=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function XV(i){return i==null}const YV=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,zT=(i,e)=>t=>!!(typeof t=="string"&&YV.test(t)&&t.startsWith(i)||e&&!XV(t)&&Object.prototype.hasOwnProperty.call(t,e)),XD=(i,e,t)=>n=>{if(typeof n!="string")return n;const[a,s,o,c]=n.match(PT);return{[i]:parseFloat(a),[e]:parseFloat(s),[t]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},ZV=i=>zu(0,255,i),sb={...cm,transform:i=>Math.round(ZV(i))},$h={test:zT("rgb","red"),parse:XD("red","green","blue"),transform:({red:i,green:e,blue:t,alpha:n=1})=>"rgba("+sb.transform(i)+", "+sb.transform(e)+", "+sb.transform(t)+", "+Kg(x0.transform(n))+")"};function KV(i){let e="",t="",n="",a="";return i.length>5?(e=i.substring(1,3),t=i.substring(3,5),n=i.substring(5,7),a=i.substring(7,9)):(e=i.substring(1,2),t=i.substring(2,3),n=i.substring(3,4),a=i.substring(4,5),e+=e,t+=t,n+=n,a+=a),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const e2={test:zT("#"),parse:KV,transform:$h.transform},k0=i=>({test:e=>typeof e=="string"&&e.endsWith(i)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${i}`}),Nf=k0("deg"),kc=k0("%"),vn=k0("px"),QV=k0("vh"),JV=k0("vw"),R3={...kc,parse:i=>kc.parse(i)/100,transform:i=>kc.transform(i*100)},Ip={test:zT("hsl","hue"),parse:XD("hue","saturation","lightness"),transform:({hue:i,saturation:e,lightness:t,alpha:n=1})=>"hsla("+Math.round(i)+", "+kc.transform(Kg(e))+", "+kc.transform(Kg(t))+", "+Kg(x0.transform(n))+")"},Ka={test:i=>$h.test(i)||e2.test(i)||Ip.test(i),parse:i=>$h.test(i)?$h.parse(i):Ip.test(i)?Ip.parse(i):e2.parse(i),transform:i=>typeof i=="string"?i:i.hasOwnProperty("red")?$h.transform(i):Ip.transform(i),getAnimatableNone:i=>{const e=Ka.parse(i);return e.alpha=0,Ka.transform(e)}},$V=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function eH(i){return isNaN(i)&&typeof i=="string"&&(i.match(PT)?.length||0)+(i.match($V)?.length||0)>0}const YD="number",ZD="color",tH="var",nH="var(",D3="${}",iH=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function S0(i){const e=i.toString(),t=[],n={color:[],number:[],var:[]},a=[];let s=0;const c=e.replace(iH,f=>(Ka.test(f)?(n.color.push(s),a.push(ZD),t.push(Ka.parse(f))):f.startsWith(nH)?(n.var.push(s),a.push(tH),t.push(f)):(n.number.push(s),a.push(YD),t.push(parseFloat(f))),++s,D3)).split(D3);return{values:t,split:c,indexes:n,types:a}}function KD(i){return S0(i).values}function QD(i){const{split:e,types:t}=S0(i),n=e.length;return a=>{let s="";for(let o=0;o<n;o++)if(s+=e[o],a[o]!==void 0){const c=t[o];c===YD?s+=Kg(a[o]):c===ZD?s+=Ka.transform(a[o]):s+=a[o]}return s}}const aH=i=>typeof i=="number"?0:Ka.test(i)?Ka.getAnimatableNone(i):i;function sH(i){const e=KD(i);return QD(i)(e.map(aH))}const Wf={test:eH,parse:KD,createTransformer:QD,getAnimatableNone:sH};function rb(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*(2/3-t)*6:i}function rH({hue:i,saturation:e,lightness:t,alpha:n}){i/=360,e/=100,t/=100;let a=0,s=0,o=0;if(!e)a=s=o=t;else{const c=t<.5?t*(1+e):t+e-t*e,f=2*t-c;a=rb(f,c,i+1/3),s=rb(f,c,i),o=rb(f,c,i-1/3)}return{red:Math.round(a*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:n}}function e1(i,e){return t=>t>0?e:i}const da=(i,e,t)=>i+(e-i)*t,ob=(i,e,t)=>{const n=i*i,a=t*(e*e-n)+n;return a<0?0:Math.sqrt(a)},oH=[e2,$h,Ip],lH=i=>oH.find(e=>e.test(i));function L3(i){const e=lH(i);if(!e)return!1;let t=e.parse(i);return e===Ip&&(t=rH(t)),t}const O3=(i,e)=>{const t=L3(i),n=L3(e);if(!t||!n)return e1(i,e);const a={...t};return s=>(a.red=ob(t.red,n.red,s),a.green=ob(t.green,n.green,s),a.blue=ob(t.blue,n.blue,s),a.alpha=da(t.alpha,n.alpha,s),$h.transform(a))},t2=new Set(["none","hidden"]);function cH(i,e){return t2.has(i)?t=>t<=0?i:e:t=>t>=1?e:i}function uH(i,e){return t=>da(i,e,t)}function BT(i){return typeof i=="number"?uH:typeof i=="string"?IT(i)?e1:Ka.test(i)?O3:dH:Array.isArray(i)?JD:typeof i=="object"?Ka.test(i)?O3:fH:e1}function JD(i,e){const t=[...i],n=t.length,a=i.map((s,o)=>BT(s)(s,e[o]));return s=>{for(let o=0;o<n;o++)t[o]=a[o](s);return t}}function fH(i,e){const t={...i,...e},n={};for(const a in t)i[a]!==void 0&&e[a]!==void 0&&(n[a]=BT(i[a])(i[a],e[a]));return a=>{for(const s in n)t[s]=n[s](a);return t}}function hH(i,e){const t=[],n={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const s=e.types[a],o=i.indexes[s][n[s]],c=i.values[o]??0;t[a]=c,n[s]++}return t}const dH=(i,e)=>{const t=Wf.createTransformer(e),n=S0(i),a=S0(e);return n.indexes.var.length===a.indexes.var.length&&n.indexes.color.length===a.indexes.color.length&&n.indexes.number.length>=a.indexes.number.length?t2.has(i)&&!a.values.length||t2.has(e)&&!n.values.length?cH(i,e):B0(JD(hH(n,a),a.values),t):e1(i,e)};function $D(i,e,t){return typeof i=="number"&&typeof e=="number"&&typeof t=="number"?da(i,e,t):BT(i)(i,e)}const pH=i=>{const e=({timestamp:t})=>i(t);return{start:(t=!0)=>na.update(e,t),stop:()=>jf(e),now:()=>Vs.isProcessing?Vs.timestamp:so.now()}},eL=(i,e,t=10)=>{let n="";const a=Math.max(Math.round(e/t),2);for(let s=0;s<a;s++)n+=Math.round(i(s/(a-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},t1=2e4;function FT(i){let e=0;const t=50;let n=i.next(e);for(;!n.done&&e<t1;)e+=t,n=i.next(e);return e>=t1?1/0:e}function mH(i,e=100,t){const n=t({...i,keyframes:[0,e]}),a=Math.min(FT(n),t1);return{type:"keyframes",ease:s=>n.next(a*s).value/e,duration:ul(a)}}const gH=5;function tL(i,e,t){const n=Math.max(e-gH,0);return ND(t-i(n),e-n)}const wa={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},lb=.001;function vH({duration:i=wa.duration,bounce:e=wa.bounce,velocity:t=wa.velocity,mass:n=wa.mass}){let a,s,o=1-e;o=zu(wa.minDamping,wa.maxDamping,o),i=zu(wa.minDuration,wa.maxDuration,ul(i)),o<1?(a=d=>{const g=d*o,y=g*i,x=g-t,b=n2(d,o),M=Math.exp(-y);return lb-x/b*M},s=d=>{const y=d*o*i,x=y*t+t,b=Math.pow(o,2)*Math.pow(d,2)*i,M=Math.exp(-y),R=n2(Math.pow(d,2),o);return(-a(d)+lb>0?-1:1)*((x-b)*M)/R}):(a=d=>{const g=Math.exp(-d*i),y=(d-t)*i+1;return-lb+g*y},s=d=>{const g=Math.exp(-d*i),y=(t-d)*(i*i);return g*y});const c=5/i,f=_H(a,s,c);if(i=Fc(i),isNaN(f))return{stiffness:wa.stiffness,damping:wa.damping,duration:i};{const d=Math.pow(f,2)*n;return{stiffness:d,damping:o*2*Math.sqrt(n*d),duration:i}}}const yH=12;function _H(i,e,t){let n=t;for(let a=1;a<yH;a++)n=n-i(n)/e(n);return n}function n2(i,e){return i*Math.sqrt(1-e*e)}const xH=["duration","bounce"],SH=["stiffness","damping","mass"];function N3(i,e){return e.some(t=>i[t]!==void 0)}function bH(i){let e={velocity:wa.velocity,stiffness:wa.stiffness,damping:wa.damping,mass:wa.mass,isResolvedFromDuration:!1,...i};if(!N3(i,SH)&&N3(i,xH))if(i.visualDuration){const t=i.visualDuration,n=2*Math.PI/(t*1.2),a=n*n,s=2*zu(.05,1,1-(i.bounce||0))*Math.sqrt(a);e={...e,mass:wa.mass,stiffness:a,damping:s}}else{const t=vH(i);e={...e,...t,mass:wa.mass},e.isResolvedFromDuration=!0}return e}function n1(i=wa.visualDuration,e=wa.bounce){const t=typeof i!="object"?{visualDuration:i,keyframes:[0,1],bounce:e}:i;let{restSpeed:n,restDelta:a}=t;const s=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],c={done:!1,value:s},{stiffness:f,damping:d,mass:g,duration:y,velocity:x,isResolvedFromDuration:b}=bH({...t,velocity:-ul(t.velocity||0)}),M=x||0,R=d/(2*Math.sqrt(f*g)),C=o-s,E=ul(Math.sqrt(f/g)),N=Math.abs(C)<5;n||(n=N?wa.restSpeed.granular:wa.restSpeed.default),a||(a=N?wa.restDelta.granular:wa.restDelta.default);let I;if(R<1){const F=n2(E,R);I=V=>{const W=Math.exp(-R*E*V);return o-W*((M+R*E*C)/F*Math.sin(F*V)+C*Math.cos(F*V))}}else if(R===1)I=F=>o-Math.exp(-E*F)*(C+(M+E*C)*F);else{const F=E*Math.sqrt(R*R-1);I=V=>{const W=Math.exp(-R*E*V),Z=Math.min(F*V,300);return o-W*((M+R*E*C)*Math.sinh(Z)+F*C*Math.cosh(Z))/F}}const z={calculatedDuration:b&&y||null,next:F=>{const V=I(F);if(b)c.done=F>=y;else{let W=F===0?M:0;R<1&&(W=F===0?Fc(M):tL(I,F,V));const Z=Math.abs(W)<=n,B=Math.abs(o-V)<=a;c.done=Z&&B}return c.value=c.done?o:V,c},toString:()=>{const F=Math.min(FT(z),t1),V=eL(W=>z.next(F*W).value,F,30);return F+"ms "+V},toTransition:()=>{}};return z}n1.applyToOptions=i=>{const e=mH(i,100,n1);return i.ease=e.ease,i.duration=Fc(e.duration),i.type="keyframes",i};function i2({keyframes:i,velocity:e=0,power:t=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:s=500,modifyTarget:o,min:c,max:f,restDelta:d=.5,restSpeed:g}){const y=i[0],x={done:!1,value:y},b=Z=>c!==void 0&&Z<c||f!==void 0&&Z>f,M=Z=>c===void 0?f:f===void 0||Math.abs(c-Z)<Math.abs(f-Z)?c:f;let R=t*e;const C=y+R,E=o===void 0?C:o(C);E!==C&&(R=E-y);const N=Z=>-R*Math.exp(-Z/n),I=Z=>E+N(Z),z=Z=>{const B=N(Z),H=I(Z);x.done=Math.abs(B)<=d,x.value=x.done?E:H};let F,V;const W=Z=>{b(x.value)&&(F=Z,V=n1({keyframes:[x.value,M(x.value)],velocity:tL(I,Z,x.value),damping:a,stiffness:s,restDelta:d,restSpeed:g}))};return W(0),{calculatedDuration:null,next:Z=>{let B=!1;return!V&&F===void 0&&(B=!0,z(Z),W(Z)),F!==void 0&&Z>=F?V.next(Z-F):(!B&&z(Z),x)}}}function TH(i,e,t){const n=[],a=t||Bu.mix||$D,s=i.length-1;for(let o=0;o<s;o++){let c=a(i[o],i[o+1]);if(e){const f=Array.isArray(e)?e[o]||hl:e;c=B0(f,c)}n.push(c)}return n}function MH(i,e,{clamp:t=!0,ease:n,mixer:a}={}){const s=i.length;if(DT(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=i[0]===i[1];i[0]>i[s-1]&&(i=[...i].reverse(),e=[...e].reverse());const c=TH(e,n,a),f=c.length,d=g=>{if(o&&g<i[0])return e[0];let y=0;if(f>1)for(;y<i.length-2&&!(g<i[y+1]);y++);const x=_0(i[y],i[y+1],g);return c[y](x)};return t?g=>d(zu(i[0],i[s-1],g)):d}function AH(i,e){const t=i[i.length-1];for(let n=1;n<=e;n++){const a=_0(0,e,n);i.push(da(t,1,a))}}function EH(i){const e=[0];return AH(e,i.length-1),e}function wH(i,e){return i.map(t=>t*e)}function CH(i,e){return i.map(()=>e||HD).splice(0,i.length-1)}function Qg({duration:i=300,keyframes:e,times:t,ease:n="easeInOut"}){const a=FV(n)?n.map(C3):C3(n),s={done:!1,value:e[0]},o=wH(t&&t.length===e.length?t:EH(e),i),c=MH(o,e,{ease:Array.isArray(a)?a:CH(e,a)});return{calculatedDuration:i,next:f=>(s.value=c(f),s.done=f>=i,s)}}const RH=i=>i!==null;function kT(i,{repeat:e,repeatType:t="loop"},n,a=1){const s=i.filter(RH),c=a<0||e&&t!=="loop"&&e%2===1?0:s.length-1;return!c||n===void 0?s[c]:n}const DH={decay:i2,inertia:i2,tween:Qg,keyframes:Qg,spring:n1};function nL(i){typeof i.type=="string"&&(i.type=DH[i.type])}class VT{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const LH=i=>i/100;class HT extends VT{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==so.now()&&this.tick(so.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;nL(e);const{type:t=Qg,repeat:n=0,repeatDelay:a=0,repeatType:s,velocity:o=0}=e;let{keyframes:c}=e;const f=t||Qg;f!==Qg&&typeof c[0]!="number"&&(this.mixKeyframes=B0(LH,$D(c[0],c[1])),c=[0,100]);const d=f({...e,keyframes:c});s==="mirror"&&(this.mirroredGenerator=f({...e,keyframes:[...c].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=FT(d));const{calculatedDuration:g}=d;this.calculatedDuration=g,this.resolvedDuration=g+a,this.totalDuration=this.resolvedDuration*(n+1)-a,this.generator=d}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:n,totalDuration:a,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:f}=this;if(this.startTime===null)return n.next(0);const{delay:d=0,keyframes:g,repeat:y,repeatType:x,repeatDelay:b,type:M,onUpdate:R,finalKeyframe:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-a/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const E=this.currentTime-d*(this.playbackSpeed>=0?1:-1),N=this.playbackSpeed>=0?E<0:E>a;this.currentTime=Math.max(E,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let I=this.currentTime,z=n;if(y){const Z=Math.min(this.currentTime,a)/c;let B=Math.floor(Z),H=Z%1;!H&&Z>=1&&(H=1),H===1&&B--,B=Math.min(B,y+1),B%2&&(x==="reverse"?(H=1-H,b&&(H-=b/c)):x==="mirror"&&(z=o)),I=zu(0,1,H)*c}const F=N?{done:!1,value:g[0]}:z.next(I);s&&(F.value=s(F.value));let{done:V}=F;!N&&f!==null&&(V=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const W=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&V);return W&&M!==i2&&(F.value=kT(g,this.options,C,this.speed)),R&&R(F.value),W&&this.finish(),F}then(e,t){return this.finished.then(e,t)}get duration(){return ul(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ul(e)}get time(){return ul(this.currentTime)}set time(e){e=Fc(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(so.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=ul(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=pH,startTime:t}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=t??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(so.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function OH(i){for(let e=1;e<i.length;e++)i[e]??(i[e]=i[e-1])}const ed=i=>i*180/Math.PI,a2=i=>{const e=ed(Math.atan2(i[1],i[0]));return s2(e)},NH={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:i=>(Math.abs(i[0])+Math.abs(i[3]))/2,rotate:a2,rotateZ:a2,skewX:i=>ed(Math.atan(i[1])),skewY:i=>ed(Math.atan(i[2])),skew:i=>(Math.abs(i[1])+Math.abs(i[2]))/2},s2=i=>(i=i%360,i<0&&(i+=360),i),U3=a2,I3=i=>Math.sqrt(i[0]*i[0]+i[1]*i[1]),P3=i=>Math.sqrt(i[4]*i[4]+i[5]*i[5]),UH={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:I3,scaleY:P3,scale:i=>(I3(i)+P3(i))/2,rotateX:i=>s2(ed(Math.atan2(i[6],i[5]))),rotateY:i=>s2(ed(Math.atan2(-i[2],i[0]))),rotateZ:U3,rotate:U3,skewX:i=>ed(Math.atan(i[4])),skewY:i=>ed(Math.atan(i[1])),skew:i=>(Math.abs(i[1])+Math.abs(i[4]))/2};function r2(i){return i.includes("scale")?1:0}function o2(i,e){if(!i||i==="none")return r2(e);const t=i.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,a;if(t)n=UH,a=t;else{const c=i.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=NH,a=c}if(!a)return r2(e);const s=n[e],o=a[1].split(",").map(PH);return typeof s=="function"?s(o):o[s]}const IH=(i,e)=>{const{transform:t="none"}=getComputedStyle(i);return o2(t,e)};function PH(i){return parseFloat(i.trim())}const um=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],fm=new Set(um),z3=i=>i===cm||i===vn,zH=new Set(["x","y","z"]),BH=um.filter(i=>!zH.has(i));function FH(i){const e=[];return BH.forEach(t=>{const n=i.getValue(t);n!==void 0&&(e.push([t,n.get()]),n.set(t.startsWith("scale")?1:0))}),e}const sd={width:({x:i},{paddingLeft:e="0",paddingRight:t="0"})=>i.max-i.min-parseFloat(e)-parseFloat(t),height:({y:i},{paddingTop:e="0",paddingBottom:t="0"})=>i.max-i.min-parseFloat(e)-parseFloat(t),top:(i,{top:e})=>parseFloat(e),left:(i,{left:e})=>parseFloat(e),bottom:({y:i},{top:e})=>parseFloat(e)+(i.max-i.min),right:({x:i},{left:e})=>parseFloat(e)+(i.max-i.min),x:(i,{transform:e})=>o2(e,"x"),y:(i,{transform:e})=>o2(e,"y")};sd.translateX=sd.x;sd.translateY=sd.y;const rd=new Set;let l2=!1,c2=!1,u2=!1;function iL(){if(c2){const i=Array.from(rd).filter(n=>n.needsMeasurement),e=new Set(i.map(n=>n.element)),t=new Map;e.forEach(n=>{const a=FH(n);a.length&&(t.set(n,a),n.render())}),i.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const a=t.get(n);a&&a.forEach(([s,o])=>{n.getValue(s)?.set(o)})}),i.forEach(n=>n.measureEndState()),i.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}c2=!1,l2=!1,rd.forEach(i=>i.complete(u2)),rd.clear()}function aL(){rd.forEach(i=>{i.readKeyframes(),i.needsMeasurement&&(c2=!0)})}function kH(){u2=!0,aL(),iL(),u2=!1}class GT{constructor(e,t,n,a,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=a,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(rd.add(this),l2||(l2=!0,na.read(aL),na.resolveKeyframes(iL))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:a}=this;if(e[0]===null){const s=a?.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(n&&t){const c=n.readValue(t,o);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=o),a&&s===void 0&&a.set(e[0])}OH(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),rd.delete(this)}cancel(){this.state==="scheduled"&&(rd.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const VH=i=>i.startsWith("--");function HH(i,e,t){VH(e)?i.style.setProperty(e,t):i.style[e]=t}const GH=LT(()=>window.ScrollTimeline!==void 0),jH={};function WH(i,e){const t=LT(i);return()=>jH[e]??t()}const sL=WH(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Pg=([i,e,t,n])=>`cubic-bezier(${i}, ${e}, ${t}, ${n})`,B3={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Pg([0,.65,.55,1]),circOut:Pg([.55,0,1,.45]),backIn:Pg([.31,.01,.66,-.59]),backOut:Pg([.33,1.53,.69,.99])};function rL(i,e){if(i)return typeof i=="function"?sL()?eL(i,e):"ease-out":GD(i)?Pg(i):Array.isArray(i)?i.map(t=>rL(t,e)||B3.easeOut):B3[i]}function qH(i,e,t,{delay:n=0,duration:a=300,repeat:s=0,repeatType:o="loop",ease:c="easeOut",times:f}={},d=void 0){const g={[e]:t};f&&(g.offset=f);const y=rL(c,a);Array.isArray(y)&&(g.easing=y);const x={delay:n,duration:a,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return d&&(x.pseudoElement=d),i.animate(g,x)}function oL(i){return typeof i=="function"&&"applyToOptions"in i}function XH({type:i,...e}){return oL(i)&&sL()?i.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class YH extends VT{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:n,keyframes:a,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:c,onComplete:f}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,DT(typeof e.type!="string");const d=XH(e);this.animation=qH(t,n,a,d,s),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const g=kT(a,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(g):HH(t,n,g),this.animation.cancel()}f?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return ul(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ul(e)}get time(){return ul(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Fc(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&GH()?(this.animation.timeline=e,hl):t(this)}}const lL={anticipate:FD,backInOut:BD,circInOut:VD};function ZH(i){return i in lL}function KH(i){typeof i.ease=="string"&&ZH(i.ease)&&(i.ease=lL[i.ease])}const F3=10;class QH extends YH{constructor(e){KH(e),nL(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:n,onComplete:a,element:s,...o}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const c=new HT({...o,autoplay:!1}),f=Fc(this.finishedTime??this.time);t.setWithVelocity(c.sample(f-F3).value,c.sample(f).value,F3),c.stop()}}const k3=(i,e)=>e==="zIndex"?!1:!!(typeof i=="number"||Array.isArray(i)||typeof i=="string"&&(Wf.test(i)||i==="0")&&!i.startsWith("url("));function JH(i){const e=i[0];if(i.length===1)return!0;for(let t=0;t<i.length;t++)if(i[t]!==e)return!0}function $H(i,e,t,n){const a=i[0];if(a===null)return!1;if(e==="display"||e==="visibility")return!0;const s=i[i.length-1],o=k3(a,e),c=k3(s,e);return!o||!c?!1:JH(i)||(t==="spring"||oL(t))&&n}function f2(i){i.duration=0,i.type="keyframes"}const e9=new Set(["opacity","clipPath","filter","transform"]),t9=LT(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function n9(i){const{motionValue:e,name:t,repeatDelay:n,repeatType:a,damping:s,type:o}=i;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:d}=e.owner.getProps();return t9()&&t&&e9.has(t)&&(t!=="transform"||!d)&&!f&&!n&&a!=="mirror"&&s!==0&&o!=="inertia"}const i9=40;class a9 extends VT{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:a=0,repeatDelay:s=0,repeatType:o="loop",keyframes:c,name:f,motionValue:d,element:g,...y}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=so.now();const x={autoplay:e,delay:t,type:n,repeat:a,repeatDelay:s,repeatType:o,name:f,motionValue:d,element:g,...y},b=g?.KeyframeResolver||GT;this.keyframeResolver=new b(c,(M,R,C)=>this.onKeyframesResolved(M,R,x,!C),f,d,g),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,n,a){this.keyframeResolver=void 0;const{name:s,type:o,velocity:c,delay:f,isHandoff:d,onUpdate:g}=n;this.resolvedAt=so.now(),$H(e,s,o,c)||((Bu.instantAnimations||!f)&&g?.(kT(e,n,t)),e[0]=e[e.length-1],f2(n),n.repeat=0);const x={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>i9?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...n,keyframes:e},b=!d&&n9(x)?new QH({...x,element:x.motionValue.owner.current}):new HT(x);b.finished.then(()=>this.notifyFinished()).catch(hl),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),kH()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const s9=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function r9(i){const e=s9.exec(i);if(!e)return[,];const[,t,n,a]=e;return[`--${t??n}`,a]}function cL(i,e,t=1){const[n,a]=r9(i);if(!n)return;const s=window.getComputedStyle(e).getPropertyValue(n);if(s){const o=s.trim();return DD(o)?parseFloat(o):o}return IT(a)?cL(a,e,t+1):a}function jT(i,e){return i?.[e]??i?.default??i}const uL=new Set(["width","height","top","left","right","bottom",...um]),o9={test:i=>i==="auto",parse:i=>i},fL=i=>e=>e.test(i),hL=[cm,vn,kc,Nf,JV,QV,o9],V3=i=>hL.find(fL(i));function l9(i){return typeof i=="number"?i===0:i!==null?i==="none"||i==="0"||OD(i):!0}const c9=new Set(["brightness","contrast","saturate","opacity"]);function u9(i){const[e,t]=i.slice(0,-1).split("(");if(e==="drop-shadow")return i;const[n]=t.match(PT)||[];if(!n)return i;const a=t.replace(n,"");let s=c9.has(e)?1:0;return n!==t&&(s*=100),e+"("+s+a+")"}const f9=/\b([a-z-]*)\(.*?\)/gu,h2={...Wf,getAnimatableNone:i=>{const e=i.match(f9);return e?e.map(u9).join(" "):i}},H3={...cm,transform:Math.round},h9={rotate:Nf,rotateX:Nf,rotateY:Nf,rotateZ:Nf,scale:By,scaleX:By,scaleY:By,scaleZ:By,skew:Nf,skewX:Nf,skewY:Nf,distance:vn,translateX:vn,translateY:vn,translateZ:vn,x:vn,y:vn,z:vn,perspective:vn,transformPerspective:vn,opacity:x0,originX:R3,originY:R3,originZ:vn},WT={borderWidth:vn,borderTopWidth:vn,borderRightWidth:vn,borderBottomWidth:vn,borderLeftWidth:vn,borderRadius:vn,radius:vn,borderTopLeftRadius:vn,borderTopRightRadius:vn,borderBottomRightRadius:vn,borderBottomLeftRadius:vn,width:vn,maxWidth:vn,height:vn,maxHeight:vn,top:vn,right:vn,bottom:vn,left:vn,padding:vn,paddingTop:vn,paddingRight:vn,paddingBottom:vn,paddingLeft:vn,margin:vn,marginTop:vn,marginRight:vn,marginBottom:vn,marginLeft:vn,backgroundPositionX:vn,backgroundPositionY:vn,...h9,zIndex:H3,fillOpacity:x0,strokeOpacity:x0,numOctaves:H3},d9={...WT,color:Ka,backgroundColor:Ka,outlineColor:Ka,fill:Ka,stroke:Ka,borderColor:Ka,borderTopColor:Ka,borderRightColor:Ka,borderBottomColor:Ka,borderLeftColor:Ka,filter:h2,WebkitFilter:h2},dL=i=>d9[i];function pL(i,e){let t=dL(i);return t!==h2&&(t=Wf),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const p9=new Set(["auto","none","0"]);function m9(i,e,t){let n=0,a;for(;n<i.length&&!a;){const s=i[n];typeof s=="string"&&!p9.has(s)&&S0(s).values.length&&(a=i[n]),n++}if(a&&t)for(const s of e)i[s]=pL(t,a)}class g9 extends GT{constructor(e,t,n,a,s){super(e,t,n,a,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let d=e[f];if(typeof d=="string"&&(d=d.trim(),IT(d))){const g=cL(d,t.current);g!==void 0&&(e[f]=g),f===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!uL.has(n)||e.length!==2)return;const[a,s]=e,o=V3(a),c=V3(s);if(o!==c)if(z3(o)&&z3(c))for(let f=0;f<e.length;f++){const d=e[f];typeof d=="string"&&(e[f]=parseFloat(d))}else sd[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let a=0;a<e.length;a++)(e[a]===null||l9(e[a]))&&n.push(a);n.length&&m9(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=sd[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const a=t[t.length-1];a!==void 0&&e.getValue(n,a).jump(a,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const a=e.getValue(t);a&&a.jump(this.measuredOrigin,!1);const s=n.length-1,o=n[s];n[s]=sd[t](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,f])=>{e.getValue(c).set(f)}),this.resolveNoneKeyframes()}}function v9(i,e,t){if(i instanceof EventTarget)return[i];if(typeof i=="string"){let n=document;const a=t?.[i]??n.querySelectorAll(i);return a?Array.from(a):[]}return Array.from(i)}const mL=(i,e)=>e&&typeof i=="number"?e.transform(i):i;function gL(i){return LD(i)&&"offsetHeight"in i}const G3=30,y9=i=>!isNaN(parseFloat(i));class _9{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const a=so.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=so.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=y9(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new OT);const n=this.events[e].add(t);return e==="change"?()=>{n(),na.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=so.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>G3)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,G3);return ND(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function em(i,e){return new _9(i,e)}const{schedule:qT}=jD(queueMicrotask,!1),Kl={x:!1,y:!1};function vL(){return Kl.x||Kl.y}function x9(i){return i==="x"||i==="y"?Kl[i]?null:(Kl[i]=!0,()=>{Kl[i]=!1}):Kl.x||Kl.y?null:(Kl.x=Kl.y=!0,()=>{Kl.x=Kl.y=!1})}function yL(i,e){const t=v9(i),n=new AbortController,a={passive:!0,...e,signal:n.signal};return[t,a,()=>n.abort()]}function j3(i){return!(i.pointerType==="touch"||vL())}function S9(i,e,t={}){const[n,a,s]=yL(i,t),o=c=>{if(!j3(c))return;const{target:f}=c,d=e(f,c);if(typeof d!="function"||!f)return;const g=y=>{j3(y)&&(d(y),f.removeEventListener("pointerleave",g))};f.addEventListener("pointerleave",g,a)};return n.forEach(c=>{c.addEventListener("pointerenter",o,a)}),s}const _L=(i,e)=>e?i===e?!0:_L(i,e.parentElement):!1,XT=i=>i.pointerType==="mouse"?typeof i.button!="number"||i.button<=0:i.isPrimary!==!1,b9=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function T9(i){return b9.has(i.tagName)||i.tabIndex!==-1}const t_=new WeakSet;function W3(i){return e=>{e.key==="Enter"&&i(e)}}function cb(i,e){i.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const M9=(i,e)=>{const t=i.currentTarget;if(!t)return;const n=W3(()=>{if(t_.has(t))return;cb(t,"down");const a=W3(()=>{cb(t,"up")}),s=()=>cb(t,"cancel");t.addEventListener("keyup",a,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",n,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",n),e)};function q3(i){return XT(i)&&!vL()}function A9(i,e,t={}){const[n,a,s]=yL(i,t),o=c=>{const f=c.currentTarget;if(!q3(c))return;t_.add(f);const d=e(f,c),g=(b,M)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",x),t_.has(f)&&t_.delete(f),q3(b)&&typeof d=="function"&&d(b,{success:M})},y=b=>{g(b,f===window||f===document||t.useGlobalTarget||_L(f,b.target))},x=b=>{g(b,!1)};window.addEventListener("pointerup",y,a),window.addEventListener("pointercancel",x,a)};return n.forEach(c=>{(t.useGlobalTarget?window:c).addEventListener("pointerdown",o,a),gL(c)&&(c.addEventListener("focus",d=>M9(d,a)),!T9(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),s}function xL(i){return LD(i)&&"ownerSVGElement"in i}function E9(i){return xL(i)&&i.tagName==="svg"}const rr=i=>!!(i&&i.getVelocity),w9=[...hL,Ka,Wf],C9=i=>w9.find(fL(i)),YT=ue.createContext({transformPagePoint:i=>i,isStatic:!1,reducedMotion:"never"});function X3(i,e){if(typeof i=="function")return i(e);i!=null&&(i.current=e)}function R9(...i){return e=>{let t=!1;const n=i.map(a=>{const s=X3(a,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let a=0;a<n.length;a++){const s=n[a];typeof s=="function"?s():X3(i[a],null)}}}}function D9(...i){return ue.useCallback(R9(...i),i)}class L9 extends ue.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const n=t.offsetParent,a=gL(n)&&n.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=a-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function O9({children:i,isPresent:e,anchorX:t,root:n}){const a=ue.useId(),s=ue.useRef(null),o=ue.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=ue.useContext(YT),f=D9(s,i?.ref);return ue.useInsertionEffect(()=>{const{width:d,height:g,top:y,left:x,right:b}=o.current;if(e||!s.current||!d||!g)return;const M=t==="left"?`left: ${x}`:`right: ${b}`;s.current.dataset.motionPopId=a;const R=document.createElement("style");c&&(R.nonce=c);const C=n??document.head;return C.appendChild(R),R.sheet&&R.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${g}px !important;
            ${M}px !important;
            top: ${y}px !important;
          }
        `),()=>{C.contains(R)&&C.removeChild(R)}},[e]),O.jsx(L9,{isPresent:e,childRef:s,sizeRef:o,children:ue.cloneElement(i,{ref:f})})}const N9=({children:i,initial:e,isPresent:t,onExitComplete:n,custom:a,presenceAffectsLayout:s,mode:o,anchorX:c,root:f})=>{const d=ET(U9),g=ue.useId();let y=!0,x=ue.useMemo(()=>(y=!1,{id:g,initial:e,isPresent:t,custom:a,onExitComplete:b=>{d.set(b,!0);for(const M of d.values())if(!M)return;n&&n()},register:b=>(d.set(b,!1),()=>d.delete(b))}),[t,d,n]);return s&&y&&(x={...x}),ue.useMemo(()=>{d.forEach((b,M)=>d.set(M,!1))},[t]),ue.useEffect(()=>{!t&&!d.size&&n&&n()},[t]),o==="popLayout"&&(i=O.jsx(O9,{isPresent:t,anchorX:c,root:f,children:i})),O.jsx($1.Provider,{value:x,children:i})};function U9(){return new Map}function SL(i=!0){const e=ue.useContext($1);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:a}=e,s=ue.useId();ue.useEffect(()=>{if(i)return a(s)},[i]);const o=ue.useCallback(()=>i&&n&&n(s),[s,n,i]);return!t&&n?[!1,o]:[!0]}const Fy=i=>i.key||"";function Y3(i){const e=[];return ue.Children.forEach(i,t=>{ue.isValidElement(t)&&e.push(t)}),e}const ls=({children:i,custom:e,initial:t=!0,onExitComplete:n,presenceAffectsLayout:a=!0,mode:s="sync",propagate:o=!1,anchorX:c="left",root:f})=>{const[d,g]=SL(o),y=ue.useMemo(()=>Y3(i),[i]),x=o&&!d?[]:y.map(Fy),b=ue.useRef(!0),M=ue.useRef(y),R=ET(()=>new Map),[C,E]=ue.useState(y),[N,I]=ue.useState(y);RD(()=>{b.current=!1,M.current=y;for(let V=0;V<N.length;V++){const W=Fy(N[V]);x.includes(W)?R.delete(W):R.get(W)!==!0&&R.set(W,!1)}},[N,x.length,x.join("-")]);const z=[];if(y!==C){let V=[...y];for(let W=0;W<N.length;W++){const Z=N[W],B=Fy(Z);x.includes(B)||(V.splice(W,0,Z),z.push(Z))}return s==="wait"&&z.length&&(V=z),I(Y3(V)),E(y),null}const{forceRender:F}=ue.useContext(AT);return O.jsx(O.Fragment,{children:N.map(V=>{const W=Fy(V),Z=o&&!d?!1:y===N||x.includes(W),B=()=>{if(R.has(W))R.set(W,!0);else return;let H=!0;R.forEach(Q=>{Q||(H=!1)}),H&&(F?.(),I(M.current),o&&g?.(),n&&n())};return O.jsx(N9,{isPresent:Z,initial:!b.current||t?void 0:!1,custom:e,presenceAffectsLayout:a,mode:s,root:f,onExitComplete:Z?void 0:B,anchorX:c,children:V},W)})})},bL=ue.createContext({strict:!1}),Z3={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},tm={};for(const i in Z3)tm[i]={isEnabled:e=>Z3[i].some(t=>!!e[t])};function I9(i){for(const e in i)tm[e]={...tm[e],...i[e]}}const P9=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function i1(i){return i.startsWith("while")||i.startsWith("drag")&&i!=="draggable"||i.startsWith("layout")||i.startsWith("onTap")||i.startsWith("onPan")||i.startsWith("onLayout")||P9.has(i)}let TL=i=>!i1(i);function z9(i){typeof i=="function"&&(TL=e=>e.startsWith("on")?!i1(e):i(e))}try{z9(require("@emotion/is-prop-valid").default)}catch{}function B9(i,e,t){const n={};for(const a in i)a==="values"&&typeof i.values=="object"||(TL(a)||t===!0&&i1(a)||!e&&!i1(a)||i.draggable&&a.startsWith("onDrag"))&&(n[a]=i[a]);return n}const ex=ue.createContext({});function tx(i){return i!==null&&typeof i=="object"&&typeof i.start=="function"}function b0(i){return typeof i=="string"||Array.isArray(i)}const ZT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],KT=["initial",...ZT];function nx(i){return tx(i.animate)||KT.some(e=>b0(i[e]))}function ML(i){return!!(nx(i)||i.variants)}function F9(i,e){if(nx(i)){const{initial:t,animate:n}=i;return{initial:t===!1||b0(t)?t:void 0,animate:b0(n)?n:void 0}}return i.inherit!==!1?e:{}}function k9(i){const{initial:e,animate:t}=F9(i,ue.useContext(ex));return ue.useMemo(()=>({initial:e,animate:t}),[K3(e),K3(t)])}function K3(i){return Array.isArray(i)?i.join(" "):i}function Q3(i,e){return e.max===e.min?0:i/(e.max-e.min)*100}const Cg={correct:(i,e)=>{if(!e.target)return i;if(typeof i=="string")if(vn.test(i))i=parseFloat(i);else return i;const t=Q3(i,e.target.x),n=Q3(i,e.target.y);return`${t}% ${n}%`}},V9={correct:(i,{treeScale:e,projectionDelta:t})=>{const n=i,a=Wf.parse(i);if(a.length>5)return n;const s=Wf.createTransformer(i),o=typeof a[0]!="number"?1:0,c=t.x.scale*e.x,f=t.y.scale*e.y;a[0+o]/=c,a[1+o]/=f;const d=da(c,f,.5);return typeof a[2+o]=="number"&&(a[2+o]/=d),typeof a[3+o]=="number"&&(a[3+o]/=d),s(a)}},d2={borderRadius:{...Cg,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Cg,borderTopRightRadius:Cg,borderBottomLeftRadius:Cg,borderBottomRightRadius:Cg,boxShadow:V9};function AL(i,{layout:e,layoutId:t}){return fm.has(i)||i.startsWith("origin")||(e||t!==void 0)&&(!!d2[i]||i==="opacity")}const H9={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},G9=um.length;function j9(i,e,t){let n="",a=!0;for(let s=0;s<G9;s++){const o=um[s],c=i[o];if(c===void 0)continue;let f=!0;if(typeof c=="number"?f=c===(o.startsWith("scale")?1:0):f=parseFloat(c)===0,!f||t){const d=mL(c,WT[o]);if(!f){a=!1;const g=H9[o]||o;n+=`${g}(${d}) `}t&&(e[o]=d)}}return n=n.trim(),t?n=t(e,a?"":n):a&&(n="none"),n}function QT(i,e,t){const{style:n,vars:a,transformOrigin:s}=i;let o=!1,c=!1;for(const f in e){const d=e[f];if(fm.has(f)){o=!0;continue}else if(qD(f)){a[f]=d;continue}else{const g=mL(d,WT[f]);f.startsWith("origin")?(c=!0,s[f]=g):n[f]=g}}if(e.transform||(o||t?n.transform=j9(e,i.transform,t):n.transform&&(n.transform="none")),c){const{originX:f="50%",originY:d="50%",originZ:g=0}=s;n.transformOrigin=`${f} ${d} ${g}`}}const JT=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function EL(i,e,t){for(const n in e)!rr(e[n])&&!AL(n,t)&&(i[n]=e[n])}function W9({transformTemplate:i},e){return ue.useMemo(()=>{const t=JT();return QT(t,e,i),Object.assign({},t.vars,t.style)},[e])}function q9(i,e){const t=i.style||{},n={};return EL(n,t,i),Object.assign(n,W9(i,e)),n}function X9(i,e){const t={},n=q9(i,e);return i.drag&&i.dragListener!==!1&&(t.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=i.drag===!0?"none":`pan-${i.drag==="x"?"y":"x"}`),i.tabIndex===void 0&&(i.onTap||i.onTapStart||i.whileTap)&&(t.tabIndex=0),t.style=n,t}const Y9={offset:"stroke-dashoffset",array:"stroke-dasharray"},Z9={offset:"strokeDashoffset",array:"strokeDasharray"};function K9(i,e,t=1,n=0,a=!0){i.pathLength=1;const s=a?Y9:Z9;i[s.offset]=vn.transform(-n);const o=vn.transform(e),c=vn.transform(t);i[s.array]=`${o} ${c}`}function wL(i,{attrX:e,attrY:t,attrScale:n,pathLength:a,pathSpacing:s=1,pathOffset:o=0,...c},f,d,g){if(QT(i,c,d),f){i.style.viewBox&&(i.attrs.viewBox=i.style.viewBox);return}i.attrs=i.style,i.style={};const{attrs:y,style:x}=i;y.transform&&(x.transform=y.transform,delete y.transform),(x.transform||y.transformOrigin)&&(x.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),x.transform&&(x.transformBox=g?.transformBox??"fill-box",delete y.transformBox),e!==void 0&&(y.x=e),t!==void 0&&(y.y=t),n!==void 0&&(y.scale=n),a!==void 0&&K9(y,a,s,o,!1)}const CL=()=>({...JT(),attrs:{}}),RL=i=>typeof i=="string"&&i.toLowerCase()==="svg";function Q9(i,e,t,n){const a=ue.useMemo(()=>{const s=CL();return wL(s,e,RL(n),i.transformTemplate,i.style),{...s.attrs,style:{...s.style}}},[e]);if(i.style){const s={};EL(s,i.style,i),a.style={...s,...a.style}}return a}const J9=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function $T(i){return typeof i!="string"||i.includes("-")?!1:!!(J9.indexOf(i)>-1||/[A-Z]/u.test(i))}function $9(i,e,t,{latestValues:n},a,s=!1){const c=($T(i)?Q9:X9)(e,n,a,i),f=B9(e,typeof i=="string",s),d=i!==ue.Fragment?{...f,...c,ref:t}:{},{children:g}=e,y=ue.useMemo(()=>rr(g)?g.get():g,[g]);return ue.createElement(i,{...d,children:y})}function J3(i){const e=[{},{}];return i?.values.forEach((t,n)=>{e[0][n]=t.get(),e[1][n]=t.getVelocity()}),e}function eM(i,e,t,n){if(typeof e=="function"){const[a,s]=J3(n);e=e(t!==void 0?t:i.custom,a,s)}if(typeof e=="string"&&(e=i.variants&&i.variants[e]),typeof e=="function"){const[a,s]=J3(n);e=e(t!==void 0?t:i.custom,a,s)}return e}function n_(i){return rr(i)?i.get():i}function eG({scrapeMotionValuesFromProps:i,createRenderState:e},t,n,a){return{latestValues:tG(t,n,a,i),renderState:e()}}function tG(i,e,t,n){const a={},s=n(i,{});for(const x in s)a[x]=n_(s[x]);let{initial:o,animate:c}=i;const f=nx(i),d=ML(i);e&&d&&!f&&i.inherit!==!1&&(o===void 0&&(o=e.initial),c===void 0&&(c=e.animate));let g=t?t.initial===!1:!1;g=g||o===!1;const y=g?c:o;if(y&&typeof y!="boolean"&&!tx(y)){const x=Array.isArray(y)?y:[y];for(let b=0;b<x.length;b++){const M=eM(i,x[b]);if(M){const{transitionEnd:R,transition:C,...E}=M;for(const N in E){let I=E[N];if(Array.isArray(I)){const z=g?I.length-1:0;I=I[z]}I!==null&&(a[N]=I)}for(const N in R)a[N]=R[N]}}}return a}const DL=i=>(e,t)=>{const n=ue.useContext(ex),a=ue.useContext($1),s=()=>eG(i,e,n,a);return t?s():ET(s)};function tM(i,e,t){const{style:n}=i,a={};for(const s in n)(rr(n[s])||e.style&&rr(e.style[s])||AL(s,i)||t?.getValue(s)?.liveStyle!==void 0)&&(a[s]=n[s]);return a}const nG=DL({scrapeMotionValuesFromProps:tM,createRenderState:JT});function LL(i,e,t){const n=tM(i,e,t);for(const a in i)if(rr(i[a])||rr(e[a])){const s=um.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;n[s]=i[a]}return n}const iG=DL({scrapeMotionValuesFromProps:LL,createRenderState:CL}),aG=Symbol.for("motionComponentSymbol");function Pp(i){return i&&typeof i=="object"&&Object.prototype.hasOwnProperty.call(i,"current")}function sG(i,e,t){return ue.useCallback(n=>{n&&i.onMount&&i.onMount(n),e&&(n?e.mount(n):e.unmount()),t&&(typeof t=="function"?t(n):Pp(t)&&(t.current=n))},[e])}const nM=i=>i.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),rG="framerAppearId",OL="data-"+nM(rG),NL=ue.createContext({});function oG(i,e,t,n,a){const{visualElement:s}=ue.useContext(ex),o=ue.useContext(bL),c=ue.useContext($1),f=ue.useContext(YT).reducedMotion,d=ue.useRef(null);n=n||o.renderer,!d.current&&n&&(d.current=n(i,{visualState:e,parent:s,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:f}));const g=d.current,y=ue.useContext(NL);g&&!g.projection&&a&&(g.type==="html"||g.type==="svg")&&lG(d.current,t,a,y);const x=ue.useRef(!1);ue.useInsertionEffect(()=>{g&&x.current&&g.update(t,c)});const b=t[OL],M=ue.useRef(!!b&&!window.MotionHandoffIsComplete?.(b)&&window.MotionHasOptimisedAnimation?.(b));return RD(()=>{g&&(x.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),M.current&&g.animationState&&g.animationState.animateChanges())}),ue.useEffect(()=>{g&&(!M.current&&g.animationState&&g.animationState.animateChanges(),M.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(b)}),M.current=!1),g.enteringChildren=void 0)}),g}function lG(i,e,t,n){const{layoutId:a,layout:s,drag:o,dragConstraints:c,layoutScroll:f,layoutRoot:d,layoutCrossfade:g}=e;i.projection=new t(i.latestValues,e["data-framer-portal-id"]?void 0:UL(i.parent)),i.projection.setOptions({layoutId:a,layout:s,alwaysMeasureLayout:!!o||c&&Pp(c),visualElement:i,animationType:typeof s=="string"?s:"both",initialPromotionConfig:n,crossfade:g,layoutScroll:f,layoutRoot:d})}function UL(i){if(i)return i.options.allowProjection!==!1?i.projection:UL(i.parent)}function ub(i,{forwardMotionProps:e=!1}={},t,n){t&&I9(t);const a=$T(i)?iG:nG;function s(c,f){let d;const g={...ue.useContext(YT),...c,layoutId:cG(c)},{isStatic:y}=g,x=k9(c),b=a(c,y);if(!y&&wT){uG();const M=fG(g);d=M.MeasureLayout,x.visualElement=oG(i,b,g,n,M.ProjectionNode)}return O.jsxs(ex.Provider,{value:x,children:[d&&x.visualElement?O.jsx(d,{visualElement:x.visualElement,...g}):null,$9(i,c,sG(b,x.visualElement,f),b,y,e)]})}s.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const o=ue.forwardRef(s);return o[aG]=i,o}function cG({layoutId:i}){const e=ue.useContext(AT).id;return e&&i!==void 0?e+"-"+i:i}function uG(i,e){ue.useContext(bL).strict}function fG(i){const{drag:e,layout:t}=tm;if(!e&&!t)return{};const n={...e,...t};return{MeasureLayout:e?.isEnabled(i)||t?.isEnabled(i)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function hG(i,e){if(typeof Proxy>"u")return ub;const t=new Map,n=(s,o)=>ub(s,o,i,e),a=(s,o)=>n(s,o);return new Proxy(a,{get:(s,o)=>o==="create"?n:(t.has(o)||t.set(o,ub(o,void 0,i,e)),t.get(o))})}function IL({top:i,left:e,right:t,bottom:n}){return{x:{min:e,max:t},y:{min:i,max:n}}}function dG({x:i,y:e}){return{top:e.min,right:i.max,bottom:e.max,left:i.min}}function pG(i,e){if(!e)return i;const t=e({x:i.left,y:i.top}),n=e({x:i.right,y:i.bottom});return{top:t.y,left:t.x,bottom:n.y,right:n.x}}function fb(i){return i===void 0||i===1}function p2({scale:i,scaleX:e,scaleY:t}){return!fb(i)||!fb(e)||!fb(t)}function Xh(i){return p2(i)||PL(i)||i.z||i.rotate||i.rotateX||i.rotateY||i.skewX||i.skewY}function PL(i){return $3(i.x)||$3(i.y)}function $3(i){return i&&i!=="0%"}function a1(i,e,t){const n=i-t,a=e*n;return t+a}function ew(i,e,t,n,a){return a!==void 0&&(i=a1(i,a,n)),a1(i,t,n)+e}function m2(i,e=0,t=1,n,a){i.min=ew(i.min,e,t,n,a),i.max=ew(i.max,e,t,n,a)}function zL(i,{x:e,y:t}){m2(i.x,e.translate,e.scale,e.originPoint),m2(i.y,t.translate,t.scale,t.originPoint)}const tw=.999999999999,nw=1.0000000000001;function mG(i,e,t,n=!1){const a=t.length;if(!a)return;e.x=e.y=1;let s,o;for(let c=0;c<a;c++){s=t[c],o=s.projectionDelta;const{visualElement:f}=s.options;f&&f.props.style&&f.props.style.display==="contents"||(n&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Bp(i,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,zL(i,o)),n&&Xh(s.latestValues)&&Bp(i,s.latestValues))}e.x<nw&&e.x>tw&&(e.x=1),e.y<nw&&e.y>tw&&(e.y=1)}function zp(i,e){i.min=i.min+e,i.max=i.max+e}function iw(i,e,t,n,a=.5){const s=da(i.min,i.max,a);m2(i,e,t,s,n)}function Bp(i,e){iw(i.x,e.x,e.scaleX,e.scale,e.originX),iw(i.y,e.y,e.scaleY,e.scale,e.originY)}function BL(i,e){return IL(pG(i.getBoundingClientRect(),e))}function gG(i,e,t){const n=BL(i,t),{scroll:a}=e;return a&&(zp(n.x,a.offset.x),zp(n.y,a.offset.y)),n}const aw=()=>({translate:0,scale:1,origin:0,originPoint:0}),Fp=()=>({x:aw(),y:aw()}),sw=()=>({min:0,max:0}),os=()=>({x:sw(),y:sw()}),g2={current:null},FL={current:!1};function vG(){if(FL.current=!0,!!wT)if(window.matchMedia){const i=window.matchMedia("(prefers-reduced-motion)"),e=()=>g2.current=i.matches;i.addEventListener("change",e),e()}else g2.current=!1}const yG=new WeakMap;function _G(i,e,t){for(const n in e){const a=e[n],s=t[n];if(rr(a))i.addValue(n,a);else if(rr(s))i.addValue(n,em(a,{owner:i}));else if(s!==a)if(i.hasValue(n)){const o=i.getValue(n);o.liveStyle===!0?o.jump(a):o.hasAnimated||o.set(a)}else{const o=i.getStaticValue(n);i.addValue(n,em(o!==void 0?o:a,{owner:i}))}}for(const n in t)e[n]===void 0&&i.removeValue(n);return e}const rw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class xG{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:a,blockInitialAnimation:s,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=GT,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=so.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,na.render(this.render,!1,!0))};const{latestValues:f,renderState:d}=o;this.latestValues=f,this.baseTarget={...f},this.initialValues=t.initial?{...f}:{},this.renderState=d,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=c,this.blockInitialAnimation=!!s,this.isControllingVariants=nx(t),this.isVariantNode=ML(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...y}=this.scrapeMotionValuesFromProps(t,{},this);for(const x in y){const b=y[x];f[x]!==void 0&&rr(b)&&b.set(f[x])}}mount(e){this.current=e,yG.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,n)=>this.bindToMotionValue(n,t)),FL.current||vG(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:g2.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),jf(this.notifyUpdate),jf(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=fm.has(e);n&&this.onBindTransform&&this.onBindTransform();const a=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&na.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{a(),s&&s(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in tm){const t=tm[e];if(!t)continue;const{isEnabled:n,Feature:a}=t;if(!this.features[e]&&a&&n(this.props)&&(this.features[e]=new a(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):os()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<rw.length;n++){const a=rw[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const s="on"+a,o=e[s];o&&(this.propEventSubscriptions[a]=this.on(a,o))}this.prevMotionValues=_G(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&t!==void 0&&(n=em(t===null?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(DD(n)||OD(n))?n=parseFloat(n):!C9(n)&&Wf.test(t)&&(n=pL(e,t)),this.setBaseTarget(e,rr(n)?n.get():n)),rr(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let n;if(typeof t=="string"||typeof t=="object"){const s=eM(this.props,t,this.presenceContext?.custom);s&&(n=s[e])}if(t&&n!==void 0)return n;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!rr(a)?a:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new OT),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){qT.render(this.render)}}class kL extends xG{constructor(){super(...arguments),this.KeyframeResolver=g9}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;rr(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function VL(i,{style:e,vars:t},n,a){const s=i.style;let o;for(o in e)s[o]=e[o];a?.applyProjectionStyles(s,n);for(o in t)s.setProperty(o,t[o])}function SG(i){return window.getComputedStyle(i)}class bG extends kL{constructor(){super(...arguments),this.type="html",this.renderInstance=VL}readValueFromInstance(e,t){if(fm.has(t))return this.projection?.isProjecting?r2(t):IH(e,t);{const n=SG(e),a=(qD(t)?n.getPropertyValue(t):n[t])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:t}){return BL(e,t)}build(e,t,n){QT(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return tM(e,t,n)}}const HL=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function TG(i,e,t,n){VL(i,e,void 0,n);for(const a in e.attrs)i.setAttribute(HL.has(a)?a:nM(a),e.attrs[a])}class MG extends kL{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=os}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(fm.has(t)){const n=dL(t);return n&&n.default||0}return t=HL.has(t)?t:nM(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return LL(e,t,n)}build(e,t,n){wL(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,a){TG(e,t,n,a)}mount(e){this.isSVGTag=RL(e.tagName),super.mount(e)}}const AG=(i,e)=>$T(i)?new MG(e):new bG(e,{allowProjection:i!==ue.Fragment});function Gp(i,e,t){const n=i.getProps();return eM(n,e,t!==void 0?t:n.custom,i)}const v2=i=>Array.isArray(i);function EG(i,e,t){i.hasValue(e)?i.getValue(e).set(t):i.addValue(e,em(t))}function wG(i){return v2(i)?i[i.length-1]||0:i}function CG(i,e){const t=Gp(i,e);let{transitionEnd:n={},transition:a={},...s}=t||{};s={...s,...n};for(const o in s){const c=wG(s[o]);EG(i,o,c)}}function RG(i){return!!(rr(i)&&i.add)}function y2(i,e){const t=i.getValue("willChange");if(RG(t))return t.add(e);if(!t&&Bu.WillChange){const n=new Bu.WillChange("auto");i.addValue("willChange",n),n.add(e)}}function GL(i){return i.props[OL]}const DG=i=>i!==null;function LG(i,{repeat:e,repeatType:t="loop"},n){const a=i.filter(DG),s=e&&t!=="loop"&&e%2===1?0:a.length-1;return a[s]}const OG={type:"spring",stiffness:500,damping:25,restSpeed:10},NG=i=>({type:"spring",stiffness:550,damping:i===0?2*Math.sqrt(550):30,restSpeed:10}),UG={type:"keyframes",duration:.8},IG={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},PG=(i,{keyframes:e})=>e.length>2?UG:fm.has(i)?i.startsWith("scale")?NG(e[1]):OG:IG;function zG({when:i,delay:e,delayChildren:t,staggerChildren:n,staggerDirection:a,repeat:s,repeatType:o,repeatDelay:c,from:f,elapsed:d,...g}){return!!Object.keys(g).length}const iM=(i,e,t,n={},a,s)=>o=>{const c=jT(n,i)||{},f=c.delay||n.delay||0;let{elapsed:d=0}=n;d=d-Fc(f);const g={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-d,onUpdate:x=>{e.set(x),c.onUpdate&&c.onUpdate(x)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:i,motionValue:e,element:s?void 0:a};zG(c)||Object.assign(g,PG(i,g)),g.duration&&(g.duration=Fc(g.duration)),g.repeatDelay&&(g.repeatDelay=Fc(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let y=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(f2(g),g.delay===0&&(y=!0)),(Bu.instantAnimations||Bu.skipAnimations)&&(y=!0,f2(g),g.delay=0),g.allowFlatten=!c.type&&!c.ease,y&&!s&&e.get()!==void 0){const x=LG(g.keyframes,c);if(x!==void 0){na.update(()=>{g.onUpdate(x),g.onComplete()});return}}return c.isSync?new HT(g):new a9(g)};function BG({protectedKeys:i,needsAnimating:e},t){const n=i.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,n}function jL(i,e,{delay:t=0,transitionOverride:n,type:a}={}){let{transition:s=i.getDefaultTransition(),transitionEnd:o,...c}=e;n&&(s=n);const f=[],d=a&&i.animationState&&i.animationState.getState()[a];for(const g in c){const y=i.getValue(g,i.latestValues[g]??null),x=c[g];if(x===void 0||d&&BG(d,g))continue;const b={delay:t,...jT(s||{},g)},M=y.get();if(M!==void 0&&!y.isAnimating&&!Array.isArray(x)&&x===M&&!b.velocity)continue;let R=!1;if(window.MotionHandoffAnimation){const E=GL(i);if(E){const N=window.MotionHandoffAnimation(E,g,na);N!==null&&(b.startTime=N,R=!0)}}y2(i,g),y.start(iM(g,y,x,i.shouldReduceMotion&&uL.has(g)?{type:!1}:b,i,R));const C=y.animation;C&&f.push(C)}return o&&Promise.all(f).then(()=>{na.update(()=>{o&&CG(i,o)})}),f}function WL(i,e,t,n=0,a=1){const s=Array.from(i).sort((d,g)=>d.sortNodePosition(g)).indexOf(e),o=i.size,c=(o-1)*n;return typeof t=="function"?t(s,o):a===1?s*n:c-s*n}function _2(i,e,t={}){const n=Gp(i,e,t.type==="exit"?i.presenceContext?.custom:void 0);let{transition:a=i.getDefaultTransition()||{}}=n||{};t.transitionOverride&&(a=t.transitionOverride);const s=n?()=>Promise.all(jL(i,n,t)):()=>Promise.resolve(),o=i.variantChildren&&i.variantChildren.size?(f=0)=>{const{delayChildren:d=0,staggerChildren:g,staggerDirection:y}=a;return FG(i,e,f,d,g,y,t)}:()=>Promise.resolve(),{when:c}=a;if(c){const[f,d]=c==="beforeChildren"?[s,o]:[o,s];return f().then(()=>d())}else return Promise.all([s(),o(t.delay)])}function FG(i,e,t=0,n=0,a=0,s=1,o){const c=[];for(const f of i.variantChildren)f.notify("AnimationStart",e),c.push(_2(f,e,{...o,delay:t+(typeof n=="function"?0:n)+WL(i.variantChildren,f,n,a,s)}).then(()=>f.notify("AnimationComplete",e)));return Promise.all(c)}function kG(i,e,t={}){i.notify("AnimationStart",e);let n;if(Array.isArray(e)){const a=e.map(s=>_2(i,s,t));n=Promise.all(a)}else if(typeof e=="string")n=_2(i,e,t);else{const a=typeof e=="function"?Gp(i,e,t.custom):e;n=Promise.all(jL(i,a,t))}return n.then(()=>{i.notify("AnimationComplete",e)})}function qL(i,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==i.length)return!1;for(let n=0;n<t;n++)if(e[n]!==i[n])return!1;return!0}const VG=KT.length;function XL(i){if(!i)return;if(!i.isControllingVariants){const t=i.parent?XL(i.parent)||{}:{};return i.props.initial!==void 0&&(t.initial=i.props.initial),t}const e={};for(let t=0;t<VG;t++){const n=KT[t],a=i.props[n];(b0(a)||a===!1)&&(e[n]=a)}return e}const HG=[...ZT].reverse(),GG=ZT.length;function jG(i){return e=>Promise.all(e.map(({animation:t,options:n})=>kG(i,t,n)))}function WG(i){let e=jG(i),t=ow(),n=!0;const a=f=>(d,g)=>{const y=Gp(i,g,f==="exit"?i.presenceContext?.custom:void 0);if(y){const{transition:x,transitionEnd:b,...M}=y;d={...d,...M,...b}}return d};function s(f){e=f(i)}function o(f){const{props:d}=i,g=XL(i.parent)||{},y=[],x=new Set;let b={},M=1/0;for(let C=0;C<GG;C++){const E=HG[C],N=t[E],I=d[E]!==void 0?d[E]:g[E],z=b0(I),F=E===f?N.isActive:null;F===!1&&(M=C);let V=I===g[E]&&I!==d[E]&&z;if(V&&n&&i.manuallyAnimateOnMount&&(V=!1),N.protectedKeys={...b},!N.isActive&&F===null||!I&&!N.prevProp||tx(I)||typeof I=="boolean")continue;const W=qG(N.prevProp,I);let Z=W||E===f&&N.isActive&&!V&&z||C>M&&z,B=!1;const H=Array.isArray(I)?I:[I];let Q=H.reduce(a(E),{});F===!1&&(Q={});const{prevResolvedValues:J={}}=N,oe={...J,...Q},re=K=>{Z=!0,x.has(K)&&(B=!0,x.delete(K)),N.needsAnimating[K]=!0;const te=i.getValue(K);te&&(te.liveStyle=!1)};for(const K in oe){const te=Q[K],de=J[K];if(b.hasOwnProperty(K))continue;let ce=!1;v2(te)&&v2(de)?ce=!qL(te,de):ce=te!==de,ce?te!=null?re(K):x.add(K):te!==void 0&&x.has(K)?re(K):N.protectedKeys[K]=!0}N.prevProp=I,N.prevResolvedValues=Q,N.isActive&&(b={...b,...Q}),n&&i.blockInitialAnimation&&(Z=!1);const ve=V&&W;Z&&(!ve||B)&&y.push(...H.map(K=>{const te={type:E};if(typeof K=="string"&&n&&!ve&&i.manuallyAnimateOnMount&&i.parent){const{parent:de}=i,ce=Gp(de,K);if(de.enteringChildren&&ce){const{delayChildren:G}=ce.transition||{};te.delay=WL(de.enteringChildren,i,G)}}return{animation:K,options:te}}))}if(x.size){const C={};if(typeof d.initial!="boolean"){const E=Gp(i,Array.isArray(d.initial)?d.initial[0]:d.initial);E&&E.transition&&(C.transition=E.transition)}x.forEach(E=>{const N=i.getBaseTarget(E),I=i.getValue(E);I&&(I.liveStyle=!0),C[E]=N??null}),y.push({animation:C})}let R=!!y.length;return n&&(d.initial===!1||d.initial===d.animate)&&!i.manuallyAnimateOnMount&&(R=!1),n=!1,R?e(y):Promise.resolve()}function c(f,d){if(t[f].isActive===d)return Promise.resolve();i.variantChildren?.forEach(y=>y.animationState?.setActive(f,d)),t[f].isActive=d;const g=o(f);for(const y in t)t[y].protectedKeys={};return g}return{animateChanges:o,setActive:c,setAnimateFunction:s,getState:()=>t,reset:()=>{t=ow()}}}function qG(i,e){return typeof e=="string"?e!==i:Array.isArray(e)?!qL(e,i):!1}function Gh(i=!1){return{isActive:i,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ow(){return{animate:Gh(!0),whileInView:Gh(),whileHover:Gh(),whileTap:Gh(),whileDrag:Gh(),whileFocus:Gh(),exit:Gh()}}class Zf{constructor(e){this.isMounted=!1,this.node=e}update(){}}class XG extends Zf{constructor(e){super(e),e.animationState||(e.animationState=WG(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();tx(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let YG=0;class ZG extends Zf{constructor(){super(...arguments),this.id=YG++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const a=this.node.animationState.setActive("exit",!e);t&&!e&&a.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const KG={animation:{Feature:XG},exit:{Feature:ZG}};function T0(i,e,t,n={passive:!0}){return i.addEventListener(e,t,n),()=>i.removeEventListener(e,t)}function V0(i){return{point:{x:i.pageX,y:i.pageY}}}const QG=i=>e=>XT(e)&&i(e,V0(e));function Jg(i,e,t,n){return T0(i,e,QG(t),n)}const YL=1e-4,JG=1-YL,$G=1+YL,ZL=.01,e7=0-ZL,t7=0+ZL;function kr(i){return i.max-i.min}function n7(i,e,t){return Math.abs(i-e)<=t}function lw(i,e,t,n=.5){i.origin=n,i.originPoint=da(e.min,e.max,i.origin),i.scale=kr(t)/kr(e),i.translate=da(t.min,t.max,i.origin)-i.originPoint,(i.scale>=JG&&i.scale<=$G||isNaN(i.scale))&&(i.scale=1),(i.translate>=e7&&i.translate<=t7||isNaN(i.translate))&&(i.translate=0)}function $g(i,e,t,n){lw(i.x,e.x,t.x,n?n.originX:void 0),lw(i.y,e.y,t.y,n?n.originY:void 0)}function cw(i,e,t){i.min=t.min+e.min,i.max=i.min+kr(e)}function i7(i,e,t){cw(i.x,e.x,t.x),cw(i.y,e.y,t.y)}function uw(i,e,t){i.min=e.min-t.min,i.max=i.min+kr(e)}function s1(i,e,t){uw(i.x,e.x,t.x),uw(i.y,e.y,t.y)}function ll(i){return[i("x"),i("y")]}const KL=({current:i})=>i?i.ownerDocument.defaultView:null,fw=(i,e)=>Math.abs(i-e);function a7(i,e){const t=fw(i.x,e.x),n=fw(i.y,e.y);return Math.sqrt(t**2+n**2)}class QL{constructor(e,t,{transformPagePoint:n,contextWindow:a=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=db(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,M=a7(x.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!M)return;const{point:R}=x,{timestamp:C}=Vs;this.history.push({...R,timestamp:C});const{onStart:E,onMove:N}=this.handlers;b||(E&&E(this.lastMoveEvent,x),this.startEvent=this.lastMoveEvent),N&&N(this.lastMoveEvent,x)},this.handlePointerMove=(x,b)=>{this.lastMoveEvent=x,this.lastMoveEventInfo=hb(b,this.transformPagePoint),na.update(this.updatePoint,!0)},this.handlePointerUp=(x,b)=>{this.end();const{onEnd:M,onSessionEnd:R,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=db(x.type==="pointercancel"?this.lastMoveEventInfo:hb(b,this.transformPagePoint),this.history);this.startEvent&&M&&M(x,E),R&&R(x,E)},!XT(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=o,this.contextWindow=a||window;const c=V0(e),f=hb(c,this.transformPagePoint),{point:d}=f,{timestamp:g}=Vs;this.history=[{...d,timestamp:g}];const{onSessionStart:y}=t;y&&y(e,db(f,this.history)),this.removeListeners=B0(Jg(this.contextWindow,"pointermove",this.handlePointerMove),Jg(this.contextWindow,"pointerup",this.handlePointerUp),Jg(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),jf(this.updatePoint)}}function hb(i,e){return e?{point:e(i.point)}:i}function hw(i,e){return{x:i.x-e.x,y:i.y-e.y}}function db({point:i},e){return{point:i,delta:hw(i,JL(e)),offset:hw(i,s7(e)),velocity:r7(e,.1)}}function s7(i){return i[0]}function JL(i){return i[i.length-1]}function r7(i,e){if(i.length<2)return{x:0,y:0};let t=i.length-1,n=null;const a=JL(i);for(;t>=0&&(n=i[t],!(a.timestamp-n.timestamp>Fc(e)));)t--;if(!n)return{x:0,y:0};const s=ul(a.timestamp-n.timestamp);if(s===0)return{x:0,y:0};const o={x:(a.x-n.x)/s,y:(a.y-n.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function o7(i,{min:e,max:t},n){return e!==void 0&&i<e?i=n?da(e,i,n.min):Math.max(i,e):t!==void 0&&i>t&&(i=n?da(t,i,n.max):Math.min(i,t)),i}function dw(i,e,t){return{min:e!==void 0?i.min+e:void 0,max:t!==void 0?i.max+t-(i.max-i.min):void 0}}function l7(i,{top:e,left:t,bottom:n,right:a}){return{x:dw(i.x,t,a),y:dw(i.y,e,n)}}function pw(i,e){let t=e.min-i.min,n=e.max-i.max;return e.max-e.min<i.max-i.min&&([t,n]=[n,t]),{min:t,max:n}}function c7(i,e){return{x:pw(i.x,e.x),y:pw(i.y,e.y)}}function u7(i,e){let t=.5;const n=kr(i),a=kr(e);return a>n?t=_0(e.min,e.max-n,i.min):n>a&&(t=_0(i.min,i.max-a,e.min)),zu(0,1,t)}function f7(i,e){const t={};return e.min!==void 0&&(t.min=e.min-i.min),e.max!==void 0&&(t.max=e.max-i.min),t}const x2=.35;function h7(i=x2){return i===!1?i=0:i===!0&&(i=x2),{x:mw(i,"left","right"),y:mw(i,"top","bottom")}}function mw(i,e,t){return{min:gw(i,e),max:gw(i,t)}}function gw(i,e){return typeof i=="number"?i:i[e]||0}const d7=new WeakMap;class p7{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=os(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:n}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const s=y=>{const{dragSnapToOrigin:x}=this.getProps();x?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(V0(y).point)},o=(y,x)=>{const{drag:b,dragPropagation:M,onDragStart:R}=this.getProps();if(b&&!M&&(this.openDragLock&&this.openDragLock(),this.openDragLock=x9(b),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=x,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ll(E=>{let N=this.getAxisMotionValue(E).get()||0;if(kc.test(N)){const{projection:I}=this.visualElement;if(I&&I.layout){const z=I.layout.layoutBox[E];z&&(N=kr(z)*(parseFloat(N)/100))}}this.originPoint[E]=N}),R&&na.postRender(()=>R(y,x)),y2(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},c=(y,x)=>{this.latestPointerEvent=y,this.latestPanInfo=x;const{dragPropagation:b,dragDirectionLock:M,onDirectionLock:R,onDrag:C}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:E}=x;if(M&&this.currentDirection===null){this.currentDirection=m7(E),this.currentDirection!==null&&R&&R(this.currentDirection);return}this.updateAxis("x",x.point,E),this.updateAxis("y",x.point,E),this.visualElement.render(),C&&C(y,x)},f=(y,x)=>{this.latestPointerEvent=y,this.latestPanInfo=x,this.stop(y,x),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>ll(y=>this.getAnimationState(y)==="paused"&&this.getAxisMotionValue(y).animation?.play()),{dragSnapToOrigin:g}=this.getProps();this.panSession=new QL(e,{onSessionStart:s,onStart:o,onMove:c,onSessionEnd:f,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:n,contextWindow:KL(this.visualElement)})}stop(e,t){const n=e||this.latestPointerEvent,a=t||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!a||!n)return;const{velocity:o}=a;this.startAnimation(o);const{onDragEnd:c}=this.getProps();c&&na.postRender(()=>c(n,a))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:a}=this.getProps();if(!n||!ky(e,a,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=o7(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,a=this.constraints;e&&Pp(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=l7(n.layoutBox,e):this.constraints=!1,this.elastic=h7(t),a!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&ll(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=f7(n.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Pp(e))return!1;const n=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const s=gG(n,a.root,this.visualElement.getTransformPagePoint());let o=c7(a.layout.layoutBox,s);if(t){const c=t(dG(o));this.hasMutatedConstraints=!!c,c&&(o=IL(c))}return o}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:a,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),f=this.constraints||{},d=ll(g=>{if(!ky(g,t,this.currentDirection))return;let y=f&&f[g]||{};o&&(y={min:0,max:0});const x=a?200:1e6,b=a?40:1e7,M={type:"inertia",velocity:n?e[g]:0,bounceStiffness:x,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...s,...y};return this.startAxisValueAnimation(g,M)});return Promise.all(d).then(c)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return y2(this.visualElement,e),n.start(iM(e,n,0,t,this.visualElement,!1))}stopAnimation(){ll(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ll(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),a=n[t];return a||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){ll(t=>{const{drag:n}=this.getProps();if(!ky(t,n,this.currentDirection))return;const{projection:a}=this.visualElement,s=this.getAxisMotionValue(t);if(a&&a.layout){const{min:o,max:c}=a.layout.layoutBox[t];s.set(e[t]-da(o,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!Pp(t)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};ll(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const f=c.get();a[o]=u7({min:f,max:f},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),ll(o=>{if(!ky(o,e,null))return;const c=this.getAxisMotionValue(o),{min:f,max:d}=this.constraints[o];c.set(da(f,d,a[o]))})}addListeners(){if(!this.visualElement.current)return;d7.set(this.visualElement,this);const e=this.visualElement.current,t=Jg(e,"pointerdown",f=>{const{drag:d,dragListener:g=!0}=this.getProps();d&&g&&this.start(f)}),n=()=>{const{dragConstraints:f}=this.getProps();Pp(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,s=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),na.read(n);const o=T0(window,"resize",()=>this.scalePositionWithinConstraints()),c=a.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:d})=>{this.isDragging&&d&&(ll(g=>{const y=this.getAxisMotionValue(g);y&&(this.originPoint[g]+=f[g].translate,y.set(y.get()+f[g].translate))}),this.visualElement.render())}));return()=>{o(),t(),s(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:s=!1,dragElastic:o=x2,dragMomentum:c=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:a,dragConstraints:s,dragElastic:o,dragMomentum:c}}}function ky(i,e,t){return(e===!0||e===i)&&(t===null||t===i)}function m7(i,e=10){let t=null;return Math.abs(i.y)>e?t="y":Math.abs(i.x)>e&&(t="x"),t}class g7 extends Zf{constructor(e){super(e),this.removeGroupControls=hl,this.removeListeners=hl,this.controls=new p7(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||hl}unmount(){this.removeGroupControls(),this.removeListeners()}}const vw=i=>(e,t)=>{i&&na.postRender(()=>i(e,t))};class v7 extends Zf{constructor(){super(...arguments),this.removePointerDownListener=hl}onPointerDown(e){this.session=new QL(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:KL(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:vw(e),onStart:vw(t),onMove:n,onEnd:(s,o)=>{delete this.session,a&&na.postRender(()=>a(s,o))}}}mount(){this.removePointerDownListener=Jg(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const i_={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let pb=!1;class y7 extends ue.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:a}=this.props,{projection:s}=e;s&&(t.group&&t.group.add(s),n&&n.register&&a&&n.register(s),pb&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),i_.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:a,isPresent:s}=this.props,{projection:o}=n;return o&&(o.isPresent=s,pb=!0,a||e.layoutDependency!==t||t===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||na.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),qT.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:a}=e;pb=!0,a&&(a.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function $L(i){const[e,t]=SL(),n=ue.useContext(AT);return O.jsx(y7,{...i,layoutGroup:n,switchLayoutGroup:ue.useContext(NL),isPresent:e,safeToRemove:t})}function _7(i,e,t){const n=rr(i)?i:em(i);return n.start(iM("",n,e,t)),n.animation}const x7=(i,e)=>i.depth-e.depth;class S7{constructor(){this.children=[],this.isDirty=!1}add(e){CT(this.children,e),this.isDirty=!0}remove(e){RT(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(x7),this.isDirty=!1,this.children.forEach(e)}}function b7(i,e){const t=so.now(),n=({timestamp:a})=>{const s=a-t;s>=e&&(jf(n),i(s-e))};return na.setup(n,!0),()=>jf(n)}const eO=["TopLeft","TopRight","BottomLeft","BottomRight"],T7=eO.length,yw=i=>typeof i=="string"?parseFloat(i):i,_w=i=>typeof i=="number"||vn.test(i);function M7(i,e,t,n,a,s){a?(i.opacity=da(0,t.opacity??1,A7(n)),i.opacityExit=da(e.opacity??1,0,E7(n))):s&&(i.opacity=da(e.opacity??1,t.opacity??1,n));for(let o=0;o<T7;o++){const c=`border${eO[o]}Radius`;let f=xw(e,c),d=xw(t,c);if(f===void 0&&d===void 0)continue;f||(f=0),d||(d=0),f===0||d===0||_w(f)===_w(d)?(i[c]=Math.max(da(yw(f),yw(d),n),0),(kc.test(d)||kc.test(f))&&(i[c]+="%")):i[c]=d}(e.rotate||t.rotate)&&(i.rotate=da(e.rotate||0,t.rotate||0,n))}function xw(i,e){return i[e]!==void 0?i[e]:i.borderRadius}const A7=tO(0,.5,kD),E7=tO(.5,.95,hl);function tO(i,e,t){return n=>n<i?0:n>e?1:t(_0(i,e,n))}function Sw(i,e){i.min=e.min,i.max=e.max}function Yl(i,e){Sw(i.x,e.x),Sw(i.y,e.y)}function bw(i,e){i.translate=e.translate,i.scale=e.scale,i.originPoint=e.originPoint,i.origin=e.origin}function Tw(i,e,t,n,a){return i-=e,i=a1(i,1/t,n),a!==void 0&&(i=a1(i,1/a,n)),i}function w7(i,e=0,t=1,n=.5,a,s=i,o=i){if(kc.test(e)&&(e=parseFloat(e),e=da(o.min,o.max,e/100)-o.min),typeof e!="number")return;let c=da(s.min,s.max,n);i===s&&(c-=e),i.min=Tw(i.min,e,t,c,a),i.max=Tw(i.max,e,t,c,a)}function Mw(i,e,[t,n,a],s,o){w7(i,e[t],e[n],e[a],e.scale,s,o)}const C7=["x","scaleX","originX"],R7=["y","scaleY","originY"];function Aw(i,e,t,n){Mw(i.x,e,C7,t?t.x:void 0,n?n.x:void 0),Mw(i.y,e,R7,t?t.y:void 0,n?n.y:void 0)}function Ew(i){return i.translate===0&&i.scale===1}function nO(i){return Ew(i.x)&&Ew(i.y)}function ww(i,e){return i.min===e.min&&i.max===e.max}function D7(i,e){return ww(i.x,e.x)&&ww(i.y,e.y)}function Cw(i,e){return Math.round(i.min)===Math.round(e.min)&&Math.round(i.max)===Math.round(e.max)}function iO(i,e){return Cw(i.x,e.x)&&Cw(i.y,e.y)}function Rw(i){return kr(i.x)/kr(i.y)}function Dw(i,e){return i.translate===e.translate&&i.scale===e.scale&&i.originPoint===e.originPoint}class L7{constructor(){this.members=[]}add(e){CT(this.members,e),e.scheduleRender()}remove(e){if(RT(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(a=>e===a);if(t===0)return!1;let n;for(let a=t;a>=0;a--){const s=this.members[a];if(s.isPresent!==!1){n=s;break}}return n?(this.promote(n),!0):!1}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function O7(i,e,t){let n="";const a=i.x.translate/e.x,s=i.y.translate/e.y,o=t?.z||0;if((a||s||o)&&(n=`translate3d(${a}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:d,rotate:g,rotateX:y,rotateY:x,skewX:b,skewY:M}=t;d&&(n=`perspective(${d}px) ${n}`),g&&(n+=`rotate(${g}deg) `),y&&(n+=`rotateX(${y}deg) `),x&&(n+=`rotateY(${x}deg) `),b&&(n+=`skewX(${b}deg) `),M&&(n+=`skewY(${M}deg) `)}const c=i.x.scale*e.x,f=i.y.scale*e.y;return(c!==1||f!==1)&&(n+=`scale(${c}, ${f})`),n||"none"}const mb=["","X","Y","Z"],N7=1e3;let U7=0;function gb(i,e,t,n){const{latestValues:a}=e;a[i]&&(t[i]=a[i],e.setStaticValue(i,0),n&&(n[i]=0))}function aO(i){if(i.hasCheckedOptimisedAppear=!0,i.root===i)return;const{visualElement:e}=i.options;if(!e)return;const t=GL(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:a,layoutId:s}=i.options;window.MotionCancelOptimisedAnimation(t,"transform",na,!(a||s))}const{parent:n}=i;n&&!n.hasCheckedOptimisedAppear&&aO(n)}function sO({attachResizeListener:i,defaultParent:e,measureScroll:t,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(o={},c=e?.()){this.id=U7++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(z7),this.nodes.forEach(V7),this.nodes.forEach(H7),this.nodes.forEach(B7)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new S7)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new OT),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const f=this.eventHandlers.get(o);f&&f.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=xL(o)&&!E9(o),this.instance=o;const{layoutId:c,layout:f,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||c)&&(this.isLayoutDirty=!0),i){let g,y=0;const x=()=>this.root.updateBlockedByResize=!1;na.read(()=>{y=window.innerWidth}),i(o,()=>{const b=window.innerWidth;b!==y&&(y=b,this.root.updateBlockedByResize=!0,g&&g(),g=b7(x,250),i_.hasAnimatedSinceResize&&(i_.hasAnimatedSinceResize=!1,this.nodes.forEach(Nw)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||f)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeLayoutChanged:x,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const M=this.options.transition||d.getDefaultTransition()||X7,{onLayoutAnimationStart:R,onLayoutAnimationComplete:C}=d.getProps(),E=!this.targetLayout||!iO(this.targetLayout,b),N=!y&&x;if(this.options.layoutRoot||this.resumeFrom||N||y&&(E||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const I={...jT(M,"layout"),onPlay:R,onComplete:C};(d.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I),this.setAnimationOrigin(g,N)}else y||Nw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),jf(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(G7),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&aO(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const y=this.path[g];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:c,layout:f}=this.options;if(c===void 0&&!f)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Lw);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Ow);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(k7),this.nodes.forEach(I7),this.nodes.forEach(P7)):this.nodes.forEach(Ow),this.clearAllSnapshots();const c=so.now();Vs.delta=zu(0,1e3/60,c-Vs.timestamp),Vs.timestamp=c,Vs.isProcessing=!0,ab.update.process(Vs),ab.preRender.process(Vs),ab.render.process(Vs),Vs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,qT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(F7),this.sharedNodes.forEach(j7)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,na.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){na.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!kr(this.snapshot.measuredBox.x)&&!kr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=os(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const f=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:f,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!nO(this.projectionDelta),f=this.getTransformTemplate(),d=f?f(this.latestValues,""):void 0,g=d!==this.prevTransformTemplateValue;o&&this.instance&&(c||Xh(this.latestValues)||g)&&(a(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let f=this.removeElementScroll(c);return o&&(f=this.removeTransform(f)),Y7(f),{animationId:this.root.animationId,measuredBox:c,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return os();const c=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Z7))){const{scroll:d}=this.root;d&&(zp(c.x,d.offset.x),zp(c.y,d.offset.y))}return c}removeElementScroll(o){const c=os();if(Yl(c,o),this.scroll?.wasRoot)return c;for(let f=0;f<this.path.length;f++){const d=this.path[f],{scroll:g,options:y}=d;d!==this.root&&g&&y.layoutScroll&&(g.wasRoot&&Yl(c,o),zp(c.x,g.offset.x),zp(c.y,g.offset.y))}return c}applyTransform(o,c=!1){const f=os();Yl(f,o);for(let d=0;d<this.path.length;d++){const g=this.path[d];!c&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Bp(f,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Xh(g.latestValues)&&Bp(f,g.latestValues)}return Xh(this.latestValues)&&Bp(f,this.latestValues),f}removeTransform(o){const c=os();Yl(c,o);for(let f=0;f<this.path.length;f++){const d=this.path[f];if(!d.instance||!Xh(d.latestValues))continue;p2(d.latestValues)&&d.updateSnapshot();const g=os(),y=d.measurePageBox();Yl(g,y),Aw(c,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,g)}return Xh(this.latestValues)&&Aw(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Vs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==c;if(!(o||f&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:y}=this.options;if(!this.layout||!(g||y))return;this.resolvedRelativeTargetAt=Vs.timestamp;const x=this.getClosestProjectingParent();x&&this.linkedParentVersion!==x.layoutVersion&&!x.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(x&&x.layout?this.createRelativeTarget(x,this.layout.layoutBox,x.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=os(),this.targetWithTransforms=os()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),i7(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Yl(this.target,this.layout.layoutBox),zL(this.target,this.targetDelta)):Yl(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?this.createRelativeTarget(x,this.target,x.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||p2(this.parent.latestValues)||PL(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,c,f){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=os(),this.relativeTargetOrigin=os(),s1(this.relativeTargetOrigin,c,f),Yl(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const o=this.getLead(),c=!!this.resumingFrom||this!==o;let f=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(f=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Vs.timestamp&&(f=!1),f)return;const{layout:d,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||g))return;Yl(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,x=this.treeScale.y;mG(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=os());const{target:b}=o;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(bw(this.prevProjectionDelta.x,this.projectionDelta.x),bw(this.prevProjectionDelta.y,this.projectionDelta.y)),$g(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==x||!Dw(this.projectionDelta.x,this.prevProjectionDelta.x)||!Dw(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Fp(),this.projectionDelta=Fp(),this.projectionDeltaWithTransform=Fp()}setAnimationOrigin(o,c=!1){const f=this.snapshot,d=f?f.latestValues:{},g={...this.latestValues},y=Fp();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const x=os(),b=f?f.source:void 0,M=this.layout?this.layout.source:void 0,R=b!==M,C=this.getStack(),E=!C||C.members.length<=1,N=!!(R&&!E&&this.options.crossfade===!0&&!this.path.some(q7));this.animationProgress=0;let I;this.mixTargetDelta=z=>{const F=z/1e3;Uw(y.x,o.x,F),Uw(y.y,o.y,F),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(s1(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),W7(this.relativeTarget,this.relativeTargetOrigin,x,F),I&&D7(this.relativeTarget,I)&&(this.isProjectionDirty=!1),I||(I=os()),Yl(I,this.relativeTarget)),R&&(this.animationValues=g,M7(g,d,this.latestValues,F,N,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=F},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(jf(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=na.update(()=>{i_.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=em(0)),this.currentAnimation=_7(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(N7),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:f,layout:d,latestValues:g}=o;if(!(!c||!f||!d)){if(this!==o&&this.layout&&d&&rO(this.options.animationType,this.layout.layoutBox,d.layoutBox)){f=this.target||os();const y=kr(this.layout.layoutBox.x);f.x.min=o.target.x.min,f.x.max=f.x.min+y;const x=kr(this.layout.layoutBox.y);f.y.min=o.target.y.min,f.y.max=f.y.min+x}Yl(c,f),Bp(c,g),$g(this.projectionDeltaWithTransform,this.layoutCorrected,c,g)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new L7),this.sharedNodes.get(o).add(c);const d=c.options.initialPromotionConfig;c.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:f}={}){const d=this.getStack();d&&d.promote(this,f),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:f}=o;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(c=!0),!c)return;const d={};f.z&&gb("z",o,d,this.animationValues);for(let g=0;g<mb.length;g++)gb(`rotate${mb[g]}`,o,d,this.animationValues),gb(`skew${mb[g]}`,o,d,this.animationValues);o.render();for(const g in d)o.setStaticValue(g,d[g]),this.animationValues&&(this.animationValues[g]=d[g]);o.scheduleRender()}applyProjectionStyles(o,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=n_(c?.pointerEvents)||"",o.transform=f?f(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=n_(c?.pointerEvents)||""),this.hasProjected&&!Xh(this.latestValues)&&(o.transform=f?f({},""):"none",this.hasProjected=!1);return}o.visibility="";const g=d.animationValues||d.latestValues;this.applyTransformsToTarget();let y=O7(this.projectionDeltaWithTransform,this.treeScale,g);f&&(y=f(g,y)),o.transform=y;const{x,y:b}=this.projectionDelta;o.transformOrigin=`${x.origin*100}% ${b.origin*100}% 0`,d.animationValues?o.opacity=d===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:o.opacity=d===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const M in d2){if(g[M]===void 0)continue;const{correct:R,applyTo:C,isCSSVariable:E}=d2[M],N=y==="none"?g[M]:R(g[M],d);if(C){const I=C.length;for(let z=0;z<I;z++)o[C[z]]=N}else E?this.options.visualElement.renderState.vars[M]=N:o[M]=N}this.options.layoutId&&(o.pointerEvents=d===this?n_(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(Lw),this.root.sharedNodes.clear()}}}function I7(i){i.updateLayout()}function P7(i){const e=i.resumeFrom?.snapshot||i.snapshot;if(i.isLead()&&i.layout&&e&&i.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:n}=i.layout,{animationType:a}=i.options,s=e.source!==i.layout.source;a==="size"?ll(g=>{const y=s?e.measuredBox[g]:e.layoutBox[g],x=kr(y);y.min=t[g].min,y.max=y.min+x}):rO(a,e.layoutBox,t)&&ll(g=>{const y=s?e.measuredBox[g]:e.layoutBox[g],x=kr(t[g]);y.max=y.min+x,i.relativeTarget&&!i.currentAnimation&&(i.isProjectionDirty=!0,i.relativeTarget[g].max=i.relativeTarget[g].min+x)});const o=Fp();$g(o,t,e.layoutBox);const c=Fp();s?$g(c,i.applyTransform(n,!0),e.measuredBox):$g(c,t,e.layoutBox);const f=!nO(o);let d=!1;if(!i.resumeFrom){const g=i.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:y,layout:x}=g;if(y&&x){const b=os();s1(b,e.layoutBox,y.layoutBox);const M=os();s1(M,t,x.layoutBox),iO(b,M)||(d=!0),g.options.layoutRoot&&(i.relativeTarget=M,i.relativeTargetOrigin=b,i.relativeParent=g)}}}i.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:c,layoutDelta:o,hasLayoutChanged:f,hasRelativeLayoutChanged:d})}else if(i.isLead()){const{onExitComplete:t}=i.options;t&&t()}i.options.transition=void 0}function z7(i){i.parent&&(i.isProjecting()||(i.isProjectionDirty=i.parent.isProjectionDirty),i.isSharedProjectionDirty||(i.isSharedProjectionDirty=!!(i.isProjectionDirty||i.parent.isProjectionDirty||i.parent.isSharedProjectionDirty)),i.isTransformDirty||(i.isTransformDirty=i.parent.isTransformDirty))}function B7(i){i.isProjectionDirty=i.isSharedProjectionDirty=i.isTransformDirty=!1}function F7(i){i.clearSnapshot()}function Lw(i){i.clearMeasurements()}function Ow(i){i.isLayoutDirty=!1}function k7(i){const{visualElement:e}=i.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),i.resetTransform()}function Nw(i){i.finishAnimation(),i.targetDelta=i.relativeTarget=i.target=void 0,i.isProjectionDirty=!0}function V7(i){i.resolveTargetDelta()}function H7(i){i.calcProjection()}function G7(i){i.resetSkewAndRotation()}function j7(i){i.removeLeadSnapshot()}function Uw(i,e,t){i.translate=da(e.translate,0,t),i.scale=da(e.scale,1,t),i.origin=e.origin,i.originPoint=e.originPoint}function Iw(i,e,t,n){i.min=da(e.min,t.min,n),i.max=da(e.max,t.max,n)}function W7(i,e,t,n){Iw(i.x,e.x,t.x,n),Iw(i.y,e.y,t.y,n)}function q7(i){return i.animationValues&&i.animationValues.opacityExit!==void 0}const X7={duration:.45,ease:[.4,0,.1,1]},Pw=i=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(i),zw=Pw("applewebkit/")&&!Pw("chrome/")?Math.round:hl;function Bw(i){i.min=zw(i.min),i.max=zw(i.max)}function Y7(i){Bw(i.x),Bw(i.y)}function rO(i,e,t){return i==="position"||i==="preserve-aspect"&&!n7(Rw(e),Rw(t),.2)}function Z7(i){return i!==i.root&&i.scroll?.wasRoot}const K7=sO({attachResizeListener:(i,e)=>T0(i,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),vb={current:void 0},oO=sO({measureScroll:i=>({x:i.scrollLeft,y:i.scrollTop}),defaultParent:()=>{if(!vb.current){const i=new K7({});i.mount(window),i.setOptions({layoutScroll:!0}),vb.current=i}return vb.current},resetTransform:(i,e)=>{i.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:i=>window.getComputedStyle(i).position==="fixed"}),Q7={pan:{Feature:v7},drag:{Feature:g7,ProjectionNode:oO,MeasureLayout:$L}};function Fw(i,e,t){const{props:n}=i;i.animationState&&n.whileHover&&i.animationState.setActive("whileHover",t==="Start");const a="onHover"+t,s=n[a];s&&na.postRender(()=>s(e,V0(e)))}class J7 extends Zf{mount(){const{current:e}=this.node;e&&(this.unmount=S9(e,(t,n)=>(Fw(this.node,n,"Start"),a=>Fw(this.node,a,"End"))))}unmount(){}}class $7 extends Zf{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=B0(T0(this.node.current,"focus",()=>this.onFocus()),T0(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function kw(i,e,t){const{props:n}=i;if(i.current instanceof HTMLButtonElement&&i.current.disabled)return;i.animationState&&n.whileTap&&i.animationState.setActive("whileTap",t==="Start");const a="onTap"+(t==="End"?"":t),s=n[a];s&&na.postRender(()=>s(e,V0(e)))}class ej extends Zf{mount(){const{current:e}=this.node;e&&(this.unmount=A9(e,(t,n)=>(kw(this.node,n,"Start"),(a,{success:s})=>kw(this.node,a,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const S2=new WeakMap,yb=new WeakMap,tj=i=>{const e=S2.get(i.target);e&&e(i)},nj=i=>{i.forEach(tj)};function ij({root:i,...e}){const t=i||document;yb.has(t)||yb.set(t,{});const n=yb.get(t),a=JSON.stringify(e);return n[a]||(n[a]=new IntersectionObserver(nj,{root:i,...e})),n[a]}function aj(i,e,t){const n=ij(e);return S2.set(i,t),n.observe(i),()=>{S2.delete(i),n.unobserve(i)}}const sj={some:0,all:1};class rj extends Zf{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:a="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:sj[a]},c=f=>{const{isIntersecting:d}=f;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:g,onViewportLeave:y}=this.node.getProps(),x=d?g:y;x&&x(f)};return aj(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(oj(e,t))&&this.startObserver()}unmount(){}}function oj({viewport:i={}},{viewport:e={}}={}){return t=>i[t]!==e[t]}const lj={inView:{Feature:rj},tap:{Feature:ej},focus:{Feature:$7},hover:{Feature:J7}},cj={layout:{ProjectionNode:oO,MeasureLayout:$L}},uj={...KG,...lj,...Q7,...cj},Qt=hG(uj,AG);const fj=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),hj=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),Vw=i=>{const e=hj(i);return e.charAt(0).toUpperCase()+e.slice(1)},lO=(...i)=>i.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),dj=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var pj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const mj=ue.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:a="",children:s,iconNode:o,...c},f)=>ue.createElement("svg",{ref:f,...pj,width:e,height:e,stroke:i,strokeWidth:n?Number(t)*24/Number(e):t,className:lO("lucide",a),...!s&&!dj(c)&&{"aria-hidden":"true"},...c},[...o.map(([d,g])=>ue.createElement(d,g)),...Array.isArray(s)?s:[s]]));const Wt=(i,e)=>{const t=ue.forwardRef(({className:n,...a},s)=>ue.createElement(mj,{ref:s,iconNode:e,className:lO(`lucide-${fj(Vw(i))}`,`lucide-${i}`,n),...a}));return t.displayName=Vw(i),t};const gj=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],vj=Wt("activity",gj);const yj=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],ix=Wt("arrow-down",yj);const _j=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],xj=Wt("arrow-right-left",_j);const Sj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],bj=Wt("arrow-right",Sj);const Tj=[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]],Mj=Wt("arrow-up-narrow-wide",Tj);const Aj=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],ax=Wt("arrow-up",Aj);const Ej=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],aM=Wt("bell",Ej);const wj=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Cj=Wt("book-open",wj);const Rj=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Dj=Wt("brain",Rj);const Lj=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Oj=Wt("building-2",Lj);const Nj=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Hw=Wt("check",Nj);const Uj=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],H0=Wt("chevron-down",Uj);const Ij=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],sx=Wt("chevron-up",Ij);const Pj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],cO=Wt("circle-alert",Pj);const zj=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Bj=Wt("circle-check-big",zj);const Fj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],kj=Wt("circle-question-mark",Fj);const Vj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Hj=Wt("circle-x",Vj);const Gj=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],M0=Wt("clock",Gj);const jj=[["path",{d:"M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973",key:"1cez44"}],["path",{d:"m13 12-3 5h4l-3 5",key:"1t22er"}]],Wj=Wt("cloud-lightning",jj);const qj=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M8 19h.01",key:"puxtts"}],["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M12 21h.01",key:"h35vbk"}],["path",{d:"M16 15h.01",key:"rnfrdf"}],["path",{d:"M16 19h.01",key:"1vcnzz"}]],Xj=Wt("cloud-snow",qj);const Yj=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],Zj=Wt("cloud-rain",Yj);const Kj=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],zg=Wt("cloud",Kj);const Qj=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Jj=Wt("compass",Qj);const $j=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],eW=Wt("cpu",$j);const tW=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],nW=Wt("database",tW);const iW=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],aW=Wt("droplets",iW);const sW=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],rW=Wt("eye",sW);const oW=[["path",{d:"M12 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 12 18z",key:"b19h5q"}],["path",{d:"M2 6a2 2 0 0 1 3.414-1.414l6 6a2 2 0 0 1 0 2.828l-6 6A2 2 0 0 1 2 18z",key:"h7h5ge"}]],lW=Wt("fast-forward",oW);const cW=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],uO=Wt("flame",cW);const uW=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],fW=Wt("funnel",uW);const hW=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],sM=Wt("gauge",hW);const dW=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],pW=Wt("globe",dW);const mW=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],fO=Wt("info",mW);const gW=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],vW=Wt("keyboard",gW);const yW=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],_W=Wt("map-pin",yW);const xW=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],SW=Wt("maximize",xW);const bW=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],hO=Wt("mic",bW);const TW=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],MW=Wt("minimize",TW);const AW=[["path",{d:"M5 12h14",key:"1ays0h"}]],dO=Wt("minus",AW);const EW=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],pO=Wt("monitor",EW);const wW=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],CW=Wt("mouse-pointer",wW);const RW=[["rect",{x:"5",y:"2",width:"14",height:"20",rx:"7",key:"11ol66"}],["path",{d:"M12 6v4",key:"16clxf"}]],DW=Wt("mouse",RW);const LW=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],b2=Wt("navigation",LW);const OW=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],NW=Wt("palette",OW);const UW=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],IW=Wt("pause",UW);const PW=[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]],mO=Wt("plane",PW);const zW=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],e0=Wt("play",zW);const BW=[["path",{d:"M19.07 4.93A10 10 0 0 0 6.99 3.34",key:"z3du51"}],["path",{d:"M4 6h.01",key:"oypzma"}],["path",{d:"M2.29 9.62A10 10 0 1 0 21.31 8.35",key:"qzzz0"}],["path",{d:"M16.24 7.76A6 6 0 1 0 8.23 16.67",key:"1yjesh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M17.99 11.66A6 6 0 0 1 15.77 16.67",key:"1u2y91"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"m13.41 10.59 5.66-5.66",key:"mhq4k0"}]],FW=Wt("radar",BW);const kW=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],_d=Wt("radio",kW);const VW=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],gO=Wt("rotate-ccw",VW);const HW=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],GW=Wt("route",HW);const jW=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],WW=Wt("search",jW);const qW=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],vO=Wt("send",qW);const XW=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],YW=Wt("server",XW);const ZW=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],yO=Wt("settings",ZW);const KW=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],_O=Wt("shield",KW);const QW=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]],JW=Wt("skip-back",QW);const $W=[["path",{d:"M7 18v-6a5 5 0 1 1 10 0v6",key:"pcx96s"}],["path",{d:"M5 21a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-1a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2z",key:"1b4s83"}],["path",{d:"M21 12h1",key:"jtio3y"}],["path",{d:"M18.5 4.5 18 5",key:"g5sp9y"}],["path",{d:"M2 12h1",key:"1uaihz"}],["path",{d:"M12 2v1",key:"11qlp1"}],["path",{d:"m4.929 4.929.707.707",key:"1i51kw"}],["path",{d:"M12 12v6",key:"3ahymv"}]],eq=Wt("siren",$W);const tq=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],nq=Wt("skip-forward",tq);const iq=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],aq=Wt("sun",iq);const sq=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],rq=Wt("target",sq);const oq=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],lq=Wt("terminal",oq);const cq=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],uq=Wt("trending-up",cq);const fq=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],hm=Wt("triangle-alert",fq);const hq=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],xO=Wt("users",hq);const dq=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],nm=Wt("volume-2",dq);const pq=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],rM=Wt("volume-x",pq);const mq=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],gq=Wt("wifi-off",mq);const vq=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],yq=Wt("wifi",vq);const _q=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],xq=Wt("wind",_q);const Sq=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],dm=Wt("x",Sq);const bq=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],oM=Wt("zap",bq),Tq={regional:"M24 8 L24 4 L23 4 L23 8 L16 8 L16 10 L10 14 L10 16 L16 14 L16 16 L23 16 L23 20 L16 24 L16 26 L24 22 L24 24 L25 24 L25 22 L33 26 L33 24 L26 20 L26 16 L33 16 L33 14 L39 16 L39 14 L33 10 L33 8 L26 8 L26 4 L25 4 L25 8 Z",narrow:"M24 6 L24 2 L23 2 L23 6 L18 6 L18 8 L8 14 L8 16 L18 12 L18 18 L23 18 L23 22 L18 26 L18 28 L24 24 L24 26 L25 26 L25 24 L31 28 L31 26 L26 22 L26 18 L31 18 L31 12 L41 16 L41 14 L31 8 L31 6 L26 6 L26 2 L25 2 L25 6 Z",wide:"M24 5 L24 1 L23 1 L23 5 L17 5 L17 7 L5 15 L5 17 L17 11 L17 19 L23 19 L23 24 L17 28 L17 30 L24 25 L24 28 L25 28 L25 25 L32 30 L32 28 L26 24 L26 19 L32 19 L32 11 L44 17 L44 15 L32 7 L32 5 L26 5 L26 1 L25 1 L25 5 Z",heavy:"M24 4 L24 0 L23 0 L23 4 L16 4 L16 6 L2 16 L2 18 L16 10 L16 20 L23 20 L23 26 L16 31 L16 33 L24 27 L24 30 L25 30 L25 27 L33 33 L33 31 L26 26 L26 20 L33 20 L33 10 L47 18 L47 16 L33 6 L33 4 L26 4 L26 0 L25 0 L25 4 Z",super:"M24 3 L24 0 L23 0 L23 3 L15 3 L15 5 L0 17 L0 19 L15 9 L15 21 L23 21 L23 28 L15 34 L15 36 L24 29 L24 33 L25 33 L25 29 L34 36 L34 34 L26 28 L26 21 L34 21 L34 9 L49 19 L49 17 L34 5 L34 3 L26 3 L26 0 L25 0 L25 3 Z"},Mq="M24 6 L24 2 L23 2 L23 6 L20 6 L12 18 L12 20 L20 14 L20 22 L23 22 L23 24 L18 28 L18 30 L24 26 L24 28 L25 28 L25 26 L31 30 L31 28 L26 24 L26 22 L29 22 L29 14 L37 20 L37 18 L29 6 L26 6 L26 2 L25 2 L25 6 Z";function SO({size:i,color:e="#8b949e",width:t=24,className:n,isMilitary:a=!1}){const s=a?Mq:Tq[i],o=49,f=t*(i==="super"?1.2:i==="heavy"?1.1:1);return O.jsx("svg",{width:t,height:f,viewBox:`0 0 ${o} ${o}`,className:n,style:{transform:"rotate(90deg)"},children:O.jsx("path",{d:s,fill:e,opacity:.9})})}function bO(i){return{B737:{size:"narrow"},B738:{size:"narrow"},B739:{size:"narrow"},A320:{size:"narrow"},A321:{size:"narrow"},B787:{size:"wide"},B789:{size:"wide"},B777:{size:"wide"},A330:{size:"wide"},A350:{size:"wide"},B77W:{size:"heavy"},B747:{size:"heavy"},A380:{size:"super"},E175:{size:"regional"},CRJ9:{size:"regional"},SU35:{size:"regional"},SU57:{size:"regional"},F22:{size:"regional"},F15:{size:"regional"},F16:{size:"regional"}}[i]?.size||"narrow"}function Aq(i){return i>=18e3?`FL${Math.round(i/100).toString().padStart(3,"0")}`:`${Math.round(i/100)*100}`}function Eq({rate:i}){return Math.abs(i)<100?O.jsx(dO,{size:12,className:"text-secondary"}):i>0?O.jsx(ax,{size:12,className:"text-phosphor"}):O.jsx(ix,{size:12,className:"text-amber"})}function wq({track:i,flight:e,isSelected:t,onSelect:n,hasAlert:a=!1}){const s=c1(i.callsign),o=i.aircraftType?w2[i.aircraftType]:null,c=i.aircraftType?bO(i.aircraftType):"narrow",f=o?.category==="military",d=o?.typicalSeats?Math.round(o.typicalSeats*.85)+6:null;return O.jsxs(Qt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},whileHover:{scale:1.02,x:4},onClick:n,className:`flight-strip ${t?"selected":""} ${a?"has-alert":""}`,style:{background:t?"linear-gradient(90deg, rgba(0, 212, 255, 0.15), rgba(0, 212, 255, 0.05))":a?"linear-gradient(90deg, rgba(255, 51, 102, 0.15), rgba(255, 51, 102, 0.05))":"rgba(21, 27, 35, 0.8)",border:`1px solid ${t?"rgba(0, 212, 255, 0.5)":a?"rgba(255, 51, 102, 0.5)":"rgba(0, 255, 136, 0.15)"}`,borderRadius:6,padding:"8px 12px",marginBottom:4,cursor:"pointer",display:"grid",gridTemplateColumns:"1fr auto auto",alignItems:"center",gap:12,position:"relative",overflow:"hidden"},children:[a&&O.jsx(Qt.div,{animate:{opacity:[1,.5,1]},transition:{duration:.5,repeat:1/0},style:{position:"absolute",left:0,top:0,bottom:0,width:3,background:"#ff3366"}}),O.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:2},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[s&&O.jsx("span",{style:{fontSize:14,lineHeight:1},title:s.name,children:s.countryFlag}),O.jsx(SO,{size:c,color:t?"#00d4ff":s?.color||"#00ff88",width:18,isMilitary:f}),O.jsx("span",{style:{fontFamily:"'Orbitron', monospace",fontSize:13,fontWeight:600,color:t?"#00d4ff":"#e6edf3",letterSpacing:1},children:i.callsign}),a&&O.jsx(hm,{size:12,style:{color:"#ff3366"}})]}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e&&O.jsxs("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:10,color:"#8b949e"},children:[e.departureAirport,"  ",e.arrivalAirport]}),s&&O.jsx("span",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:9,fontWeight:600,color:s.color,background:`${s.color}20`,padding:"1px 4px",borderRadius:2,textTransform:"uppercase",letterSpacing:.5},children:s.name}),d&&O.jsxs("span",{style:{display:"flex",alignItems:"center",gap:2,fontFamily:"'JetBrains Mono', monospace",fontSize:9,color:"#6e7681"},title:"Souls on board",children:[O.jsx(xO,{size:9}),d]})]})]}),O.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",minWidth:50},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:2},children:[O.jsx(Eq,{rate:i.verticalRateFpm}),O.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:14,fontWeight:600,color:"#00ff88"},children:Aq(i.altitudeFt)})]}),O.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:9,color:"#6e7681"},children:Math.abs(i.verticalRateFpm)>100?`${i.verticalRateFpm>0?"+":""}${i.verticalRateFpm}`:"LVL"})]}),O.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",minWidth:45},children:[O.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:14,fontWeight:600,color:"#00d4ff"},children:i.speedKt}),O.jsxs("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:9,color:"#6e7681"},children:[Math.round(i.headingDeg).toString().padStart(3,"0"),""]})]})]})}function Cq({tracks:i,flights:e=new Map,alerts:t=[],selectedTrackId:n,onSelectTrack:a}){const[s,o]=ue.useState(!0),[c,f]=ue.useState("callsign"),[d,g]=ue.useState("asc"),[y,x]=ue.useState(""),[b,M]=ue.useState(!1),R=ue.useMemo(()=>{const N=new Set;return t.forEach(I=>{I.involvedFlightIds.forEach(z=>N.add(z))}),N},[t]),C=ue.useMemo(()=>{let N=i;if(y){const I=y.toUpperCase();N=i.filter(z=>z.callsign.toUpperCase().includes(I))}return[...N].sort((I,z)=>{let F=0;switch(c){case"callsign":F=I.callsign.localeCompare(z.callsign);break;case"altitude":F=I.altitudeFt-z.altitudeFt;break;case"speed":F=I.speedKt-z.speedKt;break}return d==="asc"?F:-F})},[i,c,d,y]),E=N=>{c===N?g(I=>I==="asc"?"desc":"asc"):(f(N),g("asc"))};return O.jsxs("div",{className:"flight-strip-bay panel",style:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:[O.jsxs("div",{className:"panel-header",style:{flexShrink:0},children:[O.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8,flex:1},children:[O.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:"#00ff88",boxShadow:"0 0 8px #00ff88"}}),"FLIGHT STRIPS",O.jsxs("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:10,color:"#8b949e",marginLeft:4},children:["(",C.length,")"]})]}),O.jsx("button",{onClick:()=>M(!b),style:{background:"transparent",border:"none",color:b?"#00ff88":"#8b949e",cursor:"pointer",padding:4},children:O.jsx(fW,{size:14})}),O.jsx("button",{onClick:()=>o(!s),style:{background:"transparent",border:"none",color:"#8b949e",cursor:"pointer",padding:4},children:s?O.jsx(sx,{size:14}):O.jsx(H0,{size:14})})]}),O.jsx(ls,{children:b&&O.jsx(Qt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},style:{borderBottom:"1px solid rgba(0, 255, 136, 0.1)",overflow:"hidden"},children:O.jsxs("div",{style:{padding:"8px 12px"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,background:"rgba(0, 0, 0, 0.3)",borderRadius:4,padding:"6px 10px",marginBottom:8},children:[O.jsx(WW,{size:12,style:{color:"#6e7681"}}),O.jsx("input",{type:"text",placeholder:"Search callsign...",value:y,onChange:N=>x(N.target.value),style:{background:"transparent",border:"none",outline:"none",color:"#e6edf3",fontFamily:"'JetBrains Mono', monospace",fontSize:11,width:"100%"}})]}),O.jsx("div",{style:{display:"flex",gap:4},children:["callsign","altitude","speed"].map(N=>O.jsxs("button",{onClick:()=>E(N),style:{flex:1,background:c===N?"rgba(0, 255, 136, 0.1)":"transparent",border:`1px solid ${c===N?"rgba(0, 255, 136, 0.3)":"rgba(0, 255, 136, 0.1)"}`,borderRadius:4,padding:"4px 8px",color:c===N?"#00ff88":"#8b949e",fontFamily:"'Rajdhani', sans-serif",fontSize:10,textTransform:"uppercase",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:4},children:[N.charAt(0).toUpperCase()+N.slice(1),c===N&&O.jsx(Mj,{size:10,style:{transform:d==="desc"?"rotate(180deg)":"none"}})]},N))})]})})}),O.jsx(ls,{children:s&&O.jsx(Qt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},style:{flex:1,overflowY:"auto",overflowX:"hidden",padding:8},children:O.jsx(ls,{mode:"popLayout",children:C.map(N=>O.jsx(wq,{track:N,flight:e.get(N.callsign),isSelected:n===N.trackId,onSelect:()=>a(N.trackId),hasAlert:R.has(N.callsign)},N.trackId))})})})]})}class Rq{audioContext=null;muted=!1;volume=.5;getContext(){return this.audioContext||(this.audioContext=new(window.AudioContext||window.webkitAudioContext)),this.audioContext}createOscillator(e,t,n,a=1){if(this.muted)return;const s=this.getContext(),o=s.createOscillator(),c=s.createGain();o.type=t,o.frequency.setValueAtTime(e,s.currentTime),c.gain.setValueAtTime(a*this.volume,s.currentTime),c.gain.exponentialRampToValueAtTime(.001,s.currentTime+n),o.connect(c),c.connect(s.destination),o.start(),o.stop(s.currentTime+n)}play(e){if(!this.muted)try{switch(e){case"click":this.createOscillator(800,"sine",.05,.3);break;case"message":this.createOscillator(600,"sine",.1,.4),setTimeout(()=>this.createOscillator(800,"sine",.1,.4),100);break;case"alert":this.createOscillator(880,"sine",.15,.5),setTimeout(()=>this.createOscillator(880,"sine",.15,.5),200);break;case"warning":const t=this.getContext(),n=t.createOscillator(),a=t.createGain();n.type="sawtooth",n.frequency.setValueAtTime(400,t.currentTime),n.frequency.linearRampToValueAtTime(800,t.currentTime+.3),a.gain.setValueAtTime(.3*this.volume,t.currentTime),a.gain.exponentialRampToValueAtTime(.001,t.currentTime+.4),n.connect(a),a.connect(t.destination),n.start(),n.stop(t.currentTime+.4);break;case"critical":const s=x=>{setTimeout(()=>{this.createOscillator(1e3,"square",.15,.4),setTimeout(()=>this.createOscillator(800,"square",.15,.4),150)},x)};s(0),s(400),s(800);break;case"emergency":const o=this.getContext(),c=o.createOscillator(),f=o.createGain();c.type="sawtooth",c.frequency.setValueAtTime(600,o.currentTime),c.frequency.linearRampToValueAtTime(1200,o.currentTime+.5),c.frequency.linearRampToValueAtTime(600,o.currentTime+1),f.gain.setValueAtTime(.4*this.volume,o.currentTime),f.gain.exponentialRampToValueAtTime(.001,o.currentTime+1.2),c.connect(f),f.connect(o.destination),c.start(),c.stop(o.currentTime+1.2);break;case"sweep":const d=this.getContext(),g=d.createOscillator(),y=d.createGain();g.type="sine",g.frequency.setValueAtTime(200,d.currentTime),g.frequency.exponentialRampToValueAtTime(100,d.currentTime+.3),y.gain.setValueAtTime(.1*this.volume,d.currentTime),y.gain.exponentialRampToValueAtTime(.001,d.currentTime+.3),g.connect(y),y.connect(d.destination),g.start(),g.stop(d.currentTime+.3);break;case"radar":this.createOscillator(1200,"sine",.03,.2);break;case"militaryHorn":this.playMilitaryHorn();break;case"klaxon":this.playKlaxon();break;case"transponderLost":this.playTransponderLost();break;case"commandAck":this.createOscillator(600,"sine",.08,.4),setTimeout(()=>this.createOscillator(900,"sine",.08,.4),80);break;case"commandReject":this.createOscillator(400,"square",.15,.3),setTimeout(()=>this.createOscillator(250,"square",.2,.3),150);break;case"heroSuccess":this.playHeroSuccess();break;case"staticBurst":this.playStaticBurst();break;case"altitudeWarning":this.playAltitudeWarning();break;case"pullUp":this.playPullUp();break;case"breathingPanic":this.playBreathingPanic();break;case"tensionDrone":this.playTensionDrone();break;case"heartbeat":this.playHeartbeat();break}}catch{}}playMilitaryHorn(){const e=this.getContext(),t=2,n=e.createOscillator(),a=e.createGain();n.type="sawtooth",n.frequency.setValueAtTime(110,e.currentTime),n.frequency.linearRampToValueAtTime(98,e.currentTime+t),a.gain.setValueAtTime(.35*this.volume,e.currentTime),a.gain.exponentialRampToValueAtTime(.001,e.currentTime+t),n.connect(a),a.connect(e.destination),n.start(),n.stop(e.currentTime+t);const s=e.createOscillator(),o=e.createGain();s.type="sine",s.frequency.setValueAtTime(220,e.currentTime),s.frequency.linearRampToValueAtTime(196,e.currentTime+t),o.gain.setValueAtTime(.2*this.volume,e.currentTime),o.gain.exponentialRampToValueAtTime(.001,e.currentTime+t),s.connect(o),o.connect(e.destination),s.start(),s.stop(e.currentTime+t);const c=e.createOscillator(),f=e.createGain();c.type="triangle",c.frequency.setValueAtTime(330,e.currentTime),f.gain.setValueAtTime(.1*this.volume,e.currentTime),f.gain.exponentialRampToValueAtTime(.001,e.currentTime+t*.8),c.connect(f),f.connect(e.destination),c.start(),c.stop(e.currentTime+t)}playKlaxon(){const e=t=>{setTimeout(()=>{const n=this.getContext(),a=n.createOscillator(),s=n.createGain();a.type="square",a.frequency.setValueAtTime(800,n.currentTime),a.frequency.linearRampToValueAtTime(600,n.currentTime+.15),s.gain.setValueAtTime(.3*this.volume,n.currentTime),s.gain.exponentialRampToValueAtTime(.001,n.currentTime+.2),a.connect(s),s.connect(n.destination),a.start(),a.stop(n.currentTime+.2)},t)};e(0),e(250),e(500)}playTransponderLost(){const e=this.getContext(),t=1.5,n=e.createOscillator(),a=e.createGain();n.type="sine",n.frequency.setValueAtTime(1200,e.currentTime),n.frequency.exponentialRampToValueAtTime(100,e.currentTime+t),a.gain.setValueAtTime(.3*this.volume,e.currentTime),a.gain.exponentialRampToValueAtTime(.001,e.currentTime+t),n.connect(a),a.connect(e.destination),n.start(),n.stop(e.currentTime+t)}playHeroSuccess(){[523,659,784,1047].forEach((t,n)=>{setTimeout(()=>{this.createOscillator(t,"sine",.3,.5),this.createOscillator(t*1.5,"triangle",.25,.2)},n*150)})}playStaticBurst(){const e=this.getContext(),t=.3,n=e.sampleRate*t,a=e.createBuffer(1,n,e.sampleRate),s=a.getChannelData(0);for(let f=0;f<n;f++)s[f]=Math.random()*2-1;const o=e.createBufferSource(),c=e.createGain();o.buffer=a,c.gain.setValueAtTime(.15*this.volume,e.currentTime),c.gain.exponentialRampToValueAtTime(.001,e.currentTime+t),o.connect(c),c.connect(e.destination),o.start()}playAltitudeWarning(){const e=t=>{setTimeout(()=>{const n=this.getContext(),a=n.createOscillator(),s=n.createGain();a.type="square",a.frequency.value=1e3,s.gain.setValueAtTime(.4*this.volume,n.currentTime),s.gain.exponentialRampToValueAtTime(.01,n.currentTime+.1),a.connect(s),s.connect(n.destination),a.start(),a.stop(n.currentTime+.1)},t)};e(0),e(120),e(240),e(360)}playPullUp(){const e=this.getContext(),t=e.createOscillator(),n=e.createGain();t.type="square",t.frequency.setValueAtTime(300,e.currentTime),t.frequency.linearRampToValueAtTime(500,e.currentTime+.3),n.gain.setValueAtTime(.5*this.volume,e.currentTime),n.gain.exponentialRampToValueAtTime(.01,e.currentTime+.4),t.connect(n),n.connect(e.destination),t.start(),t.stop(e.currentTime+.4);const a=e.createOscillator(),s=e.createGain();a.type="square",a.frequency.setValueAtTime(900,e.currentTime),s.gain.setValueAtTime(.3*this.volume,e.currentTime),s.gain.exponentialRampToValueAtTime(.01,e.currentTime+.3),a.connect(s),s.connect(e.destination),a.start(),a.stop(e.currentTime+.3)}playBreathingPanic(){const e=this.getContext(),t=1.2,n=e.sampleRate*t,a=e.createBuffer(1,n,e.sampleRate),s=a.getChannelData(0);for(let d=0;d<n;d++){const g=d/e.sampleRate,y=Math.sin(g*Math.PI*4),x=(Math.random()*2-1)*.3;s[d]=y*x}const o=e.createBufferSource(),c=e.createGain(),f=e.createBiquadFilter();o.buffer=a,f.type="bandpass",f.frequency.value=400,f.Q.value=5,c.gain.setValueAtTime(.2*this.volume,e.currentTime),c.gain.setValueAtTime(.2*this.volume,e.currentTime+t-.3),c.gain.linearRampToValueAtTime(0,e.currentTime+t),o.connect(f),f.connect(c),c.connect(e.destination),o.start()}playTensionDrone(){const e=this.getContext(),t=3,n=e.createOscillator(),a=e.createGain();n.type="sine",n.frequency.value=55,a.gain.setValueAtTime(0,e.currentTime),a.gain.linearRampToValueAtTime(.2*this.volume,e.currentTime+.5),a.gain.setValueAtTime(.2*this.volume,e.currentTime+t-.5),a.gain.linearRampToValueAtTime(0,e.currentTime+t),n.connect(a),a.connect(e.destination),n.start(),n.stop(e.currentTime+t)}playHeartbeat(){const e=this.getContext(),t=e.createOscillator(),n=e.createGain();t.type="sine",t.frequency.setValueAtTime(80,e.currentTime),t.frequency.exponentialRampToValueAtTime(40,e.currentTime+.12),n.gain.setValueAtTime(.3*this.volume,e.currentTime),n.gain.exponentialRampToValueAtTime(.01,e.currentTime+.12),t.connect(n),n.connect(e.destination),t.start(),t.stop(e.currentTime+.12),setTimeout(()=>{const a=e.createOscillator(),s=e.createGain();a.type="sine",a.frequency.setValueAtTime(60,e.currentTime),a.frequency.exponentialRampToValueAtTime(35,e.currentTime+.12),s.gain.setValueAtTime(.25*this.volume,e.currentTime),s.gain.exponentialRampToValueAtTime(.01,e.currentTime+.12),a.connect(s),s.connect(e.destination),a.start(),a.stop(e.currentTime+.12)},150)}setMuted(e){this.muted=e}setVolume(e){this.volume=Math.max(0,Math.min(1,e))}isMuted(){return this.muted}getVolume(){return this.volume}}const Ou=new Rq;class Dq{synth=null;enabled=!0;initialized=!1;voicesLoaded=!1;speakQueue=[];isSpeaking=!1;currentOnComplete=null;constructor(){typeof window<"u"&&"speechSynthesis"in window?(this.synth=window.speechSynthesis,this.loadVoices(),this.synth.onvoiceschanged!==void 0&&(this.synth.onvoiceschanged=()=>{this.loadVoices()}),setTimeout(()=>this.loadVoices(),100),setTimeout(()=>this.loadVoices(),500),setTimeout(()=>this.loadVoices(),1e3),console.log("[Voice] Speech synthesis available")):console.warn("[Voice] Speech synthesis NOT available in this browser")}loadVoices(){if(!this.synth)return;const e=this.synth.getVoices();if(this.voicesLoaded=e.length>0,this.voicesLoaded){console.log("[Voice] Loaded",e.length,"voices");const t=e.filter(n=>n.lang.startsWith("en"));console.log("[Voice] English voices:",t.slice(0,3).map(n=>`${n.name} (${n.lang})`))}}getBestVoice(){if(!this.synth)return null;const e=this.synth.getVoices();if(e.length===0)return null;const t=["Google US English","Google UK English Female","Google UK English Male","Microsoft David","Microsoft Zira","Microsoft Mark","Alex","Samantha","Daniel","en-US","en_US","en-GB","en_GB","en-","en_"];for(const n of t){const a=e.find(s=>s.name.includes(n)||s.lang.startsWith(n));if(a)return console.log("[Voice] Selected voice:",a.name,a.lang),a}return console.log("[Voice] Using fallback voice:",e[0]?.name),e[0]||null}speak(e,t="normal",n){if(!this.synth||!this.enabled){console.log("[Voice] Skipping - synth:",!!this.synth,"enabled:",this.enabled),n?.onComplete?.();return}t==="critical"?(this.speakQueue.unshift({text:e,priority:t,onComplete:n?.onComplete,voiceType:n?.voiceType}),this.synth.cancel(),this.isSpeaking=!1):this.speakQueue.push({text:e,priority:t,onComplete:n?.onComplete,voiceType:n?.voiceType}),this.processQueue()}processQueue(){if(this.isSpeaking||this.speakQueue.length===0||!this.synth)return;const e=this.speakQueue.shift();if(!e)return;this.isSpeaking=!0,this.currentOnComplete=e.onComplete||null;const t=new SpeechSynthesisUtterance(e.text);t.lang="en-US";const n=this.getBestVoice();switch(n&&(t.voice=n),e.voiceType){case"atc":t.rate=1.2,t.pitch=1.1;break;case"sarah":t.rate=.9,t.pitch=1.3;break;default:t.rate=e.priority==="critical"?1.1:1,t.pitch=1}t.volume=1,t.onstart=()=>{console.log("[Voice] Speaking:",e.text.substring(0,40)+"...")},t.onend=()=>{console.log("[Voice] Finished");const a=this.currentOnComplete;this.isSpeaking=!1,this.currentOnComplete=null,a&&setTimeout(()=>a(),100),setTimeout(()=>this.processQueue(),200)},t.onerror=a=>{console.error("[Voice] Error:",a.error);const s=this.currentOnComplete;this.isSpeaking=!1,this.currentOnComplete=null,s&&setTimeout(()=>s(),100),setTimeout(()=>this.processQueue(),100)},this.synth.cancel(),setTimeout(()=>{if(this.synth)try{this.synth.speak(t)}catch(a){console.error("[Voice] Speak error:",a),this.isSpeaking=!1}},50)}speakAlert(e,t){if(!this.enabled)return;let n="",a="normal";switch(e){case"CRITICAL":n="Critical Alert. ",a="critical";break;case"WARNING":n="Warning. ",a="high";break;default:n="",a="normal"}const s=this.cleanForSpeech(t);this.speak(n+s,a)}speakInstruction(e){this.speak(e,"normal")}speakATC(e,t){this.speak(this.cleanForSpeech(e),"high",{voiceType:"atc",onComplete:t})}speakSarah(e,t){this.speak(e,"normal",{voiceType:"sarah",onComplete:t})}speakNarrative(e,t){this.speak(this.cleanForSpeech(e),"normal",{voiceType:"narrator",onComplete:t})}cleanForSpeech(e){return e.replace(/FL(\d+)/g,"flight level $1").replace(/(\d+)kt/gi,"$1 knots").replace(/(\d+)nm/gi,"$1 nautical miles").replace(/(\d+)ft/gi,"$1 feet").replace(/(\d+)fpm/gi,"$1 feet per minute").replace(/TCAS/g,"T-CAS").replace(/\bRA\b/g,"resolution advisory").replace(/NMAC/g,"near mid-air collision").replace(/ADS-B/g,"ADS-B").replace(/ETA/g,"estimated time of arrival").replace(/NORAD/g,"NORAD").replace(/\bFBI\b/g,"F-B-I").replace(/\bTSA\b/g,"T-S-A").replace(/\bFAA\b/g,"F-A-A").replace(/SU-35/g,"S-U 35").replace(/F-22/g,"F-22").replace(/F-15/g,"F-15").replace(/EF-3/g,"E-F 3").replace(/Boeing 737/g,"Boeing 737").replace(/AAL(\d+)/g,"American $1").replace(/UAL(\d+)/g,"United $1").replace(/DAL(\d+)/g,"Delta $1").replace(/SWA(\d+)/g,"Southwest $1").replace(/BAW(\d+)/g,"British Airways $1").replace(/AFR(\d+)/g,"Air France $1").replace(/FDX(\d+)/g,"FedEx $1").replace(/JBU(\d+)/g,"JetBlue $1").replace(/NKS(\d+)/g,"Spirit $1").replace(/ASA(\d+)/g,"Alaska $1").replace(/AIC(\d+)/g,"Air India $1").replace(/QFA(\d+)/g,"Qantas $1").replace(/UAE(\d+)/g,"Emirates $1").replace(/[-]/g,", ").replace(/[!]+/g,".").replace(/\s+/g," ").trim()}setEnabled(e){this.enabled=e,!e&&this.synth&&(this.synth.cancel(),this.speakQueue=[],this.isSpeaking=!1),console.log("[Voice] Enabled:",e)}isEnabled(){return this.enabled}cancel(){this.synth?.cancel(),this.speakQueue=[],this.isSpeaking=!1}forceInit(){if(this.synth&&!this.initialized){this.initialized=!0;const e=new SpeechSynthesisUtterance("");e.volume=0,this.synth.speak(e),this.loadVoices(),console.log("[Voice] Force initialized on user interaction")}}test(){console.log("[Voice] Testing..."),this.speak("Voice notification system online. Testing one two three.","normal")}getStatus(){return{available:!!this.synth,enabled:this.enabled,initialized:this.initialized,voicesLoaded:this.voicesLoaded,voiceCount:this.synth?.getVoices().length||0,queueLength:this.speakQueue.length,isSpeaking:this.isSpeaking}}}const zc=new Dq;if(typeof window<"u"){const i=()=>{zc.forceInit(),window.removeEventListener("click",i),window.removeEventListener("keydown",i),window.removeEventListener("touchstart",i)};window.addEventListener("click",i,{once:!0}),window.addEventListener("keydown",i,{once:!0}),window.addEventListener("touchstart",i,{once:!0}),window.VoiceNotification=zc}class Lq{audioContext=null;masterGain=null;isPlaying=!1;scheduledNodes=[];tensionInterval=null;notes={C2:65.41,D2:73.42,E2:82.41,F2:87.31,G2:98,A2:110,Bb2:116.54,B2:123.47,C3:130.81,D3:146.83,E3:164.81,F3:174.61,G3:196,A3:220,Bb3:233.08,B3:246.94,C4:261.63,D4:293.66,E4:329.63,F4:349.23,G4:392,A4:440,Bb4:466.16,B4:493.88,C5:523.25,D5:587.33};getContext(){return this.audioContext||(this.audioContext=new AudioContext),this.audioContext}createTensionDrone(e,t,n){const a=e.createOscillator(),s=e.createGain();a.type="sine",a.frequency.value=this.notes.C2,s.gain.setValueAtTime(0,t),s.gain.linearRampToValueAtTime(.15,t+2),s.gain.setValueAtTime(.15,t+n-2),s.gain.linearRampToValueAtTime(0,t+n),a.connect(s),s.connect(this.masterGain),a.start(t),a.stop(t+n),this.scheduledNodes.push(a);const o=e.createOscillator(),c=e.createGain();o.type="sine",o.frequency.value=this.notes.C2*.998,c.gain.setValueAtTime(0,t),c.gain.linearRampToValueAtTime(.12,t+2),c.gain.setValueAtTime(.12,t+n-2),c.gain.linearRampToValueAtTime(0,t+n),o.connect(c),c.connect(this.masterGain),o.start(t),o.stop(t+n),this.scheduledNodes.push(o);const f=e.createOscillator(),d=e.createGain();f.type="sine",f.frequency.value=this.notes.G4,d.gain.setValueAtTime(0,t),d.gain.linearRampToValueAtTime(.08,t+3),d.gain.setValueAtTime(.08,t+n-3),d.gain.linearRampToValueAtTime(0,t+n),f.connect(d),d.connect(this.masterGain),f.start(t),f.stop(t+n),this.scheduledNodes.push(f)}createHeartbeat(e,t,n=.3){const a=e.createOscillator(),s=e.createGain();a.type="sine",a.frequency.setValueAtTime(80,t),a.frequency.exponentialRampToValueAtTime(40,t+.15),s.gain.setValueAtTime(n,t),s.gain.exponentialRampToValueAtTime(.01,t+.15),a.connect(s),s.connect(this.masterGain),a.start(t),a.stop(t+.15),this.scheduledNodes.push(a);const o=e.createOscillator(),c=e.createGain();o.type="sine",o.frequency.setValueAtTime(60,t+.2),o.frequency.exponentialRampToValueAtTime(35,t+.35),c.gain.setValueAtTime(n*.7,t+.2),c.gain.exponentialRampToValueAtTime(.01,t+.35),o.connect(c),c.connect(this.masterGain),o.start(t+.2),o.stop(t+.35),this.scheduledNodes.push(o)}createTick(e,t){const n=e.createOscillator(),a=e.createGain(),s=e.createBiquadFilter();n.type="square",n.frequency.value=1200,s.type="highpass",s.frequency.value=800,a.gain.setValueAtTime(.15,t),a.gain.exponentialRampToValueAtTime(.01,t+.05),n.connect(s),s.connect(a),a.connect(this.masterGain),n.start(t),n.stop(t+.05),this.scheduledNodes.push(n)}createTensionRise(e,t,n){[this.notes.C3,this.notes.C3*1.06,this.notes.E3,this.notes.G3*1.02].forEach(s=>{const o=e.createOscillator(),c=e.createGain(),f=e.createBiquadFilter();o.type="sawtooth",o.frequency.setValueAtTime(s,t),o.frequency.linearRampToValueAtTime(s*1.1,t+n),f.type="lowpass",f.frequency.value=2e3,f.Q.value=2,c.gain.setValueAtTime(0,t),c.gain.linearRampToValueAtTime(.08,t+n*.3),c.gain.setValueAtTime(.08,t+n*.7),c.gain.linearRampToValueAtTime(0,t+n),o.connect(f),f.connect(c),c.connect(this.masterGain),o.start(t),o.stop(t+n),this.scheduledNodes.push(o)})}createBrassStab(e,t,n=this.notes.C3){const a=e.createOscillator(),s=e.createGain(),o=e.createBiquadFilter();a.type="sawtooth",a.frequency.value=n,o.type="lowpass",o.frequency.value=1500,s.gain.setValueAtTime(.4,t),s.gain.exponentialRampToValueAtTime(.01,t+.8),a.connect(o),o.connect(s),s.connect(this.masterGain),a.start(t),a.stop(t+.8),this.scheduledNodes.push(a)}createNoiseSwell(e,t,n){const a=e.sampleRate*n,s=e.createBuffer(1,a,e.sampleRate),o=s.getChannelData(0);for(let g=0;g<a;g++)o[g]=(Math.random()*2-1)*.3;const c=e.createBufferSource(),f=e.createGain(),d=e.createBiquadFilter();c.buffer=s,d.type="lowpass",d.frequency.value=500,f.gain.setValueAtTime(0,t),f.gain.linearRampToValueAtTime(.15,t+n*.5),f.gain.linearRampToValueAtTime(0,t+n),c.connect(d),d.connect(f),f.connect(this.masterGain),c.start(t),c.stop(t+n),this.scheduledNodes.push(c)}play(){if(this.isPlaying)return;const e=this.getContext();e.state==="suspended"&&e.resume(),this.isPlaying=!0,this.masterGain=e.createGain(),this.masterGain.gain.value=.7,this.masterGain.connect(e.destination);const t=e.currentTime,n=30;this.createTensionDrone(e,t,n),this.createNoiseSwell(e,t,8);let a=t+2;const s=40;for(let o=0;o<s;o++){const c=1.2-o/s*.6,f=.25+o/s*.15;this.createHeartbeat(e,a,f),a+=c}for(let o=0;o<20;o++)this.createTick(e,t+o*1.5);this.createTensionRise(e,t+5,10),this.createTensionRise(e,t+15,10),this.createTensionRise(e,t+20,8),this.createBrassStab(e,t+8,this.notes.G2),this.createBrassStab(e,t+16,this.notes.A2),this.createBrassStab(e,t+24,this.notes.C3),this.createNoiseSwell(e,t+22,8),setTimeout(()=>{this.isPlaying=!1},n*1e3)}stop(){if(this.isPlaying){if(this.isPlaying=!1,this.masterGain){const e=this.getContext();this.masterGain.gain.linearRampToValueAtTime(0,e.currentTime+1)}this.scheduledNodes.forEach(e=>{try{(e instanceof OscillatorNode||e instanceof AudioBufferSourceNode)&&e.stop()}catch{}}),this.scheduledNodes=[],this.tensionInterval&&(clearInterval(this.tensionInterval),this.tensionInterval=null)}}isActive(){return this.isPlaying}}const Gw=new Lq,Oq={narrator:{languageCode:"en-US",name:"en-US-Neural2-D",pitch:0,speakingRate:1},atc:{languageCode:"en-US",name:"en-US-Neural2-J",pitch:0,speakingRate:1.15},controller_e97:{languageCode:"en-US",name:"en-US-Neural2-A",pitch:1,speakingRate:1.1},captain_sharma:{languageCode:"en-IN",name:"en-IN-Neural2-B",pitch:-2,speakingRate:.95},fa_priya:{languageCode:"en-IN",name:"en-IN-Neural2-A",pitch:2,speakingRate:1},hijacker_norway:{languageCode:"nb-NO",name:"nb-NO-Wavenet-B",pitch:-1,speakingRate:.9},captain_williams:{languageCode:"en-AU",name:"en-AU-Neural2-B",pitch:-2,speakingRate:.95},sarah:{languageCode:"en-AU",name:"en-AU-Neural2-A",pitch:3,speakingRate:1.1},hijacker_sweden:{languageCode:"sv-SE",name:"sv-SE-Wavenet-A",pitch:0,speakingRate:.85},british_crew:{languageCode:"en-GB",name:"en-GB-Neural2-B",pitch:0,speakingRate:1},pilot_american:{languageCode:"en-US",name:"en-US-Neural2-I",pitch:-1,speakingRate:1.05},pilot_french:{languageCode:"fr-FR",name:"fr-FR-Neural2-B",pitch:0,speakingRate:.95},pilot_german:{languageCode:"de-DE",name:"de-DE-Neural2-B",pitch:-1,speakingRate:1},pilot_emirates:{languageCode:"ar-XA",name:"ar-XA-Wavenet-B",pitch:0,speakingRate:.9}},Nq={AAL:"pilot_american",UAL:"pilot_american",DAL:"pilot_american",SWA:"pilot_american",JBU:"pilot_american",ASA:"pilot_american",FDX:"pilot_american",AIC:"captain_sharma",QFA:"captain_williams",BAW:"british_crew",AFR:"pilot_french",DLH:"pilot_german",UAE:"pilot_emirates"},Uq={"Jeg krever at dette flyet lander i Wakanda umiddelbart!":"I demand that this plane lands in Wakanda immediately!","Ingen bevegelse! Jeg har kontroll over dette flyet n.":"No movement! I have control of this plane now.","Wakanda vil hre om dette. Dere vil alle betale.":"Wakanda will hear about this. You will all pay.","Still! Eller det blir konsekvenser.":"Quiet! Or there will be consequences."},Iq={"Nej... du kan inte...":"No... you cannot...","Vakanda fr alltid...":"Wakanda forever..."};class Pq{apiKey;audioQueue=[];isPlaying=!1;currentAudio=null;audioContext=null;enabled=!0;volume=1;audioCache=new Map;radioEffectEnabled=!0;useBrowserFallback=!1;constructor(){this.apiKey="AQ.Ab8RN6KLNjOCUW6d37OvvY1phbSVngTt25uLZY_2OiCXBCqelQ"}getAudioContext(){return this.audioContext||(this.audioContext=new AudioContext),this.audioContext}createRadioEffectChain(e,t){const n=e.createBiquadFilter();n.type="lowpass",n.frequency.value=3400,n.Q.value=1;const a=e.createBiquadFilter();a.type="highpass",a.frequency.value=300,a.Q.value=1;const s=e.createBiquadFilter();s.type="peaking",s.frequency.value=1500,s.gain.value=3,s.Q.value=.8;const o=e.createWaveShaper();o.curve=this.makeDistortionCurve(5),o.oversample="2x";const c=e.createGain();return c.gain.value=this.volume*1.2,t.connect(a),a.connect(n),n.connect(s),s.connect(o),o.connect(c),c}makeDistortionCurve(e){const n=new ArrayBuffer(1024),a=new Float32Array(n);for(let s=0;s<256;s++){const o=s*2/256-1;a[s]=(Math.PI+e)*o/(Math.PI+e*Math.abs(o))}return a}addRadioClick(e,t,n){const a=e.createOscillator(),s=e.createGain();a.frequency.value=1200,a.type="square",s.gain.setValueAtTime(0,n),s.gain.linearRampToValueAtTime(.1*this.volume,n+.005),s.gain.exponentialRampToValueAtTime(.001,n+.03),a.connect(s),s.connect(t),a.start(n),a.stop(n+.03)}async synthesize(e,t){const n=`${t}:${e}`;if(this.audioCache.has(n))return this.audioCache.get(n);const a=Oq[t],s=await fetch(`https://texttospeech.googleapis.com/v1/text:synthesize?key=${this.apiKey}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({input:{text:e},voice:{languageCode:a.languageCode,name:a.name},audioConfig:{audioEncoding:"MP3",pitch:a.pitch,speakingRate:a.speakingRate}})});if(!s.ok){const f=await s.text();throw console.error("[CloudTTS] API error:",f),new Error(`TTS API error: ${s.status}`)}const c=(await s.json()).audioContent;return this.audioCache.set(n,c),c}async playAudio(e,t=!1){const n=atob(e),a=new Uint8Array(n.length);for(let s=0;s<n.length;s++)a[s]=n.charCodeAt(s);return t&&this.radioEffectEnabled?this.playWithRadioEffect(a.buffer):this.playStandard(e)}async playStandard(e){return new Promise((t,n)=>{const a=new Audio(`data:audio/mp3;base64,${e}`);a.volume=this.volume,this.currentAudio=a,a.onended=()=>{this.currentAudio=null,t()},a.onerror=s=>{this.currentAudio=null,n(s)},a.play().catch(n)})}async speakWithBrowserFallback(e){return new Promise((t,n)=>{if(!("speechSynthesis"in window)){n(new Error("SpeechSynthesis not supported"));return}const a=new SpeechSynthesisUtterance(e);a.rate=1,a.pitch=1,a.volume=this.volume;const s=speechSynthesis.getVoices(),o=s.find(c=>c.lang.startsWith("en")&&c.name.includes("Google"))||s.find(c=>c.lang.startsWith("en-US"))||s.find(c=>c.lang.startsWith("en"));o&&(a.voice=o),a.onend=()=>t(),a.onerror=c=>n(c),speechSynthesis.speak(a)})}async playWithRadioEffect(e){return new Promise(async(t,n)=>{try{const a=this.getAudioContext();a.state==="suspended"&&await a.resume();const s=await a.decodeAudioData(e.slice(0)),o=a.createBufferSource();o.buffer=s,this.createRadioEffectChain(a,o).connect(a.destination),this.addRadioClick(a,a.destination,a.currentTime);const f=s.duration;this.addRadioClick(a,a.destination,a.currentTime+f-.02),o.onended=()=>{t()},o.start(0)}catch(a){console.error("[CloudTTS] Radio effect error, falling back to standard:",a),n(a)}})}async processQueue(){if(this.isPlaying||this.audioQueue.length===0)return;this.isPlaying=!0;const e=this.audioQueue.shift();try{if(!this.enabled){console.log("[CloudTTS] Disabled, skipping:",e.text.substring(0,50)),this.isPlaying=!1,this.processQueue();return}if(this.useBrowserFallback){console.log("[CloudTTS] Using browser fallback mode"),await this.speakWithBrowserFallback(e.text),e.onComplete?.(),this.isPlaying=!1,setTimeout(()=>this.processQueue(),100);return}const t=await this.synthesize(e.text,e.character);await this.playAudio(t,e.applyRadioEffect??!1),e.onComplete?.()}catch(t){console.error("[CloudTTS] Cloud TTS failed:",t)}this.isPlaying=!1,setTimeout(()=>this.processQueue(),100)}shouldApplyRadioEffect(e){return e!=="narrator"}speak(e,t,n){if(!this.apiKey){console.warn("[CloudTTS] No API key, skipping"),n?.();return}const a=this.shouldApplyRadioEffect(t);this.audioQueue.push({text:e,character:t,onComplete:n,applyRadioEffect:a}),this.processQueue()}speakNarrator(e,t){this.speak(e,"narrator",t)}speakATC(e,t){this.speak(e,"atc",t)}speakCaptainSharma(e,t){this.speak(e,"captain_sharma",t)}speakPriya(e,t){this.speak(e,"fa_priya",t)}speakHijackerNorway(e,t){this.speak(e,"hijacker_norway",t)}speakCaptainWilliams(e,t){this.speak(e,"captain_williams",t)}speakSarah(e,t){this.speak(e,"sarah",t)}speakHijackerSweden(e,t){this.speak(e,"hijacker_sweden",t)}speakBritishCrew(e,t){this.speak(e,"british_crew",t)}speakControllerE97(e,t){this.speak(e,"controller_e97",t)}speakPilot(e,t,n){const a=Nq[e]||"pilot_american",s=this.addPilotPersonality(t,e);this.speak(s,a,n)}addPilotPersonality(e,t){if(["AAL","UAL","DAL","SWA","JBU","ASA","FDX"].includes(t)){const n=[e,`Roger that, ${e}`,`Copy, ${e}`,`Wilco, ${e}`,`You got it, ${e}`],a=[""," Appreciate it."," Thanks for the vectors."," Have a good one.",""];return n[Math.floor(Math.random()*n.length)]+a[Math.floor(Math.random()*a.length)]}if(["QFA"].includes(t)){const n=[e,`Roger, ${e}`,`Copy that, ${e}`,`No worries, ${e}`,`Cheers, ${e}`],a=[""," She'll be right."," Good on ya, mate.","",""];return n[Math.floor(Math.random()*n.length)]+a[Math.floor(Math.random()*a.length)]}if(["BAW"].includes(t)){const n=["Lovely weather for flying, what?","I'd tell you a joke about turbulence, but it's too bumpy.","Why do pilots make good comedians? They always land their jokes.","Bit of a queue at Heathrow, I expect.","","",""],a=n[Math.floor(Math.random()*n.length)];return`Right-o, ${e}.${a?" "+a:" Cheers."}`}return["AFR"].includes(t)?`Affirm, ${e}`:["DLH"].includes(t)?`Jawohl, ${e}`:["AIC"].includes(t)?Math.random()>.5?`Roger, ${e}`:`Affirm, ${e}. Thank you.`:["UAE"].includes(t)?`Roger, ${e}`:`Roger, ${e}`}cancel(){this.audioQueue=[],this.currentAudio&&(this.currentAudio.pause(),this.currentAudio=null),this.isPlaying=!1}setEnabled(e){this.enabled=e,e||this.cancel()}setVolume(e){this.volume=Math.max(0,Math.min(1,e)),this.currentAudio&&(this.currentAudio.volume=this.volume)}isEnabled(){return this.enabled}getVolume(){return this.volume}getTranslation(e,t){return(t==="norwegian"?Uq:Iq)[e]||null}setBrowserFallback(e){this.useBrowserFallback=e,console.log("[CloudTTS] Browser fallback mode:",e?"ENABLED":"DISABLED")}isBrowserFallback(){return this.useBrowserFallback}}const zr=new Pq,zq={id:"conflict-detection",title:"Conflict Detection & Resolution",description:"Watch the AI predict and help resolve a potential mid-air conflict",icon:"alert-triangle",duration:2,initialState:{tracks:[{trackId:"TRK-DEMO-001",callsign:"UAL123",latitudeDeg:42.2,longitudeDeg:-71.8,altitudeFt:35e3,headingDeg:90,speedKt:450,verticalRateFpm:0,confidence:.95,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-DEMO-002",callsign:"DAL456",latitudeDeg:42.2,longitudeDeg:-70.8,altitudeFt:35e3,headingDeg:270,speedKt:460,verticalRateFpm:0,confidence:.93,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-DEMO-003",callsign:"AAL789",latitudeDeg:41.5,longitudeDeg:-71.2,altitudeFt:28e3,headingDeg:45,speedKt:420,verticalRateFpm:1500,confidence:.97,sequence:1,updatedAt:new Date().toISOString()}],alerts:[],predictions:[]},steps:[{id:"intro",narrative:"Welcome to the Conflict Detection scenario. You'll see how ATCS-NG uses AI to predict potential conflicts between aircraft before they become dangerous.",spotlight:{type:"component",id:"radar"},autoAdvance:5e3},{id:"observe-aircraft",narrative:"Notice UAL123 and DAL456 on the radar. They're both at FL350, flying directly toward each other. The AI is continuously analyzing their trajectories.",spotlight:{type:"flight",callsign:"UAL123"},autoAdvance:5e3},{id:"prediction-appears",narrative:"The AI has detected a potential conflict! A prediction has appeared in the AI Predictions panel with an 87% probability of conflict in approximately 3 minutes.",spotlight:{type:"component",id:"predictions"},events:[{delay:500,type:"addPrediction",payload:{id:"PRED-DEMO-001",predictionType:"CONFLICT",involvedFlights:["UAL123","DAL456"],probability:.87,predictedTime:new Date(Date.now()+18e4).toISOString(),description:"High probability conflict at intersection - both aircraft at FL350 on converging headings"}}],autoAdvance:6e3},{id:"click-prediction",narrative:"Click on the prediction to see more details about the potential conflict.",spotlight:{type:"prediction",predictionId:"PRED-DEMO-001"},interaction:{type:"click",target:"PRED-DEMO-001",hint:"Click the prediction card to view details"}},{id:"resolution-advisory",narrative:"The system recommends having UAL123 climb to FL370. This vertical separation will safely resolve the conflict while minimizing route deviation.",spotlight:{type:"component",id:"predictions"},autoAdvance:5e3},{id:"aircraft-climbs",narrative:"UAL123 is now climbing to FL370. Watch the altitude change in the flight strip and on the radar data block.",spotlight:{type:"flight",callsign:"UAL123"},events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-DEMO-001",verticalRateFpm:2e3,altitudeFt:36e3}},{delay:2e3,type:"updateTrack",payload:{trackId:"TRK-DEMO-001",altitudeFt:37e3,verticalRateFpm:0}}],autoAdvance:5e3},{id:"conflict-resolved",narrative:"Excellent! With 2,000 feet of vertical separation now established, the conflict probability has dropped to zero. The prediction is cleared.",spotlight:{type:"component",id:"predictions"},events:[{delay:500,type:"updatePrediction",payload:{id:"PRED-DEMO-001",probability:.05,description:"Conflict resolved - vertical separation established at FL370/FL350"}},{delay:2e3,type:"removePrediction",payload:{id:"PRED-DEMO-001"}}],autoAdvance:5e3},{id:"summary",narrative:"This scenario demonstrated how ATCS-NG's AI continuously monitors traffic, predicts conflicts minutes in advance, and provides resolution advisories to keep aircraft safely separated.",spotlight:{type:"component",id:"radar"},autoAdvance:5e3}]},Bq={id:"weather-hazard",title:"Weather Hazard Avoidance",description:"See how the system integrates weather data and helps route traffic safely",icon:"cloud",duration:1.5,initialState:{tracks:[{trackId:"TRK-DEMO-W01",callsign:"SWA101",latitudeDeg:42,longitudeDeg:-72,altitudeFt:32e3,headingDeg:90,speedKt:430,verticalRateFpm:0,confidence:.96,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-DEMO-W02",callsign:"JBU202",latitudeDeg:41.8,longitudeDeg:-71.8,altitudeFt:28e3,headingDeg:75,speedKt:410,verticalRateFpm:0,confidence:.94,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-DEMO-W03",callsign:"AAL303",latitudeDeg:42.3,longitudeDeg:-71.5,altitudeFt:36e3,headingDeg:120,speedKt:450,verticalRateFpm:0,confidence:.98,sequence:1,updatedAt:new Date().toISOString()}],alerts:[],predictions:[]},steps:[{id:"intro",narrative:"This scenario shows how ATCS-NG integrates real-time weather data and helps controllers route traffic around hazardous conditions.",spotlight:{type:"component",id:"radar"},autoAdvance:4e3},{id:"weather-appears",narrative:"A severe thunderstorm cell has been detected! The weather service has identified an area of severe turbulence and icing. Watch the radar for the hazard overlay.",spotlight:{type:"component",id:"radar"},events:[{delay:1e3,type:"addAlert",payload:{alertId:"ALT-DEMO-W01",severity:"WARNING",alertType:"WEATHER_HAZARD",message:"Severe thunderstorm cell detected - FL280-FL380, 25nm radius centered 42.0N 71.0W. Severe turbulence and icing reported.",involvedFlightIds:["SWA101","JBU202","AAL303"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}],autoAdvance:5e3},{id:"alert-panel",narrative:"A weather hazard alert has appeared in the Alerts panel. The system has identified three aircraft that may be affected by this weather.",spotlight:{type:"component",id:"alerts"},autoAdvance:4e3},{id:"acknowledge-alert",narrative:"Acknowledge the alert to indicate you've seen the weather information and are taking action.",spotlight:{type:"alert",alertId:"ALT-DEMO-W01"},interaction:{type:"acknowledge",target:"ALT-DEMO-W01",hint:"Click ACK to acknowledge the weather alert"}},{id:"aircraft-deviating",narrative:"Aircraft are now being vectored around the weather cell. Watch SWA101 turn north to avoid the hazard area.",spotlight:{type:"flight",callsign:"SWA101"},events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-DEMO-W01",headingDeg:45}},{delay:1500,type:"updateTrack",payload:{trackId:"TRK-DEMO-W02",headingDeg:30}}],autoAdvance:5e3},{id:"summary",narrative:"Weather integration ensures controllers have real-time hazard information to keep flights safe. The system automatically tracks which aircraft may be affected and assists with routing decisions.",spotlight:{type:"component",id:"radar"},autoAdvance:4e3}]},Fq={id:"loss-of-separation",title:"Loss of Separation",description:"Experience how the system handles critical separation alerts",icon:"shield",duration:1,initialState:{tracks:[{trackId:"TRK-DEMO-L01",callsign:"FFT401",latitudeDeg:42.1,longitudeDeg:-71.3,altitudeFt:33e3,headingDeg:180,speedKt:440,verticalRateFpm:0,confidence:.94,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-DEMO-L02",callsign:"SKW502",latitudeDeg:42.05,longitudeDeg:-71.28,altitudeFt:33200,headingDeg:350,speedKt:435,verticalRateFpm:0,confidence:.92,sequence:1,updatedAt:new Date().toISOString()}],alerts:[],predictions:[]},steps:[{id:"intro",narrative:"This scenario demonstrates how ATCS-NG handles the most critical situation in air traffic control: loss of separation between aircraft.",spotlight:{type:"component",id:"radar"},autoAdvance:4e3},{id:"aircraft-close",narrative:"FFT401 and SKW502 are dangerously close - only 3.2nm lateral separation and 200ft vertical. This violates the required 5nm/1000ft minimum.",spotlight:{type:"flight",callsign:"FFT401"},autoAdvance:4e3},{id:"critical-alert",narrative:"CRITICAL ALERT! The system has detected loss of separation. This is the highest priority alert - notice the flashing red indicator and urgent styling.",spotlight:{type:"component",id:"alerts"},events:[{delay:500,type:"addAlert",payload:{alertId:"ALT-DEMO-L01",severity:"CRITICAL",alertType:"LOSS_OF_SEPARATION",message:"LOSS OF SEPARATION: FFT401 and SKW502 - 3.2nm lateral, 200ft vertical. Immediate action required!",involvedFlightIds:["FFT401","SKW502"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}],autoAdvance:4e3},{id:"acknowledge-critical",narrative:"Critical alerts require immediate acknowledgment to confirm the controller is aware and taking action.",spotlight:{type:"alert",alertId:"ALT-DEMO-L01"},interaction:{type:"acknowledge",target:"ALT-DEMO-L01",hint:"Acknowledge the critical alert immediately"}},{id:"separation-restored",narrative:"Emergency separation maneuvers are in progress. FFT401 is descending while SKW502 climbs to restore safe separation.",spotlight:{type:"component",id:"radar"},events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-DEMO-L01",verticalRateFpm:-2500,altitudeFt:31e3}},{delay:0,type:"updateTrack",payload:{trackId:"TRK-DEMO-L02",verticalRateFpm:2500,altitudeFt:35e3}}],autoAdvance:5e3},{id:"summary",narrative:"Loss of separation events are rare but critical. ATCS-NG ensures controllers are immediately alerted with clear, actionable information to restore safety.",spotlight:{type:"component",id:"radar"},autoAdvance:4e3}]},kq={id:"route-deviation",title:"Route Deviation Detection",description:"See how the system monitors and alerts on aircraft deviating from assigned routes",icon:"navigation",duration:1,initialState:{tracks:[{trackId:"TRK-DEMO-R01",callsign:"ASA601",latitudeDeg:42.3,longitudeDeg:-71.6,altitudeFt:29e3,headingDeg:85,speedKt:420,verticalRateFpm:0,confidence:.96,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-DEMO-R02",callsign:"UAL702",latitudeDeg:41.9,longitudeDeg:-71.2,altitudeFt:34e3,headingDeg:270,speedKt:445,verticalRateFpm:0,confidence:.95,sequence:1,updatedAt:new Date().toISOString()}],alerts:[],predictions:[]},steps:[{id:"intro",narrative:"Aircraft must follow their assigned routes precisely. ATCS-NG continuously monitors for deviations and alerts controllers when aircraft stray from their flight paths.",spotlight:{type:"component",id:"radar"},autoAdvance:4e3},{id:"normal-operation",narrative:"ASA601 is currently on its assigned route heading 085 toward Boston. The system is tracking its position relative to the filed flight plan.",spotlight:{type:"flight",callsign:"ASA601"},autoAdvance:4e3},{id:"deviation-occurs",narrative:"ASA601 has started deviating from its assigned route! The aircraft is now 2.1nm off course and continuing to drift.",spotlight:{type:"flight",callsign:"ASA601"},events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-DEMO-R01",headingDeg:95,latitudeDeg:42.28}},{delay:1500,type:"addAlert",payload:{alertId:"ALT-DEMO-R01",severity:"INFO",alertType:"DEVIATION_DETECTED",message:"ASA601 deviating from assigned route - 2.1nm off course, heading 095 (assigned 085)",involvedFlightIds:["ASA601"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}],autoAdvance:5e3},{id:"view-alert",narrative:"A deviation alert has appeared. Note this is an INFO-level alert - not immediately dangerous, but requires controller awareness.",spotlight:{type:"alert",alertId:"ALT-DEMO-R01"},autoAdvance:4e3},{id:"acknowledge-deviation",narrative:"Acknowledge the deviation to indicate you've noticed and will follow up with the pilot.",spotlight:{type:"alert",alertId:"ALT-DEMO-R01"},interaction:{type:"acknowledge",target:"ALT-DEMO-R01",hint:"Acknowledge the deviation alert"}},{id:"correction",narrative:"After controller intervention, ASA601 is correcting back to its assigned route. The heading is returning to 085.",spotlight:{type:"flight",callsign:"ASA601"},events:[{delay:500,type:"updateTrack",payload:{trackId:"TRK-DEMO-R01",headingDeg:80}},{delay:2e3,type:"updateTrack",payload:{trackId:"TRK-DEMO-R01",headingDeg:85}}],autoAdvance:4e3},{id:"summary",narrative:"Route deviation detection helps maintain orderly traffic flow and prevents aircraft from entering restricted airspace or conflicting with other traffic.",spotlight:{type:"component",id:"radar"},autoAdvance:4e3}]},Vq={id:"sector-handoff",title:"Sector Handoff",description:"Learn how aircraft are transferred between controller sectors",icon:"arrow-right-left",duration:1.5,initialState:{tracks:[{trackId:"TRK-DEMO-H01",callsign:"DAL801",latitudeDeg:42.4,longitudeDeg:-71.8,altitudeFt:35e3,headingDeg:90,speedKt:455,verticalRateFpm:0,confidence:.97,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-DEMO-H02",callsign:"AAL902",latitudeDeg:41.8,longitudeDeg:-71.5,altitudeFt:31e3,headingDeg:45,speedKt:430,verticalRateFpm:500,confidence:.94,sequence:1,updatedAt:new Date().toISOString()}],alerts:[],predictions:[]},steps:[{id:"intro",narrative:'Airspace is divided into sectors, each managed by a controller. When aircraft fly from one sector to another, they must be "handed off" to the next controller.',spotlight:{type:"component",id:"radar"},autoAdvance:5e3},{id:"approaching-boundary",narrative:"DAL801 is approaching the sector boundary (shown as a dashed line on the radar). It will soon enter the adjacent sector BOS_34.",spotlight:{type:"flight",callsign:"DAL801"},autoAdvance:4e3},{id:"handoff-pending",narrative:"The system has automatically initiated a handoff request. Notice the flight strip for DAL801 now shows a pending handoff indicator.",spotlight:{type:"component",id:"strips"},events:[{delay:500,type:"addAlert",payload:{alertId:"ALT-DEMO-H01",severity:"INFO",alertType:"DEVIATION_DETECTED",message:"Handoff pending: DAL801  Sector BOS_34. Aircraft 2nm from boundary.",involvedFlightIds:["DAL801"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}],autoAdvance:4e3},{id:"accept-handoff",narrative:"As the receiving controller, you would accept the handoff. Click to simulate accepting control of DAL801.",spotlight:{type:"alert",alertId:"ALT-DEMO-H01"},interaction:{type:"click",target:"ALT-DEMO-H01",hint:"Click to accept the handoff"}},{id:"handoff-complete",narrative:"Handoff complete! DAL801 is now under your control. The flight strip color has updated to indicate active control, and the previous sector has been notified.",spotlight:{type:"flight",callsign:"DAL801"},events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-DEMO-H01",longitudeDeg:-71.5}}],autoAdvance:4e3},{id:"summary",narrative:"Seamless handoffs ensure continuous monitoring of all aircraft. ATCS-NG automates the handoff process while giving controllers clear visibility and control.",spotlight:{type:"component",id:"radar"},autoAdvance:4e3}]},Hq={id:"emergency-declaration",title:"Emergency Declaration",description:"Experience how the system prioritizes and handles aircraft emergencies",icon:"siren",duration:1.5,initialState:{tracks:[{trackId:"TRK-DEMO-E01",callsign:"UAL999",latitudeDeg:42.2,longitudeDeg:-71.4,altitudeFt:28e3,headingDeg:180,speedKt:380,verticalRateFpm:-1500,confidence:.96,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-DEMO-E02",callsign:"SWA111",latitudeDeg:41.9,longitudeDeg:-71.2,altitudeFt:25e3,headingDeg:90,speedKt:420,verticalRateFpm:0,confidence:.95,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-DEMO-E03",callsign:"JBU222",latitudeDeg:42,longitudeDeg:-71.6,altitudeFt:3e4,headingDeg:45,speedKt:410,verticalRateFpm:0,confidence:.94,sequence:1,updatedAt:new Date().toISOString()}],alerts:[],predictions:[]},steps:[{id:"intro",narrative:"Aircraft emergencies require immediate attention and priority handling. This scenario shows how ATCS-NG helps controllers manage emergency situations.",spotlight:{type:"component",id:"radar"},autoAdvance:4e3},{id:"normal-traffic",narrative:"Three aircraft are in the sector operating normally. UAL999 is descending through FL280 toward Boston Logan.",spotlight:{type:"flight",callsign:"UAL999"},autoAdvance:4e3},{id:"emergency-declared",narrative:"EMERGENCY! UAL999 has squawked 7700 - the universal emergency code. The pilot reports an engine fire and requests immediate priority handling.",spotlight:{type:"component",id:"alerts"},events:[{delay:500,type:"addAlert",payload:{alertId:"ALT-DEMO-E01",severity:"CRITICAL",alertType:"LOSS_OF_SEPARATION",message:"EMERGENCY: UAL999 squawking 7700 - Engine fire declared. Requesting immediate vectors to BOS. Souls on board: 156.",involvedFlightIds:["UAL999"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}],autoAdvance:4e3},{id:"priority-visual",narrative:"The emergency aircraft is now highlighted with priority visual indicators. Notice the flight strip is emphasized and the radar track is enhanced.",spotlight:{type:"flight",callsign:"UAL999"},autoAdvance:4e3},{id:"acknowledge-emergency",narrative:"Acknowledge the emergency to confirm you're providing priority handling.",spotlight:{type:"alert",alertId:"ALT-DEMO-E01"},interaction:{type:"acknowledge",target:"ALT-DEMO-E01",hint:"Acknowledge the emergency alert"}},{id:"clear-path",narrative:"Other traffic is being vectored clear of the emergency aircraft's path. UAL999 has been given direct routing to Boston Logan runway 4R.",spotlight:{type:"component",id:"radar"},events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-DEMO-E02",headingDeg:120}},{delay:500,type:"updateTrack",payload:{trackId:"TRK-DEMO-E03",headingDeg:315}},{delay:1e3,type:"updateTrack",payload:{trackId:"TRK-DEMO-E01",headingDeg:160,verticalRateFpm:-2e3,altitudeFt:25e3}}],autoAdvance:5e3},{id:"summary",narrative:"Emergency handling in ATCS-NG ensures critical situations get immediate attention with clear visual priority, automatic traffic coordination, and streamlined communications.",spotlight:{type:"component",id:"radar"},autoAdvance:4e3}]},Gq={id:"quick-demo",title:"Quick Demo",description:"2-minute automatic showcase of all ATCS-NG capabilities with dramatic events",icon:"zap",duration:2,initialState:{tracks:[{trackId:"TRK-QD-001",callsign:"UAL123",latitudeDeg:42.4,longitudeDeg:-71.8,altitudeFt:35e3,headingDeg:90,speedKt:450,verticalRateFpm:0,confidence:.96,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-QD-002",callsign:"DAL456",latitudeDeg:42.4,longitudeDeg:-70.6,altitudeFt:35e3,headingDeg:270,speedKt:460,verticalRateFpm:0,confidence:.94,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-QD-003",callsign:"AAL777",latitudeDeg:42,longitudeDeg:-71.4,altitudeFt:28e3,headingDeg:180,speedKt:380,verticalRateFpm:-1e3,confidence:.97,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-QD-004",callsign:"SWA333",latitudeDeg:41.8,longitudeDeg:-71,altitudeFt:24e3,headingDeg:45,speedKt:410,verticalRateFpm:1500,confidence:.95,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-QD-005",callsign:"JBU888",latitudeDeg:42.6,longitudeDeg:-71.2,altitudeFt:32e3,headingDeg:135,speedKt:420,verticalRateFpm:0,confidence:.93,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-QD-006",callsign:"FFT999",latitudeDeg:41.6,longitudeDeg:-71.6,altitudeFt:38e3,headingDeg:0,speedKt:480,verticalRateFpm:0,confidence:.92,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-QD-007",callsign:"ASA601",latitudeDeg:42.2,longitudeDeg:-70.8,altitudeFt:29e3,headingDeg:225,speedKt:400,verticalRateFpm:0,confidence:.94,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-QD-008",callsign:"NKS444",latitudeDeg:41.9,longitudeDeg:-71.8,altitudeFt:31e3,headingDeg:90,speedKt:430,verticalRateFpm:0,confidence:.95,sequence:1,updatedAt:new Date().toISOString()}],alerts:[],predictions:[]},steps:[{id:"intro",narrative:"ATCS-NG Quick Demo  Watch as our AI-powered air traffic control system handles multiple dramatic events in real-time.",spotlight:{type:"component",id:"radar"},autoAdvance:4e3},{id:"traffic-overview",narrative:"8 aircraft currently in sector. Real-time surveillance with sub-second updates. Let's see what happens next...",spotlight:{type:"component",id:"radar"},autoAdvance:4e3},{id:"weather-spawns",narrative:"WEATHER ALERT  Severe thunderstorm cell detected! Three aircraft in the affected corridor.",spotlight:{type:"component",id:"alerts"},events:[{delay:500,type:"addAlert",payload:{alertId:"ALT-QD-WX01",severity:"WARNING",alertType:"WEATHER_HAZARD",message:"Severe thunderstorm cell moving NE at 45kt. Tops to FL450. Affected: JBU888, ASA601, NKS444",involvedFlightIds:["JBU888","ASA601","NKS444"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}],autoAdvance:5e3},{id:"weather-reroute",narrative:"AI recommends rerouting affected aircraft around the storm cell. Executing deviation...",spotlight:{type:"flight",callsign:"JBU888"},events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-QD-005",headingDeg:180}},{delay:500,type:"updateTrack",payload:{trackId:"TRK-QD-007",headingDeg:270}},{delay:1e3,type:"updateTrack",payload:{trackId:"TRK-QD-008",headingDeg:45}},{delay:2500,type:"removeAlert",payload:{alertId:"ALT-QD-WX01"}}],autoAdvance:5e3},{id:"conflict-detected",narrative:"CONFLICT ALERT  UAL123 and DAL456 on collision course! AI predicts 94% probability of conflict in 2 minutes.",spotlight:{type:"component",id:"predictions"},events:[{delay:300,type:"addPrediction",payload:{id:"PRED-QD-001",predictionType:"CONFLICT",involvedFlights:["UAL123","DAL456"],probability:.94,predictedTime:new Date(Date.now()+12e4).toISOString(),description:"IMMINENT CONFLICT: Head-on at FL350. Closure rate 910kt. Time to impact: 2:12"}},{delay:500,type:"addAlert",payload:{alertId:"ALT-QD-CF01",severity:"WARNING",alertType:"CONFLICT_PREDICTED",message:"Conflict predicted: UAL123 vs DAL456 at FL350. Recommend: UAL123 climb FL370 immediately.",involvedFlightIds:["UAL123","DAL456"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}],autoAdvance:5e3},{id:"conflict-resolution",narrative:"Resolution advisory: UAL123 climb to FL370. Executing... Aircraft climbing 2,000 ft/min.",spotlight:{type:"flight",callsign:"UAL123"},events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-QD-001",verticalRateFpm:2500,altitudeFt:36e3}},{delay:2e3,type:"updateTrack",payload:{trackId:"TRK-QD-001",altitudeFt:37e3,verticalRateFpm:0}},{delay:2500,type:"updatePrediction",payload:{id:"PRED-QD-001",probability:.02,description:"Conflict resolved - 2,000ft vertical separation established"}},{delay:3500,type:"removePrediction",payload:{id:"PRED-QD-001"}},{delay:3500,type:"removeAlert",payload:{alertId:"ALT-QD-CF01"}}],autoAdvance:6e3},{id:"conflict-resolved",narrative:"CONFLICT RESOLVED  2,000 feet vertical separation now established. Aircraft safely separated.",spotlight:{type:"component",id:"radar"},autoAdvance:3e3},{id:"emergency-declared",narrative:"MAYDAY MAYDAY  AAL777 squawking 7700! Engine fire declared! 156 souls on board!",spotlight:{type:"flight",callsign:"AAL777"},events:[{delay:0,type:"addAlert",payload:{alertId:"ALT-QD-EM01",severity:"CRITICAL",alertType:"LOSS_OF_SEPARATION",message:"EMERGENCY: AAL777 squawking 7700  ENGINE FIRE. Requesting immediate vectors to BOS. Souls: 156. Fuel: 2 hours.",involvedFlightIds:["AAL777"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}],autoAdvance:4e3},{id:"emergency-priority",narrative:"PRIORITY HANDLING  Vectoring all traffic clear of emergency aircraft. Direct routing to Boston Logan.",spotlight:{type:"component",id:"alerts"},events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-QD-004",headingDeg:135}},{delay:500,type:"updateTrack",payload:{trackId:"TRK-QD-006",headingDeg:45}},{delay:1e3,type:"updateTrack",payload:{trackId:"TRK-QD-003",headingDeg:160,verticalRateFpm:-2500}}],autoAdvance:5e3},{id:"emergency-routing",narrative:"AAL777 cleared direct BOS runway 4R. Emergency services alerted. All traffic clear.",spotlight:{type:"flight",callsign:"AAL777"},events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-QD-003",altitudeFt:22e3}},{delay:2e3,type:"updateTrack",payload:{trackId:"TRK-QD-003",altitudeFt:18e3}}],autoAdvance:5e3},{id:"handoff-initiate",narrative:"SECTOR HANDOFF  SWA333 approaching sector boundary. Initiating handoff to Boston Center.",spotlight:{type:"flight",callsign:"SWA333"},events:[{delay:0,type:"addAlert",payload:{alertId:"ALT-QD-HO01",severity:"INFO",alertType:"DEVIATION_DETECTED",message:"Handoff initiated: SWA333 transferring to Boston Center (BOS_34). Awaiting acceptance.",involvedFlightIds:["SWA333"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}],autoAdvance:4e3},{id:"handoff-complete",narrative:"Handoff accepted. SWA333 now under Boston Center control. Seamless transition complete.",spotlight:{type:"component",id:"strips"},events:[{delay:0,type:"removeAlert",payload:{alertId:"ALT-QD-HO01"}},{delay:1500,type:"removeAlert",payload:{alertId:"ALT-QD-EM01"}}],autoAdvance:4e3},{id:"ai-optimization",narrative:"AI OPTIMIZATION  Route optimization opportunity detected. Potential savings across multiple flights.",spotlight:{type:"component",id:"predictions"},events:[{delay:0,type:"addPrediction",payload:{id:"PRED-QD-OPT1",predictionType:"ROUTE_OPTIMIZATION",involvedFlights:["FFT999","NKS444","ASA601"],probability:.88,predictedTime:new Date(Date.now()+6e4).toISOString(),description:"Direct routing available. Total savings: 2,400 lbs fuel, 8 minutes flight time."}}],autoAdvance:5e3},{id:"optimization-applied",narrative:"Optimization applied  Three aircraft now on direct routing. Fuel saved: 2,400 lbs. Time saved: 8 minutes.",spotlight:{type:"component",id:"predictions"},events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-QD-006",headingDeg:15}},{delay:500,type:"updateTrack",payload:{trackId:"TRK-QD-007",headingDeg:200}},{delay:1e3,type:"updateTrack",payload:{trackId:"TRK-QD-008",headingDeg:75}},{delay:3e3,type:"removePrediction",payload:{id:"PRED-QD-OPT1"}}],autoAdvance:6e3},{id:"all-clear",narrative:"ALL EVENTS RESOLVED  Conflict avoided. Emergency handled. Handoffs complete. Routes optimized.",spotlight:{type:"component",id:"radar"},autoAdvance:5e3},{id:"summary",narrative:"ATCS-NG: AI-powered surveillance  Predictive conflict detection  Emergency prioritization  Seamless coordination  Continuous optimization",spotlight:{type:"component",id:"radar"},autoAdvance:5e3},{id:"end",narrative:"Quick Demo complete. Explore individual scenarios or start the Feature Guide for an in-depth walkthrough.",spotlight:{type:"component",id:"radar"},autoAdvance:5e3}]},jq={id:"feature-guide",title:"Feature Guide",description:"Interactive walkthrough of all ATCS-NG features. Self-paced with hands-on practice.",icon:"book-open",duration:15,initialState:{tracks:[{trackId:"TRK-FG-001",callsign:"UAL100",latitudeDeg:42.3,longitudeDeg:-71.5,altitudeFt:35e3,headingDeg:90,speedKt:450,verticalRateFpm:0,confidence:.96,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-FG-002",callsign:"DAL200",latitudeDeg:42.1,longitudeDeg:-71.2,altitudeFt:28e3,headingDeg:180,speedKt:420,verticalRateFpm:-500,confidence:.94,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-FG-003",callsign:"AAL300",latitudeDeg:41.9,longitudeDeg:-71.8,altitudeFt:32e3,headingDeg:45,speedKt:440,verticalRateFpm:1e3,confidence:.95,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-FG-004",callsign:"SWA400",latitudeDeg:42.5,longitudeDeg:-70.9,altitudeFt:24e3,headingDeg:270,speedKt:380,verticalRateFpm:0,confidence:.93,sequence:1,updatedAt:new Date().toISOString()}],alerts:[{alertId:"ALT-FG-001",severity:"INFO",alertType:"DEVIATION_DETECTED",message:"Advisory: DAL200 approaching sector boundary. Handoff recommended in 5 minutes.",involvedFlightIds:["DAL200"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}],predictions:[{id:"PRED-FG-001",predictionType:"ROUTE_OPTIMIZATION",involvedFlights:["AAL300"],probability:.72,predictedTime:new Date(Date.now()+3e5).toISOString(),description:"Direct routing available to destination. Potential savings: 340 lbs fuel."}]},steps:[{id:"welcome",narrative:"Welcome to the ATCS-NG Feature Guide. This interactive walkthrough will teach you every feature of the controller workstation. Take your time  each step waits for you.",spotlight:{type:"component",id:"radar"},autoAdvance:6e3},{id:"radar-overview",narrative:"RADAR SCOPE  This is your primary surveillance display. All aircraft in your sector appear here with real-time position updates. The scope uses WebGL for smooth 60fps rendering.",spotlight:{type:"component",id:"radar"},autoAdvance:6e3},{id:"track-symbols",narrative:"TRACK SYMBOLS  Each aircraft is represented by a symbol with a data block. The symbol shows position; the data block shows callsign and altitude. Green indicates normal operations.",spotlight:{type:"flight",callsign:"UAL100"},autoAdvance:6e3},{id:"track-select",narrative:"Try clicking on an aircraft to select it. Selected aircraft are highlighted with additional details.",spotlight:{type:"flight",callsign:"UAL100"},interaction:{type:"click",target:"TRK-FG-001",hint:"Click on UAL100 to select it"}},{id:"track-details",narrative:"Excellent! When selected, you can see extended information including heading, speed, and vertical rate. The flight strip on the right also highlights.",spotlight:{type:"flight",callsign:"UAL100"},autoAdvance:5e3},{id:"radar-controls",narrative:"RADAR CONTROLS  Use scroll wheel to zoom, click-and-drag to pan. The radar automatically scales data blocks to avoid overlap at different zoom levels.",spotlight:{type:"component",id:"radar"},autoAdvance:5e3},{id:"strips-intro",narrative:"FLIGHT STRIPS  The right panel displays electronic flight strips for all aircraft in your sector. These replace paper strips with a digital, real-time interface.",spotlight:{type:"component",id:"strips"},autoAdvance:5e3},{id:"strip-anatomy",narrative:"Each strip shows: callsign, aircraft type, origin/destination, altitude, speed, and route. Status indicators show handoff state and any active alerts.",spotlight:{type:"component",id:"strips"},autoAdvance:5e3},{id:"strip-select",narrative:"Click on a flight strip to select that aircraft. The radar will center on it and show extended details.",spotlight:{type:"component",id:"strips"},interaction:{type:"click",target:"TRK-FG-002",hint:"Click on the DAL200 flight strip"}},{id:"strip-actions",narrative:"Flight strips have quick action buttons: Amend (modify flight plan), Handoff (transfer to another sector), and Message (send CPDLC communication).",spotlight:{type:"component",id:"strips"},autoAdvance:5e3},{id:"strip-sorting",narrative:"Strips can be sorted by callsign, altitude, or ETA. Use the sort controls at the top of the panel to organize your traffic list.",spotlight:{type:"component",id:"strips"},autoAdvance:4e3},{id:"alerts-intro",narrative:"ALERTS PANEL  The system continuously monitors for safety-critical conditions. When detected, alerts appear in the alerts panel with severity-coded colors.",spotlight:{type:"component",id:"alerts"},autoAdvance:5e3},{id:"alert-severities",narrative:"SEVERITY LEVELS  CRITICAL (red): Immediate action required. WARNING (orange): Attention needed soon. INFO (blue): Awareness item, no immediate action.",spotlight:{type:"component",id:"alerts"},autoAdvance:5e3},{id:"alert-acknowledge",narrative:"Alerts require acknowledgment to confirm you've seen them. Click the acknowledge button on the current INFO alert.",spotlight:{type:"alert",alertId:"ALT-FG-001"},interaction:{type:"acknowledge",target:"ALT-FG-001",hint:"Click the acknowledge button on the alert"}},{id:"alert-acknowledged",narrative:"Acknowledged alerts remain visible but are marked as seen. This creates an audit trail showing when each controller acknowledged each alert.",spotlight:{type:"component",id:"alerts"},autoAdvance:4e3},{id:"alert-escalation",narrative:"Unacknowledged alerts escalate over time: visual intensity increases, and after 60 seconds, supervisor notification is triggered automatically.",spotlight:{type:"component",id:"alerts"},autoAdvance:4e3},{id:"alert-demo",narrative:"Watch as a new WARNING alert appears. Notice the distinct visual treatment compared to INFO alerts.",spotlight:{type:"component",id:"alerts"},events:[{delay:1e3,type:"addAlert",payload:{alertId:"ALT-FG-002",severity:"WARNING",alertType:"CONFLICT_PREDICTED",message:"Traffic advisory: AAL300 climbing through DAL200 altitude. Monitor separation.",involvedFlightIds:["AAL300","DAL200"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}],autoAdvance:5e3},{id:"predictions-intro",narrative:"AI PREDICTIONS  ATCS-NG uses machine learning to predict future events: conflicts, optimal routes, weather impacts, and traffic patterns.",spotlight:{type:"component",id:"predictions"},autoAdvance:5e3},{id:"prediction-types",narrative:"PREDICTION TYPES  Conflict predictions show probability and time-to-impact. Optimization predictions show fuel and time savings. All predictions include confidence scores.",spotlight:{type:"component",id:"predictions"},autoAdvance:5e3},{id:"prediction-click",narrative:"Click on the route optimization prediction to see detailed information and available actions.",spotlight:{type:"prediction",predictionId:"PRED-FG-001"},interaction:{type:"click",target:"PRED-FG-001",hint:"Click on the prediction card"}},{id:"prediction-actions",narrative:"Predictions offer actions: Accept (implement the recommendation), Dismiss (acknowledge but don't act), or View Details (see full analysis).",spotlight:{type:"component",id:"predictions"},autoAdvance:5e3},{id:"ai-advisory",narrative:"IMPORTANT: AI is always advisory. The controller retains full authority. All AI recommendations pass through safety validation before being offered.",spotlight:{type:"component",id:"predictions"},autoAdvance:5e3},{id:"comms-intro",narrative:"COMMUNICATIONS  ATCS-NG supports Controller-Pilot Data Link Communications (CPDLC). Messages are sent digitally and delivery is confirmed.",spotlight:{type:"component",id:"strips"},autoAdvance:5e3},{id:"comms-compose",narrative:"To send a message, select a flight and click the Message action. Common clearances are available as templates for quick composition.",spotlight:{type:"component",id:"strips"},autoAdvance:5e3},{id:"comms-status",narrative:"Message status is tracked: SENT (transmitted), DELIVERED (received by aircraft), ACKNOWLEDGED (pilot confirmed). Failed messages trigger retry.",spotlight:{type:"component",id:"strips"},autoAdvance:4e3},{id:"comms-audit",narrative:"All communications are logged for audit. The playback feature allows reviewing communications history for training or incident investigation.",spotlight:{type:"component",id:"strips"},autoAdvance:4e3},{id:"summary",narrative:"FEATURE GUIDE COMPLETE  You've learned the core features: Radar display, Flight strips, Alerts system, AI predictions, and Communications.",spotlight:{type:"component",id:"radar"},events:[{delay:0,type:"removeAlert",payload:{alertId:"ALT-FG-002"}}],autoAdvance:5e3},{id:"next-steps",narrative:"Explore the individual scenarios to see these features in action during realistic ATC situations. Or run the Quick Demo for a 2-minute showcase.",spotlight:{type:"component",id:"radar"},autoAdvance:5e3}]};function Rg(i){const{triggerEmergency:e,updateEmergencyPhase:t,clearEmergency:n,triggerScreenShake:a,setVignetteColor:s}=oC.getState(),o=`emergency-${Date.now()}`;return e({id:o,type:i.type,involvedTrackIds:i.trackIds,location:i.location}),setTimeout(()=>{t(o,"active"),i.type==="crash"?(a(8,1e3),s("rgba(255, 51, 102, 0.3)")):i.type==="nmac"&&(a(4,500),s("rgba(255, 170, 0, 0.2)"))},2e3),setTimeout(()=>{t(o,"resolving"),s(null)},i.duration*.7),setTimeout(()=>{t(o,"resolved")},i.duration*.9),setTimeout(()=>{n(o)},i.duration),o}const TO={crash:(i,e)=>Rg({type:"crash",trackIds:[i],location:e,duration:15e3}),nmac:(i,e)=>Rg({type:"nmac",trackIds:[i,e],duration:1e4}),weatherReroute:i=>Rg({type:"weather-reroute",trackIds:i,duration:2e4}),massEmergency:i=>Rg({type:"mass-emergency",trackIds:i,duration:3e4}),incursion:(i,e)=>Rg({type:"incursion",trackIds:[i],location:e,duration:12e3})},Wq={id:"aircraft-crash",title:"Aircraft Down",description:"Experience a dramatic aircraft crash emergency sequence",icon:"flame",duration:1,initialState:{tracks:[{trackId:"TRK-CRASH-01",callsign:"N12345",latitudeDeg:42.1,longitudeDeg:-71.3,altitudeFt:5e3,headingDeg:180,speedKt:200,verticalRateFpm:-6e3,confidence:.85,sequence:1,updatedAt:new Date().toISOString()}],alerts:[],predictions:[]},steps:[{id:"intro",narrative:"Aircraft N12345 is experiencing a rapid uncontrolled descent.",spotlight:{type:"flight",callsign:"N12345"},autoAdvance:3e3},{id:"emergency",narrative:"EMERGENCY - Aircraft is descending at over 6000 feet per minute!",spotlight:{type:"component",id:"radar"},events:[{delay:1e3,type:"custom",payload:()=>TO.crash("TRK-CRASH-01",{lat:42,lng:-71.3})}],autoAdvance:8e3},{id:"aftermath",narrative:"Search and rescue operations have been initiated at the crash site.",spotlight:{type:"component",id:"radar"},autoAdvance:4e3}]},qq={id:"nmac-event",title:"Near Mid-Air Collision",description:"Two aircraft on collision course trigger TCAS alerts",icon:"alert-triangle",duration:.75,initialState:{tracks:[{trackId:"TRK-NMAC-01",callsign:"UAL456",latitudeDeg:42.2,longitudeDeg:-71.4,altitudeFt:35e3,headingDeg:90,speedKt:450,verticalRateFpm:0,confidence:.98,sequence:1,updatedAt:new Date().toISOString()},{trackId:"TRK-NMAC-02",callsign:"DAL789",latitudeDeg:42.2,longitudeDeg:-71.2,altitudeFt:35e3,headingDeg:270,speedKt:440,verticalRateFpm:0,confidence:.97,sequence:1,updatedAt:new Date().toISOString()}],alerts:[],predictions:[]},steps:[{id:"intro",narrative:"Two aircraft are on converging paths at FL350.",spotlight:{type:"component",id:"radar"},autoAdvance:3e3},{id:"alert",narrative:"TCAS ALERT - Aircraft are within 5nm and closing!",spotlight:{type:"component",id:"alerts"},events:[{delay:500,type:"custom",payload:()=>TO.nmac("TRK-NMAC-01","TRK-NMAC-02")}],autoAdvance:6e3},{id:"resolved",narrative:"Conflict resolved - aircraft have safely separated.",spotlight:{type:"component",id:"radar"},autoAdvance:3e3}]},Xq={id:"showcase-demo",title:"Crisis Showcase",description:"International crisis: Air India hijack, Qantas hero rescue, stealth, TCAS",icon:"flame",duration:5,initialState:{tracks:[{trackId:"TRK-SD-001",callsign:"AIC302",latitudeDeg:42.3,longitudeDeg:-71,altitudeFt:39e3,headingDeg:270,speedKt:510,verticalRateFpm:0,confidence:.98,sequence:1,updatedAt:new Date().toISOString(),airline:"AIC",aircraftType:"B777",countryCode:"IN",souls:350,autopilotStatus:"engaged",autopilotMode:"LNAV/VNAV"},{trackId:"TRK-SD-002",callsign:"QFA8",latitudeDeg:42.45,longitudeDeg:-71.6,altitudeFt:4e4,headingDeg:90,speedKt:520,verticalRateFpm:0,confidence:.97,sequence:1,updatedAt:new Date().toISOString(),airline:"QFA",aircraftType:"A380",countryCode:"AU",souls:489,autopilotStatus:"engaged",autopilotMode:"LNAV/VNAV"},{trackId:"TRK-SD-003",callsign:"BAW117",latitudeDeg:42.6,longitudeDeg:-70.5,altitudeFt:37e3,headingDeg:250,speedKt:490,verticalRateFpm:0,confidence:.97,sequence:1,updatedAt:new Date().toISOString(),airline:"BAW",aircraftType:"A350",countryCode:"GB",souls:325},{trackId:"TRK-SD-004",callsign:"DAL1892",latitudeDeg:42.35,longitudeDeg:-70.8,altitudeFt:35500,headingDeg:270,speedKt:460,verticalRateFpm:0,confidence:.96,sequence:1,updatedAt:new Date().toISOString(),airline:"DAL",aircraftType:"A330",countryCode:"US",souls:287},{trackId:"TRK-SD-005",callsign:"AAL445",latitudeDeg:42.1,longitudeDeg:-71.3,altitudeFt:28e3,headingDeg:180,speedKt:380,verticalRateFpm:-1500,confidence:.98,sequence:1,updatedAt:new Date().toISOString(),airline:"AAL",aircraftType:"B738",countryCode:"US",souls:156},{trackId:"TRK-SD-006",callsign:"UAL2547",latitudeDeg:42.55,longitudeDeg:-71.15,altitudeFt:31e3,headingDeg:135,speedKt:420,verticalRateFpm:0,confidence:.94,sequence:1,updatedAt:new Date().toISOString(),airline:"UAL",aircraftType:"B789",countryCode:"US",souls:274},{trackId:"TRK-SD-007",callsign:"SWA3021",latitudeDeg:41.85,longitudeDeg:-71.1,altitudeFt:24e3,headingDeg:45,speedKt:410,verticalRateFpm:1500,confidence:.95,sequence:1,updatedAt:new Date().toISOString(),airline:"SWA",aircraftType:"B737",countryCode:"US",souls:143},{trackId:"TRK-SD-008",callsign:"FDX892",latitudeDeg:41.7,longitudeDeg:-71.7,altitudeFt:38e3,headingDeg:0,speedKt:480,verticalRateFpm:0,confidence:.93,sequence:1,updatedAt:new Date().toISOString(),airline:"FDX",aircraftType:"B77W",countryCode:"US",souls:2},{trackId:"TRK-SD-009",callsign:"JBU1157",latitudeDeg:42.2,longitudeDeg:-70.9,altitudeFt:29e3,headingDeg:225,speedKt:400,verticalRateFpm:0,confidence:.95,sequence:1,updatedAt:new Date().toISOString(),airline:"JBU",aircraftType:"A321",countryCode:"US",souls:185},{trackId:"TRK-SD-010",callsign:"ASA1205",latitudeDeg:41.95,longitudeDeg:-71.85,altitudeFt:3e4,headingDeg:90,speedKt:430,verticalRateFpm:0,confidence:.96,sequence:1,updatedAt:new Date().toISOString(),airline:"ASA",aircraftType:"B739",countryCode:"US",souls:178},{trackId:"TRK-SD-011",callsign:"AFR023",latitudeDeg:42,longitudeDeg:-71.5,altitudeFt:36e3,headingDeg:60,speedKt:470,verticalRateFpm:0,confidence:.96,sequence:1,updatedAt:new Date().toISOString(),airline:"AFR",aircraftType:"A330",countryCode:"FR",souls:277},{trackId:"TRK-SD-012",callsign:"UAE231",latitudeDeg:41.8,longitudeDeg:-71.4,altitudeFt:41e3,headingDeg:45,speedKt:495,verticalRateFpm:0,confidence:.97,sequence:1,updatedAt:new Date().toISOString(),airline:"UAE",aircraftType:"A380",countryCode:"AE",souls:489}],alerts:[],predictions:[]},steps:[{id:"intro-1",narrative:"ATCS Next Gen online. Boston Sector 33. 12 aircraft under control. Heavy international traffic today.",spotlight:{type:"component",id:"radar"},autoAdvance:1e4},{id:"intro-2",narrative:"All sensors nominal. AI threat detection active. All aircraft on autopilot, maintaining assigned routes.",atcCommand:"All stations, Boston Center, radar contact. Maintain current altitudes and headings.",spotlight:{type:"component",id:"predictions"},autoAdvance:12e3},{id:"intro-3",narrative:"Air India 302 heavy and Qantas 8 super inbound from overseas. Both aircraft showing autopilot engaged, LNAV/VNAV mode.",spotlight:{type:"flight",callsign:"AIC302"},autoAdvance:1e4},{id:"hijack-begin",narrative:"MAYDAY MAYDAY MAYDAY received from Air India 302. Emergency transponder activating. Squawk 7500 - HIJACK CODE.",spotlight:{type:"flight",callsign:"AIC302"},emphasize:!0,pacing:"dramatic",autoAdvance:12e3,events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-SD-001",squawkCode:"7500",visualState:"hijacked",emergencyType:"hijack"}},{delay:500,type:"addAlert",payload:{alertId:"ALT-HIJACK-01",severity:"CRITICAL",alertType:"EMERGENCY_DECLARED",message:"HIJACKING: AIC302 Boeing 777. 350 souls. Armed suspect in cockpit.",involvedFlightIds:["AIC302"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}]},{id:"hijack-captain",narrative:"Captain Sharma: Boston, this is Air India 302 heavy. A man with a weapon has entered my cockpit. He is speaking Norwegian. He claims to be from Wakanda. Please advise.",atcCommand:"Air India 302 heavy, Boston Center copies all. Squawk confirmed 7500. Keep transmitting. NORAD has been notified. Help is coming.",spotlight:{type:"flight",callsign:"AIC302"},minDuration:5e3,autoAdvance:16e3},{id:"hijack-atc-divert",narrative:"ATC attempting to assist with divert options. Identifying nearest suitable airports.",atcCommand:"Air India 302, if able, divert to Bradley International, runway 06, 40 miles southwest. Emergency services standing by.",spotlight:{type:"flight",callsign:"AIC302"},autoAdvance:14e3},{id:"hijack-demands",narrative:"Norwegian hijacker speaking: Jeg krever at dette flyet lander i Wakanda umiddelbart! No movement! I have control of this plane now.",spotlight:{type:"flight",callsign:"AIC302"},autoAdvance:14e3,events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-SD-001",headingDeg:180,dataCorruption:.2,autopilotStatus:"disengaged"}}]},{id:"hijack-autopilot-status",narrative:"ALERT: Air India 302 autopilot has been DISENGAGED. Aircraft now under manual control. Course deviation detected.",atcCommand:"Air India 302, we show your autopilot disengaged. If able, re-engage autopilot. Repeat, engage autopilot if safe to do so.",spotlight:{type:"flight",callsign:"AIC302"},autoAdvance:14e3,events:[{delay:500,type:"addAlert",payload:{alertId:"ALT-HIJACK-AP",severity:"WARNING",alertType:"DEVIATION_DETECTED",message:"AIC302: Autopilot DISENGAGED. Manual control detected. Course deviation 45.",involvedFlightIds:["AIC302"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}]},{id:"hijack-fa",narrative:"Flight Attendant Priya: Passengers are panicking. He has locked the cockpit door. Captain Sharma is trying to negotiate. We are descending rapidly.",spotlight:{type:"flight",callsign:"AIC302"},autoAdvance:14e3,events:[{delay:500,type:"addAlert",payload:{alertId:"ALT-HIJACK-02",severity:"CRITICAL",alertType:"LOSS_OF_SEPARATION",message:"AIR INDIA 302: Unauthorized descent in progress. Hijacker has control.",involvedFlightIds:["AIC302"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}]},{id:"hijack-atc-clearance",narrative:"ATC clearing airspace around Air India 302. Vectoring all traffic away from the hijacked aircraft.",atcCommand:"All aircraft, emergency traffic, Air India 302 descending through your altitude. Delta 1892, turn left heading 090 immediately. American 445, climb flight level 350.",spotlight:{type:"component",id:"radar"},autoAdvance:16e3,events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-SD-004",headingDeg:90}},{delay:200,type:"updateTrack",payload:{trackId:"TRK-SD-005",verticalRateFpm:2e3,altitudeFt:35e3}}]},{id:"hijack-descent",narrative:"Air India 302 in uncontrolled descent. Rate of descent 6000 feet per minute. NORAD F-22 Raptors scrambling from Langley.",spotlight:{type:"flight",callsign:"AIC302"},autoAdvance:12e3,events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-SD-001",verticalRateFpm:-6e3,altitudeFt:2e4,speedKt:400,dataCorruption:.5}},{delay:300,type:"removeAlert",payload:{id:"ALT-HIJACK-AP"}}]},{id:"hijack-final-attempt",narrative:"ATC making final attempt to reach the cockpit.",atcCommand:"Air India 302, Air India 302, Boston Center on guard. If you can hear this transmission, pull up. Repeat, PULL UP. Acknowledge!",spotlight:{type:"flight",callsign:"AIC302"},autoAdvance:14e3},{id:"hijack-crash",narrative:"Radar contact lost with Air India 302. 350 souls on board. Primary target fading. We could not save them.",spotlight:{type:"component",id:"radar"},emphasize:!0,pauseAfterNarration:4e3,autoAdvance:14e3,events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-SD-001",visualState:"crashed",altitudeFt:0,speedKt:0,confidence:0,transponderActive:!1}},{delay:500,type:"removeAlert",payload:{id:"ALT-HIJACK-01"}},{delay:600,type:"removeAlert",payload:{id:"ALT-HIJACK-02"}},{delay:800,type:"addAlert",payload:{alertId:"ALT-CRASH",severity:"CRITICAL",alertType:"EMERGENCY_DECLARED",message:"AIRCRAFT DOWN: AIC302. 350 fatalities. Search and rescue dispatched.",involvedFlightIds:["AIC302"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}]},{id:"crash-aftermath",narrative:"Some battles cannot be won. We mark their position and vector in search and rescue. But wait... Another crisis is developing. Qantas 8 is declaring emergency.",spotlight:{type:"component",id:"radar"},autoAdvance:14e3,events:[{delay:1e3,type:"removeAlert",payload:{id:"ALT-CRASH"}}]},{id:"hero-trigger",narrative:"Sarah: [Panicked breathing] MAYDAY MAYDAY MAYDAY! Qantas 8! We have an emergency! A hijacker attacked the pilots! Both pilots are bleeding and unconscious! I-I knocked the hijacker out but... Oh god, oh god... There are 489 PEOPLE on this plane and NO ONE is flying it! PLEASE, YOU HAVE TO HELP US!",spotlight:{type:"flight",callsign:"QFA8"},emphasize:!0,pacing:"dramatic",pauseAfterNarration:3500,autoAdvance:16e3,events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-SD-002",visualState:"hero",squawkCode:"7700",emergencyType:"incapacitated_crew",autopilotStatus:"engaged"}},{delay:500,type:"addAlert",payload:{alertId:"ALT-HERO",severity:"CRITICAL",alertType:"EMERGENCY_DECLARED",message:"EMERGENCY: QFA8 Airbus A380. 489 souls. Both pilots incapacitated. Passenger in cockpit.",involvedFlightIds:["QFA8"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}]},{id:"hero-initial-contact",narrative:"This is it. 489 souls. No pilots. One terrified passenger. We have minutes to save them or they all die.",atcCommand:"Qantas 8, Boston Center, we copy your emergency. Sarah, listen to me very carefully. Your life and everyone on that aircraft depends on the next few minutes. I NEED you to breathe and focus. Look at the instrument panel. Do you see a green light that says AUTOPILOT or A P?",spotlight:{type:"flight",callsign:"QFA8"},pacing:"dramatic",minDuration:6e3,autoAdvance:18e3},{id:"hero-autopilot-check",narrative:"Sarah: [Trembling] Y-yes! I see it! Green light! AUTOPILOT! Is that good?! Are we going to crash?!",atcCommand:"That is VERY good, Sarah. That means the computer is flying the plane right now. You are NOT going to crash. The aircraft is stable at 40,000 feet. But I need you to listen EXTREMELY carefully. Do NOT touch ANYTHING. Not the yoke, not the throttles, NOTHING. One wrong move and you kill everyone. Do you understand?",spotlight:{type:"flight",callsign:"QFA8"},pacing:"dramatic",minDuration:7e3,autoAdvance:16e3,events:[{delay:500,type:"addAlert",payload:{alertId:"ALT-HERO-AP",severity:"INFO",alertType:"DEVIATION_DETECTED",message:"QFA8: Autopilot ENGAGED. Aircraft stable. Remote guidance possible.",involvedFlightIds:["QFA8"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}]},{id:"hero-divert-plan",narrative:"Clearing all traffic. Calling in emergency services. Fire trucks, ambulances, crash foam. This is the most critical situation in air traffic control. Get one passenger to land an A380. Or watch 489 people die.",atcCommand:"ALL AIRCRAFT THIS FREQUENCY: Emergency in progress, Qantas 8 inbound JFK. Both pilots incapacitated. Runway 31L CLOSED to all traffic. All arrivals divert immediately to Newark or hold. I repeat, CLEAR THE APPROACH NOW.",spotlight:{type:"component",id:"radar"},pacing:"fast",emphasize:!0,autoAdvance:16e3},{id:"hero-guide-heading",narrative:"Sarah: [Crying] The plane is turning on its own! I-I didn't touch anything! Why is it turning?!",atcCommand:"Sarah, BREATHE. That is NORMAL. The autopilot is following the flight plan. I am going to override it and point you toward JFK Airport. When I say the command, the plane will turn. This will feel strange but it is SAFE. Qantas 8, turn left heading 180, vectors for JFK final approach.",spotlight:{type:"flight",callsign:"QFA8"},pacing:"dramatic",minDuration:6e3,autoAdvance:16e3,events:[{delay:500,type:"updateTrack",payload:{trackId:"TRK-SD-002",headingDeg:180,autopilotStatus:"remote_guided",autopilotMode:"HDG SEL"}}]},{id:"hero-active",narrative:"Fuel remaining: 45 minutes. Distance to runway: 120 miles. 489 people. One untrained passenger. This is what we trained for. Every word matters. Every second counts. Failure is not an option.",spotlight:{type:"component",id:"radar"},pacing:"dramatic",emphasize:!0,pauseAfterNarration:4e3,autoAdvance:2e4,events:[{delay:1500,type:"triggerHeroMode",payload:{active:!0}}]},{id:"hero-descent",narrative:"Beginning descent. This is the most dangerous phase. Too steep and the plane stalls. Too shallow and we run out of fuel. Sarah's hands are shaking. She can barely breathe. But she has to trust us.",atcCommand:"Sarah, listen very carefully. I am going to command the aircraft to descend. You will feel the nose drop. Your stomach will drop. This is SUPPOSED to happen. Do NOT panic. Do NOT touch the controls. The computer knows what it is doing. Qantas 8, descend and maintain 15,000 feet, reduce speed to 250 knots.",spotlight:{type:"flight",callsign:"QFA8"},pacing:"dramatic",minDuration:8e3,autoAdvance:16e3,events:[{delay:500,type:"updateTrack",payload:{trackId:"TRK-SD-002",verticalRateFpm:-1500,altitudeFt:15e3}}]},{id:"hero-final-approach",narrative:"Sarah: [Voice breaking] I SEE LIGHTS! I see the runway! Oh god, oh god, we're so low! Are we going to make it?! TELL ME WE'RE GOING TO MAKE IT!",atcCommand:"Sarah, you ARE going to make it. You hear me? YOU ARE GOING TO LIVE. Everyone on that plane is going to live because YOU are strong enough to do this. The autoland system is taking over. 10 miles to touchdown. Keep your hands OFF the controls. Let the aircraft land itself. Emergency vehicles are in position. You've got this, Sarah. Just a few more minutes.",spotlight:{type:"flight",callsign:"QFA8"},pacing:"dramatic",emphasize:!0,minDuration:8e3,autoAdvance:16e3,events:[{delay:500,type:"updateTrack",payload:{trackId:"TRK-SD-002",autopilotMode:"AUTOLAND",altitudeFt:3e3,speedKt:160}},{delay:600,type:"removeAlert",payload:{id:"ALT-HERO-AP"}}]},{id:"hero-complete",narrative:"Wheels down. Qantas 8 is on the ground. 489 souls saved. Sarah collapses in the cockpit, sobbing. Emergency crews swarm the aircraft. The pilots are rushed to hospital. Against impossible odds, against terror and death... one ordinary person became extraordinary. Today, Sarah saved everyone.",spotlight:{type:"component",id:"radar"},pacing:"dramatic",emphasize:!0,pauseAfterNarration:5e3,autoAdvance:16e3,events:[{delay:0,type:"triggerHeroMode",payload:{active:!1}},{delay:0,type:"removeAlert",payload:{id:"ALT-HERO"}},{delay:0,type:"updateTrack",payload:{trackId:"TRK-SD-002",visualState:"normal",squawkCode:"1200",autopilotStatus:"disengaged",altitudeFt:0,speedKt:0}}]},{id:"stealth-detect",narrative:"Anomaly detected. Intermittent radar return, no transponder. Bearing 045. AI analyzing threat profile.",spotlight:{type:"component",id:"radar"},autoAdvance:12e3,events:[{delay:200,type:"addAlert",payload:{alertId:"ALT-STEALTH-01",severity:"WARNING",alertType:"DEVIATION_DETECTED",message:"UNKNOWN CONTACT: Intermittent radar return. No transponder. Possible stealth aircraft.",involvedFlightIds:["UNKNOWN"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}]},{id:"stealth-id",narrative:"Contact confirmed. Speed Mach 1.8, altitude 45,000. AI identifies signature as Russian SU-57 Felon.",atcCommand:"All aircraft, UNKNOWN TRAFFIC bearing 045, flight level 450, supersonic. All aircraft stand by for emergency vectors.",spotlight:{type:"component",id:"alerts"},autoAdvance:14e3,events:[{delay:0,type:"addAlert",payload:{alertId:"ALT-STEALTH-02",severity:"CRITICAL",alertType:"LOSS_OF_SEPARATION",message:"HOSTILE AIRCRAFT: SU-57 Felon violating US airspace. NORAD scrambling interceptors.",involvedFlightIds:["UNKNOWN"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}]},{id:"stealth-response",narrative:"F-22 Raptors scrambling from Langley Air Force Base. Vectoring all civil traffic away from intercept zone.",atcCommand:"British Airways 117, turn left heading 180, descend and maintain flight level 330. Expect holding.",spotlight:{type:"component",id:"radar"},autoAdvance:14e3,events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-SD-003",headingDeg:180,verticalRateFpm:-1500}},{delay:300,type:"updateTrack",payload:{trackId:"TRK-SD-011",headingDeg:180}}]},{id:"stealth-resolved",narrative:"Russian aircraft has reversed course and is exiting US airspace. F-22s escorting out of ADIZ. Crisis averted.",atcCommand:"All aircraft, hostile traffic clear of sector. Resume normal operations. British Airways 117, resume own navigation.",spotlight:{type:"component",id:"radar"},autoAdvance:14e3,events:[{delay:200,type:"removeAlert",payload:{id:"ALT-STEALTH-01"}},{delay:400,type:"removeAlert",payload:{id:"ALT-STEALTH-02"}}]},{id:"tcas-alert",narrative:"TRAFFIC ALERT! Delta 1892 and American 445 on converging headings! AI predicts collision in 45 seconds!",spotlight:{type:"component",id:"predictions"},emphasize:!0,pacing:"fast",autoAdvance:12e3,events:[{delay:0,type:"addPrediction",payload:{id:"PRED-TCAS",predictionType:"CONFLICT",involvedFlights:["DAL1892","AAL445"],probability:.97,predictedTime:new Date(Date.now()+3e4).toISOString(),description:"COLLISION COURSE: 443 souls at risk! Immediate action required."}},{delay:200,type:"addAlert",payload:{alertId:"ALT-TCAS-01",severity:"CRITICAL",alertType:"CONFLICT_PREDICTED",message:"TCAS RESOLUTION ADVISORY IMMINENT. DAL1892 and AAL445 converging.",involvedFlightIds:["DAL1892","AAL445"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}]},{id:"tcas-execute",narrative:"TCAS Resolution Advisory triggered! Both aircraft receiving automated climb and descend commands.",atcCommand:"Delta 1892, CLIMB IMMEDIATELY flight level 390! American 445, DESCEND IMMEDIATELY flight level 240! Traffic alert!",spotlight:{type:"flight",callsign:"DAL1892"},autoAdvance:14e3,events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-SD-004",verticalRateFpm:4e3,altitudeFt:39e3}},{delay:0,type:"updateTrack",payload:{trackId:"TRK-SD-005",verticalRateFpm:-4e3,altitudeFt:24e3}}]},{id:"tcas-clear",narrative:"TCAS conflict resolved. 15,000 feet vertical separation achieved. 443 lives saved by automated safety systems.",atcCommand:"Delta 1892, American 445, traffic no longer a factor. Resume normal operations. Nice work up there.",spotlight:{type:"component",id:"radar"},autoAdvance:14e3,events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-SD-004",verticalRateFpm:0}},{delay:0,type:"updateTrack",payload:{trackId:"TRK-SD-005",verticalRateFpm:0}},{delay:300,type:"removePrediction",payload:{id:"PRED-TCAS"}},{delay:400,type:"removeAlert",payload:{id:"ALT-TCAS-01"}}]},{id:"tornado-warn",narrative:"SEVERE WEATHER ALERT from National Weather Service. EF-3 tornado confirmed, 25 miles southwest, tracking northeast at 40 knots.",spotlight:{type:"component",id:"alerts"},autoAdvance:12e3,events:[{delay:0,type:"addAlert",payload:{alertId:"ALT-TORNADO",severity:"CRITICAL",alertType:"WEATHER_HAZARD",message:"EF-3 TORNADO: FDX892, ASA1205, SWA3021 in threat zone. Immediate rerouting required!",involvedFlightIds:["FDX892","ASA1205","SWA3021"],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1}}]},{id:"tornado-reroute",narrative:"AI weather avoidance system executing emergency reroutes. Three aircraft deviating from tornado path.",atcCommand:"FedEx 892, turn right heading 090, climb and maintain flight level 400. Weather deviation approved. Southwest 3021, turn left heading 135.",spotlight:{type:"flight",callsign:"FDX892"},autoAdvance:16e3,events:[{delay:0,type:"updateTrack",payload:{trackId:"TRK-SD-008",headingDeg:90,verticalRateFpm:2e3}},{delay:200,type:"updateTrack",payload:{trackId:"TRK-SD-010",headingDeg:0,verticalRateFpm:1500}},{delay:400,type:"updateTrack",payload:{trackId:"TRK-SD-007",headingDeg:135}}]},{id:"tornado-clear",narrative:"All aircraft have successfully deviated around the severe weather cell. Tornado passing east of our sector.",atcCommand:"All aircraft, severe weather has cleared our sector. Resume own navigation when ready. Good work everyone.",spotlight:{type:"component",id:"radar"},autoAdvance:14e3,events:[{delay:300,type:"removeAlert",payload:{id:"ALT-TORNADO"}}]},{id:"finale-1",narrative:"ATCS Next Generation. When everything goes wrong at once, we are the last line of defense. Every decision matters.",spotlight:{type:"component",id:"radar"},autoAdvance:12e3},{id:"finale-2",narrative:"AI-powered threat detection. Automated conflict resolution. Remote aircraft guidance. Autopilot integration. The future of air traffic control is here.",spotlight:{type:"component",id:"predictions"},autoAdvance:14e3},{id:"finale-3",narrative:"Demo complete. In live mode, click any aircraft to issue ATC commands. ATCS-NG: Protecting lives, every second of every flight.",atcCommand:"Boston Center signing off. Safe skies, everyone.",spotlight:{type:"component",id:"radar"},autoAdvance:16e3}]},Yq=[Xq,Gq,jq],Zq=[zq,Bq,Fq,kq,Vq,Hq,Wq,qq],Pf=[...Yq,...Zq],MO={isActive:!1,mode:"menu",presenterMode:!1,currentScenario:null,currentStepIndex:0,isTourMode:!1,tourScenarioIndex:0,tracks:[],alerts:[],predictions:[],pendingInteraction:null,interactionCompleted:!1};function Kq(i,e){switch(e.type){case"OPEN_MENU":return{...i,isActive:!0,mode:"menu"};case"CLOSE_DEMO":return{...MO};case"START_SCENARIO":{const t=e.scenario,n=t.steps[0];return{...i,mode:"playing",currentScenario:t,currentStepIndex:0,isTourMode:!1,tracks:t.initialState.tracks,alerts:t.initialState.alerts,predictions:t.initialState.predictions,pendingInteraction:n?.interaction||null,interactionCompleted:!1}}case"START_TOUR":{const t=Pf[0],n=t.steps[0];return{...i,mode:"playing",currentScenario:t,currentStepIndex:0,isTourMode:!0,tourScenarioIndex:0,tracks:t.initialState.tracks,alerts:t.initialState.alerts,predictions:t.initialState.predictions,pendingInteraction:n?.interaction||null,interactionCompleted:!1}}case"NEXT_STEP":{if(!i.currentScenario)return i;const t=i.currentStepIndex+1,n=i.currentScenario.steps;if(t<n.length){const a=n[t];return{...i,currentStepIndex:t,pendingInteraction:a.interaction||null,interactionCompleted:!1}}if(i.isTourMode){const a=i.tourScenarioIndex+1;if(a<Pf.length){const s=Pf[a],o=s.steps[0];return{...i,currentScenario:s,currentStepIndex:0,tourScenarioIndex:a,tracks:s.initialState.tracks,alerts:s.initialState.alerts,predictions:s.initialState.predictions,pendingInteraction:o?.interaction||null,interactionCompleted:!1}}}return{...i,mode:"completed",pendingInteraction:null}}case"PREV_STEP":{if(!i.currentScenario||i.currentStepIndex===0)return i;const t=i.currentStepIndex-1,n=i.currentScenario.steps[t];return{...i,currentStepIndex:t,pendingInteraction:n.interaction||null,interactionCompleted:!1}}case"PAUSE":return{...i,mode:"paused"};case"RESUME":return{...i,mode:"playing"};case"TOGGLE_PRESENTER_MODE":return{...i,presenterMode:!i.presenterMode};case"SET_STATE":return{...i,tracks:e.state.tracks??i.tracks,alerts:e.state.alerts??i.alerts,predictions:e.state.predictions??i.predictions};case"UPDATE_TRACKS":return{...i,tracks:e.tracks};case"UPDATE_ALERTS":return{...i,alerts:e.alerts};case"UPDATE_PREDICTIONS":return{...i,predictions:e.predictions};case"COMPLETE_INTERACTION":return{...i,interactionCompleted:!0,pendingInteraction:null};case"SCENARIO_COMPLETE":return{...i,mode:"completed"};case"TOUR_NEXT_SCENARIO":{const t=i.tourScenarioIndex+1;if(t>=Pf.length)return{...i,mode:"completed"};const n=Pf[t],a=n.steps[0];return{...i,currentScenario:n,currentStepIndex:0,tourScenarioIndex:t,tracks:n.initialState.tracks,alerts:n.initialState.alerts,predictions:n.initialState.predictions,pendingInteraction:a?.interaction||null,interactionCompleted:!1}}default:return i}}function Qq(i){return i.currentScenario&&i.currentScenario.steps[i.currentStepIndex]||null}function AO(i){return i.currentScenario?i.currentScenario.steps.length:0}function Jq(i){const e=AO(i);return e===0?0:(i.currentStepIndex+1)/e*100}const EO=ue.createContext(null);function $q({children:i}){const[e,t]=ue.useReducer(Kq,MO),n=ue.useRef(null),a=ue.useRef([]),{setHeroModeActive:s}=Hs(),o=Qq(e),c=AO(e),f=Jq(e),d=ue.useCallback(()=>{n.current&&(clearTimeout(n.current),n.current=null),a.current.forEach(Z=>clearTimeout(Z)),a.current=[]},[]),g=ue.useCallback(Z=>{Z.events&&Z.events.forEach(B=>{const H=window.setTimeout(()=>{switch(B.type){case"updateTrack":{const Q=B.payload;t({type:"UPDATE_TRACKS",tracks:e.tracks.map(J=>J.trackId===Q.trackId?{...J,...Q}:J)});break}case"addAlert":{const Q=B.payload;t({type:"UPDATE_ALERTS",alerts:[Q,...e.alerts]});break}case"removeAlert":{const{id:Q}=B.payload;t({type:"UPDATE_ALERTS",alerts:e.alerts.filter(J=>J.alertId!==Q)});break}case"addPrediction":{const Q=B.payload;t({type:"UPDATE_PREDICTIONS",predictions:[Q,...e.predictions]});break}case"updatePrediction":{const Q=B.payload;t({type:"UPDATE_PREDICTIONS",predictions:e.predictions.map(J=>J.id===Q.id?{...J,...Q}:J)});break}case"removePrediction":{const{id:Q}=B.payload;t({type:"UPDATE_PREDICTIONS",predictions:e.predictions.filter(J=>J.id!==Q)});break}case"triggerHeroMode":{const{active:Q}=B.payload;s(Q);break}}},B.delay);a.current.push(H)})},[e.tracks,e.alerts,e.predictions,s]);ue.useEffect(()=>{e.mode==="playing"&&o&&(d(),g(o))},[e.mode,e.currentStepIndex,o,d,g]),ue.useEffect(()=>{const Z=new URLSearchParams(window.location.search),B=Z.get("demo");if(!Z.get("nodemo"))if(B==="tour")t({type:"START_TOUR"});else if(B){const Q=Pf.find(J=>J.id===B);Q&&t({type:"START_SCENARIO",scenario:Q})}else t({type:"OPEN_MENU"})},[]);const y=ue.useCallback(()=>t({type:"OPEN_MENU"}),[]),x=ue.useCallback(()=>{d(),t({type:"CLOSE_DEMO"})},[d]),b=ue.useCallback(Z=>{const B=Pf.find(H=>H.id===Z);B&&(d(),t({type:"START_SCENARIO",scenario:B}))},[d]),M=ue.useCallback(()=>{d(),t({type:"START_TOUR"})},[d]),R=ue.useCallback(()=>t({type:"NEXT_STEP"}),[]),C=ue.useCallback(()=>t({type:"PREV_STEP"}),[]),E=ue.useCallback(()=>t({type:"PAUSE"}),[]),N=ue.useCallback(()=>t({type:"RESUME"}),[]),I=ue.useCallback(()=>t({type:"TOGGLE_PRESENTER_MODE"}),[]),z=ue.useCallback(()=>t({type:"COMPLETE_INTERACTION"}),[]),F=ue.useCallback(Z=>{if(!o?.spotlight)return!1;const B=o.spotlight;if(B.type!==Z.type)return!1;switch(B.type){case"component":return B.id===Z.id;case"track":return B.trackId===Z.trackId;case"alert":return B.alertId===Z.alertId;case"prediction":return B.predictionId===Z.predictionId;case"flight":return B.callsign===Z.callsign;default:return!1}},[o]),V=ue.useCallback(Z=>!e.isActive||e.mode==="menu"?!0:e.pendingInteraction?e.pendingInteraction.target===Z:!1,[e.isActive,e.mode,e.pendingInteraction]),W={state:e,currentStep:o,totalSteps:c,progress:f,scenarios:Pf,openMenu:y,closeDemo:x,startScenario:b,startTour:M,nextStep:R,prevStep:C,pause:E,resume:N,togglePresenterMode:I,completeInteraction:z,isSpotlighted:F,canInteract:V};return O.jsx(EO.Provider,{value:W,children:i})}function Kf(){const i=ue.useContext(EO);if(!i)throw new Error("useDemoMode must be used within a DemoProvider");return i}const eX={radar:'[data-demo-id="radar"]',alerts:'[data-demo-id="alerts"]',predictions:'[data-demo-id="predictions"]',strips:'[data-demo-id="strips"]',header:'[data-demo-id="header"]'};function tX(){const{state:i,currentStep:e}=Kf(),[t,n]=ue.useState(null),a=ue.useRef(null);return ue.useEffect(()=>{if(!i.isActive||i.mode==="menu"||!e?.spotlight){n(null);return}const s=e.spotlight;let o=null;switch(s.type){case"component":o=eX[s.id];break;case"track":o=`[data-track-id="${s.trackId}"]`;break;case"alert":o=`[data-alert-id="${s.alertId}"]`;break;case"prediction":o=`[data-prediction-id="${s.predictionId}"]`;break;case"flight":o=`[data-callsign="${s.callsign}"]`;break}if(!o){n(null);return}const c=()=>{const d=document.querySelector(o);if(d){const g=d.getBoundingClientRect(),y=8;n({x:g.x-y,y:g.y-y,width:g.width+y*2,height:g.height+y*2})}else n(null)};c();const f=document.querySelector(o);return f&&(a.current=new ResizeObserver(c),a.current.observe(f)),window.addEventListener("resize",c),window.addEventListener("scroll",c,!0),()=>{a.current?.disconnect(),window.removeEventListener("resize",c),window.removeEventListener("scroll",c,!0)}},[i.isActive,i.mode,e]),!i.isActive||i.mode==="menu"||!t?null:O.jsx(ls,{children:O.jsxs(Qt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",inset:0,zIndex:9e3,pointerEvents:"none"},children:[O.jsxs("svg",{width:"100%",height:"100%",style:{position:"absolute",inset:0},children:[O.jsxs("defs",{children:[O.jsxs("filter",{id:"spotlight-glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[O.jsx("feGaussianBlur",{stdDeviation:"4",result:"blur"}),O.jsx("feFlood",{floodColor:"#00ff88",floodOpacity:"0.6",result:"color"}),O.jsx("feComposite",{in:"color",in2:"blur",operator:"in",result:"glow"}),O.jsxs("feMerge",{children:[O.jsx("feMergeNode",{in:"glow"}),O.jsx("feMergeNode",{in:"glow"}),O.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),O.jsxs("mask",{id:"spotlight-mask",children:[O.jsx("rect",{width:"100%",height:"100%",fill:"white"}),O.jsx(Qt.rect,{initial:{x:t.x,y:t.y,width:t.width,height:t.height},animate:{x:t.x,y:t.y,width:t.width,height:t.height},transition:{type:"spring",stiffness:300,damping:30},rx:"8",fill:"black"})]})]}),O.jsx("rect",{width:"100%",height:"100%",fill:"rgba(0, 0, 0, 0.75)",mask:"url(#spotlight-mask)"}),O.jsx(Qt.rect,{initial:{x:t.x,y:t.y,width:t.width,height:t.height},animate:{x:t.x,y:t.y,width:t.width,height:t.height},transition:{type:"spring",stiffness:300,damping:30},rx:"8",fill:"none",stroke:"#00ff88",strokeWidth:"2",filter:"url(#spotlight-glow)"})]}),O.jsx(Qt.div,{animate:{boxShadow:["0 0 0 0 rgba(0, 255, 136, 0.4)","0 0 0 8px rgba(0, 255, 136, 0)"]},transition:{duration:1.5,repeat:1/0,ease:"easeOut"},style:{position:"absolute",left:t.x,top:t.y,width:t.width,height:t.height,borderRadius:8,pointerEvents:"none"}})]})})}const nX={sameSpeakerPause:800,characterSwitchPause:1500,dramaticPause:3e3,commandTypingPause:1e3,fastPacingMultiplier:.6,dramaticPacingMultiplier:1.5},iX=["MAYDAY","EMERGENCY","CRITICAL","ALERT","HIJACK","CRASH","COLLISION","CONFLICT","WARNING","DANGER","FIRE","EXPLOSION"];function aX(i){return/Captain Sharma:|Air India 302.*Captain/i.test(i)?"captain_sharma":/Flight Attendant Priya:|Priya:/i.test(i)?"fa_priya":/Captain Williams:|Qantas.*Captain/i.test(i)?"captain_williams":/Sarah:/i.test(i)?"sarah":/hijacker.*Norwegian|Norwegian.*hijacker|Jeg krever|Wakanda/i.test(i)?"hijacker_norway":/hijacker.*Swedish|Swedish.*hijacker|Nej\.\.\.|Vakanda fr/i.test(i)?"hijacker_sweden":/British Airways.*crew|BAW.*crew/i.test(i)?"british_crew":/Controller E97:|Echo-Niner-Seven/i.test(i)?"controller_e97":/Boston Center|Tower|Approach|Departure|ATC:/i.test(i)?"atc":"narrator"}function sX(i){const e=i.toUpperCase();return iX.some(t=>e.includes(t))}class wO{rules;lastSpeaker=null;constructor(e){this.rules={...nX,...e}}calculatePause(e,t=!1){if(e.pauseAfterNarration!==void 0)return e.pauseAfterNarration;const n=aX(e.narrative);let a;e.emphasize||sX(e.narrative)?a=this.rules.dramaticPause:this.lastSpeaker&&n!==this.lastSpeaker?a=this.rules.characterSwitchPause:a=this.rules.sameSpeakerPause;const o=e.pacing||"normal";return o==="fast"?a*=this.rules.fastPacingMultiplier:o==="dramatic"&&(a*=this.rules.dramaticPacingMultiplier),t&&(a+=this.rules.commandTypingPause),this.lastSpeaker=n,Math.round(a)}reset(){this.lastSpeaker=null}getCurrentSpeaker(){return this.lastSpeaker}updateRules(e){this.rules={...this.rules,...e}}getRules(){return{...this.rules}}}new wO;const _b={MIN_DURATION:3e3,MAX_DURATION:3e4,WAIT_FOR_AUDIO:!0};class rX{pacingManager;currentState=null;timers=[];constructor(e){this.pacingManager=e||new wO}async playStep(e,t,n,a){this.clearTimers(),this.currentState={stepId:e.id,startTime:Date.now(),audioCompleted:!1,atcCommandCompleted:!e.atcCommand,canceled:!1};const s=this.currentState,o=e.minDuration??_b.MIN_DURATION,c=e.maxDuration??_b.MAX_DURATION,f=e.waitForAudio??_b.WAIT_FOR_AUDIO,d=this.pacingManager.calculatePause(e,!!e.atcCommand),g=()=>{if(!s||s.canceled)return;const x=Date.now()-s.startTime,b=!f||s.audioCompleted&&s.atcCommandCompleted,M=x>=o;if(b&&M){const R=window.setTimeout(()=>{s.canceled||t()},d);this.timers.push(R)}},y=window.setTimeout(()=>{s.canceled||(console.warn(`[DemoPlaybackController] Safety timeout reached for step: ${e.id}`),t())},c);if(this.timers.push(y),!f){const x=window.setTimeout(()=>{s.canceled||t()},o+d);this.timers.push(x);return}if(n){const x=()=>{s&&!s.canceled&&(s.audioCompleted=!0,n(),g())};this.onNarrationComplete=x}if(a){const x=()=>{s&&!s.canceled&&(s.atcCommandCompleted=!0,a(),g())};this.onATCCommandComplete=x}}onNarrationComplete=null;onATCCommandComplete=null;markNarrationComplete(){this.onNarrationComplete&&this.onNarrationComplete()}markATCCommandComplete(){this.onATCCommandComplete&&this.onATCCommandComplete()}cancel(){this.currentState&&(this.currentState.canceled=!0),this.clearTimers(),this.onNarrationComplete=null,this.onATCCommandComplete=null}reset(){this.cancel(),this.pacingManager.reset(),this.currentState=null}clearTimers(){this.timers.forEach(e=>clearTimeout(e)),this.timers=[]}getCurrentState(){return this.currentState}getPacingManager(){return this.pacingManager}}const Cu=new rX;function oX(i){return/Captain Sharma:|Air India 302.*Captain/i.test(i)?"captain_sharma":/Flight Attendant Priya:|Priya:/i.test(i)?"fa_priya":/Captain Williams:|Qantas.*Captain/i.test(i)?"captain_williams":/Sarah:/i.test(i)?"sarah":/hijacker.*Norwegian|Norwegian.*hijacker|Jeg krever|Wakanda/i.test(i)?"hijacker_norway":/hijacker.*Swedish|Swedish.*hijacker|Nej\.\.\.|Vakanda fr/i.test(i)?"hijacker_sweden":/British Airways.*crew|BAW.*crew/i.test(i)?"british_crew":/Controller E97:|Echo-Niner-Seven/i.test(i)?"controller_e97":/Boston Center|Tower|Approach|Departure|ATC:/i.test(i)?"atc":"narrator"}function lX(){const{state:i,currentStep:e,totalSteps:t,progress:n,closeDemo:a,nextStep:s,prevStep:o,pause:c,resume:f,togglePresenterMode:d}=Kf(),g=ue.useRef(null),{addCommandLog:y,narrationEnabled:x}=Hs(),[b,M]=ue.useState(!1),R=()=>{const N=!b;M(N),zr.setBrowserFallback(N),zc.setEnabled(!1)};if(ue.useEffect(()=>{if(i.mode==="playing"&&e?.narrative&&e.id!==g.current){g.current=e.id,Cu.cancel();const N=()=>i.mode==="playing"&&!i.pendingInteraction&&!i.presenterMode;Cu.playStep(e,()=>{N()&&s()});const I=oX(e.narrative);x?setTimeout(()=>{zr.speak(e.narrative,I,()=>{if(Cu.markNarrationComplete(),e.atcCommand){const z=e.atcCommand.match(/^([A-Za-z\s]+\d+)/),F=z?z[1].toUpperCase():"ALL";let V="other";/heading|turn/i.test(e.atcCommand)?V="heading":/climb|descend|flight level|altitude/i.test(e.atcCommand)?V="altitude":/speed|reduce|increase/i.test(e.atcCommand)?V="speed":/squawk/i.test(e.atcCommand)?V="squawk":/contact|frequency/i.test(e.atcCommand)?V="frequency":/hold/i.test(e.atcCommand)&&(V="hold"),y({callsign:F.replace(/\s+/g,""),command:e.atcCommand,type:V}),zr.speakATC(e.atcCommand,()=>{Cu.markATCCommandComplete()})}else Cu.markATCCommandComplete()})},300):(Cu.markNarrationComplete(),Cu.markATCCommandComplete())}return()=>{Cu.cancel()}},[i.mode,i.presenterMode,e?.id,e?.narrative,e?.atcCommand,i.pendingInteraction,s,y,x]),ue.useEffect(()=>{(i.mode==="paused"||!i.isActive)&&(Cu.cancel(),zr.cancel(),zc.cancel())},[i.mode,i.isActive]),ue.useEffect(()=>(i.isActive&&i.mode==="playing"&&zc.setEnabled(!1),()=>{zc.setEnabled(!0),zr.setBrowserFallback(!1)}),[i.isActive,i.mode]),!i.isActive||i.mode==="menu")return null;const C=i.mode==="playing",E=i.mode==="completed";return O.jsx(ls,{children:O.jsxs(Qt.div,{initial:{x:340,opacity:0},animate:{x:0,opacity:1},exit:{x:340,opacity:0},transition:{type:"spring",stiffness:300,damping:30},style:{position:"fixed",top:70,right:8,width:320,background:"rgba(10, 14, 20, 0.98)",border:"1px solid rgba(0, 255, 136, 0.3)",borderRadius:12,overflow:"hidden",zIndex:9500,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5), 0 0 20px rgba(0, 255, 136, 0.1)",backdropFilter:"blur(10px)"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",borderBottom:"1px solid rgba(0, 255, 136, 0.2)",background:"linear-gradient(90deg, rgba(0, 255, 136, 0.1), transparent)"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[O.jsx(Qt.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},style:{width:8,height:8,borderRadius:"50%",background:"#00ff88",boxShadow:"0 0 8px #00ff88"}}),O.jsx("span",{style:{fontFamily:"'Orbitron', monospace",fontSize:11,fontWeight:600,letterSpacing:2,color:"#00ff88"},children:"DEMO MODE"})]}),O.jsx("button",{onClick:a,style:{display:"flex",alignItems:"center",justifyContent:"center",width:28,height:28,background:"transparent",border:"1px solid rgba(255, 51, 102, 0.3)",borderRadius:4,color:"#ff3366",cursor:"pointer"},children:O.jsx(dm,{size:14})})]}),i.isTourMode&&O.jsx("div",{style:{padding:"12px 16px 0"},children:O.jsxs("div",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:10,color:"#6e7681",textTransform:"uppercase",letterSpacing:1,marginBottom:6},children:["Scenario ",i.tourScenarioIndex+1," of ",6]})}),O.jsxs("div",{style:{padding:"12px 16px"},children:[O.jsx("h3",{style:{fontFamily:"'Orbitron', monospace",fontSize:14,fontWeight:600,color:"#00d4ff",margin:0,marginBottom:4,letterSpacing:1},children:i.currentScenario?.title||"Demo Complete"}),O.jsx("div",{style:{height:3,background:"rgba(0, 255, 136, 0.1)",borderRadius:2,marginTop:8,overflow:"hidden"},children:O.jsx(Qt.div,{initial:{width:0},animate:{width:`${n}%`},style:{height:"100%",background:"linear-gradient(90deg, #00ff88, #00d4ff)",borderRadius:2}})})]}),O.jsx("div",{style:{padding:"0 16px 16px",minHeight:120},children:E?O.jsxs("div",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:18,color:"#e6edf3",lineHeight:1.5,textAlign:"center",padding:"20px 0"},children:[O.jsx("div",{style:{fontSize:36,marginBottom:12},children:""}),"Demo complete! You've seen all the key features of ATCS-NG."]}):O.jsx(Qt.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},style:{fontFamily:"'Rajdhani', sans-serif",fontSize:17,fontWeight:500,color:"#e6edf3",lineHeight:1.7,margin:0,textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:e?.narrative||""},e?.id)}),O.jsx(ls,{children:i.pendingInteraction&&O.jsx(Qt.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},style:{margin:"0 16px 16px",padding:12,background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",borderRadius:8},children:O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[O.jsx(Qt.div,{animate:{scale:[1,1.1,1]},transition:{duration:1,repeat:1/0},children:O.jsx(CW,{size:16,style:{color:"#00d4ff"}})}),O.jsx("span",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:13,fontWeight:600,color:"#00d4ff"},children:i.pendingInteraction.hint})]})})}),O.jsxs("div",{style:{padding:"12px 16px",borderTop:"1px solid rgba(0, 255, 136, 0.2)",background:"rgba(0, 0, 0, 0.3)"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:8,marginBottom:12},children:[O.jsx(xb,{icon:JW,label:"PREV",onClick:o,disabled:i.currentStepIndex===0,tooltip:"Previous step"}),O.jsx(xb,{icon:C?IW:e0,label:C?"PAUSE":"PLAY",onClick:C?c:f,primary:!0,disabled:E,tooltip:C?"Pause":"Play"}),O.jsx(xb,{icon:nq,label:"SKIP",onClick:s,disabled:E,tooltip:"Next step"})]}),O.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[O.jsxs("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:10,color:"#6e7681"},children:["Step ",i.currentStepIndex+1," of ",t]}),O.jsxs("button",{onClick:d,style:{display:"flex",alignItems:"center",gap:6,padding:"4px 10px",background:i.presenterMode?"rgba(0, 255, 136, 0.15)":"transparent",border:`1px solid ${i.presenterMode?"rgba(0, 255, 136, 0.4)":"rgba(110, 118, 129, 0.3)"}`,borderRadius:4,color:i.presenterMode?"#00ff88":"#6e7681",cursor:"pointer",fontFamily:"'Rajdhani', sans-serif",fontSize:10,fontWeight:600,textTransform:"uppercase",letterSpacing:.5},children:[O.jsx(yO,{size:10}),"Presenter Mode"]})]}),O.jsx("div",{style:{marginTop:10,paddingTop:10,borderTop:"1px solid rgba(110, 118, 129, 0.2)"},children:O.jsx("button",{onClick:R,style:{display:"flex",alignItems:"center",justifyContent:"center",gap:6,width:"100%",padding:"6px 10px",background:b?"rgba(255, 170, 0, 0.15)":"transparent",border:`1px solid ${b?"rgba(255, 170, 0, 0.4)":"rgba(110, 118, 129, 0.2)"}`,borderRadius:4,color:b?"#ffaa00":"#6e7681",cursor:"pointer",fontFamily:"'Rajdhani', sans-serif",fontSize:10,fontWeight:500},children:b?O.jsxs(O.Fragment,{children:[O.jsx(nm,{size:12}),"Using Browser Audio (Click to use AI Voices)"]}):O.jsxs(O.Fragment,{children:[O.jsx(rM,{size:12}),"Audio not working? Click here for fallback"]})})})]})]})})}function xb({icon:i,label:e,onClick:t,disabled:n,primary:a,tooltip:s}){return O.jsxs("button",{onClick:t,disabled:n,title:s,style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:2,padding:a?"8px 16px":"6px 12px",background:a?"rgba(0, 255, 136, 0.2)":"transparent",border:`1px solid ${a?"rgba(0, 255, 136, 0.5)":"rgba(0, 255, 136, 0.2)"}`,borderRadius:6,color:n?"#3d4450":a?"#00ff88":"#8b949e",cursor:n?"not-allowed":"pointer",transition:"all 0.2s ease"},children:[O.jsx(i,{size:a?18:14}),O.jsx("span",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:9,fontWeight:600,letterSpacing:.5},children:e})]})}const cX={"alert-triangle":hm,cloud:zg,shield:_O,navigation:b2,"arrow-right-left":xj,siren:eq,zap:oM,"book-open":Cj,flame:uO},uX=["showcase-demo"];function fX(){const{state:i,scenarios:e,closeDemo:t,startScenario:n,startTour:a}=Kf(),{setLiveOnly:s}=Hs();if(!i.isActive||i.mode!=="menu")return null;const o=()=>{s(!0),t()},c=e.filter(f=>!uX.includes(f.id));return O.jsx(ls,{children:O.jsx(Qt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.85)",backdropFilter:"blur(8px)",zIndex:9900,display:"flex",alignItems:"center",justifyContent:"center",padding:20},onClick:t,children:O.jsxs(Qt.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:"spring",stiffness:300,damping:25},onClick:f=>f.stopPropagation(),style:{width:"100%",maxWidth:900,maxHeight:"90vh",overflowY:"auto",background:"rgba(13, 17, 23, 0.98)",border:"1px solid rgba(0, 255, 136, 0.3)",borderRadius:16,boxShadow:"0 24px 80px rgba(0, 0, 0, 0.5), 0 0 40px rgba(0, 255, 136, 0.1)"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"20px 24px",borderBottom:"1px solid rgba(0, 255, 136, 0.2)",background:"linear-gradient(90deg, rgba(0, 255, 136, 0.1), transparent)"},children:[O.jsxs("div",{children:[O.jsx("h2",{style:{fontFamily:"'Orbitron', monospace",fontSize:22,fontWeight:700,color:"#00ff88",margin:0,letterSpacing:2},children:"ATCS-NG DEMO CENTER"}),O.jsx("p",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:13,color:"#8b949e",margin:"4px 0 0"},children:"Experience ATCS-NG capabilities through guided demonstrations"})]}),O.jsx("button",{onClick:t,style:{display:"flex",alignItems:"center",justifyContent:"center",width:36,height:36,background:"transparent",border:"1px solid rgba(255, 51, 102, 0.3)",borderRadius:8,color:"#ff3366",cursor:"pointer"},children:O.jsx(dm,{size:18})})]}),O.jsx("div",{style:{display:"flex",gap:16,padding:"20px 24px 0"},children:O.jsxs(Qt.button,{whileHover:{scale:1.02,borderColor:"rgba(0, 212, 255, 0.6)"},whileTap:{scale:.98},onClick:o,style:{flex:1,display:"flex",alignItems:"center",gap:16,padding:20,background:"linear-gradient(135deg, rgba(0, 212, 255, 0.15), rgba(0, 136, 255, 0.15))",border:"2px solid rgba(0, 212, 255, 0.4)",borderRadius:12,cursor:"pointer",textAlign:"left"},children:[O.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:56,height:56,background:"rgba(0, 212, 255, 0.2)",borderRadius:12,flexShrink:0},children:O.jsx(_d,{size:28,style:{color:"#00d4ff"}})}),O.jsxs("div",{style:{flex:1},children:[O.jsx("div",{style:{fontFamily:"'Orbitron', monospace",fontSize:16,fontWeight:700,color:"#00d4ff",letterSpacing:1},children:"LIVE MODE"}),O.jsx("div",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:13,color:"#8b949e",marginTop:4},children:"Real-time data from live sensors"})]}),O.jsx(e0,{size:24,style:{color:"#00d4ff"}})]})}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,padding:"20px 24px 12px"},children:[O.jsx("div",{style:{flex:1,height:1,background:"rgba(0, 255, 136, 0.15)"}}),O.jsx("span",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:11,color:"#6e7681",textTransform:"uppercase",letterSpacing:2},children:"Demo Mode"}),O.jsx("div",{style:{flex:1,height:1,background:"rgba(0, 255, 136, 0.15)"}})]}),O.jsx("div",{style:{padding:"0 24px"},children:O.jsxs(Qt.button,{whileHover:{scale:1.02,boxShadow:"0 0 40px rgba(255, 51, 102, 0.3)"},whileTap:{scale:.98},onClick:()=>n("showcase-demo"),style:{width:"100%",display:"flex",alignItems:"center",gap:24,padding:24,background:"linear-gradient(135deg, rgba(255, 51, 102, 0.2), rgba(255, 170, 0, 0.15))",border:"2px solid rgba(255, 51, 102, 0.5)",borderRadius:16,cursor:"pointer",textAlign:"left",position:"relative",overflow:"hidden"},children:[O.jsx(Qt.div,{animate:{x:[0,5,0],rotate:[0,2,0]},transition:{duration:2,repeat:1/0},style:{display:"flex",alignItems:"center",justifyContent:"center",width:72,height:72,background:"linear-gradient(135deg, rgba(255, 51, 102, 0.3), rgba(255, 170, 0, 0.3))",borderRadius:16,flexShrink:0},children:O.jsx(mO,{size:40,style:{color:"#ff3366"}})}),O.jsxs("div",{style:{flex:1},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[O.jsx("h3",{style:{fontFamily:"'Orbitron', monospace",fontSize:22,fontWeight:700,color:"#ff3366",margin:0,letterSpacing:2},children:"CRISIS SHOWCASE"}),O.jsx(Qt.span,{animate:{opacity:[1,.5,1]},transition:{duration:1,repeat:1/0},style:{padding:"4px 10px",background:"rgba(255, 51, 102, 0.3)",borderRadius:4,fontFamily:"'Orbitron', monospace",fontSize:10,color:"#ff3366",fontWeight:600,letterSpacing:1},children:"RECOMMENDED"})]}),O.jsx("p",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:15,color:"#c9d1d9",margin:"8px 0 0",lineHeight:1.5},children:"Experience dramatic aviation crises: Air India hijacking, Qantas hero rescue, stealth incursion, near mid-air collision, and severe weather. Multi-accent voices with radio effects."}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,marginTop:12},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[O.jsx(M0,{size:14,style:{color:"#ffaa00"}}),O.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:12,color:"#ffaa00",fontWeight:600},children:"~5 min"})]}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[O.jsx(uO,{size:14,style:{color:"#ff3366"}}),O.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:12,color:"#ff3366",fontWeight:600},children:"Hero Mode Interactive"})]})]})]}),O.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:56,height:56,background:"rgba(255, 51, 102, 0.3)",borderRadius:28,flexShrink:0},children:O.jsx(e0,{size:28,style:{color:"#ff3366",marginLeft:4}})})]})}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,padding:"24px 24px 12px"},children:[O.jsx("div",{style:{flex:1,height:1,background:"rgba(0, 255, 136, 0.15)"}}),O.jsx("span",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:11,color:"#6e7681",textTransform:"uppercase",letterSpacing:2},children:"Scenario Library"}),O.jsx("div",{style:{flex:1,height:1,background:"rgba(0, 255, 136, 0.15)"}})]}),O.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12,padding:"0 24px 16px"},children:c.map(f=>O.jsx(hX,{scenario:f,onClick:()=>n(f.id)},f.id))}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,padding:"8px 24px 12px"},children:[O.jsx("div",{style:{flex:1,height:1,background:"rgba(0, 255, 136, 0.15)"}}),O.jsx("span",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:11,color:"#6e7681",textTransform:"uppercase",letterSpacing:2},children:"Complete Experience"}),O.jsx("div",{style:{flex:1,height:1,background:"rgba(0, 255, 136, 0.15)"}})]}),O.jsx("div",{style:{padding:"0 24px 24px"},children:O.jsxs(Qt.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:a,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:12,padding:"16px 24px",background:"linear-gradient(135deg, rgba(0, 255, 136, 0.15), rgba(0, 212, 255, 0.15))",border:"1px solid rgba(0, 255, 136, 0.3)",borderRadius:12,cursor:"pointer"},children:[O.jsx(e0,{size:22,style:{color:"#00ff88"}}),O.jsxs("div",{style:{textAlign:"left"},children:[O.jsx("div",{style:{fontFamily:"'Orbitron', monospace",fontSize:13,fontWeight:600,color:"#00ff88",letterSpacing:1},children:"FULL TOUR"}),O.jsx("div",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:11,color:"#8b949e",marginTop:2},children:"All 6 scenarios in sequence"})]}),O.jsx("div",{style:{flex:1}}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:"#6e7681"},children:[O.jsx(M0,{size:14}),O.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:"~10 min"})]})]})})]})})})}function hX({scenario:i,onClick:e}){const t=cX[i.icon]||hm;return O.jsxs(Qt.button,{whileHover:{scale:1.02,borderColor:"rgba(0, 255, 136, 0.5)"},whileTap:{scale:.98},onClick:e,style:{display:"flex",alignItems:"flex-start",gap:10,padding:14,background:"rgba(21, 27, 35, 0.8)",border:"1px solid rgba(0, 255, 136, 0.15)",borderRadius:10,cursor:"pointer",textAlign:"left",transition:"border-color 0.2s ease"},children:[O.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:36,height:36,background:"rgba(0, 255, 136, 0.1)",borderRadius:8,flexShrink:0},children:O.jsx(t,{size:18,style:{color:"#00ff88"}})}),O.jsxs("div",{style:{flex:1,minWidth:0},children:[O.jsx("h4",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:13,fontWeight:600,color:"#e6edf3",margin:0,marginBottom:3},children:i.title}),O.jsx("p",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:11,color:"#6e7681",margin:0,lineHeight:1.3,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:i.description}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,marginTop:6,color:"#6e7681"},children:[O.jsx(M0,{size:10}),O.jsxs("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:9},children:["~",i.duration," min"]})]})]})]})}function dX({command:i,onComplete:e}){const[t,n]=ue.useState(""),[a,s]=ue.useState(!1),[o,c]=ue.useState(!1),f=ue.useRef(null),d=ue.useRef(null);return ue.useEffect(()=>{if(!i||i===f.current)return;f.current=i,n(""),s(!0),c(!1),d.current&&clearInterval(d.current);let g=0;const y=40;return d.current=window.setInterval(()=>{g<i.length?(n(i.substring(0,g+1)),g++):(d.current&&(clearInterval(d.current),d.current=null),s(!1),c(!0),zr.speakATC(i,()=>{c(!1),e?.()}))},y),()=>{d.current&&clearInterval(d.current)}},[i,e]),i?O.jsx(ls,{children:O.jsxs(Qt.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},transition:{type:"spring",stiffness:300,damping:25},style:{position:"fixed",bottom:80,left:"50%",transform:"translateX(-50%)",background:"linear-gradient(135deg, rgba(0, 100, 50, 0.95), rgba(0, 60, 30, 0.98))",border:"2px solid rgba(0, 255, 136, 0.6)",borderRadius:16,padding:"16px 24px",minWidth:400,maxWidth:700,zIndex:9600,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5), 0 0 40px rgba(0, 255, 136, 0.2), inset 0 1px 0 rgba(255,255,255,0.1)"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:12},children:[O.jsx(Qt.div,{animate:o?{scale:[1,1.2,1]}:{},transition:{duration:.5,repeat:o?1/0:0},style:{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,background:"rgba(0, 255, 136, 0.2)",borderRadius:"50%",border:"2px solid rgba(0, 255, 136, 0.5)"},children:o?O.jsx(hO,{size:16,style:{color:"#00ff88"}}):O.jsx(_d,{size:16,style:{color:"#00ff88"}})}),O.jsx("div",{style:{fontFamily:"'Orbitron', monospace",fontSize:14,fontWeight:700,color:"#00ff88",letterSpacing:3,textTransform:"uppercase",textShadow:"0 0 10px rgba(0, 255, 136, 0.5)"},children:"YOU (ATC)"}),O.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:6},children:[a&&O.jsx(Qt.div,{animate:{opacity:[.5,1,.5]},transition:{duration:.8,repeat:1/0},style:{fontFamily:"'JetBrains Mono', monospace",fontSize:10,color:"#ffaa00",textTransform:"uppercase"},children:"TYPING..."}),o&&O.jsx(Qt.div,{animate:{opacity:[.5,1,.5]},transition:{duration:.5,repeat:1/0},style:{fontFamily:"'JetBrains Mono', monospace",fontSize:10,color:"#00d4ff",textTransform:"uppercase"},children:"TRANSMITTING"})]})]}),O.jsxs("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:18,fontWeight:500,color:"#ffffff",lineHeight:1.5,letterSpacing:.5,textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:[t,a&&O.jsx(Qt.span,{animate:{opacity:[1,0,1]},transition:{duration:.5,repeat:1/0},style:{color:"#00ff88"},children:""})]}),o&&O.jsx(Qt.div,{animate:{opacity:[.02,.05,.02]},transition:{duration:.1,repeat:1/0},style:{position:"absolute",inset:0,background:`url("data:image/svg+xml,%3Csvg viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100' height='100' filter='url(%23noise)' opacity='0.5'/%3E%3C/svg%3E")`,pointerEvents:"none",borderRadius:16}})]})}):null}const pX={CRITICAL:{icon:hm,color:"#ff3366",bgColor:"rgba(255, 51, 102, 0.15)",borderColor:"rgba(255, 51, 102, 0.5)",label:"CRIT"},WARNING:{icon:cO,color:"#ffaa00",bgColor:"rgba(255, 170, 0, 0.1)",borderColor:"rgba(255, 170, 0, 0.4)",label:"WARN"},INFO:{icon:fO,color:"#00d4ff",bgColor:"rgba(0, 212, 255, 0.1)",borderColor:"rgba(0, 212, 255, 0.3)",label:"INFO"}};function mX(i){const e=new Date(i),n=new Date().getTime()-e.getTime(),a=Math.floor(n/1e3);return a<60?`${a}s ago`:a<3600?`${Math.floor(a/60)}m ago`:e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}function gX({alert:i,onAcknowledge:e,onSelectFlight:t}){const n=pX[i.severity],a=n.icon;return O.jsxs(Qt.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1,...i.severity==="CRITICAL"&&!i.acknowledged?{boxShadow:["0 0 5px rgba(255, 51, 102, 0.3)","0 0 15px rgba(255, 51, 102, 0.5)","0 0 5px rgba(255, 51, 102, 0.3)"]}:{}},transition:{boxShadow:{repeat:1/0,duration:1}},exit:{opacity:0,scale:.9,x:100},layout:!0,style:{background:i.acknowledged?"rgba(21, 27, 35, 0.5)":n.bgColor,border:`1px solid ${i.acknowledged?"rgba(110, 118, 129, 0.2)":n.borderColor}`,borderRadius:6,padding:10,marginBottom:6,opacity:i.acknowledged?.6:1,position:"relative",overflow:"hidden"},children:[i.severity==="CRITICAL"&&!i.acknowledged&&O.jsx(Qt.div,{animate:{opacity:[.5,1,.5]},transition:{duration:.5,repeat:1/0},style:{position:"absolute",left:0,top:0,bottom:0,width:3,background:n.color}}),O.jsxs("div",{style:{display:"flex",gap:10},children:[O.jsx("div",{style:{flexShrink:0,display:"flex",alignItems:"flex-start",paddingTop:2},children:O.jsx(a,{size:16,style:{color:i.acknowledged?"#6e7681":n.color}})}),O.jsxs("div",{style:{flex:1,minWidth:0},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:4},children:[O.jsx("span",{style:{fontFamily:"'Orbitron', monospace",fontSize:9,fontWeight:600,padding:"2px 6px",borderRadius:3,background:i.acknowledged?"rgba(110, 118, 129, 0.2)":n.bgColor,color:i.acknowledged?"#6e7681":n.color,border:`1px solid ${i.acknowledged?"rgba(110, 118, 129, 0.3)":n.borderColor}`},children:n.label}),O.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:10,color:"#6e7681"},children:mX(i.timestamp)}),i.acknowledged&&O.jsx(Hw,{size:12,style:{color:"#00ff88",marginLeft:"auto"}})]}),O.jsx("p",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:12,color:i.acknowledged?"#8b949e":"#e6edf3",margin:0,lineHeight:1.4},children:i.message}),i.involvedFlightIds.length>0&&O.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:4,marginTop:6},children:i.involvedFlightIds.map(s=>O.jsx("button",{onClick:()=>t?.(s),style:{fontFamily:"'JetBrains Mono', monospace",fontSize:10,padding:"2px 6px",borderRadius:3,background:"rgba(0, 255, 136, 0.1)",border:"1px solid rgba(0, 255, 136, 0.3)",color:"#00ff88",cursor:"pointer"},children:s},s))})]}),!i.acknowledged&&O.jsxs("button",{onClick:e,style:{flexShrink:0,background:"transparent",border:`1px solid ${n.borderColor}`,borderRadius:4,padding:"4px 8px",color:n.color,cursor:"pointer",fontFamily:"'Rajdhani', sans-serif",fontSize:10,fontWeight:600,textTransform:"uppercase",display:"flex",alignItems:"center",gap:4},children:[O.jsx(Hw,{size:12}),"ACK"]})]})]})}function vX({alerts:i,onAcknowledge:e,onSelectFlight:t}){const[n,a]=ue.useState(!0),[s,o]=ue.useState(!1),[c,f]=ue.useState(!0),d=ue.useRef(new Set),{state:g}=Kf(),y=i.filter(M=>!M.acknowledged),x=i.filter(M=>M.severity==="CRITICAL"&&!M.acknowledged).length,b=c?i:y;return ue.useEffect(()=>{if(s)return;const M=new Set(i.map(C=>C.alertId)),R=i.filter(C=>!d.current.has(C.alertId));if(R.length>0&&d.current.size>0){const C=R.find(z=>z.severity==="CRITICAL"),E=R.find(z=>z.severity==="WARNING"),N=C||E||R[0];C?Ou.play("critical"):E?Ou.play("warning"):Ou.play("alert");const I=g.isActive&&g.mode==="playing";N&&!I&&zc.speakAlert(N.severity,N.message)}d.current=M},[i,s,g.isActive,g.mode]),ue.useEffect(()=>{Ou.setMuted(s),zc.setEnabled(!s)},[s]),O.jsxs("div",{className:"alert-panel panel",style:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:[O.jsxs("div",{className:"panel-header",style:{flexShrink:0,position:"relative"},children:[x>0&&O.jsx(Qt.div,{animate:{opacity:[0,.3,0]},transition:{duration:1,repeat:1/0},style:{position:"absolute",inset:0,background:"linear-gradient(90deg, rgba(255, 51, 102, 0.2), transparent)",pointerEvents:"none"}}),O.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8,flex:1},children:[O.jsx(aM,{size:14}),"ALERTS",y.length>0&&O.jsx(Qt.span,{initial:{scale:0},animate:{scale:1},style:{fontFamily:"'JetBrains Mono', monospace",fontSize:10,padding:"2px 6px",borderRadius:10,background:x>0?"#ff3366":"#ffaa00",color:x>0?"#fff":"#000",fontWeight:600},children:y.length})]}),O.jsx("button",{onClick:()=>f(!c),style:{background:"transparent",border:"none",color:c?"#00ff88":"#6e7681",cursor:"pointer",padding:4,fontSize:9,fontFamily:"'Rajdhani', sans-serif"},children:c?"ALL":"ACTIVE"}),O.jsx("button",{onClick:()=>o(!s),style:{background:"transparent",border:"none",color:s?"#ff3366":"#8b949e",cursor:"pointer",padding:4},children:s?O.jsx(rM,{size:14}):O.jsx(nm,{size:14})}),O.jsx("button",{onClick:()=>a(!n),style:{background:"transparent",border:"none",color:"#8b949e",cursor:"pointer",padding:4},children:n?O.jsx(sx,{size:14}):O.jsx(H0,{size:14})})]}),O.jsx(ls,{children:n&&O.jsxs(Qt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},style:{flex:1,overflowY:"auto",overflowX:"hidden",padding:8},children:[O.jsx(ls,{mode:"popLayout",children:b.map(M=>O.jsx(gX,{alert:M,onAcknowledge:()=>e(M.alertId),onSelectFlight:t},M.alertId))}),b.length===0&&O.jsx("div",{style:{textAlign:"center",padding:20,color:"#6e7681",fontFamily:"'Rajdhani', sans-serif",fontSize:12},children:"No active alerts"})]})})]})}function yX(i){return i>=.8?"#ff3366":i>=.6?"#ffaa00":i>=.4?"#00d4ff":"#00ff88"}function _X(i){const e=new Date(i).getTime()-Date.now();if(e<0)return"NOW";const t=Math.floor(e/6e4),n=Math.floor(e%6e4/1e3);return t>0?`${t}:${n.toString().padStart(2,"0")}`:`${n}s`}function xX({prediction:i,onSelectFlight:e}){const t=yX(i.probability),n=Math.round(i.probability*100);return O.jsxs(Qt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},style:{background:"rgba(21, 27, 35, 0.8)",border:"1px solid rgba(0, 255, 136, 0.15)",borderRadius:6,padding:10,marginBottom:6,position:"relative",overflow:"hidden"},children:[O.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:3,background:t}}),O.jsxs("div",{style:{display:"flex",gap:10},children:[O.jsx("div",{style:{flexShrink:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:50},children:O.jsxs("div",{style:{position:"relative",width:44,height:44},children:[O.jsxs("svg",{width:"44",height:"44",style:{position:"absolute"},children:[O.jsx("circle",{cx:"22",cy:"22",r:"18",fill:"none",stroke:"rgba(0, 255, 136, 0.1)",strokeWidth:"4"}),O.jsx("circle",{cx:"22",cy:"22",r:"18",fill:"none",stroke:t,strokeWidth:"4",strokeDasharray:`${2*Math.PI*18*i.probability} ${2*Math.PI*18}`,strokeLinecap:"round",transform:"rotate(-90 22 22)",style:{filter:`drop-shadow(0 0 4px ${t})`}})]}),O.jsxs("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"'JetBrains Mono', monospace",fontSize:12,fontWeight:600,color:t},children:[n,"%"]})]})}),O.jsxs("div",{style:{flex:1,minWidth:0},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:4},children:[O.jsx(oM,{size:12,style:{color:t}}),O.jsx("span",{style:{fontFamily:"'Orbitron', monospace",fontSize:10,fontWeight:600,color:t,textTransform:"uppercase"},children:i.predictionType}),O.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:4},children:[O.jsx(M0,{size:10,style:{color:"#6e7681"}}),O.jsxs("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:10,color:i.probability>=.8?"#ff3366":"#8b949e",fontWeight:i.probability>=.8?600:400},children:["T-",_X(i.predictedTime)]})]})]}),O.jsx("p",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:11,color:"#e6edf3",margin:0,lineHeight:1.3},children:i.description}),i.involvedFlights.length>0&&O.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:4,marginTop:6},children:i.involvedFlights.map(a=>O.jsx("button",{onClick:()=>e?.(a),style:{fontFamily:"'JetBrains Mono', monospace",fontSize:9,padding:"2px 6px",borderRadius:3,background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",color:"#00d4ff",cursor:"pointer"},children:a},a))})]})]})]})}function SX({predictions:i,onSelectFlight:e}){const[t,n]=ue.useState(!0),a=[...i].sort((o,c)=>c.probability-o.probability),s=i.filter(o=>o.probability>=.7).length;return O.jsxs("div",{className:"prediction-panel panel",style:{display:"flex",flexDirection:"column",overflow:"hidden"},children:[O.jsxs("div",{className:"panel-header",style:{flexShrink:0},children:[O.jsxs("span",{style:{display:"flex",alignItems:"center",gap:8,flex:1},children:[O.jsx(Dj,{size:14}),"AI PREDICTIONS",s>0&&O.jsx(Qt.span,{animate:{scale:[1,1.1,1]},transition:{duration:1,repeat:1/0},style:{fontFamily:"'JetBrains Mono', monospace",fontSize:10,padding:"2px 6px",borderRadius:10,background:"#ffaa00",color:"#000",fontWeight:600},children:s})]}),O.jsx(uq,{size:14,style:{color:"#8b949e"}}),O.jsx("button",{onClick:()=>n(!t),style:{background:"transparent",border:"none",color:"#8b949e",cursor:"pointer",padding:4},children:t?O.jsx(sx,{size:14}):O.jsx(H0,{size:14})})]}),O.jsx(ls,{children:t&&O.jsxs(Qt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},style:{flex:1,overflowY:"auto",overflowX:"hidden",padding:8},children:[O.jsx(ls,{mode:"popLayout",children:a.map(o=>O.jsx(xX,{prediction:o,onSelectFlight:e},o.id))}),i.length===0&&O.jsx("div",{style:{textAlign:"center",padding:20,color:"#6e7681",fontFamily:"'Rajdhani', sans-serif",fontSize:12},children:"No active predictions"})]})})]})}function bX(i){return i>=18e3?`FL${Math.round(i/100).toString().padStart(3,"0")}`:`${Math.round(i/100)*100} ft`}function TX(i){return Math.abs(i)<100?{icon:dO,color:"#8b949e",text:"Level"}:i>0?{icon:ax,color:"#00ff88",text:`+${i} fpm`}:{icon:ix,color:"#ffaa00",text:`${i} fpm`}}function MX(i,e){const t=i>=0?"N":"S",n=e>=0?"E":"W",a=Math.abs(i).toFixed(4),s=Math.abs(e).toFixed(4);return`${a}${t} ${s}${n}`}function AX({track:i,flight:e,onClose:t,onSendMessage:n}){if(!i)return null;const a=TX(i.verticalRateFpm),s=a.icon,o=c1(i.callsign),c=i.aircraftType?w2[i.aircraftType]:null,f=i.aircraftType?bO(i.aircraftType):"narrow",d=c?.category==="military",g=c?.typicalSeats?Math.round(c.typicalSeats*.85)+6:null,{trackedFlightId:y,setTrackedFlightId:x}=Hs(),b=y===i.trackId;return O.jsx(ls,{children:i&&O.jsxs(Qt.div,{initial:{opacity:0,x:20,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:20,scale:.95},transition:{duration:.2},style:{position:"absolute",top:20,left:20,width:320,background:"rgba(13, 17, 23, 0.95)",border:"1px solid rgba(0, 212, 255, 0.5)",borderRadius:8,overflow:"hidden",zIndex:1e3,backdropFilter:"blur(10px)",boxShadow:"0 4px 24px rgba(0, 0, 0, 0.5), 0 0 20px rgba(0, 212, 255, 0.1)"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",background:o?`linear-gradient(90deg, ${o.color}30, transparent)`:"linear-gradient(90deg, rgba(0, 212, 255, 0.15), transparent)",borderBottom:`1px solid ${o?.color||"rgba(0, 212, 255, 0.3)"}50`},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[o&&O.jsx("span",{style:{fontSize:24,lineHeight:1},children:o.countryFlag}),O.jsx(SO,{size:f,color:o?.color||"#00d4ff",width:28,isMilitary:d}),O.jsxs("div",{children:[O.jsx("h3",{style:{fontFamily:"'Orbitron', monospace",fontSize:16,fontWeight:700,color:o?.color||"#00d4ff",margin:0,letterSpacing:2},children:i.callsign}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginTop:2},children:[o&&O.jsx("span",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:11,fontWeight:600,color:o.color},children:o.name}),c&&O.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:10,color:"#8b949e"},children:c.name})]})]})]}),O.jsx("button",{onClick:t,style:{display:"flex",alignItems:"center",justifyContent:"center",width:28,height:28,background:"transparent",border:"1px solid rgba(0, 212, 255, 0.3)",borderRadius:4,color:"#8b949e",cursor:"pointer"},children:O.jsx(dm,{size:14})})]}),(o||g)&&O.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 16px",background:"rgba(0, 0, 0, 0.3)",borderBottom:"1px solid rgba(0, 255, 136, 0.1)"},children:[o&&O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[O.jsx(Oj,{size:12,style:{color:"#6e7681"}}),O.jsx("span",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:11,color:"#8b949e"},children:o.country}),O.jsx("span",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:10,color:"#6e7681",background:"rgba(110, 118, 129, 0.2)",padding:"1px 6px",borderRadius:3},children:d?"MILITARY":c?.category?.toUpperCase()||"COMMERCIAL"})]}),g&&O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[O.jsx(xO,{size:12,style:{color:"#ffaa00"}}),O.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:12,fontWeight:600,color:"#ffaa00"},children:g}),O.jsx("span",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:10,color:"#6e7681"},children:"SOB"})]})]}),O.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:1,padding:1,background:"rgba(0, 255, 136, 0.1)"},children:[O.jsx(Vy,{icon:sM,label:"ALTITUDE",value:bX(i.altitudeFt),color:"#00ff88"}),O.jsx(Vy,{icon:b2,label:"SPEED",value:`${i.speedKt} KT`,color:"#00d4ff"}),O.jsx(Vy,{icon:b2,label:"HEADING",value:`${Math.round(i.headingDeg).toString().padStart(3,"0")}`,color:"#00d4ff"}),O.jsx(Vy,{icon:s,label:"V/S",value:a.text,color:a.color})]}),O.jsxs("div",{style:{padding:"12px 16px",borderTop:"1px solid rgba(0, 255, 136, 0.1)"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:6},children:[O.jsx(_W,{size:12,style:{color:"#6e7681"}}),O.jsx("span",{style:{fontFamily:"'Orbitron', monospace",fontSize:9,color:"#6e7681",letterSpacing:1},children:"POSITION"})]}),O.jsx("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:12,color:"#e6edf3"},children:MX(i.latitudeDeg,i.longitudeDeg)})]}),e&&O.jsxs("div",{style:{padding:"12px 16px",borderTop:"1px solid rgba(0, 255, 136, 0.1)"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[O.jsx(GW,{size:12,style:{color:"#6e7681"}}),O.jsx("span",{style:{fontFamily:"'Orbitron', monospace",fontSize:9,color:"#6e7681",letterSpacing:1},children:"ROUTE"})]}),O.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[O.jsx("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:14,fontWeight:600,color:"#00ff88"},children:e.departureAirport}),O.jsx("div",{style:{flex:1,height:2,margin:"0 12px",background:"linear-gradient(90deg, #00ff88, #00d4ff)",borderRadius:1}}),O.jsx("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:14,fontWeight:600,color:"#00d4ff"},children:e.arrivalAirport})]})]}),O.jsxs("div",{style:{display:"flex",gap:8,padding:"12px 16px",borderTop:"1px solid rgba(0, 255, 136, 0.1)"},children:[O.jsxs("button",{onClick:()=>n?.(i.callsign),style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:6,padding:"8px 12px",background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",borderRadius:4,color:"#00d4ff",fontFamily:"'Rajdhani', sans-serif",fontSize:11,fontWeight:600,textTransform:"uppercase",cursor:"pointer",letterSpacing:1},children:[O.jsx(vO,{size:12}),"MESSAGE"]}),O.jsxs("button",{onClick:()=>x(b?null:i.trackId),style:{display:"flex",alignItems:"center",justifyContent:"center",gap:6,padding:"8px 12px",background:b?"rgba(0, 255, 136, 0.2)":"transparent",border:`1px solid ${b?"rgba(0, 255, 136, 0.6)":"rgba(0, 255, 136, 0.3)"}`,borderRadius:4,color:"#00ff88",fontFamily:"'Rajdhani', sans-serif",fontSize:11,fontWeight:600,textTransform:"uppercase",cursor:"pointer",letterSpacing:1},children:[O.jsx(_d,{size:12}),b?"TRACKING":"TRACK"]})]}),O.jsxs("div",{style:{padding:"8px 16px",background:"rgba(0, 0, 0, 0.3)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[O.jsx("span",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:10,color:"#6e7681"},children:"TRACK CONFIDENCE"}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[O.jsx("div",{style:{width:60,height:4,background:"rgba(0, 255, 136, 0.2)",borderRadius:2,overflow:"hidden"},children:O.jsx("div",{style:{width:`${i.confidence*100}%`,height:"100%",background:i.confidence>.9?"#00ff88":i.confidence>.7?"#ffaa00":"#ff3366",borderRadius:2}})}),O.jsxs("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:10,color:i.confidence>.9?"#00ff88":i.confidence>.7?"#ffaa00":"#ff3366"},children:[Math.round(i.confidence*100),"%"]})]})]})]})})}function Vy({icon:i,label:e,value:t,color:n}){return O.jsxs("div",{style:{padding:"10px 14px",background:"rgba(13, 17, 23, 0.95)"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:4},children:[O.jsx(i,{size:10,style:{color:"#6e7681"}}),O.jsx("span",{style:{fontFamily:"'Orbitron', monospace",fontSize:8,color:"#6e7681",letterSpacing:1},children:e})]}),O.jsx("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:14,fontWeight:600,color:n,textShadow:`0 0 8px ${n}40`},children:t})]})}function EX({isOpen:i,onClose:e}){const[t,n]=ue.useState(Ou.getVolume()*100),[a,s]=ue.useState(Ou.isMuted()),[o,c]=ue.useState(!0),[f,d]=ue.useState("default"),[g,y]=ue.useState(!0),[x,b]=ue.useState(!1),M=E=>{n(E),Ou.setVolume(E/100)},R=()=>{const E=!a;s(E),Ou.setMuted(E)},C=()=>{Ou.play("alert")};return i?O.jsx(ls,{children:O.jsx(Qt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},children:O.jsxs(Qt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:E=>E.stopPropagation(),style:{width:480,maxHeight:"80vh",background:"rgba(13, 17, 23, 0.98)",border:"1px solid rgba(0, 255, 136, 0.3)",borderRadius:12,overflow:"hidden"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:16,borderBottom:"1px solid rgba(0, 255, 136, 0.2)",background:"linear-gradient(90deg, rgba(0, 255, 136, 0.1), transparent)"},children:[O.jsx("h2",{style:{fontFamily:"'Orbitron', monospace",fontSize:16,fontWeight:600,color:"#00ff88",margin:0,letterSpacing:2},children:"SETTINGS"}),O.jsx("button",{onClick:e,style:{background:"transparent",border:"1px solid rgba(255, 51, 102, 0.3)",borderRadius:4,padding:8,color:"#ff3366",cursor:"pointer",display:"flex"},children:O.jsx(dm,{size:16})})]}),O.jsxs("div",{style:{padding:20,overflowY:"auto"},children:[O.jsx(Hy,{title:"Audio",icon:nm,children:O.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[O.jsx("button",{onClick:R,style:{background:a?"rgba(255, 51, 102, 0.2)":"rgba(0, 255, 136, 0.2)",border:`1px solid ${a?"rgba(255, 51, 102, 0.5)":"rgba(0, 255, 136, 0.5)"}`,borderRadius:4,padding:8,color:a?"#ff3366":"#00ff88",cursor:"pointer",display:"flex"},children:a?O.jsx(rM,{size:16}):O.jsx(nm,{size:16})}),O.jsx("div",{style:{flex:1},children:O.jsx("input",{type:"range",min:"0",max:"100",value:t,onChange:E=>M(Number(E.target.value)),disabled:a,style:{width:"100%",accentColor:"#00ff88"}})}),O.jsxs("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:12,color:a?"#6e7681":"#e6edf3",width:40,textAlign:"right"},children:[Math.round(t),"%"]})]}),O.jsx("button",{onClick:C,disabled:a,style:{background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",borderRadius:4,padding:"8px 16px",color:a?"#6e7681":"#00d4ff",cursor:a?"not-allowed":"pointer",fontFamily:"'Rajdhani', sans-serif",fontSize:12,fontWeight:600},children:"Test Alert Sound"})]})}),O.jsxs(Hy,{title:"Display",icon:pO,children:[O.jsx(Sb,{label:"Scanline Effect",description:"CRT-style scanline overlay",checked:o,onChange:c}),O.jsx(Sb,{label:"Reduced Motion",description:"Minimize animations",checked:x,onChange:b})]}),O.jsx(Hy,{title:"Alerts",icon:aM,children:O.jsx(Sb,{label:"Alert Sounds",description:"Play sounds for new alerts",checked:g,onChange:y})}),O.jsx(Hy,{title:"Theme",icon:NW,children:O.jsx("div",{style:{display:"flex",gap:8},children:["default","high-contrast","classic"].map(E=>O.jsx("button",{onClick:()=>d(E),style:{flex:1,padding:"10px 16px",background:f===E?"rgba(0, 255, 136, 0.2)":"rgba(30, 35, 42, 0.5)",border:`1px solid ${f===E?"rgba(0, 255, 136, 0.5)":"rgba(110, 118, 129, 0.3)"}`,borderRadius:4,color:f===E?"#00ff88":"#8b949e",cursor:"pointer",fontFamily:"'Rajdhani', sans-serif",fontSize:11,fontWeight:600,textTransform:"capitalize"},children:E.replace("-"," ")},E))})})]}),O.jsx("div",{style:{padding:16,borderTop:"1px solid rgba(0, 255, 136, 0.2)",display:"flex",justifyContent:"flex-end",gap:12},children:O.jsx("button",{onClick:e,style:{background:"rgba(0, 255, 136, 0.2)",border:"1px solid rgba(0, 255, 136, 0.5)",borderRadius:6,padding:"10px 24px",color:"#00ff88",cursor:"pointer",fontFamily:"'Orbitron', monospace",fontSize:11,fontWeight:600,letterSpacing:1},children:"DONE"})})]})})}):null}function Hy({title:i,icon:e,children:t}){return O.jsxs("div",{style:{marginBottom:24},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[O.jsx(e,{size:14,style:{color:"#00d4ff"}}),O.jsx("h3",{style:{fontFamily:"'Orbitron', monospace",fontSize:11,fontWeight:600,color:"#00d4ff",margin:0,letterSpacing:1,textTransform:"uppercase"},children:i})]}),O.jsx("div",{style:{background:"rgba(30, 35, 42, 0.5)",border:"1px solid rgba(0, 255, 136, 0.1)",borderRadius:6,padding:16},children:t})]})}function Sb({label:i,description:e,checked:t,onChange:n}){return O.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 0"},children:[O.jsxs("div",{children:[O.jsx("div",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:14,fontWeight:600,color:"#e6edf3"},children:i}),O.jsx("div",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:11,color:"#6e7681"},children:e})]}),O.jsx("button",{onClick:()=>n(!t),style:{width:44,height:24,borderRadius:12,border:"none",background:t?"#00ff88":"rgba(110, 118, 129, 0.4)",cursor:"pointer",position:"relative",transition:"background 0.2s ease"},children:O.jsx("div",{style:{position:"absolute",top:2,left:t?22:2,width:20,height:20,borderRadius:"50%",background:"#fff",transition:"left 0.2s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.3)"}})})]})}function wX({isOpen:i,onClose:e}){return i?O.jsx(ls,{children:O.jsx(Qt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},children:O.jsxs(Qt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:t=>t.stopPropagation(),style:{width:600,maxHeight:"85vh",background:"rgba(13, 17, 23, 0.98)",border:"1px solid rgba(0, 255, 136, 0.3)",borderRadius:12,overflow:"hidden"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:16,borderBottom:"1px solid rgba(0, 255, 136, 0.2)",background:"linear-gradient(90deg, rgba(0, 255, 136, 0.1), transparent)"},children:[O.jsx("h2",{style:{fontFamily:"'Orbitron', monospace",fontSize:16,fontWeight:600,color:"#00ff88",margin:0,letterSpacing:2},children:"HELP & CONTROLS"}),O.jsx("button",{onClick:e,style:{background:"transparent",border:"1px solid rgba(255, 51, 102, 0.3)",borderRadius:4,padding:8,color:"#ff3366",cursor:"pointer",display:"flex"},children:O.jsx(dm,{size:16})})]}),O.jsxs("div",{style:{padding:20,overflowY:"auto",maxHeight:"calc(85vh - 120px)"},children:[O.jsx(Lp,{title:"Quick Start",icon:oM,children:O.jsx("p",{style:{color:"#e6edf3",lineHeight:1.6,margin:0},children:"ATCS-NG is an AI-powered air traffic control system. Click on any aircraft to see details, acknowledge alerts in the right panel, and use the Demo button to explore system capabilities."})}),O.jsxs(Lp,{title:"Mouse Controls",icon:DW,children:[O.jsx(Uc,{shortcut:"Click aircraft",description:"Select and view flight details"}),O.jsx(Uc,{shortcut:"Click empty space",description:"Deselect current aircraft"}),O.jsx(Uc,{shortcut:"Scroll",description:"Zoom radar in/out"}),O.jsx(Uc,{shortcut:"Drag",description:"Pan radar view"}),O.jsx(Uc,{shortcut:"Click callsign tag",description:"Jump to flight on map"})]}),O.jsxs(Lp,{title:"Keyboard Shortcuts",icon:vW,children:[O.jsx(Uc,{shortcut:"D",description:"Toggle data blocks"}),O.jsx(Uc,{shortcut:"T",description:"Toggle track trails"}),O.jsx(Uc,{shortcut:"Esc",description:"Close modals / Deselect"}),O.jsx(Uc,{shortcut:"F11",description:"Toggle fullscreen"}),O.jsx(Uc,{shortcut:"M",description:"Mute/unmute sounds"})]}),O.jsx(Lp,{title:"Display Elements",icon:pO,children:O.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[O.jsx(Gy,{color:"#00ff88",label:"Aircraft Track",description:"Normal flight"}),O.jsx(Gy,{color:"#00d4ff",label:"Selected Track",description:"Currently selected aircraft"}),O.jsx(Gy,{color:"#ffaa00",label:"Warning",description:"Potential conflict or issue"}),O.jsx(Gy,{color:"#ff3366",label:"Critical",description:"Emergency or immediate action required"})]})}),O.jsxs(Lp,{title:"Alert Types",icon:cO,children:[O.jsx(bb,{severity:"CRITICAL",color:"#ff3366",description:"Immediate action required - emergency, loss of separation, TCAS RA"}),O.jsx(bb,{severity:"WARNING",color:"#ffaa00",description:"Attention needed - predicted conflict, weather hazard, deviation"}),O.jsx(bb,{severity:"INFO",color:"#00d4ff",description:"Informational - handoffs, status updates, advisories"})]}),O.jsxs(Lp,{title:"About ATCS-NG",icon:fO,children:[O.jsx("p",{style:{color:"#8b949e",lineHeight:1.6,margin:0,fontSize:13},children:"ATCS-NG (Next Generation Air Traffic Control System) is a demonstration of AI-powered air traffic management. This system showcases real-time surveillance, predictive conflict detection, and intelligent traffic optimization."}),O.jsx("div",{style:{marginTop:12,padding:12,background:"rgba(0, 255, 136, 0.05)",border:"1px solid rgba(0, 255, 136, 0.2)",borderRadius:6},children:O.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:11,color:"#6e7681"},children:"Version 2.0.0 | Sector: BOS_33"})})]})]}),O.jsx("div",{style:{padding:16,borderTop:"1px solid rgba(0, 255, 136, 0.2)",display:"flex",justifyContent:"flex-end"},children:O.jsx("button",{onClick:e,style:{background:"rgba(0, 255, 136, 0.2)",border:"1px solid rgba(0, 255, 136, 0.5)",borderRadius:6,padding:"10px 24px",color:"#00ff88",cursor:"pointer",fontFamily:"'Orbitron', monospace",fontSize:11,fontWeight:600,letterSpacing:1},children:"CLOSE"})})]})})}):null}function Lp({title:i,icon:e,children:t}){return O.jsxs("div",{style:{marginBottom:24},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[O.jsx(e,{size:14,style:{color:"#00d4ff"}}),O.jsx("h3",{style:{fontFamily:"'Orbitron', monospace",fontSize:11,fontWeight:600,color:"#00d4ff",margin:0,letterSpacing:1,textTransform:"uppercase"},children:i})]}),O.jsx("div",{style:{background:"rgba(30, 35, 42, 0.5)",border:"1px solid rgba(0, 255, 136, 0.1)",borderRadius:6,padding:16},children:t})]})}function Uc({shortcut:i,description:e}){return O.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 0",borderBottom:"1px solid rgba(110, 118, 129, 0.1)"},children:[O.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:11,padding:"4px 8px",background:"rgba(0, 255, 136, 0.1)",border:"1px solid rgba(0, 255, 136, 0.3)",borderRadius:4,color:"#00ff88"},children:i}),O.jsx("span",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:13,color:"#8b949e"},children:e})]})}function Gy({color:i,label:e,description:t}){return O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[O.jsx("div",{style:{width:12,height:12,borderRadius:"50%",background:i,boxShadow:`0 0 8px ${i}`}}),O.jsxs("div",{children:[O.jsx("span",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:13,fontWeight:600,color:"#e6edf3"},children:e}),O.jsxs("span",{style:{color:"#6e7681",fontSize:12},children:["  ",t]})]})]})}function bb({severity:i,color:e,description:t}){return O.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:12,padding:"8px 0",borderBottom:"1px solid rgba(110, 118, 129, 0.1)"},children:[O.jsx("span",{style:{fontFamily:"'Orbitron', monospace",fontSize:9,fontWeight:600,padding:"4px 8px",borderRadius:4,background:`${e}20`,border:`1px solid ${e}50`,color:e,flexShrink:0},children:i}),O.jsx("span",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:12,color:"#8b949e",lineHeight:1.5},children:t})]})}const CX=[{mode:"2d",label:"2D RADAR",icon:""},{mode:"3d",label:"3D VIEW",icon:""}];function RX(){const{viewMode:i,setViewMode:e}=Hs();return O.jsx("div",{style:{display:"flex",gap:4,padding:4,background:"rgba(13, 17, 23, 0.9)",borderRadius:6,border:"1px solid rgba(0, 255, 136, 0.2)"},children:CX.map(({mode:t,label:n,icon:a})=>O.jsxs(Qt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>e(t),style:{padding:"6px 12px",background:i===t?"rgba(0, 255, 136, 0.2)":"transparent",color:i===t?"#00ff88":"#6e7681",border:i===t?"1px solid #00ff88":"1px solid transparent",borderRadius:4,fontFamily:"'Rajdhani', sans-serif",fontSize:11,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:6},children:[O.jsx("span",{style:{fontSize:14},children:a}),n]},t))})}function DX(){const{timeOffsetMinutes:i,setTimeOffset:e,isPlaying:t,togglePlayback:n,playbackSpeed:a,setPlaybackSpeed:s}=Hs();return O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"8px 12px",background:"rgba(13, 17, 23, 0.9)",borderRadius:6,border:"1px solid rgba(0, 255, 136, 0.2)",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:[O.jsx("span",{style:{color:"#00d4ff"},children:"4D"}),O.jsx(Qt.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:n,style:{width:28,height:28,background:t?"#00ff88":"transparent",color:t?"#0a0e14":"#00ff88",border:"1px solid #00ff88",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:12},children:t?"":""}),O.jsx("input",{type:"range",min:0,max:60,value:i,onChange:o=>e(Number(o.target.value)),style:{width:120,accentColor:"#00ff88"}}),O.jsxs("span",{style:{color:"#e6edf3",minWidth:50},children:["+",i,"min"]}),O.jsxs("select",{value:a,onChange:o=>s(Number(o.target.value)),style:{padding:"4px 8px",background:"rgba(0, 0, 0, 0.3)",color:"#00ff88",border:"1px solid rgba(0, 255, 136, 0.3)",borderRadius:4,fontSize:10},children:[O.jsx("option",{value:1,children:"1x"}),O.jsx("option",{value:5,children:"5x"}),O.jsx("option",{value:10,children:"10x"})]})]})}const LX=[{mode:"cinematic",label:"CINEMATIC",description:"Full effects"},{mode:"professional",label:"PROFESSIONAL",description:"Clean alerts"},{mode:"silent",label:"SILENT",description:"Visual only"}];function OX(){const{presentationMode:i,setPresentationMode:e}=Hs();return O.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4,padding:8,background:"rgba(13, 17, 23, 0.9)",borderRadius:6,border:"1px solid rgba(0, 255, 136, 0.2)"},children:[O.jsx("div",{style:{fontSize:9,color:"#6e7681",fontFamily:"'Orbitron', monospace",letterSpacing:1,marginBottom:4},children:"PRESENTATION MODE"}),LX.map(({mode:t,label:n,description:a})=>O.jsxs(Qt.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>e(t),style:{padding:"6px 12px",background:i===t?"rgba(0, 255, 136, 0.2)":"transparent",color:i===t?"#00ff88":"#8b949e",border:i===t?"1px solid #00ff88":"1px solid transparent",borderRadius:4,fontFamily:"'Rajdhani', sans-serif",fontSize:11,fontWeight:600,cursor:"pointer",textAlign:"left",display:"flex",justifyContent:"space-between"},children:[O.jsx("span",{children:n}),O.jsx("span",{style:{fontSize:9,opacity:.7},children:a})]},t))]})}const NX=[{value:1,label:"1x Real-time"},{value:2,label:"2x Fast"},{value:4,label:"4x Demo",default:!0},{value:8,label:"8x Rapid"},{value:16,label:"16x Ultra"}];function UX(){const{simulationSpeed:i,setSimulationSpeed:e}=Hs(),[t,n]=ue.useState(!1);return O.jsxs("div",{style:{position:"relative"},children:[O.jsxs(Qt.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n(!t),style:{display:"flex",alignItems:"center",gap:6,padding:"6px 12px",background:i>1?"rgba(0, 212, 255, 0.15)":"rgba(0, 255, 136, 0.05)",border:`1px solid ${i>1?"rgba(0, 212, 255, 0.4)":"rgba(0, 255, 136, 0.2)"}`,borderRadius:4,cursor:"pointer",fontFamily:"'JetBrains Mono', monospace",fontSize:11,color:i>1?"#00d4ff":"#6e7681"},children:[O.jsx(Qt.div,{animate:i>1?{opacity:[.5,1,.5]}:{opacity:1},transition:{duration:1,repeat:1/0},children:O.jsx(lW,{size:12})}),O.jsxs("span",{style:{fontWeight:600},children:[i,"x"]}),O.jsx("span",{style:{fontSize:9,color:"#6e7681",textTransform:"uppercase",letterSpacing:.5},children:"SPEED"}),O.jsx(H0,{size:12,style:{opacity:.6}})]}),O.jsx(ls,{children:t&&O.jsxs(O.Fragment,{children:[O.jsx("div",{onClick:()=>n(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99}}),O.jsx(Qt.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.15},style:{position:"absolute",top:"100%",left:0,marginTop:4,minWidth:140,background:"rgba(13, 17, 23, 0.98)",border:"1px solid rgba(0, 255, 136, 0.3)",borderRadius:6,overflow:"hidden",zIndex:100,boxShadow:"0 8px 24px rgba(0, 0, 0, 0.5)"},children:NX.map(a=>O.jsxs("button",{onClick:()=>{e(a.value),n(!1)},style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"10px 12px",background:a.value===i?"rgba(0, 255, 136, 0.15)":"transparent",border:"none",borderBottom:"1px solid rgba(0, 255, 136, 0.1)",color:a.value===i?"#00ff88":"#8b949e",fontFamily:"'Rajdhani', sans-serif",fontSize:12,fontWeight:500,cursor:"pointer",textAlign:"left"},children:[O.jsx("span",{children:a.label}),a.default&&O.jsx("span",{style:{fontSize:9,padding:"2px 4px",background:"rgba(0, 212, 255, 0.2)",borderRadius:2,color:"#00d4ff"},children:"DEFAULT"})]},a.value))})]})})]})}function IX(){const{appMode:i,setAppMode:e}=Hs(),{openMenu:t,closeDemo:n,state:a}=Kf(),s=o=>{o!==i&&(e(o),o==="demo"?t():a.isActive&&n())};return O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:2,padding:2,background:"rgba(0, 0, 0, 0.3)",borderRadius:6,border:"1px solid rgba(0, 255, 136, 0.2)"},children:[O.jsx(jw,{active:i==="demo",onClick:()=>s("demo"),icon:e0,label:"DEMO",activeColor:"#00ff88"}),O.jsx(jw,{active:i==="live",onClick:()=>s("live"),icon:_d,label:"LIVE",activeColor:"#00d4ff"})]})}function jw({active:i,onClick:e,icon:t,label:n,activeColor:a}){return O.jsxs(Qt.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:e,style:{display:"flex",alignItems:"center",gap:6,padding:"6px 14px",background:i?`linear-gradient(135deg, ${a}20, ${a}10)`:"transparent",border:"none",borderRadius:4,cursor:"pointer",fontFamily:"'Orbitron', monospace",fontSize:10,fontWeight:600,letterSpacing:1,color:i?a:"#6e7681",transition:"all 0.2s ease"},children:[O.jsx(Qt.div,{animate:i?{opacity:[.6,1,.6]}:{opacity:.6},transition:{duration:1.5,repeat:1/0},children:O.jsx(t,{size:12})}),n,i&&O.jsx(Qt.div,{initial:{scale:0},animate:{scale:1},style:{width:6,height:6,borderRadius:"50%",background:a,boxShadow:`0 0 8px ${a}`}})]})}function PX(){const{commandLog:i}=Hs(),[e,t]=ue.useState(!0);return i.length===0?null:O.jsxs(Qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{position:"fixed",bottom:60,left:20,width:320,background:"rgba(10, 14, 20, 0.95)",border:"1px solid rgba(0, 212, 255, 0.3)",borderRadius:8,overflow:"hidden",zIndex:1e3,backdropFilter:"blur(10px)",boxShadow:"0 4px 24px rgba(0, 0, 0, 0.5)"},children:[O.jsxs("button",{onClick:()=>t(!e),style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"10px 14px",background:"linear-gradient(90deg, rgba(0, 212, 255, 0.15), transparent)",border:"none",borderBottom:e?"1px solid rgba(0, 212, 255, 0.2)":"none",cursor:"pointer"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[O.jsx(lq,{size:14,style:{color:"#00d4ff"}}),O.jsx("span",{style:{fontFamily:"'Orbitron', monospace",fontSize:10,fontWeight:600,letterSpacing:1,color:"#00d4ff"},children:"ATC COMMAND LOG"}),O.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:9,color:"#6e7681",padding:"2px 6px",background:"rgba(0, 212, 255, 0.1)",borderRadius:4},children:i.length})]}),e?O.jsx(H0,{size:14,style:{color:"#6e7681"}}):O.jsx(sx,{size:14,style:{color:"#6e7681"}})]}),O.jsx(ls,{children:e&&O.jsx(Qt.div,{initial:{height:0},animate:{height:"auto"},exit:{height:0},style:{maxHeight:200,overflow:"auto"},children:i.slice(0,10).map((n,a)=>O.jsx(zX,{entry:n,isLatest:a===0},n.id))})})]})}function zX({entry:i,isLatest:e}){const t=a=>a.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),n=a=>{switch(a){case"heading":return"#00d4ff";case"altitude":return"#00ff88";case"speed":return"#ffaa00";case"squawk":return"#ff3366";case"frequency":return"#aa88ff";case"hold":return"#ff6600";default:return"#8b949e"}};return O.jsxs(Qt.div,{initial:e?{opacity:0,x:-20}:{},animate:{opacity:1,x:0},style:{display:"flex",alignItems:"flex-start",gap:10,padding:"8px 14px",borderBottom:"1px solid rgba(0, 212, 255, 0.1)",background:e?"rgba(0, 212, 255, 0.05)":"transparent"},children:[O.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:9,color:"#6e7681",whiteSpace:"nowrap"},children:t(i.timestamp)}),O.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:10,fontWeight:600,color:n(i.type),minWidth:60},children:i.callsign}),O.jsx("span",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:11,color:"#e6edf3",flex:1},children:i.command})]})}function jy({icon:i,label:e,enabled:t,onToggle:n}){return O.jsxs("button",{onClick:n,style:{display:"flex",alignItems:"center",gap:6,padding:"4px 10px",background:t?"rgba(0, 255, 136, 0.15)":"rgba(100, 100, 100, 0.2)",border:`1px solid ${t?"#00ff88":"#444"}`,borderRadius:4,color:t?"#00ff88":"#666",cursor:"pointer",fontFamily:"'Rajdhani', sans-serif",fontSize:11,fontWeight:600,transition:"all 0.2s"},children:[i,O.jsx("span",{children:e}),O.jsx("span",{style:{padding:"1px 6px",background:t?"#00ff88":"#444",color:t?"#000":"#888",borderRadius:3,fontSize:9,fontWeight:700},children:t?"ON":"OFF"})]})}function BX(){const{narrationEnabled:i,atcAudioEnabled:e,alertSoundsEnabled:t,autoTranslate:n,audioVolume:a,setNarrationEnabled:s,setAtcAudioEnabled:o,setAlertSoundsEnabled:c,setAutoTranslate:f,setAudioVolume:d}=Hs();return O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"4px 12px",background:"rgba(13, 17, 23, 0.9)",borderRadius:6,border:"1px solid rgba(0, 255, 136, 0.15)"},children:[O.jsx(jy,{icon:O.jsx(nm,{size:14}),label:"Narration",enabled:i,onToggle:()=>s(!i)}),O.jsx(jy,{icon:O.jsx(hO,{size:14}),label:"ATC",enabled:e,onToggle:()=>o(!e)}),O.jsx(jy,{icon:O.jsx(aM,{size:14}),label:"Alerts",enabled:t,onToggle:()=>c(!t)}),O.jsx(jy,{icon:O.jsx(pW,{size:14}),label:"Auto-Translate",enabled:n,onToggle:()=>f(!n)}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginLeft:8,paddingLeft:8,borderLeft:"1px solid rgba(0, 255, 136, 0.2)"},children:[O.jsx(nm,{size:14,color:"#00ff88"}),O.jsx("input",{type:"range",min:0,max:100,value:a*100,onChange:g=>d(Number(g.target.value)/100),style:{width:60,accentColor:"#00ff88",cursor:"pointer"}}),O.jsxs("span",{style:{color:"#00ff88",fontSize:10,fontFamily:"'Rajdhani', sans-serif",fontWeight:600,minWidth:28},children:[Math.round(a*100),"%"]})]})]})}function FX({onToggleDataBlocks:i,onToggleTrails:e,showDataBlocks:t,showTrails:n}){const[a,s]=ue.useState(!1),[o,c]=ue.useState(!1),[f,d]=ue.useState(!1),g=ue.useCallback(()=>{window.dispatchEvent(new CustomEvent("resetMapView"))},[]),y=ue.useCallback(()=>{document.fullscreenElement?document.exitFullscreen().then(()=>{d(!1)}):document.documentElement.requestFullscreen().then(()=>{d(!0)}).catch(()=>{})},[]);return O.jsxs(O.Fragment,{children:[O.jsxs("header",{style:{display:"flex",alignItems:"center",gap:16,padding:"12px 20px",background:"linear-gradient(180deg, rgba(13, 17, 23, 0.98), rgba(10, 14, 20, 0.95))",borderBottom:"1px solid rgba(0, 255, 136, 0.2)"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[O.jsx(Qt.div,{animate:{rotate:360},transition:{duration:4,repeat:1/0,ease:"linear"},style:{display:"flex",alignItems:"center",justifyContent:"center"},children:O.jsx(FW,{size:28,style:{color:"#00ff88"}})}),O.jsxs("div",{children:[O.jsx("h1",{style:{fontFamily:"'Orbitron', monospace",fontSize:18,fontWeight:700,letterSpacing:3,color:"#00ff88",textShadow:"0 0 20px rgba(0, 255, 136, 0.5)",margin:0},children:"ATCS-NG"}),O.jsx("div",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:9,letterSpacing:2,color:"#6e7681",textTransform:"uppercase"},children:"Command Center"})]})]}),O.jsx("div",{style:{padding:"4px 8px",background:"rgba(0, 212, 255, 0.1)",border:"1px solid rgba(0, 212, 255, 0.3)",borderRadius:4},children:O.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:9,color:"#00d4ff",letterSpacing:.5},children:"v2.4.0"})}),O.jsx(IX,{}),O.jsx(UX,{}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"6px 14px",background:"rgba(0, 255, 136, 0.05)",border:"1px solid rgba(0, 255, 136, 0.2)",borderRadius:4},children:[O.jsx("span",{style:{fontFamily:"'Orbitron', monospace",fontSize:10,color:"#6e7681",letterSpacing:1},children:"SECTOR"}),O.jsx("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:13,fontWeight:600,color:"#00d4ff"},children:"BOS_33"})]}),O.jsx(BX,{}),O.jsx("div",{style:{flex:1}}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[O.jsx(Ww,{active:t,onClick:i,label:" Data Blocks",tooltip:"Toggle data blocks (D)"}),O.jsx(Ww,{active:n,onClick:e,label:" Trails",tooltip:"Toggle track trails (T)"})]}),O.jsx("div",{style:{width:1,height:24,background:"rgba(0, 255, 136, 0.2)"}}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[O.jsx(Wy,{icon:gO,tooltip:"Reset view",onClick:g}),O.jsx(Wy,{icon:f?MW:SW,tooltip:f?"Exit fullscreen (F11)":"Fullscreen (F11)",onClick:y}),O.jsx(Wy,{icon:yO,tooltip:"Settings",onClick:()=>s(!0)}),O.jsx(Wy,{icon:kj,tooltip:"Help (?)",onClick:()=>c(!0)})]})]}),O.jsx(EX,{isOpen:a,onClose:()=>s(!1)}),O.jsx(wX,{isOpen:o,onClose:()=>c(!1)})]})}function Ww({active:i,onClick:e,label:t,tooltip:n}){return O.jsx("button",{onClick:e,title:n,style:{fontFamily:"'Orbitron', monospace",fontSize:9,fontWeight:600,letterSpacing:1,padding:"6px 12px",background:i?"rgba(0, 255, 136, 0.15)":"transparent",border:`1px solid ${i?"rgba(0, 255, 136, 0.5)":"rgba(0, 255, 136, 0.2)"}`,borderRadius:4,color:i?"#00ff88":"#6e7681",cursor:"pointer",transition:"all 0.2s ease"},children:t})}function Wy({icon:i,tooltip:e,onClick:t}){return O.jsx(Qt.button,{whileHover:{scale:1.1,borderColor:"rgba(0, 255, 136, 0.5)"},whileTap:{scale:.95},onClick:t,title:e,style:{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,background:"transparent",border:"1px solid rgba(0, 255, 136, 0.2)",borderRadius:4,color:"#6e7681",cursor:"pointer",transition:"all 0.2s ease"},children:O.jsx(i,{size:16})})}function kX(){const[i,e]=ue.useState(new Date);return ue.useEffect(()=>{const t=setInterval(()=>e(new Date),1e3);return()=>clearInterval(t)},[]),i}function VX(i){return i.toISOString().slice(11,19)+"Z"}function HX(i){return i.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}function GX({connected:i,trackCount:e,alertCount:t,sectorId:n="BOS_33"}){const a=kX();return O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,padding:"8px 16px",background:"rgba(13, 17, 23, 0.95)",borderTop:"1px solid rgba(0, 255, 136, 0.2)",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:[O.jsx("div",{style:{display:"flex",alignItems:"center",gap:6},children:i?O.jsxs(O.Fragment,{children:[O.jsx(Qt.div,{animate:{opacity:[1,.5,1]},transition:{duration:2,repeat:1/0},children:O.jsx(yq,{size:14,style:{color:"#00ff88"}})}),O.jsx("span",{style:{color:"#00ff88"},children:"CONNECTED"})]}):O.jsxs(O.Fragment,{children:[O.jsx(gq,{size:14,style:{color:"#ff3366"}}),O.jsx("span",{style:{color:"#ff3366"},children:"DISCONNECTED"})]})}),O.jsx("div",{style:{width:1,height:16,background:"rgba(0, 255, 136, 0.2)"}}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,color:"#00d4ff"},children:[O.jsx(_d,{size:12}),O.jsx("span",{style:{fontWeight:600},children:n})]}),O.jsx("div",{style:{width:1,height:16,background:"rgba(0, 255, 136, 0.2)"}}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,color:"#8b949e"},children:[O.jsx(vj,{size:12}),O.jsxs("span",{children:[O.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:e})," TRK"]})]}),O.jsx("div",{style:{display:"flex",alignItems:"center",gap:6,color:"#8b949e"},children:O.jsxs("span",{children:[O.jsx("span",{style:{color:t>0?"#ffaa00":"#00ff88",fontWeight:600},children:t})," ALT"]})}),O.jsx("div",{style:{flex:1}}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:"#6e7681"},children:[O.jsx(eW,{size:12}),O.jsx("span",{style:{color:"#00ff88"},children:"12%"})]}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:"#6e7681"},children:[O.jsx(nW,{size:12}),O.jsx("span",{style:{color:"#00ff88"},children:"2.4GB"})]}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[O.jsx(YW,{size:12,style:{color:"#00ff88"}}),O.jsx("span",{style:{color:"#6e7681"},children:"7/7"})]})]}),O.jsx("div",{style:{width:1,height:16,background:"rgba(0, 255, 136, 0.2)"}}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[O.jsx(M0,{size:12,style:{color:"#6e7681"}}),O.jsx("span",{style:{color:"#8b949e"},children:"LCL"}),O.jsx("span",{style:{color:"#e6edf3",fontWeight:500},children:HX(a)})]}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[O.jsx("span",{style:{color:"#00d4ff"},children:"UTC"}),O.jsx("span",{style:{color:"#00d4ff",fontWeight:600,textShadow:"0 0 8px rgba(0, 212, 255, 0.5)"},children:VX(a)})]})]}),O.jsx("div",{style:{width:1,height:16,background:"rgba(0, 255, 136, 0.2)"}}),O.jsx("div",{style:{display:"flex",alignItems:"center",gap:4,color:"#6e7681",fontSize:10},children:O.jsx("span",{children:"v2.5.0"})})]})}function jX(){const{screenShake:i,clearScreenShake:e,vignetteColor:t}=oC(),[n,a]=ue.useState({x:0,y:0});return ue.useEffect(()=>{if(!i){a({x:0,y:0});return}const s=Date.now(),o=()=>{const c=Date.now()-s;if(c>=i.duration){a({x:0,y:0}),e();return}const f=1-c/i.duration,d=$4(i.intensity*f);a(d),requestAnimationFrame(o)};requestAnimationFrame(o)},[i,e]),O.jsxs(O.Fragment,{children:[O.jsx("div",{style:{position:"fixed",inset:0,transform:`translate(${n.x}px, ${n.y}px)`,pointerEvents:"none",zIndex:9990}}),t&&O.jsx(Qt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",inset:0,background:`radial-gradient(ellipse at center, transparent 30%, ${t} 100%)`,pointerEvents:"none",zIndex:9991}})]})}function WX({tracks:i}){const e=i.length,t=i.filter(d=>d.verticalRateFpm>500).length,n=i.filter(d=>d.verticalRateFpm<-500).length,a=i.filter(d=>Math.abs(d.verticalRateFpm)<=500).length,s=i.length>0?Math.round(i.reduce((d,g)=>d+g.altitudeFt,0)/i.length):0,o=i.length>0?Math.round(i.reduce((d,g)=>d+g.speedKt,0)/i.length):0,f=Math.round(e/15*100);return O.jsxs("div",{className:"panel",style:{display:"flex",flexDirection:"column",gap:0},children:[O.jsxs("div",{className:"panel-header",style:{flexShrink:0},children:[O.jsx(sM,{size:14}),O.jsx("span",{children:"SECTOR STATS"})]}),O.jsxs("div",{style:{padding:12,display:"flex",flexDirection:"column",gap:12},children:[O.jsxs("div",{children:[O.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[O.jsx("span",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:11,color:"#8b949e"},children:"Sector Capacity"}),O.jsxs("span",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:11,color:f>80?"#ff3366":f>60?"#ffaa00":"#00ff88"},children:[f,"%"]})]}),O.jsx("div",{style:{height:4,background:"rgba(0, 255, 136, 0.1)",borderRadius:2,overflow:"hidden"},children:O.jsx(Qt.div,{initial:{width:0},animate:{width:`${f}%`},transition:{duration:.5},style:{height:"100%",background:f>80?"#ff3366":f>60?"#ffaa00":"#00ff88",borderRadius:2}})})]}),O.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:[O.jsx(Tb,{icon:ax,value:t,label:"CLIMB",color:"#00d4ff"}),O.jsx(Tb,{icon:bj,value:a,label:"LEVEL",color:"#00ff88"}),O.jsx(Tb,{icon:ix,value:n,label:"DESC",color:"#ffaa00"})]}),O.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[O.jsxs("div",{style:{background:"rgba(0, 255, 136, 0.05)",border:"1px solid rgba(0, 255, 136, 0.1)",borderRadius:6,padding:10,textAlign:"center"},children:[O.jsxs("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:16,fontWeight:600,color:"#00d4ff"},children:["FL",Math.round(s/100)]}),O.jsx("div",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:9,color:"#6e7681",textTransform:"uppercase",letterSpacing:1},children:"Avg Alt"})]}),O.jsxs("div",{style:{background:"rgba(0, 255, 136, 0.05)",border:"1px solid rgba(0, 255, 136, 0.1)",borderRadius:6,padding:10,textAlign:"center"},children:[O.jsx("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:16,fontWeight:600,color:"#00d4ff"},children:o}),O.jsx("div",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:9,color:"#6e7681",textTransform:"uppercase",letterSpacing:1},children:"Avg GS (kt)"})]})]})]})]})}function Tb({icon:i,value:e,label:t,color:n}){return O.jsxs("div",{style:{background:`${n}10`,border:`1px solid ${n}30`,borderRadius:6,padding:8,textAlign:"center"},children:[O.jsx(i,{size:14,style:{color:n,marginBottom:4}}),O.jsx("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:16,fontWeight:600,color:n},children:e}),O.jsx("div",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:9,color:"#6e7681",letterSpacing:.5},children:t})]})}function qX(){const[i,e]=ue.useState({condition:"cloudy",temperature:45,windSpeed:12,windDirection:270,visibility:10,ceiling:25e3,altimeter:30.12});return ue.useEffect(()=>{const t=setInterval(()=>{e(n=>({...n,windSpeed:Math.max(5,n.windSpeed+(Math.random()-.5)*3),windDirection:(n.windDirection+(Math.random()-.5)*10+360)%360,temperature:n.temperature+(Math.random()-.5)*2}))},1e4);return()=>clearInterval(t)},[]),i}function XX(){const i=qX(),t=(()=>{switch(i.condition){case"clear":return aq;case"cloudy":return zg;case"rain":return Zj;case"snow":return Xj;case"thunderstorm":return Wj;default:return zg}})(),n=i.visibility<5||i.ceiling<3e3,a=i.visibility<3||i.ceiling<1e3,s=a?"IFR":n?"MVFR":"VFR",o=a?"#ff3366":n?"#00d4ff":"#00ff88";return O.jsxs("div",{className:"panel",style:{display:"flex",flexDirection:"column"},children:[O.jsxs("div",{className:"panel-header",style:{flexShrink:0},children:[O.jsx(zg,{size:14}),O.jsx("span",{children:"WEATHER"}),O.jsx("span",{style:{marginLeft:"auto",fontFamily:"'Orbitron', monospace",fontSize:9,padding:"2px 8px",borderRadius:3,background:`${o}20`,border:`1px solid ${o}50`,color:o},children:s})]}),O.jsxs("div",{style:{padding:12},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:12},children:[O.jsx(Qt.div,{animate:{y:[0,-3,0]},transition:{duration:3,repeat:1/0},children:O.jsx(t,{size:32,style:{color:"#00d4ff"}})}),O.jsxs("div",{children:[O.jsxs("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:24,fontWeight:600,color:"#e6edf3"},children:[Math.round(i.temperature),"F"]}),O.jsx("div",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:11,color:"#6e7681",textTransform:"capitalize"},children:i.condition})]})]}),O.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[O.jsx(qy,{icon:xq,label:"Wind",value:`${String(Math.round(i.windDirection)).padStart(3,"0")} @ ${Math.round(i.windSpeed)}kt`}),O.jsx(qy,{icon:rW,label:"Visibility",value:`${i.visibility}+ SM`}),O.jsx(qy,{icon:zg,label:"Ceiling",value:`FL${Math.round(i.ceiling/100)}`}),O.jsx(qy,{icon:aW,label:"Altimeter",value:i.altimeter.toFixed(2)})]}),O.jsx("div",{style:{marginTop:12,padding:8,background:"rgba(0, 212, 255, 0.05)",border:"1px solid rgba(0, 212, 255, 0.2)",borderRadius:4},children:O.jsxs("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:9,color:"#00d4ff",wordBreak:"break-all"},children:["KBOS ",new Date().toISOString().slice(5,16).replace("-","").replace(":","").replace("T",""),"Z ",String(Math.round(i.windDirection)).padStart(3,"0"),String(Math.round(i.windSpeed)).padStart(2,"0"),"KT ",i.visibility,"SM SCT",Math.round(i.ceiling/100).toString().padStart(3,"0")," A",i.altimeter.toFixed(2).replace(".","")]})})]})]})}function qy({icon:i,label:e,value:t}){return O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,padding:6,background:"rgba(0, 255, 136, 0.03)",borderRadius:4},children:[O.jsx(i,{size:12,style:{color:"#6e7681",flexShrink:0}}),O.jsxs("div",{children:[O.jsx("div",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:9,color:"#6e7681"},children:e}),O.jsx("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:10,color:"#e6edf3"},children:t})]})]})}function YX({callsign:i,isOpen:e,onClose:t,onCommandSent:n}){const[a,s]=ue.useState(""),{addCommandLog:o}=Hs(),{state:c}=Kf(),f=ue.useCallback((y,x)=>{const b=`${i}, ${y}`;o({callsign:i,command:b,type:x}),c.isActive&&c.mode==="playing"?zr.speakATC(b):zc.speakATC(b),n?.(b),t()},[i,o,n,t,c.isActive,c.mode]),d=[{label:"Turn Left 30",command:"turn left heading 030",type:"heading",icon:gO},{label:"Turn Right 30",command:"turn right heading 330",type:"heading",icon:Jj},{label:"Climb FL350",command:"climb and maintain flight level 350",type:"altitude",icon:ax},{label:"Descend FL250",command:"descend and maintain flight level 250",type:"altitude",icon:ix},{label:"Reduce Speed",command:"reduce speed to 250 knots",type:"speed",icon:sM},{label:"Hold Position",command:"hold present position, expect further clearance",type:"hold",icon:_d},{label:"Squawk 7700",command:"squawk 7700, declaring emergency",type:"squawk",icon:hm}],g=()=>{a.trim()&&(f(a.trim(),"other"),s(""))};return O.jsx(ls,{children:e&&O.jsxs(O.Fragment,{children:[O.jsx(Qt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.7)",zIndex:9998}}),O.jsxs(Qt.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,background:"rgba(13, 17, 23, 0.98)",border:"1px solid rgba(0, 212, 255, 0.5)",borderRadius:12,overflow:"hidden",zIndex:9999,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.6), 0 0 30px rgba(0, 212, 255, 0.2)"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",background:"linear-gradient(90deg, rgba(0, 212, 255, 0.2), transparent)",borderBottom:"1px solid rgba(0, 212, 255, 0.3)"},children:[O.jsxs("div",{children:[O.jsx("h2",{style:{fontFamily:"'Orbitron', monospace",fontSize:14,fontWeight:600,color:"#00d4ff",margin:0,letterSpacing:2},children:"SEND COMMAND"}),O.jsxs("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:12,color:"#8b949e",marginTop:4},children:["To: ",O.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:i})]})]}),O.jsx("button",{onClick:t,style:{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,background:"transparent",border:"1px solid rgba(255, 51, 102, 0.3)",borderRadius:4,color:"#ff3366",cursor:"pointer"},children:O.jsx(dm,{size:16})})]}),O.jsxs("div",{style:{padding:"16px 20px"},children:[O.jsx("div",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:11,fontWeight:600,color:"#6e7681",textTransform:"uppercase",letterSpacing:1,marginBottom:12},children:"Quick Commands"}),O.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:8},children:d.map(y=>O.jsxs("button",{onClick:()=>f(y.command,y.type),style:{display:"flex",alignItems:"center",gap:8,padding:"10px 12px",background:"rgba(0, 255, 136, 0.05)",border:"1px solid rgba(0, 255, 136, 0.2)",borderRadius:6,color:"#e6edf3",fontFamily:"'Rajdhani', sans-serif",fontSize:12,fontWeight:600,cursor:"pointer",transition:"all 0.15s ease"},onMouseEnter:x=>{x.currentTarget.style.background="rgba(0, 255, 136, 0.15)",x.currentTarget.style.borderColor="rgba(0, 255, 136, 0.5)"},onMouseLeave:x=>{x.currentTarget.style.background="rgba(0, 255, 136, 0.05)",x.currentTarget.style.borderColor="rgba(0, 255, 136, 0.2)"},children:[O.jsx(y.icon,{size:14,style:{color:"#00ff88"}}),y.label]},y.label))})]}),O.jsxs("div",{style:{padding:"0 20px 20px"},children:[O.jsx("div",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:11,fontWeight:600,color:"#6e7681",textTransform:"uppercase",letterSpacing:1,marginBottom:8},children:"Custom Command"}),O.jsxs("div",{style:{display:"flex",gap:8},children:[O.jsx("input",{type:"text",value:a,onChange:y=>s(y.target.value),onKeyDown:y=>y.key==="Enter"&&g(),placeholder:"Enter ATC instruction...",style:{flex:1,padding:"10px 14px",background:"rgba(0, 0, 0, 0.4)",border:"1px solid rgba(0, 212, 255, 0.2)",borderRadius:6,color:"#e6edf3",fontFamily:"'JetBrains Mono', monospace",fontSize:12,outline:"none"}}),O.jsx("button",{onClick:g,disabled:!a.trim(),style:{display:"flex",alignItems:"center",justifyContent:"center",width:44,height:44,background:a.trim()?"rgba(0, 212, 255, 0.2)":"rgba(0, 0, 0, 0.3)",border:`1px solid ${a.trim()?"rgba(0, 212, 255, 0.5)":"rgba(110, 118, 129, 0.3)"}`,borderRadius:6,color:a.trim()?"#00d4ff":"#6e7681",cursor:a.trim()?"pointer":"not-allowed"},children:O.jsx(vO,{size:18})})]})]}),O.jsx("div",{style:{padding:"12px 20px",background:"rgba(0, 0, 0, 0.3)",borderTop:"1px solid rgba(0, 255, 136, 0.1)"},children:O.jsx("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:10,color:"#6e7681",textAlign:"center"},children:"Commands will be spoken and logged to the command panel"})})]})]})})}const Zl={intro:"Mayday mayday! This is Qantas 8. We've regained control. I fought him off! I'm Sarah, a passenger. The pilots are unconscious. I have 489 people on this A380. Please, you have to help us!",contact:{success:"Copy that! I'm looking at the instruments... there's so many buttons...",failure:"Wait, what? I don't understand! Please, you have to be more clear!"},vectors:{success:"Turning now. I found the autopilot heading dial. Is this right?"},approach:{success:"Descending... the runway lights! I can see them! I can see JFK!"},landing:{success:"We made it! We're on the ground! Thank you! Oh god, thank you so much!"}},ZX={intro:[],contact:[{id:"c1",label:"Stay Calm",command:"remain calm, help is on the way",correct:!0,phase:"contact"},{id:"c2",label:"Squawk 7500",command:"squawk 7500",correct:!1,phase:"contact"},{id:"c3",label:"Identify Location",command:"say position and altitude",correct:!1,phase:"contact"}],vectors:[{id:"v1",label:"Turn to JFK",command:"turn left heading 250, direct JFK",correct:!0,phase:"vectors"},{id:"v2",label:"Hold Position",command:"maintain present heading",correct:!1,phase:"vectors"},{id:"v3",label:"Turn Away",command:"turn right heading 090",correct:!1,phase:"vectors"}],approach:[{id:"a1",label:"Begin Descent",command:"descend to 10,000, expect ILS approach runway 31L",correct:!0,phase:"approach"},{id:"a2",label:"Maintain Altitude",command:"maintain flight level 350",correct:!1,phase:"approach"},{id:"a3",label:"Speed Up",command:"increase speed to 400 knots",correct:!1,phase:"approach"}],landing:[{id:"l1",label:"Final Approach",command:"cleared ILS runway 31L, gear down, flaps full",correct:!0,phase:"landing"},{id:"l2",label:"Go Around",command:"go around, climb to 3000",correct:!1,phase:"landing"},{id:"l3",label:"Hold Short",command:"hold short of runway",correct:!1,phase:"landing"}],success:[],failure:[]};function KX({hijackedFlightId:i,onComplete:e}){const[t,n]=ue.useState("intro"),[a,s]=ue.useState(35e3),[o,c]=ue.useState(180),[f,d]=ue.useState(300),[g,y]=ue.useState(45),[x,b]=ue.useState(null),{heroModeActive:M,setHeroModeActive:R,addCommandLog:C}=Hs();ue.useEffect(()=>(M&&Gw.play(),()=>{Gw.stop()}),[M]),ue.useEffect(()=>{t==="intro"&&setTimeout(()=>{b(Zl.intro),zr.speakSarah(Zl.intro,()=>{n("contact")})},1e3)},[t]),ue.useEffect(()=>{if(t!=="intro"&&t!=="success"&&t!=="failure"){const I=setInterval(()=>{d(z=>z<=0?(n("failure"),0):z-1),y(z=>Math.max(0,z-.05)),c(z=>Math.max(0,z-.3))},1e3);return()=>clearInterval(I)}},[t]),ue.useEffect(()=>{o<=5&&a<=3e3&&t==="landing"&&(n("success"),zr.speakSarah(Zl.landing.success,()=>e(!0)))},[o,a,t,e]),ue.useEffect(()=>{(g<=0||f<=0)&&t!=="success"&&t!=="failure"&&(n("failure"),e(!1))},[g,f,t,e]);const E=ue.useCallback(I=>{if(C({callsign:"QFA8",command:`QFA8, ${I.command}`,type:"other"}),zr.speakATC(`Qantas 8, ${I.command}`),I.correct)switch(I.phase){case"contact":setTimeout(()=>{b(Zl.contact.success),zr.speakSarah(Zl.contact.success,()=>{n("vectors")})},2e3);break;case"vectors":setTimeout(()=>{b(Zl.vectors.success),zr.speakSarah(Zl.vectors.success,()=>{n("approach")})},2e3);break;case"approach":s(z=>Math.max(3e3,z-5e3)),setTimeout(()=>{b(Zl.approach.success),zr.speakSarah(Zl.approach.success,()=>{n("landing")})},2e3);break;case"landing":s(z=>Math.max(0,z-3e3)),setTimeout(()=>{n("success")},3e3);break}else b(Zl.contact.failure),zr.speakSarah(Zl.contact.failure)},[C]),N=ue.useMemo(()=>ZX[t]||[],[t]);return ue.useEffect(()=>{if(!M||t==="intro"||t==="success"||t==="failure")return;const z=setTimeout(()=>{const F=N.find(V=>V.correct);F&&zr.speakControllerE97(`Boston Center, Controller Echo-Niner-Seven. Qantas 8 heavy, ${F.command}`,()=>{E(F)})},4e3);return()=>clearTimeout(z)},[t,M,N,E]),M?O.jsx(ls,{children:O.jsxs(Qt.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},style:{position:"fixed",bottom:20,left:"50%",transform:"translateX(-50%)",width:600,background:"rgba(13, 17, 23, 0.98)",border:"2px solid #ff3366",borderRadius:12,overflow:"hidden",zIndex:1e4,boxShadow:"0 0 50px rgba(255, 51, 102, 0.3)"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",background:"linear-gradient(90deg, rgba(255, 51, 102, 0.3), transparent)",borderBottom:"1px solid rgba(255, 51, 102, 0.5)"},children:[O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[O.jsx(Qt.div,{animate:{scale:[1,1.2,1]},transition:{duration:.5,repeat:1/0},children:O.jsx(_O,{size:24,style:{color:"#ff3366"}})}),O.jsxs("div",{children:[O.jsx("h2",{style:{fontFamily:"'Orbitron', monospace",fontSize:16,fontWeight:700,color:"#ff3366",margin:0,letterSpacing:2},children:"HERO MODE - RESCUE QFA8"}),O.jsx("div",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:12,color:"#ffaa00",marginTop:2},children:"312 SOULS ON BOARD | PILOTS INCAPACITATED"})]})]}),O.jsxs("div",{style:{display:"flex",gap:16},children:[O.jsx(Mb,{icon:mO,label:"ALT",value:`${Math.round(a/100)}00 ft`,color:a>1e4?"#ffaa00":"#00ff88"}),O.jsx(Mb,{icon:rq,label:"DIST",value:`${Math.round(o)} nm`,color:o<50?"#00ff88":"#00d4ff"}),O.jsx(Mb,{icon:hm,label:"FUEL",value:`${Math.round(g)} min`,color:g<15?"#ff3366":g<30?"#ffaa00":"#00ff88"})]})]}),x&&O.jsx(Qt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},style:{padding:"16px 20px",background:"rgba(255, 170, 0, 0.1)",borderBottom:"1px solid rgba(255, 170, 0, 0.3)"},children:O.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:12},children:[O.jsx(_d,{size:16,style:{color:"#ffaa00",marginTop:2}}),O.jsxs("div",{children:[O.jsx("div",{style:{fontFamily:"'Orbitron', monospace",fontSize:10,color:"#ffaa00",marginBottom:4},children:"SARAH - QANTAS A380"}),O.jsxs("div",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:15,color:"#e6edf3",lineHeight:1.5,fontStyle:"italic"},children:['"',x,'"']})]})]})},x),t==="success"||t==="failure"?O.jsxs("div",{style:{padding:"40px 20px",textAlign:"center"},children:[t==="success"?O.jsxs(O.Fragment,{children:[O.jsx(Bj,{size:64,style:{color:"#00ff88",marginBottom:16}}),O.jsx("h3",{style:{fontFamily:"'Orbitron', monospace",fontSize:24,color:"#00ff88",marginBottom:8},children:"MISSION SUCCESS"}),O.jsx("p",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:16,color:"#8b949e"},children:"You saved 312 lives. United 787 landed safely at JFK."})]}):O.jsxs(O.Fragment,{children:[O.jsx(Hj,{size:64,style:{color:"#ff3366",marginBottom:16}}),O.jsx("h3",{style:{fontFamily:"'Orbitron', monospace",fontSize:24,color:"#ff3366",marginBottom:8},children:"MISSION FAILED"}),O.jsx("p",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:16,color:"#8b949e"},children:"The aircraft ran out of fuel or time."})]}),O.jsx("button",{onClick:()=>{R(!1),e(t==="success")},style:{marginTop:24,padding:"12px 32px",background:"rgba(0, 212, 255, 0.2)",border:"1px solid rgba(0, 212, 255, 0.5)",borderRadius:6,color:"#00d4ff",fontFamily:"'Rajdhani', sans-serif",fontSize:14,fontWeight:600,cursor:"pointer"},children:"RETURN TO CONTROL"})]}):O.jsxs("div",{style:{padding:"16px 20px"},children:[O.jsx("div",{style:{fontFamily:"'Orbitron', monospace",fontSize:11,color:"#6e7681",marginBottom:12,letterSpacing:1},children:"SELECT COMMAND"}),O.jsx("div",{style:{display:"flex",gap:12},children:N.map(I=>O.jsx("button",{onClick:()=>E(I),style:{flex:1,padding:"14px 16px",background:"rgba(0, 255, 136, 0.05)",border:"1px solid rgba(0, 255, 136, 0.3)",borderRadius:8,color:"#e6edf3",fontFamily:"'Rajdhani', sans-serif",fontSize:14,fontWeight:600,cursor:"pointer",transition:"all 0.15s ease"},onMouseEnter:z=>{z.currentTarget.style.background="rgba(0, 255, 136, 0.15)",z.currentTarget.style.borderColor="rgba(0, 255, 136, 0.6)"},onMouseLeave:z=>{z.currentTarget.style.background="rgba(0, 255, 136, 0.05)",z.currentTarget.style.borderColor="rgba(0, 255, 136, 0.3)"},children:I.label},I.id))})]}),t!=="success"&&t!=="failure"&&t!=="intro"&&O.jsx("div",{style:{height:4,background:"rgba(255, 51, 102, 0.2)"},children:O.jsx(Qt.div,{initial:{width:"100%"},animate:{width:`${f/300*100}%`},style:{height:"100%",background:f<60?"#ff3366":f<120?"#ffaa00":"#00ff88"}})})]})}):null}function Mb({icon:i,label:e,value:t,color:n}){return O.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[O.jsx(i,{size:14,style:{color:n}}),O.jsx("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:11,fontWeight:600,color:n},children:t}),O.jsx("div",{style:{fontFamily:"'Rajdhani', sans-serif",fontSize:9,color:"#6e7681",textTransform:"uppercase"},children:e})]})}function QX(i){const{state:e}=Kf(),{liveOnly:t}=Hs(),n=!t&&e.isActive&&e.mode!=="menu",a=ue.useMemo(()=>n&&e.tracks.length>0?e.tracks:i.tracks,[n,e.tracks,i.tracks]),s=ue.useMemo(()=>n&&e.alerts.length>0?e.alerts:i.alerts,[n,e.alerts,i.alerts]),o=ue.useMemo(()=>n&&e.predictions.length>0?e.predictions:i.predictions,[n,e.predictions,i.predictions]);return{tracks:a,alerts:s,predictions:o,isDemoActive:n}}function JX(){const i=["UAL","DAL","AAL","SWA","JBU","SKW","ASA","FFT"],e=[];for(let t=0;t<24;t++){const n=i[Math.floor(Math.random()*i.length)],a=Math.floor(Math.random()*9e3)+100,s=41.5+(Math.random()-.5)*3,o=-71.5+(Math.random()-.5)*4;e.push({trackId:`TRK-${t.toString().padStart(4,"0")}`,callsign:`${n}${a}`,latitudeDeg:s,longitudeDeg:o,altitudeFt:Math.floor(Math.random()*35e3)+5e3,headingDeg:Math.floor(Math.random()*360),speedKt:Math.floor(Math.random()*200)+250,verticalRateFpm:(Math.random()-.5)*2e3,confidence:.85+Math.random()*.15,sequence:t,updatedAt:new Date().toISOString()})}return e}function $X(i){const[e,t]=ue.useState(new Map),[n,a]=ue.useState(!1),s=ue.useRef(null);return ue.useEffect(()=>{const c=JX(),f=new Map;return c.forEach(d=>f.set(d.trackId,d)),t(f),a(!0),s.current=window.setInterval(()=>{t(d=>{const g=new Map(d);return g.forEach((y,x)=>{const b=y.speedKt/3600,M=y.headingDeg*Math.PI/180,R=b*Math.cos(M)/60,C=b*Math.sin(M)/(60*Math.cos(y.latitudeDeg*Math.PI/180));let E=y.altitudeFt+y.verticalRateFpm/60;E>45e3&&(E=45e3),E<1e3&&(E=1e3);let N=y.headingDeg;Math.random()<.05&&(N=(N+(Math.random()-.5)*10+360)%360);let I=y.verticalRateFpm;Math.random()<.1&&(I=(Math.random()-.5)*2e3),g.set(x,{...y,latitudeDeg:y.latitudeDeg+R,longitudeDeg:y.longitudeDeg+C,altitudeFt:Math.round(E),headingDeg:Math.round(N),verticalRateFpm:Math.round(I),sequence:y.sequence+1,updatedAt:new Date().toISOString()})}),g})},1e3),()=>{s.current&&clearInterval(s.current)}},[i]),{tracks:ue.useCallback(()=>Array.from(e.values()),[e])(),connected:n,trackCount:e.size}}function eY(){return[{alertId:"ALT-001",severity:"CRITICAL",alertType:"LOSS_OF_SEPARATION",message:"Loss of separation between UAL123 and DAL456 - 3.2nm lateral, 400ft vertical",involvedFlightIds:["UAL123","DAL456"],sectorId:"BOS_33",timestamp:new Date(Date.now()-3e4).toISOString(),acknowledged:!1},{alertId:"ALT-002",severity:"WARNING",alertType:"CONFLICT_PREDICTED",message:"Conflict predicted in 4:30 - AAL789 and SWA101 converging at FL350",involvedFlightIds:["AAL789","SWA101"],sectorId:"BOS_33",timestamp:new Date(Date.now()-6e4).toISOString(),acknowledged:!1},{alertId:"ALT-003",severity:"WARNING",alertType:"WEATHER_HAZARD",message:"Severe turbulence reported - FL300-FL380, 20nm radius centered 42.1N 71.5W",involvedFlightIds:[],sectorId:"BOS_33",timestamp:new Date(Date.now()-12e4).toISOString(),acknowledged:!1},{alertId:"ALT-004",severity:"INFO",alertType:"DEVIATION_DETECTED",message:"JBU202 deviating from assigned route - 2.1nm off course",involvedFlightIds:["JBU202"],sectorId:"BOS_34",timestamp:new Date(Date.now()-18e4).toISOString(),acknowledged:!0}]}function tY(){const[i,e]=ue.useState([]);ue.useEffect(()=>{e(eY());const s=setInterval(()=>{if(Math.random()<.1){const o={alertId:`ALT-${Date.now()}`,severity:Math.random()<.3?"CRITICAL":Math.random()<.6?"WARNING":"INFO",alertType:"CONFLICT_PREDICTED",message:"New conflict predicted - check radar display",involvedFlightIds:[],sectorId:"BOS_33",timestamp:new Date().toISOString(),acknowledged:!1};e(c=>[o,...c].slice(0,10))}},5e3);return()=>clearInterval(s)},[]);const t=ue.useCallback(s=>{e(o=>o.map(c=>c.alertId===s?{...c,acknowledged:!0}:c))},[]),n=i.filter(s=>!s.acknowledged).length,a=i.filter(s=>s.severity==="CRITICAL"&&!s.acknowledged).length;return{alerts:i,acknowledgeAlert:t,unacknowledgedCount:n,criticalCount:a}}function nY(){const[i,e]=ue.useState([]);return ue.useEffect(()=>{const t=[{id:"PRED-001",predictionType:"CONFLICT",involvedFlights:["UAL123","DAL456"],probability:.87,predictedTime:new Date(Date.now()+18e4).toISOString(),description:"High probability conflict in 3 minutes at intersection BOSSS"},{id:"PRED-002",predictionType:"CONFLICT",involvedFlights:["AAL789","SWA101"],probability:.65,predictedTime:new Date(Date.now()+27e4).toISOString(),description:"Moderate probability conflict at FL350"}];e(t)},[]),{predictions:i}}function iY(){const[i,e]=ue.useState(null),[t,n]=ue.useState(!0),[a,s]=ue.useState(!0),[o,c]=ue.useState(null),f=ue.useRef(!1),{completeInteraction:d,state:g,currentStep:y}=Kf(),{heroModeActive:x,setHeroModeActive:b,viewMode:M,liveOnly:R}=Hs();ue.useEffect(()=>{const re=()=>{f.current||(f.current=!0,zc.forceInit(),console.log("[Voice] Initialized on user interaction"))};return document.addEventListener("click",re,{once:!0}),document.addEventListener("keydown",re,{once:!0}),()=>{document.removeEventListener("click",re),document.removeEventListener("keydown",re)}},[]);const{tracks:C,connected:E,trackCount:N}=$X("BOS_33"),{alerts:I,acknowledgeAlert:z}=tY(),{predictions:F}=nY(),{tracks:V,alerts:W,predictions:Z,isDemoActive:B}=QX({tracks:C,alerts:I,predictions:F}),H=ue.useCallback(re=>{e(re)},[]),Q=ue.useCallback(re=>{const ve=V.find(q=>q.callsign===re);ve&&e(ve.trackId)},[V]),J=ue.useCallback(re=>{B&&g.pendingInteraction?.target===re&&d(),z(re)},[B,g.pendingInteraction,d,z]),oe=ue.useMemo(()=>i&&V.find(re=>re.trackId===i)||null,[i,V]);return O.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100vh",width:"100vw",overflow:"hidden",background:"var(--color-bg-primary)"},children:[O.jsxs("div",{"data-demo-id":"header",children:[O.jsx(FX,{showDataBlocks:t,showTrails:a,onToggleDataBlocks:()=>n(re=>!re),onToggleTrails:()=>s(re=>!re)}),O.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,padding:"8px 20px",background:"rgba(13, 17, 23, 0.95)",borderBottom:"1px solid rgba(0, 255, 136, 0.1)"},children:[O.jsx(RX,{}),O.jsx(DX,{}),O.jsx("div",{style:{flex:1}}),O.jsx(OX,{})]})]}),O.jsxs("div",{style:{flex:1,display:"grid",gridTemplateColumns:"320px 1fr 360px",gap:8,padding:8,overflow:"hidden"},children:[O.jsxs("div",{"data-demo-id":"strips",style:{display:"flex",flexDirection:"column",gap:8,overflow:"hidden"},children:[O.jsx("div",{style:{flex:1,overflow:"hidden"},children:O.jsx(Cq,{tracks:V,alerts:W,selectedTrackId:i,onSelectTrack:H})}),O.jsx("div",{style:{flexShrink:0},children:O.jsx(WX,{tracks:V})})]}),O.jsxs("div",{"data-demo-id":"radar",style:{borderRadius:8,overflow:"hidden",border:"1px solid rgba(0, 255, 136, 0.2)",position:"relative"},children:[M==="2d"?O.jsx(f5,{tracks:V,selectedTrackId:i,onSelectTrack:H,showDataBlocks:t,showTrails:a}):O.jsx(OV,{tracks:V,selectedTrackId:i,onSelectTrack:H,mapCenter:[42.3601,-71.0589]}),O.jsx(AX,{track:oe,onClose:()=>e(null),onSendMessage:re=>c(re)})]}),O.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8,overflow:"hidden"},children:[O.jsx("div",{"data-demo-id":"alerts",style:{flex:1,overflow:"hidden"},children:O.jsx(vX,{alerts:W,onAcknowledge:J,onSelectFlight:Q})}),O.jsx("div",{"data-demo-id":"predictions",style:{flex:0,maxHeight:"30%",overflow:"hidden"},children:O.jsx(SX,{predictions:Z,onSelectFlight:Q})}),O.jsx("div",{style:{flexShrink:0},children:O.jsx(XX,{})})]})]}),O.jsx(GX,{connected:E,trackCount:B?V.length:N,alertCount:W.filter(re=>!re.acknowledged).length,sectorId:"BOS_33"}),O.jsx("div",{className:"scanline-overlay"}),O.jsx("div",{className:"vignette-overlay"}),!R&&O.jsxs(O.Fragment,{children:[O.jsx(tX,{}),O.jsx(lX,{}),g.mode==="playing"&&y?.atcCommand&&O.jsx(dX,{command:y.atcCommand})]}),O.jsx(fX,{}),O.jsx(PX,{}),O.jsx(YX,{callsign:o||"",isOpen:o!==null,onClose:()=>c(null)}),x&&O.jsx(KX,{hijackedFlightId:"TRK-SD-002",onComplete:re=>{b(!1),console.log("[Hero Mode]",re?"Success!":"Failed")}}),O.jsx(jX,{})]})}function aY(){return O.jsx($q,{children:O.jsx(iY,{})})}E4.createRoot(document.getElementById("root")).render(O.jsx(Nu.StrictMode,{children:O.jsx(aY,{})}));
